var T0=Object.defineProperty,A0=Object.defineProperties;var S0=Object.getOwnPropertyDescriptors;var jg=Object.getOwnPropertySymbols;var W1=Object.prototype.hasOwnProperty,Z1=Object.prototype.propertyIsEnumerable;var Ug=Math.pow,My=(bn,hn,ln)=>hn in bn?T0(bn,hn,{enumerable:!0,configurable:!0,writable:!0,value:ln}):bn[hn]=ln,rn=(bn,hn)=>{for(var ln in hn||(hn={}))W1.call(hn,ln)&&My(bn,ln,hn[ln]);if(jg)for(var ln of jg(hn))Z1.call(hn,ln)&&My(bn,ln,hn[ln]);return bn},Or=(bn,hn)=>A0(bn,S0(hn));var il=(bn,hn)=>{var ln={};for(var ei in bn)W1.call(bn,ei)&&hn.indexOf(ei)<0&&(ln[ei]=bn[ei]);if(bn!=null&&jg)for(var ei of jg(bn))hn.indexOf(ei)<0&&Z1.call(bn,ei)&&(ln[ei]=bn[ei]);return ln};var ya=(bn,hn,ln)=>My(bn,typeof hn!="symbol"?hn+"":hn,ln);var np=(bn,hn,ln)=>new Promise((ei,uu)=>{var qg=xe=>{try{mu(ln.next(xe))}catch(ac){uu(ac)}},Em=xe=>{try{mu(ln.throw(xe))}catch(ac){uu(ac)}},mu=xe=>xe.done?ei(xe.value):Promise.resolve(xe.value).then(qg,Em);mu((ln=ln.apply(bn,hn)).next())});(function(){"use strict";var bn=document.createElement("style");bn.textContent=`@import"https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;0,700;1,400&family=Source+Sans+Pro:wght@300;400;600&display=swap";.leaflet-pane,.leaflet-tile,.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-tile-container,.leaflet-pane>svg,.leaflet-pane>canvas,.leaflet-zoom-box,.leaflet-image-layer,.leaflet-layer{position:absolute;left:0;top:0}.leaflet-container{overflow:hidden}.leaflet-tile,.leaflet-marker-icon,.leaflet-marker-shadow{-webkit-user-select:none;-moz-user-select:none;user-select:none;-webkit-user-drag:none}.leaflet-tile::selection{background:transparent}.leaflet-safari .leaflet-tile{image-rendering:-webkit-optimize-contrast}.leaflet-safari .leaflet-tile-container{width:1600px;height:1600px;-webkit-transform-origin:0 0}.leaflet-marker-icon,.leaflet-marker-shadow{display:block}.leaflet-container .leaflet-overlay-pane svg{max-width:none!important;max-height:none!important}.leaflet-container .leaflet-marker-pane img,.leaflet-container .leaflet-shadow-pane img,.leaflet-container .leaflet-tile-pane img,.leaflet-container img.leaflet-image-layer,.leaflet-container .leaflet-tile{max-width:none!important;max-height:none!important;width:auto;padding:0}.leaflet-container img.leaflet-tile{mix-blend-mode:plus-lighter}.leaflet-container.leaflet-touch-zoom{-ms-touch-action:pan-x pan-y;touch-action:pan-x pan-y}.leaflet-container.leaflet-touch-drag{-ms-touch-action:pinch-zoom;touch-action:none;touch-action:pinch-zoom}.leaflet-container.leaflet-touch-drag.leaflet-touch-zoom{-ms-touch-action:none;touch-action:none}.leaflet-container{-webkit-tap-highlight-color:transparent}.leaflet-container a{-webkit-tap-highlight-color:rgba(51,181,229,.4)}.leaflet-tile{filter:inherit;visibility:hidden}.leaflet-tile-loaded{visibility:inherit}.leaflet-zoom-box{width:0;height:0;-moz-box-sizing:border-box;box-sizing:border-box;z-index:800}.leaflet-overlay-pane svg{-moz-user-select:none}.leaflet-pane{z-index:400}.leaflet-tile-pane{z-index:200}.leaflet-overlay-pane{z-index:400}.leaflet-shadow-pane{z-index:500}.leaflet-marker-pane{z-index:600}.leaflet-tooltip-pane{z-index:650}.leaflet-popup-pane{z-index:700}.leaflet-map-pane canvas{z-index:100}.leaflet-map-pane svg{z-index:200}.leaflet-vml-shape{width:1px;height:1px}.lvml{behavior:url(#default#VML);display:inline-block;position:absolute}.leaflet-control{position:relative;z-index:800;pointer-events:visiblePainted;pointer-events:auto}.leaflet-top,.leaflet-bottom{position:absolute;z-index:1000;pointer-events:none}.leaflet-top{top:0}.leaflet-right{right:0}.leaflet-bottom{bottom:0}.leaflet-left{left:0}.leaflet-control{float:left;clear:both}.leaflet-right .leaflet-control{float:right}.leaflet-top .leaflet-control{margin-top:10px}.leaflet-bottom .leaflet-control{margin-bottom:10px}.leaflet-left .leaflet-control{margin-left:10px}.leaflet-right .leaflet-control{margin-right:10px}.leaflet-fade-anim .leaflet-popup{opacity:0;-webkit-transition:opacity .2s linear;-moz-transition:opacity .2s linear;transition:opacity .2s linear}.leaflet-fade-anim .leaflet-map-pane .leaflet-popup{opacity:1}.leaflet-zoom-animated{-webkit-transform-origin:0 0;-ms-transform-origin:0 0;transform-origin:0 0}svg.leaflet-zoom-animated{will-change:transform}.leaflet-zoom-anim .leaflet-zoom-animated{-webkit-transition:-webkit-transform .25s cubic-bezier(0,0,.25,1);-moz-transition:-moz-transform .25s cubic-bezier(0,0,.25,1);transition:transform .25s cubic-bezier(0,0,.25,1)}.leaflet-zoom-anim .leaflet-tile,.leaflet-pan-anim .leaflet-tile{-webkit-transition:none;-moz-transition:none;transition:none}.leaflet-zoom-anim .leaflet-zoom-hide{visibility:hidden}.leaflet-interactive{cursor:pointer}.leaflet-grab{cursor:-webkit-grab;cursor:-moz-grab;cursor:grab}.leaflet-crosshair,.leaflet-crosshair .leaflet-interactive{cursor:crosshair}.leaflet-popup-pane,.leaflet-control{cursor:auto}.leaflet-dragging .leaflet-grab,.leaflet-dragging .leaflet-grab .leaflet-interactive,.leaflet-dragging .leaflet-marker-draggable{cursor:move;cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing}.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-image-layer,.leaflet-pane>svg path,.leaflet-tile-container{pointer-events:none}.leaflet-marker-icon.leaflet-interactive,.leaflet-image-layer.leaflet-interactive,.leaflet-pane>svg path.leaflet-interactive,svg.leaflet-image-layer.leaflet-interactive path{pointer-events:visiblePainted;pointer-events:auto}.leaflet-container{background:#ddd;outline-offset:1px}.leaflet-container a{color:#0078a8}.leaflet-zoom-box{border:2px dotted #38f;background:#ffffff80}.leaflet-container{font-family:Helvetica Neue,Arial,Helvetica,sans-serif;font-size:12px;font-size:.75rem;line-height:1.5}.leaflet-bar{box-shadow:0 1px 5px #000000a6;border-radius:4px}.leaflet-bar a{background-color:#fff;border-bottom:1px solid #ccc;width:26px;height:26px;line-height:26px;display:block;text-align:center;text-decoration:none;color:#000}.leaflet-bar a,.leaflet-control-layers-toggle{background-position:50% 50%;background-repeat:no-repeat;display:block}.leaflet-bar a:hover,.leaflet-bar a:focus{background-color:#f4f4f4}.leaflet-bar a:first-child{border-top-left-radius:4px;border-top-right-radius:4px}.leaflet-bar a:last-child{border-bottom-left-radius:4px;border-bottom-right-radius:4px;border-bottom:none}.leaflet-bar a.leaflet-disabled{cursor:default;background-color:#f4f4f4;color:#bbb}.leaflet-touch .leaflet-bar a{width:30px;height:30px;line-height:30px}.leaflet-touch .leaflet-bar a:first-child{border-top-left-radius:2px;border-top-right-radius:2px}.leaflet-touch .leaflet-bar a:last-child{border-bottom-left-radius:2px;border-bottom-right-radius:2px}.leaflet-control-zoom-in,.leaflet-control-zoom-out{font:700 18px Lucida Console,Monaco,monospace;text-indent:1px}.leaflet-touch .leaflet-control-zoom-in,.leaflet-touch .leaflet-control-zoom-out{font-size:22px}.leaflet-control-layers{box-shadow:0 1px 5px #0006;background:#fff;border-radius:5px}.leaflet-control-layers-toggle{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAQAAAADQ4RFAAACf0lEQVR4AY1UM3gkARTePdvdoTxXKc+qTl3aU5U6b2Kbkz3Gtq3Zw6ziLGNPzrYx7946Tr6/ee/XeCQ4D3ykPtL5tHno4n0d/h3+xfuWHGLX81cn7r0iTNzjr7LrlxCqPtkbTQEHeqOrTy4Yyt3VCi/IOB0v7rVC7q45Q3Gr5K6jt+3Gl5nCoDD4MtO+j96Wu8atmhGqcNGHObuf8OM/x3AMx38+4Z2sPqzCxRFK2aF2e5Jol56XTLyggAMTL56XOMoS1W4pOyjUcGGQdZxU6qRh7B9Zp+PfpOFlqt0zyDZckPi1ttmIp03jX8gyJ8a/PG2yutpS/Vol7peZIbZcKBAEEheEIAgFbDkz5H6Zrkm2hVWGiXKiF4Ycw0RWKdtC16Q7qe3X4iOMxruonzegJzWaXFrU9utOSsLUmrc0YjeWYjCW4PDMADElpJSSQ0vQvA1Tm6/JlKnqFs1EGyZiFCqnRZTEJJJiKRYzVYzJck2Rm6P4iH+cmSY0YzimYa8l0EtTODFWhcMIMVqdsI2uiTvKmTisIDHJ3od5GILVhBCarCfVRmo4uTjkhrhzkiBV7SsaqS+TzrzM1qpGGUFt28pIySQHR6h7F6KSwGWm97ay+Z+ZqMcEjEWebE7wxCSQwpkhJqoZA5ivCdZDjJepuJ9IQjGGUmuXJdBFUygxVqVsxFsLMbDe8ZbDYVCGKxs+W080max1hFCarCfV+C1KATwcnvE9gRRuMP2prdbWGowm1KB1y+zwMMENkM755cJ2yPDtqhTI6ED1M/82yIDtC/4j4BijjeObflpO9I9MwXTCsSX8jWAFeHr05WoLTJ5G8IQVS/7vwR6ohirYM7f6HzYpogfS3R2OAAAAAElFTkSuQmCC);width:36px;height:36px}.leaflet-retina .leaflet-control-layers-toggle{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAQAAABvcdNgAAAEsklEQVR4AWL4TydIhpZK1kpWOlg0w3ZXP6D2soBtG42jeI6ZmQTHzAxiTbSJsYLjO9HhP+WOmcuhciVnmHVQcJnp7DFvScowZorad/+V/fVzMdMT2g9Cv9guXGv/7pYOrXh2U+RRR3dSd9JRx6bIFc/ekqHI29JC6pJ5ZEh1yWkhkbcFeSjxgx3L2m1cb1C7bceyxA+CNjT/Ifff+/kDk2u/w/33/IeCMOSaWZ4glosqT3DNnNZQ7Cs58/3Ce5HL78iZH/vKVIaYlqzfdLu8Vi7dnvUbEza5Idt36tquZFldl6N5Z/POLof0XLK61mZCmJSWjVF9tEjUluu74IUXvgttuVIHE7YxSkaYhJZam7yiM9Pv82JYfl9nptxZaxMJE4YSPty+vF0+Y2up9d3wwijfjZbabqm/3bZ9ecKHsiGmRflnn1MW4pjHf9oLufyn2z3y1D6n8g8TZhxyzipLNPnAUpsOiuWimg52psrTZYnOWYNDTMuWBWa0tJb4rgq1UvmutpaYEbZlwU3CLJm/ayYjHW5/h7xWLn9Hh1vepDkyf7dE7MtT5LR4e7yYpHrkhOUpEfssBLq2pPhAqoSWKUkk7EDqkmK6RrCEzqDjhNDWNE+XSMvkJRDWlZTmCW0l0PHQGRZY5t1L83kT0Y3l2SItk5JAWHl2dCOBm+fPu3fo5/3v61RMCO9Jx2EEYYhb0rmNQMX/vm7gqOEJLcXTGw3CAuRNeyaPWwjR8PRqKQ1PDA/dpv+on9Shox52WFnx0KY8onHayrJzm87i5h9xGw/tfkev0jGsQizqezUKjk12hBMKJ4kbCqGPVNXudyyrShovGw5CgxsRICxF6aRmSjlBnHRzg7Gx8fKqEubI2rahQYdR1YgDIRQO7JvQyD52hoIQx0mxa0ODtW2Iozn1le2iIRdzwWewedyZzewidueOGqlsn1MvcnQpuVwLGG3/IR1hIKxCjelIDZ8ldqWz25jWAsnldEnK0Zxro19TGVb2ffIZEsIO89EIEDvKMPrzmBOQcKQ+rroye6NgRRxqR4U8EAkz0CL6uSGOm6KQCdWjvjRiSP1BPalCRS5iQYiEIvxuBMJEWgzSoHADcVMuN7IuqqTeyUPq22qFimFtxDyBBJEwNyt6TM88blFHao/6tWWhuuOM4SAK4EI4QmFHA+SEyWlp4EQoJ13cYGzMu7yszEIBOm2rVmHUNqwAIQabISNMRstmdhNWcFLsSm+0tjJH1MdRxO5Nx0WDMhCtgD6OKgZeljJqJKc9po8juskR9XN0Y1lZ3mWjLR9JCO1jRDMd0fpYC2VnvjBSEFg7wBENc0R9HFlb0xvF1+TBEpF68d+DHR6IOWVv2BECtxo46hOFUBd/APU57WIoEwJhIi2CdpyZX0m93BZicktMj1AS9dClteUFAUNUIEygRZCtik5zSxI9MubTBH1GOiHsiLJ3OCoSZkILa9PxiN0EbvhsAo8tdAf9Seepd36lGWHmtNANTv5Jd0z4QYyeo/UEJqxKRpg5LZx6btLPsOaEmdMyxYdlc8LMaJnikDlhclqmPiQnTEpLUIZEwkRagjYkEibQErwhkTAKCLQEbUgkzJQWc/0PstHHcfEdQ+UAAAAASUVORK5CYII=);background-size:26px 26px}.leaflet-touch .leaflet-control-layers-toggle{width:44px;height:44px}.leaflet-control-layers .leaflet-control-layers-list,.leaflet-control-layers-expanded .leaflet-control-layers-toggle{display:none}.leaflet-control-layers-expanded .leaflet-control-layers-list{display:block;position:relative}.leaflet-control-layers-expanded{padding:6px 10px 6px 6px;color:#333;background:#fff}.leaflet-control-layers-scrollbar{overflow-y:scroll;overflow-x:hidden;padding-right:5px}.leaflet-control-layers-selector{margin-top:2px;position:relative;top:1px}.leaflet-control-layers label{display:block;font-size:13px;font-size:1.08333em}.leaflet-control-layers-separator{height:0;border-top:1px solid #ddd;margin:5px -10px 5px -6px}.leaflet-default-icon-path{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=)}.leaflet-container .leaflet-control-attribution{background:#fff;background:#fffc;margin:0}.leaflet-control-attribution,.leaflet-control-scale-line{padding:0 5px;color:#333;line-height:1.4}.leaflet-control-attribution a{text-decoration:none}.leaflet-control-attribution a:hover,.leaflet-control-attribution a:focus{text-decoration:underline}.leaflet-attribution-flag{display:inline!important;vertical-align:baseline!important;width:1em;height:.6669em}.leaflet-left .leaflet-control-scale{margin-left:5px}.leaflet-bottom .leaflet-control-scale{margin-bottom:5px}.leaflet-control-scale-line{border:2px solid #777;border-top:none;line-height:1.1;padding:2px 5px 1px;white-space:nowrap;-moz-box-sizing:border-box;box-sizing:border-box;background:#fffc;text-shadow:1px 1px #fff}.leaflet-control-scale-line:not(:first-child){border-top:2px solid #777;border-bottom:none;margin-top:-2px}.leaflet-control-scale-line:not(:first-child):not(:last-child){border-bottom:2px solid #777}.leaflet-touch .leaflet-control-attribution,.leaflet-touch .leaflet-control-layers,.leaflet-touch .leaflet-bar{box-shadow:none}.leaflet-touch .leaflet-control-layers,.leaflet-touch .leaflet-bar{border:2px solid rgba(0,0,0,.2);background-clip:padding-box}.leaflet-popup{position:absolute;text-align:center;margin-bottom:20px}.leaflet-popup-content-wrapper{padding:1px;text-align:left;border-radius:12px}.leaflet-popup-content{margin:13px 24px 13px 20px;line-height:1.3;font-size:13px;font-size:1.08333em;min-height:1px}.leaflet-popup-content p{margin:1.3em 0}.leaflet-popup-tip-container{width:40px;height:20px;position:absolute;left:50%;margin-top:-1px;margin-left:-20px;overflow:hidden;pointer-events:none}.leaflet-popup-tip{width:17px;height:17px;padding:1px;margin:-10px auto 0;pointer-events:auto;-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg)}.leaflet-popup-content-wrapper,.leaflet-popup-tip{background:#fff;color:#333;box-shadow:0 3px 14px #0006}.leaflet-container a.leaflet-popup-close-button{position:absolute;top:0;right:0;border:none;text-align:center;width:24px;height:24px;font:16px/24px Tahoma,Verdana,sans-serif;color:#757575;text-decoration:none;background:transparent}.leaflet-container a.leaflet-popup-close-button:hover,.leaflet-container a.leaflet-popup-close-button:focus{color:#585858}.leaflet-popup-scrolled{overflow:auto}.leaflet-oldie .leaflet-popup-content-wrapper{-ms-zoom:1}.leaflet-oldie .leaflet-popup-tip{width:24px;margin:0 auto;-ms-filter:"progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678)";filter:progid:DXImageTransform.Microsoft.Matrix(M11=.70710678,M12=.70710678,M21=-.70710678,M22=.70710678)}.leaflet-oldie .leaflet-control-zoom,.leaflet-oldie .leaflet-control-layers,.leaflet-oldie .leaflet-popup-content-wrapper,.leaflet-oldie .leaflet-popup-tip{border:1px solid #999}.leaflet-div-icon{background:#fff;border:1px solid #666}.leaflet-tooltip{position:absolute;padding:6px;background-color:#fff;border:1px solid #fff;border-radius:3px;color:#222;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;box-shadow:0 1px 3px #0006}.leaflet-tooltip.leaflet-interactive{cursor:pointer;pointer-events:auto}.leaflet-tooltip-top:before,.leaflet-tooltip-bottom:before,.leaflet-tooltip-left:before,.leaflet-tooltip-right:before{position:absolute;pointer-events:none;border:6px solid transparent;background:transparent;content:""}.leaflet-tooltip-bottom{margin-top:6px}.leaflet-tooltip-top{margin-top:-6px}.leaflet-tooltip-bottom:before,.leaflet-tooltip-top:before{left:50%;margin-left:-6px}.leaflet-tooltip-top:before{bottom:0;margin-bottom:-12px;border-top-color:#fff}.leaflet-tooltip-bottom:before{top:0;margin-top:-12px;margin-left:-6px;border-bottom-color:#fff}.leaflet-tooltip-left{margin-left:-6px}.leaflet-tooltip-right{margin-left:6px}.leaflet-tooltip-left:before,.leaflet-tooltip-right:before{top:50%;margin-top:-6px}.leaflet-tooltip-left:before{right:0;margin-right:-12px;border-left-color:#fff}.leaflet-tooltip-right:before{left:0;margin-left:-12px;border-right-color:#fff}@media print{.leaflet-control{-webkit-print-color-adjust:exact;print-color-adjust:exact}}.maplibregl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgb(0,0,0,0)}.maplibregl-canvas{left:0;position:absolute;top:0}.maplibregl-map:fullscreen{height:100%;width:100%}.maplibregl-ctrl-group button.maplibregl-ctrl-compass{touch-action:none}.maplibregl-canvas-container.maplibregl-interactive,.maplibregl-ctrl-group button.maplibregl-ctrl-compass{cursor:grab;-webkit-user-select:none;-moz-user-select:none;user-select:none}.maplibregl-canvas-container.maplibregl-interactive.maplibregl-track-pointer{cursor:pointer}.maplibregl-canvas-container.maplibregl-interactive:active,.maplibregl-ctrl-group button.maplibregl-ctrl-compass:active{cursor:grabbing}.maplibregl-canvas-container.maplibregl-touch-zoom-rotate,.maplibregl-canvas-container.maplibregl-touch-zoom-rotate .maplibregl-canvas{touch-action:pan-x pan-y}.maplibregl-canvas-container.maplibregl-touch-drag-pan,.maplibregl-canvas-container.maplibregl-touch-drag-pan .maplibregl-canvas{touch-action:pinch-zoom}.maplibregl-canvas-container.maplibregl-touch-zoom-rotate.maplibregl-touch-drag-pan,.maplibregl-canvas-container.maplibregl-touch-zoom-rotate.maplibregl-touch-drag-pan .maplibregl-canvas{touch-action:none}.maplibregl-canvas-container.maplibregl-touch-drag-pan.maplibregl-cooperative-gestures,.maplibregl-canvas-container.maplibregl-touch-drag-pan.maplibregl-cooperative-gestures .maplibregl-canvas{touch-action:pan-x pan-y}.maplibregl-ctrl-bottom-left,.maplibregl-ctrl-bottom-right,.maplibregl-ctrl-top-left,.maplibregl-ctrl-top-right{pointer-events:none;position:absolute;z-index:2}.maplibregl-ctrl-top-left{left:0;top:0}.maplibregl-ctrl-top-right{right:0;top:0}.maplibregl-ctrl-bottom-left{bottom:0;left:0}.maplibregl-ctrl-bottom-right{bottom:0;right:0}.maplibregl-ctrl{clear:both;pointer-events:auto;transform:translate(0)}.maplibregl-ctrl-top-left .maplibregl-ctrl{float:left;margin:10px 0 0 10px}.maplibregl-ctrl-top-right .maplibregl-ctrl{float:right;margin:10px 10px 0 0}.maplibregl-ctrl-bottom-left .maplibregl-ctrl{float:left;margin:0 0 10px 10px}.maplibregl-ctrl-bottom-right .maplibregl-ctrl{float:right;margin:0 10px 10px 0}.maplibregl-ctrl-group{background:#fff;border-radius:4px}.maplibregl-ctrl-group:not(:empty){box-shadow:0 0 0 2px #0000001a}@media(forced-colors:active){.maplibregl-ctrl-group:not(:empty){box-shadow:0 0 0 2px ButtonText}}.maplibregl-ctrl-group button{background-color:transparent;border:0;box-sizing:border-box;cursor:pointer;display:block;height:29px;outline:none;padding:0;width:29px}.maplibregl-ctrl-group button+button{border-top:1px solid #ddd}.maplibregl-ctrl button .maplibregl-ctrl-icon{background-position:50%;background-repeat:no-repeat;display:block;height:100%;width:100%}@media(forced-colors:active){.maplibregl-ctrl-icon{background-color:transparent}.maplibregl-ctrl-group button+button{border-top:1px solid ButtonText}}.maplibregl-ctrl button::-moz-focus-inner{border:0;padding:0}.maplibregl-ctrl-attrib-button:focus,.maplibregl-ctrl-group button:focus{box-shadow:0 0 2px 2px #0096ff}.maplibregl-ctrl button:disabled{cursor:not-allowed}.maplibregl-ctrl button:disabled .maplibregl-ctrl-icon{opacity:.25}@media(hover:hover){.maplibregl-ctrl button:not(:disabled):hover{background-color:#0000000d}}.maplibregl-ctrl button:not(:disabled):active{background-color:#0000000d}.maplibregl-ctrl-group button:focus:focus-visible{box-shadow:0 0 2px 2px #0096ff}.maplibregl-ctrl-group button:focus:not(:focus-visible){box-shadow:none}.maplibregl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.maplibregl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.maplibregl-ctrl-group button:focus:only-child{border-radius:inherit}.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5'/%3E%3C/svg%3E")}@media(forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5'/%3E%3C/svg%3E")}}@media(forced-colors:active)and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5'/%3E%3C/svg%3E")}}.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1z'/%3E%3C/svg%3E")}@media(forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1z'/%3E%3C/svg%3E")}}@media(forced-colors:active)and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1z'/%3E%3C/svg%3E")}}.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='m10.5 14 4-8 4 8z'/%3E%3Cpath fill='%23ccc' d='m10.5 16 4 8 4-8z'/%3E%3C/svg%3E")}@media(forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='m10.5 14 4-8 4 8z'/%3E%3Cpath fill='%23ccc' d='m10.5 16 4 8 4-8z'/%3E%3C/svg%3E")}}@media(forced-colors:active)and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='m10.5 14 4-8 4 8z'/%3E%3Cpath fill='%23ccc' d='m10.5 16 4 8 4-8z'/%3E%3C/svg%3E")}}.maplibregl-ctrl button.maplibregl-ctrl-globe .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' fill='none' stroke='%23333' viewBox='0 0 22 22'%3E%3Ccircle cx='11' cy='11' r='8.5'/%3E%3Cpath d='M17.5 11c0 4.819-3.02 8.5-6.5 8.5S4.5 15.819 4.5 11 7.52 2.5 11 2.5s6.5 3.681 6.5 8.5Z'/%3E%3Cpath d='M13.5 11c0 2.447-.331 4.64-.853 6.206-.262.785-.562 1.384-.872 1.777-.314.399-.58.517-.775.517s-.461-.118-.775-.517c-.31-.393-.61-.992-.872-1.777C8.831 15.64 8.5 13.446 8.5 11s.331-4.64.853-6.206c.262-.785.562-1.384.872-1.777.314-.399.58-.517.775-.517s.461.118.775.517c.31.393.61.992.872 1.777.522 1.565.853 3.76.853 6.206Z'/%3E%3Cpath d='M11 7.5c-1.909 0-3.622-.166-4.845-.428-.616-.132-1.08-.283-1.379-.434a1.3 1.3 0 0 1-.224-.138q.07-.058.224-.138c.299-.151.763-.302 1.379-.434C7.378 5.666 9.091 5.5 11 5.5s3.622.166 4.845.428c.616.132 1.08.283 1.379.434.105.053.177.1.224.138q-.07.058-.224.138c-.299.151-.763.302-1.379.434-1.223.262-2.936.428-4.845.428ZM4.486 6.436ZM11 16.5c-1.909 0-3.622-.166-4.845-.428-.616-.132-1.08-.283-1.379-.434a1.3 1.3 0 0 1-.224-.138 1.3 1.3 0 0 1 .224-.138c.299-.151.763-.302 1.379-.434C7.378 14.666 9.091 14.5 11 14.5s3.622.166 4.845.428c.616.132 1.08.283 1.379.434.105.053.177.1.224.138a1.3 1.3 0 0 1-.224.138c-.299.151-.763.302-1.379.434-1.223.262-2.936.428-4.845.428Zm-6.514-1.064ZM11 12.5c-2.46 0-4.672-.222-6.255-.574-.796-.177-1.406-.38-1.805-.59a1.5 1.5 0 0 1-.39-.272.3.3 0 0 1-.047-.064.3.3 0 0 1 .048-.064c.066-.073.189-.167.389-.272.399-.21 1.009-.413 1.805-.59C6.328 9.722 8.54 9.5 11 9.5s4.672.222 6.256.574c.795.177 1.405.38 1.804.59.2.105.323.2.39.272a.3.3 0 0 1 .047.064.3.3 0 0 1-.048.064 1.4 1.4 0 0 1-.389.272c-.399.21-1.009.413-1.804.59-1.584.352-3.796.574-6.256.574Zm-8.501-1.51v.002zm0 .018v.002zm17.002.002v-.002zm0-.018v-.002z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-globe-enabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' fill='none' stroke='%2333b5e5' viewBox='0 0 22 22'%3E%3Ccircle cx='11' cy='11' r='8.5'/%3E%3Cpath d='M17.5 11c0 4.819-3.02 8.5-6.5 8.5S4.5 15.819 4.5 11 7.52 2.5 11 2.5s6.5 3.681 6.5 8.5Z'/%3E%3Cpath d='M13.5 11c0 2.447-.331 4.64-.853 6.206-.262.785-.562 1.384-.872 1.777-.314.399-.58.517-.775.517s-.461-.118-.775-.517c-.31-.393-.61-.992-.872-1.777C8.831 15.64 8.5 13.446 8.5 11s.331-4.64.853-6.206c.262-.785.562-1.384.872-1.777.314-.399.58-.517.775-.517s.461.118.775.517c.31.393.61.992.872 1.777.522 1.565.853 3.76.853 6.206Z'/%3E%3Cpath d='M11 7.5c-1.909 0-3.622-.166-4.845-.428-.616-.132-1.08-.283-1.379-.434a1.3 1.3 0 0 1-.224-.138q.07-.058.224-.138c.299-.151.763-.302 1.379-.434C7.378 5.666 9.091 5.5 11 5.5s3.622.166 4.845.428c.616.132 1.08.283 1.379.434.105.053.177.1.224.138q-.07.058-.224.138c-.299.151-.763.302-1.379.434-1.223.262-2.936.428-4.845.428ZM4.486 6.436ZM11 16.5c-1.909 0-3.622-.166-4.845-.428-.616-.132-1.08-.283-1.379-.434a1.3 1.3 0 0 1-.224-.138 1.3 1.3 0 0 1 .224-.138c.299-.151.763-.302 1.379-.434C7.378 14.666 9.091 14.5 11 14.5s3.622.166 4.845.428c.616.132 1.08.283 1.379.434.105.053.177.1.224.138a1.3 1.3 0 0 1-.224.138c-.299.151-.763.302-1.379.434-1.223.262-2.936.428-4.845.428Zm-6.514-1.064ZM11 12.5c-2.46 0-4.672-.222-6.255-.574-.796-.177-1.406-.38-1.805-.59a1.5 1.5 0 0 1-.39-.272.3.3 0 0 1-.047-.064.3.3 0 0 1 .048-.064c.066-.073.189-.167.389-.272.399-.21 1.009-.413 1.805-.59C6.328 9.722 8.54 9.5 11 9.5s4.672.222 6.256.574c.795.177 1.405.38 1.804.59.2.105.323.2.39.272a.3.3 0 0 1 .047.064.3.3 0 0 1-.048.064 1.4 1.4 0 0 1-.389.272c-.399.21-1.009.413-1.804.59-1.584.352-3.796.574-6.256.574Zm-8.501-1.51v.002zm0 .018v.002zm17.002.002v-.002zm0-.018v-.002z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-terrain .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' fill='%23333' viewBox='0 0 22 22'%3E%3Cpath d='m1.754 13.406 4.453-4.851 3.09 3.09 3.281 3.277.969-.969-3.309-3.312 3.844-4.121 6.148 6.886h1.082v-.855l-7.207-8.07-4.84 5.187L6.169 6.57l-5.48 5.965v.871ZM.688 16.844h20.625v1.375H.688Zm0 0'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-terrain-enabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' fill='%2333b5e5' viewBox='0 0 22 22'%3E%3Cpath d='m1.754 13.406 4.453-4.851 3.09 3.09 3.281 3.277.969-.969-3.309-3.312 3.844-4.121 6.148 6.886h1.082v-.855l-7.207-8.07-4.84 5.187L6.169 6.57l-5.48 5.965v.871ZM.688 16.844h20.625v1.375H.688Zm0 0'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23aaa' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath fill='red' d='m14 5 1 1-9 9-1-1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e58978' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e54e33' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-waiting .maplibregl-ctrl-icon{animation:maplibregl-spin 2s linear infinite}@media(forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23999' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath fill='red' d='m14 5 1 1-9 9-1-1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e58978' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e54e33' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}}@media(forced-colors:active)and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23666' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath fill='red' d='m14 5 1 1-9 9-1-1z'/%3E%3C/svg%3E")}}@keyframes maplibregl-spin{0%{transform:rotate(0)}to{transform:rotate(1turn)}}a.maplibregl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath fill='%23000' fill-opacity='.4' fill-rule='evenodd' d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.25 1.25 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.25 1.25 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5 5 0 0 1 .314-.787l.009-.016a4.6 4.6 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.6 4.6 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4q.47.48.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.42 2.42 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.45 2.45 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675q.318.302.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.8 4.8 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.4 3.4 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.25 1.25 0 0 1 .689 1.004 4.7 4.7 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528q-.001.515-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.8 5.8 0 0 1-.548-2.512q0-.429.053-.843a1.3 1.3 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.8 4.8 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.5 4.5 0 0 1-1.935-.424 1.25 1.25 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.4 2.4 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.7 4.7 0 0 1-1.782 1.884 4.77 4.77 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.5 4.5 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a5 5 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.25 1.25 0 0 1-1.115.676h-.098a1.25 1.25 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15q.493-.356.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267q-.133-.329-.526-.658l-.032-.028a3.2 3.2 0 0 0-.668-.428l-.27-.12a3.3 3.3 0 0 0-1.235-.23q-1.136-.001-1.974.493a3.36 3.36 0 0 0-1.3 1.382q-.445.89-.444 2.074 0 1.2.51 2.107a3.8 3.8 0 0 0 1.382 1.381 3.9 3.9 0 0 0 1.893.477q.795 0 1.455-.33zm-2.789-5.38q-.576.675-.575 1.762 0 1.102.559 1.794.576.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.2 2.2 0 0 0 .468-.29l.178-.161a2.2 2.2 0 0 0 .397-.561q.244-.5.244-1.15v-.115q0-.708-.296-1.267l-.043-.077a2.2 2.2 0 0 0-.633-.709l-.13-.086-.047-.028a2.1 2.1 0 0 0-1.073-.285q-1.052 0-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.96.96 0 0 0-.353-.389.85.85 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.6 2.6 0 0 0 .331.423q.319.33.755.548l.173.074q.65.255 1.49.255 1.02 0 1.844-.493a3.45 3.45 0 0 0 1.316-1.4q.493-.904.493-2.089 0-1.909-.988-2.913-.988-1.02-2.584-1.02-.898 0-1.575.347a3 3 0 0 0-.415.262l-.199.166a3.4 3.4 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138q.206.29.48.5l.155.11.053.034q.51.296 1.119.297 1.07 0 1.645-.675.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.435 0-.835.16a2 2 0 0 0-.284.136 2 2 0 0 0-.363.254 2.2 2.2 0 0 0-.46.569l-.082.162a2.6 2.6 0 0 0-.213 1.072v.115q0 .707.296 1.267l.135.211zm.964-.818a1.1 1.1 0 0 0 .367.385.94.94 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a1 1 0 0 0-.503.135l-.012.007a.86.86 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.4 1.4 0 0 0 .14.66zm15.7-6.222q.347-.346.346-.856a1.05 1.05 0 0 0-.345-.79 1.18 1.18 0 0 0-.84-.329q-.51 0-.855.33a1.05 1.05 0 0 0-.346.79q0 .51.346.855.345.346.856.346.51 0 .839-.346zm4.337 9.314.033-1.332q.191.403.59.747l.098.081a4 4 0 0 0 .316.224l.223.122a3.2 3.2 0 0 0 1.44.322 3.8 3.8 0 0 0 1.875-.477 3.5 3.5 0 0 0 1.382-1.366q.527-.89.526-2.09 0-1.184-.444-2.073a3.24 3.24 0 0 0-1.283-1.399q-.823-.51-1.942-.51a3.5 3.5 0 0 0-1.527.344l-.086.043-.165.09a3 3 0 0 0-.33.214q-.432.315-.656.707a2 2 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.5 2.5 0 0 0 .566.7q.117.098.245.18l.144.08a2.1 2.1 0 0 0 .975.232q1.07 0 1.645-.675.576-.69.576-1.778 0-1.102-.576-1.777-.56-.691-1.645-.692a2.2 2.2 0 0 0-1.015.235q-.22.113-.415.282l-.15.142a2.1 2.1 0 0 0-.42.594q-.223.479-.223 1.1v.115q0 .705.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.87.87 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.1 1.1 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013q.345-.13.724-.14l.069-.002q.493 0 .642.099l.247-1.794q-.196-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2 2 0 0 0-.411.148 2.2 2.2 0 0 0-.4.249 2.5 2.5 0 0 0-.485.499 2.7 2.7 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884q0-.546.159-.943a1.5 1.5 0 0 1 .466-.636 2.5 2.5 0 0 1 .399-.253 2 2 0 0 1 .224-.099zm9.784 2.656.05-.922q0-1.743-.856-2.698-.838-.97-2.584-.97-1.119-.001-2.007.493a3.46 3.46 0 0 0-1.4 1.382q-.493.906-.493 2.106 0 1.07.428 1.975.428.89 1.332 1.432.906.526 2.255.526.973 0 1.668-.185l.044-.012.135-.04q.613-.184.984-.421l-.542-1.267q-.3.162-.642.274l-.297.087q-.51.131-1.3.131-.954 0-1.497-.444a1.6 1.6 0 0 1-.192-.193q-.366-.44-.512-1.234l-.004-.021zm-5.427-1.256-.003.022h3.752v-.138q-.011-.727-.288-1.118a1 1 0 0 0-.156-.176q-.46-.428-1.316-.428-.986 0-1.494.604-.379.45-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z'/%3E%3Cpath fill='%23fff' d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81q-1.02 0-1.893-.478a3.8 3.8 0 0 1-1.381-1.382q-.51-.906-.51-2.106 0-1.185.444-2.074a3.36 3.36 0 0 1 1.3-1.382q.839-.494 1.974-.494a3.3 3.3 0 0 1 1.234.231 3.3 3.3 0 0 1 .97.575q.396.33.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332q-.279.593-1.02 1.053a3.17 3.17 0 0 1-1.662.444zm.296-1.482q.938 0 1.58-.642.642-.66.642-1.711v-.115q0-.708-.296-1.267a2.2 2.2 0 0 0-.807-.872 2.1 2.1 0 0 0-1.119-.313q-1.053 0-1.629.692-.575.675-.575 1.76 0 1.103.559 1.795.577.675 1.645.675zm6.521-6.237h1.711v1.4q.906-1.597 2.83-1.597 1.596 0 2.584 1.02.988 1.005.988 2.914 0 1.185-.493 2.09a3.46 3.46 0 0 1-1.316 1.399 3.5 3.5 0 0 1-1.844.493q-.954 0-1.662-.329a2.67 2.67 0 0 1-1.086-.97l.017 5.134h-1.728zm4.048 6.22q1.07 0 1.645-.674.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.592 0-1.12.296-.51.28-.822.823-.296.527-.296 1.234v.115q0 .708.296 1.267.313.543.823.855.51.296 1.119.297z'/%3E%3Cpath fill='%23e1e3e9' d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.16 1.16 0 0 1-.856-.346 1.17 1.17 0 0 1-.346-.856 1.05 1.05 0 0 1 .346-.79q.346-.329.856-.329.494 0 .839.33a1.05 1.05 0 0 1 .345.79 1.16 1.16 0 0 1-.345.855q-.33.346-.84.346zm7.875 9.133a3.17 3.17 0 0 1-1.662-.444q-.723-.46-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283q.279-.658 1.086-1.119a3.5 3.5 0 0 1 1.778-.477q1.119 0 1.942.51a3.24 3.24 0 0 1 1.283 1.4q.445.888.444 2.072 0 1.201-.526 2.09a3.5 3.5 0 0 1-1.382 1.366 3.8 3.8 0 0 1-1.876.477zm-.296-1.481q1.069 0 1.645-.675.577-.69.577-1.778 0-1.102-.577-1.776-.56-.691-1.645-.692a2.12 2.12 0 0 0-1.58.659q-.642.641-.642 1.694v.115q0 .71.296 1.267a2.4 2.4 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481q.263-.757.856-1.217a2.14 2.14 0 0 1 1.349-.46q.527 0 .724.098l-.247 1.794q-.149-.099-.642-.099-.774 0-1.416.494-.626.493-.626 1.58v3.883h-1.777V9.242zm9.534 7.718q-1.35 0-2.255-.526-.904-.543-1.332-1.432a4.6 4.6 0 0 1-.428-1.975q0-1.2.493-2.106a3.46 3.46 0 0 1 1.4-1.382q.889-.495 2.007-.494 1.744 0 2.584.97.855.956.856 2.7 0 .444-.05.92h-5.43q.18 1.005.708 1.45.542.443 1.497.443.79 0 1.3-.131a4 4 0 0 0 .938-.362l.542 1.267q-.411.263-1.119.46-.708.198-1.711.197zm1.596-4.558q.016-1.02-.444-1.432-.46-.428-1.316-.428-1.728 0-1.991 1.86z'/%3E%3Cpath d='M5.074 15.948a.484.657 0 0 0-.486.659v1.84a.484.657 0 0 0 .486.659h4.101a.484.657 0 0 0 .486-.659v-1.84a.484.657 0 0 0-.486-.659zm3.56 1.16H5.617v.838h3.017z' style='fill:%23fff;fill-rule:evenodd;stroke-width:1.03600001'/%3E%3Cg style='stroke-width:1.12603545'%3E%3Cpath d='M-9.408-1.416c-3.833-.025-7.056 2.912-7.08 6.615-.02 3.08 1.653 4.832 3.107 6.268.903.892 1.721 1.74 2.32 2.902l-.525-.004c-.543-.003-.992.304-1.24.639a1.87 1.87 0 0 0-.362 1.121l-.011 1.877c-.003.402.104.787.347 1.125.244.338.688.653 1.23.656l4.142.028c.542.003.99-.306 1.238-.641a1.87 1.87 0 0 0 .363-1.121l.012-1.875a1.87 1.87 0 0 0-.348-1.127c-.243-.338-.688-.653-1.23-.656l-.518-.004c.597-1.145 1.425-1.983 2.348-2.87 1.473-1.414 3.18-3.149 3.2-6.226-.016-3.59-2.923-6.684-6.993-6.707m-.006 1.1v.002c3.274.02 5.92 2.532 5.9 5.6-.017 2.706-1.39 4.026-2.863 5.44-1.034.994-2.118 2.033-2.814 3.633-.018.041-.052.055-.075.065q-.013.004-.02.01a.34.34 0 0 1-.226.084.34.34 0 0 1-.224-.086l-.092-.077c-.699-1.615-1.768-2.669-2.781-3.67-1.454-1.435-2.797-2.762-2.78-5.478.02-3.067 2.7-5.545 5.975-5.523m-.02 2.826c-1.62-.01-2.944 1.315-2.955 2.96-.01 1.646 1.295 2.988 2.916 2.999h.002c1.621.01 2.943-1.316 2.953-2.961.011-1.646-1.294-2.988-2.916-2.998m-.005 1.1c1.017.006 1.829.83 1.822 1.89s-.83 1.874-1.848 1.867c-1.018-.006-1.829-.83-1.822-1.89s.83-1.874 1.848-1.868m-2.155 11.857 4.14.025c.271.002.49.305.487.676l-.013 1.875c-.003.37-.224.67-.495.668l-4.14-.025c-.27-.002-.487-.306-.485-.676l.012-1.875c.003-.37.224-.67.494-.668' style='color:%23000;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:%23000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:evenodd;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000;solid-opacity:1;vector-effect:none;fill:%23000;fill-opacity:.4;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-9.415-.316C-12.69-.338-15.37 2.14-15.39 5.207c-.017 2.716 1.326 4.041 2.78 5.477 1.013 1 2.081 2.055 2.78 3.67l.092.076a.34.34 0 0 0 .225.086.34.34 0 0 0 .227-.083l.019-.01c.022-.009.057-.024.074-.064.697-1.6 1.78-2.64 2.814-3.634 1.473-1.414 2.847-2.733 2.864-5.44.02-3.067-2.627-5.58-5.901-5.601m-.057 8.784c1.621.011 2.944-1.315 2.955-2.96.01-1.646-1.295-2.988-2.916-2.999-1.622-.01-2.945 1.315-2.955 2.96s1.295 2.989 2.916 3' style='clip-rule:evenodd;fill:%23e1e3e9;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-11.594 15.465c-.27-.002-.492.297-.494.668l-.012 1.876c-.003.371.214.673.485.675l4.14.027c.271.002.492-.298.495-.668l.012-1.877c.003-.37-.215-.672-.485-.674z' style='clip-rule:evenodd;fill:%23fff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3C/g%3E%3C/svg%3E");background-repeat:no-repeat;cursor:pointer;display:block;height:23px;margin:0 0 -4px -4px;overflow:hidden;width:88px}a.maplibregl-ctrl-logo.maplibregl-compact{width:14px}@media(forced-colors:active){a.maplibregl-ctrl-logo{background-color:transparent;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath fill='%23000' fill-opacity='.4' fill-rule='evenodd' d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.25 1.25 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.25 1.25 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5 5 0 0 1 .314-.787l.009-.016a4.6 4.6 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.6 4.6 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4q.47.48.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.42 2.42 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.45 2.45 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675q.318.302.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.8 4.8 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.4 3.4 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.25 1.25 0 0 1 .689 1.004 4.7 4.7 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528q-.001.515-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.8 5.8 0 0 1-.548-2.512q0-.429.053-.843a1.3 1.3 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.8 4.8 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.5 4.5 0 0 1-1.935-.424 1.25 1.25 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.4 2.4 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.7 4.7 0 0 1-1.782 1.884 4.77 4.77 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.5 4.5 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a5 5 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.25 1.25 0 0 1-1.115.676h-.098a1.25 1.25 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15q.493-.356.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267q-.133-.329-.526-.658l-.032-.028a3.2 3.2 0 0 0-.668-.428l-.27-.12a3.3 3.3 0 0 0-1.235-.23q-1.136-.001-1.974.493a3.36 3.36 0 0 0-1.3 1.382q-.445.89-.444 2.074 0 1.2.51 2.107a3.8 3.8 0 0 0 1.382 1.381 3.9 3.9 0 0 0 1.893.477q.795 0 1.455-.33zm-2.789-5.38q-.576.675-.575 1.762 0 1.102.559 1.794.576.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.2 2.2 0 0 0 .468-.29l.178-.161a2.2 2.2 0 0 0 .397-.561q.244-.5.244-1.15v-.115q0-.708-.296-1.267l-.043-.077a2.2 2.2 0 0 0-.633-.709l-.13-.086-.047-.028a2.1 2.1 0 0 0-1.073-.285q-1.052 0-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.96.96 0 0 0-.353-.389.85.85 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.6 2.6 0 0 0 .331.423q.319.33.755.548l.173.074q.65.255 1.49.255 1.02 0 1.844-.493a3.45 3.45 0 0 0 1.316-1.4q.493-.904.493-2.089 0-1.909-.988-2.913-.988-1.02-2.584-1.02-.898 0-1.575.347a3 3 0 0 0-.415.262l-.199.166a3.4 3.4 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138q.206.29.48.5l.155.11.053.034q.51.296 1.119.297 1.07 0 1.645-.675.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.435 0-.835.16a2 2 0 0 0-.284.136 2 2 0 0 0-.363.254 2.2 2.2 0 0 0-.46.569l-.082.162a2.6 2.6 0 0 0-.213 1.072v.115q0 .707.296 1.267l.135.211zm.964-.818a1.1 1.1 0 0 0 .367.385.94.94 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a1 1 0 0 0-.503.135l-.012.007a.86.86 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.4 1.4 0 0 0 .14.66zm15.7-6.222q.347-.346.346-.856a1.05 1.05 0 0 0-.345-.79 1.18 1.18 0 0 0-.84-.329q-.51 0-.855.33a1.05 1.05 0 0 0-.346.79q0 .51.346.855.345.346.856.346.51 0 .839-.346zm4.337 9.314.033-1.332q.191.403.59.747l.098.081a4 4 0 0 0 .316.224l.223.122a3.2 3.2 0 0 0 1.44.322 3.8 3.8 0 0 0 1.875-.477 3.5 3.5 0 0 0 1.382-1.366q.527-.89.526-2.09 0-1.184-.444-2.073a3.24 3.24 0 0 0-1.283-1.399q-.823-.51-1.942-.51a3.5 3.5 0 0 0-1.527.344l-.086.043-.165.09a3 3 0 0 0-.33.214q-.432.315-.656.707a2 2 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.5 2.5 0 0 0 .566.7q.117.098.245.18l.144.08a2.1 2.1 0 0 0 .975.232q1.07 0 1.645-.675.576-.69.576-1.778 0-1.102-.576-1.777-.56-.691-1.645-.692a2.2 2.2 0 0 0-1.015.235q-.22.113-.415.282l-.15.142a2.1 2.1 0 0 0-.42.594q-.223.479-.223 1.1v.115q0 .705.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.87.87 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.1 1.1 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013q.345-.13.724-.14l.069-.002q.493 0 .642.099l.247-1.794q-.196-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2 2 0 0 0-.411.148 2.2 2.2 0 0 0-.4.249 2.5 2.5 0 0 0-.485.499 2.7 2.7 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884q0-.546.159-.943a1.5 1.5 0 0 1 .466-.636 2.5 2.5 0 0 1 .399-.253 2 2 0 0 1 .224-.099zm9.784 2.656.05-.922q0-1.743-.856-2.698-.838-.97-2.584-.97-1.119-.001-2.007.493a3.46 3.46 0 0 0-1.4 1.382q-.493.906-.493 2.106 0 1.07.428 1.975.428.89 1.332 1.432.906.526 2.255.526.973 0 1.668-.185l.044-.012.135-.04q.613-.184.984-.421l-.542-1.267q-.3.162-.642.274l-.297.087q-.51.131-1.3.131-.954 0-1.497-.444a1.6 1.6 0 0 1-.192-.193q-.366-.44-.512-1.234l-.004-.021zm-5.427-1.256-.003.022h3.752v-.138q-.011-.727-.288-1.118a1 1 0 0 0-.156-.176q-.46-.428-1.316-.428-.986 0-1.494.604-.379.45-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z'/%3E%3Cpath fill='%23fff' d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81q-1.02 0-1.893-.478a3.8 3.8 0 0 1-1.381-1.382q-.51-.906-.51-2.106 0-1.185.444-2.074a3.36 3.36 0 0 1 1.3-1.382q.839-.494 1.974-.494a3.3 3.3 0 0 1 1.234.231 3.3 3.3 0 0 1 .97.575q.396.33.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332q-.279.593-1.02 1.053a3.17 3.17 0 0 1-1.662.444zm.296-1.482q.938 0 1.58-.642.642-.66.642-1.711v-.115q0-.708-.296-1.267a2.2 2.2 0 0 0-.807-.872 2.1 2.1 0 0 0-1.119-.313q-1.053 0-1.629.692-.575.675-.575 1.76 0 1.103.559 1.795.577.675 1.645.675zm6.521-6.237h1.711v1.4q.906-1.597 2.83-1.597 1.596 0 2.584 1.02.988 1.005.988 2.914 0 1.185-.493 2.09a3.46 3.46 0 0 1-1.316 1.399 3.5 3.5 0 0 1-1.844.493q-.954 0-1.662-.329a2.67 2.67 0 0 1-1.086-.97l.017 5.134h-1.728zm4.048 6.22q1.07 0 1.645-.674.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.592 0-1.12.296-.51.28-.822.823-.296.527-.296 1.234v.115q0 .708.296 1.267.313.543.823.855.51.296 1.119.297z'/%3E%3Cpath fill='%23e1e3e9' d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.16 1.16 0 0 1-.856-.346 1.17 1.17 0 0 1-.346-.856 1.05 1.05 0 0 1 .346-.79q.346-.329.856-.329.494 0 .839.33a1.05 1.05 0 0 1 .345.79 1.16 1.16 0 0 1-.345.855q-.33.346-.84.346zm7.875 9.133a3.17 3.17 0 0 1-1.662-.444q-.723-.46-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283q.279-.658 1.086-1.119a3.5 3.5 0 0 1 1.778-.477q1.119 0 1.942.51a3.24 3.24 0 0 1 1.283 1.4q.445.888.444 2.072 0 1.201-.526 2.09a3.5 3.5 0 0 1-1.382 1.366 3.8 3.8 0 0 1-1.876.477zm-.296-1.481q1.069 0 1.645-.675.577-.69.577-1.778 0-1.102-.577-1.776-.56-.691-1.645-.692a2.12 2.12 0 0 0-1.58.659q-.642.641-.642 1.694v.115q0 .71.296 1.267a2.4 2.4 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481q.263-.757.856-1.217a2.14 2.14 0 0 1 1.349-.46q.527 0 .724.098l-.247 1.794q-.149-.099-.642-.099-.774 0-1.416.494-.626.493-.626 1.58v3.883h-1.777V9.242zm9.534 7.718q-1.35 0-2.255-.526-.904-.543-1.332-1.432a4.6 4.6 0 0 1-.428-1.975q0-1.2.493-2.106a3.46 3.46 0 0 1 1.4-1.382q.889-.495 2.007-.494 1.744 0 2.584.97.855.956.856 2.7 0 .444-.05.92h-5.43q.18 1.005.708 1.45.542.443 1.497.443.79 0 1.3-.131a4 4 0 0 0 .938-.362l.542 1.267q-.411.263-1.119.46-.708.198-1.711.197zm1.596-4.558q.016-1.02-.444-1.432-.46-.428-1.316-.428-1.728 0-1.991 1.86z'/%3E%3Cpath d='M5.074 15.948a.484.657 0 0 0-.486.659v1.84a.484.657 0 0 0 .486.659h4.101a.484.657 0 0 0 .486-.659v-1.84a.484.657 0 0 0-.486-.659zm3.56 1.16H5.617v.838h3.017z' style='fill:%23fff;fill-rule:evenodd;stroke-width:1.03600001'/%3E%3Cg style='stroke-width:1.12603545'%3E%3Cpath d='M-9.408-1.416c-3.833-.025-7.056 2.912-7.08 6.615-.02 3.08 1.653 4.832 3.107 6.268.903.892 1.721 1.74 2.32 2.902l-.525-.004c-.543-.003-.992.304-1.24.639a1.87 1.87 0 0 0-.362 1.121l-.011 1.877c-.003.402.104.787.347 1.125.244.338.688.653 1.23.656l4.142.028c.542.003.99-.306 1.238-.641a1.87 1.87 0 0 0 .363-1.121l.012-1.875a1.87 1.87 0 0 0-.348-1.127c-.243-.338-.688-.653-1.23-.656l-.518-.004c.597-1.145 1.425-1.983 2.348-2.87 1.473-1.414 3.18-3.149 3.2-6.226-.016-3.59-2.923-6.684-6.993-6.707m-.006 1.1v.002c3.274.02 5.92 2.532 5.9 5.6-.017 2.706-1.39 4.026-2.863 5.44-1.034.994-2.118 2.033-2.814 3.633-.018.041-.052.055-.075.065q-.013.004-.02.01a.34.34 0 0 1-.226.084.34.34 0 0 1-.224-.086l-.092-.077c-.699-1.615-1.768-2.669-2.781-3.67-1.454-1.435-2.797-2.762-2.78-5.478.02-3.067 2.7-5.545 5.975-5.523m-.02 2.826c-1.62-.01-2.944 1.315-2.955 2.96-.01 1.646 1.295 2.988 2.916 2.999h.002c1.621.01 2.943-1.316 2.953-2.961.011-1.646-1.294-2.988-2.916-2.998m-.005 1.1c1.017.006 1.829.83 1.822 1.89s-.83 1.874-1.848 1.867c-1.018-.006-1.829-.83-1.822-1.89s.83-1.874 1.848-1.868m-2.155 11.857 4.14.025c.271.002.49.305.487.676l-.013 1.875c-.003.37-.224.67-.495.668l-4.14-.025c-.27-.002-.487-.306-.485-.676l.012-1.875c.003-.37.224-.67.494-.668' style='color:%23000;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:%23000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:evenodd;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000;solid-opacity:1;vector-effect:none;fill:%23000;fill-opacity:.4;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-9.415-.316C-12.69-.338-15.37 2.14-15.39 5.207c-.017 2.716 1.326 4.041 2.78 5.477 1.013 1 2.081 2.055 2.78 3.67l.092.076a.34.34 0 0 0 .225.086.34.34 0 0 0 .227-.083l.019-.01c.022-.009.057-.024.074-.064.697-1.6 1.78-2.64 2.814-3.634 1.473-1.414 2.847-2.733 2.864-5.44.02-3.067-2.627-5.58-5.901-5.601m-.057 8.784c1.621.011 2.944-1.315 2.955-2.96.01-1.646-1.295-2.988-2.916-2.999-1.622-.01-2.945 1.315-2.955 2.96s1.295 2.989 2.916 3' style='clip-rule:evenodd;fill:%23e1e3e9;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-11.594 15.465c-.27-.002-.492.297-.494.668l-.012 1.876c-.003.371.214.673.485.675l4.14.027c.271.002.492-.298.495-.668l.012-1.877c.003-.37-.215-.672-.485-.674z' style='clip-rule:evenodd;fill:%23fff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3C/g%3E%3C/svg%3E")}}@media(forced-colors:active)and (prefers-color-scheme:light){a.maplibregl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath fill='%23000' fill-opacity='.4' fill-rule='evenodd' d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.25 1.25 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.25 1.25 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5 5 0 0 1 .314-.787l.009-.016a4.6 4.6 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.6 4.6 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4q.47.48.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.42 2.42 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.45 2.45 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675q.318.302.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.8 4.8 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.4 3.4 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.25 1.25 0 0 1 .689 1.004 4.7 4.7 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528q-.001.515-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.8 5.8 0 0 1-.548-2.512q0-.429.053-.843a1.3 1.3 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.8 4.8 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.5 4.5 0 0 1-1.935-.424 1.25 1.25 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.4 2.4 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.7 4.7 0 0 1-1.782 1.884 4.77 4.77 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.5 4.5 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a5 5 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.25 1.25 0 0 1-1.115.676h-.098a1.25 1.25 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15q.493-.356.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267q-.133-.329-.526-.658l-.032-.028a3.2 3.2 0 0 0-.668-.428l-.27-.12a3.3 3.3 0 0 0-1.235-.23q-1.136-.001-1.974.493a3.36 3.36 0 0 0-1.3 1.382q-.445.89-.444 2.074 0 1.2.51 2.107a3.8 3.8 0 0 0 1.382 1.381 3.9 3.9 0 0 0 1.893.477q.795 0 1.455-.33zm-2.789-5.38q-.576.675-.575 1.762 0 1.102.559 1.794.576.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.2 2.2 0 0 0 .468-.29l.178-.161a2.2 2.2 0 0 0 .397-.561q.244-.5.244-1.15v-.115q0-.708-.296-1.267l-.043-.077a2.2 2.2 0 0 0-.633-.709l-.13-.086-.047-.028a2.1 2.1 0 0 0-1.073-.285q-1.052 0-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.96.96 0 0 0-.353-.389.85.85 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.6 2.6 0 0 0 .331.423q.319.33.755.548l.173.074q.65.255 1.49.255 1.02 0 1.844-.493a3.45 3.45 0 0 0 1.316-1.4q.493-.904.493-2.089 0-1.909-.988-2.913-.988-1.02-2.584-1.02-.898 0-1.575.347a3 3 0 0 0-.415.262l-.199.166a3.4 3.4 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138q.206.29.48.5l.155.11.053.034q.51.296 1.119.297 1.07 0 1.645-.675.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.435 0-.835.16a2 2 0 0 0-.284.136 2 2 0 0 0-.363.254 2.2 2.2 0 0 0-.46.569l-.082.162a2.6 2.6 0 0 0-.213 1.072v.115q0 .707.296 1.267l.135.211zm.964-.818a1.1 1.1 0 0 0 .367.385.94.94 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a1 1 0 0 0-.503.135l-.012.007a.86.86 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.4 1.4 0 0 0 .14.66zm15.7-6.222q.347-.346.346-.856a1.05 1.05 0 0 0-.345-.79 1.18 1.18 0 0 0-.84-.329q-.51 0-.855.33a1.05 1.05 0 0 0-.346.79q0 .51.346.855.345.346.856.346.51 0 .839-.346zm4.337 9.314.033-1.332q.191.403.59.747l.098.081a4 4 0 0 0 .316.224l.223.122a3.2 3.2 0 0 0 1.44.322 3.8 3.8 0 0 0 1.875-.477 3.5 3.5 0 0 0 1.382-1.366q.527-.89.526-2.09 0-1.184-.444-2.073a3.24 3.24 0 0 0-1.283-1.399q-.823-.51-1.942-.51a3.5 3.5 0 0 0-1.527.344l-.086.043-.165.09a3 3 0 0 0-.33.214q-.432.315-.656.707a2 2 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.5 2.5 0 0 0 .566.7q.117.098.245.18l.144.08a2.1 2.1 0 0 0 .975.232q1.07 0 1.645-.675.576-.69.576-1.778 0-1.102-.576-1.777-.56-.691-1.645-.692a2.2 2.2 0 0 0-1.015.235q-.22.113-.415.282l-.15.142a2.1 2.1 0 0 0-.42.594q-.223.479-.223 1.1v.115q0 .705.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.87.87 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.1 1.1 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013q.345-.13.724-.14l.069-.002q.493 0 .642.099l.247-1.794q-.196-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2 2 0 0 0-.411.148 2.2 2.2 0 0 0-.4.249 2.5 2.5 0 0 0-.485.499 2.7 2.7 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884q0-.546.159-.943a1.5 1.5 0 0 1 .466-.636 2.5 2.5 0 0 1 .399-.253 2 2 0 0 1 .224-.099zm9.784 2.656.05-.922q0-1.743-.856-2.698-.838-.97-2.584-.97-1.119-.001-2.007.493a3.46 3.46 0 0 0-1.4 1.382q-.493.906-.493 2.106 0 1.07.428 1.975.428.89 1.332 1.432.906.526 2.255.526.973 0 1.668-.185l.044-.012.135-.04q.613-.184.984-.421l-.542-1.267q-.3.162-.642.274l-.297.087q-.51.131-1.3.131-.954 0-1.497-.444a1.6 1.6 0 0 1-.192-.193q-.366-.44-.512-1.234l-.004-.021zm-5.427-1.256-.003.022h3.752v-.138q-.011-.727-.288-1.118a1 1 0 0 0-.156-.176q-.46-.428-1.316-.428-.986 0-1.494.604-.379.45-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z'/%3E%3Cpath fill='%23fff' d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81q-1.02 0-1.893-.478a3.8 3.8 0 0 1-1.381-1.382q-.51-.906-.51-2.106 0-1.185.444-2.074a3.36 3.36 0 0 1 1.3-1.382q.839-.494 1.974-.494a3.3 3.3 0 0 1 1.234.231 3.3 3.3 0 0 1 .97.575q.396.33.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332q-.279.593-1.02 1.053a3.17 3.17 0 0 1-1.662.444zm.296-1.482q.938 0 1.58-.642.642-.66.642-1.711v-.115q0-.708-.296-1.267a2.2 2.2 0 0 0-.807-.872 2.1 2.1 0 0 0-1.119-.313q-1.053 0-1.629.692-.575.675-.575 1.76 0 1.103.559 1.795.577.675 1.645.675zm6.521-6.237h1.711v1.4q.906-1.597 2.83-1.597 1.596 0 2.584 1.02.988 1.005.988 2.914 0 1.185-.493 2.09a3.46 3.46 0 0 1-1.316 1.399 3.5 3.5 0 0 1-1.844.493q-.954 0-1.662-.329a2.67 2.67 0 0 1-1.086-.97l.017 5.134h-1.728zm4.048 6.22q1.07 0 1.645-.674.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.592 0-1.12.296-.51.28-.822.823-.296.527-.296 1.234v.115q0 .708.296 1.267.313.543.823.855.51.296 1.119.297z'/%3E%3Cpath fill='%23e1e3e9' d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.16 1.16 0 0 1-.856-.346 1.17 1.17 0 0 1-.346-.856 1.05 1.05 0 0 1 .346-.79q.346-.329.856-.329.494 0 .839.33a1.05 1.05 0 0 1 .345.79 1.16 1.16 0 0 1-.345.855q-.33.346-.84.346zm7.875 9.133a3.17 3.17 0 0 1-1.662-.444q-.723-.46-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283q.279-.658 1.086-1.119a3.5 3.5 0 0 1 1.778-.477q1.119 0 1.942.51a3.24 3.24 0 0 1 1.283 1.4q.445.888.444 2.072 0 1.201-.526 2.09a3.5 3.5 0 0 1-1.382 1.366 3.8 3.8 0 0 1-1.876.477zm-.296-1.481q1.069 0 1.645-.675.577-.69.577-1.778 0-1.102-.577-1.776-.56-.691-1.645-.692a2.12 2.12 0 0 0-1.58.659q-.642.641-.642 1.694v.115q0 .71.296 1.267a2.4 2.4 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481q.263-.757.856-1.217a2.14 2.14 0 0 1 1.349-.46q.527 0 .724.098l-.247 1.794q-.149-.099-.642-.099-.774 0-1.416.494-.626.493-.626 1.58v3.883h-1.777V9.242zm9.534 7.718q-1.35 0-2.255-.526-.904-.543-1.332-1.432a4.6 4.6 0 0 1-.428-1.975q0-1.2.493-2.106a3.46 3.46 0 0 1 1.4-1.382q.889-.495 2.007-.494 1.744 0 2.584.97.855.956.856 2.7 0 .444-.05.92h-5.43q.18 1.005.708 1.45.542.443 1.497.443.79 0 1.3-.131a4 4 0 0 0 .938-.362l.542 1.267q-.411.263-1.119.46-.708.198-1.711.197zm1.596-4.558q.016-1.02-.444-1.432-.46-.428-1.316-.428-1.728 0-1.991 1.86z'/%3E%3Cpath d='M5.074 15.948a.484.657 0 0 0-.486.659v1.84a.484.657 0 0 0 .486.659h4.101a.484.657 0 0 0 .486-.659v-1.84a.484.657 0 0 0-.486-.659zm3.56 1.16H5.617v.838h3.017z' style='fill:%23fff;fill-rule:evenodd;stroke-width:1.03600001'/%3E%3Cg style='stroke-width:1.12603545'%3E%3Cpath d='M-9.408-1.416c-3.833-.025-7.056 2.912-7.08 6.615-.02 3.08 1.653 4.832 3.107 6.268.903.892 1.721 1.74 2.32 2.902l-.525-.004c-.543-.003-.992.304-1.24.639a1.87 1.87 0 0 0-.362 1.121l-.011 1.877c-.003.402.104.787.347 1.125.244.338.688.653 1.23.656l4.142.028c.542.003.99-.306 1.238-.641a1.87 1.87 0 0 0 .363-1.121l.012-1.875a1.87 1.87 0 0 0-.348-1.127c-.243-.338-.688-.653-1.23-.656l-.518-.004c.597-1.145 1.425-1.983 2.348-2.87 1.473-1.414 3.18-3.149 3.2-6.226-.016-3.59-2.923-6.684-6.993-6.707m-.006 1.1v.002c3.274.02 5.92 2.532 5.9 5.6-.017 2.706-1.39 4.026-2.863 5.44-1.034.994-2.118 2.033-2.814 3.633-.018.041-.052.055-.075.065q-.013.004-.02.01a.34.34 0 0 1-.226.084.34.34 0 0 1-.224-.086l-.092-.077c-.699-1.615-1.768-2.669-2.781-3.67-1.454-1.435-2.797-2.762-2.78-5.478.02-3.067 2.7-5.545 5.975-5.523m-.02 2.826c-1.62-.01-2.944 1.315-2.955 2.96-.01 1.646 1.295 2.988 2.916 2.999h.002c1.621.01 2.943-1.316 2.953-2.961.011-1.646-1.294-2.988-2.916-2.998m-.005 1.1c1.017.006 1.829.83 1.822 1.89s-.83 1.874-1.848 1.867c-1.018-.006-1.829-.83-1.822-1.89s.83-1.874 1.848-1.868m-2.155 11.857 4.14.025c.271.002.49.305.487.676l-.013 1.875c-.003.37-.224.67-.495.668l-4.14-.025c-.27-.002-.487-.306-.485-.676l.012-1.875c.003-.37.224-.67.494-.668' style='color:%23000;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:%23000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:evenodd;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000;solid-opacity:1;vector-effect:none;fill:%23000;fill-opacity:.4;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-9.415-.316C-12.69-.338-15.37 2.14-15.39 5.207c-.017 2.716 1.326 4.041 2.78 5.477 1.013 1 2.081 2.055 2.78 3.67l.092.076a.34.34 0 0 0 .225.086.34.34 0 0 0 .227-.083l.019-.01c.022-.009.057-.024.074-.064.697-1.6 1.78-2.64 2.814-3.634 1.473-1.414 2.847-2.733 2.864-5.44.02-3.067-2.627-5.58-5.901-5.601m-.057 8.784c1.621.011 2.944-1.315 2.955-2.96.01-1.646-1.295-2.988-2.916-2.999-1.622-.01-2.945 1.315-2.955 2.96s1.295 2.989 2.916 3' style='clip-rule:evenodd;fill:%23e1e3e9;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-11.594 15.465c-.27-.002-.492.297-.494.668l-.012 1.876c-.003.371.214.673.485.675l4.14.027c.271.002.492-.298.495-.668l.012-1.877c.003-.37-.215-.672-.485-.674z' style='clip-rule:evenodd;fill:%23fff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3C/g%3E%3C/svg%3E")}}.maplibregl-ctrl.maplibregl-ctrl-attrib{background-color:#ffffff80;margin:0;padding:0 5px}@media screen{.maplibregl-ctrl-attrib.maplibregl-compact{background-color:#fff;border-radius:12px;box-sizing:content-box;color:#000;margin:10px;min-height:20px;padding:2px 24px 2px 0;position:relative}.maplibregl-ctrl-attrib.maplibregl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.maplibregl-ctrl-bottom-left>.maplibregl-ctrl-attrib.maplibregl-compact-show,.maplibregl-ctrl-top-left>.maplibregl-ctrl-attrib.maplibregl-compact-show{border-radius:12px;padding:2px 8px 2px 28px}.maplibregl-ctrl-attrib.maplibregl-compact .maplibregl-ctrl-attrib-inner{display:none}.maplibregl-ctrl-attrib-button{background-color:#ffffff80;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill-rule='evenodd' viewBox='0 0 20 20'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E");border:0;border-radius:12px;box-sizing:border-box;cursor:pointer;display:none;height:24px;outline:none;position:absolute;right:0;top:0;width:24px}.maplibregl-ctrl-attrib summary.maplibregl-ctrl-attrib-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;list-style:none}.maplibregl-ctrl-attrib summary.maplibregl-ctrl-attrib-button::-webkit-details-marker{display:none}.maplibregl-ctrl-bottom-left .maplibregl-ctrl-attrib-button,.maplibregl-ctrl-top-left .maplibregl-ctrl-attrib-button{left:0}.maplibregl-ctrl-attrib.maplibregl-compact .maplibregl-ctrl-attrib-button,.maplibregl-ctrl-attrib.maplibregl-compact-show .maplibregl-ctrl-attrib-inner{display:block}.maplibregl-ctrl-attrib.maplibregl-compact-show .maplibregl-ctrl-attrib-button{background-color:#0000000d}.maplibregl-ctrl-bottom-right>.maplibregl-ctrl-attrib.maplibregl-compact:after{bottom:0;right:0}.maplibregl-ctrl-top-right>.maplibregl-ctrl-attrib.maplibregl-compact:after{right:0;top:0}.maplibregl-ctrl-top-left>.maplibregl-ctrl-attrib.maplibregl-compact:after{left:0;top:0}.maplibregl-ctrl-bottom-left>.maplibregl-ctrl-attrib.maplibregl-compact:after{bottom:0;left:0}}@media screen and (forced-colors:active){.maplibregl-ctrl-attrib.maplibregl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill='%23fff' fill-rule='evenodd' viewBox='0 0 20 20'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E")}}@media screen and (forced-colors:active)and (prefers-color-scheme:light){.maplibregl-ctrl-attrib.maplibregl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill-rule='evenodd' viewBox='0 0 20 20'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E")}}.maplibregl-ctrl-attrib a{color:#000000bf;text-decoration:none}.maplibregl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.maplibregl-attrib-empty{display:none}.maplibregl-ctrl-scale{background-color:#ffffffbf;border:2px solid #333;border-top:#333;box-sizing:border-box;color:#333;font-size:10px;padding:0 5px;white-space:nowrap}.maplibregl-popup{display:flex;left:0;pointer-events:none;position:absolute;top:0;will-change:transform}.maplibregl-popup-anchor-top,.maplibregl-popup-anchor-top-left,.maplibregl-popup-anchor-top-right{flex-direction:column}.maplibregl-popup-anchor-bottom,.maplibregl-popup-anchor-bottom-left,.maplibregl-popup-anchor-bottom-right{flex-direction:column-reverse}.maplibregl-popup-anchor-left{flex-direction:row}.maplibregl-popup-anchor-right{flex-direction:row-reverse}.maplibregl-popup-tip{border:10px solid transparent;height:0;width:0;z-index:1}.maplibregl-popup-anchor-top .maplibregl-popup-tip{align-self:center;border-bottom-color:#fff;border-top:none}.maplibregl-popup-anchor-top-left .maplibregl-popup-tip{align-self:flex-start;border-bottom-color:#fff;border-left:none;border-top:none}.maplibregl-popup-anchor-top-right .maplibregl-popup-tip{align-self:flex-end;border-bottom-color:#fff;border-right:none;border-top:none}.maplibregl-popup-anchor-bottom .maplibregl-popup-tip{align-self:center;border-bottom:none;border-top-color:#fff}.maplibregl-popup-anchor-bottom-left .maplibregl-popup-tip{align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.maplibregl-popup-anchor-bottom-right .maplibregl-popup-tip{align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.maplibregl-popup-anchor-left .maplibregl-popup-tip{align-self:center;border-left:none;border-right-color:#fff}.maplibregl-popup-anchor-right .maplibregl-popup-tip{align-self:center;border-left-color:#fff;border-right:none}.maplibregl-popup-close-button{background-color:transparent;border:0;border-radius:0 3px 0 0;cursor:pointer;position:absolute;right:0;top:0}.maplibregl-popup-close-button:hover{background-color:#0000000d}.maplibregl-popup-content{background:#fff;border-radius:3px;box-shadow:0 1px 2px #0000001a;padding:15px 10px;pointer-events:auto;position:relative}.maplibregl-popup-anchor-top-left .maplibregl-popup-content{border-top-left-radius:0}.maplibregl-popup-anchor-top-right .maplibregl-popup-content{border-top-right-radius:0}.maplibregl-popup-anchor-bottom-left .maplibregl-popup-content{border-bottom-left-radius:0}.maplibregl-popup-anchor-bottom-right .maplibregl-popup-content{border-bottom-right-radius:0}.maplibregl-popup-track-pointer{display:none}.maplibregl-popup-track-pointer *{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.maplibregl-map:hover .maplibregl-popup-track-pointer{display:flex}.maplibregl-map:active .maplibregl-popup-track-pointer{display:none}.maplibregl-marker{left:0;position:absolute;top:0;transition:opacity .2s;will-change:transform}.maplibregl-user-location-dot,.maplibregl-user-location-dot:before{background-color:#1da1f2;border-radius:50%;height:15px;width:15px}.maplibregl-user-location-dot:before{animation:maplibregl-user-location-dot-pulse 2s infinite;content:"";position:absolute}.maplibregl-user-location-dot:after{border:2px solid #fff;border-radius:50%;box-shadow:0 0 3px #00000059;box-sizing:border-box;content:"";height:19px;left:-2px;position:absolute;top:-2px;width:19px}@keyframes maplibregl-user-location-dot-pulse{0%{opacity:1;transform:scale(1)}70%{opacity:0;transform:scale(3)}to{opacity:0;transform:scale(1)}}.maplibregl-user-location-dot-stale{background-color:#aaa}.maplibregl-user-location-dot-stale:after{display:none}.maplibregl-user-location-accuracy-circle{background-color:#1da1f233;border-radius:100%;height:1px;width:1px}.maplibregl-crosshair,.maplibregl-crosshair .maplibregl-interactive,.maplibregl-crosshair .maplibregl-interactive:active{cursor:crosshair}.maplibregl-boxzoom{background:#fff;border:2px dotted #202020;height:0;left:0;opacity:.5;position:absolute;top:0;width:0}.maplibregl-cooperative-gesture-screen{align-items:center;background:#0006;color:#fff;display:flex;font-size:1.4em;inset:0;justify-content:center;line-height:1.2;opacity:0;padding:1rem;pointer-events:none;position:absolute;transition:opacity 1s ease 1s;z-index:99999}.maplibregl-cooperative-gesture-screen.maplibregl-show{opacity:1;transition:opacity .05s}.maplibregl-cooperative-gesture-screen .maplibregl-mobile-message{display:none}@media(hover:none),(pointer:coarse){.maplibregl-cooperative-gesture-screen .maplibregl-desktop-message{display:none}.maplibregl-cooperative-gesture-screen .maplibregl-mobile-message{display:block}}.maplibregl-pseudo-fullscreen{height:100%!important;left:0!important;position:fixed!important;top:0!important;width:100%!important;z-index:99999}:root{--color-parchment: #f7f3eb;--color-parchment-dark: #e8e2d5;--color-terracotta: #c45a3b;--color-terracotta-light: #d4765b;--color-brown-dark: #2c2417;--color-brown-medium: #5c4d3a;--color-brown-light: #8a7a64;--color-gold: #b8973b;--color-gold-light: #d4b85a;--color-sea: #3a6b7c;--color-sea-light: #5a8b9c}*{box-sizing:border-box;margin:0;padding:0}html,body,#root{height:100%;width:100%}body{font-family:Crimson Text,Georgia,serif;background-color:var(--color-parchment);color:var(--color-brown-dark);line-height:1.6}h1,h2,h3,h4,h5,h6{font-family:Crimson Text,Georgia,serif;font-weight:600;color:var(--color-brown-dark)}.ui-text{font-family:Source Sans Pro,-apple-system,BlinkMacSystemFont,sans-serif}a{color:var(--color-terracotta);text-decoration:none;transition:color .2s ease}a:hover{color:var(--color-terracotta-light)}.app-container{display:flex;flex-direction:column;height:100vh;max-height:100vh;overflow:hidden}.app-header{background:linear-gradient(135deg,var(--color-brown-dark) 0%,var(--color-brown-medium) 100%);color:var(--color-parchment);padding:.75rem 1.5rem;display:flex;align-items:center;justify-content:space-between;flex-shrink:0}.app-header h1{font-size:1.5rem;color:var(--color-parchment);font-weight:400;letter-spacing:.05em}.app-header h1 span{color:var(--color-gold-light)}.app-header h1 .redux-tag{font-size:.7rem;font-weight:600;background:var(--color-terracotta);color:#fff;padding:.15rem .4rem;border-radius:3px;vertical-align:middle;margin-left:.3rem;letter-spacing:.08em;text-transform:uppercase}.app-header nav{font-family:Source Sans Pro,sans-serif;font-size:.9rem}.app-header nav a{color:var(--color-parchment-dark);margin-left:1.5rem;opacity:.8;transition:opacity .2s ease}.app-header nav a:hover,.app-header nav a.active{opacity:1;color:var(--color-gold-light)}.main-content{flex:1;overflow:hidden;display:flex;height:100%;width:100%}.summary-view{display:flex;height:100%;width:100%;overflow:hidden}.books-panel{width:280px;min-width:240px;padding:1.5rem;overflow-y:auto;border-right:1px solid var(--color-parchment-dark);background:var(--color-parchment)}.books-panel h2{font-size:1.3rem;margin-bottom:1rem;padding-bottom:.5rem;border-bottom:2px solid var(--color-terracotta)}.book-list{list-style:none}.book-item{padding:1rem;margin-bottom:.75rem;background:#fff;border-radius:4px;border-left:4px solid transparent;cursor:pointer;transition:all .2s ease;box-shadow:0 1px 3px #00000014}.book-item:hover{border-left-color:var(--color-terracotta);transform:translate(4px);box-shadow:0 2px 8px #0000001f}.book-item.selected{border-left-color:var(--color-terracotta);background:var(--color-parchment-dark)}.book-item h3{font-size:1.1rem;margin-bottom:.3rem}.book-item .book-stats{font-family:Source Sans Pro,sans-serif;font-size:.85rem;color:var(--color-brown-light)}.book-item .place-bar{height:4px;background:var(--color-parchment-dark);border-radius:2px;margin-top:.5rem;overflow:hidden}.book-item .place-bar-fill{height:100%;background:linear-gradient(90deg,var(--color-terracotta) 0%,var(--color-gold) 100%);border-radius:2px}.about-panel{width:480px;min-width:380px;padding:1.5rem 2rem;overflow-y:auto;background:#fff;border-right:1px solid var(--color-parchment-dark)}.about-content h2{font-size:1.3rem;margin-bottom:1rem;padding-bottom:.5rem;border-bottom:2px solid var(--color-terracotta)}.about-content h3{font-size:1.05rem;margin-top:1.25rem;margin-bottom:.5rem;color:var(--color-brown-medium)}.about-content p{margin-bottom:.75rem;font-size:.95rem;line-height:1.6}.about-content ul{margin:.5rem 0 1rem 1.25rem;font-size:.95rem}.about-content ul li{margin-bottom:.4rem}.about-content .links-list{list-style:none;margin-left:0}.about-content .links-list li{margin-bottom:.5rem}.about-content .links-list a{display:inline-block;padding:.3rem 0}.about-content .credits{margin-top:1.5rem;padding-top:1rem;border-top:1px solid var(--color-parchment-dark);font-size:.85rem;color:var(--color-brown-light);font-style:italic}.summary-map{flex:1;position:relative;min-height:0;height:100%}.summary-map .leaflet-container{height:100%;width:100%}.about-view{height:100%;overflow-y:auto;background:var(--color-parchment);display:flex;justify-content:center;padding:2rem}.about-view .about-content{max-width:800px;background:#fff;padding:2rem 3rem;border-radius:8px;box-shadow:0 2px 12px #00000014}.reading-view{display:flex;height:100%;overflow:hidden}.text-panel{width:50%;display:flex;flex-direction:column;background:var(--color-parchment);border-right:1px solid var(--color-parchment-dark);flex-shrink:0}.text-header{padding:1rem 1.5rem;background:#fff;border-bottom:1px solid var(--color-parchment-dark);display:flex;align-items:center;justify-content:space-between;flex-shrink:0}.text-header h2{font-size:1.2rem}.chapter-nav{font-family:Source Sans Pro,sans-serif;display:flex;align-items:center;gap:.5rem}.chapter-nav button{background:var(--color-parchment);border:1px solid var(--color-brown-light);padding:.3rem .75rem;border-radius:3px;cursor:pointer;font-family:inherit;color:var(--color-brown-dark);transition:all .2s ease}.chapter-nav button:hover:not(:disabled){background:var(--color-terracotta);color:#fff;border-color:var(--color-terracotta)}.chapter-nav button:disabled{opacity:.4;cursor:not-allowed}.chapter-nav .language-toggle{background:var(--color-gold);border-color:var(--color-gold);color:#fff;font-weight:600}.chapter-nav .language-toggle:hover{background:var(--color-gold-light);border-color:var(--color-gold-light)}.chapter-nav select{padding:.3rem .5rem;border:1px solid var(--color-brown-light);border-radius:3px;background:#fff;font-family:inherit;color:var(--color-brown-dark)}.text-content{flex:1;overflow-y:auto;padding:1.5rem 2rem;font-size:1.1rem;line-height:1.8;min-height:0}.chapter-section{margin-bottom:2rem}.chapter-number{font-family:Source Sans Pro,sans-serif;font-size:.85rem;color:var(--color-brown-light);margin-bottom:.5rem;font-weight:600}.chapter-text{text-align:justify;min-height:400px}.greek-text{font-family:Gentium Plus,Times New Roman,serif;font-size:1.15rem;line-height:1.9;color:var(--color-brown-dark)}.place-mention{background:linear-gradient(180deg,transparent 60%,rgba(196,90,59,.2) 60%);cursor:pointer;transition:all .2s ease;border-radius:2px;padding:0 2px}.place-mention:hover{background:#c45a3b4d}.place-mention.selected{background:#c45a3b66;font-weight:600}.place-mention.highlighted{background:#b8973b66;animation:pulse 1s ease-in-out}@keyframes pulse{0%,to{background:#b8973b66}50%{background:#b8973bb3}}.unlocated-places{margin-top:2rem;padding:1rem;background:var(--color-parchment-dark);border-radius:6px;border-left:4px solid var(--color-brown-light)}.unlocated-places h4{font-family:Source Sans Pro,sans-serif;font-size:.9rem;text-transform:uppercase;letter-spacing:.05em;color:var(--color-brown-medium);margin-bottom:.75rem}.unlocated-list{display:flex;flex-wrap:wrap;gap:.5rem}.unlocated-place{display:inline-block;padding:.3rem .6rem;background:#fff;border-radius:4px;font-size:.85rem;color:var(--color-brown-medium);opacity:.8;font-style:italic;border:1px solid var(--color-parchment-dark)}.map-panel{width:50%;height:100%;position:relative;min-height:0;flex-shrink:0}.map-panel .leaflet-container{height:100%;width:100%}.place-marker{background:var(--color-terracotta);border:2px solid white;border-radius:50%;box-shadow:0 2px 4px #0000004d}.place-marker.memory{background:var(--color-sea)}.place-marker:hover{transform:scale(1.2)}.place-detail-view{display:flex;height:100%}.place-info{width:400px;padding:2rem;overflow-y:auto;background:#fff;border-right:1px solid var(--color-parchment-dark)}.place-info h2{font-size:1.8rem;margin-bottom:.5rem;color:var(--color-brown-dark)}.place-coords{font-family:Source Sans Pro,sans-serif;font-size:.9rem;color:var(--color-brown-light);margin-bottom:1rem}.place-description{margin-bottom:1.5rem;padding:1rem;background:var(--color-parchment);border-radius:4px;font-style:italic}.place-links{margin-bottom:1.5rem}.place-links a{display:inline-block;padding:.5rem 1rem;background:var(--color-sea);color:#fff;border-radius:4px;font-family:Source Sans Pro,sans-serif;font-size:.9rem;margin-right:.5rem;margin-bottom:.5rem}.place-links a:hover{background:var(--color-sea-light);color:#fff}.occurrences-section h3{font-size:1.1rem;margin-bottom:.75rem;padding-bottom:.5rem;border-bottom:1px solid var(--color-parchment-dark)}.occurrence-list{list-style:none}.occurrence-item{padding:.5rem 0;border-bottom:1px solid var(--color-parchment);font-family:Source Sans Pro,sans-serif;font-size:.95rem}.occurrence-item a{color:var(--color-brown-dark)}.occurrence-item a:hover{color:var(--color-terracotta)}.place-detail-map{flex:1;height:100%;position:relative;min-height:0}.leaflet-popup-content-wrapper{font-family:Source Sans Pro,sans-serif;border-radius:4px}.leaflet-popup-content{margin:.75rem 1rem}.leaflet-tooltip{font-family:Source Sans Pro,sans-serif;background:#fff;border:none;border-radius:4px;padding:.5rem .75rem;box-shadow:0 2px 8px #0003}.leaflet-tooltip-top:before,.leaflet-tooltip-bottom:before,.leaflet-tooltip-left:before,.leaflet-tooltip-right:before{border-top-color:#fff}.region-label{background:transparent!important;border:none!important}.popup-place-name{font-weight:600;font-size:1rem;color:var(--color-brown-dark)}.popup-place-type{font-size:.85rem;color:var(--color-brown-light);text-transform:capitalize}.loading{display:flex;align-items:center;justify-content:center;height:100%;font-family:Source Sans Pro,sans-serif;color:var(--color-brown-light)}.memory-legend{position:absolute;bottom:20px;right:20px;background:#fff;padding:.75rem 1rem;border-radius:4px;box-shadow:0 2px 8px #00000026;font-family:Source Sans Pro,sans-serif;font-size:.8rem;z-index:1000}.memory-legend h4{font-size:.75rem;text-transform:uppercase;letter-spacing:.05em;color:var(--color-brown-light);margin-bottom:.5rem}.legend-item{display:flex;align-items:center;gap:.5rem;margin-bottom:.25rem}.legend-dot{width:10px;height:10px;border-radius:50%}.legend-dot.current{background:var(--color-terracotta)}.legend-dot.memory{background:var(--color-sea)}.legend-line{width:20px;height:3px;background:#2563eb;border-radius:1px}.water-label{background:transparent!important;border:none!important}.back-button{display:inline-flex;align-items:center;gap:.5rem;padding:.5rem 1rem;background:var(--color-parchment);border:1px solid var(--color-brown-light);border-radius:4px;font-family:Source Sans Pro,sans-serif;font-size:.9rem;color:var(--color-brown-dark);cursor:pointer;margin-bottom:1rem;transition:all .2s ease}.back-button:hover{background:var(--color-terracotta);color:#fff;border-color:var(--color-terracotta)}@media(max-width:1024px){.reading-view{flex-direction:column}.text-panel,.map-panel{width:100%;height:50%}.books-panel{width:240px;min-width:200px}.summary-map{flex:1;min-height:400px}}@media(max-width:768px){.app-header{padding:.5rem 1rem;flex-wrap:wrap}.app-header h1{font-size:1.2rem;margin-bottom:.5rem;width:100%}.app-header nav{font-size:.85rem;width:100%;display:flex;gap:.75rem}.app-header nav a{margin-left:0;flex:1;text-align:center;padding:.4rem .5rem;background:#ffffff1a;border-radius:4px}.summary-view{flex-direction:column}.books-panel{width:100%;min-width:100%;max-height:40vh;border-right:none;border-bottom:1px solid var(--color-parchment-dark);padding:1rem}.books-panel h2{font-size:1.1rem}.book-item{padding:.75rem;margin-bottom:.5rem}.book-item h3{font-size:1rem}.book-item .book-stats{font-size:.8rem}.summary-map{flex:1;min-height:300px;height:60vh}.summary-map .leaflet-container{height:100%!important;width:100%!important}.reading-view{flex-direction:column}.text-panel,.map-panel{width:100%;height:50vh}.text-header h2{font-size:1rem}.chapter-nav{font-size:.85rem}.chapter-nav button{padding:.4rem .8rem;font-size:.85rem}.about-view{padding:1rem}.about-view .about-content{padding:1.5rem 1.25rem}.about-content h2{font-size:1.2rem}.about-content h3{font-size:.95rem}.about-content p,.about-content ul{font-size:.9rem}button,a,.book-item{min-height:44px;min-width:44px}.memory-legend{display:none}}@media(max-width:480px){.app-header h1{font-size:1rem}.app-header nav{font-size:.75rem}.books-panel{padding:.75rem}.summary-map{height:calc(60vh - 120px);min-height:250px}}
/*$vite$:1*/`,document.head.appendChild(bn);function hn(B){return B&&B.__esModule&&Object.prototype.hasOwnProperty.call(B,"default")?B.default:B}var ln={exports:{}},ei={};var uu;function qg(){if(uu)return ei;uu=1;var B=Symbol.for("react.transitional.element"),Y=Symbol.for("react.fragment");function N(U,J,he){var E=null;if(he!==void 0&&(E=""+he),J.key!==void 0&&(E=""+J.key),"key"in J){he={};for(var c in J)c!=="key"&&(he[c]=J[c])}else he=J;return J=he.ref,{$$typeof:B,type:U,key:E,ref:J!==void 0?J:null,props:he}}return ei.Fragment=Y,ei.jsx=N,ei.jsxs=N,ei}var Em;function mu(){return Em||(Em=1,ln.exports=qg()),ln.exports}var xe=mu(),ac={exports:{}},Aa={};var Ly;function Y1(){if(Ly)return Aa;Ly=1;var B=Symbol.for("react.transitional.element"),Y=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),J=Symbol.for("react.profiler"),he=Symbol.for("react.consumer"),E=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),re=Symbol.for("react.suspense"),fe=Symbol.for("react.memo"),Le=Symbol.for("react.lazy"),Ce=Symbol.for("react.activity"),Pe=Symbol.iterator;function ft(_e){return _e===null||typeof _e!="object"?null:(_e=Pe&&_e[Pe]||_e["@@iterator"],typeof _e=="function"?_e:null)}var kt={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},it=Object.assign,Te={};function Vt(_e,tt,Ot){this.props=_e,this.context=tt,this.refs=Te,this.updater=Ot||kt}Vt.prototype.isReactComponent={},Vt.prototype.setState=function(_e,tt){if(typeof _e!="object"&&typeof _e!="function"&&_e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_e,tt,"setState")},Vt.prototype.forceUpdate=function(_e){this.updater.enqueueForceUpdate(this,_e,"forceUpdate")};function Ft(){}Ft.prototype=Vt.prototype;function mt(_e,tt,Ot){this.props=_e,this.context=tt,this.refs=Te,this.updater=Ot||kt}var Et=mt.prototype=new Ft;Et.constructor=mt,it(Et,Vt.prototype),Et.isPureReactComponent=!0;var $t=Array.isArray;function Ia(){}var zt={H:null,A:null,T:null,S:null},ca=Object.prototype.hasOwnProperty;function ba(_e,tt,Ot){var St=Ot.ref;return{$$typeof:B,type:_e,key:tt,ref:St!==void 0?St:null,props:Ot}}function fs(_e,tt){return ba(_e.type,tt,_e.props)}function ma(_e){return typeof _e=="object"&&_e!==null&&_e.$$typeof===B}function pa(_e){var tt={"=":"=0",":":"=2"};return"$"+_e.replace(/[=:]/g,function(Ot){return tt[Ot]})}var Ca=/\/+/g;function os(_e,tt){return typeof _e=="object"&&_e!==null&&_e.key!=null?pa(""+_e.key):tt.toString(36)}function Ts(_e){switch(_e.status){case"fulfilled":return _e.value;case"rejected":throw _e.reason;default:switch(typeof _e.status=="string"?_e.then(Ia,Ia):(_e.status="pending",_e.then(function(tt){_e.status==="pending"&&(_e.status="fulfilled",_e.value=tt)},function(tt){_e.status==="pending"&&(_e.status="rejected",_e.reason=tt)})),_e.status){case"fulfilled":return _e.value;case"rejected":throw _e.reason}}throw _e}function Je(_e,tt,Ot,St,Ct){var Ht=typeof _e;(Ht==="undefined"||Ht==="boolean")&&(_e=null);var da=!1;if(_e===null)da=!0;else switch(Ht){case"bigint":case"string":case"number":da=!0;break;case"object":switch(_e.$$typeof){case B:case Y:da=!0;break;case Le:return da=_e._init,Je(da(_e._payload),tt,Ot,St,Ct)}}if(da)return Ct=Ct(_e),da=St===""?"."+os(_e,0):St,$t(Ct)?(Ot="",da!=null&&(Ot=da.replace(Ca,"$&/")+"/"),Je(Ct,tt,Ot,"",function(xn){return xn})):Ct!=null&&(ma(Ct)&&(Ct=fs(Ct,Ot+(Ct.key==null||_e&&_e.key===Ct.key?"":(""+Ct.key).replace(Ca,"$&/")+"/")+da)),tt.push(Ct)),1;da=0;var Ma=St===""?".":St+":";if($t(_e))for(var is=0;is<_e.length;is++)St=_e[is],Ht=Ma+os(St,is),da+=Je(St,tt,Ot,Ht,Ct);else if(is=ft(_e),typeof is=="function")for(_e=is.call(_e),is=0;!(St=_e.next()).done;)St=St.value,Ht=Ma+os(St,is++),da+=Je(St,tt,Ot,Ht,Ct);else if(Ht==="object"){if(typeof _e.then=="function")return Je(Ts(_e),tt,Ot,St,Ct);throw tt=String(_e),Error("Objects are not valid as a React child (found: "+(tt==="[object Object]"?"object with keys {"+Object.keys(_e).join(", ")+"}":tt)+"). If you meant to render a collection of children, use an array instead.")}return da}function It(_e,tt,Ot){if(_e==null)return _e;var St=[],Ct=0;return Je(_e,St,"","",function(Ht){return tt.call(Ot,Ht,Ct++)}),St}function gt(_e){if(_e._status===-1){var tt=_e._result;tt=tt(),tt.then(function(Ot){(_e._status===0||_e._status===-1)&&(_e._status=1,_e._result=Ot)},function(Ot){(_e._status===0||_e._status===-1)&&(_e._status=2,_e._result=Ot)}),_e._status===-1&&(_e._status=0,_e._result=tt)}if(_e._status===1)return _e._result.default;throw _e._result}var jt=typeof reportError=="function"?reportError:function(_e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var tt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof _e=="object"&&_e!==null&&typeof _e.message=="string"?String(_e.message):String(_e),error:_e});if(!window.dispatchEvent(tt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",_e);return}console.error(_e)},Dt={map:It,forEach:function(_e,tt,Ot){It(_e,function(){tt.apply(this,arguments)},Ot)},count:function(_e){var tt=0;return It(_e,function(){tt++}),tt},toArray:function(_e){return It(_e,function(tt){return tt})||[]},only:function(_e){if(!ma(_e))throw Error("React.Children.only expected to receive a single React element child.");return _e}};return Aa.Activity=Ce,Aa.Children=Dt,Aa.Component=Vt,Aa.Fragment=N,Aa.Profiler=J,Aa.PureComponent=mt,Aa.StrictMode=U,Aa.Suspense=re,Aa.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=zt,Aa.__COMPILER_RUNTIME={__proto__:null,c:function(_e){return zt.H.useMemoCache(_e)}},Aa.cache=function(_e){return function(){return _e.apply(null,arguments)}},Aa.cacheSignal=function(){return null},Aa.cloneElement=function(_e,tt,Ot){if(_e==null)throw Error("The argument must be a React element, but you passed "+_e+".");var St=it({},_e.props),Ct=_e.key;if(tt!=null)for(Ht in tt.key!==void 0&&(Ct=""+tt.key),tt)!ca.call(tt,Ht)||Ht==="key"||Ht==="__self"||Ht==="__source"||Ht==="ref"&&tt.ref===void 0||(St[Ht]=tt[Ht]);var Ht=arguments.length-2;if(Ht===1)St.children=Ot;else if(1<Ht){for(var da=Array(Ht),Ma=0;Ma<Ht;Ma++)da[Ma]=arguments[Ma+2];St.children=da}return ba(_e.type,Ct,St)},Aa.createContext=function(_e){return _e={$$typeof:E,_currentValue:_e,_currentValue2:_e,_threadCount:0,Provider:null,Consumer:null},_e.Provider=_e,_e.Consumer={$$typeof:he,_context:_e},_e},Aa.createElement=function(_e,tt,Ot){var St,Ct={},Ht=null;if(tt!=null)for(St in tt.key!==void 0&&(Ht=""+tt.key),tt)ca.call(tt,St)&&St!=="key"&&St!=="__self"&&St!=="__source"&&(Ct[St]=tt[St]);var da=arguments.length-2;if(da===1)Ct.children=Ot;else if(1<da){for(var Ma=Array(da),is=0;is<da;is++)Ma[is]=arguments[is+2];Ct.children=Ma}if(_e&&_e.defaultProps)for(St in da=_e.defaultProps,da)Ct[St]===void 0&&(Ct[St]=da[St]);return ba(_e,Ht,Ct)},Aa.createRef=function(){return{current:null}},Aa.forwardRef=function(_e){return{$$typeof:c,render:_e}},Aa.isValidElement=ma,Aa.lazy=function(_e){return{$$typeof:Le,_payload:{_status:-1,_result:_e},_init:gt}},Aa.memo=function(_e,tt){return{$$typeof:fe,type:_e,compare:tt===void 0?null:tt}},Aa.startTransition=function(_e){var tt=zt.T,Ot={};zt.T=Ot;try{var St=_e(),Ct=zt.S;Ct!==null&&Ct(Ot,St),typeof St=="object"&&St!==null&&typeof St.then=="function"&&St.then(Ia,jt)}catch(Ht){jt(Ht)}finally{tt!==null&&Ot.types!==null&&(tt.types=Ot.types),zt.T=tt}},Aa.unstable_useCacheRefresh=function(){return zt.H.useCacheRefresh()},Aa.use=function(_e){return zt.H.use(_e)},Aa.useActionState=function(_e,tt,Ot){return zt.H.useActionState(_e,tt,Ot)},Aa.useCallback=function(_e,tt){return zt.H.useCallback(_e,tt)},Aa.useContext=function(_e){return zt.H.useContext(_e)},Aa.useDebugValue=function(){},Aa.useDeferredValue=function(_e,tt){return zt.H.useDeferredValue(_e,tt)},Aa.useEffect=function(_e,tt){return zt.H.useEffect(_e,tt)},Aa.useEffectEvent=function(_e){return zt.H.useEffectEvent(_e)},Aa.useId=function(){return zt.H.useId()},Aa.useImperativeHandle=function(_e,tt,Ot){return zt.H.useImperativeHandle(_e,tt,Ot)},Aa.useInsertionEffect=function(_e,tt){return zt.H.useInsertionEffect(_e,tt)},Aa.useLayoutEffect=function(_e,tt){return zt.H.useLayoutEffect(_e,tt)},Aa.useMemo=function(_e,tt){return zt.H.useMemo(_e,tt)},Aa.useOptimistic=function(_e,tt){return zt.H.useOptimistic(_e,tt)},Aa.useReducer=function(_e,tt,Ot){return zt.H.useReducer(_e,tt,Ot)},Aa.useRef=function(_e){return zt.H.useRef(_e)},Aa.useState=function(_e){return zt.H.useState(_e)},Aa.useSyncExternalStore=function(_e,tt,Ot){return zt.H.useSyncExternalStore(_e,tt,Ot)},Aa.useTransition=function(){return zt.H.useTransition()},Aa.version="19.2.3",Aa}var zy;function Vg(){return zy||(zy=1,ac.exports=Y1()),ac.exports}var Be=Vg();const gu=hn(Be);var Wg={exports:{}},yu={},Zg={exports:{}},Xg={};var Dy;function $1(){return Dy||(Dy=1,(function(B){function Y(Je,It){var gt=Je.length;Je.push(It);e:for(;0<gt;){var jt=gt-1>>>1,Dt=Je[jt];if(0<J(Dt,It))Je[jt]=It,Je[gt]=Dt,gt=jt;else break e}}function N(Je){return Je.length===0?null:Je[0]}function U(Je){if(Je.length===0)return null;var It=Je[0],gt=Je.pop();if(gt!==It){Je[0]=gt;e:for(var jt=0,Dt=Je.length,_e=Dt>>>1;jt<_e;){var tt=2*(jt+1)-1,Ot=Je[tt],St=tt+1,Ct=Je[St];if(0>J(Ot,gt))St<Dt&&0>J(Ct,Ot)?(Je[jt]=Ct,Je[St]=gt,jt=St):(Je[jt]=Ot,Je[tt]=gt,jt=tt);else if(St<Dt&&0>J(Ct,gt))Je[jt]=Ct,Je[St]=gt,jt=St;else break e}}return It}function J(Je,It){var gt=Je.sortIndex-It.sortIndex;return gt!==0?gt:Je.id-It.id}if(B.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var he=performance;B.unstable_now=function(){return he.now()}}else{var E=Date,c=E.now();B.unstable_now=function(){return E.now()-c}}var re=[],fe=[],Le=1,Ce=null,Pe=3,ft=!1,kt=!1,it=!1,Te=!1,Vt=typeof setTimeout=="function"?setTimeout:null,Ft=typeof clearTimeout=="function"?clearTimeout:null,mt=typeof setImmediate!="undefined"?setImmediate:null;function Et(Je){for(var It=N(fe);It!==null;){if(It.callback===null)U(fe);else if(It.startTime<=Je)U(fe),It.sortIndex=It.expirationTime,Y(re,It);else break;It=N(fe)}}function $t(Je){if(it=!1,Et(Je),!kt)if(N(re)!==null)kt=!0,Ia||(Ia=!0,pa());else{var It=N(fe);It!==null&&Ts($t,It.startTime-Je)}}var Ia=!1,zt=-1,ca=5,ba=-1;function fs(){return Te?!0:!(B.unstable_now()-ba<ca)}function ma(){if(Te=!1,Ia){var Je=B.unstable_now();ba=Je;var It=!0;try{e:{kt=!1,it&&(it=!1,Ft(zt),zt=-1),ft=!0;var gt=Pe;try{t:{for(Et(Je),Ce=N(re);Ce!==null&&!(Ce.expirationTime>Je&&fs());){var jt=Ce.callback;if(typeof jt=="function"){Ce.callback=null,Pe=Ce.priorityLevel;var Dt=jt(Ce.expirationTime<=Je);if(Je=B.unstable_now(),typeof Dt=="function"){Ce.callback=Dt,Et(Je),It=!0;break t}Ce===N(re)&&U(re),Et(Je)}else U(re);Ce=N(re)}if(Ce!==null)It=!0;else{var _e=N(fe);_e!==null&&Ts($t,_e.startTime-Je),It=!1}}break e}finally{Ce=null,Pe=gt,ft=!1}It=void 0}}finally{It?pa():Ia=!1}}}var pa;if(typeof mt=="function")pa=function(){mt(ma)};else if(typeof MessageChannel!="undefined"){var Ca=new MessageChannel,os=Ca.port2;Ca.port1.onmessage=ma,pa=function(){os.postMessage(null)}}else pa=function(){Vt(ma,0)};function Ts(Je,It){zt=Vt(function(){Je(B.unstable_now())},It)}B.unstable_IdlePriority=5,B.unstable_ImmediatePriority=1,B.unstable_LowPriority=4,B.unstable_NormalPriority=3,B.unstable_Profiling=null,B.unstable_UserBlockingPriority=2,B.unstable_cancelCallback=function(Je){Je.callback=null},B.unstable_forceFrameRate=function(Je){0>Je||125<Je?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ca=0<Je?Math.floor(1e3/Je):5},B.unstable_getCurrentPriorityLevel=function(){return Pe},B.unstable_next=function(Je){switch(Pe){case 1:case 2:case 3:var It=3;break;default:It=Pe}var gt=Pe;Pe=It;try{return Je()}finally{Pe=gt}},B.unstable_requestPaint=function(){Te=!0},B.unstable_runWithPriority=function(Je,It){switch(Je){case 1:case 2:case 3:case 4:case 5:break;default:Je=3}var gt=Pe;Pe=Je;try{return It()}finally{Pe=gt}},B.unstable_scheduleCallback=function(Je,It,gt){var jt=B.unstable_now();switch(typeof gt=="object"&&gt!==null?(gt=gt.delay,gt=typeof gt=="number"&&0<gt?jt+gt:jt):gt=jt,Je){case 1:var Dt=-1;break;case 2:Dt=250;break;case 5:Dt=1073741823;break;case 4:Dt=1e4;break;default:Dt=5e3}return Dt=gt+Dt,Je={id:Le++,callback:It,priorityLevel:Je,startTime:gt,expirationTime:Dt,sortIndex:-1},gt>jt?(Je.sortIndex=gt,Y(fe,Je),N(re)===null&&Je===N(fe)&&(it?(Ft(zt),zt=-1):it=!0,Ts($t,gt-jt))):(Je.sortIndex=Dt,Y(re,Je),kt||ft||(kt=!0,Ia||(Ia=!0,pa()))),Je},B.unstable_shouldYield=fs,B.unstable_wrapCallback=function(Je){var It=Pe;return function(){var gt=Pe;Pe=It;try{return Je.apply(this,arguments)}finally{Pe=gt}}}})(Xg)),Xg}var By;function K1(){return By||(By=1,Zg.exports=$1()),Zg.exports}var Yg={exports:{}},ki={};var Ry;function Q1(){if(Ry)return ki;Ry=1;var B=Vg();function Y(re){var fe="https://react.dev/errors/"+re;if(1<arguments.length){fe+="?args[]="+encodeURIComponent(arguments[1]);for(var Le=2;Le<arguments.length;Le++)fe+="&args[]="+encodeURIComponent(arguments[Le])}return"Minified React error #"+re+"; visit "+fe+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function N(){}var U={d:{f:N,r:function(){throw Error(Y(522))},D:N,C:N,L:N,m:N,X:N,S:N,M:N},p:0,findDOMNode:null},J=Symbol.for("react.portal");function he(re,fe,Le){var Ce=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:J,key:Ce==null?null:""+Ce,children:re,containerInfo:fe,implementation:Le}}var E=B.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(re,fe){if(re==="font")return"";if(typeof fe=="string")return fe==="use-credentials"?fe:""}return ki.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,ki.createPortal=function(re,fe){var Le=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fe||fe.nodeType!==1&&fe.nodeType!==9&&fe.nodeType!==11)throw Error(Y(299));return he(re,fe,null,Le)},ki.flushSync=function(re){var fe=E.T,Le=U.p;try{if(E.T=null,U.p=2,re)return re()}finally{E.T=fe,U.p=Le,U.d.f()}},ki.preconnect=function(re,fe){typeof re=="string"&&(fe?(fe=fe.crossOrigin,fe=typeof fe=="string"?fe==="use-credentials"?fe:"":void 0):fe=null,U.d.C(re,fe))},ki.prefetchDNS=function(re){typeof re=="string"&&U.d.D(re)},ki.preinit=function(re,fe){if(typeof re=="string"&&fe&&typeof fe.as=="string"){var Le=fe.as,Ce=c(Le,fe.crossOrigin),Pe=typeof fe.integrity=="string"?fe.integrity:void 0,ft=typeof fe.fetchPriority=="string"?fe.fetchPriority:void 0;Le==="style"?U.d.S(re,typeof fe.precedence=="string"?fe.precedence:void 0,{crossOrigin:Ce,integrity:Pe,fetchPriority:ft}):Le==="script"&&U.d.X(re,{crossOrigin:Ce,integrity:Pe,fetchPriority:ft,nonce:typeof fe.nonce=="string"?fe.nonce:void 0})}},ki.preinitModule=function(re,fe){if(typeof re=="string")if(typeof fe=="object"&&fe!==null){if(fe.as==null||fe.as==="script"){var Le=c(fe.as,fe.crossOrigin);U.d.M(re,{crossOrigin:Le,integrity:typeof fe.integrity=="string"?fe.integrity:void 0,nonce:typeof fe.nonce=="string"?fe.nonce:void 0})}}else fe==null&&U.d.M(re)},ki.preload=function(re,fe){if(typeof re=="string"&&typeof fe=="object"&&fe!==null&&typeof fe.as=="string"){var Le=fe.as,Ce=c(Le,fe.crossOrigin);U.d.L(re,Le,{crossOrigin:Ce,integrity:typeof fe.integrity=="string"?fe.integrity:void 0,nonce:typeof fe.nonce=="string"?fe.nonce:void 0,type:typeof fe.type=="string"?fe.type:void 0,fetchPriority:typeof fe.fetchPriority=="string"?fe.fetchPriority:void 0,referrerPolicy:typeof fe.referrerPolicy=="string"?fe.referrerPolicy:void 0,imageSrcSet:typeof fe.imageSrcSet=="string"?fe.imageSrcSet:void 0,imageSizes:typeof fe.imageSizes=="string"?fe.imageSizes:void 0,media:typeof fe.media=="string"?fe.media:void 0})}},ki.preloadModule=function(re,fe){if(typeof re=="string")if(fe){var Le=c(fe.as,fe.crossOrigin);U.d.m(re,{as:typeof fe.as=="string"&&fe.as!=="script"?fe.as:void 0,crossOrigin:Le,integrity:typeof fe.integrity=="string"?fe.integrity:void 0})}else U.d.m(re)},ki.requestFormReset=function(re){U.d.r(re)},ki.unstable_batchedUpdates=function(re,fe){return re(fe)},ki.useFormState=function(re,fe,Le){return E.H.useFormState(re,fe,Le)},ki.useFormStatus=function(){return E.H.useHostTransitionStatus()},ki.version="19.2.3",ki}var Hy;function Ny(){if(Hy)return Yg.exports;Hy=1;function B(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(B)}catch(Y){console.error(Y)}}return B(),Yg.exports=Q1(),Yg.exports}var Gy;function J1(){if(Gy)return yu;Gy=1;var B=K1(),Y=Vg(),N=Ny();function U(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)i+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function J(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function he(n){var i=n,f=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(f=i.return),n=i.return;while(n)}return i.tag===3?f:null}function E(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function c(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function re(n){if(he(n)!==n)throw Error(U(188))}function fe(n){var i=n.alternate;if(!i){if(i=he(n),i===null)throw Error(U(188));return i!==n?null:n}for(var f=n,b=i;;){var x=f.return;if(x===null)break;var S=x.alternate;if(S===null){if(b=x.return,b!==null){f=b;continue}break}if(x.child===S.child){for(S=x.child;S;){if(S===f)return re(x),n;if(S===b)return re(x),i;S=S.sibling}throw Error(U(188))}if(f.return!==b.return)f=x,b=S;else{for(var q=!1,se=x.child;se;){if(se===f){q=!0,f=x,b=S;break}if(se===b){q=!0,b=x,f=S;break}se=se.sibling}if(!q){for(se=S.child;se;){if(se===f){q=!0,f=S,b=x;break}if(se===b){q=!0,b=S,f=x;break}se=se.sibling}if(!q)throw Error(U(189))}}if(f.alternate!==b)throw Error(U(190))}if(f.tag!==3)throw Error(U(188));return f.stateNode.current===f?n:i}function Le(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=Le(n),i!==null)return i;n=n.sibling}return null}var Ce=Object.assign,Pe=Symbol.for("react.element"),ft=Symbol.for("react.transitional.element"),kt=Symbol.for("react.portal"),it=Symbol.for("react.fragment"),Te=Symbol.for("react.strict_mode"),Vt=Symbol.for("react.profiler"),Ft=Symbol.for("react.consumer"),mt=Symbol.for("react.context"),Et=Symbol.for("react.forward_ref"),$t=Symbol.for("react.suspense"),Ia=Symbol.for("react.suspense_list"),zt=Symbol.for("react.memo"),ca=Symbol.for("react.lazy"),ba=Symbol.for("react.activity"),fs=Symbol.for("react.memo_cache_sentinel"),ma=Symbol.iterator;function pa(n){return n===null||typeof n!="object"?null:(n=ma&&n[ma]||n["@@iterator"],typeof n=="function"?n:null)}var Ca=Symbol.for("react.client.reference");function os(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===Ca?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case it:return"Fragment";case Vt:return"Profiler";case Te:return"StrictMode";case $t:return"Suspense";case Ia:return"SuspenseList";case ba:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case kt:return"Portal";case mt:return n.displayName||"Context";case Ft:return(n._context.displayName||"Context")+".Consumer";case Et:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case zt:return i=n.displayName||null,i!==null?i:os(n.type)||"Memo";case ca:i=n._payload,n=n._init;try{return os(n(i))}catch(f){}}return null}var Ts=Array.isArray,Je=Y.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,It=N.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,gt={pending:!1,data:null,method:null,action:null},jt=[],Dt=-1;function _e(n){return{current:n}}function tt(n){0>Dt||(n.current=jt[Dt],jt[Dt]=null,Dt--)}function Ot(n,i){Dt++,jt[Dt]=n.current,n.current=i}var St=_e(null),Ct=_e(null),Ht=_e(null),da=_e(null);function Ma(n,i){switch(Ot(Ht,i),Ot(Ct,n),Ot(St,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?Od(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=Od(i),n=im(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}tt(St),Ot(St,n)}function is(){tt(St),tt(Ct),tt(Ht)}function xn(n){n.memoizedState!==null&&Ot(da,n);var i=St.current,f=im(i,n.type);i!==f&&(Ot(Ct,n),Ot(St,f))}function _i(n){Ct.current===n&&(tt(St),tt(Ct)),da.current===n&&(tt(da),Qf._currentValue=gt)}var Tn,kr;function As(n){if(Tn===void 0)try{throw Error()}catch(f){var i=f.stack.trim().match(/\n( *(at )?)/);Tn=i&&i[1]||"",kr=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Tn+n+kr}var Yn=!1;function Po(n,i){if(!n||Yn)return"";Yn=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var b={DetermineComponentFrameRoot:function(){try{if(i){var pt=function(){throw Error()};if(Object.defineProperty(pt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pt,[])}catch(at){var Qe=at}Reflect.construct(n,[],pt)}else{try{pt.call()}catch(at){Qe=at}n.call(pt.prototype)}}else{try{throw Error()}catch(at){Qe=at}(pt=n())&&typeof pt.catch=="function"&&pt.catch(function(){})}}catch(at){if(at&&Qe&&typeof at.stack=="string")return[at.stack,Qe.stack]}return[null,null]}};b.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(b.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(b.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=b.DetermineComponentFrameRoot(),q=S[0],se=S[1];if(q&&se){var Ae=q.split(`
`),Ye=se.split(`
`);for(x=b=0;b<Ae.length&&!Ae[b].includes("DetermineComponentFrameRoot");)b++;for(;x<Ye.length&&!Ye[x].includes("DetermineComponentFrameRoot");)x++;if(b===Ae.length||x===Ye.length)for(b=Ae.length-1,x=Ye.length-1;1<=b&&0<=x&&Ae[b]!==Ye[x];)x--;for(;1<=b&&0<=x;b--,x--)if(Ae[b]!==Ye[x]){if(b!==1||x!==1)do if(b--,x--,0>x||Ae[b]!==Ye[x]){var rt=`
`+Ae[b].replace(" at new "," at ");return n.displayName&&rt.includes("<anonymous>")&&(rt=rt.replace("<anonymous>",n.displayName)),rt}while(1<=b&&0<=x);break}}}finally{Yn=!1,Error.prepareStackTrace=f}return(f=n?n.displayName||n.name:"")?As(f):""}function vs(n,i){switch(n.tag){case 26:case 27:case 5:return As(n.type);case 16:return As("Lazy");case 13:return n.child!==i&&i!==null?As("Suspense Fallback"):As("Suspense");case 19:return As("SuspenseList");case 0:case 15:return Po(n.type,!1);case 11:return Po(n.type.render,!1);case 1:return Po(n.type,!0);case 31:return As("Activity");default:return""}}function Ro(n){try{var i="",f=null;do i+=vs(n,f),f=n,n=n.return;while(n);return i}catch(b){return`
Error generating stack: `+b.message+`
`+b.stack}}var Zi=Object.prototype.hasOwnProperty,Xi=B.unstable_scheduleCallback,Ho=B.unstable_cancelCallback,No=B.unstable_shouldYield,Jr=B.unstable_requestPaint,wn=B.unstable_now,ro=B.unstable_getCurrentPriorityLevel,Re=B.unstable_ImmediatePriority,K=B.unstable_UserBlockingPriority,$=B.unstable_NormalPriority,ne=B.unstable_LowPriority,Oe=B.unstable_IdlePriority,Ie=B.log,je=B.unstable_setDisableYieldValue,ze=null,Se=null;function Ue(n){if(typeof Ie=="function"&&je(n),Se&&typeof Se.setStrictMode=="function")try{Se.setStrictMode(ze,n)}catch(i){}}var nt=Math.clz32?Math.clz32:Ut,st=Math.log,Bt=Math.LN2;function Ut(n){return n>>>=0,n===0?32:31-(st(n)/Bt|0)|0}var Jt=256,Ga=262144,Ea=4194304;function Ne(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Za(n,i,f){var b=n.pendingLanes;if(b===0)return 0;var x=0,S=n.suspendedLanes,q=n.pingedLanes;n=n.warmLanes;var se=b&134217727;return se!==0?(b=se&~S,b!==0?x=Ne(b):(q&=se,q!==0?x=Ne(q):f||(f=se&~n,f!==0&&(x=Ne(f))))):(se=b&~S,se!==0?x=Ne(se):q!==0?x=Ne(q):f||(f=b&~n,f!==0&&(x=Ne(f)))),x===0?0:i!==0&&i!==x&&(i&S)===0&&(S=x&-x,f=i&-i,S>=f||S===32&&(f&4194048)!==0)?i:x}function Ws(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function sa(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xa(){var n=Ea;return Ea<<=1,(Ea&62914560)===0&&(Ea=4194304),n}function dn(n){for(var i=[],f=0;31>f;f++)i.push(n);return i}function qa(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Ls(n,i,f,b,x,S){var q=n.pendingLanes;n.pendingLanes=f,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=f,n.entangledLanes&=f,n.errorRecoveryDisabledLanes&=f,n.shellSuspendCounter=0;var se=n.entanglements,Ae=n.expirationTimes,Ye=n.hiddenUpdates;for(f=q&~f;0<f;){var rt=31-nt(f),pt=1<<rt;se[rt]=0,Ae[rt]=-1;var Qe=Ye[rt];if(Qe!==null)for(Ye[rt]=null,rt=0;rt<Qe.length;rt++){var at=Qe[rt];at!==null&&(at.lane&=-536870913)}f&=~pt}b!==0&&es(n,b,0),S!==0&&x===0&&n.tag!==0&&(n.suspendedLanes|=S&~(q&~i))}function es(n,i,f){n.pendingLanes|=i,n.suspendedLanes&=~i;var b=31-nt(i);n.entangledLanes|=i,n.entanglements[b]=n.entanglements[b]|1073741824|f&261930}function Zs(n,i){var f=n.entangledLanes|=i;for(n=n.entanglements;f;){var b=31-nt(f),x=1<<b;x&i|n[b]&i&&(n[b]|=i),f&=~x}}function Bh(n,i){var f=i&-i;return f=(f&42)!==0?1:Rn(f),(f&(n.suspendedLanes|i))!==0?0:f}function Rn(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function We(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function An(){var n=It.p;return n!==0?n:(n=window.event,n===void 0?32:df(n.type))}function Sn(n,i){var f=It.p;try{return It.p=n,i()}finally{It.p=f}}var Go=Math.random().toString(36).slice(2),ts="__reactFiber$"+Go,wt="__reactProps$"+Go,na="__reactContainer$"+Go,ta="__reactEvents$"+Go,ho="__reactListeners$"+Go,Xl="__reactHandles$"+Go,Ii="__reactResources$"+Go,oa="__reactMarker$"+Go;function eh(n){delete n[ts],delete n[wt],delete n[ta],delete n[ho],delete n[Xl]}function ti(n){var i=n[ts];if(i)return i;for(var f=n.parentNode;f;){if(i=f[na]||f[ts]){if(f=i.alternate,i.child!==null||f!==null&&f.child!==null)for(n=Gc(n);n!==null;){if(f=n[ts])return f;n=Gc(n)}return i}n=f,f=n.parentNode}return null}function Yi(n){if(n=n[ts]||n[na]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function Eo(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(U(33))}function xi(n){var i=n[Ii];return i||(i=n[Ii]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function zs(n){n[oa]=!0}var Rh=new Set,Hn={};function La(n,i){ai(n,i),ai(n+"Capture",i)}function ai(n,i){for(Hn[n]=i,n=0;n<i.length;n++)Rh.add(i[n])}var Ti=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),th={},$i={};function $n(n){return Zi.call($i,n)?!0:Zi.call(th,n)?!1:Ti.test(n)?$i[n]=!0:(th[n]=!0,!1)}function za(n,i,f){if($n(i))if(f===null)n.removeAttribute(i);else{switch(typeof f){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var b=i.toLowerCase().slice(0,5);if(b!=="data-"&&b!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+f)}}function Va(n,i,f){if(f===null)n.removeAttribute(i);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+f)}}function Kn(n,i,f,b){if(b===null)n.removeAttribute(f);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(f);return}n.setAttributeNS(i,f,""+b)}}function xa(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function _r(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Yl(n,i,f){var b=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof b!="undefined"&&typeof b.get=="function"&&typeof b.set=="function"){var x=b.get,S=b.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return x.call(this)},set:function(q){f=""+q,S.call(this,q)}}),Object.defineProperty(n,i,{enumerable:b.enumerable}),{getValue:function(){return f},setValue:function(q){f=""+q},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function fa(n){if(!n._valueTracker){var i=_r(n)?"checked":"value";n._valueTracker=Yl(n,i,""+n[i])}}function Ds(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var f=i.getValue(),b="";return n&&(b=_r(n)?n.checked?"true":"false":n.value),n=b,n!==f?(i.setValue(n),!0):!1}function ah(n){if(n=n||(typeof document!="undefined"?document:void 0),typeof n=="undefined")return null;try{return n.activeElement||n.body}catch(i){return n.body}}var rl=/[\n"\\]/g;function ys(n){return n.replace(rl,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function hl(n,i,f,b,x,S,q,se){n.name="",q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"?n.type=q:n.removeAttribute("type"),i!=null?q==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+xa(i)):n.value!==""+xa(i)&&(n.value=""+xa(i)):q!=="submit"&&q!=="reset"||n.removeAttribute("value"),i!=null?si(n,q,xa(i)):f!=null?si(n,q,xa(f)):b!=null&&n.removeAttribute("value"),x==null&&S!=null&&(n.defaultChecked=!!S),x!=null&&(n.checked=x&&typeof x!="function"&&typeof x!="symbol"),se!=null&&typeof se!="function"&&typeof se!="symbol"&&typeof se!="boolean"?n.name=""+xa(se):n.removeAttribute("name")}function sh(n,i,f,b,x,S,q,se){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(n.type=S),i!=null||f!=null){if(!(S!=="submit"&&S!=="reset"||i!=null)){fa(n);return}f=f!=null?""+xa(f):"",i=i!=null?""+xa(i):f,se||i===n.value||(n.value=i),n.defaultValue=i}b=b!=null?b:x,b=typeof b!="function"&&typeof b!="symbol"&&!!b,n.checked=se?n.checked:!!b,n.defaultChecked=!!b,q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"&&(n.name=q),fa(n)}function si(n,i,f){i==="number"&&ah(n.ownerDocument)===n||n.defaultValue===""+f||(n.defaultValue=""+f)}function cs(n,i,f,b){if(n=n.options,i){i={};for(var x=0;x<f.length;x++)i["$"+f[x]]=!0;for(f=0;f<n.length;f++)x=i.hasOwnProperty("$"+n[f].value),n[f].selected!==x&&(n[f].selected=x),x&&b&&(n[f].defaultSelected=!0)}else{for(f=""+xa(f),i=null,x=0;x<n.length;x++){if(n[x].value===f){n[x].selected=!0,b&&(n[x].defaultSelected=!0);return}i!==null||n[x].disabled||(i=n[x])}i!==null&&(i.selected=!0)}}function Ir(n,i,f){if(i!=null&&(i=""+xa(i),i!==n.value&&(n.value=i),f==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=f!=null?""+xa(f):""}function Ai(n,i,f,b){if(i==null){if(b!=null){if(f!=null)throw Error(U(92));if(Ts(b)){if(1<b.length)throw Error(U(93));b=b[0]}f=b}f==null&&(f=""),i=f}f=xa(i),n.defaultValue=f,b=n.textContent,b===f&&b!==""&&b!==null&&(n.value=b),fa(n)}function Co(n,i){if(i){var f=n.firstChild;if(f&&f===n.lastChild&&f.nodeType===3){f.nodeValue=i;return}}n.textContent=i}var $l=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ni(n,i,f){var b=i.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?b?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":b?n.setProperty(i,f):typeof f!="number"||f===0||$l.has(i)?i==="float"?n.cssFloat=f:n[i]=(""+f).trim():n[i]=f+"px"}function Hh(n,i,f){if(i!=null&&typeof i!="object")throw Error(U(62));if(n=n.style,f!=null){for(var b in f)!f.hasOwnProperty(b)||i!=null&&i.hasOwnProperty(b)||(b.indexOf("--")===0?n.setProperty(b,""):b==="float"?n.cssFloat="":n[b]="");for(var x in i)b=i[x],i.hasOwnProperty(x)&&f[x]!==b&&ni(n,x,b)}else for(var S in i)i.hasOwnProperty(S)&&ni(n,S,i[S])}function Ki(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var oi=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ra(n){return xr.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function lo(){}var Kl=null;function nh(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var fn=null,Wt=null;function Ba(n){var i=Yi(n);if(i&&(n=i.stateNode)){var f=n[wt]||null;e:switch(n=i.stateNode,i.type){case"input":if(hl(n,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),i=f.name,f.type==="radio"&&i!=null){for(f=n;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+ys(""+i)+'"][type="radio"]'),i=0;i<f.length;i++){var b=f[i];if(b!==n&&b.form===n.form){var x=b[wt]||null;if(!x)throw Error(U(90));hl(b,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(i=0;i<f.length;i++)b=f[i],b.form===n.form&&Ds(b)}break e;case"textarea":Ir(n,f.value,f.defaultValue);break e;case"select":i=f.value,i!=null&&cs(n,!!f.multiple,i,!1)}}}var Nt=!1;function $a(n,i,f){if(Nt)return n(i,f);Nt=!0;try{var b=n(i);return b}finally{if(Nt=!1,(fn!==null||Wt!==null)&&(Mc(),fn&&(i=fn,n=Wt,Wt=fn=null,Ba(i),n)))for(i=0;i<n.length;i++)Ba(n[i])}}function fo(n,i){var f=n.stateNode;if(f===null)return null;var b=f[wt]||null;if(b===null)return null;f=b[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(n=n.type,b=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!b;break e;default:n=!1}if(n)return null;if(f&&typeof f!="function")throw Error(U(231,i,typeof f));return f}var Os=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),Pn=!1;if(Os)try{var ks={};Object.defineProperty(ks,"passive",{get:function(){Pn=!0}}),window.addEventListener("test",ks,ks),window.removeEventListener("test",ks,ks)}catch(n){Pn=!1}var Qn=null,co=null,wa=null;function po(){if(wa)return wa;var n,i=co,f=i.length,b,x="value"in Qn?Qn.value:Qn.textContent,S=x.length;for(n=0;n<f&&i[n]===x[n];n++);var q=f-n;for(b=1;b<=q&&i[f-b]===x[S-b];b++);return wa=x.slice(n,1<b?1-b:void 0)}function uo(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Tr(){return!0}function Jn(){return!1}function Xs(n){function i(f,b,x,S,q){this._reactName=f,this._targetInst=x,this.type=b,this.nativeEvent=S,this.target=q,this.currentTarget=null;for(var se in n)n.hasOwnProperty(se)&&(f=n[se],this[se]=f?f(S):S[se]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?Tr:Jn,this.isPropagationStopped=Jn,this}return Ce(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Tr)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Tr)},persist:function(){},isPersistent:Tr}),i}var En={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ll=Xs(En),Ar=Ce({},En,{view:0,detail:0}),Oa=Xs(Ar),Ka,vn,ua,ia=Ce({},Ar,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cl,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ua&&(ua&&n.type==="mousemove"?(Ka=n.screenX-ua.screenX,vn=n.screenY-ua.screenY):vn=Ka=0,ua=n),Ka)},movementY:function(n){return"movementY"in n?n.movementY:vn}}),oh=Xs(ia),Sa=Ce({},ia,{dataTransfer:0}),dl=Xs(Sa),Mo=Ce({},Ar,{relatedTarget:0}),Sr=Xs(Mo),Pr=Ce({},En,{animationName:0,elapsedTime:0,pseudoElement:0}),Ql=Xs(Pr),fl=Ce({},En,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Fo=Xs(fl),rc=Ce({},En,{data:0}),Jl=Xs(rc),js={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ii={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bs={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qi(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=bs[n])?!!i[n]:!1}function cl(){return Qi}var Nh=Ce({},Ar,{key:function(n){if(n.key){var i=js[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=uo(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?ii[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cl,charCode:function(n){return n.type==="keypress"?uo(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?uo(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ss=Xs(Nh),uf=Ce({},ia,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ed=Xs(uf),td=Ce({},Ar,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cl}),hc=Xs(td),ih=Ce({},En,{propertyName:0,elapsedTime:0,pseudoElement:0}),pl=Xs(ih),Ji=Ce({},ia,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),er=Xs(Ji),ul=Ce({},En,{newState:0,oldState:0}),Si=Xs(ul),Cn=[9,13,27,32],Bs=Os&&"CompositionEvent"in window,rh=null;Os&&"documentMode"in document&&(rh=document.documentMode);var Gh=Os&&"TextEvent"in window&&!rh,Er=Os&&(!Bs||rh&&8<rh&&11>=rh),Pi=" ",mf=!1;function ml(n,i){switch(n){case"keyup":return Cn.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zd(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ri=!1;function mo(n,i){switch(n){case"compositionend":return zd(i);case"keypress":return i.which!==32?null:(mf=!0,Pi);case"textInput":return n=i.data,n===Pi&&mf?null:n;default:return null}}function hh(n,i){if(ri)return n==="compositionend"||!Bs&&ml(n,i)?(n=po(),wa=co=Qn=null,ri=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Er&&i.locale!=="ko"?null:i.data;default:return null}}var gf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jo(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!gf[n.type]:i==="textarea"}function ad(n,i,f,b){fn?Wt?Wt.push(b):Wt=[b]:fn=b,i=Bc(i,"onChange"),0<i.length&&(f=new ll("onChange","change",null,f,b),n.push({event:f,listeners:i}))}var Uo=null,Fh=null;function jh(n){vg(n,0)}function Uh(n){var i=Eo(n);if(Ds(i))return n}function hi(n,i){if(n==="change")return i}var Dd=!1;if(Os){var qo;if(Os){var li="oninput"in document;if(!li){var Bd=document.createElement("div");Bd.setAttribute("oninput","return;"),li=typeof Bd.oninput=="function"}qo=li}else qo=!1;Dd=qo&&(!document.documentMode||9<document.documentMode)}function lh(){Uo&&(Uo.detachEvent("onpropertychange",yf),Fh=Uo=null)}function yf(n){if(n.propertyName==="value"&&Uh(Fh)){var i=[];ad(i,Fh,n,nh(n)),$a(jh,i)}}function tr(n,i,f){n==="focusin"?(lh(),Uo=i,Fh=f,Uo.attachEvent("onpropertychange",yf)):n==="focusout"&&lh()}function bf(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Uh(Fh)}function Ei(n,i){if(n==="click")return Uh(i)}function wf(n,i){if(n==="input"||n==="change")return Uh(i)}function di(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Mn=typeof Object.is=="function"?Object.is:di;function ar(n,i){if(Mn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var f=Object.keys(n),b=Object.keys(i);if(f.length!==b.length)return!1;for(b=0;b<f.length;b++){var x=f[b];if(!Zi.call(i,x)||!Mn(n[x],i[x]))return!1}return!0}function go(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Cr(n,i){var f=go(n);n=0;for(var b;f;){if(f.nodeType===3){if(b=n+f.textContent.length,n<=i&&b>=i)return{node:f,offset:i-n};n=b}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=go(f)}}function qh(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?qh(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function dh(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=ah(n.document);i instanceof n.HTMLIFrameElement;){try{var f=typeof i.contentWindow.location.href=="string"}catch(b){f=!1}if(f)n=i.contentWindow;else break;i=ah(n.document)}return i}function Ci(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var fh=Os&&"documentMode"in document&&11>=document.documentMode,yo=null,Vh=null,gl=null,ch=!1;function vf(n,i,f){var b=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;ch||yo==null||yo!==ah(b)||(b=yo,"selectionStart"in b&&Ci(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),gl&&ar(gl,b)||(gl=b,b=Bc(Vh,"onSelect"),0<b.length&&(i=new ll("onSelect","select",null,i,f),n.push({event:i,listeners:b}),i.target=yo)))}function Mr(n,i){var f={};return f[n.toLowerCase()]=i.toLowerCase(),f["Webkit"+n]="webkit"+i,f["Moz"+n]="moz"+i,f}var ph={animationend:Mr("Animation","AnimationEnd"),animationiteration:Mr("Animation","AnimationIteration"),animationstart:Mr("Animation","AnimationStart"),transitionrun:Mr("Transition","TransitionRun"),transitionstart:Mr("Transition","TransitionStart"),transitioncancel:Mr("Transition","TransitionCancel"),transitionend:Mr("Transition","TransitionEnd")},sd={},Ra={};Os&&(Ra=document.createElement("div").style,"AnimationEvent"in window||(delete ph.animationend.animation,delete ph.animationiteration.animation,delete ph.animationstart.animation),"TransitionEvent"in window||delete ph.transitionend.transition);function cn(n){if(sd[n])return sd[n];if(!ph[n])return n;var i=ph[n],f;for(f in i)if(i.hasOwnProperty(f)&&f in Ra)return sd[n]=i[f];return n}var Lr=cn("animationend"),yl=cn("animationiteration"),uh=cn("animationstart"),mh=cn("transitionrun"),Wh=cn("transitionstart"),Zh=cn("transitioncancel"),Ln=cn("transitionend"),Rd=new Map,sr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");sr.push("scrollEnd");function bo(n,i){Rd.set(n,i),La(i,[n])}var fi=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},eo=[],zn=0,zr=0;function Dr(){for(var n=zn,i=zr=zn=0;i<n;){var f=eo[i];eo[i++]=null;var b=eo[i];eo[i++]=null;var x=eo[i];eo[i++]=null;var S=eo[i];if(eo[i++]=null,b!==null&&x!==null){var q=b.pending;q===null?x.next=x:(x.next=q.next,q.next=x),b.pending=x}S!==0&&gh(f,x,S)}}function nr(n,i,f,b){eo[zn++]=n,eo[zn++]=i,eo[zn++]=f,eo[zn++]=b,zr|=b,n.lanes|=b,n=n.alternate,n!==null&&(n.lanes|=b)}function Br(n,i,f,b){return nr(n,i,f,b),yh(n)}function to(n,i){return nr(n,null,null,i),yh(n)}function gh(n,i,f){n.lanes|=f;var b=n.alternate;b!==null&&(b.lanes|=f);for(var x=!1,S=n.return;S!==null;)S.childLanes|=f,b=S.alternate,b!==null&&(b.childLanes|=f),S.tag===22&&(n=S.stateNode,n===null||n._visibility&1||(x=!0)),n=S,S=S.return;return n.tag===3?(S=n.stateNode,x&&i!==null&&(x=31-nt(f),n=S.hiddenUpdates,b=n[x],b===null?n[x]=[i]:b.push(i),i.lane=f|536870912),S):null}function yh(n){if(50<Cc)throw Cc=0,qu=null,Error(U(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var ha={};function nd(n,i,f,b){this.tag=n,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wo(n,i,f,b){return new nd(n,i,f,b)}function bl(n){return n=n.prototype,!(!n||!n.isReactComponent)}function vo(n,i){var f=n.alternate;return f===null?(f=wo(n.tag,i,n.key,n.mode),f.elementType=n.elementType,f.type=n.type,f.stateNode=n.stateNode,f.alternate=n,n.alternate=f):(f.pendingProps=i,f.type=n.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=n.flags&65011712,f.childLanes=n.childLanes,f.lanes=n.lanes,f.child=n.child,f.memoizedProps=n.memoizedProps,f.memoizedState=n.memoizedState,f.updateQueue=n.updateQueue,i=n.dependencies,f.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},f.sibling=n.sibling,f.index=n.index,f.ref=n.ref,f.refCleanup=n.refCleanup,f}function Hd(n,i){n.flags&=65011714;var f=n.alternate;return f===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=f.childLanes,n.lanes=f.lanes,n.child=f.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=f.memoizedProps,n.memoizedState=f.memoizedState,n.updateQueue=f.updateQueue,n.type=f.type,i=f.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function wl(n,i,f,b,x,S){var q=0;if(b=n,typeof n=="function")bl(n)&&(q=1);else if(typeof n=="string")q=au(n,f,St.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case ba:return n=wo(31,f,i,x),n.elementType=ba,n.lanes=S,n;case it:return Rr(f.children,x,S,i);case Te:q=8,x|=24;break;case Vt:return n=wo(12,f,i,x|2),n.elementType=Vt,n.lanes=S,n;case $t:return n=wo(13,f,i,x),n.elementType=$t,n.lanes=S,n;case Ia:return n=wo(19,f,i,x),n.elementType=Ia,n.lanes=S,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case mt:q=10;break e;case Ft:q=9;break e;case Et:q=11;break e;case zt:q=14;break e;case ca:q=16,b=null;break e}q=29,f=Error(U(130,n===null?"null":typeof n,"")),b=null}return i=wo(q,f,i,x),i.elementType=n,i.type=b,i.lanes=S,i}function Rr(n,i,f,b){return n=wo(7,n,b,i),n.lanes=f,n}function od(n,i,f){return n=wo(6,n,null,i),n.lanes=f,n}function vl(n){var i=wo(18,null,null,0);return i.stateNode=n,i}function Hr(n,i,f){return i=wo(4,n.children!==null?n.children:[],n.key,i),i.lanes=f,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var h=new WeakMap;function y(n,i){if(typeof n=="object"&&n!==null){var f=h.get(n);return f!==void 0?f:(i={value:n,source:i,stack:Ro(i)},h.set(n,i),i)}return{value:n,source:i,stack:Ro(i)}}var _=[],M=0,j=null,te=0,we=[],De=0,$e=null,ct=1,Mt="";function Kt(n,i){_[M++]=te,_[M++]=j,j=n,te=i}function ka(n,i,f){we[De++]=ct,we[De++]=Mt,we[De++]=$e,$e=n;var b=ct;n=Mt;var x=32-nt(b)-1;b&=~(1<<x),f+=1;var S=32-nt(i)+x;if(30<S){var q=x-x%5;S=(b&(1<<q)-1).toString(32),b>>=q,x-=q,ct=1<<32-nt(i)+x|f<<x|b,Mt=S+n}else ct=1<<S|f<<x|b,Mt=n}function Ys(n){n.return!==null&&(Kt(n,1),ka(n,1,0))}function Rs(n){for(;n===j;)j=_[--M],_[M]=null,te=_[--M],_[M]=null;for(;n===$e;)$e=we[--De],we[De]=null,Mt=we[--De],we[De]=null,ct=we[--De],we[De]=null}function Oo(n,i){we[De++]=ct,we[De++]=Mt,we[De++]=$e,ct=i.id,Mt=i.overflow,$e=n}var Ya=null,Ha=null,Pa=!1,or=null,Lo=!1,_s=Error(U(519));function ko(n){var i=Error(U(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ir(y(i,n)),_s}function ao(n){var i=n.stateNode,f=n.type,b=n.memoizedProps;switch(i[ts]=n,i[wt]=b,f){case"dialog":Ua("cancel",i),Ua("close",i);break;case"iframe":case"object":case"embed":Ua("load",i);break;case"video":case"audio":for(f=0;f<vd.length;f++)Ua(vd[f],i);break;case"source":Ua("error",i);break;case"img":case"image":case"link":Ua("error",i),Ua("load",i);break;case"details":Ua("toggle",i);break;case"input":Ua("invalid",i),sh(i,b.value,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name,!0);break;case"select":Ua("invalid",i);break;case"textarea":Ua("invalid",i),Ai(i,b.value,b.defaultValue,b.children)}f=b.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||i.textContent===""+f||b.suppressHydrationWarning===!0||nm(i.textContent,f)?(b.popover!=null&&(Ua("beforetoggle",i),Ua("toggle",i)),b.onScroll!=null&&Ua("scroll",i),b.onScrollEnd!=null&&Ua("scrollend",i),b.onClick!=null&&(i.onclick=lo),i=!0):i=!1,i||ko(n,!0)}function Ps(n){for(Ya=n.return;Ya;)switch(Ya.tag){case 5:case 31:case 13:Lo=!1;return;case 27:case 3:Lo=!0;return;default:Ya=Ya.return}}function zo(n){if(n!==Ya)return!1;if(!Pa)return Ps(n),Pa=!0,!1;var i=n.tag,f;if((f=i!==3&&i!==27)&&((f=i===5)&&(f=n.type,f=!(f!=="form"&&f!=="button")||Yp(n.type,n.memoizedProps)),f=!f),f&&Ha&&ko(n),Ps(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(U(317));Ha=Wn(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(U(317));Ha=Wn(n)}else i===27?(i=Ha,_d(n.type)?(n=vi,vi=null,Ha=n):Ha=i):Ha=Ya?br(n.stateNode.nextSibling):null;return!0}function Mi(){Ha=Ya=null,Pa=!1}function Li(){var n=or;return n!==null&&(Ui===null?Ui=n:Ui.push.apply(Ui,n),or=null),n}function ir(n){or===null?or=[n]:or.push(n)}var ci=_e(null),Do=null,zi=null;function bh(n,i,f){Ot(ci,i._currentValue),i._currentValue=f}function Nr(n){n._currentValue=ci.current,tt(ci)}function Of(n,i,f){for(;n!==null;){var b=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,b!==null&&(b.childLanes|=i)):b!==null&&(b.childLanes&i)!==i&&(b.childLanes|=i),n===f)break;n=n.return}}function kf(n,i,f,b){var x=n.child;for(x!==null&&(x.return=n);x!==null;){var S=x.dependencies;if(S!==null){var q=x.child;S=S.firstContext;e:for(;S!==null;){var se=S;S=x;for(var Ae=0;Ae<i.length;Ae++)if(se.context===i[Ae]){S.lanes|=f,se=S.alternate,se!==null&&(se.lanes|=f),Of(S.return,f,n),b||(q=null);break e}S=se.next}}else if(x.tag===18){if(q=x.return,q===null)throw Error(U(341));q.lanes|=f,S=q.alternate,S!==null&&(S.lanes|=f),Of(q,f,n),q=null}else q=x.child;if(q!==null)q.return=x;else for(q=x;q!==null;){if(q===n){q=null;break}if(x=q.sibling,x!==null){x.return=q.return,q=x;break}q=q.return}x=q}}function pi(n,i,f,b){n=null;for(var x=i,S=!1;x!==null;){if(!S){if((x.flags&524288)!==0)S=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var q=x.alternate;if(q===null)throw Error(U(387));if(q=q.memoizedProps,q!==null){var se=x.type;Mn(x.pendingProps.value,q.value)||(n!==null?n.push(se):n=[se])}}else if(x===da.current){if(q=x.alternate,q===null)throw Error(U(387));q.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(n!==null?n.push(Qf):n=[Qf])}x=x.return}n!==null&&kf(i,n,f,b),i.flags|=262144}function id(n){for(n=n.firstContext;n!==null;){if(!Mn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function wh(n){Do=n,zi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function pn(n){return _f(Do,n)}function Nd(n,i){return Do===null&&wh(n),_f(n,i)}function _f(n,i){var f=i._currentValue;if(i={context:i,memoizedValue:f,next:null},zi===null){if(n===null)throw Error(U(308));zi=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else zi=zi.next=i;return f}var lc=typeof AbortController!="undefined"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(f,b){n.push(b)}};this.abort=function(){i.aborted=!0,n.forEach(function(f){return f()})}},dp=B.unstable_scheduleCallback,dc=B.unstable_NormalPriority,an={$$typeof:mt,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Gr(){return{controller:new lc,data:new Map,refCount:0}}function rd(n){n.refCount--,n.refCount===0&&dp(dc,function(){n.controller.abort()})}var _o=null,ui=0,Ol=0,Io=null;function Au(n,i){if(_o===null){var f=_o=[];ui=0,Ol=Ju(),Io={status:"pending",value:void 0,then:function(b){f.push(b)}}}return ui++,i.then(hd,hd),i}function hd(){if(--ui===0&&_o!==null){Io!==null&&(Io.status="fulfilled");var n=_o;_o=null,Ol=0,Io=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function Gd(n,i){var f=[],b={status:"pending",value:null,reason:null,then:function(x){f.push(x)}};return n.then(function(){b.status="fulfilled",b.value=i;for(var x=0;x<f.length;x++)(0,f[x])(i)},function(x){for(b.status="rejected",b.reason=x,x=0;x<f.length;x++)(0,f[x])(void 0)}),b}var Dn=Je.S;Je.S=function(n,i){sg=wn(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&Au(n,i),Dn!==null&&Dn(n,i)};var rr=_e(null);function If(){var n=rr.current;return n!==null?n:Gs.pooledCache}function xf(n,i){i===null?Ot(rr,rr.current):Ot(rr,i.pool)}function fp(){var n=If();return n===null?null:{parent:an._currentValue,pool:n}}var hr=Error(U(460)),Xh=Error(U(474)),Vo=Error(U(542)),Rt={then:function(){}};function Fd(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Tf(n,i,f){switch(f=n[f],f===void 0?n.push(i):f!==i&&(i.then(lo,lo),i=f),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Af(n),n;default:if(typeof i.status=="string")i.then(lo,lo);else{if(n=Gs,n!==null&&100<n.shellSuspendCounter)throw Error(U(482));n=i,n.status="pending",n.then(function(b){if(i.status==="pending"){var x=i;x.status="fulfilled",x.value=b}},function(b){if(i.status==="pending"){var x=i;x.status="rejected",x.reason=b}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Af(n),n}throw lr=i,hr}}function Di(n){try{var i=n._init;return i(n._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(lr=f,hr):f}}var lr=null;function ld(){if(lr===null)throw Error(U(459));var n=lr;return lr=null,n}function Af(n){if(n===hr||n===Vo)throw Error(U(483))}var Fr=null,kl=0;function jd(n){var i=kl;return kl+=1,Fr===null&&(Fr=[]),Tf(Fr,n,i)}function jr(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function Sf(n,i){throw i.$$typeof===Pe?Error(U(525)):(n=Object.prototype.toString.call(i),Error(U(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function Ud(n){function i(He,Me){if(n){var Xe=He.deletions;Xe===null?(He.deletions=[Me],He.flags|=16):Xe.push(Me)}}function f(He,Me){if(!n)return null;for(;Me!==null;)i(He,Me),Me=Me.sibling;return null}function b(He){for(var Me=new Map;He!==null;)He.key!==null?Me.set(He.key,He):Me.set(He.index,He),He=He.sibling;return Me}function x(He,Me){return He=vo(He,Me),He.index=0,He.sibling=null,He}function S(He,Me,Xe){return He.index=Xe,n?(Xe=He.alternate,Xe!==null?(Xe=Xe.index,Xe<Me?(He.flags|=67108866,Me):Xe):(He.flags|=67108866,Me)):(He.flags|=1048576,Me)}function q(He){return n&&He.alternate===null&&(He.flags|=67108866),He}function se(He,Me,Xe,dt){return Me===null||Me.tag!==6?(Me=od(Xe,He.mode,dt),Me.return=He,Me):(Me=x(Me,Xe),Me.return=He,Me)}function Ae(He,Me,Xe,dt){var ea=Xe.type;return ea===it?rt(He,Me,Xe.props.children,dt,Xe.key):Me!==null&&(Me.elementType===ea||typeof ea=="object"&&ea!==null&&ea.$$typeof===ca&&Di(ea)===Me.type)?(Me=x(Me,Xe.props),jr(Me,Xe),Me.return=He,Me):(Me=wl(Xe.type,Xe.key,Xe.props,null,He.mode,dt),jr(Me,Xe),Me.return=He,Me)}function Ye(He,Me,Xe,dt){return Me===null||Me.tag!==4||Me.stateNode.containerInfo!==Xe.containerInfo||Me.stateNode.implementation!==Xe.implementation?(Me=Hr(Xe,He.mode,dt),Me.return=He,Me):(Me=x(Me,Xe.children||[]),Me.return=He,Me)}function rt(He,Me,Xe,dt,ea){return Me===null||Me.tag!==7?(Me=Rr(Xe,He.mode,dt,ea),Me.return=He,Me):(Me=x(Me,Xe),Me.return=He,Me)}function pt(He,Me,Xe){if(typeof Me=="string"&&Me!==""||typeof Me=="number"||typeof Me=="bigint")return Me=od(""+Me,He.mode,Xe),Me.return=He,Me;if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case ft:return Xe=wl(Me.type,Me.key,Me.props,null,He.mode,Xe),jr(Xe,Me),Xe.return=He,Xe;case kt:return Me=Hr(Me,He.mode,Xe),Me.return=He,Me;case ca:return Me=Di(Me),pt(He,Me,Xe)}if(Ts(Me)||pa(Me))return Me=Rr(Me,He.mode,Xe,null),Me.return=He,Me;if(typeof Me.then=="function")return pt(He,jd(Me),Xe);if(Me.$$typeof===mt)return pt(He,Nd(He,Me),Xe);Sf(He,Me)}return null}function Qe(He,Me,Xe,dt){var ea=Me!==null?Me.key:null;if(typeof Xe=="string"&&Xe!==""||typeof Xe=="number"||typeof Xe=="bigint")return ea!==null?null:se(He,Me,""+Xe,dt);if(typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case ft:return Xe.key===ea?Ae(He,Me,Xe,dt):null;case kt:return Xe.key===ea?Ye(He,Me,Xe,dt):null;case ca:return Xe=Di(Xe),Qe(He,Me,Xe,dt)}if(Ts(Xe)||pa(Xe))return ea!==null?null:rt(He,Me,Xe,dt,null);if(typeof Xe.then=="function")return Qe(He,Me,jd(Xe),dt);if(Xe.$$typeof===mt)return Qe(He,Me,Nd(He,Xe),dt);Sf(He,Xe)}return null}function at(He,Me,Xe,dt,ea){if(typeof dt=="string"&&dt!==""||typeof dt=="number"||typeof dt=="bigint")return He=He.get(Xe)||null,se(Me,He,""+dt,ea);if(typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case ft:return He=He.get(dt.key===null?Xe:dt.key)||null,Ae(Me,He,dt,ea);case kt:return He=He.get(dt.key===null?Xe:dt.key)||null,Ye(Me,He,dt,ea);case ca:return dt=Di(dt),at(He,Me,Xe,dt,ea)}if(Ts(dt)||pa(dt))return He=He.get(Xe)||null,rt(Me,He,dt,ea,null);if(typeof dt.then=="function")return at(He,Me,Xe,jd(dt),ea);if(dt.$$typeof===mt)return at(He,Me,Xe,Nd(Me,dt),ea);Sf(Me,dt)}return null}function Zt(He,Me,Xe,dt){for(var ea=null,ls=null,Xt=Me,Qt=Me=0,Na=null;Xt!==null&&Qt<Xe.length;Qt++){Xt.index>Qt?(Na=Xt,Xt=null):Na=Xt.sibling;var ns=Qe(He,Xt,Xe[Qt],dt);if(ns===null){Xt===null&&(Xt=Na);break}n&&Xt&&ns.alternate===null&&i(He,Xt),Me=S(ns,Me,Qt),ls===null?ea=ns:ls.sibling=ns,ls=ns,Xt=Na}if(Qt===Xe.length)return f(He,Xt),Pa&&Kt(He,Qt),ea;if(Xt===null){for(;Qt<Xe.length;Qt++)Xt=pt(He,Xe[Qt],dt),Xt!==null&&(Me=S(Xt,Me,Qt),ls===null?ea=Xt:ls.sibling=Xt,ls=Xt);return Pa&&Kt(He,Qt),ea}for(Xt=b(Xt);Qt<Xe.length;Qt++)Na=at(Xt,He,Qt,Xe[Qt],dt),Na!==null&&(n&&Na.alternate!==null&&Xt.delete(Na.key===null?Qt:Na.key),Me=S(Na,Me,Qt),ls===null?ea=Na:ls.sibling=Na,ls=Na);return n&&Xt.forEach(function(Ul){return i(He,Ul)}),Pa&&Kt(He,Qt),ea}function aa(He,Me,Xe,dt){if(Xe==null)throw Error(U(151));for(var ea=null,ls=null,Xt=Me,Qt=Me=0,Na=null,ns=Xe.next();Xt!==null&&!ns.done;Qt++,ns=Xe.next()){Xt.index>Qt?(Na=Xt,Xt=null):Na=Xt.sibling;var Ul=Qe(He,Xt,ns.value,dt);if(Ul===null){Xt===null&&(Xt=Na);break}n&&Xt&&Ul.alternate===null&&i(He,Xt),Me=S(Ul,Me,Qt),ls===null?ea=Ul:ls.sibling=Ul,ls=Ul,Xt=Na}if(ns.done)return f(He,Xt),Pa&&Kt(He,Qt),ea;if(Xt===null){for(;!ns.done;Qt++,ns=Xe.next())ns=pt(He,ns.value,dt),ns!==null&&(Me=S(ns,Me,Qt),ls===null?ea=ns:ls.sibling=ns,ls=ns);return Pa&&Kt(He,Qt),ea}for(Xt=b(Xt);!ns.done;Qt++,ns=Xe.next())ns=at(Xt,He,Qt,ns.value,dt),ns!==null&&(n&&ns.alternate!==null&&Xt.delete(ns.key===null?Qt:ns.key),Me=S(ns,Me,Qt),ls===null?ea=ns:ls.sibling=ns,ls=ns);return n&&Xt.forEach(function(Tm){return i(He,Tm)}),Pa&&Kt(He,Qt),ea}function xs(He,Me,Xe,dt){if(typeof Xe=="object"&&Xe!==null&&Xe.type===it&&Xe.key===null&&(Xe=Xe.props.children),typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case ft:e:{for(var ea=Xe.key;Me!==null;){if(Me.key===ea){if(ea=Xe.type,ea===it){if(Me.tag===7){f(He,Me.sibling),dt=x(Me,Xe.props.children),dt.return=He,He=dt;break e}}else if(Me.elementType===ea||typeof ea=="object"&&ea!==null&&ea.$$typeof===ca&&Di(ea)===Me.type){f(He,Me.sibling),dt=x(Me,Xe.props),jr(dt,Xe),dt.return=He,He=dt;break e}f(He,Me);break}else i(He,Me);Me=Me.sibling}Xe.type===it?(dt=Rr(Xe.props.children,He.mode,dt,Xe.key),dt.return=He,He=dt):(dt=wl(Xe.type,Xe.key,Xe.props,null,He.mode,dt),jr(dt,Xe),dt.return=He,He=dt)}return q(He);case kt:e:{for(ea=Xe.key;Me!==null;){if(Me.key===ea)if(Me.tag===4&&Me.stateNode.containerInfo===Xe.containerInfo&&Me.stateNode.implementation===Xe.implementation){f(He,Me.sibling),dt=x(Me,Xe.children||[]),dt.return=He,He=dt;break e}else{f(He,Me);break}else i(He,Me);Me=Me.sibling}dt=Hr(Xe,He.mode,dt),dt.return=He,He=dt}return q(He);case ca:return Xe=Di(Xe),xs(He,Me,Xe,dt)}if(Ts(Xe))return Zt(He,Me,Xe,dt);if(pa(Xe)){if(ea=pa(Xe),typeof ea!="function")throw Error(U(150));return Xe=ea.call(Xe),aa(He,Me,Xe,dt)}if(typeof Xe.then=="function")return xs(He,Me,jd(Xe),dt);if(Xe.$$typeof===mt)return xs(He,Me,Nd(He,Xe),dt);Sf(He,Xe)}return typeof Xe=="string"&&Xe!==""||typeof Xe=="number"||typeof Xe=="bigint"?(Xe=""+Xe,Me!==null&&Me.tag===6?(f(He,Me.sibling),dt=x(Me,Xe),dt.return=He,He=dt):(f(He,Me),dt=od(Xe,He.mode,dt),dt.return=He,He=dt),q(He)):f(He,Me)}return function(He,Me,Xe,dt){try{kl=0;var ea=xs(He,Me,Xe,dt);return Fr=null,ea}catch(Xt){if(Xt===hr||Xt===Vo)throw Xt;var ls=wo(29,Xt,null,He.mode);return ls.lanes=dt,ls.return=He,ls}}}var Ur=Ud(!0),fc=Ud(!1),qr=!1;function Pf(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qd(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Vr(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function vh(n,i,f){var b=n.updateQueue;if(b===null)return null;if(b=b.shared,(ms&2)!==0){var x=b.pending;return x===null?i.next=i:(i.next=x.next,x.next=i),b.pending=i,i=yh(n),gh(n,null,f),i}return nr(n,b,i,f),yh(n)}function Bi(n,i,f){if(i=i.updateQueue,i!==null&&(i=i.shared,(f&4194048)!==0)){var b=i.lanes;b&=n.pendingLanes,f|=b,i.lanes=f,Zs(n,f)}}function as(n,i){var f=n.updateQueue,b=n.alternate;if(b!==null&&(b=b.updateQueue,f===b)){var x=null,S=null;if(f=f.firstBaseUpdate,f!==null){do{var q={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};S===null?x=S=q:S=S.next=q,f=f.next}while(f!==null);S===null?x=S=i:S=S.next=i}else x=S=i;f={baseState:b.baseState,firstBaseUpdate:x,lastBaseUpdate:S,shared:b.shared,callbacks:b.callbacks},n.updateQueue=f;return}n=f.lastBaseUpdate,n===null?f.firstBaseUpdate=i:n.next=i,f.lastBaseUpdate=i}var cc=!1;function Oh(){if(cc){var n=Io;if(n!==null)throw n}}function Yh(n,i,f,b){cc=!1;var x=n.updateQueue;qr=!1;var S=x.firstBaseUpdate,q=x.lastBaseUpdate,se=x.shared.pending;if(se!==null){x.shared.pending=null;var Ae=se,Ye=Ae.next;Ae.next=null,q===null?S=Ye:q.next=Ye,q=Ae;var rt=n.alternate;rt!==null&&(rt=rt.updateQueue,se=rt.lastBaseUpdate,se!==q&&(se===null?rt.firstBaseUpdate=Ye:se.next=Ye,rt.lastBaseUpdate=Ae))}if(S!==null){var pt=x.baseState;q=0,rt=Ye=Ae=null,se=S;do{var Qe=se.lane&-536870913,at=Qe!==se.lane;if(at?(ja&Qe)===Qe:(b&Qe)===Qe){Qe!==0&&Qe===Ol&&(cc=!0),rt!==null&&(rt=rt.next={lane:0,tag:se.tag,payload:se.payload,callback:null,next:null});e:{var Zt=n,aa=se;Qe=i;var xs=f;switch(aa.tag){case 1:if(Zt=aa.payload,typeof Zt=="function"){pt=Zt.call(xs,pt,Qe);break e}pt=Zt;break e;case 3:Zt.flags=Zt.flags&-65537|128;case 0:if(Zt=aa.payload,Qe=typeof Zt=="function"?Zt.call(xs,pt,Qe):Zt,Qe==null)break e;pt=Ce({},pt,Qe);break e;case 2:qr=!0}}Qe=se.callback,Qe!==null&&(n.flags|=64,at&&(n.flags|=8192),at=x.callbacks,at===null?x.callbacks=[Qe]:at.push(Qe))}else at={lane:Qe,tag:se.tag,payload:se.payload,callback:se.callback,next:null},rt===null?(Ye=rt=at,Ae=pt):rt=rt.next=at,q|=Qe;if(se=se.next,se===null){if(se=x.shared.pending,se===null)break;at=se,se=at.next,at.next=null,x.lastBaseUpdate=at,x.shared.pending=null}}while(!0);rt===null&&(Ae=pt),x.baseState=Ae,x.firstBaseUpdate=Ye,x.lastBaseUpdate=rt,S===null&&(x.shared.lanes=0),Bl|=q,n.lanes=q,n.memoizedState=pt}}function Vd(n,i){if(typeof n!="function")throw Error(U(191,n));n.call(i)}function Ef(n,i){var f=n.callbacks;if(f!==null)for(n.callbacks=null,n=0;n<f.length;n++)Vd(f[n],i)}var _l=_e(null),Wd=_e(0);function pc(n,i){n=Dl,Ot(Wd,n),Ot(_l,i),Dl=n|i.baseLanes}function mi(){Ot(Wd,Dl),Ot(_l,_l.current)}function Il(){Dl=Wd.current,tt(_l),tt(Wd)}var Gt=_e(null),qt=null;function Ri(n){var i=n.alternate;Ot($s,$s.current&1),Ot(Gt,n),qt===null&&(i===null||_l.current!==null||i.memoizedState!==null)&&(qt=n)}function dd(n){Ot($s,$s.current),Ot(Gt,n),qt===null&&(qt=n)}function Zd(n){n.tag===22?(Ot($s,$s.current),Ot(Gt,n),qt===null&&(qt=n)):sn()}function sn(){Ot($s,$s.current),Ot(Gt,Gt.current)}function Us(n){tt(Gt),qt===n&&(qt=null),tt($s)}var $s=_e(0);function Xd(n){for(var i=n;i!==null;){if(i.tag===13){var f=i.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||Yo(f)||kn(f)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var kh=0,_a=null,Qa=null,va=null,Hs=!1,Hi=!1,dr=!1,xl=0,Tl=0,_h=null,uc=0;function Es(){throw Error(U(321))}function fr(n,i){if(i===null)return!1;for(var f=0;f<i.length&&f<n.length;f++)if(!Mn(n[f],i[f]))return!1;return!0}function fd(n,i,f,b,x,S){return kh=S,_a=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Je.H=n===null||n.memoizedState===null?us:un,dr=!1,S=f(b,x),dr=!1,Hi&&(S=Yd(i,f,b,x)),cd(n),S}function cd(n){Je.H=ss;var i=Qa!==null&&Qa.next!==null;if(kh=0,va=Qa=_a=null,Hs=!1,Tl=0,_h=null,i)throw Error(U(300));n===null||Fn||(n=n.dependencies,n!==null&&id(n)&&(Fn=!0))}function Yd(n,i,f,b){_a=n;var x=0;do{if(Hi&&(_h=null),Tl=0,Hi=!1,25<=x)throw Error(U(301));if(x+=1,va=Qa=null,n.updateQueue!=null){var S=n.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}Je.H=On,S=i(f,b)}while(Hi);return S}function $d(){var n=Je.H,i=n.useState()[0];return i=typeof i.then=="function"?Al(i):i,n=n.useState()[0],(Qa!==null?Qa.memoizedState:null)!==n&&(_a.flags|=1024),i}function Kd(){var n=xl!==0;return xl=0,n}function $h(n,i,f){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~f}function Ih(n){if(Hs){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Hs=!1}kh=0,va=Qa=_a=null,Hi=!1,Tl=xl=0,_h=null}function so(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return va===null?_a.memoizedState=va=n:va=va.next=n,va}function Ns(){if(Qa===null){var n=_a.alternate;n=n!==null?n.memoizedState:null}else n=Qa.next;var i=va===null?_a.memoizedState:va.next;if(i!==null)va=i,Qa=n;else{if(n===null)throw _a.alternate===null?Error(U(467)):Error(U(310));Qa=n,n={memoizedState:Qa.memoizedState,baseState:Qa.baseState,baseQueue:Qa.baseQueue,queue:Qa.queue,next:null},va===null?_a.memoizedState=va=n:va=va.next=n}return va}function Wr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Al(n){var i=Tl;return Tl+=1,_h===null&&(_h=[]),n=Tf(_h,n,i),i=_a,(va===null?i.memoizedState:va.next)===null&&(i=i.alternate,Je.H=i===null||i.memoizedState===null?us:un),n}function Sl(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Al(n);if(n.$$typeof===mt)return pn(n)}throw Error(U(438,String(n)))}function pd(n){var i=null,f=_a.updateQueue;if(f!==null&&(i=f.memoCache),i==null){var b=_a.alternate;b!==null&&(b=b.updateQueue,b!==null&&(b=b.memoCache,b!=null&&(i={data:b.data.map(function(x){return x.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),f===null&&(f=Wr(),_a.updateQueue=f),f.memoCache=i,f=i.data[i.index],f===void 0)for(f=i.data[i.index]=Array(n),b=0;b<n;b++)f[b]=fs;return i.index++,f}function cr(n,i){return typeof i=="function"?i(n):i}function g(n){var i=Ns();return t(i,Qa,n)}function t(n,i,f){var b=n.queue;if(b===null)throw Error(U(311));b.lastRenderedReducer=f;var x=n.baseQueue,S=b.pending;if(S!==null){if(x!==null){var q=x.next;x.next=S.next,S.next=q}i.baseQueue=x=S,b.pending=null}if(S=n.baseState,x===null)n.memoizedState=S;else{i=x.next;var se=q=null,Ae=null,Ye=i,rt=!1;do{var pt=Ye.lane&-536870913;if(pt!==Ye.lane?(ja&pt)===pt:(kh&pt)===pt){var Qe=Ye.revertLane;if(Qe===0)Ae!==null&&(Ae=Ae.next={lane:0,revertLane:0,gesture:null,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null}),pt===Ol&&(rt=!0);else if((kh&Qe)===Qe){Ye=Ye.next,Qe===Ol&&(rt=!0);continue}else pt={lane:0,revertLane:Ye.revertLane,gesture:null,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null},Ae===null?(se=Ae=pt,q=S):Ae=Ae.next=pt,_a.lanes|=Qe,Bl|=Qe;pt=Ye.action,dr&&f(S,pt),S=Ye.hasEagerState?Ye.eagerState:f(S,pt)}else Qe={lane:pt,revertLane:Ye.revertLane,gesture:Ye.gesture,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null},Ae===null?(se=Ae=Qe,q=S):Ae=Ae.next=Qe,_a.lanes|=pt,Bl|=pt;Ye=Ye.next}while(Ye!==null&&Ye!==i);if(Ae===null?q=S:Ae.next=se,!Mn(S,n.memoizedState)&&(Fn=!0,rt&&(f=Io,f!==null)))throw f;n.memoizedState=S,n.baseState=q,n.baseQueue=Ae,b.lastRenderedState=S}return x===null&&(b.lanes=0),[n.memoizedState,b.dispatch]}function o(n){var i=Ns(),f=i.queue;if(f===null)throw Error(U(311));f.lastRenderedReducer=n;var b=f.dispatch,x=f.pending,S=i.memoizedState;if(x!==null){f.pending=null;var q=x=x.next;do S=n(S,q.action),q=q.next;while(q!==x);Mn(S,i.memoizedState)||(Fn=!0),i.memoizedState=S,i.baseQueue===null&&(i.baseState=S),f.lastRenderedState=S}return[S,b]}function l(n,i,f){var b=_a,x=Ns(),S=Pa;if(S){if(f===void 0)throw Error(U(407));f=f()}else f=i();var q=!Mn((Qa||x).memoizedState,f);if(q&&(x.memoizedState=f,Fn=!0),x=x.queue,Ve(O.bind(null,b,x,n),[n]),x.getSnapshot!==i||q||va!==null&&va.memoizedState.tag&1){if(b.flags|=2048,me(9,{destroy:void 0},w.bind(null,b,x,f,i),null),Gs===null)throw Error(U(349));S||(kh&127)!==0||p(b,i,f)}return f}function p(n,i,f){n.flags|=16384,n={getSnapshot:i,value:f},i=_a.updateQueue,i===null?(i=Wr(),_a.updateQueue=i,i.stores=[n]):(f=i.stores,f===null?i.stores=[n]:f.push(n))}function w(n,i,f,b){i.value=f,i.getSnapshot=b,I(i)&&A(n)}function O(n,i,f){return f(function(){I(i)&&A(n)})}function I(n){var i=n.getSnapshot;n=n.value;try{var f=i();return!Mn(n,f)}catch(b){return!0}}function A(n){var i=to(n,2);i!==null&&Vi(i,n,2)}function C(n){var i=so();if(typeof n=="function"){var f=n;if(n=f(),dr){Ue(!0);try{f()}finally{Ue(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cr,lastRenderedState:n},i}function D(n,i,f,b){return n.baseState=f,t(n,Qa,typeof b=="function"?b:cr)}function F(n,i,f,b,x){if(gi(n))throw Error(U(485));if(n=i.action,n!==null){var S={payload:x,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(q){S.listeners.push(q)}};Je.T!==null?f(!0):S.isTransition=!1,b(S),f=i.pending,f===null?(S.next=i.pending=S,G(i,S)):(S.next=f.next,i.pending=f.next=S)}}function G(n,i){var f=i.action,b=i.payload,x=n.state;if(i.isTransition){var S=Je.T,q={};Je.T=q;try{var se=f(x,b),Ae=Je.S;Ae!==null&&Ae(q,se),Z(n,i,se)}catch(Ye){ie(n,i,Ye)}finally{S!==null&&q.types!==null&&(S.types=q.types),Je.T=S}}else try{S=f(x,b),Z(n,i,S)}catch(Ye){ie(n,i,Ye)}}function Z(n,i,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(b){Q(n,i,b)},function(b){return ie(n,i,b)}):Q(n,i,f)}function Q(n,i,f){i.status="fulfilled",i.value=f,de(i),n.state=f,i=n.pending,i!==null&&(f=i.next,f===i?n.pending=null:(f=f.next,i.next=f,G(n,f)))}function ie(n,i,f){var b=n.pending;if(n.pending=null,b!==null){b=b.next;do i.status="rejected",i.reason=f,de(i),i=i.next;while(i!==b)}n.action=null}function de(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function le(n,i){return i}function pe(n,i){if(Pa){var f=Gs.formState;if(f!==null){e:{var b=_a;if(Pa){if(Ha){t:{for(var x=Ha,S=Lo;x.nodeType!==8;){if(!S){x=null;break t}if(x=br(x.nextSibling),x===null){x=null;break t}}S=x.data,x=S==="F!"||S==="F"?x:null}if(x){Ha=br(x.nextSibling),b=x.data==="F!";break e}}ko(b)}b=!1}b&&(i=f[0])}}return f=so(),f.memoizedState=f.baseState=i,b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:le,lastRenderedState:i},f.queue=b,f=ud.bind(null,_a,b),b.dispatch=f,b=C(!1),S=Zo.bind(null,_a,!1,b.queue),b=so(),x={state:i,dispatch:null,action:n,pending:null},b.queue=x,f=F.bind(null,_a,x,S,f),x.dispatch=f,b.memoizedState=n,[i,f,!1]}function be(n){var i=Ns();return ce(i,Qa,n)}function ce(n,i,f){if(i=t(n,i,le)[0],n=g(cr)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var b=Al(i)}catch(q){throw q===hr?Vo:q}else b=i;i=Ns();var x=i.queue,S=x.dispatch;return f!==i.memoizedState&&(_a.flags|=2048,me(9,{destroy:void 0},ye.bind(null,x,f),null)),[b,S,n]}function ye(n,i){n.action=i}function ke(n){var i=Ns(),f=Qa;if(f!==null)return ce(i,f,n);Ns(),i=i.memoizedState,f=Ns();var b=f.queue.dispatch;return f.memoizedState=n,[i,b,!1]}function me(n,i,f,b){return n={tag:n,create:f,deps:b,inst:i,next:null},i=_a.updateQueue,i===null&&(i=Wr(),_a.updateQueue=i),f=i.lastEffect,f===null?i.lastEffect=n.next=n:(b=f.next,f.next=n,n.next=b,i.lastEffect=n),n}function Ee(){return Ns().memoizedState}function Ze(n,i,f,b){var x=so();_a.flags|=n,x.memoizedState=me(1|i,{destroy:void 0},f,b===void 0?null:b)}function Ge(n,i,f,b){var x=Ns();b=b===void 0?null:b;var S=x.memoizedState.inst;Qa!==null&&b!==null&&fr(b,Qa.memoizedState.deps)?x.memoizedState=me(i,S,f,b):(_a.flags|=n,x.memoizedState=me(1|i,S,f,b))}function qe(n,i){Ze(8390656,8,n,i)}function Ve(n,i){Ge(2048,8,n,i)}function bt(n){_a.flags|=4;var i=_a.updateQueue;if(i===null)i=Wr(),_a.updateQueue=i,i.events=[n];else{var f=i.events;f===null?i.events=[n]:f.push(n)}}function vt(n){var i=Ns().memoizedState;return bt({ref:i,nextImpl:n}),function(){if((ms&2)!==0)throw Error(U(440));return i.impl.apply(void 0,arguments)}}function ht(n,i){return Ge(4,2,n,i)}function Tt(n,i){return Ge(4,4,n,i)}function la(n,i){if(typeof i=="function"){n=n();var f=i(n);return function(){typeof f=="function"?f():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Ja(n,i,f){f=f!=null?f.concat([n]):null,Ge(4,4,la.bind(null,i,n),f)}function ws(){}function ps(n,i){var f=Ns();i=i===void 0?null:i;var b=f.memoizedState;return i!==null&&fr(i,b[1])?b[0]:(f.memoizedState=[n,i],n)}function Cs(n,i){var f=Ns();i=i===void 0?null:i;var b=f.memoizedState;if(i!==null&&fr(i,b[1]))return b[0];if(b=n(),dr){Ue(!0);try{n()}finally{Ue(!1)}}return f.memoizedState=[b,i],b}function rs(n,i,f){return f===void 0||(kh&1073741824)!==0&&(ja&261930)===0?n.memoizedState=i:(n.memoizedState=f,n=og(),_a.lanes|=n,Bl|=n,f)}function qs(n,i,f,b){return Mn(f,i)?f:_l.current!==null?(n=rs(n,f,b),Mn(n,i)||(Fn=!0),n):(kh&42)===0||(kh&1073741824)!==0&&(ja&261930)===0?(Fn=!0,n.memoizedState=f):(n=og(),_a.lanes|=n,Bl|=n,i)}function Ms(n,i,f,b,x){var S=It.p;It.p=S!==0&&8>S?S:8;var q=Je.T,se={};Je.T=se,Zo(n,!1,i,f);try{var Ae=x(),Ye=Je.S;if(Ye!==null&&Ye(se,Ae),Ae!==null&&typeof Ae=="object"&&typeof Ae.then=="function"){var rt=Gd(Ae,b);ur(n,i,rt,qi(n))}else ur(n,i,b,qi(n))}catch(pt){ur(n,i,{then:function(){},status:"rejected",reason:pt},qi())}finally{It.p=S,q!==null&&se.types!==null&&(q.types=se.types),Je.T=q}}function Nn(){}function Ks(n,i,f,b){if(n.tag!==5)throw Error(U(476));var x=Qs(n).queue;Ms(n,x,i,gt,f===null?Nn:function(){return Gn(n),f(b)})}function Qs(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:gt,baseState:gt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cr,lastRenderedState:gt},next:null};var f={};return i.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cr,lastRenderedState:f},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function Gn(n){var i=Qs(n);i.next===null&&(i=n.alternate.memoizedState),ur(n,i.next.queue,{},qi())}function Zr(){return pn(Qf)}function Xr(){return Ns().memoizedState}function pr(){return Ns().memoizedState}function Wo(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var f=qi();n=Vr(f);var b=vh(i,n,f);b!==null&&(Vi(b,i,f),Bi(b,i,f)),i={cache:Gr()},n.payload=i;return}i=i.return}}function Pl(n,i,f){var b=qi();f={lane:b,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},gi(n)?Ni(i,f):(f=Br(n,i,f,b),f!==null&&(Vi(f,n,b),Gi(f,i,b)))}function ud(n,i,f){var b=qi();ur(n,i,f,b)}function ur(n,i,f,b){var x={lane:b,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(gi(n))Ni(i,x);else{var S=n.alternate;if(n.lanes===0&&(S===null||S.lanes===0)&&(S=i.lastRenderedReducer,S!==null))try{var q=i.lastRenderedState,se=S(q,f);if(x.hasEagerState=!0,x.eagerState=se,Mn(se,q))return nr(n,i,x,0),Gs===null&&Dr(),!1}catch(Ae){}if(f=Br(n,i,x,b),f!==null)return Vi(f,n,b),Gi(f,i,b),!0}return!1}function Zo(n,i,f,b){if(b={lane:2,revertLane:Ju(),gesture:null,action:b,hasEagerState:!1,eagerState:null,next:null},gi(n)){if(i)throw Error(U(479))}else i=Br(n,f,b,2),i!==null&&Vi(i,n,2)}function gi(n){var i=n.alternate;return n===_a||i!==null&&i===_a}function Ni(n,i){Hi=Hs=!0;var f=n.pending;f===null?i.next=i:(i.next=f.next,f.next=i),n.pending=i}function Gi(n,i,f){if((f&4194048)!==0){var b=i.lanes;b&=n.pendingLanes,f|=b,i.lanes=f,Zs(n,f)}}var ss={readContext:pn,use:Sl,useCallback:Es,useContext:Es,useEffect:Es,useImperativeHandle:Es,useLayoutEffect:Es,useInsertionEffect:Es,useMemo:Es,useReducer:Es,useRef:Es,useState:Es,useDebugValue:Es,useDeferredValue:Es,useTransition:Es,useSyncExternalStore:Es,useId:Es,useHostTransitionStatus:Es,useFormState:Es,useActionState:Es,useOptimistic:Es,useMemoCache:Es,useCacheRefresh:Es};ss.useEffectEvent=Es;var us={readContext:pn,use:Sl,useCallback:function(n,i){return so().memoizedState=[n,i===void 0?null:i],n},useContext:pn,useEffect:qe,useImperativeHandle:function(n,i,f){f=f!=null?f.concat([n]):null,Ze(4194308,4,la.bind(null,i,n),f)},useLayoutEffect:function(n,i){return Ze(4194308,4,n,i)},useInsertionEffect:function(n,i){Ze(4,2,n,i)},useMemo:function(n,i){var f=so();i=i===void 0?null:i;var b=n();if(dr){Ue(!0);try{n()}finally{Ue(!1)}}return f.memoizedState=[b,i],b},useReducer:function(n,i,f){var b=so();if(f!==void 0){var x=f(i);if(dr){Ue(!0);try{f(i)}finally{Ue(!1)}}}else x=i;return b.memoizedState=b.baseState=x,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:x},b.queue=n,n=n.dispatch=Pl.bind(null,_a,n),[b.memoizedState,n]},useRef:function(n){var i=so();return n={current:n},i.memoizedState=n},useState:function(n){n=C(n);var i=n.queue,f=ud.bind(null,_a,i);return i.dispatch=f,[n.memoizedState,f]},useDebugValue:ws,useDeferredValue:function(n,i){var f=so();return rs(f,n,i)},useTransition:function(){var n=C(!1);return n=Ms.bind(null,_a,n.queue,!0,!1),so().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,f){var b=_a,x=so();if(Pa){if(f===void 0)throw Error(U(407));f=f()}else{if(f=i(),Gs===null)throw Error(U(349));(ja&127)!==0||p(b,i,f)}x.memoizedState=f;var S={value:f,getSnapshot:i};return x.queue=S,qe(O.bind(null,b,S,n),[n]),b.flags|=2048,me(9,{destroy:void 0},w.bind(null,b,S,f,i),null),f},useId:function(){var n=so(),i=Gs.identifierPrefix;if(Pa){var f=Mt,b=ct;f=(b&~(1<<32-nt(b)-1)).toString(32)+f,i="_"+i+"R_"+f,f=xl++,0<f&&(i+="H"+f.toString(32)),i+="_"}else f=uc++,i="_"+i+"r_"+f.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:Zr,useFormState:pe,useActionState:pe,useOptimistic:function(n){var i=so();i.memoizedState=i.baseState=n;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=f,i=Zo.bind(null,_a,!0,f),f.dispatch=i,[n,i]},useMemoCache:pd,useCacheRefresh:function(){return so().memoizedState=Wo.bind(null,_a)},useEffectEvent:function(n){var i=so(),f={impl:n};return i.memoizedState=f,function(){if((ms&2)!==0)throw Error(U(440));return f.impl.apply(void 0,arguments)}}},un={readContext:pn,use:Sl,useCallback:ps,useContext:pn,useEffect:Ve,useImperativeHandle:Ja,useInsertionEffect:ht,useLayoutEffect:Tt,useMemo:Cs,useReducer:g,useRef:Ee,useState:function(){return g(cr)},useDebugValue:ws,useDeferredValue:function(n,i){var f=Ns();return qs(f,Qa.memoizedState,n,i)},useTransition:function(){var n=g(cr)[0],i=Ns().memoizedState;return[typeof n=="boolean"?n:Al(n),i]},useSyncExternalStore:l,useId:Xr,useHostTransitionStatus:Zr,useFormState:be,useActionState:be,useOptimistic:function(n,i){var f=Ns();return D(f,Qa,n,i)},useMemoCache:pd,useCacheRefresh:pr};un.useEffectEvent=vt;var On={readContext:pn,use:Sl,useCallback:ps,useContext:pn,useEffect:Ve,useImperativeHandle:Ja,useInsertionEffect:ht,useLayoutEffect:Tt,useMemo:Cs,useReducer:o,useRef:Ee,useState:function(){return o(cr)},useDebugValue:ws,useDeferredValue:function(n,i){var f=Ns();return Qa===null?rs(f,n,i):qs(f,Qa.memoizedState,n,i)},useTransition:function(){var n=o(cr)[0],i=Ns().memoizedState;return[typeof n=="boolean"?n:Al(n),i]},useSyncExternalStore:l,useId:Xr,useHostTransitionStatus:Zr,useFormState:ke,useActionState:ke,useOptimistic:function(n,i){var f=Ns();return Qa!==null?D(f,Qa,n,i):(f.baseState=n,[n,f.queue.dispatch])},useMemoCache:pd,useCacheRefresh:pr};On.useEffectEvent=vt;function Cf(n,i,f,b){i=n.memoizedState,f=f(b,i),f=f==null?i:Ce({},i,f),n.memoizedState=f,n.lanes===0&&(n.updateQueue.baseState=f)}var Mf={enqueueSetState:function(n,i,f){n=n._reactInternals;var b=qi(),x=Vr(b);x.payload=i,f!=null&&(x.callback=f),i=vh(n,x,b),i!==null&&(Vi(i,n,b),Bi(i,n,b))},enqueueReplaceState:function(n,i,f){n=n._reactInternals;var b=qi(),x=Vr(b);x.tag=1,x.payload=i,f!=null&&(x.callback=f),i=vh(n,x,b),i!==null&&(Vi(i,n,b),Bi(i,n,b))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var f=qi(),b=Vr(f);b.tag=2,i!=null&&(b.callback=i),i=vh(n,b,f),i!==null&&(Vi(i,n,f),Bi(i,n,f))}};function Kh(n,i,f,b,x,S,q){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(b,S,q):i.prototype&&i.prototype.isPureReactComponent?!ar(f,b)||!ar(x,S):!0}function cp(n,i,f,b){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(f,b),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(f,b),i.state!==n&&Mf.enqueueReplaceState(i,i.state,null)}function Qh(n,i){var f=i;if("ref"in i){f={};for(var b in i)b!=="ref"&&(f[b]=i[b])}if(n=n.defaultProps){f===i&&(f=Ce({},f));for(var x in n)f[x]===void 0&&(f[x]=n[x])}return f}function Lf(n){fi(n)}function xh(n){console.error(n)}function Th(n){fi(n)}function mr(n,i){try{var f=n.onUncaughtError;f(i.value,{componentStack:i.stack})}catch(b){setTimeout(function(){throw b})}}function zf(n,i,f){try{var b=n.onCaughtError;b(f.value,{componentStack:f.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function Qd(n,i,f){return f=Vr(f),f.tag=3,f.payload={element:null},f.callback=function(){mr(n,i)},f}function Jd(n){return n=Vr(n),n.tag=3,n}function ef(n,i,f,b){var x=f.type.getDerivedStateFromError;if(typeof x=="function"){var S=b.value;n.payload=function(){return x(S)},n.callback=function(){zf(i,f,b)}}var q=f.stateNode;q!==null&&typeof q.componentDidCatch=="function"&&(n.callback=function(){zf(i,f,b),typeof x!="function"&&(Rl===null?Rl=new Set([this]):Rl.add(this));var se=b.stack;this.componentDidCatch(b.value,{componentStack:se!==null?se:""})})}function pp(n,i,f,b,x){if(f.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){if(i=f.alternate,i!==null&&pi(i,f,x,!0),f=Gt.current,f!==null){switch(f.tag){case 31:case 13:return qt===null?Lc():f.alternate===null&&mn===0&&(mn=3),f.flags&=-257,f.flags|=65536,f.lanes=x,b===Rt?f.flags|=16384:(i=f.updateQueue,i===null?f.updateQueue=new Set([b]):i.add(b),Hp(n,b,x)),!1;case 22:return f.flags|=65536,b===Rt?f.flags|=16384:(i=f.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([b])},f.updateQueue=i):(f=i.retryQueue,f===null?i.retryQueue=new Set([b]):f.add(b)),Hp(n,b,x)),!1}throw Error(U(435,f.tag))}return Hp(n,b,x),Lc(),!1}if(Pa)return i=Gt.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=x,b!==_s&&(n=Error(U(422),{cause:b}),ir(y(n,f)))):(b!==_s&&(i=Error(U(423),{cause:b}),ir(y(i,f))),n=n.current.alternate,n.flags|=65536,x&=-x,n.lanes|=x,b=y(b,f),x=Qd(n.stateNode,b,x),as(n,x),mn!==4&&(mn=2)),!1;var S=Error(U(520),{cause:b});if(S=y(S,f),Pc===null?Pc=[S]:Pc.push(S),mn!==4&&(mn=2),i===null)return!0;b=y(b,f),f=i;do{switch(f.tag){case 3:return f.flags|=65536,n=x&-x,f.lanes|=n,n=Qd(f.stateNode,b,n),as(f,n),!1;case 1:if(i=f.type,S=f.stateNode,(f.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Rl===null||!Rl.has(S))))return f.flags|=65536,x&=-x,f.lanes|=x,x=Jd(x),ef(x,n,f,b),as(f,x),!1}f=f.return}while(f!==null);return!1}var up=Error(U(461)),Fn=!1;function no(n,i,f,b){i.child=n===null?fc(i,null,f,b):Ur(i,n.child,f,b)}function jm(n,i,f,b,x){f=f.render;var S=i.ref;if("ref"in b){var q={};for(var se in b)se!=="ref"&&(q[se]=b[se])}else q=b;return wh(i),b=fd(n,i,f,q,S,x),se=Kd(),n!==null&&!Fn?($h(n,i,x),el(n,i,x)):(Pa&&se&&Ys(i),i.flags|=1,no(n,i,b,x),i.child)}function mp(n,i,f,b,x){if(n===null){var S=f.type;return typeof S=="function"&&!bl(S)&&S.defaultProps===void 0&&f.compare===null?(i.tag=15,i.type=S,Su(n,i,S,b,x)):(n=wl(f.type,null,b,i,i.mode,x),n.ref=i.ref,n.return=i,i.child=n)}if(S=n.child,!yc(n,x)){var q=S.memoizedProps;if(f=f.compare,f=f!==null?f:ar,f(q,b)&&n.ref===i.ref)return el(n,i,x)}return i.flags|=1,n=vo(S,b),n.ref=i.ref,n.return=i,i.child=n}function Su(n,i,f,b,x){if(n!==null){var S=n.memoizedProps;if(ar(S,b)&&n.ref===i.ref)if(Fn=!1,i.pendingProps=b=S,yc(n,x))(n.flags&131072)!==0&&(Fn=!0);else return i.lanes=n.lanes,el(n,i,x)}return Eu(n,i,f,b,x)}function Pu(n,i,f,b){var x=b.children,S=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),b.mode==="hidden"){if((i.flags&128)!==0){if(S=S!==null?S.baseLanes|f:f,n!==null){for(b=i.child=n.child,x=0;b!==null;)x=x|b.lanes|b.childLanes,b=b.sibling;b=x&~S}else b=0,i.child=null;return Um(n,i,S,f,b)}if((f&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&xf(i,S!==null?S.cachePool:null),S!==null?pc(i,S):mi(),Zd(i);else return b=i.lanes=536870912,Um(n,i,S!==null?S.baseLanes|f:f,f,b)}else S!==null?(xf(i,S.cachePool),pc(i,S),sn(),i.memoizedState=null):(n!==null&&xf(i,null),mi(),sn());return no(n,i,x,f),i.child}function Jh(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Um(n,i,f,b,x){var S=If();return S=S===null?null:{parent:an._currentValue,pool:S},i.memoizedState={baseLanes:f,cachePool:S},n!==null&&xf(i,null),mi(),Zd(i),n!==null&&pi(n,i,b,!0),i.childLanes=x,null}function El(n,i){return i=vp({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function mc(n,i,f){return Ur(i,n.child,null,f),n=El(i,i.pendingProps),n.flags|=2,Us(i),i.memoizedState=null,n}function gp(n,i,f){var b=i.pendingProps,x=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(Pa){if(b.mode==="hidden")return n=El(i,b),i.lanes=536870912,Jh(null,n);if(dd(i),(n=Ha)?(n=Id(n,Lo),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:$e!==null?{id:ct,overflow:Mt}:null,retryLane:536870912,hydrationErrors:null},f=vl(n),f.return=i,i.child=f,Ya=i,Ha=null)):n=null,n===null)throw ko(i);return i.lanes=536870912,null}return El(i,b)}var S=n.memoizedState;if(S!==null){var q=S.dehydrated;if(dd(i),x)if(i.flags&256)i.flags&=-257,i=mc(n,i,f);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(U(558));else if(Fn||pi(n,i,f,!1),x=(f&n.childLanes)!==0,Fn||x){if(b=Gs,b!==null&&(q=Bh(b,f),q!==0&&q!==S.retryLane))throw S.retryLane=q,to(n,q),Vi(b,n,q),up;Lc(),i=mc(n,i,f)}else n=S.treeContext,Ha=br(q.nextSibling),Ya=i,Pa=!0,or=null,Lo=!1,n!==null&&Oo(i,n),i=El(i,b),i.flags|=4096;return i}return n=vo(n.child,{mode:b.mode,children:b.children}),n.ref=i.ref,i.child=n,n.return=i,n}function yp(n,i){var f=i.ref;if(f===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(U(284));(n===null||n.ref!==f)&&(i.flags|=4194816)}}function Eu(n,i,f,b,x){return wh(i),f=fd(n,i,f,b,void 0,x),b=Kd(),n!==null&&!Fn?($h(n,i,x),el(n,i,x)):(Pa&&b&&Ys(i),i.flags|=1,no(n,i,f,x),i.child)}function qm(n,i,f,b,x,S){return wh(i),i.updateQueue=null,f=Yd(i,b,f,x),cd(n),b=Kd(),n!==null&&!Fn?($h(n,i,S),el(n,i,S)):(Pa&&b&&Ys(i),i.flags|=1,no(n,i,f,S),i.child)}function Vm(n,i,f,b,x){if(wh(i),i.stateNode===null){var S=ha,q=f.contextType;typeof q=="object"&&q!==null&&(S=pn(q)),S=new f(b,S),i.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=Mf,i.stateNode=S,S._reactInternals=i,S=i.stateNode,S.props=b,S.state=i.memoizedState,S.refs={},Pf(i),q=f.contextType,S.context=typeof q=="object"&&q!==null?pn(q):ha,S.state=i.memoizedState,q=f.getDerivedStateFromProps,typeof q=="function"&&(Cf(i,f,q,b),S.state=i.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(q=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),q!==S.state&&Mf.enqueueReplaceState(S,S.state,null),Yh(i,b,S,x),Oh(),S.state=i.memoizedState),typeof S.componentDidMount=="function"&&(i.flags|=4194308),b=!0}else if(n===null){S=i.stateNode;var se=i.memoizedProps,Ae=Qh(f,se);S.props=Ae;var Ye=S.context,rt=f.contextType;q=ha,typeof rt=="object"&&rt!==null&&(q=pn(rt));var pt=f.getDerivedStateFromProps;rt=typeof pt=="function"||typeof S.getSnapshotBeforeUpdate=="function",se=i.pendingProps!==se,rt||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(se||Ye!==q)&&cp(i,S,b,q),qr=!1;var Qe=i.memoizedState;S.state=Qe,Yh(i,b,S,x),Oh(),Ye=i.memoizedState,se||Qe!==Ye||qr?(typeof pt=="function"&&(Cf(i,f,pt,b),Ye=i.memoizedState),(Ae=qr||Kh(i,f,Ae,b,Qe,Ye,q))?(rt||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(i.flags|=4194308)):(typeof S.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=b,i.memoizedState=Ye),S.props=b,S.state=Ye,S.context=q,b=Ae):(typeof S.componentDidMount=="function"&&(i.flags|=4194308),b=!1)}else{S=i.stateNode,qd(n,i),q=i.memoizedProps,rt=Qh(f,q),S.props=rt,pt=i.pendingProps,Qe=S.context,Ye=f.contextType,Ae=ha,typeof Ye=="object"&&Ye!==null&&(Ae=pn(Ye)),se=f.getDerivedStateFromProps,(Ye=typeof se=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(q!==pt||Qe!==Ae)&&cp(i,S,b,Ae),qr=!1,Qe=i.memoizedState,S.state=Qe,Yh(i,b,S,x),Oh();var at=i.memoizedState;q!==pt||Qe!==at||qr||n!==null&&n.dependencies!==null&&id(n.dependencies)?(typeof se=="function"&&(Cf(i,f,se,b),at=i.memoizedState),(rt=qr||Kh(i,f,rt,b,Qe,at,Ae)||n!==null&&n.dependencies!==null&&id(n.dependencies))?(Ye||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(b,at,Ae),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(b,at,Ae)),typeof S.componentDidUpdate=="function"&&(i.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof S.componentDidUpdate!="function"||q===n.memoizedProps&&Qe===n.memoizedState||(i.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||q===n.memoizedProps&&Qe===n.memoizedState||(i.flags|=1024),i.memoizedProps=b,i.memoizedState=at),S.props=b,S.state=at,S.context=Ae,b=rt):(typeof S.componentDidUpdate!="function"||q===n.memoizedProps&&Qe===n.memoizedState||(i.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||q===n.memoizedProps&&Qe===n.memoizedState||(i.flags|=1024),b=!1)}return S=b,yp(n,i),b=(i.flags&128)!==0,S||b?(S=i.stateNode,f=b&&typeof f.getDerivedStateFromError!="function"?null:S.render(),i.flags|=1,n!==null&&b?(i.child=Ur(i,n.child,null,x),i.child=Ur(i,null,f,x)):no(n,i,f,x),i.memoizedState=S.state,n=i.child):n=el(n,i,x),n}function Wm(n,i,f,b){return Mi(),i.flags|=256,no(n,i,f,b),i.child}var bp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function gc(n){return{baseLanes:n,cachePool:fp()}}function wp(n,i,f){return n=n!==null?n.childLanes&~f:0,i&&(n|=Bo),n}function Cu(n,i,f){var b=i.pendingProps,x=!1,S=(i.flags&128)!==0,q;if((q=S)||(q=n!==null&&n.memoizedState===null?!1:($s.current&2)!==0),q&&(x=!0,i.flags&=-129),q=(i.flags&32)!==0,i.flags&=-33,n===null){if(Pa){if(x?Ri(i):sn(),(n=Ha)?(n=Id(n,Lo),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:$e!==null?{id:ct,overflow:Mt}:null,retryLane:536870912,hydrationErrors:null},f=vl(n),f.return=i,i.child=f,Ya=i,Ha=null)):n=null,n===null)throw ko(i);return kn(n)?i.lanes=32:i.lanes=536870912,null}var se=b.children;return b=b.fallback,x?(sn(),x=i.mode,se=vp({mode:"hidden",children:se},x),b=Rr(b,x,f,null),se.return=i,b.return=i,se.sibling=b,i.child=se,b=i.child,b.memoizedState=gc(f),b.childLanes=wp(n,q,f),i.memoizedState=bp,Jh(null,b)):(Ri(i),Mu(i,se))}var Ae=n.memoizedState;if(Ae!==null&&(se=Ae.dehydrated,se!==null)){if(S)i.flags&256?(Ri(i),i.flags&=-257,i=Op(n,i,f)):i.memoizedState!==null?(sn(),i.child=n.child,i.flags|=128,i=null):(sn(),se=b.fallback,x=i.mode,b=vp({mode:"visible",children:b.children},x),se=Rr(se,x,f,null),se.flags|=2,b.return=i,se.return=i,b.sibling=se,i.child=b,Ur(i,n.child,null,f),b=i.child,b.memoizedState=gc(f),b.childLanes=wp(n,q,f),i.memoizedState=bp,i=Jh(null,b));else if(Ri(i),kn(se)){if(q=se.nextSibling&&se.nextSibling.dataset,q)var Ye=q.dgst;q=Ye,b=Error(U(419)),b.stack="",b.digest=q,ir({value:b,source:null,stack:null}),i=Op(n,i,f)}else if(Fn||pi(n,i,f,!1),q=(f&n.childLanes)!==0,Fn||q){if(q=Gs,q!==null&&(b=Bh(q,f),b!==0&&b!==Ae.retryLane))throw Ae.retryLane=b,to(n,b),Vi(q,n,b),up;Yo(se)||Lc(),i=Op(n,i,f)}else Yo(se)?(i.flags|=192,i.child=n.child,i=null):(n=Ae.treeContext,Ha=br(se.nextSibling),Ya=i,Pa=!0,or=null,Lo=!1,n!==null&&Oo(i,n),i=Mu(i,b.children),i.flags|=4096);return i}return x?(sn(),se=b.fallback,x=i.mode,Ae=n.child,Ye=Ae.sibling,b=vo(Ae,{mode:"hidden",children:b.children}),b.subtreeFlags=Ae.subtreeFlags&65011712,Ye!==null?se=vo(Ye,se):(se=Rr(se,x,f,null),se.flags|=2),se.return=i,b.return=i,b.sibling=se,i.child=b,Jh(null,b),b=i.child,se=n.child.memoizedState,se===null?se=gc(f):(x=se.cachePool,x!==null?(Ae=an._currentValue,x=x.parent!==Ae?{parent:Ae,pool:Ae}:x):x=fp(),se={baseLanes:se.baseLanes|f,cachePool:x}),b.memoizedState=se,b.childLanes=wp(n,q,f),i.memoizedState=bp,Jh(n.child,b)):(Ri(i),f=n.child,n=f.sibling,f=vo(f,{mode:"visible",children:b.children}),f.return=i,f.sibling=null,n!==null&&(q=i.deletions,q===null?(i.deletions=[n],i.flags|=16):q.push(n)),i.child=f,i.memoizedState=null,f)}function Mu(n,i){return i=vp({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function vp(n,i){return n=wo(22,n,null,i),n.lanes=0,n}function Op(n,i,f){return Ur(i,n.child,null,f),n=Mu(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function Lu(n,i,f){n.lanes|=i;var b=n.alternate;b!==null&&(b.lanes|=i),Of(n.return,i,f)}function zu(n,i,f,b,x,S){var q=n.memoizedState;q===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:b,tail:f,tailMode:x,treeForkCount:S}:(q.isBackwards=i,q.rendering=null,q.renderingStartTime=0,q.last=b,q.tail=f,q.tailMode=x,q.treeForkCount=S)}function kp(n,i,f){var b=i.pendingProps,x=b.revealOrder,S=b.tail;b=b.children;var q=$s.current,se=(q&2)!==0;if(se?(q=q&1|2,i.flags|=128):q&=1,Ot($s,q),no(n,i,b,f),b=Pa?te:0,!se&&n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Lu(n,f,i);else if(n.tag===19)Lu(n,f,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(x){case"forwards":for(f=i.child,x=null;f!==null;)n=f.alternate,n!==null&&Xd(n)===null&&(x=f),f=f.sibling;f=x,f===null?(x=i.child,i.child=null):(x=f.sibling,f.sibling=null),zu(i,!1,x,f,S,b);break;case"backwards":case"unstable_legacy-backwards":for(f=null,x=i.child,i.child=null;x!==null;){if(n=x.alternate,n!==null&&Xd(n)===null){i.child=x;break}n=x.sibling,x.sibling=f,f=x,x=n}zu(i,!0,f,null,S,b);break;case"together":zu(i,!1,null,null,void 0,b);break;default:i.memoizedState=null}return i.child}function el(n,i,f){if(n!==null&&(i.dependencies=n.dependencies),Bl|=i.lanes,(f&i.childLanes)===0)if(n!==null){if(pi(n,i,f,!1),(f&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(U(153));if(i.child!==null){for(n=i.child,f=vo(n,n.pendingProps),i.child=f,f.return=i;n.sibling!==null;)n=n.sibling,f=f.sibling=vo(n,n.pendingProps),f.return=i;f.sibling=null}return i.child}function yc(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&id(n)))}function bc(n,i,f){switch(i.tag){case 3:Ma(i,i.stateNode.containerInfo),bh(i,an,n.memoizedState.cache),Mi();break;case 27:case 5:xn(i);break;case 4:Ma(i,i.stateNode.containerInfo);break;case 10:bh(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,dd(i),null;break;case 13:var b=i.memoizedState;if(b!==null)return b.dehydrated!==null?(Ri(i),i.flags|=128,null):(f&i.child.childLanes)!==0?Cu(n,i,f):(Ri(i),n=el(n,i,f),n!==null?n.sibling:null);Ri(i);break;case 19:var x=(n.flags&128)!==0;if(b=(f&i.childLanes)!==0,b||(pi(n,i,f,!1),b=(f&i.childLanes)!==0),x){if(b)return kp(n,i,f);i.flags|=128}if(x=i.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),Ot($s,$s.current),b)break;return null;case 22:return i.lanes=0,Pu(n,i,f,i.pendingProps);case 24:bh(i,an,n.memoizedState.cache)}return el(n,i,f)}function Xo(n,i,f){if(n!==null)if(n.memoizedProps!==i.pendingProps)Fn=!0;else{if(!yc(n,f)&&(i.flags&128)===0)return Fn=!1,bc(n,i,f);Fn=(n.flags&131072)!==0}else Fn=!1,Pa&&(i.flags&1048576)!==0&&ka(i,te,i.index);switch(i.lanes=0,i.tag){case 16:e:{var b=i.pendingProps;if(n=Di(i.elementType),i.type=n,typeof n=="function")bl(n)?(b=Qh(n,b),i.tag=1,i=Vm(null,i,n,b,f)):(i.tag=0,i=Eu(null,i,n,b,f));else{if(n!=null){var x=n.$$typeof;if(x===Et){i.tag=11,i=jm(null,i,n,b,f);break e}else if(x===zt){i.tag=14,i=mp(null,i,n,b,f);break e}}throw i=os(n)||n,Error(U(306,i,""))}}return i;case 0:return Eu(n,i,i.type,i.pendingProps,f);case 1:return b=i.type,x=Qh(b,i.pendingProps),Vm(n,i,b,x,f);case 3:e:{if(Ma(i,i.stateNode.containerInfo),n===null)throw Error(U(387));b=i.pendingProps;var S=i.memoizedState;x=S.element,qd(n,i),Yh(i,b,null,f);var q=i.memoizedState;if(b=q.cache,bh(i,an,b),b!==S.cache&&kf(i,[an],f,!0),Oh(),b=q.element,S.isDehydrated)if(S={element:b,isDehydrated:!1,cache:q.cache},i.updateQueue.baseState=S,i.memoizedState=S,i.flags&256){i=Wm(n,i,b,f);break e}else if(b!==x){x=y(Error(U(424)),i),ir(x),i=Wm(n,i,b,f);break e}else for(n=i.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,Ha=br(n.firstChild),Ya=i,Pa=!0,or=null,Lo=!0,f=fc(i,null,b,f),i.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(Mi(),b===x){i=el(n,i,f);break e}no(n,i,b,f)}i=i.child}return i;case 26:return yp(n,i),n===null?(f=um(i.type,null,i.pendingProps,null))?i.memoizedState=f:Pa||(f=i.type,n=i.pendingProps,b=Nc(Ht.current).createElement(f),b[ts]=i,b[wt]=n,io(b,f,n),zs(b),i.stateNode=b):i.memoizedState=um(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return xn(i),n===null&&Pa&&(b=i.stateNode=Tg(i.type,i.pendingProps,Ht.current),Ya=i,Lo=!0,x=Ha,_d(i.type)?(vi=x,Ha=br(b.firstChild)):Ha=x),no(n,i,i.pendingProps.children,f),yp(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&Pa&&((x=b=Ha)&&(b=xo(b,i.type,i.pendingProps,Lo),b!==null?(i.stateNode=b,Ya=i,Ha=br(b.firstChild),Lo=!1,x=!0):x=!1),x||ko(i)),xn(i),x=i.type,S=i.pendingProps,q=n!==null?n.memoizedProps:null,b=S.children,Yp(x,S)?b=null:q!==null&&Yp(x,q)&&(i.flags|=32),i.memoizedState!==null&&(x=fd(n,i,$d,null,null,f),Qf._currentValue=x),yp(n,i),no(n,i,b,f),i.child;case 6:return n===null&&Pa&&((n=f=Ha)&&(f=Ch(f,i.pendingProps,Lo),f!==null?(i.stateNode=f,Ya=i,Ha=null,n=!0):n=!1),n||ko(i)),null;case 13:return Cu(n,i,f);case 4:return Ma(i,i.stateNode.containerInfo),b=i.pendingProps,n===null?i.child=Ur(i,null,b,f):no(n,i,b,f),i.child;case 11:return jm(n,i,i.type,i.pendingProps,f);case 7:return no(n,i,i.pendingProps,f),i.child;case 8:return no(n,i,i.pendingProps.children,f),i.child;case 12:return no(n,i,i.pendingProps.children,f),i.child;case 10:return b=i.pendingProps,bh(i,i.type,b.value),no(n,i,b.children,f),i.child;case 9:return x=i.type._context,b=i.pendingProps.children,wh(i),x=pn(x),b=b(x),i.flags|=1,no(n,i,b,f),i.child;case 14:return mp(n,i,i.type,i.pendingProps,f);case 15:return Su(n,i,i.type,i.pendingProps,f);case 19:return kp(n,i,f);case 31:return gp(n,i,f);case 22:return Pu(n,i,f,i.pendingProps);case 24:return wh(i),b=pn(an),n===null?(x=If(),x===null&&(x=Gs,S=Gr(),x.pooledCache=S,S.refCount++,S!==null&&(x.pooledCacheLanes|=f),x=S),i.memoizedState={parent:b,cache:x},Pf(i),bh(i,an,x)):((n.lanes&f)!==0&&(qd(n,i),Yh(i,null,null,f),Oh()),x=n.memoizedState,S=i.memoizedState,x.parent!==b?(x={parent:b,cache:b},i.memoizedState=x,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=x),bh(i,an,b)):(b=S.cache,bh(i,an,b),b!==x.cache&&kf(i,[an],f,!0))),no(n,i,i.pendingProps.children,f),i.child;case 29:throw i.pendingProps}throw Error(U(156,i.tag))}function tl(n){n.flags|=4}function wc(n,i,f,b,x){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(x&335544128)===x)if(n.stateNode.complete)n.flags|=8192;else if(Wu())n.flags|=8192;else throw lr=Rt,Xh}else n.flags&=-16777217}function Zm(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Uc(i))if(Wu())n.flags|=8192;else throw lr=Rt,Xh}function vc(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?Xa():536870912,n.lanes|=i,of|=i)}function Oc(n,i){if(!Pa)switch(n.tailMode){case"hidden":i=n.tail;for(var f=null;i!==null;)i.alternate!==null&&(f=i),i=i.sibling;f===null?n.tail=null:f.sibling=null;break;case"collapsed":f=n.tail;for(var b=null;f!==null;)f.alternate!==null&&(b=f),f=f.sibling;b===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:b.sibling=null}}function Js(n){var i=n.alternate!==null&&n.alternate.child===n.child,f=0,b=0;if(i)for(var x=n.child;x!==null;)f|=x.lanes|x.childLanes,b|=x.subtreeFlags&65011712,b|=x.flags&65011712,x.return=n,x=x.sibling;else for(x=n.child;x!==null;)f|=x.lanes|x.childLanes,b|=x.subtreeFlags,b|=x.flags,x.return=n,x=x.sibling;return n.subtreeFlags|=b,n.childLanes=f,i}function Xm(n,i,f){var b=i.pendingProps;switch(Rs(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Js(i),null;case 1:return Js(i),null;case 3:return f=i.stateNode,b=null,n!==null&&(b=n.memoizedState.cache),i.memoizedState.cache!==b&&(i.flags|=2048),Nr(an),is(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(n===null||n.child===null)&&(zo(i)?tl(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Li())),Js(i),null;case 26:var x=i.type,S=i.memoizedState;return n===null?(tl(i),S!==null?(Js(i),Zm(i,S)):(Js(i),wc(i,x,null,b,f))):S?S!==n.memoizedState?(tl(i),Js(i),Zm(i,S)):(Js(i),i.flags&=-16777217):(n=n.memoizedProps,n!==b&&tl(i),Js(i),wc(i,x,n,b,f)),null;case 27:if(_i(i),f=Ht.current,x=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==b&&tl(i);else{if(!b){if(i.stateNode===null)throw Error(U(166));return Js(i),null}n=St.current,zo(i)?ao(i):(n=Tg(x,b,f),i.stateNode=n,tl(i))}return Js(i),null;case 5:if(_i(i),x=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==b&&tl(i);else{if(!b){if(i.stateNode===null)throw Error(U(166));return Js(i),null}if(S=St.current,zo(i))ao(i);else{var q=Nc(Ht.current);switch(S){case 1:S=q.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:S=q.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":S=q.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":S=q.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":S=q.createElement("div"),S.innerHTML="<script><\/script>",S=S.removeChild(S.firstChild);break;case"select":S=typeof b.is=="string"?q.createElement("select",{is:b.is}):q.createElement("select"),b.multiple?S.multiple=!0:b.size&&(S.size=b.size);break;default:S=typeof b.is=="string"?q.createElement(x,{is:b.is}):q.createElement(x)}}S[ts]=i,S[wt]=b;e:for(q=i.child;q!==null;){if(q.tag===5||q.tag===6)S.appendChild(q.stateNode);else if(q.tag!==4&&q.tag!==27&&q.child!==null){q.child.return=q,q=q.child;continue}if(q===i)break e;for(;q.sibling===null;){if(q.return===null||q.return===i)break e;q=q.return}q.sibling.return=q.return,q=q.sibling}i.stateNode=S;e:switch(io(S,x,b),x){case"button":case"input":case"select":case"textarea":b=!!b.autoFocus;break e;case"img":b=!0;break e;default:b=!1}b&&tl(i)}}return Js(i),wc(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,f),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==b&&tl(i);else{if(typeof b!="string"&&i.stateNode===null)throw Error(U(166));if(n=Ht.current,zo(i)){if(n=i.stateNode,f=i.memoizedProps,b=null,x=Ya,x!==null)switch(x.tag){case 27:case 5:b=x.memoizedProps}n[ts]=i,n=!!(n.nodeValue===f||b!==null&&b.suppressHydrationWarning===!0||nm(n.nodeValue,f)),n||ko(i,!0)}else n=Nc(n).createTextNode(b),n[ts]=i,i.stateNode=n}return Js(i),null;case 31:if(f=i.memoizedState,n===null||n.memoizedState!==null){if(b=zo(i),f!==null){if(n===null){if(!b)throw Error(U(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(U(557));n[ts]=i}else Mi(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Js(i),n=!1}else f=Li(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),n=!0;if(!n)return i.flags&256?(Us(i),i):(Us(i),null);if((i.flags&128)!==0)throw Error(U(558))}return Js(i),null;case 13:if(b=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(x=zo(i),b!==null&&b.dehydrated!==null){if(n===null){if(!x)throw Error(U(318));if(x=i.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(U(317));x[ts]=i}else Mi(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Js(i),x=!1}else x=Li(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=x),x=!0;if(!x)return i.flags&256?(Us(i),i):(Us(i),null)}return Us(i),(i.flags&128)!==0?(i.lanes=f,i):(f=b!==null,n=n!==null&&n.memoizedState!==null,f&&(b=i.child,x=null,b.alternate!==null&&b.alternate.memoizedState!==null&&b.alternate.memoizedState.cachePool!==null&&(x=b.alternate.memoizedState.cachePool.pool),S=null,b.memoizedState!==null&&b.memoizedState.cachePool!==null&&(S=b.memoizedState.cachePool.pool),S!==x&&(b.flags|=2048)),f!==n&&f&&(i.child.flags|=8192),vc(i,i.updateQueue),Js(i),null);case 4:return is(),n===null&&am(i.stateNode.containerInfo),Js(i),null;case 10:return Nr(i.type),Js(i),null;case 19:if(tt($s),b=i.memoizedState,b===null)return Js(i),null;if(x=(i.flags&128)!==0,S=b.rendering,S===null)if(x)Oc(b,!1);else{if(mn!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(S=Xd(n),S!==null){for(i.flags|=128,Oc(b,!1),n=S.updateQueue,i.updateQueue=n,vc(i,n),i.subtreeFlags=0,n=f,f=i.child;f!==null;)Hd(f,n),f=f.sibling;return Ot($s,$s.current&1|2),Pa&&Kt(i,b.treeForkCount),i.child}n=n.sibling}b.tail!==null&&wn()>Ec&&(i.flags|=128,x=!0,Oc(b,!1),i.lanes=4194304)}else{if(!x)if(n=Xd(S),n!==null){if(i.flags|=128,x=!0,n=n.updateQueue,i.updateQueue=n,vc(i,n),Oc(b,!0),b.tail===null&&b.tailMode==="hidden"&&!S.alternate&&!Pa)return Js(i),null}else 2*wn()-b.renderingStartTime>Ec&&f!==536870912&&(i.flags|=128,x=!0,Oc(b,!1),i.lanes=4194304);b.isBackwards?(S.sibling=i.child,i.child=S):(n=b.last,n!==null?n.sibling=S:i.child=S,b.last=S)}return b.tail!==null?(n=b.tail,b.rendering=n,b.tail=n.sibling,b.renderingStartTime=wn(),n.sibling=null,f=$s.current,Ot($s,x?f&1|2:f&1),Pa&&Kt(i,b.treeForkCount),n):(Js(i),null);case 22:case 23:return Us(i),Il(),b=i.memoizedState!==null,n!==null?n.memoizedState!==null!==b&&(i.flags|=8192):b&&(i.flags|=8192),b?(f&536870912)!==0&&(i.flags&128)===0&&(Js(i),i.subtreeFlags&6&&(i.flags|=8192)):Js(i),f=i.updateQueue,f!==null&&vc(i,f.retryQueue),f=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(f=n.memoizedState.cachePool.pool),b=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(b=i.memoizedState.cachePool.pool),b!==f&&(i.flags|=2048),n!==null&&tt(rr),null;case 24:return f=null,n!==null&&(f=n.memoizedState.cache),i.memoizedState.cache!==f&&(i.flags|=2048),Nr(an),Js(i),null;case 25:return null;case 30:return null}throw Error(U(156,i.tag))}function my(n,i){switch(Rs(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Nr(an),is(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return _i(i),null;case 31:if(i.memoizedState!==null){if(Us(i),i.alternate===null)throw Error(U(340));Mi()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(Us(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(U(340));Mi()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return tt($s),null;case 4:return is(),null;case 10:return Nr(i.type),null;case 22:case 23:return Us(i),Il(),n!==null&&tt(rr),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return Nr(an),null;case 25:return null;default:return null}}function _p(n,i){switch(Rs(i),i.tag){case 3:Nr(an),is();break;case 26:case 27:case 5:_i(i);break;case 4:is();break;case 31:i.memoizedState!==null&&Us(i);break;case 13:Us(i);break;case 19:tt($s);break;case 10:Nr(i.type);break;case 22:case 23:Us(i),Il(),n!==null&&tt(rr);break;case 24:Nr(an)}}function Df(n,i){try{var f=i.updateQueue,b=f!==null?f.lastEffect:null;if(b!==null){var x=b.next;f=x;do{if((f.tag&n)===n){b=void 0;var S=f.create,q=f.inst;b=S(),q.destroy=b}f=f.next}while(f!==x)}}catch(se){gs(i,i.return,se)}}function Cl(n,i,f){try{var b=i.updateQueue,x=b!==null?b.lastEffect:null;if(x!==null){var S=x.next;b=S;do{if((b.tag&n)===n){var q=b.inst,se=q.destroy;if(se!==void 0){q.destroy=void 0,x=i;var Ae=f,Ye=se;try{Ye()}catch(rt){gs(x,Ae,rt)}}}b=b.next}while(b!==S)}}catch(rt){gs(i,i.return,rt)}}function Ym(n){var i=n.updateQueue;if(i!==null){var f=n.stateNode;try{Ef(i,f)}catch(b){gs(n,n.return,b)}}}function $m(n,i,f){f.props=Qh(n.type,n.memoizedProps),f.state=n.memoizedState;try{f.componentWillUnmount()}catch(b){gs(n,i,b)}}function kc(n,i){try{var f=n.ref;if(f!==null){switch(n.tag){case 26:case 27:case 5:var b=n.stateNode;break;case 30:b=n.stateNode;break;default:b=n.stateNode}typeof f=="function"?n.refCleanup=f(b):f.current=b}}catch(x){gs(n,i,x)}}function gr(n,i){var f=n.ref,b=n.refCleanup;if(f!==null)if(typeof b=="function")try{b()}catch(x){gs(n,i,x)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(x){gs(n,i,x)}else f.current=null}function Ip(n){var i=n.type,f=n.memoizedProps,b=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":f.autoFocus&&b.focus();break e;case"img":f.src?b.src=f.src:f.srcSet&&(b.srcset=f.srcSet)}}catch(x){gs(n,n.return,x)}}function xp(n,i,f){try{var b=n.stateNode;Ig(b,n.type,f,i),b[wt]=i}catch(x){gs(n,n.return,x)}}function md(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&_d(n.type)||n.tag===4}function tf(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||md(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&_d(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Du(n,i,f){var b=n.tag;if(b===5||b===6)n=n.stateNode,i?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(n,i):(i=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,i.appendChild(n),f=f._reactRootContainer,f!=null||i.onclick!==null||(i.onclick=lo));else if(b!==4&&(b===27&&_d(n.type)&&(f=n.stateNode,i=null),n=n.child,n!==null))for(Du(n,i,f),n=n.sibling;n!==null;)Du(n,i,f),n=n.sibling}function Tp(n,i,f){var b=n.tag;if(b===5||b===6)n=n.stateNode,i?f.insertBefore(n,i):f.appendChild(n);else if(b!==4&&(b===27&&_d(n.type)&&(f=n.stateNode),n=n.child,n!==null))for(Tp(n,i,f),n=n.sibling;n!==null;)Tp(n,i,f),n=n.sibling}function Km(n){var i=n.stateNode,f=n.memoizedProps;try{for(var b=n.type,x=i.attributes;x.length;)i.removeAttributeNode(x[0]);io(i,b,f),i[ts]=n,i[wt]=f}catch(S){gs(n,n.return,S)}}var Ml=!1,jn=!1,Bu=!1,Qm=typeof WeakSet=="function"?WeakSet:Set,Un=null;function gy(n,i){if(n=n.containerInfo,Hc=Xc,n=dh(n),Ci(n)){if("selectionStart"in n)var f={start:n.selectionStart,end:n.selectionEnd};else e:{f=(f=n.ownerDocument)&&f.defaultView||window;var b=f.getSelection&&f.getSelection();if(b&&b.rangeCount!==0){f=b.anchorNode;var x=b.anchorOffset,S=b.focusNode;b=b.focusOffset;try{f.nodeType,S.nodeType}catch(aa){f=null;break e}var q=0,se=-1,Ae=-1,Ye=0,rt=0,pt=n,Qe=null;t:for(;;){for(var at;pt!==f||x!==0&&pt.nodeType!==3||(se=q+x),pt!==S||b!==0&&pt.nodeType!==3||(Ae=q+b),pt.nodeType===3&&(q+=pt.nodeValue.length),(at=pt.firstChild)!==null;)Qe=pt,pt=at;for(;;){if(pt===n)break t;if(Qe===f&&++Ye===x&&(se=q),Qe===S&&++rt===b&&(Ae=q),(at=pt.nextSibling)!==null)break;pt=Qe,Qe=pt.parentNode}pt=at}f=se===-1||Ae===-1?null:{start:se,end:Ae}}else f=null}f=f||{start:0,end:0}}else f=null;for(om={focusedElem:n,selectionRange:f},Xc=!1,Un=i;Un!==null;)if(i=Un,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,Un=n;else for(;Un!==null;){switch(i=Un,S=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(f=0;f<n.length;f++)x=n[f],x.ref.impl=x.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&S!==null){n=void 0,f=i,x=S.memoizedProps,S=S.memoizedState,b=f.stateNode;try{var Zt=Qh(f.type,x);n=b.getSnapshotBeforeUpdate(Zt,S),b.__reactInternalSnapshotBeforeUpdate=n}catch(aa){gs(f,f.return,aa)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,f=n.nodeType,f===9)Eh(n);else if(f===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Eh(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(U(163))}if(n=i.sibling,n!==null){n.return=i.return,Un=n;break}Un=i.return}}function Ru(n,i,f){var b=f.flags;switch(f.tag){case 0:case 11:case 15:ji(n,f),b&4&&Df(5,f);break;case 1:if(ji(n,f),b&4)if(n=f.stateNode,i===null)try{n.componentDidMount()}catch(q){gs(f,f.return,q)}else{var x=Qh(f.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(x,i,n.__reactInternalSnapshotBeforeUpdate)}catch(q){gs(f,f.return,q)}}b&64&&Ym(f),b&512&&kc(f,f.return);break;case 3:if(ji(n,f),b&64&&(n=f.updateQueue,n!==null)){if(i=null,f.child!==null)switch(f.child.tag){case 27:case 5:i=f.child.stateNode;break;case 1:i=f.child.stateNode}try{Ef(n,i)}catch(q){gs(f,f.return,q)}}break;case 27:i===null&&b&4&&Km(f);case 26:case 5:ji(n,f),i===null&&b&4&&Ip(f),b&512&&kc(f,f.return);break;case 12:ji(n,f);break;case 31:ji(n,f),b&4&&_c(n,f);break;case 13:ji(n,f),b&4&&Ic(n,f),b&64&&(n=f.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(f=Xu.bind(null,f),Vn(n,f))));break;case 22:if(b=f.memoizedState!==null||Ml,!b){i=i!==null&&i.memoizedState!==null||jn,x=Ml;var S=jn;Ml=b,(jn=i)&&!S?Ll(n,f,(f.subtreeFlags&8772)!==0):ji(n,f),Ml=x,jn=S}break;case 30:break;default:ji(n,f)}}function Bf(n){var i=n.alternate;i!==null&&(n.alternate=null,Bf(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&eh(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var nn=null,Wa=!1;function Fi(n,i,f){for(f=f.child;f!==null;)Hu(n,i,f),f=f.sibling}function Hu(n,i,f){if(Se&&typeof Se.onCommitFiberUnmount=="function")try{Se.onCommitFiberUnmount(ze,f)}catch(S){}switch(f.tag){case 26:jn||gr(f,i),Fi(n,i,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:jn||gr(f,i);var b=nn,x=Wa;_d(f.type)&&(nn=f.stateNode,Wa=!1),Fi(n,i,f),Yf(f.stateNode),nn=b,Wa=x;break;case 5:jn||gr(f,i);case 6:if(b=nn,x=Wa,nn=null,Fi(n,i,f),nn=b,Wa=x,nn!==null)if(Wa)try{(nn.nodeType===9?nn.body:nn.nodeName==="HTML"?nn.ownerDocument.body:nn).removeChild(f.stateNode)}catch(S){gs(f,i,S)}else try{nn.removeChild(f.stateNode)}catch(S){gs(f,i,S)}break;case 18:nn!==null&&(Wa?(n=nn,xg(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,f.stateNode),Pd(n)):xg(nn,f.stateNode));break;case 4:b=nn,x=Wa,nn=f.stateNode.containerInfo,Wa=!0,Fi(n,i,f),nn=b,Wa=x;break;case 0:case 11:case 14:case 15:Cl(2,f,i),jn||Cl(4,f,i),Fi(n,i,f);break;case 1:jn||(gr(f,i),b=f.stateNode,typeof b.componentWillUnmount=="function"&&$m(f,i,b)),Fi(n,i,f);break;case 21:Fi(n,i,f);break;case 22:jn=(b=jn)||f.memoizedState!==null,Fi(n,i,f),jn=b;break;default:Fi(n,i,f)}}function _c(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Pd(n)}catch(f){gs(i,i.return,f)}}}function Ic(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Pd(n)}catch(f){gs(i,i.return,f)}}function xc(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new Qm),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new Qm),i;default:throw Error(U(435,n.tag))}}function Tc(n,i){var f=xc(n);i.forEach(function(b){if(!f.has(b)){f.add(b);var x=wy.bind(null,n,b);b.then(x,x)}})}function yi(n,i){var f=i.deletions;if(f!==null)for(var b=0;b<f.length;b++){var x=f[b],S=n,q=i,se=q;e:for(;se!==null;){switch(se.tag){case 27:if(_d(se.type)){nn=se.stateNode,Wa=!1;break e}break;case 5:nn=se.stateNode,Wa=!1;break e;case 3:case 4:nn=se.stateNode.containerInfo,Wa=!0;break e}se=se.return}if(nn===null)throw Error(U(160));Hu(S,q,x),nn=null,Wa=!1,S=x.alternate,S!==null&&(S.return=null),x.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Ap(i,n),i=i.sibling}var bi=null;function Ap(n,i){var f=n.alternate,b=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:yi(i,n),oo(n),b&4&&(Cl(3,n,n.return),Df(3,n),Cl(5,n,n.return));break;case 1:yi(i,n),oo(n),b&512&&(jn||f===null||gr(f,f.return)),b&64&&Ml&&(n=n.updateQueue,n!==null&&(b=n.callbacks,b!==null&&(f=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=f===null?b:f.concat(b))));break;case 26:var x=bi;if(yi(i,n),oo(n),b&512&&(jn||f===null||gr(f,f.return)),b&4){var S=f!==null?f.memoizedState:null;if(b=n.memoizedState,f===null)if(b===null)if(n.stateNode===null){e:{b=n.type,f=n.memoizedProps,x=x.ownerDocument||x;t:switch(b){case"title":S=x.getElementsByTagName("title")[0],(!S||S[oa]||S[ts]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=x.createElement(b),x.head.insertBefore(S,x.querySelector("head > title"))),io(S,b,f),S[ts]=n,zs(S),b=S;break e;case"link":var q=bm("link","href",x).get(b+(f.href||""));if(q){for(var se=0;se<q.length;se++)if(S=q[se],S.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&S.getAttribute("rel")===(f.rel==null?null:f.rel)&&S.getAttribute("title")===(f.title==null?null:f.title)&&S.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){q.splice(se,1);break t}}S=x.createElement(b),io(S,b,f),x.head.appendChild(S);break;case"meta":if(q=bm("meta","content",x).get(b+(f.content||""))){for(se=0;se<q.length;se++)if(S=q[se],S.getAttribute("content")===(f.content==null?null:""+f.content)&&S.getAttribute("name")===(f.name==null?null:f.name)&&S.getAttribute("property")===(f.property==null?null:f.property)&&S.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&S.getAttribute("charset")===(f.charSet==null?null:f.charSet)){q.splice(se,1);break t}}S=x.createElement(b),io(S,b,f),x.head.appendChild(S);break;default:throw Error(U(468,b))}S[ts]=n,zs(S),b=S}n.stateNode=b}else jc(x,n.type,n.stateNode);else n.stateNode=ym(x,b,n.memoizedProps);else S!==b?(S===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):S.count--,b===null?jc(x,n.type,n.stateNode):ym(x,b,n.memoizedProps)):b===null&&n.stateNode!==null&&xp(n,n.memoizedProps,f.memoizedProps)}break;case 27:yi(i,n),oo(n),b&512&&(jn||f===null||gr(f,f.return)),f!==null&&b&4&&xp(n,n.memoizedProps,f.memoizedProps);break;case 5:if(yi(i,n),oo(n),b&512&&(jn||f===null||gr(f,f.return)),n.flags&32){x=n.stateNode;try{Co(x,"")}catch(Zt){gs(n,n.return,Zt)}}b&4&&n.stateNode!=null&&(x=n.memoizedProps,xp(n,x,f!==null?f.memoizedProps:x)),b&1024&&(Bu=!0);break;case 6:if(yi(i,n),oo(n),b&4){if(n.stateNode===null)throw Error(U(162));b=n.memoizedProps,f=n.stateNode;try{f.nodeValue=b}catch(Zt){gs(n,n.return,Zt)}}break;case 3:if(tu=null,x=bi,bi=Qp(i.containerInfo),yi(i,n),bi=x,oo(n),b&4&&f!==null&&f.memoizedState.isDehydrated)try{Pd(i.containerInfo)}catch(Zt){gs(n,n.return,Zt)}Bu&&(Bu=!1,Ac(n));break;case 4:b=bi,bi=Qp(n.stateNode.containerInfo),yi(i,n),oo(n),bi=b;break;case 12:yi(i,n),oo(n);break;case 31:yi(i,n),oo(n),b&4&&(b=n.updateQueue,b!==null&&(n.updateQueue=null,Tc(n,b)));break;case 13:yi(i,n),oo(n),n.child.flags&8192&&n.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(Ep=wn()),b&4&&(b=n.updateQueue,b!==null&&(n.updateQueue=null,Tc(n,b)));break;case 22:x=n.memoizedState!==null;var Ae=f!==null&&f.memoizedState!==null,Ye=Ml,rt=jn;if(Ml=Ye||x,jn=rt||Ae,yi(i,n),jn=rt,Ml=Ye,oo(n),b&8192)e:for(i=n.stateNode,i._visibility=x?i._visibility&-2:i._visibility|1,x&&(f===null||Ae||Ml||jn||Ah(n)),f=null,i=n;;){if(i.tag===5||i.tag===26){if(f===null){Ae=f=i;try{if(S=Ae.stateNode,x)q=S.style,typeof q.setProperty=="function"?q.setProperty("display","none","important"):q.display="none";else{se=Ae.stateNode;var pt=Ae.memoizedProps.style,Qe=pt!=null&&pt.hasOwnProperty("display")?pt.display:null;se.style.display=Qe==null||typeof Qe=="boolean"?"":(""+Qe).trim()}}catch(Zt){gs(Ae,Ae.return,Zt)}}}else if(i.tag===6){if(f===null){Ae=i;try{Ae.stateNode.nodeValue=x?"":Ae.memoizedProps}catch(Zt){gs(Ae,Ae.return,Zt)}}}else if(i.tag===18){if(f===null){Ae=i;try{var at=Ae.stateNode;x?Ta(at,!0):Ta(Ae.stateNode,!1)}catch(Zt){gs(Ae,Ae.return,Zt)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;f===i&&(f=null),i=i.return}f===i&&(f=null),i.sibling.return=i.return,i=i.sibling}b&4&&(b=n.updateQueue,b!==null&&(f=b.retryQueue,f!==null&&(b.retryQueue=null,Tc(n,f))));break;case 19:yi(i,n),oo(n),b&4&&(b=n.updateQueue,b!==null&&(n.updateQueue=null,Tc(n,b)));break;case 30:break;case 21:break;default:yi(i,n),oo(n)}}function oo(n){var i=n.flags;if(i&2){try{for(var f,b=n.return;b!==null;){if(md(b)){f=b;break}b=b.return}if(f==null)throw Error(U(160));switch(f.tag){case 27:var x=f.stateNode,S=tf(n);Tp(n,S,x);break;case 5:var q=f.stateNode;f.flags&32&&(Co(q,""),f.flags&=-33);var se=tf(n);Tp(n,se,q);break;case 3:case 4:var Ae=f.stateNode.containerInfo,Ye=tf(n);Du(n,Ye,Ae);break;default:throw Error(U(161))}}catch(rt){gs(n,n.return,rt)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function Ac(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;Ac(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function ji(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Ru(n,i.alternate,i),i=i.sibling}function Ah(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Cl(4,i,i.return),Ah(i);break;case 1:gr(i,i.return);var f=i.stateNode;typeof f.componentWillUnmount=="function"&&$m(i,i.return,f),Ah(i);break;case 27:Yf(i.stateNode);case 26:case 5:gr(i,i.return),Ah(i);break;case 22:i.memoizedState===null&&Ah(i);break;case 30:Ah(i);break;default:Ah(i)}n=n.sibling}}function Ll(n,i,f){for(f=f&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var b=i.alternate,x=n,S=i,q=S.flags;switch(S.tag){case 0:case 11:case 15:Ll(x,S,f),Df(4,S);break;case 1:if(Ll(x,S,f),b=S,x=b.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(Ye){gs(b,b.return,Ye)}if(b=S,x=b.updateQueue,x!==null){var se=b.stateNode;try{var Ae=x.shared.hiddenCallbacks;if(Ae!==null)for(x.shared.hiddenCallbacks=null,x=0;x<Ae.length;x++)Vd(Ae[x],se)}catch(Ye){gs(b,b.return,Ye)}}f&&q&64&&Ym(S),kc(S,S.return);break;case 27:Km(S);case 26:case 5:Ll(x,S,f),f&&b===null&&q&4&&Ip(S),kc(S,S.return);break;case 12:Ll(x,S,f);break;case 31:Ll(x,S,f),f&&q&4&&_c(x,S);break;case 13:Ll(x,S,f),f&&q&4&&Ic(x,S);break;case 22:S.memoizedState===null&&Ll(x,S,f),kc(S,S.return);break;case 30:break;default:Ll(x,S,f)}i=i.sibling}}function Sp(n,i){var f=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(f=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==f&&(n!=null&&n.refCount++,f!=null&&rd(f))}function zl(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&rd(n))}function Sh(n,i,f,b){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Nu(n,i,f,b),i=i.sibling}function Nu(n,i,f,b){var x=i.flags;switch(i.tag){case 0:case 11:case 15:Sh(n,i,f,b),x&2048&&Df(9,i);break;case 1:Sh(n,i,f,b);break;case 3:Sh(n,i,f,b),x&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&rd(n)));break;case 12:if(x&2048){Sh(n,i,f,b),n=i.stateNode;try{var S=i.memoizedProps,q=S.id,se=S.onPostCommit;typeof se=="function"&&se(q,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(Ae){gs(i,i.return,Ae)}}else Sh(n,i,f,b);break;case 31:Sh(n,i,f,b);break;case 13:Sh(n,i,f,b);break;case 23:break;case 22:S=i.stateNode,q=i.alternate,i.memoizedState!==null?S._visibility&2?Sh(n,i,f,b):af(n,i):S._visibility&2?Sh(n,i,f,b):(S._visibility|=2,al(n,i,f,b,(i.subtreeFlags&10256)!==0||!1)),x&2048&&Sp(q,i);break;case 24:Sh(n,i,f,b),x&2048&&zl(i.alternate,i);break;default:Sh(n,i,f,b)}}function al(n,i,f,b,x){for(x=x&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var S=n,q=i,se=f,Ae=b,Ye=q.flags;switch(q.tag){case 0:case 11:case 15:al(S,q,se,Ae,x),Df(8,q);break;case 23:break;case 22:var rt=q.stateNode;q.memoizedState!==null?rt._visibility&2?al(S,q,se,Ae,x):af(S,q):(rt._visibility|=2,al(S,q,se,Ae,x)),x&&Ye&2048&&Sp(q.alternate,q);break;case 24:al(S,q,se,Ae,x),x&&Ye&2048&&zl(q.alternate,q);break;default:al(S,q,se,Ae,x)}i=i.sibling}}function af(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var f=n,b=i,x=b.flags;switch(b.tag){case 22:af(f,b),x&2048&&Sp(b.alternate,b);break;case 24:af(f,b),x&2048&&zl(b.alternate,b);break;default:af(f,b)}i=i.sibling}}var Rf=8192;function sf(n,i,f){if(n.subtreeFlags&Rf)for(n=n.child;n!==null;)Jm(n,i,f),n=n.sibling}function Jm(n,i,f){switch(n.tag){case 26:sf(n,i,f),n.flags&Rf&&n.memoizedState!==null&&wm(f,bi,n.memoizedState,n.memoizedProps);break;case 5:sf(n,i,f);break;case 3:case 4:var b=bi;bi=Qp(n.stateNode.containerInfo),sf(n,i,f),bi=b;break;case 22:n.memoizedState===null&&(b=n.alternate,b!==null&&b.memoizedState!==null?(b=Rf,Rf=16777216,sf(n,i,f),Rf=b):sf(n,i,f));break;default:sf(n,i,f)}}function eg(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function Sc(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var f=0;f<i.length;f++){var b=i[f];Un=b,Hf(b,n)}eg(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)tg(n),n=n.sibling}function tg(n){switch(n.tag){case 0:case 11:case 15:Sc(n),n.flags&2048&&Cl(9,n,n.return);break;case 3:Sc(n);break;case 12:Sc(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,Pp(n)):Sc(n);break;default:Sc(n)}}function Pp(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var f=0;f<i.length;f++){var b=i[f];Un=b,Hf(b,n)}eg(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Cl(8,i,i.return),Pp(i);break;case 22:f=i.stateNode,f._visibility&2&&(f._visibility&=-3,Pp(i));break;default:Pp(i)}n=n.sibling}}function Hf(n,i){for(;Un!==null;){var f=Un;switch(f.tag){case 0:case 11:case 15:Cl(8,f,i);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var b=f.memoizedState.cachePool.pool;b!=null&&b.refCount++}break;case 24:rd(f.memoizedState.cache)}if(b=f.child,b!==null)b.return=f,Un=b;else e:for(f=n;Un!==null;){b=Un;var x=b.sibling,S=b.return;if(Bf(b),b===f){Un=null;break e}if(x!==null){x.return=S,Un=x;break e}Un=S}}}var yy={getCacheForType:function(n){var i=pn(an),f=i.data.get(n);return f===void 0&&(f=n(),i.data.set(n,f)),f},cacheSignal:function(){return pn(an).controller.signal}},ag=typeof WeakMap=="function"?WeakMap:Map,ms=0,Gs=null,Fa=null,ja=0,Is=0,wi=null,Yr=!1,gd=!1,Gu=!1,Dl=0,mn=0,Bl=0,nf=0,Fu=0,Bo=0,of=0,Pc=null,Ui=null,ju=!1,Ep=0,sg=0,Ec=1/0,Nf=null,Rl=null,qn=0,Hl=null,Gf=null,$r=0,Uu=0,Cp=null,ng=null,Cc=0,qu=null;function qi(){return(ms&2)!==0&&ja!==0?ja&-ja:Je.T!==null?Ju():An()}function og(){if(Bo===0)if((ja&536870912)===0||Pa){var n=Ga;Ga<<=1,(Ga&3932160)===0&&(Ga=262144),Bo=n}else Bo=536870912;return n=Gt.current,n!==null&&(n.flags|=32),Bo}function Vi(n,i,f){(n===Gs&&(Is===2||Is===9)||n.cancelPendingCommit!==null)&&(jf(n,0),yd(n,ja,Bo,!1)),qa(n,f),((ms&2)===0||n!==Gs)&&(n===Gs&&((ms&2)===0&&(nf|=f),mn===4&&yd(n,ja,Bo,!1)),Ph(n))}function Bn(n,i,f){if((ms&6)!==0)throw Error(U(327));var b=!f&&(i&127)===0&&(i&n.expiredLanes)===0||Ws(n,i),x=b?Uf(n,i):zp(n,i,!0),S=b;do{if(x===0){gd&&!b&&yd(n,i,0,!1);break}else{if(f=n.current.alternate,S&&!by(f)){x=zp(n,i,!1),S=!1;continue}if(x===2){if(S=i,n.errorRecoveryDisabledLanes&S)var q=0;else q=n.pendingLanes&-536870913,q=q!==0?q:q&536870912?536870912:0;if(q!==0){i=q;e:{var se=n;x=Pc;var Ae=se.current.memoizedState.isDehydrated;if(Ae&&(jf(se,q).flags|=256),q=zp(se,q,!1),q!==2){if(Gu&&!Ae){se.errorRecoveryDisabledLanes|=S,nf|=S,x=4;break e}S=Ui,Ui=x,S!==null&&(Ui===null?Ui=S:Ui.push.apply(Ui,S))}x=q}if(S=!1,x!==2)continue}}if(x===1){jf(n,0),yd(n,i,0,!0);break}e:{switch(b=n,S=x,S){case 0:case 1:throw Error(U(345));case 4:if((i&4194048)!==i)break;case 6:yd(b,i,Bo,!Yr);break e;case 2:Ui=null;break;case 3:case 5:break;default:throw Error(U(329))}if((i&62914560)===i&&(x=Ep+300-wn(),10<x)){if(yd(b,i,Bo,!Yr),Za(b,0,!0)!==0)break e;$r=i,b.timeoutHandle=Kp(Ff.bind(null,b,f,Ui,Nf,ju,i,Bo,nf,of,Yr,S,"Throttled",-0,0),x);break e}Ff(b,f,Ui,Nf,ju,i,Bo,nf,of,Yr,S,null,-0,0)}}break}while(!0);Ph(n)}function Ff(n,i,f,b,x,S,q,se,Ae,Ye,rt,pt,Qe,at){if(n.timeoutHandle=-1,pt=i.subtreeFlags,pt&8192||(pt&16785408)===16785408){pt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:lo},Jm(i,S,pt);var Zt=(S&62914560)===S?Ep-wn():(S&4194048)===S?sg-wn():0;if(Zt=vm(pt,Zt),Zt!==null){$r=S,n.cancelPendingCommit=Zt(dg.bind(null,n,i,S,f,b,x,q,se,Ae,rt,pt,null,Qe,at)),yd(n,S,q,!Ye);return}}dg(n,i,S,f,b,x,q,se,Ae)}function by(n){for(var i=n;;){var f=i.tag;if((f===0||f===11||f===15)&&i.flags&16384&&(f=i.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var b=0;b<f.length;b++){var x=f[b],S=x.getSnapshot;x=x.value;try{if(!Mn(S(),x))return!1}catch(q){return!1}}if(f=i.child,i.subtreeFlags&16384&&f!==null)f.return=i,i=f;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function yd(n,i,f,b){i&=~Fu,i&=~nf,n.suspendedLanes|=i,n.pingedLanes&=~i,b&&(n.warmLanes|=i),b=n.expirationTimes;for(var x=i;0<x;){var S=31-nt(x),q=1<<S;b[S]=-1,x&=~q}f!==0&&es(n,f,i)}function Mc(){return(ms&6)===0?(yr(0),!1):!0}function Mp(){if(Fa!==null){if(Is===0)var n=Fa.return;else n=Fa,zi=Do=null,Ih(n),Fr=null,kl=0,n=Fa;for(;n!==null;)_p(n.alternate,n),n=n.return;Fa=null}}function jf(n,i){var f=n.timeoutHandle;f!==-1&&(n.timeoutHandle=-1,rm(f)),f=n.cancelPendingCommit,f!==null&&(n.cancelPendingCommit=null,f()),$r=0,Mp(),Gs=n,Fa=f=vo(n.current,null),ja=i,Is=0,wi=null,Yr=!1,gd=Ws(n,i),Gu=!1,of=Bo=Fu=nf=Bl=mn=0,Ui=Pc=null,ju=!1,(i&8)!==0&&(i|=i&32);var b=n.entangledLanes;if(b!==0)for(n=n.entanglements,b&=i;0<b;){var x=31-nt(b),S=1<<x;i|=n[x],b&=~S}return Dl=i,Dr(),f}function Vu(n,i){_a=null,Je.H=ss,i===hr||i===Vo?(i=ld(),Is=3):i===Xh?(i=ld(),Is=4):Is=i===up?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,wi=i,Fa===null&&(mn=1,mr(n,y(i,n.current)))}function Wu(){var n=Gt.current;return n===null?!0:(ja&4194048)===ja?qt===null:(ja&62914560)===ja||(ja&536870912)!==0?n===qt:!1}function rf(){var n=Je.H;return Je.H=ss,n===null?ss:n}function Lp(){var n=Je.A;return Je.A=yy,n}function Lc(){mn=4,Yr||(ja&4194048)!==ja&&Gt.current!==null||(gd=!0),(Bl&134217727)===0&&(nf&134217727)===0||Gs===null||yd(Gs,ja,Bo,!1)}function zp(n,i,f){var b=ms;ms|=2;var x=rf(),S=Lp();(Gs!==n||ja!==i)&&(Nf=null,jf(n,i)),i=!1;var q=mn;e:do try{if(Is!==0&&Fa!==null){var se=Fa,Ae=wi;switch(Is){case 8:Mp(),q=6;break e;case 3:case 2:case 9:case 6:Gt.current===null&&(i=!0);var Ye=Is;if(Is=0,wi=null,qf(n,se,Ae,Ye),f&&gd){q=0;break e}break;default:Ye=Is,Is=0,wi=null,qf(n,se,Ae,Ye)}}Dp(),q=mn;break}catch(rt){Vu(n,rt)}while(!0);return i&&n.shellSuspendCounter++,zi=Do=null,ms=b,Je.H=x,Je.A=S,Fa===null&&(Gs=null,ja=0,Dr()),q}function Dp(){for(;Fa!==null;)rg(Fa)}function Uf(n,i){var f=ms;ms|=2;var b=rf(),x=Lp();Gs!==n||ja!==i?(Nf=null,Ec=wn()+500,jf(n,i)):gd=Ws(n,i);e:do try{if(Is!==0&&Fa!==null){i=Fa;var S=wi;t:switch(Is){case 1:Is=0,wi=null,qf(n,i,S,1);break;case 2:case 9:if(Fd(S)){Is=0,wi=null,hg(i);break}i=function(){Is!==2&&Is!==9||Gs!==n||(Is=7),Ph(n)},S.then(i,i);break e;case 3:Is=7;break e;case 4:Is=5;break e;case 7:Fd(S)?(Is=0,wi=null,hg(i)):(Is=0,wi=null,qf(n,i,S,7));break;case 5:var q=null;switch(Fa.tag){case 26:q=Fa.memoizedState;case 5:case 27:var se=Fa;if(q?Uc(q):se.stateNode.complete){Is=0,wi=null;var Ae=se.sibling;if(Ae!==null)Fa=Ae;else{var Ye=se.return;Ye!==null?(Fa=Ye,Bp(Ye)):Fa=null}break t}}Is=0,wi=null,qf(n,i,S,5);break;case 6:Is=0,wi=null,qf(n,i,S,6);break;case 8:Mp(),mn=6;break e;default:throw Error(U(462))}}ig();break}catch(rt){Vu(n,rt)}while(!0);return zi=Do=null,Je.H=b,Je.A=x,ms=f,Fa!==null?0:(Gs=null,ja=0,Dr(),mn)}function ig(){for(;Fa!==null&&!No();)rg(Fa)}function rg(n){var i=Xo(n.alternate,n,Dl);n.memoizedProps=n.pendingProps,i===null?Bp(n):Fa=i}function hg(n){var i=n,f=i.alternate;switch(i.tag){case 15:case 0:i=qm(f,i,i.pendingProps,i.type,void 0,ja);break;case 11:i=qm(f,i,i.pendingProps,i.type.render,i.ref,ja);break;case 5:Ih(i);default:_p(f,i),i=Fa=Hd(i,Dl),i=Xo(f,i,Dl)}n.memoizedProps=n.pendingProps,i===null?Bp(n):Fa=i}function qf(n,i,f,b){zi=Do=null,Ih(i),Fr=null,kl=0;var x=i.return;try{if(pp(n,x,i,f,ja)){mn=1,mr(n,y(f,n.current)),Fa=null;return}}catch(S){if(x!==null)throw Fa=x,S;mn=1,mr(n,y(f,n.current)),Fa=null;return}i.flags&32768?(Pa||b===1?n=!0:gd||(ja&536870912)!==0?n=!1:(Yr=n=!0,(b===2||b===9||b===3||b===6)&&(b=Gt.current,b!==null&&b.tag===13&&(b.flags|=16384))),lg(i,n)):Bp(i)}function Bp(n){var i=n;do{if((i.flags&32768)!==0){lg(i,Yr);return}n=i.return;var f=Xm(i.alternate,i,Dl);if(f!==null){Fa=f;return}if(i=i.sibling,i!==null){Fa=i;return}Fa=i=n}while(i!==null);mn===0&&(mn=5)}function lg(n,i){do{var f=my(n.alternate,n);if(f!==null){f.flags&=32767,Fa=f;return}if(f=n.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!i&&(n=n.sibling,n!==null)){Fa=n;return}Fa=n=f}while(n!==null);mn=6,Fa=null}function dg(n,i,f,b,x,S,q,se,Ae){n.cancelPendingCommit=null;do Rp();while(qn!==0);if((ms&6)!==0)throw Error(U(327));if(i!==null){if(i===n.current)throw Error(U(177));if(S=i.lanes|i.childLanes,S|=zr,Ls(n,f,S,q,se,Ae),n===Gs&&(Fa=Gs=null,ja=0),Gf=i,Hl=n,$r=f,Uu=S,Cp=x,ng=b,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,gg($,function(){return mg(),null})):(n.callbackNode=null,n.callbackPriority=0),b=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||b){b=Je.T,Je.T=null,x=It.p,It.p=2,q=ms,ms|=4;try{gy(n,i,f)}finally{ms=q,It.p=x,Je.T=b}}qn=1,fg(),cg(),pg()}}function fg(){if(qn===1){qn=0;var n=Hl,i=Gf,f=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||f){f=Je.T,Je.T=null;var b=It.p;It.p=2;var x=ms;ms|=4;try{Ap(i,n);var S=om,q=dh(n.containerInfo),se=S.focusedElem,Ae=S.selectionRange;if(q!==se&&se&&se.ownerDocument&&qh(se.ownerDocument.documentElement,se)){if(Ae!==null&&Ci(se)){var Ye=Ae.start,rt=Ae.end;if(rt===void 0&&(rt=Ye),"selectionStart"in se)se.selectionStart=Ye,se.selectionEnd=Math.min(rt,se.value.length);else{var pt=se.ownerDocument||document,Qe=pt&&pt.defaultView||window;if(Qe.getSelection){var at=Qe.getSelection(),Zt=se.textContent.length,aa=Math.min(Ae.start,Zt),xs=Ae.end===void 0?aa:Math.min(Ae.end,Zt);!at.extend&&aa>xs&&(q=xs,xs=aa,aa=q);var He=Cr(se,aa),Me=Cr(se,xs);if(He&&Me&&(at.rangeCount!==1||at.anchorNode!==He.node||at.anchorOffset!==He.offset||at.focusNode!==Me.node||at.focusOffset!==Me.offset)){var Xe=pt.createRange();Xe.setStart(He.node,He.offset),at.removeAllRanges(),aa>xs?(at.addRange(Xe),at.extend(Me.node,Me.offset)):(Xe.setEnd(Me.node,Me.offset),at.addRange(Xe))}}}}for(pt=[],at=se;at=at.parentNode;)at.nodeType===1&&pt.push({element:at,left:at.scrollLeft,top:at.scrollTop});for(typeof se.focus=="function"&&se.focus(),se=0;se<pt.length;se++){var dt=pt[se];dt.element.scrollLeft=dt.left,dt.element.scrollTop=dt.top}}Xc=!!Hc,om=Hc=null}finally{ms=x,It.p=b,Je.T=f}}n.current=i,qn=2}}function cg(){if(qn===2){qn=0;var n=Hl,i=Gf,f=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||f){f=Je.T,Je.T=null;var b=It.p;It.p=2;var x=ms;ms|=4;try{Ru(n,i.alternate,i)}finally{ms=x,It.p=b,Je.T=f}}qn=3}}function pg(){if(qn===4||qn===3){qn=0,Jr();var n=Hl,i=Gf,f=$r,b=ng;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?qn=5:(qn=0,Gf=Hl=null,ug(n,n.pendingLanes));var x=n.pendingLanes;if(x===0&&(Rl=null),We(f),i=i.stateNode,Se&&typeof Se.onCommitFiberRoot=="function")try{Se.onCommitFiberRoot(ze,i,void 0,(i.current.flags&128)===128)}catch(Ae){}if(b!==null){i=Je.T,x=It.p,It.p=2,Je.T=null;try{for(var S=n.onRecoverableError,q=0;q<b.length;q++){var se=b[q];S(se.value,{componentStack:se.stack})}}finally{Je.T=i,It.p=x}}($r&3)!==0&&Rp(),Ph(n),x=n.pendingLanes,(f&261930)!==0&&(x&42)!==0?n===qu?Cc++:(Cc=0,qu=n):Cc=0,yr(0)}}function ug(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,rd(i)))}function Rp(){return fg(),cg(),pg(),mg()}function mg(){if(qn!==5)return!1;var n=Hl,i=Uu;Uu=0;var f=We($r),b=Je.T,x=It.p;try{It.p=32>f?32:f,Je.T=null,f=Cp,Cp=null;var S=Hl,q=$r;if(qn=0,Gf=Hl=null,$r=0,(ms&6)!==0)throw Error(U(331));var se=ms;if(ms|=4,tg(S.current),Nu(S,S.current,q,f),ms=se,yr(0,!1),Se&&typeof Se.onPostCommitFiberRoot=="function")try{Se.onPostCommitFiberRoot(ze,S)}catch(Ae){}return!0}finally{It.p=x,Je.T=b,ug(n,i)}}function Zu(n,i,f){i=y(f,i),i=Qd(n.stateNode,i,2),n=vh(n,i,2),n!==null&&(qa(n,2),Ph(n))}function gs(n,i,f){if(n.tag===3)Zu(n,n,f);else for(;i!==null;){if(i.tag===3){Zu(i,n,f);break}else if(i.tag===1){var b=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(Rl===null||!Rl.has(b))){n=y(f,n),f=Jd(2),b=vh(i,f,2),b!==null&&(ef(f,b,i,n),qa(b,2),Ph(b));break}}i=i.return}}function Hp(n,i,f){var b=n.pingCache;if(b===null){b=n.pingCache=new ag;var x=new Set;b.set(i,x)}else x=b.get(i),x===void 0&&(x=new Set,b.set(i,x));x.has(f)||(Gu=!0,x.add(f),n=bd.bind(null,n,i,f),i.then(n,n))}function bd(n,i,f){var b=n.pingCache;b!==null&&b.delete(i),n.pingedLanes|=n.suspendedLanes&f,n.warmLanes&=~f,Gs===n&&(ja&f)===f&&(mn===4||mn===3&&(ja&62914560)===ja&&300>wn()-Ep?(ms&2)===0&&jf(n,0):Fu|=f,of===ja&&(of=0)),Ph(n)}function zc(n,i){i===0&&(i=Xa()),n=to(n,i),n!==null&&(qa(n,i),Ph(n))}function Xu(n){var i=n.memoizedState,f=0;i!==null&&(f=i.retryLane),zc(n,f)}function wy(n,i){var f=0;switch(n.tag){case 31:case 13:var b=n.stateNode,x=n.memoizedState;x!==null&&(f=x.retryLane);break;case 19:b=n.stateNode;break;case 22:b=n.stateNode._retryCache;break;default:throw Error(U(314))}b!==null&&b.delete(i),zc(n,f)}function gg(n,i){return Xi(n,i)}var Np=null,Vf=null,Yu=!1,Gp=!1,$u=!1,Nl=0;function Ph(n){n!==Vf&&n.next===null&&(Vf===null?Np=Vf=n:Vf=Vf.next=n),Gp=!0,Yu||(Yu=!0,Qu())}function yr(n,i){if(!$u&&Gp){$u=!0;do for(var f=!1,b=Np;b!==null;){if(n!==0){var x=b.pendingLanes;if(x===0)var S=0;else{var q=b.suspendedLanes,se=b.pingedLanes;S=(1<<31-nt(42|n)+1)-1,S&=x&~(q&~se),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(f=!0,Dc(b,S))}else S=ja,S=Za(b,b===Gs?S:0,b.cancelPendingCommit!==null||b.timeoutHandle!==-1),(S&3)===0||Ws(b,S)||(f=!0,Dc(b,S));b=b.next}while(f);$u=!1}}function wd(){Ku()}function Ku(){Gp=Yu=!1;var n=0;Nl!==0&&$p()&&(n=Nl);for(var i=wn(),f=null,b=Np;b!==null;){var x=b.next,S=Fp(b,i);S===0?(b.next=null,f===null?Np=x:f.next=x,x===null&&(Vf=f)):(f=b,(n!==0||(S&3)!==0)&&(Gp=!0)),b=x}qn!==0&&qn!==5||yr(n),Nl!==0&&(Nl=0)}function Fp(n,i){for(var f=n.suspendedLanes,b=n.pingedLanes,x=n.expirationTimes,S=n.pendingLanes&-62914561;0<S;){var q=31-nt(S),se=1<<q,Ae=x[q];Ae===-1?((se&f)===0||(se&b)!==0)&&(x[q]=sa(se,i)):Ae<=i&&(n.expiredLanes|=se),S&=~se}if(i=Gs,f=ja,f=Za(n,n===i?f:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),b=n.callbackNode,f===0||n===i&&(Is===2||Is===9)||n.cancelPendingCommit!==null)return b!==null&&b!==null&&Ho(b),n.callbackNode=null,n.callbackPriority=0;if((f&3)===0||Ws(n,f)){if(i=f&-f,i===n.callbackPriority)return i;switch(b!==null&&Ho(b),We(f)){case 2:case 8:f=K;break;case 32:f=$;break;case 268435456:f=Oe;break;default:f=$}return b=yg.bind(null,n),f=Xi(f,b),n.callbackPriority=i,n.callbackNode=f,i}return b!==null&&b!==null&&Ho(b),n.callbackPriority=2,n.callbackNode=null,2}function yg(n,i){if(qn!==0&&qn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var f=n.callbackNode;if(Rp()&&n.callbackNode!==f)return null;var b=ja;return b=Za(n,n===Gs?b:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),b===0?null:(Bn(n,b,i),Fp(n,wn()),n.callbackNode!=null&&n.callbackNode===f?yg.bind(null,n):null)}function Dc(n,i){if(Rp())return null;Bn(n,i,!0)}function Qu(){lm(function(){(ms&6)!==0?Xi(Re,wd):Ku()})}function Ju(){if(Nl===0){var n=Ol;n===0&&(n=Jt,Jt<<=1,(Jt&261888)===0&&(Jt=256)),Nl=n}return Nl}function jp(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:ra(""+n)}function Up(n,i){var f=i.ownerDocument.createElement("input");return f.name=i.name,f.value=i.value,n.id&&f.setAttribute("form",n.id),i.parentNode.insertBefore(f,i),n=new FormData(n),f.parentNode.removeChild(f),n}function Wf(n,i,f,b,x){if(i==="submit"&&f&&f.stateNode===x){var S=jp((x[wt]||null).action),q=b.submitter;q&&(i=(i=q[wt]||null)?jp(i.formAction):q.getAttribute("formAction"),i!==null&&(S=i,q=null));var se=new ll("action","action",null,b,x);n.push({event:se,listeners:[{instance:null,listener:function(){if(b.defaultPrevented){if(Nl!==0){var Ae=q?Up(x,q):new FormData(x);Ks(f,{pending:!0,data:Ae,method:x.method,action:S},null,Ae)}}else typeof S=="function"&&(se.preventDefault(),Ae=q?Up(x,q):new FormData(x),Ks(f,{pending:!0,data:Ae,method:x.method,action:S},S,Ae))},currentTarget:x}]})}}for(var qp=0;qp<sr.length;qp++){var Vp=sr[qp],em=Vp.toLowerCase(),bg=Vp[0].toUpperCase()+Vp.slice(1);bo(em,"on"+bg)}bo(Lr,"onAnimationEnd"),bo(yl,"onAnimationIteration"),bo(uh,"onAnimationStart"),bo("dblclick","onDoubleClick"),bo("focusin","onFocus"),bo("focusout","onBlur"),bo(mh,"onTransitionRun"),bo(Wh,"onTransitionStart"),bo(Zh,"onTransitionCancel"),bo(Ln,"onTransitionEnd"),ai("onMouseEnter",["mouseout","mouseover"]),ai("onMouseLeave",["mouseout","mouseover"]),ai("onPointerEnter",["pointerout","pointerover"]),ai("onPointerLeave",["pointerout","pointerover"]),La("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),La("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),La("onBeforeInput",["compositionend","keypress","textInput","paste"]),La("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),La("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),La("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wg=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vd));function vg(n,i){i=(i&4)!==0;for(var f=0;f<n.length;f++){var b=n[f],x=b.event;b=b.listeners;e:{var S=void 0;if(i)for(var q=b.length-1;0<=q;q--){var se=b[q],Ae=se.instance,Ye=se.currentTarget;if(se=se.listener,Ae!==S&&x.isPropagationStopped())break e;S=se,x.currentTarget=Ye;try{S(x)}catch(rt){fi(rt)}x.currentTarget=null,S=Ae}else for(q=0;q<b.length;q++){if(se=b[q],Ae=se.instance,Ye=se.currentTarget,se=se.listener,Ae!==S&&x.isPropagationStopped())break e;S=se,x.currentTarget=Ye;try{S(x)}catch(rt){fi(rt)}x.currentTarget=null,S=Ae}}}}function Ua(n,i){var f=i[ta];f===void 0&&(f=i[ta]=new Set);var b=n+"__bubble";f.has(b)||(Zp(i,n,2,!1),f.add(b))}function tm(n,i,f){var b=0;i&&(b|=4),Zp(f,n,b,i)}var Wp="_reactListening"+Math.random().toString(36).slice(2);function am(n){if(!n[Wp]){n[Wp]=!0,Rh.forEach(function(f){f!=="selectionchange"&&(wg.has(f)||tm(f,!1,n),tm(f,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Wp]||(i[Wp]=!0,tm("selectionchange",!1,i))}}function Zp(n,i,f,b){switch(df(i)){case 2:var x=Yc;break;case 8:x=zg;break;default:x=km}f=x.bind(null,i,f,n),x=void 0,!Pn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(x=!0),b?x!==void 0?n.addEventListener(i,f,{capture:!0,passive:x}):n.addEventListener(i,f,!0):x!==void 0?n.addEventListener(i,f,{passive:x}):n.addEventListener(i,f,!1)}function sl(n,i,f,b,x){var S=b;if((i&1)===0&&(i&2)===0&&b!==null)e:for(;;){if(b===null)return;var q=b.tag;if(q===3||q===4){var se=b.stateNode.containerInfo;if(se===x)break;if(q===4)for(q=b.return;q!==null;){var Ae=q.tag;if((Ae===3||Ae===4)&&q.stateNode.containerInfo===x)return;q=q.return}for(;se!==null;){if(q=ti(se),q===null)return;if(Ae=q.tag,Ae===5||Ae===6||Ae===26||Ae===27){b=S=q;continue e}se=se.parentNode}}b=b.return}$a(function(){var Ye=S,rt=nh(f),pt=[];e:{var Qe=Rd.get(n);if(Qe!==void 0){var at=ll,Zt=n;switch(n){case"keypress":if(uo(f)===0)break e;case"keydown":case"keyup":at=Ss;break;case"focusin":Zt="focus",at=Sr;break;case"focusout":Zt="blur",at=Sr;break;case"beforeblur":case"afterblur":at=Sr;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":at=oh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":at=dl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":at=hc;break;case Lr:case yl:case uh:at=Ql;break;case Ln:at=pl;break;case"scroll":case"scrollend":at=Oa;break;case"wheel":at=er;break;case"copy":case"cut":case"paste":at=Fo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":at=ed;break;case"toggle":case"beforetoggle":at=Si}var aa=(i&4)!==0,xs=!aa&&(n==="scroll"||n==="scrollend"),He=aa?Qe!==null?Qe+"Capture":null:Qe;aa=[];for(var Me=Ye,Xe;Me!==null;){var dt=Me;if(Xe=dt.stateNode,dt=dt.tag,dt!==5&&dt!==26&&dt!==27||Xe===null||He===null||(dt=fo(Me,He),dt!=null&&aa.push(Zf(Me,dt,Xe))),xs)break;Me=Me.return}0<aa.length&&(Qe=new at(Qe,Zt,null,f,rt),pt.push({event:Qe,listeners:aa}))}}if((i&7)===0){e:{if(Qe=n==="mouseover"||n==="pointerover",at=n==="mouseout"||n==="pointerout",Qe&&f!==Kl&&(Zt=f.relatedTarget||f.fromElement)&&(ti(Zt)||Zt[na]))break e;if((at||Qe)&&(Qe=rt.window===rt?rt:(Qe=rt.ownerDocument)?Qe.defaultView||Qe.parentWindow:window,at?(Zt=f.relatedTarget||f.toElement,at=Ye,Zt=Zt?ti(Zt):null,Zt!==null&&(xs=he(Zt),aa=Zt.tag,Zt!==xs||aa!==5&&aa!==27&&aa!==6)&&(Zt=null)):(at=null,Zt=Ye),at!==Zt)){if(aa=oh,dt="onMouseLeave",He="onMouseEnter",Me="mouse",(n==="pointerout"||n==="pointerover")&&(aa=ed,dt="onPointerLeave",He="onPointerEnter",Me="pointer"),xs=at==null?Qe:Eo(at),Xe=Zt==null?Qe:Eo(Zt),Qe=new aa(dt,Me+"leave",at,f,rt),Qe.target=xs,Qe.relatedTarget=Xe,dt=null,ti(rt)===Ye&&(aa=new aa(He,Me+"enter",Zt,f,rt),aa.target=Xe,aa.relatedTarget=xs,dt=aa),xs=dt,at&&Zt)t:{for(aa=Og,He=at,Me=Zt,Xe=0,dt=He;dt;dt=aa(dt))Xe++;dt=0;for(var ea=Me;ea;ea=aa(ea))dt++;for(;0<Xe-dt;)He=aa(He),Xe--;for(;0<dt-Xe;)Me=aa(Me),dt--;for(;Xe--;){if(He===Me||Me!==null&&He===Me.alternate){aa=He;break t}He=aa(He),Me=aa(Me)}aa=null}else aa=null;at!==null&&sm(pt,Qe,at,aa,!1),Zt!==null&&xs!==null&&sm(pt,xs,Zt,aa,!0)}}e:{if(Qe=Ye?Eo(Ye):window,at=Qe.nodeName&&Qe.nodeName.toLowerCase(),at==="select"||at==="input"&&Qe.type==="file")var ls=hi;else if(jo(Qe))if(Dd)ls=wf;else{ls=bf;var Xt=tr}else at=Qe.nodeName,!at||at.toLowerCase()!=="input"||Qe.type!=="checkbox"&&Qe.type!=="radio"?Ye&&Ki(Ye.elementType)&&(ls=hi):ls=Ei;if(ls&&(ls=ls(n,Ye))){ad(pt,ls,f,rt);break e}Xt&&Xt(n,Qe,Ye),n==="focusout"&&Ye&&Qe.type==="number"&&Ye.memoizedProps.value!=null&&si(Qe,"number",Qe.value)}switch(Xt=Ye?Eo(Ye):window,n){case"focusin":(jo(Xt)||Xt.contentEditable==="true")&&(yo=Xt,Vh=Ye,gl=null);break;case"focusout":gl=Vh=yo=null;break;case"mousedown":ch=!0;break;case"contextmenu":case"mouseup":case"dragend":ch=!1,vf(pt,f,rt);break;case"selectionchange":if(fh)break;case"keydown":case"keyup":vf(pt,f,rt)}var Qt;if(Bs)e:{switch(n){case"compositionstart":var Na="onCompositionStart";break e;case"compositionend":Na="onCompositionEnd";break e;case"compositionupdate":Na="onCompositionUpdate";break e}Na=void 0}else ri?ml(n,f)&&(Na="onCompositionEnd"):n==="keydown"&&f.keyCode===229&&(Na="onCompositionStart");Na&&(Er&&f.locale!=="ko"&&(ri||Na!=="onCompositionStart"?Na==="onCompositionEnd"&&ri&&(Qt=po()):(Qn=rt,co="value"in Qn?Qn.value:Qn.textContent,ri=!0)),Xt=Bc(Ye,Na),0<Xt.length&&(Na=new Jl(Na,n,null,f,rt),pt.push({event:Na,listeners:Xt}),Qt?Na.data=Qt:(Qt=zd(f),Qt!==null&&(Na.data=Qt)))),(Qt=Gh?mo(n,f):hh(n,f))&&(Na=Bc(Ye,"onBeforeInput"),0<Na.length&&(Xt=new Jl("onBeforeInput","beforeinput",null,f,rt),pt.push({event:Xt,listeners:Na}),Xt.data=Qt)),Wf(pt,n,Ye,f,rt)}vg(pt,i)})}function Zf(n,i,f){return{instance:n,listener:i,currentTarget:f}}function Bc(n,i){for(var f=i+"Capture",b=[];n!==null;){var x=n,S=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||S===null||(x=fo(n,f),x!=null&&b.unshift(Zf(n,x,S)),x=fo(n,i),x!=null&&b.push(Zf(n,x,S))),n.tag===3)return b;n=n.return}return[]}function Og(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function sm(n,i,f,b,x){for(var S=i._reactName,q=[];f!==null&&f!==b;){var se=f,Ae=se.alternate,Ye=se.stateNode;if(se=se.tag,Ae!==null&&Ae===b)break;se!==5&&se!==26&&se!==27||Ye===null||(Ae=Ye,x?(Ye=fo(f,S),Ye!=null&&q.unshift(Zf(f,Ye,Ae))):x||(Ye=fo(f,S),Ye!=null&&q.push(Zf(f,Ye,Ae)))),f=f.return}q.length!==0&&n.push({event:i,listeners:q})}var kg=/\r\n?/g,_g=/\u0000|\uFFFD/g;function Rc(n){return(typeof n=="string"?n:""+n).replace(kg,`
`).replace(_g,"")}function nm(n,i){return i=Rc(i),Rc(n)===i}function hs(n,i,f,b,x,S){switch(f){case"children":typeof b=="string"?i==="body"||i==="textarea"&&b===""||Co(n,b):(typeof b=="number"||typeof b=="bigint")&&i!=="body"&&Co(n,""+b);break;case"className":Va(n,"class",b);break;case"tabIndex":Va(n,"tabindex",b);break;case"dir":case"role":case"viewBox":case"width":case"height":Va(n,f,b);break;case"style":Hh(n,b,S);break;case"data":if(i!=="object"){Va(n,"data",b);break}case"src":case"href":if(b===""&&(i!=="a"||f!=="href")){n.removeAttribute(f);break}if(b==null||typeof b=="function"||typeof b=="symbol"||typeof b=="boolean"){n.removeAttribute(f);break}b=ra(""+b),n.setAttribute(f,b);break;case"action":case"formAction":if(typeof b=="function"){n.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(f==="formAction"?(i!=="input"&&hs(n,i,"name",x.name,x,null),hs(n,i,"formEncType",x.formEncType,x,null),hs(n,i,"formMethod",x.formMethod,x,null),hs(n,i,"formTarget",x.formTarget,x,null)):(hs(n,i,"encType",x.encType,x,null),hs(n,i,"method",x.method,x,null),hs(n,i,"target",x.target,x,null)));if(b==null||typeof b=="symbol"||typeof b=="boolean"){n.removeAttribute(f);break}b=ra(""+b),n.setAttribute(f,b);break;case"onClick":b!=null&&(n.onclick=lo);break;case"onScroll":b!=null&&Ua("scroll",n);break;case"onScrollEnd":b!=null&&Ua("scrollend",n);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(U(61));if(f=b.__html,f!=null){if(x.children!=null)throw Error(U(60));n.innerHTML=f}}break;case"multiple":n.multiple=b&&typeof b!="function"&&typeof b!="symbol";break;case"muted":n.muted=b&&typeof b!="function"&&typeof b!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(b==null||typeof b=="function"||typeof b=="boolean"||typeof b=="symbol"){n.removeAttribute("xlink:href");break}f=ra(""+b),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":b!=null&&typeof b!="function"&&typeof b!="symbol"?n.setAttribute(f,""+b):n.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":b&&typeof b!="function"&&typeof b!="symbol"?n.setAttribute(f,""):n.removeAttribute(f);break;case"capture":case"download":b===!0?n.setAttribute(f,""):b!==!1&&b!=null&&typeof b!="function"&&typeof b!="symbol"?n.setAttribute(f,b):n.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":b!=null&&typeof b!="function"&&typeof b!="symbol"&&!isNaN(b)&&1<=b?n.setAttribute(f,b):n.removeAttribute(f);break;case"rowSpan":case"start":b==null||typeof b=="function"||typeof b=="symbol"||isNaN(b)?n.removeAttribute(f):n.setAttribute(f,b);break;case"popover":Ua("beforetoggle",n),Ua("toggle",n),za(n,"popover",b);break;case"xlinkActuate":Kn(n,"http://www.w3.org/1999/xlink","xlink:actuate",b);break;case"xlinkArcrole":Kn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",b);break;case"xlinkRole":Kn(n,"http://www.w3.org/1999/xlink","xlink:role",b);break;case"xlinkShow":Kn(n,"http://www.w3.org/1999/xlink","xlink:show",b);break;case"xlinkTitle":Kn(n,"http://www.w3.org/1999/xlink","xlink:title",b);break;case"xlinkType":Kn(n,"http://www.w3.org/1999/xlink","xlink:type",b);break;case"xmlBase":Kn(n,"http://www.w3.org/XML/1998/namespace","xml:base",b);break;case"xmlLang":Kn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",b);break;case"xmlSpace":Kn(n,"http://www.w3.org/XML/1998/namespace","xml:space",b);break;case"is":za(n,"is",b);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=oi.get(f)||f,za(n,f,b))}}function Xp(n,i,f,b,x,S){switch(f){case"style":Hh(n,b,S);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(U(61));if(f=b.__html,f!=null){if(x.children!=null)throw Error(U(60));n.innerHTML=f}}break;case"children":typeof b=="string"?Co(n,b):(typeof b=="number"||typeof b=="bigint")&&Co(n,""+b);break;case"onScroll":b!=null&&Ua("scroll",n);break;case"onScrollEnd":b!=null&&Ua("scrollend",n);break;case"onClick":b!=null&&(n.onclick=lo);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Hn.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(x=f.endsWith("Capture"),i=f.slice(2,x?f.length-7:void 0),S=n[wt]||null,S=S!=null?S[f]:null,typeof S=="function"&&n.removeEventListener(i,S,x),typeof b=="function")){typeof S!="function"&&S!==null&&(f in n?n[f]=null:n.hasAttribute(f)&&n.removeAttribute(f)),n.addEventListener(i,b,x);break e}f in n?n[f]=b:b===!0?n.setAttribute(f,""):za(n,f,b)}}}function io(n,i,f){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ua("error",n),Ua("load",n);var b=!1,x=!1,S;for(S in f)if(f.hasOwnProperty(S)){var q=f[S];if(q!=null)switch(S){case"src":b=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(U(137,i));default:hs(n,i,S,q,f,null)}}x&&hs(n,i,"srcSet",f.srcSet,f,null),b&&hs(n,i,"src",f.src,f,null);return;case"input":Ua("invalid",n);var se=S=q=x=null,Ae=null,Ye=null;for(b in f)if(f.hasOwnProperty(b)){var rt=f[b];if(rt!=null)switch(b){case"name":x=rt;break;case"type":q=rt;break;case"checked":Ae=rt;break;case"defaultChecked":Ye=rt;break;case"value":S=rt;break;case"defaultValue":se=rt;break;case"children":case"dangerouslySetInnerHTML":if(rt!=null)throw Error(U(137,i));break;default:hs(n,i,b,rt,f,null)}}sh(n,S,se,Ae,Ye,q,x,!1);return;case"select":Ua("invalid",n),b=q=S=null;for(x in f)if(f.hasOwnProperty(x)&&(se=f[x],se!=null))switch(x){case"value":S=se;break;case"defaultValue":q=se;break;case"multiple":b=se;default:hs(n,i,x,se,f,null)}i=S,f=q,n.multiple=!!b,i!=null?cs(n,!!b,i,!1):f!=null&&cs(n,!!b,f,!0);return;case"textarea":Ua("invalid",n),S=x=b=null;for(q in f)if(f.hasOwnProperty(q)&&(se=f[q],se!=null))switch(q){case"value":b=se;break;case"defaultValue":x=se;break;case"children":S=se;break;case"dangerouslySetInnerHTML":if(se!=null)throw Error(U(91));break;default:hs(n,i,q,se,f,null)}Ai(n,b,x,S);return;case"option":for(Ae in f)f.hasOwnProperty(Ae)&&(b=f[Ae],b!=null)&&(Ae==="selected"?n.selected=b&&typeof b!="function"&&typeof b!="symbol":hs(n,i,Ae,b,f,null));return;case"dialog":Ua("beforetoggle",n),Ua("toggle",n),Ua("cancel",n),Ua("close",n);break;case"iframe":case"object":Ua("load",n);break;case"video":case"audio":for(b=0;b<vd.length;b++)Ua(vd[b],n);break;case"image":Ua("error",n),Ua("load",n);break;case"details":Ua("toggle",n);break;case"embed":case"source":case"link":Ua("error",n),Ua("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ye in f)if(f.hasOwnProperty(Ye)&&(b=f[Ye],b!=null))switch(Ye){case"children":case"dangerouslySetInnerHTML":throw Error(U(137,i));default:hs(n,i,Ye,b,f,null)}return;default:if(Ki(i)){for(rt in f)f.hasOwnProperty(rt)&&(b=f[rt],b!==void 0&&Xp(n,i,rt,b,f,void 0));return}}for(se in f)f.hasOwnProperty(se)&&(b=f[se],b!=null&&hs(n,i,se,b,f,null))}function Ig(n,i,f,b){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,S=null,q=null,se=null,Ae=null,Ye=null,rt=null;for(at in f){var pt=f[at];if(f.hasOwnProperty(at)&&pt!=null)switch(at){case"checked":break;case"value":break;case"defaultValue":Ae=pt;default:b.hasOwnProperty(at)||hs(n,i,at,null,b,pt)}}for(var Qe in b){var at=b[Qe];if(pt=f[Qe],b.hasOwnProperty(Qe)&&(at!=null||pt!=null))switch(Qe){case"type":S=at;break;case"name":x=at;break;case"checked":Ye=at;break;case"defaultChecked":rt=at;break;case"value":q=at;break;case"defaultValue":se=at;break;case"children":case"dangerouslySetInnerHTML":if(at!=null)throw Error(U(137,i));break;default:at!==pt&&hs(n,i,Qe,at,b,pt)}}hl(n,q,se,Ae,Ye,rt,S,x);return;case"select":at=q=se=Qe=null;for(S in f)if(Ae=f[S],f.hasOwnProperty(S)&&Ae!=null)switch(S){case"value":break;case"multiple":at=Ae;default:b.hasOwnProperty(S)||hs(n,i,S,null,b,Ae)}for(x in b)if(S=b[x],Ae=f[x],b.hasOwnProperty(x)&&(S!=null||Ae!=null))switch(x){case"value":Qe=S;break;case"defaultValue":se=S;break;case"multiple":q=S;default:S!==Ae&&hs(n,i,x,S,b,Ae)}i=se,f=q,b=at,Qe!=null?cs(n,!!f,Qe,!1):!!b!=!!f&&(i!=null?cs(n,!!f,i,!0):cs(n,!!f,f?[]:"",!1));return;case"textarea":at=Qe=null;for(se in f)if(x=f[se],f.hasOwnProperty(se)&&x!=null&&!b.hasOwnProperty(se))switch(se){case"value":break;case"children":break;default:hs(n,i,se,null,b,x)}for(q in b)if(x=b[q],S=f[q],b.hasOwnProperty(q)&&(x!=null||S!=null))switch(q){case"value":Qe=x;break;case"defaultValue":at=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(U(91));break;default:x!==S&&hs(n,i,q,x,b,S)}Ir(n,Qe,at);return;case"option":for(var Zt in f)Qe=f[Zt],f.hasOwnProperty(Zt)&&Qe!=null&&!b.hasOwnProperty(Zt)&&(Zt==="selected"?n.selected=!1:hs(n,i,Zt,null,b,Qe));for(Ae in b)Qe=b[Ae],at=f[Ae],b.hasOwnProperty(Ae)&&Qe!==at&&(Qe!=null||at!=null)&&(Ae==="selected"?n.selected=Qe&&typeof Qe!="function"&&typeof Qe!="symbol":hs(n,i,Ae,Qe,b,at));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var aa in f)Qe=f[aa],f.hasOwnProperty(aa)&&Qe!=null&&!b.hasOwnProperty(aa)&&hs(n,i,aa,null,b,Qe);for(Ye in b)if(Qe=b[Ye],at=f[Ye],b.hasOwnProperty(Ye)&&Qe!==at&&(Qe!=null||at!=null))switch(Ye){case"children":case"dangerouslySetInnerHTML":if(Qe!=null)throw Error(U(137,i));break;default:hs(n,i,Ye,Qe,b,at)}return;default:if(Ki(i)){for(var xs in f)Qe=f[xs],f.hasOwnProperty(xs)&&Qe!==void 0&&!b.hasOwnProperty(xs)&&Xp(n,i,xs,void 0,b,Qe);for(rt in b)Qe=b[rt],at=f[rt],!b.hasOwnProperty(rt)||Qe===at||Qe===void 0&&at===void 0||Xp(n,i,rt,Qe,b,at);return}}for(var He in f)Qe=f[He],f.hasOwnProperty(He)&&Qe!=null&&!b.hasOwnProperty(He)&&hs(n,i,He,null,b,Qe);for(pt in b)Qe=b[pt],at=f[pt],!b.hasOwnProperty(pt)||Qe===at||Qe==null&&at==null||hs(n,i,pt,Qe,b,at)}function Wi(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Xf(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,f=performance.getEntriesByType("resource"),b=0;b<f.length;b++){var x=f[b],S=x.transferSize,q=x.initiatorType,se=x.duration;if(S&&se&&Wi(q)){for(q=0,se=x.responseEnd,b+=1;b<f.length;b++){var Ae=f[b],Ye=Ae.startTime;if(Ye>se)break;var rt=Ae.transferSize,pt=Ae.initiatorType;rt&&Wi(pt)&&(Ae=Ae.responseEnd,q+=rt*(Ae<se?1:(se-Ye)/(Ae-Ye)))}if(--b,i+=8*(S+q)/(x.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Hc=null,om=null;function Nc(n){return n.nodeType===9?n:n.ownerDocument}function Od(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function im(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function Yp(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var kd=null;function $p(){var n=window.event;return n&&n.type==="popstate"?n===kd?!1:(kd=n,!0):(kd=null,!1)}var Kp=typeof setTimeout=="function"?setTimeout:void 0,rm=typeof clearTimeout=="function"?clearTimeout:void 0,hm=typeof Promise=="function"?Promise:void 0,lm=typeof queueMicrotask=="function"?queueMicrotask:typeof hm!="undefined"?function(n){return hm.resolve(null).then(n).catch(dm)}:Kp;function dm(n){setTimeout(function(){throw n})}function _d(n){return n==="head"}function xg(n,i){var f=i,b=0;do{var x=f.nextSibling;if(n.removeChild(f),x&&x.nodeType===8)if(f=x.data,f==="/$"||f==="/&"){if(b===0){n.removeChild(x),Pd(i);return}b--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")b++;else if(f==="html")Yf(n.ownerDocument.documentElement);else if(f==="head"){f=n.ownerDocument.head,Yf(f);for(var S=f.firstChild;S;){var q=S.nextSibling,se=S.nodeName;S[oa]||se==="SCRIPT"||se==="STYLE"||se==="LINK"&&S.rel.toLowerCase()==="stylesheet"||f.removeChild(S),S=q}}else f==="body"&&Yf(n.ownerDocument.body);f=x}while(f);Pd(i)}function Ta(n,i){var f=n;n=0;do{var b=f.nextSibling;if(f.nodeType===1?i?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(i?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),b&&b.nodeType===8)if(f=b.data,f==="/$"){if(n===0)break;n--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||n++;f=b}while(f)}function Eh(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var f=i;switch(i=i.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":Eh(f),eh(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}n.removeChild(f)}}function xo(n,i,f,b){for(;n.nodeType===1;){var x=f;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!b&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(b){if(!n[oa])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(S=n.getAttribute("rel"),S==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(S!==x.rel||n.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||n.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||n.getAttribute("title")!==(x.title==null?null:x.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(S=n.getAttribute("src"),(S!==(x.src==null?null:x.src)||n.getAttribute("type")!==(x.type==null?null:x.type)||n.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&S&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var S=x.name==null?null:""+x.name;if(x.type==="hidden"&&n.getAttribute("name")===S)return n}else return n;if(n=br(n.nextSibling),n===null)break}return null}function Ch(n,i,f){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!f||(n=br(n.nextSibling),n===null))return null;return n}function Id(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=br(n.nextSibling),n===null))return null;return n}function Yo(n){return n.data==="$?"||n.data==="$~"}function kn(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function Vn(n,i){var f=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||f.readyState!=="loading")i();else{var b=function(){i(),f.removeEventListener("DOMContentLoaded",b)};f.addEventListener("DOMContentLoaded",b),n._reactRetry=b}}function br(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var vi=null;function Wn(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var f=n.data;if(f==="/$"||f==="/&"){if(i===0)return br(n.nextSibling);i--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||i++}n=n.nextSibling}return null}function Gc(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var f=n.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(i===0)return n;i--}else f!=="/$"&&f!=="/&"||i++}n=n.previousSibling}return null}function Tg(n,i,f){switch(i=Nc(f),n){case"html":if(n=i.documentElement,!n)throw Error(U(452));return n;case"head":if(n=i.head,!n)throw Error(U(453));return n;case"body":if(n=i.body,!n)throw Error(U(454));return n;default:throw Error(U(451))}}function Yf(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);eh(n)}var To=new Map,hf=new Set;function Qp(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var nl=It.d;It.d={f:Ag,r:Sg,D:cm,C:$o,L:Mh,m:Ko,X:Jp,S:Td,M:pm};function Ag(){var n=nl.f(),i=Mc();return n||i}function Sg(n){var i=Yi(n);i!==null&&i.tag===5&&i.type==="form"?Gn(i):nl.r(n)}var xd=typeof document=="undefined"?null:document;function fm(n,i,f){var b=xd;if(b&&typeof i=="string"&&i){var x=ys(i);x='link[rel="'+n+'"][href="'+x+'"]',typeof f=="string"&&(x+='[crossorigin="'+f+'"]'),hf.has(x)||(hf.add(x),n={rel:n,crossOrigin:f,href:i},b.querySelector(x)===null&&(i=b.createElement("link"),io(i,"link",n),zs(i),b.head.appendChild(i)))}}function cm(n){nl.D(n),fm("dns-prefetch",n,null)}function $o(n,i){nl.C(n,i),fm("preconnect",n,i)}function Mh(n,i,f){nl.L(n,i,f);var b=xd;if(b&&n&&i){var x='link[rel="preload"][as="'+ys(i)+'"]';i==="image"&&f&&f.imageSrcSet?(x+='[imagesrcset="'+ys(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(x+='[imagesizes="'+ys(f.imageSizes)+'"]')):x+='[href="'+ys(n)+'"]';var S=x;switch(i){case"style":S=lf(n);break;case"script":S=Gl(n)}To.has(S)||(n=Ce({rel:"preload",href:i==="image"&&f&&f.imageSrcSet?void 0:n,as:i},f),To.set(S,n),b.querySelector(x)!==null||i==="style"&&b.querySelector($f(S))||i==="script"&&b.querySelector(Kf(S))||(i=b.createElement("link"),io(i,"link",n),zs(i),b.head.appendChild(i)))}}function Ko(n,i){nl.m(n,i);var f=xd;if(f&&n){var b=i&&typeof i.as=="string"?i.as:"script",x='link[rel="modulepreload"][as="'+ys(b)+'"][href="'+ys(n)+'"]',S=x;switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=Gl(n)}if(!To.has(S)&&(n=Ce({rel:"modulepreload",href:n},i),To.set(S,n),f.querySelector(x)===null)){switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(Kf(S)))return}b=f.createElement("link"),io(b,"link",n),zs(b),f.head.appendChild(b)}}}function Td(n,i,f){nl.S(n,i,f);var b=xd;if(b&&n){var x=xi(b).hoistableStyles,S=lf(n);i=i||"default";var q=x.get(S);if(!q){var se={loading:0,preload:null};if(q=b.querySelector($f(S)))se.loading=5;else{n=Ce({rel:"stylesheet",href:n,"data-precedence":i},f),(f=To.get(S))&&Fc(n,f);var Ae=q=b.createElement("link");zs(Ae),io(Ae,"link",n),Ae._p=new Promise(function(Ye,rt){Ae.onload=Ye,Ae.onerror=rt}),Ae.addEventListener("load",function(){se.loading|=1}),Ae.addEventListener("error",function(){se.loading|=2}),se.loading|=4,Fl(q,i,b)}q={type:"stylesheet",instance:q,count:1,state:se},x.set(S,q)}}}function Jp(n,i){nl.X(n,i);var f=xd;if(f&&n){var b=xi(f).hoistableScripts,x=Gl(n),S=b.get(x);S||(S=f.querySelector(Kf(x)),S||(n=Ce({src:n,async:!0},i),(i=To.get(x))&&eu(n,i),S=f.createElement("script"),zs(S),io(S,"link",n),f.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},b.set(x,S))}}function pm(n,i){nl.M(n,i);var f=xd;if(f&&n){var b=xi(f).hoistableScripts,x=Gl(n),S=b.get(x);S||(S=f.querySelector(Kf(x)),S||(n=Ce({src:n,async:!0,type:"module"},i),(i=To.get(x))&&eu(n,i),S=f.createElement("script"),zs(S),io(S,"link",n),f.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},b.set(x,S))}}function um(n,i,f,b){var x=(x=Ht.current)?Qp(x):null;if(!x)throw Error(U(446));switch(n){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(i=lf(f.href),f=xi(x).hoistableStyles,b=f.get(i),b||(b={type:"style",instance:null,count:0,state:null},f.set(i,b)),b):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){n=lf(f.href);var S=xi(x).hoistableStyles,q=S.get(n);if(q||(x=x.ownerDocument||x,q={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(n,q),(S=x.querySelector($f(n)))&&!S._p&&(q.instance=S,q.state.loading=5),To.has(n)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},To.set(n,f),S||gm(x,n,f,q.state))),i&&b===null)throw Error(U(528,""));return q}if(i&&b!==null)throw Error(U(529,""));return null;case"script":return i=f.async,f=f.src,typeof f=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Gl(f),f=xi(x).hoistableScripts,b=f.get(i),b||(b={type:"script",instance:null,count:0,state:null},f.set(i,b)),b):{type:"void",instance:null,count:0,state:null};default:throw Error(U(444,n))}}function lf(n){return'href="'+ys(n)+'"'}function $f(n){return'link[rel="stylesheet"]['+n+"]"}function mm(n){return Ce({},n,{"data-precedence":n.precedence,precedence:null})}function gm(n,i,f,b){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?b.loading=1:(i=n.createElement("link"),b.preload=i,i.addEventListener("load",function(){return b.loading|=1}),i.addEventListener("error",function(){return b.loading|=2}),io(i,"link",f),zs(i),n.head.appendChild(i))}function Gl(n){return'[src="'+ys(n)+'"]'}function Kf(n){return"script[async]"+n}function ym(n,i,f){if(i.count++,i.instance===null)switch(i.type){case"style":var b=n.querySelector('style[data-href~="'+ys(f.href)+'"]');if(b)return i.instance=b,zs(b),b;var x=Ce({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return b=(n.ownerDocument||n).createElement("style"),zs(b),io(b,"style",x),Fl(b,f.precedence,n),i.instance=b;case"stylesheet":x=lf(f.href);var S=n.querySelector($f(x));if(S)return i.state.loading|=4,i.instance=S,zs(S),S;b=mm(f),(x=To.get(x))&&Fc(b,x),S=(n.ownerDocument||n).createElement("link"),zs(S);var q=S;return q._p=new Promise(function(se,Ae){q.onload=se,q.onerror=Ae}),io(S,"link",b),i.state.loading|=4,Fl(S,f.precedence,n),i.instance=S;case"script":return S=Gl(f.src),(x=n.querySelector(Kf(S)))?(i.instance=x,zs(x),x):(b=f,(x=To.get(S))&&(b=Ce({},f),eu(b,x)),n=n.ownerDocument||n,x=n.createElement("script"),zs(x),io(x,"link",b),n.head.appendChild(x),i.instance=x);case"void":return null;default:throw Error(U(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(b=i.instance,i.state.loading|=4,Fl(b,f.precedence,n));return i.instance}function Fl(n,i,f){for(var b=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=b.length?b[b.length-1]:null,S=x,q=0;q<b.length;q++){var se=b[q];if(se.dataset.precedence===i)S=se;else if(S!==x)break}S?S.parentNode.insertBefore(n,S.nextSibling):(i=f.nodeType===9?f.head:f,i.insertBefore(n,i.firstChild))}function Fc(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function eu(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var tu=null;function bm(n,i,f){if(tu===null){var b=new Map,x=tu=new Map;x.set(f,b)}else x=tu,b=x.get(f),b||(b=new Map,x.set(f,b));if(b.has(n))return b;for(b.set(n,null),f=f.getElementsByTagName(n),x=0;x<f.length;x++){var S=f[x];if(!(S[oa]||S[ts]||n==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var q=S.getAttribute(i)||"";q=n+q;var se=b.get(q);se?se.push(S):b.set(q,[S])}}return b}function jc(n,i,f){n=n.ownerDocument||n,n.head.insertBefore(f,i==="title"?n.querySelector("head > title"):null)}function au(n,i,f){if(f===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(n=i.disabled,typeof i.precedence=="string"&&n==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Uc(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function wm(n,i,f,b){if(f.type==="stylesheet"&&(typeof b.media!="string"||matchMedia(b.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var x=lf(b.href),S=i.querySelector($f(x));if(S){i=S._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=Vc.bind(n),i.then(n,n)),f.state.loading|=4,f.instance=S,zs(S);return}S=i.ownerDocument||i,b=mm(b),(x=To.get(x))&&Fc(b,x),S=S.createElement("link"),zs(S);var q=S;q._p=new Promise(function(se,Ae){q.onload=se,q.onerror=Ae}),io(S,"link",b),f.instance=S}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(f,i),(i=f.state.preload)&&(f.state.loading&3)===0&&(n.count++,f=Vc.bind(n),i.addEventListener("load",f),i.addEventListener("error",f))}}var qc=0;function vm(n,i){return n.stylesheets&&n.count===0&&Zc(n,n.stylesheets),0<n.count||0<n.imgCount?function(f){var b=setTimeout(function(){if(n.stylesheets&&Zc(n,n.stylesheets),n.unsuspend){var S=n.unsuspend;n.unsuspend=null,S()}},6e4+i);0<n.imgBytes&&qc===0&&(qc=62500*Xf());var x=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Zc(n,n.stylesheets),n.unsuspend)){var S=n.unsuspend;n.unsuspend=null,S()}},(n.imgBytes>qc?50:800)+i);return n.unsuspend=f,function(){n.unsuspend=null,clearTimeout(b),clearTimeout(x)}}:null}function Vc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Zc(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Wc=null;function Zc(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Wc=new Map,i.forEach(Pg,n),Wc=null,Vc.call(n))}function Pg(n,i){if(!(i.state.loading&4)){var f=Wc.get(n);if(f)var b=f.get(null);else{f=new Map,Wc.set(n,f);for(var x=n.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<x.length;S++){var q=x[S];(q.nodeName==="LINK"||q.getAttribute("media")!=="not all")&&(f.set(q.dataset.precedence,q),b=q)}b&&f.set(null,b)}x=i.instance,q=x.getAttribute("data-precedence"),S=f.get(q)||b,S===b&&f.set(null,x),f.set(q,x),this.count++,b=Vc.bind(this),x.addEventListener("load",b),x.addEventListener("error",b),S?S.parentNode.insertBefore(x,S.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(x,n.firstChild)),i.state.loading|=4}}var Qf={$$typeof:mt,Provider:null,Consumer:null,_currentValue:gt,_currentValue2:gt,_threadCount:0};function vy(n,i,f,b,x,S,q,se,Ae){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=dn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dn(0),this.hiddenUpdates=dn(null),this.identifierPrefix=b,this.onUncaughtError=x,this.onCaughtError=S,this.onRecoverableError=q,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ae,this.incompleteTransitions=new Map}function Om(n,i,f,b,x,S,q,se,Ae,Ye,rt,pt){return n=new vy(n,i,f,q,Ae,Ye,rt,pt,se),i=1,S===!0&&(i|=24),S=wo(3,null,null,i),n.current=S,S.stateNode=n,i=Gr(),i.refCount++,n.pooledCache=i,i.refCount++,S.memoizedState={element:b,isDehydrated:f,cache:i},Pf(S),n}function Eg(n){return n?(n=ha,n):ha}function Cg(n,i,f,b,x,S){x=Eg(x),b.context===null?b.context=x:b.pendingContext=x,b=Vr(i),b.payload={element:f},S=S===void 0?null:S,S!==null&&(b.callback=S),f=vh(n,b,i),f!==null&&(Vi(f,n,i),Bi(f,n,i))}function su(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var f=n.retryLane;n.retryLane=f!==0&&f<i?f:i}}function nu(n,i){su(n,i),(n=n.alternate)&&su(n,i)}function Mg(n){if(n.tag===13||n.tag===31){var i=to(n,67108864);i!==null&&Vi(i,n,67108864),nu(n,67108864)}}function Lg(n){if(n.tag===13||n.tag===31){var i=qi();i=Rn(i);var f=to(n,i);f!==null&&Vi(f,n,i),nu(n,i)}}var Xc=!0;function Yc(n,i,f,b){var x=Je.T;Je.T=null;var S=It.p;try{It.p=2,km(n,i,f,b)}finally{It.p=S,Je.T=x}}function zg(n,i,f,b){var x=Je.T;Je.T=null;var S=It.p;try{It.p=8,km(n,i,f,b)}finally{It.p=S,Je.T=x}}function km(n,i,f,b){if(Xc){var x=$c(b);if(x===null)sl(n,i,b,Jf,f),Dg(n,b);else if(ky(x,n,i,f,b))b.stopPropagation();else if(Dg(n,b),i&4&&-1<Oy.indexOf(n)){for(;x!==null;){var S=Yi(x);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var q=Ne(S.pendingLanes);if(q!==0){var se=S;for(se.pendingLanes|=2,se.entangledLanes|=2;q;){var Ae=1<<31-nt(q);se.entanglements[1]|=Ae,q&=~Ae}Ph(S),(ms&6)===0&&(Ec=wn()+500,yr(0))}}break;case 31:case 13:se=to(S,2),se!==null&&Vi(se,S,2),Mc(),nu(S,2)}if(S=$c(b),S===null&&sl(n,i,b,Jf,f),S===x)break;x=S}x!==null&&b.stopPropagation()}else sl(n,i,b,null,f)}}function $c(n){return n=nh(n),ou(n)}var Jf=null;function ou(n){if(Jf=null,n=ti(n),n!==null){var i=he(n);if(i===null)n=null;else{var f=i.tag;if(f===13){if(n=E(i),n!==null)return n;n=null}else if(f===31){if(n=c(i),n!==null)return n;n=null}else if(f===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Jf=n,null}function df(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ro()){case Re:return 2;case K:return 8;case $:case ne:return 32;case Oe:return 268435456;default:return 32}default:return 32}}var iu=!1,Ad=null,Kr=null,Sd=null,Kc=new Map,ec=new Map,jl=[],Oy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Dg(n,i){switch(n){case"focusin":case"focusout":Ad=null;break;case"dragenter":case"dragleave":Kr=null;break;case"mouseover":case"mouseout":Sd=null;break;case"pointerover":case"pointerout":Kc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":ec.delete(i.pointerId)}}function Qc(n,i,f,b,x,S){return n===null||n.nativeEvent!==S?(n={blockedOn:i,domEventName:f,eventSystemFlags:b,nativeEvent:S,targetContainers:[x]},i!==null&&(i=Yi(i),i!==null&&Mg(i)),n):(n.eventSystemFlags|=b,i=n.targetContainers,x!==null&&i.indexOf(x)===-1&&i.push(x),n)}function ky(n,i,f,b,x){switch(i){case"focusin":return Ad=Qc(Ad,n,i,f,b,x),!0;case"dragenter":return Kr=Qc(Kr,n,i,f,b,x),!0;case"mouseover":return Sd=Qc(Sd,n,i,f,b,x),!0;case"pointerover":var S=x.pointerId;return Kc.set(S,Qc(Kc.get(S)||null,n,i,f,b,x)),!0;case"gotpointercapture":return S=x.pointerId,ec.set(S,Qc(ec.get(S)||null,n,i,f,b,x)),!0}return!1}function Bg(n){var i=ti(n.target);if(i!==null){var f=he(i);if(f!==null){if(i=f.tag,i===13){if(i=E(f),i!==null){n.blockedOn=i,Sn(n.priority,function(){Lg(f)});return}}else if(i===31){if(i=c(f),i!==null){n.blockedOn=i,Sn(n.priority,function(){Lg(f)});return}}else if(i===3&&f.stateNode.current.memoizedState.isDehydrated){n.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Jc(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var f=$c(n.nativeEvent);if(f===null){f=n.nativeEvent;var b=new f.constructor(f.type,f);Kl=b,f.target.dispatchEvent(b),Kl=null}else return i=Yi(f),i!==null&&Mg(i),n.blockedOn=f,!1;i.shift()}return!0}function Rg(n,i,f){Jc(n)&&f.delete(i)}function ep(){iu=!1,Ad!==null&&Jc(Ad)&&(Ad=null),Kr!==null&&Jc(Kr)&&(Kr=null),Sd!==null&&Jc(Sd)&&(Sd=null),Kc.forEach(Rg),ec.forEach(Rg)}function ru(n,i){n.blockedOn===i&&(n.blockedOn=null,iu||(iu=!0,B.unstable_scheduleCallback(B.unstable_NormalPriority,ep)))}var hu=null;function Hg(n){hu!==n&&(hu=n,B.unstable_scheduleCallback(B.unstable_NormalPriority,function(){hu===n&&(hu=null);for(var i=0;i<n.length;i+=3){var f=n[i],b=n[i+1],x=n[i+2];if(typeof b!="function"){if(ou(b||f)===null)continue;break}var S=Yi(f);S!==null&&(n.splice(i,3),i-=3,Ks(S,{pending:!0,data:x,method:f.method,action:b},b,x))}}))}function Pd(n){function i(Ae){return ru(Ae,n)}Ad!==null&&ru(Ad,n),Kr!==null&&ru(Kr,n),Sd!==null&&ru(Sd,n),Kc.forEach(i),ec.forEach(i);for(var f=0;f<jl.length;f++){var b=jl[f];b.blockedOn===n&&(b.blockedOn=null)}for(;0<jl.length&&(f=jl[0],f.blockedOn===null);)Bg(f),f.blockedOn===null&&jl.shift();if(f=(n.ownerDocument||n).$$reactFormReplay,f!=null)for(b=0;b<f.length;b+=3){var x=f[b],S=f[b+1],q=x[wt]||null;if(typeof S=="function")q||Hg(f);else if(q){var se=null;if(S&&S.hasAttribute("formAction")){if(x=S,q=S[wt]||null)se=q.formAction;else if(ou(x)!==null)continue}else se=q.action;typeof se=="function"?f[b+1]=se:(f.splice(b,3),b-=3),Hg(f)}}}function _m(){function n(S){S.canIntercept&&S.info==="react-transition"&&S.intercept({handler:function(){return new Promise(function(q){return x=q})},focusReset:"manual",scroll:"manual"})}function i(){x!==null&&(x(),x=null),b||setTimeout(f,20)}function f(){if(!b&&!navigation.transition){var S=navigation.currentEntry;S&&S.url!=null&&navigation.navigate(S.url,{state:S.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var b=!1,x=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(f,100),function(){b=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),x!==null&&(x(),x=null)}}}function Im(n){this._internalRoot=n}lu.prototype.render=Im.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(U(409));var f=i.current,b=qi();Cg(f,b,n,i,null,null)},lu.prototype.unmount=Im.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;Cg(n.current,2,null,n,null,null),Mc(),i[na]=null}};function lu(n){this._internalRoot=n}lu.prototype.unstable_scheduleHydration=function(n){if(n){var i=An();n={blockedOn:null,target:n,priority:i};for(var f=0;f<jl.length&&i!==0&&i<jl[f].priority;f++);jl.splice(f,0,n),f===0&&Bg(n)}};var xm=Y.version;if(xm!=="19.2.3")throw Error(U(527,xm,"19.2.3"));It.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(U(188)):(n=Object.keys(n).join(","),Error(U(268,n)));return n=fe(i),n=n!==null?Le(n):null,n=n===null?null:n.stateNode,n};var Ng={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:Je,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var du=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!du.isDisabled&&du.supportsFiber)try{ze=du.inject(Ng),Se=du}catch(n){}}return yu.createRoot=function(n,i){if(!J(n))throw Error(U(299));var f=!1,b="",x=Lf,S=xh,q=Th;return i!=null&&(i.unstable_strictMode===!0&&(f=!0),i.identifierPrefix!==void 0&&(b=i.identifierPrefix),i.onUncaughtError!==void 0&&(x=i.onUncaughtError),i.onCaughtError!==void 0&&(S=i.onCaughtError),i.onRecoverableError!==void 0&&(q=i.onRecoverableError)),i=Om(n,1,!1,null,null,f,b,null,x,S,q,_m),n[na]=i.current,am(n),new Im(i)},yu.hydrateRoot=function(n,i,f){if(!J(n))throw Error(U(299));var b=!1,x="",S=Lf,q=xh,se=Th,Ae=null;return f!=null&&(f.unstable_strictMode===!0&&(b=!0),f.identifierPrefix!==void 0&&(x=f.identifierPrefix),f.onUncaughtError!==void 0&&(S=f.onUncaughtError),f.onCaughtError!==void 0&&(q=f.onCaughtError),f.onRecoverableError!==void 0&&(se=f.onRecoverableError),f.formState!==void 0&&(Ae=f.formState)),i=Om(n,1,!0,i,f!=null?f:null,b,x,Ae,S,q,se,_m),i.context=Eg(null),f=i.current,b=qi(),b=Rn(b),x=Vr(b),x.callback=null,vh(f,x,b),f=b,i.current.lanes=f,qa(i,f),Ph(i),n[na]=i.current,am(n),new lu(i)},yu.version="19.2.3",yu}var Fy;function eb(){if(Fy)return Wg.exports;Fy=1;function B(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(B)}catch(Y){console.error(Y)}}return B(),Wg.exports=J1(),Wg.exports}var tb=eb();const ab=hn(tb);var jy="popstate";function sb(B={}){function Y(J,he){let{pathname:E="/",search:c="",hash:re=""}=sc(J.location.hash.substring(1));return!E.startsWith("/")&&!E.startsWith(".")&&(E="/"+E),$g("",{pathname:E,search:c,hash:re},he.state&&he.state.usr||null,he.state&&he.state.key||"default")}function N(J,he){let E=J.document.querySelector("base"),c="";if(E&&E.getAttribute("href")){let re=J.location.href,fe=re.indexOf("#");c=fe===-1?re:re.slice(0,fe)}return c+"#"+(typeof he=="string"?he:bu(he))}function U(J,he){zh(J.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(he)})`)}return ob(Y,N,U,B)}function In(B,Y){if(B===!1||B===null||typeof B=="undefined")throw new Error(Y)}function zh(B,Y){if(!B){typeof console!="undefined"&&console.warn(Y);try{throw new Error(Y)}catch(N){}}}function nb(){return Math.random().toString(36).substring(2,10)}function Uy(B,Y){return{usr:B.state,key:B.key,idx:Y}}function $g(B,Y,N=null,U){return Or(rn({pathname:typeof B=="string"?B:B.pathname,search:"",hash:""},typeof Y=="string"?sc(Y):Y),{state:N,key:Y&&Y.key||U||nb()})}function bu({pathname:B="/",search:Y="",hash:N=""}){return Y&&Y!=="?"&&(B+=Y.charAt(0)==="?"?Y:"?"+Y),N&&N!=="#"&&(B+=N.charAt(0)==="#"?N:"#"+N),B}function sc(B){let Y={};if(B){let N=B.indexOf("#");N>=0&&(Y.hash=B.substring(N),B=B.substring(0,N));let U=B.indexOf("?");U>=0&&(Y.search=B.substring(U),B=B.substring(0,U)),B&&(Y.pathname=B)}return Y}function ob(B,Y,N,U={}){let{window:J=document.defaultView,v5Compat:he=!1}=U,E=J.history,c="POP",re=null,fe=Le();fe==null&&(fe=0,E.replaceState(Or(rn({},E.state),{idx:fe}),""));function Le(){return(E.state||{idx:null}).idx}function Ce(){c="POP";let Te=Le(),Vt=Te==null?null:Te-fe;fe=Te,re&&re({action:c,location:it.location,delta:Vt})}function Pe(Te,Vt){c="PUSH";let Ft=$g(it.location,Te,Vt);N&&N(Ft,Te),fe=Le()+1;let mt=Uy(Ft,fe),Et=it.createHref(Ft);try{E.pushState(mt,"",Et)}catch($t){if($t instanceof DOMException&&$t.name==="DataCloneError")throw $t;J.location.assign(Et)}he&&re&&re({action:c,location:it.location,delta:1})}function ft(Te,Vt){c="REPLACE";let Ft=$g(it.location,Te,Vt);N&&N(Ft,Te),fe=Le();let mt=Uy(Ft,fe),Et=it.createHref(Ft);E.replaceState(mt,"",Et),he&&re&&re({action:c,location:it.location,delta:0})}function kt(Te){return ib(Te)}let it={get action(){return c},get location(){return B(J,E)},listen(Te){if(re)throw new Error("A history only accepts one active listener");return J.addEventListener(jy,Ce),re=Te,()=>{J.removeEventListener(jy,Ce),re=null}},createHref(Te){return Y(J,Te)},createURL:kt,encodeLocation(Te){let Vt=kt(Te);return{pathname:Vt.pathname,search:Vt.search,hash:Vt.hash}},push:Pe,replace:ft,go(Te){return E.go(Te)}};return it}function ib(B,Y=!1){let N="http://localhost";typeof window!="undefined"&&(N=window.location.origin!=="null"?window.location.origin:window.location.href),In(N,"No window.location.(origin|href) available to create URL");let U=typeof B=="string"?B:bu(B);return U=U.replace(/ $/,"%20"),!Y&&U.startsWith("//")&&(U=N+U),new URL(U,N)}function qy(B,Y,N="/"){return rb(B,Y,N,!1)}function rb(B,Y,N,U){let J=typeof Y=="string"?sc(Y):Y,he=Cd(J.pathname||"/",N);if(he==null)return null;let E=Vy(B);hb(E);let c=null;for(let re=0;c==null&&re<E.length;++re){let fe=wb(he);c=yb(E[re],fe,U)}return c}function Vy(B,Y=[],N=[],U="",J=!1){let he=(E,c,re=J,fe)=>{let Le={relativePath:fe===void 0?E.path||"":fe,caseSensitive:E.caseSensitive===!0,childrenIndex:c,route:E};if(Le.relativePath.startsWith("/")){if(!Le.relativePath.startsWith(U)&&re)return;In(Le.relativePath.startsWith(U),`Absolute route path "${Le.relativePath}" nested under path "${U}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),Le.relativePath=Le.relativePath.slice(U.length)}let Ce=Md([U,Le.relativePath]),Pe=N.concat(Le);E.children&&E.children.length>0&&(In(E.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${Ce}".`),Vy(E.children,Y,Pe,Ce,re)),!(E.path==null&&!E.index)&&Y.push({path:Ce,score:mb(Ce,E.index),routesMeta:Pe})};return B.forEach((E,c)=>{var re;if(E.path===""||!((re=E.path)!=null&&re.includes("?")))he(E,c);else for(let fe of Wy(E.path))he(E,c,!0,fe)}),Y}function Wy(B){let Y=B.split("/");if(Y.length===0)return[];let[N,...U]=Y,J=N.endsWith("?"),he=N.replace(/\?$/,"");if(U.length===0)return J?[he,""]:[he];let E=Wy(U.join("/")),c=[];return c.push(...E.map(re=>re===""?he:[he,re].join("/"))),J&&c.push(...E),c.map(re=>B.startsWith("/")&&re===""?"/":re)}function hb(B){B.sort((Y,N)=>Y.score!==N.score?N.score-Y.score:gb(Y.routesMeta.map(U=>U.childrenIndex),N.routesMeta.map(U=>U.childrenIndex)))}var lb=/^:[\w-]+$/,db=3,fb=2,cb=1,pb=10,ub=-2,Zy=B=>B==="*";function mb(B,Y){let N=B.split("/"),U=N.length;return N.some(Zy)&&(U+=ub),Y&&(U+=fb),N.filter(J=>!Zy(J)).reduce((J,he)=>J+(lb.test(he)?db:he===""?cb:pb),U)}function gb(B,Y){return B.length===Y.length&&B.slice(0,-1).every((U,J)=>U===Y[J])?B[B.length-1]-Y[Y.length-1]:0}function yb(B,Y,N=!1){let{routesMeta:U}=B,J={},he="/",E=[];for(let c=0;c<U.length;++c){let re=U[c],fe=c===U.length-1,Le=he==="/"?Y:Y.slice(he.length)||"/",Ce=Cm({path:re.relativePath,caseSensitive:re.caseSensitive,end:fe},Le),Pe=re.route;if(!Ce&&fe&&N&&!U[U.length-1].route.index&&(Ce=Cm({path:re.relativePath,caseSensitive:re.caseSensitive,end:!1},Le)),!Ce)return null;Object.assign(J,Ce.params),E.push({params:J,pathname:Md([he,Ce.pathname]),pathnameBase:_b(Md([he,Ce.pathnameBase])),route:Pe}),Ce.pathnameBase!=="/"&&(he=Md([he,Ce.pathnameBase]))}return E}function Cm(B,Y){typeof B=="string"&&(B={path:B,caseSensitive:!1,end:!0});let[N,U]=bb(B.path,B.caseSensitive,B.end),J=Y.match(N);if(!J)return null;let he=J[0],E=he.replace(/(.)\/+$/,"$1"),c=J.slice(1);return{params:U.reduce((fe,{paramName:Le,isOptional:Ce},Pe)=>{if(Le==="*"){let kt=c[Pe]||"";E=he.slice(0,he.length-kt.length).replace(/(.)\/+$/,"$1")}const ft=c[Pe];return Ce&&!ft?fe[Le]=void 0:fe[Le]=(ft||"").replace(/%2F/g,"/"),fe},{}),pathname:he,pathnameBase:E,pattern:B}}function bb(B,Y=!1,N=!0){zh(B==="*"||!B.endsWith("*")||B.endsWith("/*"),`Route path "${B}" will be treated as if it were "${B.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${B.replace(/\*$/,"/*")}".`);let U=[],J="^"+B.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(E,c,re)=>(U.push({paramName:c,isOptional:re!=null}),re?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return B.endsWith("*")?(U.push({paramName:"*"}),J+=B==="*"||B==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):N?J+="\\/*$":B!==""&&B!=="/"&&(J+="(?:(?=\\/|$))"),[new RegExp(J,Y?void 0:"i"),U]}function wb(B){try{return B.split("/").map(Y=>decodeURIComponent(Y).replace(/\//g,"%2F")).join("/")}catch(Y){return zh(!1,`The URL path "${B}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${Y}).`),B}}function Cd(B,Y){if(Y==="/")return B;if(!B.toLowerCase().startsWith(Y.toLowerCase()))return null;let N=Y.endsWith("/")?Y.length-1:Y.length,U=B.charAt(N);return U&&U!=="/"?null:B.slice(N)||"/"}var Xy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vb=B=>Xy.test(B);function Ob(B,Y="/"){let{pathname:N,search:U="",hash:J=""}=typeof B=="string"?sc(B):B,he;if(N)if(vb(N))he=N;else{if(N.includes("//")){let E=N;N=N.replace(/\/\/+/g,"/"),zh(!1,`Pathnames cannot have embedded double slashes - normalizing ${E} -> ${N}`)}N.startsWith("/")?he=Yy(N.substring(1),"/"):he=Yy(N,Y)}else he=Y;return{pathname:he,search:Ib(U),hash:xb(J)}}function Yy(B,Y){let N=Y.replace(/\/+$/,"").split("/");return B.split("/").forEach(J=>{J===".."?N.length>1&&N.pop():J!=="."&&N.push(J)}),N.length>1?N.join("/"):"/"}function Kg(B,Y,N,U){return`Cannot include a '${B}' character in a manually specified \`to.${Y}\` field [${JSON.stringify(U)}].  Please separate it out to the \`to.${N}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function kb(B){return B.filter((Y,N)=>N===0||Y.route.path&&Y.route.path.length>0)}function $y(B){let Y=kb(B);return Y.map((N,U)=>U===Y.length-1?N.pathname:N.pathnameBase)}function Ky(B,Y,N,U=!1){let J;typeof B=="string"?J=sc(B):(J=rn({},B),In(!J.pathname||!J.pathname.includes("?"),Kg("?","pathname","search",J)),In(!J.pathname||!J.pathname.includes("#"),Kg("#","pathname","hash",J)),In(!J.search||!J.search.includes("#"),Kg("#","search","hash",J)));let he=B===""||J.pathname==="",E=he?"/":J.pathname,c;if(E==null)c=N;else{let Ce=Y.length-1;if(!U&&E.startsWith("..")){let Pe=E.split("/");for(;Pe[0]==="..";)Pe.shift(),Ce-=1;J.pathname=Pe.join("/")}c=Ce>=0?Y[Ce]:"/"}let re=Ob(J,c),fe=E&&E!=="/"&&E.endsWith("/"),Le=(he||E===".")&&N.endsWith("/");return!re.pathname.endsWith("/")&&(fe||Le)&&(re.pathname+="/"),re}var Md=B=>B.join("/").replace(/\/\/+/g,"/"),_b=B=>B.replace(/\/+$/,"").replace(/^\/*/,"/"),Ib=B=>!B||B==="?"?"":B.startsWith("?")?B:"?"+B,xb=B=>!B||B==="#"?"":B.startsWith("#")?B:"#"+B,Tb=class{constructor(B,Y,N,U=!1){this.status=B,this.statusText=Y||"",this.internal=U,N instanceof Error?(this.data=N.toString(),this.error=N):this.data=N}};function Ab(B){return B!=null&&typeof B.status=="number"&&typeof B.statusText=="string"&&typeof B.internal=="boolean"&&"data"in B}function Sb(B){return B.map(Y=>Y.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Qy=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined";function Jy(B,Y){let N=B;if(typeof N!="string"||!Xy.test(N))return{absoluteURL:void 0,isExternal:!1,to:N};let U=N,J=!1;if(Qy)try{let he=new URL(window.location.href),E=N.startsWith("//")?new URL(he.protocol+N):new URL(N),c=Cd(E.pathname,Y);E.origin===he.origin&&c!=null?N=c+E.search+E.hash:J=!0}catch(he){zh(!1,`<Link to="${N}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:U,isExternal:J,to:N}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var e1=["POST","PUT","PATCH","DELETE"];new Set(e1);var Pb=["GET",...e1];new Set(Pb);var op=Be.createContext(null);op.displayName="DataRouter";var Mm=Be.createContext(null);Mm.displayName="DataRouterState";var Eb=Be.createContext(!1),t1=Be.createContext({isTransitioning:!1});t1.displayName="ViewTransition";var Cb=Be.createContext(new Map);Cb.displayName="Fetchers";var Mb=Be.createContext(null);Mb.displayName="Await";var Dh=Be.createContext(null);Dh.displayName="Navigation";var wu=Be.createContext(null);wu.displayName="Location";var Zl=Be.createContext({outlet:null,matches:[],isDataRoute:!1});Zl.displayName="Route";var Qg=Be.createContext(null);Qg.displayName="RouteError";var a1="REACT_ROUTER_ERROR",Lb="REDIRECT",zb="ROUTE_ERROR_RESPONSE";function Db(B){if(B.startsWith(`${a1}:${Lb}:{`))try{let Y=JSON.parse(B.slice(28));if(typeof Y=="object"&&Y&&typeof Y.status=="number"&&typeof Y.statusText=="string"&&typeof Y.location=="string"&&typeof Y.reloadDocument=="boolean"&&typeof Y.replace=="boolean")return Y}catch(Y){}}function Bb(B){if(B.startsWith(`${a1}:${zb}:{`))try{let Y=JSON.parse(B.slice(40));if(typeof Y=="object"&&Y&&typeof Y.status=="number"&&typeof Y.statusText=="string")return new Tb(Y.status,Y.statusText,Y.data)}catch(Y){}}function Rb(B,{relative:Y}={}){In(vu(),"useHref() may be used only in the context of a <Router> component.");let{basename:N,navigator:U}=Be.useContext(Dh),{hash:J,pathname:he,search:E}=Ou(B,{relative:Y}),c=he;return N!=="/"&&(c=he==="/"?N:Md([N,he])),U.createHref({pathname:c,search:E,hash:J})}function vu(){return Be.useContext(wu)!=null}function pf(){return In(vu(),"useLocation() may be used only in the context of a <Router> component."),Be.useContext(wu).location}var s1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function n1(B){Be.useContext(Dh).static||Be.useLayoutEffect(B)}function Jg(){let{isDataRoute:B}=Be.useContext(Zl);return B?$b():Hb()}function Hb(){In(vu(),"useNavigate() may be used only in the context of a <Router> component.");let B=Be.useContext(op),{basename:Y,navigator:N}=Be.useContext(Dh),{matches:U}=Be.useContext(Zl),{pathname:J}=pf(),he=JSON.stringify($y(U)),E=Be.useRef(!1);return n1(()=>{E.current=!0}),Be.useCallback((re,fe={})=>{if(zh(E.current,s1),!E.current)return;if(typeof re=="number"){N.go(re);return}let Le=Ky(re,JSON.parse(he),J,fe.relative==="path");B==null&&Y!=="/"&&(Le.pathname=Le.pathname==="/"?Y:Md([Y,Le.pathname])),(fe.replace?N.replace:N.push)(Le,fe.state,fe)},[Y,N,he,J,B])}Be.createContext(null);function o1(){let{matches:B}=Be.useContext(Zl),Y=B[B.length-1];return Y?Y.params:{}}function Ou(B,{relative:Y}={}){let{matches:N}=Be.useContext(Zl),{pathname:U}=pf(),J=JSON.stringify($y(N));return Be.useMemo(()=>Ky(B,JSON.parse(J),U,Y==="path"),[B,J,U,Y])}function Nb(B,Y){return i1(B,Y)}function i1(B,Y,N,U,J){var Ft;In(vu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:he}=Be.useContext(Dh),{matches:E}=Be.useContext(Zl),c=E[E.length-1],re=c?c.params:{},fe=c?c.pathname:"/",Le=c?c.pathnameBase:"/",Ce=c&&c.route;{let mt=Ce&&Ce.path||"";l1(fe,!Ce||mt.endsWith("*")||mt.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${fe}" (under <Route path="${mt}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${mt}"> to <Route path="${mt==="/"?"*":`${mt}/*`}">.`)}let Pe=pf(),ft;if(Y){let mt=typeof Y=="string"?sc(Y):Y;In(Le==="/"||((Ft=mt.pathname)==null?void 0:Ft.startsWith(Le)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${Le}" but pathname "${mt.pathname}" was given in the \`location\` prop.`),ft=mt}else ft=Pe;let kt=ft.pathname||"/",it=kt;if(Le!=="/"){let mt=Le.replace(/^\//,"").split("/");it="/"+kt.replace(/^\//,"").split("/").slice(mt.length).join("/")}let Te=qy(B,{pathname:it});zh(Ce||Te!=null,`No routes matched location "${ft.pathname}${ft.search}${ft.hash}" `),zh(Te==null||Te[Te.length-1].route.element!==void 0||Te[Te.length-1].route.Component!==void 0||Te[Te.length-1].route.lazy!==void 0,`Matched leaf route at location "${ft.pathname}${ft.search}${ft.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Vt=qb(Te&&Te.map(mt=>Object.assign({},mt,{params:Object.assign({},re,mt.params),pathname:Md([Le,he.encodeLocation?he.encodeLocation(mt.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:mt.pathname]),pathnameBase:mt.pathnameBase==="/"?Le:Md([Le,he.encodeLocation?he.encodeLocation(mt.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:mt.pathnameBase])})),E,N,U,J);return Y&&Vt?Be.createElement(wu.Provider,{value:{location:rn({pathname:"/",search:"",hash:"",state:null,key:"default"},ft),navigationType:"POP"}},Vt):Vt}function Gb(){let B=Yb(),Y=Ab(B)?`${B.status} ${B.statusText}`:B instanceof Error?B.message:JSON.stringify(B),N=B instanceof Error?B.stack:null,U="rgba(200,200,200, 0.5)",J={padding:"0.5rem",backgroundColor:U},he={padding:"2px 4px",backgroundColor:U},E=null;return console.error("Error handled by React Router default ErrorBoundary:",B),E=Be.createElement(Be.Fragment,null,Be.createElement("p",null," Hey developer "),Be.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Be.createElement("code",{style:he},"ErrorBoundary")," or"," ",Be.createElement("code",{style:he},"errorElement")," prop on your route.")),Be.createElement(Be.Fragment,null,Be.createElement("h2",null,"Unexpected Application Error!"),Be.createElement("h3",{style:{fontStyle:"italic"}},Y),N?Be.createElement("pre",{style:J},N):null,E)}var Fb=Be.createElement(Gb,null),r1=class extends Be.Component{constructor(B){super(B),this.state={location:B.location,revalidation:B.revalidation,error:B.error}}static getDerivedStateFromError(B){return{error:B}}static getDerivedStateFromProps(B,Y){return Y.location!==B.location||Y.revalidation!=="idle"&&B.revalidation==="idle"?{error:B.error,location:B.location,revalidation:B.revalidation}:{error:B.error!==void 0?B.error:Y.error,location:Y.location,revalidation:B.revalidation||Y.revalidation}}componentDidCatch(B,Y){this.props.onError?this.props.onError(B,Y):console.error("React Router caught the following error during render",B)}render(){let B=this.state.error;if(this.context&&typeof B=="object"&&B&&"digest"in B&&typeof B.digest=="string"){const N=Bb(B.digest);N&&(B=N)}let Y=B!==void 0?Be.createElement(Zl.Provider,{value:this.props.routeContext},Be.createElement(Qg.Provider,{value:B,children:this.props.component})):this.props.children;return this.context?Be.createElement(jb,{error:B},Y):Y}};r1.contextType=Eb;var ey=new WeakMap;function jb({children:B,error:Y}){let{basename:N}=Be.useContext(Dh);if(typeof Y=="object"&&Y&&"digest"in Y&&typeof Y.digest=="string"){let U=Db(Y.digest);if(U){let J=ey.get(Y);if(J)throw J;let he=Jy(U.location,N);if(Qy&&!ey.get(Y))if(he.isExternal||U.reloadDocument)window.location.href=he.absoluteURL||he.to;else{const E=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(he.to,{replace:U.replace}));throw ey.set(Y,E),E}return Be.createElement("meta",{httpEquiv:"refresh",content:`0;url=${he.absoluteURL||he.to}`})}}return B}function Ub({routeContext:B,match:Y,children:N}){let U=Be.useContext(op);return U&&U.static&&U.staticContext&&(Y.route.errorElement||Y.route.ErrorBoundary)&&(U.staticContext._deepestRenderedBoundaryId=Y.route.id),Be.createElement(Zl.Provider,{value:B},N)}function qb(B,Y=[],N=null,U=null,J=null){if(B==null){if(!N)return null;if(N.errors)B=N.matches;else if(Y.length===0&&!N.initialized&&N.matches.length>0)B=N.matches;else return null}let he=B,E=N==null?void 0:N.errors;if(E!=null){let Le=he.findIndex(Ce=>Ce.route.id&&(E==null?void 0:E[Ce.route.id])!==void 0);In(Le>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(E).join(",")}`),he=he.slice(0,Math.min(he.length,Le+1))}let c=!1,re=-1;if(N)for(let Le=0;Le<he.length;Le++){let Ce=he[Le];if((Ce.route.HydrateFallback||Ce.route.hydrateFallbackElement)&&(re=Le),Ce.route.id){let{loaderData:Pe,errors:ft}=N,kt=Ce.route.loader&&!Pe.hasOwnProperty(Ce.route.id)&&(!ft||ft[Ce.route.id]===void 0);if(Ce.route.lazy||kt){c=!0,re>=0?he=he.slice(0,re+1):he=[he[0]];break}}}let fe=N&&U?(Le,Ce)=>{var Pe,ft,kt;U(Le,{location:N.location,params:(kt=(ft=(Pe=N.matches)==null?void 0:Pe[0])==null?void 0:ft.params)!=null?kt:{},unstable_pattern:Sb(N.matches),errorInfo:Ce})}:void 0;return he.reduceRight((Le,Ce,Pe)=>{let ft,kt=!1,it=null,Te=null;N&&(ft=E&&Ce.route.id?E[Ce.route.id]:void 0,it=Ce.route.errorElement||Fb,c&&(re<0&&Pe===0?(l1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),kt=!0,Te=null):re===Pe&&(kt=!0,Te=Ce.route.hydrateFallbackElement||null)));let Vt=Y.concat(he.slice(0,Pe+1)),Ft=()=>{let mt;return ft?mt=it:kt?mt=Te:Ce.route.Component?mt=Be.createElement(Ce.route.Component,null):Ce.route.element?mt=Ce.route.element:mt=Le,Be.createElement(Ub,{match:Ce,routeContext:{outlet:Le,matches:Vt,isDataRoute:N!=null},children:mt})};return N&&(Ce.route.ErrorBoundary||Ce.route.errorElement||Pe===0)?Be.createElement(r1,{location:N.location,revalidation:N.revalidation,component:it,error:ft,children:Ft(),routeContext:{outlet:null,matches:Vt,isDataRoute:!0},onError:fe}):Ft()},null)}function ty(B){return`${B} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Vb(B){let Y=Be.useContext(op);return In(Y,ty(B)),Y}function Wb(B){let Y=Be.useContext(Mm);return In(Y,ty(B)),Y}function Zb(B){let Y=Be.useContext(Zl);return In(Y,ty(B)),Y}function ay(B){let Y=Zb(B),N=Y.matches[Y.matches.length-1];return In(N.route.id,`${B} can only be used on routes that contain a unique "id"`),N.route.id}function Xb(){return ay("useRouteId")}function Yb(){var U;let B=Be.useContext(Qg),Y=Wb("useRouteError"),N=ay("useRouteError");return B!==void 0?B:(U=Y.errors)==null?void 0:U[N]}function $b(){let{router:B}=Vb("useNavigate"),Y=ay("useNavigate"),N=Be.useRef(!1);return n1(()=>{N.current=!0}),Be.useCallback((E,...c)=>np(null,[E,...c],function*(J,he={}){zh(N.current,s1),N.current&&(typeof J=="number"?yield B.navigate(J):yield B.navigate(J,rn({fromRouteId:Y},he)))}),[B,Y])}var h1={};function l1(B,Y,N){!Y&&!h1[B]&&(h1[B]=!0,zh(!1,N))}Be.memo(Kb);function Kb({routes:B,future:Y,state:N,onError:U}){return i1(B,void 0,N,U,Y)}function ip(B){In(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Qb({basename:B="/",children:Y=null,location:N,navigationType:U="POP",navigator:J,static:he=!1,unstable_useTransitions:E}){In(!vu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=B.replace(/^\/*/,"/"),re=Be.useMemo(()=>({basename:c,navigator:J,static:he,unstable_useTransitions:E,future:{}}),[c,J,he,E]);typeof N=="string"&&(N=sc(N));let{pathname:fe="/",search:Le="",hash:Ce="",state:Pe=null,key:ft="default"}=N,kt=Be.useMemo(()=>{let it=Cd(fe,c);return it==null?null:{location:{pathname:it,search:Le,hash:Ce,state:Pe,key:ft},navigationType:U}},[c,fe,Le,Ce,Pe,ft,U]);return zh(kt!=null,`<Router basename="${c}"> is not able to match the URL "${fe}${Le}${Ce}" because it does not start with the basename, so the <Router> won't render anything.`),kt==null?null:Be.createElement(Dh.Provider,{value:re},Be.createElement(wu.Provider,{children:Y,value:kt}))}function Jb({children:B,location:Y}){return Nb(sy(B),Y)}function sy(B,Y=[]){let N=[];return Be.Children.forEach(B,(U,J)=>{if(!Be.isValidElement(U))return;let he=[...Y,J];if(U.type===Be.Fragment){N.push.apply(N,sy(U.props.children,he));return}In(U.type===ip,`[${typeof U.type=="string"?U.type:U.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),In(!U.props.index||!U.props.children,"An index route cannot have child routes.");let E={id:U.props.id||he.join("-"),caseSensitive:U.props.caseSensitive,element:U.props.element,Component:U.props.Component,index:U.props.index,path:U.props.path,middleware:U.props.middleware,loader:U.props.loader,action:U.props.action,hydrateFallbackElement:U.props.hydrateFallbackElement,HydrateFallback:U.props.HydrateFallback,errorElement:U.props.errorElement,ErrorBoundary:U.props.ErrorBoundary,hasErrorBoundary:U.props.hasErrorBoundary===!0||U.props.ErrorBoundary!=null||U.props.errorElement!=null,shouldRevalidate:U.props.shouldRevalidate,handle:U.props.handle,lazy:U.props.lazy};U.props.children&&(E.children=sy(U.props.children,he)),N.push(E)}),N}var Lm="get",zm="application/x-www-form-urlencoded";function Dm(B){return typeof HTMLElement!="undefined"&&B instanceof HTMLElement}function ew(B){return Dm(B)&&B.tagName.toLowerCase()==="button"}function tw(B){return Dm(B)&&B.tagName.toLowerCase()==="form"}function aw(B){return Dm(B)&&B.tagName.toLowerCase()==="input"}function sw(B){return!!(B.metaKey||B.altKey||B.ctrlKey||B.shiftKey)}function nw(B,Y){return B.button===0&&(!Y||Y==="_self")&&!sw(B)}var Bm=null;function ow(){if(Bm===null)try{new FormData(document.createElement("form"),0),Bm=!1}catch(B){Bm=!0}return Bm}var iw=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ny(B){return B!=null&&!iw.has(B)?(zh(!1,`"${B}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${zm}"`),null):B}function rw(B,Y){let N,U,J,he,E;if(tw(B)){let c=B.getAttribute("action");U=c?Cd(c,Y):null,N=B.getAttribute("method")||Lm,J=ny(B.getAttribute("enctype"))||zm,he=new FormData(B)}else if(ew(B)||aw(B)&&(B.type==="submit"||B.type==="image")){let c=B.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let re=B.getAttribute("formaction")||c.getAttribute("action");if(U=re?Cd(re,Y):null,N=B.getAttribute("formmethod")||c.getAttribute("method")||Lm,J=ny(B.getAttribute("formenctype"))||ny(c.getAttribute("enctype"))||zm,he=new FormData(c,B),!ow()){let{name:fe,type:Le,value:Ce}=B;if(Le==="image"){let Pe=fe?`${fe}.`:"";he.append(`${Pe}x`,"0"),he.append(`${Pe}y`,"0")}else fe&&he.append(fe,Ce)}}else{if(Dm(B))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');N=Lm,U=null,J=zm,E=B}return he&&J==="text/plain"&&(E=he,he=void 0),{action:U,method:N.toLowerCase(),encType:J,formData:he,body:E}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function oy(B,Y){if(B===!1||B===null||typeof B=="undefined")throw new Error(Y)}function hw(B,Y,N,U){let J=typeof B=="string"?new URL(B,typeof window=="undefined"?"server://singlefetch/":window.location.origin):B;return N?J.pathname.endsWith("/")?J.pathname=`${J.pathname}_.${U}`:J.pathname=`${J.pathname}.${U}`:J.pathname==="/"?J.pathname=`_root.${U}`:Y&&Cd(J.pathname,Y)==="/"?J.pathname=`${Y.replace(/\/$/,"")}/_root.${U}`:J.pathname=`${J.pathname.replace(/\/$/,"")}.${U}`,J}function lw(B,Y){return np(this,null,function*(){if(B.id in Y)return Y[B.id];try{let N=yield import(B.module);return Y[B.id]=N,N}catch(N){return console.error(`Error loading route module \`${B.module}\`, reloading page...`),console.error(N),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}})}function dw(B){return B==null?!1:B.href==null?B.rel==="preload"&&typeof B.imageSrcSet=="string"&&typeof B.imageSizes=="string":typeof B.rel=="string"&&typeof B.href=="string"}function fw(B,Y,N){return np(this,null,function*(){let U=yield Promise.all(B.map(J=>np(null,null,function*(){let he=Y.routes[J.route.id];if(he){let E=yield lw(he,N);return E.links?E.links():[]}return[]})));return mw(U.flat(1).filter(dw).filter(J=>J.rel==="stylesheet"||J.rel==="preload").map(J=>J.rel==="stylesheet"?Or(rn({},J),{rel:"prefetch",as:"style"}):Or(rn({},J),{rel:"prefetch"})))})}function d1(B,Y,N,U,J,he){let E=(re,fe)=>N[fe]?re.route.id!==N[fe].route.id:!0,c=(re,fe)=>{var Le;return N[fe].pathname!==re.pathname||((Le=N[fe].route.path)==null?void 0:Le.endsWith("*"))&&N[fe].params["*"]!==re.params["*"]};return he==="assets"?Y.filter((re,fe)=>E(re,fe)||c(re,fe)):he==="data"?Y.filter((re,fe)=>{var Ce;let Le=U.routes[re.route.id];if(!Le||!Le.hasLoader)return!1;if(E(re,fe)||c(re,fe))return!0;if(re.route.shouldRevalidate){let Pe=re.route.shouldRevalidate({currentUrl:new URL(J.pathname+J.search+J.hash,window.origin),currentParams:((Ce=N[0])==null?void 0:Ce.params)||{},nextUrl:new URL(B,window.origin),nextParams:re.params,defaultShouldRevalidate:!0});if(typeof Pe=="boolean")return Pe}return!0}):[]}function cw(B,Y,{includeHydrateFallback:N}={}){return pw(B.map(U=>{let J=Y.routes[U.route.id];if(!J)return[];let he=[J.module];return J.clientActionModule&&(he=he.concat(J.clientActionModule)),J.clientLoaderModule&&(he=he.concat(J.clientLoaderModule)),N&&J.hydrateFallbackModule&&(he=he.concat(J.hydrateFallbackModule)),J.imports&&(he=he.concat(J.imports)),he}).flat(1))}function pw(B){return[...new Set(B)]}function uw(B){let Y={},N=Object.keys(B).sort();for(let U of N)Y[U]=B[U];return Y}function mw(B,Y){let N=new Set;return new Set(Y),B.reduce((U,J)=>{let he=JSON.stringify(uw(J));return N.has(he)||(N.add(he),U.push({key:he,link:J})),U},[])}function f1(){let B=Be.useContext(op);return oy(B,"You must render this element inside a <DataRouterContext.Provider> element"),B}function gw(){let B=Be.useContext(Mm);return oy(B,"You must render this element inside a <DataRouterStateContext.Provider> element"),B}var iy=Be.createContext(void 0);iy.displayName="FrameworkContext";function c1(){let B=Be.useContext(iy);return oy(B,"You must render this element inside a <HydratedRouter> element"),B}function yw(B,Y){let N=Be.useContext(iy),[U,J]=Be.useState(!1),[he,E]=Be.useState(!1),{onFocus:c,onBlur:re,onMouseEnter:fe,onMouseLeave:Le,onTouchStart:Ce}=Y,Pe=Be.useRef(null);Be.useEffect(()=>{if(B==="render"&&E(!0),B==="viewport"){let it=Vt=>{Vt.forEach(Ft=>{E(Ft.isIntersecting)})},Te=new IntersectionObserver(it,{threshold:.5});return Pe.current&&Te.observe(Pe.current),()=>{Te.disconnect()}}},[B]),Be.useEffect(()=>{if(U){let it=setTimeout(()=>{E(!0)},100);return()=>{clearTimeout(it)}}},[U]);let ft=()=>{J(!0)},kt=()=>{J(!1),E(!1)};return N?B!=="intent"?[he,Pe,{}]:[he,Pe,{onFocus:ku(c,ft),onBlur:ku(re,kt),onMouseEnter:ku(fe,ft),onMouseLeave:ku(Le,kt),onTouchStart:ku(Ce,ft)}]:[!1,Pe,{}]}function ku(B,Y){return N=>{B&&B(N),N.defaultPrevented||Y(N)}}function bw(N){var U=N,{page:B}=U,Y=il(U,["page"]);let{router:J}=f1(),he=Be.useMemo(()=>qy(J.routes,B,J.basename),[J.routes,B,J.basename]);return he?Be.createElement(vw,rn({page:B,matches:he},Y)):null}function ww(B){let{manifest:Y,routeModules:N}=c1(),[U,J]=Be.useState([]);return Be.useEffect(()=>{let he=!1;return fw(B,Y,N).then(E=>{he||J(E)}),()=>{he=!0}},[B,Y,N]),U}function vw(U){var J=U,{page:B,matches:Y}=J,N=il(J,["page","matches"]);let he=pf(),{future:E,manifest:c,routeModules:re}=c1(),{basename:fe}=f1(),{loaderData:Le,matches:Ce}=gw(),Pe=Be.useMemo(()=>d1(B,Y,Ce,c,he,"data"),[B,Y,Ce,c,he]),ft=Be.useMemo(()=>d1(B,Y,Ce,c,he,"assets"),[B,Y,Ce,c,he]),kt=Be.useMemo(()=>{if(B===he.pathname+he.search+he.hash)return[];let Vt=new Set,Ft=!1;if(Y.forEach(Et=>{var Ia;let $t=c.routes[Et.route.id];!$t||!$t.hasLoader||(!Pe.some(zt=>zt.route.id===Et.route.id)&&Et.route.id in Le&&((Ia=re[Et.route.id])!=null&&Ia.shouldRevalidate)||$t.hasClientLoader?Ft=!0:Vt.add(Et.route.id))}),Vt.size===0)return[];let mt=hw(B,fe,E.unstable_trailingSlashAwareDataRequests,"data");return Ft&&Vt.size>0&&mt.searchParams.set("_routes",Y.filter(Et=>Vt.has(Et.route.id)).map(Et=>Et.route.id).join(",")),[mt.pathname+mt.search]},[fe,E.unstable_trailingSlashAwareDataRequests,Le,he,c,Pe,Y,B,re]),it=Be.useMemo(()=>cw(ft,c),[ft,c]),Te=ww(ft);return Be.createElement(Be.Fragment,null,kt.map(Vt=>Be.createElement("link",rn({key:Vt,rel:"prefetch",as:"fetch",href:Vt},N))),it.map(Vt=>Be.createElement("link",rn({key:Vt,rel:"modulepreload",href:Vt},N))),Te.map(({key:Vt,link:Ft})=>Be.createElement("link",rn({key:Vt,nonce:N.nonce},Ft))))}function Ow(...B){return Y=>{B.forEach(N=>{typeof N=="function"?N(Y):N!=null&&(N.current=Y)})}}var kw=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined";try{kw&&(window.__reactRouterVersion="7.12.0")}catch(B){}function _w({basename:B,children:Y,unstable_useTransitions:N,window:U}){let J=Be.useRef();J.current==null&&(J.current=sb({window:U,v5Compat:!0}));let he=J.current,[E,c]=Be.useState({action:he.action,location:he.location}),re=Be.useCallback(fe=>{N===!1?c(fe):Be.startTransition(()=>c(fe))},[N]);return Be.useLayoutEffect(()=>he.listen(re),[he,re]),Be.createElement(Qb,{basename:B,children:Y,location:E.location,navigationType:E.action,navigator:he,unstable_useTransitions:N})}var p1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Qr=Be.forwardRef(function(it,kt){var Te=it,{onClick:Y,discover:N="render",prefetch:U="none",relative:J,reloadDocument:he,replace:E,state:c,target:re,to:fe,preventScrollReset:Le,viewTransition:Ce,unstable_defaultShouldRevalidate:Pe}=Te,ft=il(Te,["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition","unstable_defaultShouldRevalidate"]);let{basename:Vt,unstable_useTransitions:Ft}=Be.useContext(Dh),mt=typeof fe=="string"&&p1.test(fe),Et=Jy(fe,Vt);fe=Et.to;let $t=Rb(fe,{relative:J}),[Ia,zt,ca]=yw(U,ft),ba=Aw(fe,{replace:E,state:c,target:re,preventScrollReset:Le,relative:J,viewTransition:Ce,unstable_defaultShouldRevalidate:Pe,unstable_useTransitions:Ft});function fs(pa){Y&&Y(pa),pa.defaultPrevented||ba(pa)}let ma=Be.createElement("a",Or(rn(rn({},ft),ca),{href:Et.absoluteURL||$t,onClick:Et.isExternal||he?Y:fs,ref:Ow(kt,zt),target:re,"data-discover":!mt&&N==="render"?"true":void 0}));return Ia&&!mt?Be.createElement(Be.Fragment,null,ma,Be.createElement(bw,{page:$t})):ma});Qr.displayName="Link";var Iw=Be.forwardRef(function(Ce,Le){var Pe=Ce,{"aria-current":Y="page",caseSensitive:N=!1,className:U="",end:J=!1,style:he,to:E,viewTransition:c,children:re}=Pe,fe=il(Pe,["aria-current","caseSensitive","className","end","style","to","viewTransition","children"]);let ft=Ou(E,{relative:fe.relative}),kt=pf(),it=Be.useContext(Mm),{navigator:Te,basename:Vt}=Be.useContext(Dh),Ft=it!=null&&Mw(ft)&&c===!0,mt=Te.encodeLocation?Te.encodeLocation(ft).pathname:ft.pathname,Et=kt.pathname,$t=it&&it.navigation&&it.navigation.location?it.navigation.location.pathname:null;N||(Et=Et.toLowerCase(),$t=$t?$t.toLowerCase():null,mt=mt.toLowerCase()),$t&&Vt&&($t=Cd($t,Vt)||$t);const Ia=mt!=="/"&&mt.endsWith("/")?mt.length-1:mt.length;let zt=Et===mt||!J&&Et.startsWith(mt)&&Et.charAt(Ia)==="/",ca=$t!=null&&($t===mt||!J&&$t.startsWith(mt)&&$t.charAt(mt.length)==="/"),ba={isActive:zt,isPending:ca,isTransitioning:Ft},fs=zt?Y:void 0,ma;typeof U=="function"?ma=U(ba):ma=[U,zt?"active":null,ca?"pending":null,Ft?"transitioning":null].filter(Boolean).join(" ");let pa=typeof he=="function"?he(ba):he;return Be.createElement(Qr,Or(rn({},fe),{"aria-current":fs,className:ma,ref:Le,style:pa,to:E,viewTransition:c}),typeof re=="function"?re(ba):re)});Iw.displayName="NavLink";var xw=Be.forwardRef((it,kt)=>{var Te=it,{discover:B="render",fetcherKey:Y,navigate:N,reloadDocument:U,replace:J,state:he,method:E=Lm,action:c,onSubmit:re,relative:fe,preventScrollReset:Le,viewTransition:Ce,unstable_defaultShouldRevalidate:Pe}=Te,ft=il(Te,["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition","unstable_defaultShouldRevalidate"]);let{unstable_useTransitions:Vt}=Be.useContext(Dh),Ft=Ew(),mt=Cw(c,{relative:fe}),Et=E.toLowerCase()==="get"?"get":"post",$t=typeof c=="string"&&p1.test(c),Ia=zt=>{if(re&&re(zt),zt.defaultPrevented)return;zt.preventDefault();let ca=zt.nativeEvent.submitter,ba=(ca==null?void 0:ca.getAttribute("formmethod"))||E,fs=()=>Ft(ca||zt.currentTarget,{fetcherKey:Y,method:ba,navigate:N,replace:J,state:he,relative:fe,preventScrollReset:Le,viewTransition:Ce,unstable_defaultShouldRevalidate:Pe});Vt&&N!==!1?Be.startTransition(()=>fs()):fs()};return Be.createElement("form",Or(rn({ref:kt,method:Et,action:mt,onSubmit:U?re:Ia},ft),{"data-discover":!$t&&B==="render"?"true":void 0}))});xw.displayName="Form";function Tw(B){return`${B} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function u1(B){let Y=Be.useContext(op);return In(Y,Tw(B)),Y}function Aw(B,{target:Y,replace:N,state:U,preventScrollReset:J,relative:he,viewTransition:E,unstable_defaultShouldRevalidate:c,unstable_useTransitions:re}={}){let fe=Jg(),Le=pf(),Ce=Ou(B,{relative:he});return Be.useCallback(Pe=>{if(nw(Pe,Y)){Pe.preventDefault();let ft=N!==void 0?N:bu(Le)===bu(Ce),kt=()=>fe(B,{replace:ft,state:U,preventScrollReset:J,relative:he,viewTransition:E,unstable_defaultShouldRevalidate:c});re?Be.startTransition(()=>kt()):kt()}},[Le,fe,Ce,N,U,Y,B,J,he,E,c,re])}var Sw=0,Pw=()=>`__${String(++Sw)}__`;function Ew(){let{router:B}=u1("useSubmit"),{basename:Y}=Be.useContext(Dh),N=Xb(),U=B.fetch,J=B.navigate;return Be.useCallback((c,...re)=>np(null,[c,...re],function*(he,E={}){let{action:fe,method:Le,encType:Ce,formData:Pe,body:ft}=rw(he,Y);if(E.navigate===!1){let kt=E.fetcherKey||Pw();yield U(kt,N,E.action||fe,{unstable_defaultShouldRevalidate:E.unstable_defaultShouldRevalidate,preventScrollReset:E.preventScrollReset,formData:Pe,body:ft,formMethod:E.method||Le,formEncType:E.encType||Ce,flushSync:E.flushSync})}else yield J(E.action||fe,{unstable_defaultShouldRevalidate:E.unstable_defaultShouldRevalidate,preventScrollReset:E.preventScrollReset,formData:Pe,body:ft,formMethod:E.method||Le,formEncType:E.encType||Ce,replace:E.replace,state:E.state,fromRouteId:N,flushSync:E.flushSync,viewTransition:E.viewTransition})}),[U,J,Y,N])}function Cw(B,{relative:Y}={}){let{basename:N}=Be.useContext(Dh),U=Be.useContext(Zl);In(U,"useFormAction must be used inside a RouteContext");let[J]=U.matches.slice(-1),he=rn({},Ou(B||".",{relative:Y})),E=pf();if(B==null){he.search=E.search;let c=new URLSearchParams(he.search),re=c.getAll("index");if(re.some(Le=>Le==="")){c.delete("index"),re.filter(Ce=>Ce).forEach(Ce=>c.append("index",Ce));let Le=c.toString();he.search=Le?`?${Le}`:""}}return(!B||B===".")&&J.route.index&&(he.search=he.search?he.search.replace(/^\?/,"?index&"):"?index"),N!=="/"&&(he.pathname=he.pathname==="/"?N:Md([N,he.pathname])),bu(he)}function Mw(B,{relative:Y}={}){let N=Be.useContext(t1);In(N!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:U}=u1("useViewTransitionState"),J=Ou(B,{relative:Y});if(!N.isTransitioning)return!1;let he=Cd(N.currentLocation.pathname,U)||N.currentLocation.pathname,E=Cd(N.nextLocation.pathname,U)||N.nextLocation.pathname;return Cm(J.pathname,E)!=null||Cm(J.pathname,he)!=null}var Lw=Ny();function m1(B,Y){const N=Be.useRef(Y);Be.useEffect(function(){Y!==N.current&&B.attributionControl!=null&&(N.current!=null&&B.attributionControl.removeAttribution(N.current),Y!=null&&B.attributionControl.addAttribution(Y)),N.current=Y},[B,Y])}function zw(B,Y,N){Y.center!==N.center&&B.setLatLng(Y.center),Y.radius!=null&&Y.radius!==N.radius&&B.setRadius(Y.radius)}const Dw=1;function Bw(B){return Object.freeze({__version:Dw,map:B})}function _u(B,Y){return Object.freeze(rn(rn({},B),Y))}const Rm=Be.createContext(null);function rp(){const B=Be.use(Rm);if(B==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return B}function ry(B){function Y(N,U){const{instance:J,context:he}=B(N).current;Be.useImperativeHandle(U,()=>J);const{children:E}=N;return E==null?null:gu.createElement(Rm,{value:he},E)}return Be.forwardRef(Y)}function Rw(B){function Y(N,U){const[J,he]=Be.useState(!1),{instance:E}=B(N,he).current;Be.useImperativeHandle(U,()=>E),Be.useEffect(function(){J&&E.update()},[E,J,N.children]);const c=E._contentNode;return c?Lw.createPortal(N.children,c):null}return Be.forwardRef(Y)}function Hw(B){function Y(N,U){const{instance:J}=B(N).current;return Be.useImperativeHandle(U,()=>J),null}return Be.forwardRef(Y)}function Nw(B){return function(N){const U=rp(),J=B(N,U),{instance:he}=J.current,E=Be.useRef(N.position),{position:c}=N;return Be.useEffect(function(){return he.addTo(U.map),function(){he.remove()}},[U.map,he]),Be.useEffect(function(){c!=null&&c!==E.current&&(he.setPosition(c),E.current=c)},[he,c]),J}}function hy(B,Y){const N=Be.useRef(void 0);Be.useEffect(function(){return Y!=null&&B.instance.on(Y),N.current=Y,function(){N.current!=null&&B.instance.off(N.current),N.current=null}},[B,Y])}function Hm(B,Y){var U;const N=(U=B.pane)!=null?U:Y.pane;return N?Or(rn({},B),{pane:N}):B}function Gw(B,Y){return function(U,J){const he=rp(),E=B(Hm(U,he),he);return m1(he.map,U.attribution),hy(E.current,U.eventHandlers),Y(E.current,he,U,J),E}}var Iu={exports:{}};var Fw=Iu.exports,g1;function y1(){return g1||(g1=1,(function(B,Y){(function(N,U){U(Y)})(Fw,(function(N){var U="1.9.4";function J(h){var y,_,M,j;for(_=1,M=arguments.length;_<M;_++){j=arguments[_];for(y in j)h[y]=j[y]}return h}var he=Object.create||(function(){function h(){}return function(y){return h.prototype=y,new h}})();function E(h,y){var _=Array.prototype.slice;if(h.bind)return h.bind.apply(h,_.call(arguments,1));var M=_.call(arguments,2);return function(){return h.apply(y,M.length?M.concat(_.call(arguments)):arguments)}}var c=0;function re(h){return"_leaflet_id"in h||(h._leaflet_id=++c),h._leaflet_id}function fe(h,y,_){var M,j,te,we;return we=function(){M=!1,j&&(te.apply(_,j),j=!1)},te=function(){M?j=arguments:(h.apply(_,arguments),setTimeout(we,y),M=!0)},te}function Le(h,y,_){var M=y[1],j=y[0],te=M-j;return h===M&&_?h:((h-j)%te+te)%te+j}function Ce(){return!1}function Pe(h,y){if(y===!1)return h;var _=Math.pow(10,y===void 0?6:y);return Math.round(h*_)/_}function ft(h){return h.trim?h.trim():h.replace(/^\s+|\s+$/g,"")}function kt(h){return ft(h).split(/\s+/)}function it(h,y){Object.prototype.hasOwnProperty.call(h,"options")||(h.options=h.options?he(h.options):{});for(var _ in y)h.options[_]=y[_];return h.options}function Te(h,y,_){var M=[];for(var j in h)M.push(encodeURIComponent(_?j.toUpperCase():j)+"="+encodeURIComponent(h[j]));return(!y||y.indexOf("?")===-1?"?":"&")+M.join("&")}var Vt=/\{ *([\w_ -]+) *\}/g;function Ft(h,y){return h.replace(Vt,function(_,M){var j=y[M];if(j===void 0)throw new Error("No value provided for variable "+_);return typeof j=="function"&&(j=j(y)),j})}var mt=Array.isArray||function(h){return Object.prototype.toString.call(h)==="[object Array]"};function Et(h,y){for(var _=0;_<h.length;_++)if(h[_]===y)return _;return-1}var $t="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Ia(h){return window["webkit"+h]||window["moz"+h]||window["ms"+h]}var zt=0;function ca(h){var y=+new Date,_=Math.max(0,16-(y-zt));return zt=y+_,window.setTimeout(h,_)}var ba=window.requestAnimationFrame||Ia("RequestAnimationFrame")||ca,fs=window.cancelAnimationFrame||Ia("CancelAnimationFrame")||Ia("CancelRequestAnimationFrame")||function(h){window.clearTimeout(h)};function ma(h,y,_){if(_&&ba===ca)h.call(y);else return ba.call(window,E(h,y))}function pa(h){h&&fs.call(window,h)}var Ca={__proto__:null,extend:J,create:he,bind:E,get lastId(){return c},stamp:re,throttle:fe,wrapNum:Le,falseFn:Ce,formatNum:Pe,trim:ft,splitWords:kt,setOptions:it,getParamString:Te,template:Ft,isArray:mt,indexOf:Et,emptyImageUrl:$t,requestFn:ba,cancelFn:fs,requestAnimFrame:ma,cancelAnimFrame:pa};function os(){}os.extend=function(h){var y=function(){it(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},_=y.__super__=this.prototype,M=he(_);M.constructor=y,y.prototype=M;for(var j in this)Object.prototype.hasOwnProperty.call(this,j)&&j!=="prototype"&&j!=="__super__"&&(y[j]=this[j]);return h.statics&&J(y,h.statics),h.includes&&(Ts(h.includes),J.apply(null,[M].concat(h.includes))),J(M,h),delete M.statics,delete M.includes,M.options&&(M.options=_.options?he(_.options):{},J(M.options,h.options)),M._initHooks=[],M.callInitHooks=function(){if(!this._initHooksCalled){_.callInitHooks&&_.callInitHooks.call(this),this._initHooksCalled=!0;for(var te=0,we=M._initHooks.length;te<we;te++)M._initHooks[te].call(this)}},y},os.include=function(h){var y=this.prototype.options;return J(this.prototype,h),h.options&&(this.prototype.options=y,this.mergeOptions(h.options)),this},os.mergeOptions=function(h){return J(this.prototype.options,h),this},os.addInitHook=function(h){var y=Array.prototype.slice.call(arguments,1),_=typeof h=="function"?h:function(){this[h].apply(this,y)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(_),this};function Ts(h){if(!(typeof L=="undefined"||!L||!L.Mixin)){h=mt(h)?h:[h];for(var y=0;y<h.length;y++)h[y]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Je={on:function(h,y,_){if(typeof h=="object")for(var M in h)this._on(M,h[M],y);else{h=kt(h);for(var j=0,te=h.length;j<te;j++)this._on(h[j],y,_)}return this},off:function(h,y,_){if(!arguments.length)delete this._events;else if(typeof h=="object")for(var M in h)this._off(M,h[M],y);else{h=kt(h);for(var j=arguments.length===1,te=0,we=h.length;te<we;te++)j?this._off(h[te]):this._off(h[te],y,_)}return this},_on:function(h,y,_,M){if(typeof y!="function"){console.warn("wrong listener type: "+typeof y);return}if(this._listens(h,y,_)===!1){_===this&&(_=void 0);var j={fn:y,ctx:_};M&&(j.once=!0),this._events=this._events||{},this._events[h]=this._events[h]||[],this._events[h].push(j)}},_off:function(h,y,_){var M,j,te;if(this._events&&(M=this._events[h],!!M)){if(arguments.length===1){if(this._firingCount)for(j=0,te=M.length;j<te;j++)M[j].fn=Ce;delete this._events[h];return}if(typeof y!="function"){console.warn("wrong listener type: "+typeof y);return}var we=this._listens(h,y,_);if(we!==!1){var De=M[we];this._firingCount&&(De.fn=Ce,this._events[h]=M=M.slice()),M.splice(we,1)}}},fire:function(h,y,_){if(!this.listens(h,_))return this;var M=J({},y,{type:h,target:this,sourceTarget:y&&y.sourceTarget||this});if(this._events){var j=this._events[h];if(j){this._firingCount=this._firingCount+1||1;for(var te=0,we=j.length;te<we;te++){var De=j[te],$e=De.fn;De.once&&this.off(h,$e,De.ctx),$e.call(De.ctx||this,M)}this._firingCount--}}return _&&this._propagateEvent(M),this},listens:function(h,y,_,M){typeof h!="string"&&console.warn('"string" type argument expected');var j=y;typeof y!="function"&&(M=!!y,j=void 0,_=void 0);var te=this._events&&this._events[h];if(te&&te.length&&this._listens(h,j,_)!==!1)return!0;if(M){for(var we in this._eventParents)if(this._eventParents[we].listens(h,y,_,M))return!0}return!1},_listens:function(h,y,_){if(!this._events)return!1;var M=this._events[h]||[];if(!y)return!!M.length;_===this&&(_=void 0);for(var j=0,te=M.length;j<te;j++)if(M[j].fn===y&&M[j].ctx===_)return j;return!1},once:function(h,y,_){if(typeof h=="object")for(var M in h)this._on(M,h[M],y,!0);else{h=kt(h);for(var j=0,te=h.length;j<te;j++)this._on(h[j],y,_,!0)}return this},addEventParent:function(h){return this._eventParents=this._eventParents||{},this._eventParents[re(h)]=h,this},removeEventParent:function(h){return this._eventParents&&delete this._eventParents[re(h)],this},_propagateEvent:function(h){for(var y in this._eventParents)this._eventParents[y].fire(h.type,J({layer:h.target,propagatedFrom:h.target},h),!0)}};Je.addEventListener=Je.on,Je.removeEventListener=Je.clearAllEventListeners=Je.off,Je.addOneTimeEventListener=Je.once,Je.fireEvent=Je.fire,Je.hasEventListeners=Je.listens;var It=os.extend(Je);function gt(h,y,_){this.x=_?Math.round(h):h,this.y=_?Math.round(y):y}var jt=Math.trunc||function(h){return h>0?Math.floor(h):Math.ceil(h)};gt.prototype={clone:function(){return new gt(this.x,this.y)},add:function(h){return this.clone()._add(Dt(h))},_add:function(h){return this.x+=h.x,this.y+=h.y,this},subtract:function(h){return this.clone()._subtract(Dt(h))},_subtract:function(h){return this.x-=h.x,this.y-=h.y,this},divideBy:function(h){return this.clone()._divideBy(h)},_divideBy:function(h){return this.x/=h,this.y/=h,this},multiplyBy:function(h){return this.clone()._multiplyBy(h)},_multiplyBy:function(h){return this.x*=h,this.y*=h,this},scaleBy:function(h){return new gt(this.x*h.x,this.y*h.y)},unscaleBy:function(h){return new gt(this.x/h.x,this.y/h.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=jt(this.x),this.y=jt(this.y),this},distanceTo:function(h){h=Dt(h);var y=h.x-this.x,_=h.y-this.y;return Math.sqrt(y*y+_*_)},equals:function(h){return h=Dt(h),h.x===this.x&&h.y===this.y},contains:function(h){return h=Dt(h),Math.abs(h.x)<=Math.abs(this.x)&&Math.abs(h.y)<=Math.abs(this.y)},toString:function(){return"Point("+Pe(this.x)+", "+Pe(this.y)+")"}};function Dt(h,y,_){return h instanceof gt?h:mt(h)?new gt(h[0],h[1]):h==null?h:typeof h=="object"&&"x"in h&&"y"in h?new gt(h.x,h.y):new gt(h,y,_)}function _e(h,y){if(h)for(var _=y?[h,y]:h,M=0,j=_.length;M<j;M++)this.extend(_[M])}_e.prototype={extend:function(h){var y,_;if(!h)return this;if(h instanceof gt||typeof h[0]=="number"||"x"in h)y=_=Dt(h);else if(h=tt(h),y=h.min,_=h.max,!y||!_)return this;return!this.min&&!this.max?(this.min=y.clone(),this.max=_.clone()):(this.min.x=Math.min(y.x,this.min.x),this.max.x=Math.max(_.x,this.max.x),this.min.y=Math.min(y.y,this.min.y),this.max.y=Math.max(_.y,this.max.y)),this},getCenter:function(h){return Dt((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,h)},getBottomLeft:function(){return Dt(this.min.x,this.max.y)},getTopRight:function(){return Dt(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(h){var y,_;return typeof h[0]=="number"||h instanceof gt?h=Dt(h):h=tt(h),h instanceof _e?(y=h.min,_=h.max):y=_=h,y.x>=this.min.x&&_.x<=this.max.x&&y.y>=this.min.y&&_.y<=this.max.y},intersects:function(h){h=tt(h);var y=this.min,_=this.max,M=h.min,j=h.max,te=j.x>=y.x&&M.x<=_.x,we=j.y>=y.y&&M.y<=_.y;return te&&we},overlaps:function(h){h=tt(h);var y=this.min,_=this.max,M=h.min,j=h.max,te=j.x>y.x&&M.x<_.x,we=j.y>y.y&&M.y<_.y;return te&&we},isValid:function(){return!!(this.min&&this.max)},pad:function(h){var y=this.min,_=this.max,M=Math.abs(y.x-_.x)*h,j=Math.abs(y.y-_.y)*h;return tt(Dt(y.x-M,y.y-j),Dt(_.x+M,_.y+j))},equals:function(h){return h?(h=tt(h),this.min.equals(h.getTopLeft())&&this.max.equals(h.getBottomRight())):!1}};function tt(h,y){return!h||h instanceof _e?h:new _e(h,y)}function Ot(h,y){if(h)for(var _=y?[h,y]:h,M=0,j=_.length;M<j;M++)this.extend(_[M])}Ot.prototype={extend:function(h){var y=this._southWest,_=this._northEast,M,j;if(h instanceof Ct)M=h,j=h;else if(h instanceof Ot){if(M=h._southWest,j=h._northEast,!M||!j)return this}else return h?this.extend(Ht(h)||St(h)):this;return!y&&!_?(this._southWest=new Ct(M.lat,M.lng),this._northEast=new Ct(j.lat,j.lng)):(y.lat=Math.min(M.lat,y.lat),y.lng=Math.min(M.lng,y.lng),_.lat=Math.max(j.lat,_.lat),_.lng=Math.max(j.lng,_.lng)),this},pad:function(h){var y=this._southWest,_=this._northEast,M=Math.abs(y.lat-_.lat)*h,j=Math.abs(y.lng-_.lng)*h;return new Ot(new Ct(y.lat-M,y.lng-j),new Ct(_.lat+M,_.lng+j))},getCenter:function(){return new Ct((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Ct(this.getNorth(),this.getWest())},getSouthEast:function(){return new Ct(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(h){typeof h[0]=="number"||h instanceof Ct||"lat"in h?h=Ht(h):h=St(h);var y=this._southWest,_=this._northEast,M,j;return h instanceof Ot?(M=h.getSouthWest(),j=h.getNorthEast()):M=j=h,M.lat>=y.lat&&j.lat<=_.lat&&M.lng>=y.lng&&j.lng<=_.lng},intersects:function(h){h=St(h);var y=this._southWest,_=this._northEast,M=h.getSouthWest(),j=h.getNorthEast(),te=j.lat>=y.lat&&M.lat<=_.lat,we=j.lng>=y.lng&&M.lng<=_.lng;return te&&we},overlaps:function(h){h=St(h);var y=this._southWest,_=this._northEast,M=h.getSouthWest(),j=h.getNorthEast(),te=j.lat>y.lat&&M.lat<_.lat,we=j.lng>y.lng&&M.lng<_.lng;return te&&we},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(h,y){return h?(h=St(h),this._southWest.equals(h.getSouthWest(),y)&&this._northEast.equals(h.getNorthEast(),y)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function St(h,y){return h instanceof Ot?h:new Ot(h,y)}function Ct(h,y,_){if(isNaN(h)||isNaN(y))throw new Error("Invalid LatLng object: ("+h+", "+y+")");this.lat=+h,this.lng=+y,_!==void 0&&(this.alt=+_)}Ct.prototype={equals:function(h,y){if(!h)return!1;h=Ht(h);var _=Math.max(Math.abs(this.lat-h.lat),Math.abs(this.lng-h.lng));return _<=(y===void 0?1e-9:y)},toString:function(h){return"LatLng("+Pe(this.lat,h)+", "+Pe(this.lng,h)+")"},distanceTo:function(h){return Ma.distance(this,Ht(h))},wrap:function(){return Ma.wrapLatLng(this)},toBounds:function(h){var y=180*h/40075017,_=y/Math.cos(Math.PI/180*this.lat);return St([this.lat-y,this.lng-_],[this.lat+y,this.lng+_])},clone:function(){return new Ct(this.lat,this.lng,this.alt)}};function Ht(h,y,_){return h instanceof Ct?h:mt(h)&&typeof h[0]!="object"?h.length===3?new Ct(h[0],h[1],h[2]):h.length===2?new Ct(h[0],h[1]):null:h==null?h:typeof h=="object"&&"lat"in h?new Ct(h.lat,"lng"in h?h.lng:h.lon,h.alt):y===void 0?null:new Ct(h,y,_)}var da={latLngToPoint:function(h,y){var _=this.projection.project(h),M=this.scale(y);return this.transformation._transform(_,M)},pointToLatLng:function(h,y){var _=this.scale(y),M=this.transformation.untransform(h,_);return this.projection.unproject(M)},project:function(h){return this.projection.project(h)},unproject:function(h){return this.projection.unproject(h)},scale:function(h){return 256*Math.pow(2,h)},zoom:function(h){return Math.log(h/256)/Math.LN2},getProjectedBounds:function(h){if(this.infinite)return null;var y=this.projection.bounds,_=this.scale(h),M=this.transformation.transform(y.min,_),j=this.transformation.transform(y.max,_);return new _e(M,j)},infinite:!1,wrapLatLng:function(h){var y=this.wrapLng?Le(h.lng,this.wrapLng,!0):h.lng,_=this.wrapLat?Le(h.lat,this.wrapLat,!0):h.lat,M=h.alt;return new Ct(_,y,M)},wrapLatLngBounds:function(h){var y=h.getCenter(),_=this.wrapLatLng(y),M=y.lat-_.lat,j=y.lng-_.lng;if(M===0&&j===0)return h;var te=h.getSouthWest(),we=h.getNorthEast(),De=new Ct(te.lat-M,te.lng-j),$e=new Ct(we.lat-M,we.lng-j);return new Ot(De,$e)}},Ma=J({},da,{wrapLng:[-180,180],R:6371e3,distance:function(h,y){var _=Math.PI/180,M=h.lat*_,j=y.lat*_,te=Math.sin((y.lat-h.lat)*_/2),we=Math.sin((y.lng-h.lng)*_/2),De=te*te+Math.cos(M)*Math.cos(j)*we*we,$e=2*Math.atan2(Math.sqrt(De),Math.sqrt(1-De));return this.R*$e}}),is=6378137,xn={R:is,MAX_LATITUDE:85.0511287798,project:function(h){var y=Math.PI/180,_=this.MAX_LATITUDE,M=Math.max(Math.min(_,h.lat),-_),j=Math.sin(M*y);return new gt(this.R*h.lng*y,this.R*Math.log((1+j)/(1-j))/2)},unproject:function(h){var y=180/Math.PI;return new Ct((2*Math.atan(Math.exp(h.y/this.R))-Math.PI/2)*y,h.x*y/this.R)},bounds:(function(){var h=is*Math.PI;return new _e([-h,-h],[h,h])})()};function _i(h,y,_,M){if(mt(h)){this._a=h[0],this._b=h[1],this._c=h[2],this._d=h[3];return}this._a=h,this._b=y,this._c=_,this._d=M}_i.prototype={transform:function(h,y){return this._transform(h.clone(),y)},_transform:function(h,y){return y=y||1,h.x=y*(this._a*h.x+this._b),h.y=y*(this._c*h.y+this._d),h},untransform:function(h,y){return y=y||1,new gt((h.x/y-this._b)/this._a,(h.y/y-this._d)/this._c)}};function Tn(h,y,_,M){return new _i(h,y,_,M)}var kr=J({},Ma,{code:"EPSG:3857",projection:xn,transformation:(function(){var h=.5/(Math.PI*xn.R);return Tn(h,.5,-h,.5)})()}),As=J({},kr,{code:"EPSG:900913"});function Yn(h){return document.createElementNS("http://www.w3.org/2000/svg",h)}function Po(h,y){var _="",M,j,te,we,De,$e;for(M=0,te=h.length;M<te;M++){for(De=h[M],j=0,we=De.length;j<we;j++)$e=De[j],_+=(j?"L":"M")+$e.x+" "+$e.y;_+=y?We.svg?"z":"x":""}return _||"M0 0"}var vs=document.documentElement.style,Ro="ActiveXObject"in window,Zi=Ro&&!document.addEventListener,Xi="msLaunchUri"in navigator&&!("documentMode"in document),Ho=Rn("webkit"),No=Rn("android"),Jr=Rn("android 2")||Rn("android 3"),wn=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ro=No&&Rn("Google")&&wn<537&&!("AudioNode"in window),Re=!!window.opera,K=!Xi&&Rn("chrome"),$=Rn("gecko")&&!Ho&&!Re&&!Ro,ne=!K&&Rn("safari"),Oe=Rn("phantom"),Ie="OTransition"in vs,je=navigator.platform.indexOf("Win")===0,ze=Ro&&"transition"in vs,Se="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Jr,Ue="MozPerspective"in vs,nt=!window.L_DISABLE_3D&&(ze||Se||Ue)&&!Ie&&!Oe,st=typeof orientation!="undefined"||Rn("mobile"),Bt=st&&Ho,Ut=st&&Se,Jt=!window.PointerEvent&&window.MSPointerEvent,Ga=!!(window.PointerEvent||Jt),Ea="ontouchstart"in window||!!window.TouchEvent,Ne=!window.L_NO_TOUCH&&(Ea||Ga),Za=st&&Re,Ws=st&&$,sa=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Xa=(function(){var h=!1;try{var y=Object.defineProperty({},"passive",{get:function(){h=!0}});window.addEventListener("testPassiveEventSupport",Ce,y),window.removeEventListener("testPassiveEventSupport",Ce,y)}catch(_){}return h})(),dn=(function(){return!!document.createElement("canvas").getContext})(),qa=!!(document.createElementNS&&Yn("svg").createSVGRect),Ls=!!qa&&(function(){var h=document.createElement("div");return h.innerHTML="<svg/>",(h.firstChild&&h.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),es=!qa&&(function(){try{var h=document.createElement("div");h.innerHTML='<v:shape adj="1"/>';var y=h.firstChild;return y.style.behavior="url(#default#VML)",y&&typeof y.adj=="object"}catch(_){return!1}})(),Zs=navigator.platform.indexOf("Mac")===0,Bh=navigator.platform.indexOf("Linux")===0;function Rn(h){return navigator.userAgent.toLowerCase().indexOf(h)>=0}var We={ie:Ro,ielt9:Zi,edge:Xi,webkit:Ho,android:No,android23:Jr,androidStock:ro,opera:Re,chrome:K,gecko:$,safari:ne,phantom:Oe,opera12:Ie,win:je,ie3d:ze,webkit3d:Se,gecko3d:Ue,any3d:nt,mobile:st,mobileWebkit:Bt,mobileWebkit3d:Ut,msPointer:Jt,pointer:Ga,touch:Ne,touchNative:Ea,mobileOpera:Za,mobileGecko:Ws,retina:sa,passiveEvents:Xa,canvas:dn,svg:qa,vml:es,inlineSvg:Ls,mac:Zs,linux:Bh},An=We.msPointer?"MSPointerDown":"pointerdown",Sn=We.msPointer?"MSPointerMove":"pointermove",Go=We.msPointer?"MSPointerUp":"pointerup",ts=We.msPointer?"MSPointerCancel":"pointercancel",wt={touchstart:An,touchmove:Sn,touchend:Go,touchcancel:ts},na={touchstart:xi,touchmove:Eo,touchend:Eo,touchcancel:Eo},ta={},ho=!1;function Xl(h,y,_){return y==="touchstart"&&Yi(),na[y]?(_=na[y].bind(this,_),h.addEventListener(wt[y],_,!1),_):(console.warn("wrong event specified:",y),Ce)}function Ii(h,y,_){if(!wt[y]){console.warn("wrong event specified:",y);return}h.removeEventListener(wt[y],_,!1)}function oa(h){ta[h.pointerId]=h}function eh(h){ta[h.pointerId]&&(ta[h.pointerId]=h)}function ti(h){delete ta[h.pointerId]}function Yi(){ho||(document.addEventListener(An,oa,!0),document.addEventListener(Sn,eh,!0),document.addEventListener(Go,ti,!0),document.addEventListener(ts,ti,!0),ho=!0)}function Eo(h,y){if(y.pointerType!==(y.MSPOINTER_TYPE_MOUSE||"mouse")){y.touches=[];for(var _ in ta)y.touches.push(ta[_]);y.changedTouches=[y],h(y)}}function xi(h,y){y.MSPOINTER_TYPE_TOUCH&&y.pointerType===y.MSPOINTER_TYPE_TOUCH&&wa(y),Eo(h,y)}function zs(h){var y={},_,M;for(M in h)_=h[M],y[M]=_&&_.bind?_.bind(h):_;return h=y,y.type="dblclick",y.detail=2,y.isTrusted=!1,y._simulated=!0,y}var Rh=200;function Hn(h,y){h.addEventListener("dblclick",y);var _=0,M;function j(te){if(te.detail!==1){M=te.detail;return}if(!(te.pointerType==="mouse"||te.sourceCapabilities&&!te.sourceCapabilities.firesTouchEvents)){var we=uo(te);if(!(we.some(function($e){return $e instanceof HTMLLabelElement&&$e.attributes.for})&&!we.some(function($e){return $e instanceof HTMLInputElement||$e instanceof HTMLSelectElement}))){var De=Date.now();De-_<=Rh?(M++,M===2&&y(zs(te))):M=1,_=De}}}return h.addEventListener("click",j),{dblclick:y,simDblclick:j}}function La(h,y){h.removeEventListener("dblclick",y.dblclick),h.removeEventListener("click",y.simDblclick)}var ai=sh(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ti=sh(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),th=Ti==="webkitTransition"||Ti==="OTransition"?Ti+"End":"transitionend";function $i(h){return typeof h=="string"?document.getElementById(h):h}function $n(h,y){var _=h.style[y]||h.currentStyle&&h.currentStyle[y];if((!_||_==="auto")&&document.defaultView){var M=document.defaultView.getComputedStyle(h,null);_=M?M[y]:null}return _==="auto"?null:_}function za(h,y,_){var M=document.createElement(h);return M.className=y||"",_&&_.appendChild(M),M}function Va(h){var y=h.parentNode;y&&y.removeChild(h)}function Kn(h){for(;h.firstChild;)h.removeChild(h.firstChild)}function xa(h){var y=h.parentNode;y&&y.lastChild!==h&&y.appendChild(h)}function _r(h){var y=h.parentNode;y&&y.firstChild!==h&&y.insertBefore(h,y.firstChild)}function Yl(h,y){if(h.classList!==void 0)return h.classList.contains(y);var _=rl(h);return _.length>0&&new RegExp("(^|\\s)"+y+"(\\s|$)").test(_)}function fa(h,y){if(h.classList!==void 0)for(var _=kt(y),M=0,j=_.length;M<j;M++)h.classList.add(_[M]);else if(!Yl(h,y)){var te=rl(h);ah(h,(te?te+" ":"")+y)}}function Ds(h,y){h.classList!==void 0?h.classList.remove(y):ah(h,ft((" "+rl(h)+" ").replace(" "+y+" "," ")))}function ah(h,y){h.className.baseVal===void 0?h.className=y:h.className.baseVal=y}function rl(h){return h.correspondingElement&&(h=h.correspondingElement),h.className.baseVal===void 0?h.className:h.className.baseVal}function ys(h,y){"opacity"in h.style?h.style.opacity=y:"filter"in h.style&&hl(h,y)}function hl(h,y){var _=!1,M="DXImageTransform.Microsoft.Alpha";try{_=h.filters.item(M)}catch(j){if(y===1)return}y=Math.round(y*100),_?(_.Enabled=y!==100,_.Opacity=y):h.style.filter+=" progid:"+M+"(opacity="+y+")"}function sh(h){for(var y=document.documentElement.style,_=0;_<h.length;_++)if(h[_]in y)return h[_];return!1}function si(h,y,_){var M=y||new gt(0,0);h.style[ai]=(We.ie3d?"translate("+M.x+"px,"+M.y+"px)":"translate3d("+M.x+"px,"+M.y+"px,0)")+(_?" scale("+_+")":"")}function cs(h,y){h._leaflet_pos=y,We.any3d?si(h,y):(h.style.left=y.x+"px",h.style.top=y.y+"px")}function Ir(h){return h._leaflet_pos||new gt(0,0)}var Ai,Co,$l;if("onselectstart"in document)Ai=function(){Wt(window,"selectstart",wa)},Co=function(){Nt(window,"selectstart",wa)};else{var ni=sh(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ai=function(){if(ni){var h=document.documentElement.style;$l=h[ni],h[ni]="none"}},Co=function(){ni&&(document.documentElement.style[ni]=$l,$l=void 0)}}function Hh(){Wt(window,"dragstart",wa)}function Ki(){Nt(window,"dragstart",wa)}var oi,xr;function ra(h){for(;h.tabIndex===-1;)h=h.parentNode;h.style&&(lo(),oi=h,xr=h.style.outlineStyle,h.style.outlineStyle="none",Wt(window,"keydown",lo))}function lo(){oi&&(oi.style.outlineStyle=xr,oi=void 0,xr=void 0,Nt(window,"keydown",lo))}function Kl(h){do h=h.parentNode;while((!h.offsetWidth||!h.offsetHeight)&&h!==document.body);return h}function nh(h){var y=h.getBoundingClientRect();return{x:y.width/h.offsetWidth||1,y:y.height/h.offsetHeight||1,boundingClientRect:y}}var fn={__proto__:null,TRANSFORM:ai,TRANSITION:Ti,TRANSITION_END:th,get:$i,getStyle:$n,create:za,remove:Va,empty:Kn,toFront:xa,toBack:_r,hasClass:Yl,addClass:fa,removeClass:Ds,setClass:ah,getClass:rl,setOpacity:ys,testProp:sh,setTransform:si,setPosition:cs,getPosition:Ir,get disableTextSelection(){return Ai},get enableTextSelection(){return Co},disableImageDrag:Hh,enableImageDrag:Ki,preventOutline:ra,restoreOutline:lo,getSizedParentNode:Kl,getScale:nh};function Wt(h,y,_,M){if(y&&typeof y=="object")for(var j in y)Os(h,j,y[j],_);else{y=kt(y);for(var te=0,we=y.length;te<we;te++)Os(h,y[te],_,M)}return this}var Ba="_leaflet_events";function Nt(h,y,_,M){if(arguments.length===1)$a(h),delete h[Ba];else if(y&&typeof y=="object")for(var j in y)Pn(h,j,y[j],_);else if(y=kt(y),arguments.length===2)$a(h,function(De){return Et(y,De)!==-1});else for(var te=0,we=y.length;te<we;te++)Pn(h,y[te],_,M);return this}function $a(h,y){for(var _ in h[Ba]){var M=_.split(/\d/)[0];(!y||y(M))&&Pn(h,M,null,null,_)}}var fo={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Os(h,y,_,M){var j=y+re(_)+(M?"_"+re(M):"");if(h[Ba]&&h[Ba][j])return this;var te=function(De){return _.call(M||h,De||window.event)},we=te;!We.touchNative&&We.pointer&&y.indexOf("touch")===0?te=Xl(h,y,te):We.touch&&y==="dblclick"?te=Hn(h,te):"addEventListener"in h?y==="touchstart"||y==="touchmove"||y==="wheel"||y==="mousewheel"?h.addEventListener(fo[y]||y,te,We.passiveEvents?{passive:!1}:!1):y==="mouseenter"||y==="mouseleave"?(te=function(De){De=De||window.event,En(h,De)&&we(De)},h.addEventListener(fo[y],te,!1)):h.addEventListener(y,we,!1):h.attachEvent("on"+y,te),h[Ba]=h[Ba]||{},h[Ba][j]=te}function Pn(h,y,_,M,j){j=j||y+re(_)+(M?"_"+re(M):"");var te=h[Ba]&&h[Ba][j];if(!te)return this;!We.touchNative&&We.pointer&&y.indexOf("touch")===0?Ii(h,y,te):We.touch&&y==="dblclick"?La(h,te):"removeEventListener"in h?h.removeEventListener(fo[y]||y,te,!1):h.detachEvent("on"+y,te),h[Ba][j]=null}function ks(h){return h.stopPropagation?h.stopPropagation():h.originalEvent?h.originalEvent._stopped=!0:h.cancelBubble=!0,this}function Qn(h){return Os(h,"wheel",ks),this}function co(h){return Wt(h,"mousedown touchstart dblclick contextmenu",ks),h._leaflet_disable_click=!0,this}function wa(h){return h.preventDefault?h.preventDefault():h.returnValue=!1,this}function po(h){return wa(h),ks(h),this}function uo(h){if(h.composedPath)return h.composedPath();for(var y=[],_=h.target;_;)y.push(_),_=_.parentNode;return y}function Tr(h,y){if(!y)return new gt(h.clientX,h.clientY);var _=nh(y),M=_.boundingClientRect;return new gt((h.clientX-M.left)/_.x-y.clientLeft,(h.clientY-M.top)/_.y-y.clientTop)}var Jn=We.linux&&We.chrome?window.devicePixelRatio:We.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Xs(h){return We.edge?h.wheelDeltaY/2:h.deltaY&&h.deltaMode===0?-h.deltaY/Jn:h.deltaY&&h.deltaMode===1?-h.deltaY*20:h.deltaY&&h.deltaMode===2?-h.deltaY*60:h.deltaX||h.deltaZ?0:h.wheelDelta?(h.wheelDeltaY||h.wheelDelta)/2:h.detail&&Math.abs(h.detail)<32765?-h.detail*20:h.detail?h.detail/-32765*60:0}function En(h,y){var _=y.relatedTarget;if(!_)return!0;try{for(;_&&_!==h;)_=_.parentNode}catch(M){return!1}return _!==h}var ll={__proto__:null,on:Wt,off:Nt,stopPropagation:ks,disableScrollPropagation:Qn,disableClickPropagation:co,preventDefault:wa,stop:po,getPropagationPath:uo,getMousePosition:Tr,getWheelDelta:Xs,isExternalTarget:En,addListener:Wt,removeListener:Nt},Ar=It.extend({run:function(h,y,_,M){this.stop(),this._el=h,this._inProgress=!0,this._duration=_||.25,this._easeOutPower=1/Math.max(M||.5,.2),this._startPos=Ir(h),this._offset=y.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=ma(this._animate,this),this._step()},_step:function(h){var y=+new Date-this._startTime,_=this._duration*1e3;y<_?this._runFrame(this._easeOut(y/_),h):(this._runFrame(1),this._complete())},_runFrame:function(h,y){var _=this._startPos.add(this._offset.multiplyBy(h));y&&_._round(),cs(this._el,_),this.fire("step")},_complete:function(){pa(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(h){return 1-Math.pow(1-h,this._easeOutPower)}}),Oa=It.extend({options:{crs:kr,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(h,y){y=it(this,y),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(h),this._initLayout(),this._onResize=E(this._onResize,this),this._initEvents(),y.maxBounds&&this.setMaxBounds(y.maxBounds),y.zoom!==void 0&&(this._zoom=this._limitZoom(y.zoom)),y.center&&y.zoom!==void 0&&this.setView(Ht(y.center),y.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ti&&We.any3d&&!We.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Wt(this._proxy,th,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(h,y,_){if(y=y===void 0?this._zoom:this._limitZoom(y),h=this._limitCenter(Ht(h),y,this.options.maxBounds),_=_||{},this._stop(),this._loaded&&!_.reset&&_!==!0){_.animate!==void 0&&(_.zoom=J({animate:_.animate},_.zoom),_.pan=J({animate:_.animate,duration:_.duration},_.pan));var M=this._zoom!==y?this._tryAnimatedZoom&&this._tryAnimatedZoom(h,y,_.zoom):this._tryAnimatedPan(h,_.pan);if(M)return clearTimeout(this._sizeTimer),this}return this._resetView(h,y,_.pan&&_.pan.noMoveStart),this},setZoom:function(h,y){return this._loaded?this.setView(this.getCenter(),h,{zoom:y}):(this._zoom=h,this)},zoomIn:function(h,y){return h=h||(We.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+h,y)},zoomOut:function(h,y){return h=h||(We.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-h,y)},setZoomAround:function(h,y,_){var M=this.getZoomScale(y),j=this.getSize().divideBy(2),te=h instanceof gt?h:this.latLngToContainerPoint(h),we=te.subtract(j).multiplyBy(1-1/M),De=this.containerPointToLatLng(j.add(we));return this.setView(De,y,{zoom:_})},_getBoundsCenterZoom:function(h,y){y=y||{},h=h.getBounds?h.getBounds():St(h);var _=Dt(y.paddingTopLeft||y.padding||[0,0]),M=Dt(y.paddingBottomRight||y.padding||[0,0]),j=this.getBoundsZoom(h,!1,_.add(M));if(j=typeof y.maxZoom=="number"?Math.min(y.maxZoom,j):j,j===1/0)return{center:h.getCenter(),zoom:j};var te=M.subtract(_).divideBy(2),we=this.project(h.getSouthWest(),j),De=this.project(h.getNorthEast(),j),$e=this.unproject(we.add(De).divideBy(2).add(te),j);return{center:$e,zoom:j}},fitBounds:function(h,y){if(h=St(h),!h.isValid())throw new Error("Bounds are not valid.");var _=this._getBoundsCenterZoom(h,y);return this.setView(_.center,_.zoom,y)},fitWorld:function(h){return this.fitBounds([[-90,-180],[90,180]],h)},panTo:function(h,y){return this.setView(h,this._zoom,{pan:y})},panBy:function(h,y){if(h=Dt(h).round(),y=y||{},!h.x&&!h.y)return this.fire("moveend");if(y.animate!==!0&&!this.getSize().contains(h))return this._resetView(this.unproject(this.project(this.getCenter()).add(h)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ar,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),y.noMoveStart||this.fire("movestart"),y.animate!==!1){fa(this._mapPane,"leaflet-pan-anim");var _=this._getMapPanePos().subtract(h).round();this._panAnim.run(this._mapPane,_,y.duration||.25,y.easeLinearity)}else this._rawPanBy(h),this.fire("move").fire("moveend");return this},flyTo:function(h,y,_){if(_=_||{},_.animate===!1||!We.any3d)return this.setView(h,y,_);this._stop();var M=this.project(this.getCenter()),j=this.project(h),te=this.getSize(),we=this._zoom;h=Ht(h),y=y===void 0?we:y;var De=Math.max(te.x,te.y),$e=De*this.getZoomScale(we,y),ct=j.distanceTo(M)||1,Mt=1.42,Kt=Mt*Mt;function ka(Ps){var zo=Ps?-1:1,Mi=Ps?$e:De,Li=$e*$e-De*De+zo*Kt*Kt*ct*ct,ir=2*Mi*Kt*ct,ci=Li/ir,Do=Math.sqrt(ci*ci+1)-ci,zi=Do<1e-9?-18:Math.log(Do);return zi}function Ys(Ps){return(Math.exp(Ps)-Math.exp(-Ps))/2}function Rs(Ps){return(Math.exp(Ps)+Math.exp(-Ps))/2}function Oo(Ps){return Ys(Ps)/Rs(Ps)}var Ya=ka(0);function Ha(Ps){return De*(Rs(Ya)/Rs(Ya+Mt*Ps))}function Pa(Ps){return De*(Rs(Ya)*Oo(Ya+Mt*Ps)-Ys(Ya))/Kt}function or(Ps){return 1-Math.pow(1-Ps,1.5)}var Lo=Date.now(),_s=(ka(1)-Ya)/Mt,ko=_.duration?1e3*_.duration:1e3*_s*.8;function ao(){var Ps=(Date.now()-Lo)/ko,zo=or(Ps)*_s;Ps<=1?(this._flyToFrame=ma(ao,this),this._move(this.unproject(M.add(j.subtract(M).multiplyBy(Pa(zo)/ct)),we),this.getScaleZoom(De/Ha(zo),we),{flyTo:!0})):this._move(h,y)._moveEnd(!0)}return this._moveStart(!0,_.noMoveStart),ao.call(this),this},flyToBounds:function(h,y){var _=this._getBoundsCenterZoom(h,y);return this.flyTo(_.center,_.zoom,y)},setMaxBounds:function(h){return h=St(h),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),h.isValid()?(this.options.maxBounds=h,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(h){var y=this.options.minZoom;return this.options.minZoom=h,this._loaded&&y!==h&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(h):this},setMaxZoom:function(h){var y=this.options.maxZoom;return this.options.maxZoom=h,this._loaded&&y!==h&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(h):this},panInsideBounds:function(h,y){this._enforcingBounds=!0;var _=this.getCenter(),M=this._limitCenter(_,this._zoom,St(h));return _.equals(M)||this.panTo(M,y),this._enforcingBounds=!1,this},panInside:function(h,y){y=y||{};var _=Dt(y.paddingTopLeft||y.padding||[0,0]),M=Dt(y.paddingBottomRight||y.padding||[0,0]),j=this.project(this.getCenter()),te=this.project(h),we=this.getPixelBounds(),De=tt([we.min.add(_),we.max.subtract(M)]),$e=De.getSize();if(!De.contains(te)){this._enforcingBounds=!0;var ct=te.subtract(De.getCenter()),Mt=De.extend(te).getSize().subtract($e);j.x+=ct.x<0?-Mt.x:Mt.x,j.y+=ct.y<0?-Mt.y:Mt.y,this.panTo(this.unproject(j),y),this._enforcingBounds=!1}return this},invalidateSize:function(h){if(!this._loaded)return this;h=J({animate:!1,pan:!0},h===!0?{animate:!0}:h);var y=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var _=this.getSize(),M=y.divideBy(2).round(),j=_.divideBy(2).round(),te=M.subtract(j);return!te.x&&!te.y?this:(h.animate&&h.pan?this.panBy(te):(h.pan&&this._rawPanBy(te),this.fire("move"),h.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(E(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:y,newSize:_}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(h){if(h=this._locateOptions=J({timeout:1e4,watch:!1},h),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var y=E(this._handleGeolocationResponse,this),_=E(this._handleGeolocationError,this);return h.watch?this._locationWatchId=navigator.geolocation.watchPosition(y,_,h):navigator.geolocation.getCurrentPosition(y,_,h),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(h){if(this._container._leaflet_id){var y=h.code,_=h.message||(y===1?"permission denied":y===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:y,message:"Geolocation error: "+_+"."})}},_handleGeolocationResponse:function(h){if(this._container._leaflet_id){var y=h.coords.latitude,_=h.coords.longitude,M=new Ct(y,_),j=M.toBounds(h.coords.accuracy*2),te=this._locateOptions;if(te.setView){var we=this.getBoundsZoom(j);this.setView(M,te.maxZoom?Math.min(we,te.maxZoom):we)}var De={latlng:M,bounds:j,timestamp:h.timestamp};for(var $e in h.coords)typeof h.coords[$e]=="number"&&(De[$e]=h.coords[$e]);this.fire("locationfound",De)}},addHandler:function(h,y){if(!y)return this;var _=this[h]=new y(this);return this._handlers.push(_),this.options[h]&&_.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(y){this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Va(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(pa(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var h;for(h in this._layers)this._layers[h].remove();for(h in this._panes)Va(this._panes[h]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(h,y){var _="leaflet-pane"+(h?" leaflet-"+h.replace("Pane","")+"-pane":""),M=za("div",_,y||this._mapPane);return h&&(this._panes[h]=M),M},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var h=this.getPixelBounds(),y=this.unproject(h.getBottomLeft()),_=this.unproject(h.getTopRight());return new Ot(y,_)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(h,y,_){h=St(h),_=Dt(_||[0,0]);var M=this.getZoom()||0,j=this.getMinZoom(),te=this.getMaxZoom(),we=h.getNorthWest(),De=h.getSouthEast(),$e=this.getSize().subtract(_),ct=tt(this.project(De,M),this.project(we,M)).getSize(),Mt=We.any3d?this.options.zoomSnap:1,Kt=$e.x/ct.x,ka=$e.y/ct.y,Ys=y?Math.max(Kt,ka):Math.min(Kt,ka);return M=this.getScaleZoom(Ys,M),Mt&&(M=Math.round(M/(Mt/100))*(Mt/100),M=y?Math.ceil(M/Mt)*Mt:Math.floor(M/Mt)*Mt),Math.max(j,Math.min(te,M))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new gt(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(h,y){var _=this._getTopLeftPoint(h,y);return new _e(_,_.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(h){return this.options.crs.getProjectedBounds(h===void 0?this.getZoom():h)},getPane:function(h){return typeof h=="string"?this._panes[h]:h},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(h,y){var _=this.options.crs;return y=y===void 0?this._zoom:y,_.scale(h)/_.scale(y)},getScaleZoom:function(h,y){var _=this.options.crs;y=y===void 0?this._zoom:y;var M=_.zoom(h*_.scale(y));return isNaN(M)?1/0:M},project:function(h,y){return y=y===void 0?this._zoom:y,this.options.crs.latLngToPoint(Ht(h),y)},unproject:function(h,y){return y=y===void 0?this._zoom:y,this.options.crs.pointToLatLng(Dt(h),y)},layerPointToLatLng:function(h){var y=Dt(h).add(this.getPixelOrigin());return this.unproject(y)},latLngToLayerPoint:function(h){var y=this.project(Ht(h))._round();return y._subtract(this.getPixelOrigin())},wrapLatLng:function(h){return this.options.crs.wrapLatLng(Ht(h))},wrapLatLngBounds:function(h){return this.options.crs.wrapLatLngBounds(St(h))},distance:function(h,y){return this.options.crs.distance(Ht(h),Ht(y))},containerPointToLayerPoint:function(h){return Dt(h).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(h){return Dt(h).add(this._getMapPanePos())},containerPointToLatLng:function(h){var y=this.containerPointToLayerPoint(Dt(h));return this.layerPointToLatLng(y)},latLngToContainerPoint:function(h){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Ht(h)))},mouseEventToContainerPoint:function(h){return Tr(h,this._container)},mouseEventToLayerPoint:function(h){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(h))},mouseEventToLatLng:function(h){return this.layerPointToLatLng(this.mouseEventToLayerPoint(h))},_initContainer:function(h){var y=this._container=$i(h);if(y){if(y._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Wt(y,"scroll",this._onScroll,this),this._containerId=re(y)},_initLayout:function(){var h=this._container;this._fadeAnimated=this.options.fadeAnimation&&We.any3d,fa(h,"leaflet-container"+(We.touch?" leaflet-touch":"")+(We.retina?" leaflet-retina":"")+(We.ielt9?" leaflet-oldie":"")+(We.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var y=$n(h,"position");y!=="absolute"&&y!=="relative"&&y!=="fixed"&&y!=="sticky"&&(h.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var h=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),cs(this._mapPane,new gt(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(fa(h.markerPane,"leaflet-zoom-hide"),fa(h.shadowPane,"leaflet-zoom-hide"))},_resetView:function(h,y,_){cs(this._mapPane,new gt(0,0));var M=!this._loaded;this._loaded=!0,y=this._limitZoom(y),this.fire("viewprereset");var j=this._zoom!==y;this._moveStart(j,_)._move(h,y)._moveEnd(j),this.fire("viewreset"),M&&this.fire("load")},_moveStart:function(h,y){return h&&this.fire("zoomstart"),y||this.fire("movestart"),this},_move:function(h,y,_,M){y===void 0&&(y=this._zoom);var j=this._zoom!==y;return this._zoom=y,this._lastCenter=h,this._pixelOrigin=this._getNewPixelOrigin(h),M?_&&_.pinch&&this.fire("zoom",_):((j||_&&_.pinch)&&this.fire("zoom",_),this.fire("move",_)),this},_moveEnd:function(h){return h&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return pa(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(h){cs(this._mapPane,this._getMapPanePos().subtract(h))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(h){this._targets={},this._targets[re(this._container)]=this;var y=h?Nt:Wt;y(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&y(window,"resize",this._onResize,this),We.any3d&&this.options.transform3DLimit&&(h?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){pa(this._resizeRequest),this._resizeRequest=ma(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var h=this._getMapPanePos();Math.max(Math.abs(h.x),Math.abs(h.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(h,y){for(var _=[],M,j=y==="mouseout"||y==="mouseover",te=h.target||h.srcElement,we=!1;te;){if(M=this._targets[re(te)],M&&(y==="click"||y==="preclick")&&this._draggableMoved(M)){we=!0;break}if(M&&M.listens(y,!0)&&(j&&!En(te,h)||(_.push(M),j))||te===this._container)break;te=te.parentNode}return!_.length&&!we&&!j&&this.listens(y,!0)&&(_=[this]),_},_isClickDisabled:function(h){for(;h&&h!==this._container;){if(h._leaflet_disable_click)return!0;h=h.parentNode}},_handleDOMEvent:function(h){var y=h.target||h.srcElement;if(!(!this._loaded||y._leaflet_disable_events||h.type==="click"&&this._isClickDisabled(y))){var _=h.type;_==="mousedown"&&ra(y),this._fireDOMEvent(h,_)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(h,y,_){if(h.type==="click"){var M=J({},h);M.type="preclick",this._fireDOMEvent(M,M.type,_)}var j=this._findEventTargets(h,y);if(_){for(var te=[],we=0;we<_.length;we++)_[we].listens(y,!0)&&te.push(_[we]);j=te.concat(j)}if(j.length){y==="contextmenu"&&wa(h);var De=j[0],$e={originalEvent:h};if(h.type!=="keypress"&&h.type!=="keydown"&&h.type!=="keyup"){var ct=De.getLatLng&&(!De._radius||De._radius<=10);$e.containerPoint=ct?this.latLngToContainerPoint(De.getLatLng()):this.mouseEventToContainerPoint(h),$e.layerPoint=this.containerPointToLayerPoint($e.containerPoint),$e.latlng=ct?De.getLatLng():this.layerPointToLatLng($e.layerPoint)}for(we=0;we<j.length;we++)if(j[we].fire(y,$e,!0),$e.originalEvent._stopped||j[we].options.bubblingMouseEvents===!1&&Et(this._mouseEvents,y)!==-1)return}},_draggableMoved:function(h){return h=h.dragging&&h.dragging.enabled()?h:this,h.dragging&&h.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var h=0,y=this._handlers.length;h<y;h++)this._handlers[h].disable()},whenReady:function(h,y){return this._loaded?h.call(y||this,{target:this}):this.on("load",h,y),this},_getMapPanePos:function(){return Ir(this._mapPane)||new gt(0,0)},_moved:function(){var h=this._getMapPanePos();return h&&!h.equals([0,0])},_getTopLeftPoint:function(h,y){var _=h&&y!==void 0?this._getNewPixelOrigin(h,y):this.getPixelOrigin();return _.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(h,y){var _=this.getSize()._divideBy(2);return this.project(h,y)._subtract(_)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(h,y,_){var M=this._getNewPixelOrigin(_,y);return this.project(h,y)._subtract(M)},_latLngBoundsToNewLayerBounds:function(h,y,_){var M=this._getNewPixelOrigin(_,y);return tt([this.project(h.getSouthWest(),y)._subtract(M),this.project(h.getNorthWest(),y)._subtract(M),this.project(h.getSouthEast(),y)._subtract(M),this.project(h.getNorthEast(),y)._subtract(M)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(h){return this.latLngToLayerPoint(h).subtract(this._getCenterLayerPoint())},_limitCenter:function(h,y,_){if(!_)return h;var M=this.project(h,y),j=this.getSize().divideBy(2),te=new _e(M.subtract(j),M.add(j)),we=this._getBoundsOffset(te,_,y);return Math.abs(we.x)<=1&&Math.abs(we.y)<=1?h:this.unproject(M.add(we),y)},_limitOffset:function(h,y){if(!y)return h;var _=this.getPixelBounds(),M=new _e(_.min.add(h),_.max.add(h));return h.add(this._getBoundsOffset(M,y))},_getBoundsOffset:function(h,y,_){var M=tt(this.project(y.getNorthEast(),_),this.project(y.getSouthWest(),_)),j=M.min.subtract(h.min),te=M.max.subtract(h.max),we=this._rebound(j.x,-te.x),De=this._rebound(j.y,-te.y);return new gt(we,De)},_rebound:function(h,y){return h+y>0?Math.round(h-y)/2:Math.max(0,Math.ceil(h))-Math.max(0,Math.floor(y))},_limitZoom:function(h){var y=this.getMinZoom(),_=this.getMaxZoom(),M=We.any3d?this.options.zoomSnap:1;return M&&(h=Math.round(h/M)*M),Math.max(y,Math.min(_,h))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ds(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(h,y){var _=this._getCenterOffset(h)._trunc();return(y&&y.animate)!==!0&&!this.getSize().contains(_)?!1:(this.panBy(_,y),!0)},_createAnimProxy:function(){var h=this._proxy=za("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(h),this.on("zoomanim",function(y){var _=ai,M=this._proxy.style[_];si(this._proxy,this.project(y.center,y.zoom),this.getZoomScale(y.zoom,1)),M===this._proxy.style[_]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Va(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var h=this.getCenter(),y=this.getZoom();si(this._proxy,this.project(h,y),this.getZoomScale(y,1))},_catchTransitionEnd:function(h){this._animatingZoom&&h.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(h,y,_){if(this._animatingZoom)return!0;if(_=_||{},!this._zoomAnimated||_.animate===!1||this._nothingToAnimate()||Math.abs(y-this._zoom)>this.options.zoomAnimationThreshold)return!1;var M=this.getZoomScale(y),j=this._getCenterOffset(h)._divideBy(1-1/M);return _.animate!==!0&&!this.getSize().contains(j)?!1:(ma(function(){this._moveStart(!0,_.noMoveStart||!1)._animateZoom(h,y,!0)},this),!0)},_animateZoom:function(h,y,_,M){this._mapPane&&(_&&(this._animatingZoom=!0,this._animateToCenter=h,this._animateToZoom=y,fa(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:h,zoom:y,noUpdate:M}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(E(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ds(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Ka(h,y){return new Oa(h,y)}var vn=os.extend({options:{position:"topright"},initialize:function(h){it(this,h)},getPosition:function(){return this.options.position},setPosition:function(h){var y=this._map;return y&&y.removeControl(this),this.options.position=h,y&&y.addControl(this),this},getContainer:function(){return this._container},addTo:function(h){this.remove(),this._map=h;var y=this._container=this.onAdd(h),_=this.getPosition(),M=h._controlCorners[_];return fa(y,"leaflet-control"),_.indexOf("bottom")!==-1?M.insertBefore(y,M.firstChild):M.appendChild(y),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Va(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(h){this._map&&h&&h.screenX>0&&h.screenY>0&&this._map.getContainer().focus()}}),ua=function(h){return new vn(h)};Oa.include({addControl:function(h){return h.addTo(this),this},removeControl:function(h){return h.remove(),this},_initControlPos:function(){var h=this._controlCorners={},y="leaflet-",_=this._controlContainer=za("div",y+"control-container",this._container);function M(j,te){var we=y+j+" "+y+te;h[j+te]=za("div",we,_)}M("top","left"),M("top","right"),M("bottom","left"),M("bottom","right")},_clearControlPos:function(){for(var h in this._controlCorners)Va(this._controlCorners[h]);Va(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var ia=vn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(h,y,_,M){return _<M?-1:M<_?1:0}},initialize:function(h,y,_){it(this,_),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var M in h)this._addLayer(h[M],M);for(M in y)this._addLayer(y[M],M,!0)},onAdd:function(h){this._initLayout(),this._update(),this._map=h,h.on("zoomend",this._checkDisabledLayers,this);for(var y=0;y<this._layers.length;y++)this._layers[y].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(h){return vn.prototype.addTo.call(this,h),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var h=0;h<this._layers.length;h++)this._layers[h].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(h,y){return this._addLayer(h,y),this._map?this._update():this},addOverlay:function(h,y){return this._addLayer(h,y,!0),this._map?this._update():this},removeLayer:function(h){h.off("add remove",this._onLayerChange,this);var y=this._getLayer(re(h));return y&&this._layers.splice(this._layers.indexOf(y),1),this._map?this._update():this},expand:function(){fa(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var h=this._map.getSize().y-(this._container.offsetTop+50);return h<this._section.clientHeight?(fa(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=h+"px"):Ds(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ds(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var h="leaflet-control-layers",y=this._container=za("div",h),_=this.options.collapsed;y.setAttribute("aria-haspopup",!0),co(y),Qn(y);var M=this._section=za("section",h+"-list");_&&(this._map.on("click",this.collapse,this),Wt(y,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var j=this._layersLink=za("a",h+"-toggle",y);j.href="#",j.title="Layers",j.setAttribute("role","button"),Wt(j,{keydown:function(te){te.keyCode===13&&this._expandSafely()},click:function(te){wa(te),this._expandSafely()}},this),_||this.expand(),this._baseLayersList=za("div",h+"-base",M),this._separator=za("div",h+"-separator",M),this._overlaysList=za("div",h+"-overlays",M),y.appendChild(M)},_getLayer:function(h){for(var y=0;y<this._layers.length;y++)if(this._layers[y]&&re(this._layers[y].layer)===h)return this._layers[y]},_addLayer:function(h,y,_){this._map&&h.on("add remove",this._onLayerChange,this),this._layers.push({layer:h,name:y,overlay:_}),this.options.sortLayers&&this._layers.sort(E(function(M,j){return this.options.sortFunction(M.layer,j.layer,M.name,j.name)},this)),this.options.autoZIndex&&h.setZIndex&&(this._lastZIndex++,h.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Kn(this._baseLayersList),Kn(this._overlaysList),this._layerControlInputs=[];var h,y,_,M,j=0;for(_=0;_<this._layers.length;_++)M=this._layers[_],this._addItem(M),y=y||M.overlay,h=h||!M.overlay,j+=M.overlay?0:1;return this.options.hideSingleBase&&(h=h&&j>1,this._baseLayersList.style.display=h?"":"none"),this._separator.style.display=y&&h?"":"none",this},_onLayerChange:function(h){this._handlingClick||this._update();var y=this._getLayer(re(h.target)),_=y.overlay?h.type==="add"?"overlayadd":"overlayremove":h.type==="add"?"baselayerchange":null;_&&this._map.fire(_,y)},_createRadioElement:function(h,y){var _='<input type="radio" class="leaflet-control-layers-selector" name="'+h+'"'+(y?' checked="checked"':"")+"/>",M=document.createElement("div");return M.innerHTML=_,M.firstChild},_addItem:function(h){var y=document.createElement("label"),_=this._map.hasLayer(h.layer),M;h.overlay?(M=document.createElement("input"),M.type="checkbox",M.className="leaflet-control-layers-selector",M.defaultChecked=_):M=this._createRadioElement("leaflet-base-layers_"+re(this),_),this._layerControlInputs.push(M),M.layerId=re(h.layer),Wt(M,"click",this._onInputClick,this);var j=document.createElement("span");j.innerHTML=" "+h.name;var te=document.createElement("span");y.appendChild(te),te.appendChild(M),te.appendChild(j);var we=h.overlay?this._overlaysList:this._baseLayersList;return we.appendChild(y),this._checkDisabledLayers(),y},_onInputClick:function(){if(!this._preventClick){var h=this._layerControlInputs,y,_,M=[],j=[];this._handlingClick=!0;for(var te=h.length-1;te>=0;te--)y=h[te],_=this._getLayer(y.layerId).layer,y.checked?M.push(_):y.checked||j.push(_);for(te=0;te<j.length;te++)this._map.hasLayer(j[te])&&this._map.removeLayer(j[te]);for(te=0;te<M.length;te++)this._map.hasLayer(M[te])||this._map.addLayer(M[te]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var h=this._layerControlInputs,y,_,M=this._map.getZoom(),j=h.length-1;j>=0;j--)y=h[j],_=this._getLayer(y.layerId).layer,y.disabled=_.options.minZoom!==void 0&&M<_.options.minZoom||_.options.maxZoom!==void 0&&M>_.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var h=this._section;this._preventClick=!0,Wt(h,"click",wa),this.expand();var y=this;setTimeout(function(){Nt(h,"click",wa),y._preventClick=!1})}}),oh=function(h,y,_){return new ia(h,y,_)},Sa=vn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(h){var y="leaflet-control-zoom",_=za("div",y+" leaflet-bar"),M=this.options;return this._zoomInButton=this._createButton(M.zoomInText,M.zoomInTitle,y+"-in",_,this._zoomIn),this._zoomOutButton=this._createButton(M.zoomOutText,M.zoomOutTitle,y+"-out",_,this._zoomOut),this._updateDisabled(),h.on("zoomend zoomlevelschange",this._updateDisabled,this),_},onRemove:function(h){h.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(h){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(h.shiftKey?3:1))},_zoomOut:function(h){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(h.shiftKey?3:1))},_createButton:function(h,y,_,M,j){var te=za("a",_,M);return te.innerHTML=h,te.href="#",te.title=y,te.setAttribute("role","button"),te.setAttribute("aria-label",y),co(te),Wt(te,"click",po),Wt(te,"click",j,this),Wt(te,"click",this._refocusOnMap,this),te},_updateDisabled:function(){var h=this._map,y="leaflet-disabled";Ds(this._zoomInButton,y),Ds(this._zoomOutButton,y),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||h._zoom===h.getMinZoom())&&(fa(this._zoomOutButton,y),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||h._zoom===h.getMaxZoom())&&(fa(this._zoomInButton,y),this._zoomInButton.setAttribute("aria-disabled","true"))}});Oa.mergeOptions({zoomControl:!0}),Oa.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Sa,this.addControl(this.zoomControl))});var dl=function(h){return new Sa(h)},Mo=vn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(h){var y="leaflet-control-scale",_=za("div",y),M=this.options;return this._addScales(M,y+"-line",_),h.on(M.updateWhenIdle?"moveend":"move",this._update,this),h.whenReady(this._update,this),_},onRemove:function(h){h.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(h,y,_){h.metric&&(this._mScale=za("div",y,_)),h.imperial&&(this._iScale=za("div",y,_))},_update:function(){var h=this._map,y=h.getSize().y/2,_=h.distance(h.containerPointToLatLng([0,y]),h.containerPointToLatLng([this.options.maxWidth,y]));this._updateScales(_)},_updateScales:function(h){this.options.metric&&h&&this._updateMetric(h),this.options.imperial&&h&&this._updateImperial(h)},_updateMetric:function(h){var y=this._getRoundNum(h),_=y<1e3?y+" m":y/1e3+" km";this._updateScale(this._mScale,_,y/h)},_updateImperial:function(h){var y=h*3.2808399,_,M,j;y>5280?(_=y/5280,M=this._getRoundNum(_),this._updateScale(this._iScale,M+" mi",M/_)):(j=this._getRoundNum(y),this._updateScale(this._iScale,j+" ft",j/y))},_updateScale:function(h,y,_){h.style.width=Math.round(this.options.maxWidth*_)+"px",h.innerHTML=y},_getRoundNum:function(h){var y=Math.pow(10,(Math.floor(h)+"").length-1),_=h/y;return _=_>=10?10:_>=5?5:_>=3?3:_>=2?2:1,y*_}}),Sr=function(h){return new Mo(h)},Pr='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ql=vn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(We.inlineSvg?Pr+" ":"")+"Leaflet</a>"},initialize:function(h){it(this,h),this._attributions={}},onAdd:function(h){h.attributionControl=this,this._container=za("div","leaflet-control-attribution"),co(this._container);for(var y in h._layers)h._layers[y].getAttribution&&this.addAttribution(h._layers[y].getAttribution());return this._update(),h.on("layeradd",this._addAttribution,this),this._container},onRemove:function(h){h.off("layeradd",this._addAttribution,this)},_addAttribution:function(h){h.layer.getAttribution&&(this.addAttribution(h.layer.getAttribution()),h.layer.once("remove",function(){this.removeAttribution(h.layer.getAttribution())},this))},setPrefix:function(h){return this.options.prefix=h,this._update(),this},addAttribution:function(h){return h?(this._attributions[h]||(this._attributions[h]=0),this._attributions[h]++,this._update(),this):this},removeAttribution:function(h){return h?(this._attributions[h]&&(this._attributions[h]--,this._update()),this):this},_update:function(){if(this._map){var h=[];for(var y in this._attributions)this._attributions[y]&&h.push(y);var _=[];this.options.prefix&&_.push(this.options.prefix),h.length&&_.push(h.join(", ")),this._container.innerHTML=_.join(' <span aria-hidden="true">|</span> ')}}});Oa.mergeOptions({attributionControl:!0}),Oa.addInitHook(function(){this.options.attributionControl&&new Ql().addTo(this)});var fl=function(h){return new Ql(h)};vn.Layers=ia,vn.Zoom=Sa,vn.Scale=Mo,vn.Attribution=Ql,ua.layers=oh,ua.zoom=dl,ua.scale=Sr,ua.attribution=fl;var Fo=os.extend({initialize:function(h){this._map=h},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Fo.addTo=function(h,y){return h.addHandler(y,this),this};var rc={Events:Je},Jl=We.touch?"touchstart mousedown":"mousedown",js=It.extend({options:{clickTolerance:3},initialize:function(h,y,_,M){it(this,M),this._element=h,this._dragStartTarget=y||h,this._preventOutline=_},enable:function(){this._enabled||(Wt(this._dragStartTarget,Jl,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(js._dragging===this&&this.finishDrag(!0),Nt(this._dragStartTarget,Jl,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(h){if(this._enabled&&(this._moved=!1,!Yl(this._element,"leaflet-zoom-anim"))){if(h.touches&&h.touches.length!==1){js._dragging===this&&this.finishDrag();return}if(!(js._dragging||h.shiftKey||h.which!==1&&h.button!==1&&!h.touches)&&(js._dragging=this,this._preventOutline&&ra(this._element),Hh(),Ai(),!this._moving)){this.fire("down");var y=h.touches?h.touches[0]:h,_=Kl(this._element);this._startPoint=new gt(y.clientX,y.clientY),this._startPos=Ir(this._element),this._parentScale=nh(_);var M=h.type==="mousedown";Wt(document,M?"mousemove":"touchmove",this._onMove,this),Wt(document,M?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(h){if(this._enabled){if(h.touches&&h.touches.length>1){this._moved=!0;return}var y=h.touches&&h.touches.length===1?h.touches[0]:h,_=new gt(y.clientX,y.clientY)._subtract(this._startPoint);!_.x&&!_.y||Math.abs(_.x)+Math.abs(_.y)<this.options.clickTolerance||(_.x/=this._parentScale.x,_.y/=this._parentScale.y,wa(h),this._moved||(this.fire("dragstart"),this._moved=!0,fa(document.body,"leaflet-dragging"),this._lastTarget=h.target||h.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),fa(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(_),this._moving=!0,this._lastEvent=h,this._updatePosition())}},_updatePosition:function(){var h={originalEvent:this._lastEvent};this.fire("predrag",h),cs(this._element,this._newPos),this.fire("drag",h)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(h){Ds(document.body,"leaflet-dragging"),this._lastTarget&&(Ds(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Nt(document,"mousemove touchmove",this._onMove,this),Nt(document,"mouseup touchend touchcancel",this._onUp,this),Ki(),Co();var y=this._moved&&this._moving;this._moving=!1,js._dragging=!1,y&&this.fire("dragend",{noInertia:h,distance:this._newPos.distanceTo(this._startPos)})}});function ii(h,y,_){var M,j=[1,4,2,8],te,we,De,$e,ct,Mt,Kt,ka;for(te=0,Mt=h.length;te<Mt;te++)h[te]._code=er(h[te],y);for(De=0;De<4;De++){for(Kt=j[De],M=[],te=0,Mt=h.length,we=Mt-1;te<Mt;we=te++)$e=h[te],ct=h[we],$e._code&Kt?ct._code&Kt||(ka=Ji(ct,$e,Kt,y,_),ka._code=er(ka,y),M.push(ka)):(ct._code&Kt&&(ka=Ji(ct,$e,Kt,y,_),ka._code=er(ka,y),M.push(ka)),M.push($e));h=M}return h}function bs(h,y){var _,M,j,te,we,De,$e,ct,Mt;if(!h||h.length===0)throw new Error("latlngs not passed");Cn(h)||(console.warn("latlngs are not flat! Only the first ring will be used"),h=h[0]);var Kt=Ht([0,0]),ka=St(h),Ys=ka.getNorthWest().distanceTo(ka.getSouthWest())*ka.getNorthEast().distanceTo(ka.getNorthWest());Ys<1700&&(Kt=Qi(h));var Rs=h.length,Oo=[];for(_=0;_<Rs;_++){var Ya=Ht(h[_]);Oo.push(y.project(Ht([Ya.lat-Kt.lat,Ya.lng-Kt.lng])))}for(De=$e=ct=0,_=0,M=Rs-1;_<Rs;M=_++)j=Oo[_],te=Oo[M],we=j.y*te.x-te.y*j.x,$e+=(j.x+te.x)*we,ct+=(j.y+te.y)*we,De+=we*3;De===0?Mt=Oo[0]:Mt=[$e/De,ct/De];var Ha=y.unproject(Dt(Mt));return Ht([Ha.lat+Kt.lat,Ha.lng+Kt.lng])}function Qi(h){for(var y=0,_=0,M=0,j=0;j<h.length;j++){var te=Ht(h[j]);y+=te.lat,_+=te.lng,M++}return Ht([y/M,_/M])}var cl={__proto__:null,clipPolygon:ii,polygonCenter:bs,centroid:Qi};function Nh(h,y){if(!y||!h.length)return h.slice();var _=y*y;return h=hc(h,_),h=ed(h,_),h}function Ss(h,y,_){return Math.sqrt(Si(h,y,_,!0))}function uf(h,y,_){return Si(h,y,_)}function ed(h,y){var _=h.length,M=typeof Uint8Array!="undefined"?Uint8Array:Array,j=new M(_);j[0]=j[_-1]=1,td(h,j,y,0,_-1);var te,we=[];for(te=0;te<_;te++)j[te]&&we.push(h[te]);return we}function td(h,y,_,M,j){var te=0,we,De,$e;for(De=M+1;De<=j-1;De++)$e=Si(h[De],h[M],h[j],!0),$e>te&&(we=De,te=$e);te>_&&(y[we]=1,td(h,y,_,M,we),td(h,y,_,we,j))}function hc(h,y){for(var _=[h[0]],M=1,j=0,te=h.length;M<te;M++)ul(h[M],h[j])>y&&(_.push(h[M]),j=M);return j<te-1&&_.push(h[te-1]),_}var ih;function pl(h,y,_,M,j){var te=M?ih:er(h,_),we=er(y,_),De,$e,ct;for(ih=we;;){if(!(te|we))return[h,y];if(te&we)return!1;De=te||we,$e=Ji(h,y,De,_,j),ct=er($e,_),De===te?(h=$e,te=ct):(y=$e,we=ct)}}function Ji(h,y,_,M,j){var te=y.x-h.x,we=y.y-h.y,De=M.min,$e=M.max,ct,Mt;return _&8?(ct=h.x+te*($e.y-h.y)/we,Mt=$e.y):_&4?(ct=h.x+te*(De.y-h.y)/we,Mt=De.y):_&2?(ct=$e.x,Mt=h.y+we*($e.x-h.x)/te):_&1&&(ct=De.x,Mt=h.y+we*(De.x-h.x)/te),new gt(ct,Mt,j)}function er(h,y){var _=0;return h.x<y.min.x?_|=1:h.x>y.max.x&&(_|=2),h.y<y.min.y?_|=4:h.y>y.max.y&&(_|=8),_}function ul(h,y){var _=y.x-h.x,M=y.y-h.y;return _*_+M*M}function Si(h,y,_,M){var j=y.x,te=y.y,we=_.x-j,De=_.y-te,$e=we*we+De*De,ct;return $e>0&&(ct=((h.x-j)*we+(h.y-te)*De)/$e,ct>1?(j=_.x,te=_.y):ct>0&&(j+=we*ct,te+=De*ct)),we=h.x-j,De=h.y-te,M?we*we+De*De:new gt(j,te)}function Cn(h){return!mt(h[0])||typeof h[0][0]!="object"&&typeof h[0][0]!="undefined"}function Bs(h){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Cn(h)}function rh(h,y){var _,M,j,te,we,De,$e,ct;if(!h||h.length===0)throw new Error("latlngs not passed");Cn(h)||(console.warn("latlngs are not flat! Only the first ring will be used"),h=h[0]);var Mt=Ht([0,0]),Kt=St(h),ka=Kt.getNorthWest().distanceTo(Kt.getSouthWest())*Kt.getNorthEast().distanceTo(Kt.getNorthWest());ka<1700&&(Mt=Qi(h));var Ys=h.length,Rs=[];for(_=0;_<Ys;_++){var Oo=Ht(h[_]);Rs.push(y.project(Ht([Oo.lat-Mt.lat,Oo.lng-Mt.lng])))}for(_=0,M=0;_<Ys-1;_++)M+=Rs[_].distanceTo(Rs[_+1])/2;if(M===0)ct=Rs[0];else for(_=0,te=0;_<Ys-1;_++)if(we=Rs[_],De=Rs[_+1],j=we.distanceTo(De),te+=j,te>M){$e=(te-M)/j,ct=[De.x-$e*(De.x-we.x),De.y-$e*(De.y-we.y)];break}var Ya=y.unproject(Dt(ct));return Ht([Ya.lat+Mt.lat,Ya.lng+Mt.lng])}var Gh={__proto__:null,simplify:Nh,pointToSegmentDistance:Ss,closestPointOnSegment:uf,clipSegment:pl,_getEdgeIntersection:Ji,_getBitCode:er,_sqClosestPointOnSegment:Si,isFlat:Cn,_flat:Bs,polylineCenter:rh},Er={project:function(h){return new gt(h.lng,h.lat)},unproject:function(h){return new Ct(h.y,h.x)},bounds:new _e([-180,-90],[180,90])},Pi={R:6378137,R_MINOR:6356752314245179e-9,bounds:new _e([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(h){var y=Math.PI/180,_=this.R,M=h.lat*y,j=this.R_MINOR/_,te=Math.sqrt(1-j*j),we=te*Math.sin(M),De=Math.tan(Math.PI/4-M/2)/Math.pow((1-we)/(1+we),te/2);return M=-_*Math.log(Math.max(De,1e-10)),new gt(h.lng*y*_,M)},unproject:function(h){for(var y=180/Math.PI,_=this.R,M=this.R_MINOR/_,j=Math.sqrt(1-M*M),te=Math.exp(-h.y/_),we=Math.PI/2-2*Math.atan(te),De=0,$e=.1,ct;De<15&&Math.abs($e)>1e-7;De++)ct=j*Math.sin(we),ct=Math.pow((1-ct)/(1+ct),j/2),$e=Math.PI/2-2*Math.atan(te*ct)-we,we+=$e;return new Ct(we*y,h.x*y/_)}},mf={__proto__:null,LonLat:Er,Mercator:Pi,SphericalMercator:xn},ml=J({},Ma,{code:"EPSG:3395",projection:Pi,transformation:(function(){var h=.5/(Math.PI*Pi.R);return Tn(h,.5,-h,.5)})()}),zd=J({},Ma,{code:"EPSG:4326",projection:Er,transformation:Tn(1/180,1,-1/180,.5)}),ri=J({},da,{projection:Er,transformation:Tn(1,0,-1,0),scale:function(h){return Math.pow(2,h)},zoom:function(h){return Math.log(h)/Math.LN2},distance:function(h,y){var _=y.lng-h.lng,M=y.lat-h.lat;return Math.sqrt(_*_+M*M)},infinite:!0});da.Earth=Ma,da.EPSG3395=ml,da.EPSG3857=kr,da.EPSG900913=As,da.EPSG4326=zd,da.Simple=ri;var mo=It.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(h){return h.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(h){return h&&h.removeLayer(this),this},getPane:function(h){return this._map.getPane(h?this.options[h]||h:this.options.pane)},addInteractiveTarget:function(h){return this._map._targets[re(h)]=this,this},removeInteractiveTarget:function(h){return delete this._map._targets[re(h)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(h){var y=h.target;if(y.hasLayer(this)){if(this._map=y,this._zoomAnimated=y._zoomAnimated,this.getEvents){var _=this.getEvents();y.on(_,this),this.once("remove",function(){y.off(_,this)},this)}this.onAdd(y),this.fire("add"),y.fire("layeradd",{layer:this})}}});Oa.include({addLayer:function(h){if(!h._layerAdd)throw new Error("The provided object is not a Layer.");var y=re(h);return this._layers[y]?this:(this._layers[y]=h,h._mapToAdd=this,h.beforeAdd&&h.beforeAdd(this),this.whenReady(h._layerAdd,h),this)},removeLayer:function(h){var y=re(h);return this._layers[y]?(this._loaded&&h.onRemove(this),delete this._layers[y],this._loaded&&(this.fire("layerremove",{layer:h}),h.fire("remove")),h._map=h._mapToAdd=null,this):this},hasLayer:function(h){return re(h)in this._layers},eachLayer:function(h,y){for(var _ in this._layers)h.call(y,this._layers[_]);return this},_addLayers:function(h){h=h?mt(h)?h:[h]:[];for(var y=0,_=h.length;y<_;y++)this.addLayer(h[y])},_addZoomLimit:function(h){(!isNaN(h.options.maxZoom)||!isNaN(h.options.minZoom))&&(this._zoomBoundLayers[re(h)]=h,this._updateZoomLevels())},_removeZoomLimit:function(h){var y=re(h);this._zoomBoundLayers[y]&&(delete this._zoomBoundLayers[y],this._updateZoomLevels())},_updateZoomLevels:function(){var h=1/0,y=-1/0,_=this._getZoomSpan();for(var M in this._zoomBoundLayers){var j=this._zoomBoundLayers[M].options;h=j.minZoom===void 0?h:Math.min(h,j.minZoom),y=j.maxZoom===void 0?y:Math.max(y,j.maxZoom)}this._layersMaxZoom=y===-1/0?void 0:y,this._layersMinZoom=h===1/0?void 0:h,_!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var hh=mo.extend({initialize:function(h,y){it(this,y),this._layers={};var _,M;if(h)for(_=0,M=h.length;_<M;_++)this.addLayer(h[_])},addLayer:function(h){var y=this.getLayerId(h);return this._layers[y]=h,this._map&&this._map.addLayer(h),this},removeLayer:function(h){var y=h in this._layers?h:this.getLayerId(h);return this._map&&this._layers[y]&&this._map.removeLayer(this._layers[y]),delete this._layers[y],this},hasLayer:function(h){var y=typeof h=="number"?h:this.getLayerId(h);return y in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(h){var y=Array.prototype.slice.call(arguments,1),_,M;for(_ in this._layers)M=this._layers[_],M[h]&&M[h].apply(M,y);return this},onAdd:function(h){this.eachLayer(h.addLayer,h)},onRemove:function(h){this.eachLayer(h.removeLayer,h)},eachLayer:function(h,y){for(var _ in this._layers)h.call(y,this._layers[_]);return this},getLayer:function(h){return this._layers[h]},getLayers:function(){var h=[];return this.eachLayer(h.push,h),h},setZIndex:function(h){return this.invoke("setZIndex",h)},getLayerId:function(h){return re(h)}}),gf=function(h,y){return new hh(h,y)},jo=hh.extend({addLayer:function(h){return this.hasLayer(h)?this:(h.addEventParent(this),hh.prototype.addLayer.call(this,h),this.fire("layeradd",{layer:h}))},removeLayer:function(h){return this.hasLayer(h)?(h in this._layers&&(h=this._layers[h]),h.removeEventParent(this),hh.prototype.removeLayer.call(this,h),this.fire("layerremove",{layer:h})):this},setStyle:function(h){return this.invoke("setStyle",h)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var h=new Ot;for(var y in this._layers){var _=this._layers[y];h.extend(_.getBounds?_.getBounds():_.getLatLng())}return h}}),ad=function(h,y){return new jo(h,y)},Uo=os.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(h){it(this,h)},createIcon:function(h){return this._createIcon("icon",h)},createShadow:function(h){return this._createIcon("shadow",h)},_createIcon:function(h,y){var _=this._getIconUrl(h);if(!_){if(h==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var M=this._createImg(_,y&&y.tagName==="IMG"?y:null);return this._setIconStyles(M,h),(this.options.crossOrigin||this.options.crossOrigin==="")&&(M.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),M},_setIconStyles:function(h,y){var _=this.options,M=_[y+"Size"];typeof M=="number"&&(M=[M,M]);var j=Dt(M),te=Dt(y==="shadow"&&_.shadowAnchor||_.iconAnchor||j&&j.divideBy(2,!0));h.className="leaflet-marker-"+y+" "+(_.className||""),te&&(h.style.marginLeft=-te.x+"px",h.style.marginTop=-te.y+"px"),j&&(h.style.width=j.x+"px",h.style.height=j.y+"px")},_createImg:function(h,y){return y=y||document.createElement("img"),y.src=h,y},_getIconUrl:function(h){return We.retina&&this.options[h+"RetinaUrl"]||this.options[h+"Url"]}});function Fh(h){return new Uo(h)}var jh=Uo.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(h){return typeof jh.imagePath!="string"&&(jh.imagePath=this._detectIconPath()),(this.options.imagePath||jh.imagePath)+Uo.prototype._getIconUrl.call(this,h)},_stripUrl:function(h){var y=function(_,M,j){var te=M.exec(_);return te&&te[j]};return h=y(h,/^url\((['"])?(.+)\1\)$/,2),h&&y(h,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var h=za("div","leaflet-default-icon-path",document.body),y=$n(h,"background-image")||$n(h,"backgroundImage");if(document.body.removeChild(h),y=this._stripUrl(y),y)return y;var _=document.querySelector('link[href$="leaflet.css"]');return _?_.href.substring(0,_.href.length-11-1):""}}),Uh=Fo.extend({initialize:function(h){this._marker=h},addHooks:function(){var h=this._marker._icon;this._draggable||(this._draggable=new js(h,h,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),fa(h,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ds(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(h){var y=this._marker,_=y._map,M=this._marker.options.autoPanSpeed,j=this._marker.options.autoPanPadding,te=Ir(y._icon),we=_.getPixelBounds(),De=_.getPixelOrigin(),$e=tt(we.min._subtract(De).add(j),we.max._subtract(De).subtract(j));if(!$e.contains(te)){var ct=Dt((Math.max($e.max.x,te.x)-$e.max.x)/(we.max.x-$e.max.x)-(Math.min($e.min.x,te.x)-$e.min.x)/(we.min.x-$e.min.x),(Math.max($e.max.y,te.y)-$e.max.y)/(we.max.y-$e.max.y)-(Math.min($e.min.y,te.y)-$e.min.y)/(we.min.y-$e.min.y)).multiplyBy(M);_.panBy(ct,{animate:!1}),this._draggable._newPos._add(ct),this._draggable._startPos._add(ct),cs(y._icon,this._draggable._newPos),this._onDrag(h),this._panRequest=ma(this._adjustPan.bind(this,h))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(h){this._marker.options.autoPan&&(pa(this._panRequest),this._panRequest=ma(this._adjustPan.bind(this,h)))},_onDrag:function(h){var y=this._marker,_=y._shadow,M=Ir(y._icon),j=y._map.layerPointToLatLng(M);_&&cs(_,M),y._latlng=j,h.latlng=j,h.oldLatLng=this._oldLatLng,y.fire("move",h).fire("drag",h)},_onDragEnd:function(h){pa(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",h)}}),hi=mo.extend({options:{icon:new jh,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(h,y){it(this,y),this._latlng=Ht(h)},onAdd:function(h){this._zoomAnimated=this._zoomAnimated&&h.options.markerZoomAnimation,this._zoomAnimated&&h.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(h){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&h.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(h){var y=this._latlng;return this._latlng=Ht(h),this.update(),this.fire("move",{oldLatLng:y,latlng:this._latlng})},setZIndexOffset:function(h){return this.options.zIndexOffset=h,this.update()},getIcon:function(){return this.options.icon},setIcon:function(h){return this.options.icon=h,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var h=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(h)}return this},_initIcon:function(){var h=this.options,y="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),_=h.icon.createIcon(this._icon),M=!1;_!==this._icon&&(this._icon&&this._removeIcon(),M=!0,h.title&&(_.title=h.title),_.tagName==="IMG"&&(_.alt=h.alt||"")),fa(_,y),h.keyboard&&(_.tabIndex="0",_.setAttribute("role","button")),this._icon=_,h.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Wt(_,"focus",this._panOnFocus,this);var j=h.icon.createShadow(this._shadow),te=!1;j!==this._shadow&&(this._removeShadow(),te=!0),j&&(fa(j,y),j.alt=""),this._shadow=j,h.opacity<1&&this._updateOpacity(),M&&this.getPane().appendChild(this._icon),this._initInteraction(),j&&te&&this.getPane(h.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Nt(this._icon,"focus",this._panOnFocus,this),Va(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Va(this._shadow),this._shadow=null},_setPos:function(h){this._icon&&cs(this._icon,h),this._shadow&&cs(this._shadow,h),this._zIndex=h.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(h){this._icon&&(this._icon.style.zIndex=this._zIndex+h)},_animateZoom:function(h){var y=this._map._latLngToNewLayerPoint(this._latlng,h.zoom,h.center).round();this._setPos(y)},_initInteraction:function(){if(this.options.interactive&&(fa(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Uh)){var h=this.options.draggable;this.dragging&&(h=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Uh(this),h&&this.dragging.enable()}},setOpacity:function(h){return this.options.opacity=h,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var h=this.options.opacity;this._icon&&ys(this._icon,h),this._shadow&&ys(this._shadow,h)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var h=this._map;if(h){var y=this.options.icon.options,_=y.iconSize?Dt(y.iconSize):Dt(0,0),M=y.iconAnchor?Dt(y.iconAnchor):Dt(0,0);h.panInside(this._latlng,{paddingTopLeft:M,paddingBottomRight:_.subtract(M)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Dd(h,y){return new hi(h,y)}var qo=mo.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(h){this._renderer=h.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(h){return it(this,h),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&h&&Object.prototype.hasOwnProperty.call(h,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),li=qo.extend({options:{fill:!0,radius:10},initialize:function(h,y){it(this,y),this._latlng=Ht(h),this._radius=this.options.radius},setLatLng:function(h){var y=this._latlng;return this._latlng=Ht(h),this.redraw(),this.fire("move",{oldLatLng:y,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(h){return this.options.radius=this._radius=h,this.redraw()},getRadius:function(){return this._radius},setStyle:function(h){var y=h&&h.radius||this._radius;return qo.prototype.setStyle.call(this,h),this.setRadius(y),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var h=this._radius,y=this._radiusY||h,_=this._clickTolerance(),M=[h+_,y+_];this._pxBounds=new _e(this._point.subtract(M),this._point.add(M))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(h){return h.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Bd(h,y){return new li(h,y)}var lh=li.extend({initialize:function(h,y,_){if(typeof y=="number"&&(y=J({},_,{radius:y})),it(this,y),this._latlng=Ht(h),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(h){return this._mRadius=h,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var h=[this._radius,this._radiusY||this._radius];return new Ot(this._map.layerPointToLatLng(this._point.subtract(h)),this._map.layerPointToLatLng(this._point.add(h)))},setStyle:qo.prototype.setStyle,_project:function(){var h=this._latlng.lng,y=this._latlng.lat,_=this._map,M=_.options.crs;if(M.distance===Ma.distance){var j=Math.PI/180,te=this._mRadius/Ma.R/j,we=_.project([y+te,h]),De=_.project([y-te,h]),$e=we.add(De).divideBy(2),ct=_.unproject($e).lat,Mt=Math.acos((Math.cos(te*j)-Math.sin(y*j)*Math.sin(ct*j))/(Math.cos(y*j)*Math.cos(ct*j)))/j;(isNaN(Mt)||Mt===0)&&(Mt=te/Math.cos(Math.PI/180*y)),this._point=$e.subtract(_.getPixelOrigin()),this._radius=isNaN(Mt)?0:$e.x-_.project([ct,h-Mt]).x,this._radiusY=$e.y-we.y}else{var Kt=M.unproject(M.project(this._latlng).subtract([this._mRadius,0]));this._point=_.latLngToLayerPoint(this._latlng),this._radius=this._point.x-_.latLngToLayerPoint(Kt).x}this._updateBounds()}});function yf(h,y,_){return new lh(h,y,_)}var tr=qo.extend({options:{smoothFactor:1,noClip:!1},initialize:function(h,y){it(this,y),this._setLatLngs(h)},getLatLngs:function(){return this._latlngs},setLatLngs:function(h){return this._setLatLngs(h),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(h){for(var y=1/0,_=null,M=Si,j,te,we=0,De=this._parts.length;we<De;we++)for(var $e=this._parts[we],ct=1,Mt=$e.length;ct<Mt;ct++){j=$e[ct-1],te=$e[ct];var Kt=M(h,j,te,!0);Kt<y&&(y=Kt,_=M(h,j,te))}return _&&(_.distance=Math.sqrt(y)),_},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return rh(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(h,y){return y=y||this._defaultShape(),h=Ht(h),y.push(h),this._bounds.extend(h),this.redraw()},_setLatLngs:function(h){this._bounds=new Ot,this._latlngs=this._convertLatLngs(h)},_defaultShape:function(){return Cn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(h){for(var y=[],_=Cn(h),M=0,j=h.length;M<j;M++)_?(y[M]=Ht(h[M]),this._bounds.extend(y[M])):y[M]=this._convertLatLngs(h[M]);return y},_project:function(){var h=new _e;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,h),this._bounds.isValid()&&h.isValid()&&(this._rawPxBounds=h,this._updateBounds())},_updateBounds:function(){var h=this._clickTolerance(),y=new gt(h,h);this._rawPxBounds&&(this._pxBounds=new _e([this._rawPxBounds.min.subtract(y),this._rawPxBounds.max.add(y)]))},_projectLatlngs:function(h,y,_){var M=h[0]instanceof Ct,j=h.length,te,we;if(M){for(we=[],te=0;te<j;te++)we[te]=this._map.latLngToLayerPoint(h[te]),_.extend(we[te]);y.push(we)}else for(te=0;te<j;te++)this._projectLatlngs(h[te],y,_)},_clipPoints:function(){var h=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(h))){if(this.options.noClip){this._parts=this._rings;return}var y=this._parts,_,M,j,te,we,De,$e;for(_=0,j=0,te=this._rings.length;_<te;_++)for($e=this._rings[_],M=0,we=$e.length;M<we-1;M++)De=pl($e[M],$e[M+1],h,M,!0),De&&(y[j]=y[j]||[],y[j].push(De[0]),(De[1]!==$e[M+1]||M===we-2)&&(y[j].push(De[1]),j++))}},_simplifyPoints:function(){for(var h=this._parts,y=this.options.smoothFactor,_=0,M=h.length;_<M;_++)h[_]=Nh(h[_],y)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(h,y){var _,M,j,te,we,De,$e=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(h))return!1;for(_=0,te=this._parts.length;_<te;_++)for(De=this._parts[_],M=0,we=De.length,j=we-1;M<we;j=M++)if(!(!y&&M===0)&&Ss(h,De[j],De[M])<=$e)return!0;return!1}});function bf(h,y){return new tr(h,y)}tr._flat=Bs;var Ei=tr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return bs(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(h){var y=tr.prototype._convertLatLngs.call(this,h),_=y.length;return _>=2&&y[0]instanceof Ct&&y[0].equals(y[_-1])&&y.pop(),y},_setLatLngs:function(h){tr.prototype._setLatLngs.call(this,h),Cn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Cn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var h=this._renderer._bounds,y=this.options.weight,_=new gt(y,y);if(h=new _e(h.min.subtract(_),h.max.add(_)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(h))){if(this.options.noClip){this._parts=this._rings;return}for(var M=0,j=this._rings.length,te;M<j;M++)te=ii(this._rings[M],h,!0),te.length&&this._parts.push(te)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(h){var y=!1,_,M,j,te,we,De,$e,ct;if(!this._pxBounds||!this._pxBounds.contains(h))return!1;for(te=0,$e=this._parts.length;te<$e;te++)for(_=this._parts[te],we=0,ct=_.length,De=ct-1;we<ct;De=we++)M=_[we],j=_[De],M.y>h.y!=j.y>h.y&&h.x<(j.x-M.x)*(h.y-M.y)/(j.y-M.y)+M.x&&(y=!y);return y||tr.prototype._containsPoint.call(this,h,!0)}});function wf(h,y){return new Ei(h,y)}var di=jo.extend({initialize:function(h,y){it(this,y),this._layers={},h&&this.addData(h)},addData:function(h){var y=mt(h)?h:h.features,_,M,j;if(y){for(_=0,M=y.length;_<M;_++)j=y[_],(j.geometries||j.geometry||j.features||j.coordinates)&&this.addData(j);return this}var te=this.options;if(te.filter&&!te.filter(h))return this;var we=Mn(h,te);return we?(we.feature=fh(h),we.defaultOptions=we.options,this.resetStyle(we),te.onEachFeature&&te.onEachFeature(h,we),this.addLayer(we)):this},resetStyle:function(h){return h===void 0?this.eachLayer(this.resetStyle,this):(h.options=J({},h.defaultOptions),this._setLayerStyle(h,this.options.style),this)},setStyle:function(h){return this.eachLayer(function(y){this._setLayerStyle(y,h)},this)},_setLayerStyle:function(h,y){h.setStyle&&(typeof y=="function"&&(y=y(h.feature)),h.setStyle(y))}});function Mn(h,y){var _=h.type==="Feature"?h.geometry:h,M=_?_.coordinates:null,j=[],te=y&&y.pointToLayer,we=y&&y.coordsToLatLng||go,De,$e,ct,Mt;if(!M&&!_)return null;switch(_.type){case"Point":return De=we(M),ar(te,h,De,y);case"MultiPoint":for(ct=0,Mt=M.length;ct<Mt;ct++)De=we(M[ct]),j.push(ar(te,h,De,y));return new jo(j);case"LineString":case"MultiLineString":return $e=Cr(M,_.type==="LineString"?0:1,we),new tr($e,y);case"Polygon":case"MultiPolygon":return $e=Cr(M,_.type==="Polygon"?1:2,we),new Ei($e,y);case"GeometryCollection":for(ct=0,Mt=_.geometries.length;ct<Mt;ct++){var Kt=Mn({geometry:_.geometries[ct],type:"Feature",properties:h.properties},y);Kt&&j.push(Kt)}return new jo(j);case"FeatureCollection":for(ct=0,Mt=_.features.length;ct<Mt;ct++){var ka=Mn(_.features[ct],y);ka&&j.push(ka)}return new jo(j);default:throw new Error("Invalid GeoJSON object.")}}function ar(h,y,_,M){return h?h(y,_):new hi(_,M&&M.markersInheritOptions&&M)}function go(h){return new Ct(h[1],h[0],h[2])}function Cr(h,y,_){for(var M=[],j=0,te=h.length,we;j<te;j++)we=y?Cr(h[j],y-1,_):(_||go)(h[j]),M.push(we);return M}function qh(h,y){return h=Ht(h),h.alt!==void 0?[Pe(h.lng,y),Pe(h.lat,y),Pe(h.alt,y)]:[Pe(h.lng,y),Pe(h.lat,y)]}function dh(h,y,_,M){for(var j=[],te=0,we=h.length;te<we;te++)j.push(y?dh(h[te],Cn(h[te])?0:y-1,_,M):qh(h[te],M));return!y&&_&&j.length>0&&j.push(j[0].slice()),j}function Ci(h,y){return h.feature?J({},h.feature,{geometry:y}):fh(y)}function fh(h){return h.type==="Feature"||h.type==="FeatureCollection"?h:{type:"Feature",properties:{},geometry:h}}var yo={toGeoJSON:function(h){return Ci(this,{type:"Point",coordinates:qh(this.getLatLng(),h)})}};hi.include(yo),lh.include(yo),li.include(yo),tr.include({toGeoJSON:function(h){var y=!Cn(this._latlngs),_=dh(this._latlngs,y?1:0,!1,h);return Ci(this,{type:(y?"Multi":"")+"LineString",coordinates:_})}}),Ei.include({toGeoJSON:function(h){var y=!Cn(this._latlngs),_=y&&!Cn(this._latlngs[0]),M=dh(this._latlngs,_?2:y?1:0,!0,h);return y||(M=[M]),Ci(this,{type:(_?"Multi":"")+"Polygon",coordinates:M})}}),hh.include({toMultiPoint:function(h){var y=[];return this.eachLayer(function(_){y.push(_.toGeoJSON(h).geometry.coordinates)}),Ci(this,{type:"MultiPoint",coordinates:y})},toGeoJSON:function(h){var y=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(y==="MultiPoint")return this.toMultiPoint(h);var _=y==="GeometryCollection",M=[];return this.eachLayer(function(j){if(j.toGeoJSON){var te=j.toGeoJSON(h);if(_)M.push(te.geometry);else{var we=fh(te);we.type==="FeatureCollection"?M.push.apply(M,we.features):M.push(we)}}}),_?Ci(this,{geometries:M,type:"GeometryCollection"}):{type:"FeatureCollection",features:M}}});function Vh(h,y){return new di(h,y)}var gl=Vh,ch=mo.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(h,y,_){this._url=h,this._bounds=St(y),it(this,_)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(fa(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Va(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(h){return this.options.opacity=h,this._image&&this._updateOpacity(),this},setStyle:function(h){return h.opacity&&this.setOpacity(h.opacity),this},bringToFront:function(){return this._map&&xa(this._image),this},bringToBack:function(){return this._map&&_r(this._image),this},setUrl:function(h){return this._url=h,this._image&&(this._image.src=h),this},setBounds:function(h){return this._bounds=St(h),this._map&&this._reset(),this},getEvents:function(){var h={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(h.zoomanim=this._animateZoom),h},setZIndex:function(h){return this.options.zIndex=h,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var h=this._url.tagName==="IMG",y=this._image=h?this._url:za("img");if(fa(y,"leaflet-image-layer"),this._zoomAnimated&&fa(y,"leaflet-zoom-animated"),this.options.className&&fa(y,this.options.className),y.onselectstart=Ce,y.onmousemove=Ce,y.onload=E(this.fire,this,"load"),y.onerror=E(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(y.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),h){this._url=y.src;return}y.src=this._url,y.alt=this.options.alt},_animateZoom:function(h){var y=this._map.getZoomScale(h.zoom),_=this._map._latLngBoundsToNewLayerBounds(this._bounds,h.zoom,h.center).min;si(this._image,_,y)},_reset:function(){var h=this._image,y=new _e(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),_=y.getSize();cs(h,y.min),h.style.width=_.x+"px",h.style.height=_.y+"px"},_updateOpacity:function(){ys(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var h=this.options.errorOverlayUrl;h&&this._url!==h&&(this._url=h,this._image.src=h)},getCenter:function(){return this._bounds.getCenter()}}),vf=function(h,y,_){return new ch(h,y,_)},Mr=ch.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var h=this._url.tagName==="VIDEO",y=this._image=h?this._url:za("video");if(fa(y,"leaflet-image-layer"),this._zoomAnimated&&fa(y,"leaflet-zoom-animated"),this.options.className&&fa(y,this.options.className),y.onselectstart=Ce,y.onmousemove=Ce,y.onloadeddata=E(this.fire,this,"load"),h){for(var _=y.getElementsByTagName("source"),M=[],j=0;j<_.length;j++)M.push(_[j].src);this._url=_.length>0?M:[y.src];return}mt(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(y.style,"objectFit")&&(y.style.objectFit="fill"),y.autoplay=!!this.options.autoplay,y.loop=!!this.options.loop,y.muted=!!this.options.muted,y.playsInline=!!this.options.playsInline;for(var te=0;te<this._url.length;te++){var we=za("source");we.src=this._url[te],y.appendChild(we)}}});function ph(h,y,_){return new Mr(h,y,_)}var sd=ch.extend({_initImage:function(){var h=this._image=this._url;fa(h,"leaflet-image-layer"),this._zoomAnimated&&fa(h,"leaflet-zoom-animated"),this.options.className&&fa(h,this.options.className),h.onselectstart=Ce,h.onmousemove=Ce}});function Ra(h,y,_){return new sd(h,y,_)}var cn=mo.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(h,y){h&&(h instanceof Ct||mt(h))?(this._latlng=Ht(h),it(this,y)):(it(this,h),this._source=y),this.options.content&&(this._content=this.options.content)},openOn:function(h){return h=arguments.length?h:this._source._map,h.hasLayer(this)||h.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(h){return this._map?this.close():(arguments.length?this._source=h:h=this._source,this._prepareOpen(),this.openOn(h._map)),this},onAdd:function(h){this._zoomAnimated=h._zoomAnimated,this._container||this._initLayout(),h._fadeAnimated&&ys(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),h._fadeAnimated&&ys(this._container,1),this.bringToFront(),this.options.interactive&&(fa(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(h){h._fadeAnimated?(ys(this._container,0),this._removeTimeout=setTimeout(E(Va,void 0,this._container),200)):Va(this._container),this.options.interactive&&(Ds(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(h){return this._latlng=Ht(h),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(h){return this._content=h,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var h={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(h.zoomanim=this._animateZoom),h},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&xa(this._container),this},bringToBack:function(){return this._map&&_r(this._container),this},_prepareOpen:function(h){var y=this._source;if(!y._map)return!1;if(y instanceof jo){y=null;var _=this._source._layers;for(var M in _)if(_[M]._map){y=_[M];break}if(!y)return!1;this._source=y}if(!h)if(y.getCenter)h=y.getCenter();else if(y.getLatLng)h=y.getLatLng();else if(y.getBounds)h=y.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(h),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var h=this._contentNode,y=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof y=="string")h.innerHTML=y;else{for(;h.hasChildNodes();)h.removeChild(h.firstChild);h.appendChild(y)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var h=this._map.latLngToLayerPoint(this._latlng),y=Dt(this.options.offset),_=this._getAnchor();this._zoomAnimated?cs(this._container,h.add(_)):y=y.add(h).add(_);var M=this._containerBottom=-y.y,j=this._containerLeft=-Math.round(this._containerWidth/2)+y.x;this._container.style.bottom=M+"px",this._container.style.left=j+"px"}},_getAnchor:function(){return[0,0]}});Oa.include({_initOverlay:function(h,y,_,M){var j=y;return j instanceof h||(j=new h(M).setContent(y)),_&&j.setLatLng(_),j}}),mo.include({_initOverlay:function(h,y,_,M){var j=_;return j instanceof h?(it(j,M),j._source=this):(j=y&&!M?y:new h(M,this),j.setContent(_)),j}});var Lr=cn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(h){return h=arguments.length?h:this._source._map,!h.hasLayer(this)&&h._popup&&h._popup.options.autoClose&&h.removeLayer(h._popup),h._popup=this,cn.prototype.openOn.call(this,h)},onAdd:function(h){cn.prototype.onAdd.call(this,h),h.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof qo||this._source.on("preclick",ks))},onRemove:function(h){cn.prototype.onRemove.call(this,h),h.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof qo||this._source.off("preclick",ks))},getEvents:function(){var h=cn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(h.preclick=this.close),this.options.keepInView&&(h.moveend=this._adjustPan),h},_initLayout:function(){var h="leaflet-popup",y=this._container=za("div",h+" "+(this.options.className||"")+" leaflet-zoom-animated"),_=this._wrapper=za("div",h+"-content-wrapper",y);if(this._contentNode=za("div",h+"-content",_),co(y),Qn(this._contentNode),Wt(y,"contextmenu",ks),this._tipContainer=za("div",h+"-tip-container",y),this._tip=za("div",h+"-tip",this._tipContainer),this.options.closeButton){var M=this._closeButton=za("a",h+"-close-button",y);M.setAttribute("role","button"),M.setAttribute("aria-label","Close popup"),M.href="#close",M.innerHTML='<span aria-hidden="true">&#215;</span>',Wt(M,"click",function(j){wa(j),this.close()},this)}},_updateLayout:function(){var h=this._contentNode,y=h.style;y.width="",y.whiteSpace="nowrap";var _=h.offsetWidth;_=Math.min(_,this.options.maxWidth),_=Math.max(_,this.options.minWidth),y.width=_+1+"px",y.whiteSpace="",y.height="";var M=h.offsetHeight,j=this.options.maxHeight,te="leaflet-popup-scrolled";j&&M>j?(y.height=j+"px",fa(h,te)):Ds(h,te),this._containerWidth=this._container.offsetWidth},_animateZoom:function(h){var y=this._map._latLngToNewLayerPoint(this._latlng,h.zoom,h.center),_=this._getAnchor();cs(this._container,y.add(_))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var h=this._map,y=parseInt($n(this._container,"marginBottom"),10)||0,_=this._container.offsetHeight+y,M=this._containerWidth,j=new gt(this._containerLeft,-_-this._containerBottom);j._add(Ir(this._container));var te=h.layerPointToContainerPoint(j),we=Dt(this.options.autoPanPadding),De=Dt(this.options.autoPanPaddingTopLeft||we),$e=Dt(this.options.autoPanPaddingBottomRight||we),ct=h.getSize(),Mt=0,Kt=0;te.x+M+$e.x>ct.x&&(Mt=te.x+M-ct.x+$e.x),te.x-Mt-De.x<0&&(Mt=te.x-De.x),te.y+_+$e.y>ct.y&&(Kt=te.y+_-ct.y+$e.y),te.y-Kt-De.y<0&&(Kt=te.y-De.y),(Mt||Kt)&&(this.options.keepInView&&(this._autopanning=!0),h.fire("autopanstart").panBy([Mt,Kt]))}},_getAnchor:function(){return Dt(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),yl=function(h,y){return new Lr(h,y)};Oa.mergeOptions({closePopupOnClick:!0}),Oa.include({openPopup:function(h,y,_){return this._initOverlay(Lr,h,y,_).openOn(this),this},closePopup:function(h){return h=arguments.length?h:this._popup,h&&h.close(),this}}),mo.include({bindPopup:function(h,y){return this._popup=this._initOverlay(Lr,this._popup,h,y),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(h){return this._popup&&(this instanceof jo||(this._popup._source=this),this._popup._prepareOpen(h||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(h){return this._popup&&this._popup.setContent(h),this},getPopup:function(){return this._popup},_openPopup:function(h){if(!(!this._popup||!this._map)){po(h);var y=h.layer||h.target;if(this._popup._source===y&&!(y instanceof qo)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(h.latlng);return}this._popup._source=y,this.openPopup(h.latlng)}},_movePopup:function(h){this._popup.setLatLng(h.latlng)},_onKeyPress:function(h){h.originalEvent.keyCode===13&&this._openPopup(h)}});var uh=cn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(h){cn.prototype.onAdd.call(this,h),this.setOpacity(this.options.opacity),h.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(h){cn.prototype.onRemove.call(this,h),h.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var h=cn.prototype.getEvents.call(this);return this.options.permanent||(h.preclick=this.close),h},_initLayout:function(){var h="leaflet-tooltip",y=h+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=za("div",y),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+re(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(h){var y,_,M=this._map,j=this._container,te=M.latLngToContainerPoint(M.getCenter()),we=M.layerPointToContainerPoint(h),De=this.options.direction,$e=j.offsetWidth,ct=j.offsetHeight,Mt=Dt(this.options.offset),Kt=this._getAnchor();De==="top"?(y=$e/2,_=ct):De==="bottom"?(y=$e/2,_=0):De==="center"?(y=$e/2,_=ct/2):De==="right"?(y=0,_=ct/2):De==="left"?(y=$e,_=ct/2):we.x<te.x?(De="right",y=0,_=ct/2):(De="left",y=$e+(Mt.x+Kt.x)*2,_=ct/2),h=h.subtract(Dt(y,_,!0)).add(Mt).add(Kt),Ds(j,"leaflet-tooltip-right"),Ds(j,"leaflet-tooltip-left"),Ds(j,"leaflet-tooltip-top"),Ds(j,"leaflet-tooltip-bottom"),fa(j,"leaflet-tooltip-"+De),cs(j,h)},_updatePosition:function(){var h=this._map.latLngToLayerPoint(this._latlng);this._setPosition(h)},setOpacity:function(h){this.options.opacity=h,this._container&&ys(this._container,h)},_animateZoom:function(h){var y=this._map._latLngToNewLayerPoint(this._latlng,h.zoom,h.center);this._setPosition(y)},_getAnchor:function(){return Dt(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),mh=function(h,y){return new uh(h,y)};Oa.include({openTooltip:function(h,y,_){return this._initOverlay(uh,h,y,_).openOn(this),this},closeTooltip:function(h){return h.close(),this}}),mo.include({bindTooltip:function(h,y){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(uh,this._tooltip,h,y),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(h){if(!(!h&&this._tooltipHandlersAdded)){var y=h?"off":"on",_={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?_.add=this._openTooltip:(_.mouseover=this._openTooltip,_.mouseout=this.closeTooltip,_.click=this._openTooltip,this._map?this._addFocusListeners():_.add=this._addFocusListeners),this._tooltip.options.sticky&&(_.mousemove=this._moveTooltip),this[y](_),this._tooltipHandlersAdded=!h}},openTooltip:function(h){return this._tooltip&&(this instanceof jo||(this._tooltip._source=this),this._tooltip._prepareOpen(h)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(h){return this._tooltip&&this._tooltip.setContent(h),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(h){var y=typeof h.getElement=="function"&&h.getElement();y&&(Wt(y,"focus",function(){this._tooltip._source=h,this.openTooltip()},this),Wt(y,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(h){var y=typeof h.getElement=="function"&&h.getElement();y&&y.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(h){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var y=this;this._map.once("moveend",function(){y._openOnceFlag=!1,y._openTooltip(h)});return}this._tooltip._source=h.layer||h.target,this.openTooltip(this._tooltip.options.sticky?h.latlng:void 0)}},_moveTooltip:function(h){var y=h.latlng,_,M;this._tooltip.options.sticky&&h.originalEvent&&(_=this._map.mouseEventToContainerPoint(h.originalEvent),M=this._map.containerPointToLayerPoint(_),y=this._map.layerPointToLatLng(M)),this._tooltip.setLatLng(y)}});var Wh=Uo.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(h){var y=h&&h.tagName==="DIV"?h:document.createElement("div"),_=this.options;if(_.html instanceof Element?(Kn(y),y.appendChild(_.html)):y.innerHTML=_.html!==!1?_.html:"",_.bgPos){var M=Dt(_.bgPos);y.style.backgroundPosition=-M.x+"px "+-M.y+"px"}return this._setIconStyles(y,"icon"),y},createShadow:function(){return null}});function Zh(h){return new Wh(h)}Uo.Default=jh;var Ln=mo.extend({options:{tileSize:256,opacity:1,updateWhenIdle:We.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(h){it(this,h)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(h){h._addZoomLimit(this)},onRemove:function(h){this._removeAllTiles(),Va(this._container),h._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(xa(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(_r(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(h){return this.options.opacity=h,this._updateOpacity(),this},setZIndex:function(h){return this.options.zIndex=h,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var h=this._clampZoom(this._map.getZoom());h!==this._tileZoom&&(this._tileZoom=h,this._updateLevels()),this._update()}return this},getEvents:function(){var h={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=fe(this._onMoveEnd,this.options.updateInterval,this)),h.move=this._onMove),this._zoomAnimated&&(h.zoomanim=this._animateZoom),h},createTile:function(){return document.createElement("div")},getTileSize:function(){var h=this.options.tileSize;return h instanceof gt?h:new gt(h,h)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(h){for(var y=this.getPane().children,_=-h(-1/0,1/0),M=0,j=y.length,te;M<j;M++)te=y[M].style.zIndex,y[M]!==this._container&&te&&(_=h(_,+te));isFinite(_)&&(this.options.zIndex=_+h(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!We.ielt9){ys(this._container,this.options.opacity);var h=+new Date,y=!1,_=!1;for(var M in this._tiles){var j=this._tiles[M];if(!(!j.current||!j.loaded)){var te=Math.min(1,(h-j.loaded)/200);ys(j.el,te),te<1?y=!0:(j.active?_=!0:this._onOpaqueTile(j),j.active=!0)}}_&&!this._noPrune&&this._pruneTiles(),y&&(pa(this._fadeFrame),this._fadeFrame=ma(this._updateOpacity,this))}},_onOpaqueTile:Ce,_initContainer:function(){this._container||(this._container=za("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var h=this._tileZoom,y=this.options.maxZoom;if(h!==void 0){for(var _ in this._levels)_=Number(_),this._levels[_].el.children.length||_===h?(this._levels[_].el.style.zIndex=y-Math.abs(h-_),this._onUpdateLevel(_)):(Va(this._levels[_].el),this._removeTilesAtZoom(_),this._onRemoveLevel(_),delete this._levels[_]);var M=this._levels[h],j=this._map;return M||(M=this._levels[h]={},M.el=za("div","leaflet-tile-container leaflet-zoom-animated",this._container),M.el.style.zIndex=y,M.origin=j.project(j.unproject(j.getPixelOrigin()),h).round(),M.zoom=h,this._setZoomTransform(M,j.getCenter(),j.getZoom()),Ce(M.el.offsetWidth),this._onCreateLevel(M)),this._level=M,M}},_onUpdateLevel:Ce,_onRemoveLevel:Ce,_onCreateLevel:Ce,_pruneTiles:function(){if(this._map){var h,y,_=this._map.getZoom();if(_>this.options.maxZoom||_<this.options.minZoom){this._removeAllTiles();return}for(h in this._tiles)y=this._tiles[h],y.retain=y.current;for(h in this._tiles)if(y=this._tiles[h],y.current&&!y.active){var M=y.coords;this._retainParent(M.x,M.y,M.z,M.z-5)||this._retainChildren(M.x,M.y,M.z,M.z+2)}for(h in this._tiles)this._tiles[h].retain||this._removeTile(h)}},_removeTilesAtZoom:function(h){for(var y in this._tiles)this._tiles[y].coords.z===h&&this._removeTile(y)},_removeAllTiles:function(){for(var h in this._tiles)this._removeTile(h)},_invalidateAll:function(){for(var h in this._levels)Va(this._levels[h].el),this._onRemoveLevel(Number(h)),delete this._levels[h];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(h,y,_,M){var j=Math.floor(h/2),te=Math.floor(y/2),we=_-1,De=new gt(+j,+te);De.z=+we;var $e=this._tileCoordsToKey(De),ct=this._tiles[$e];return ct&&ct.active?(ct.retain=!0,!0):(ct&&ct.loaded&&(ct.retain=!0),we>M?this._retainParent(j,te,we,M):!1)},_retainChildren:function(h,y,_,M){for(var j=2*h;j<2*h+2;j++)for(var te=2*y;te<2*y+2;te++){var we=new gt(j,te);we.z=_+1;var De=this._tileCoordsToKey(we),$e=this._tiles[De];if($e&&$e.active){$e.retain=!0;continue}else $e&&$e.loaded&&($e.retain=!0);_+1<M&&this._retainChildren(j,te,_+1,M)}},_resetView:function(h){var y=h&&(h.pinch||h.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),y,y)},_animateZoom:function(h){this._setView(h.center,h.zoom,!0,h.noUpdate)},_clampZoom:function(h){var y=this.options;return y.minNativeZoom!==void 0&&h<y.minNativeZoom?y.minNativeZoom:y.maxNativeZoom!==void 0&&y.maxNativeZoom<h?y.maxNativeZoom:h},_setView:function(h,y,_,M){var j=Math.round(y);this.options.maxZoom!==void 0&&j>this.options.maxZoom||this.options.minZoom!==void 0&&j<this.options.minZoom?j=void 0:j=this._clampZoom(j);var te=this.options.updateWhenZooming&&j!==this._tileZoom;(!M||te)&&(this._tileZoom=j,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),j!==void 0&&this._update(h),_||this._pruneTiles(),this._noPrune=!!_),this._setZoomTransforms(h,y)},_setZoomTransforms:function(h,y){for(var _ in this._levels)this._setZoomTransform(this._levels[_],h,y)},_setZoomTransform:function(h,y,_){var M=this._map.getZoomScale(_,h.zoom),j=h.origin.multiplyBy(M).subtract(this._map._getNewPixelOrigin(y,_)).round();We.any3d?si(h.el,j,M):cs(h.el,j)},_resetGrid:function(){var h=this._map,y=h.options.crs,_=this._tileSize=this.getTileSize(),M=this._tileZoom,j=this._map.getPixelWorldBounds(this._tileZoom);j&&(this._globalTileRange=this._pxBoundsToTileRange(j)),this._wrapX=y.wrapLng&&!this.options.noWrap&&[Math.floor(h.project([0,y.wrapLng[0]],M).x/_.x),Math.ceil(h.project([0,y.wrapLng[1]],M).x/_.y)],this._wrapY=y.wrapLat&&!this.options.noWrap&&[Math.floor(h.project([y.wrapLat[0],0],M).y/_.x),Math.ceil(h.project([y.wrapLat[1],0],M).y/_.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(h){var y=this._map,_=y._animatingZoom?Math.max(y._animateToZoom,y.getZoom()):y.getZoom(),M=y.getZoomScale(_,this._tileZoom),j=y.project(h,this._tileZoom).floor(),te=y.getSize().divideBy(M*2);return new _e(j.subtract(te),j.add(te))},_update:function(h){var y=this._map;if(y){var _=this._clampZoom(y.getZoom());if(h===void 0&&(h=y.getCenter()),this._tileZoom!==void 0){var M=this._getTiledPixelBounds(h),j=this._pxBoundsToTileRange(M),te=j.getCenter(),we=[],De=this.options.keepBuffer,$e=new _e(j.getBottomLeft().subtract([De,-De]),j.getTopRight().add([De,-De]));if(!(isFinite(j.min.x)&&isFinite(j.min.y)&&isFinite(j.max.x)&&isFinite(j.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ct in this._tiles){var Mt=this._tiles[ct].coords;(Mt.z!==this._tileZoom||!$e.contains(new gt(Mt.x,Mt.y)))&&(this._tiles[ct].current=!1)}if(Math.abs(_-this._tileZoom)>1){this._setView(h,_);return}for(var Kt=j.min.y;Kt<=j.max.y;Kt++)for(var ka=j.min.x;ka<=j.max.x;ka++){var Ys=new gt(ka,Kt);if(Ys.z=this._tileZoom,!!this._isValidTile(Ys)){var Rs=this._tiles[this._tileCoordsToKey(Ys)];Rs?Rs.current=!0:we.push(Ys)}}if(we.sort(function(Ya,Ha){return Ya.distanceTo(te)-Ha.distanceTo(te)}),we.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Oo=document.createDocumentFragment();for(ka=0;ka<we.length;ka++)this._addTile(we[ka],Oo);this._level.el.appendChild(Oo)}}}},_isValidTile:function(h){var y=this._map.options.crs;if(!y.infinite){var _=this._globalTileRange;if(!y.wrapLng&&(h.x<_.min.x||h.x>_.max.x)||!y.wrapLat&&(h.y<_.min.y||h.y>_.max.y))return!1}if(!this.options.bounds)return!0;var M=this._tileCoordsToBounds(h);return St(this.options.bounds).overlaps(M)},_keyToBounds:function(h){return this._tileCoordsToBounds(this._keyToTileCoords(h))},_tileCoordsToNwSe:function(h){var y=this._map,_=this.getTileSize(),M=h.scaleBy(_),j=M.add(_),te=y.unproject(M,h.z),we=y.unproject(j,h.z);return[te,we]},_tileCoordsToBounds:function(h){var y=this._tileCoordsToNwSe(h),_=new Ot(y[0],y[1]);return this.options.noWrap||(_=this._map.wrapLatLngBounds(_)),_},_tileCoordsToKey:function(h){return h.x+":"+h.y+":"+h.z},_keyToTileCoords:function(h){var y=h.split(":"),_=new gt(+y[0],+y[1]);return _.z=+y[2],_},_removeTile:function(h){var y=this._tiles[h];y&&(Va(y.el),delete this._tiles[h],this.fire("tileunload",{tile:y.el,coords:this._keyToTileCoords(h)}))},_initTile:function(h){fa(h,"leaflet-tile");var y=this.getTileSize();h.style.width=y.x+"px",h.style.height=y.y+"px",h.onselectstart=Ce,h.onmousemove=Ce,We.ielt9&&this.options.opacity<1&&ys(h,this.options.opacity)},_addTile:function(h,y){var _=this._getTilePos(h),M=this._tileCoordsToKey(h),j=this.createTile(this._wrapCoords(h),E(this._tileReady,this,h));this._initTile(j),this.createTile.length<2&&ma(E(this._tileReady,this,h,null,j)),cs(j,_),this._tiles[M]={el:j,coords:h,current:!0},y.appendChild(j),this.fire("tileloadstart",{tile:j,coords:h})},_tileReady:function(h,y,_){y&&this.fire("tileerror",{error:y,tile:_,coords:h});var M=this._tileCoordsToKey(h);_=this._tiles[M],_&&(_.loaded=+new Date,this._map._fadeAnimated?(ys(_.el,0),pa(this._fadeFrame),this._fadeFrame=ma(this._updateOpacity,this)):(_.active=!0,this._pruneTiles()),y||(fa(_.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:_.el,coords:h})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),We.ielt9||!this._map._fadeAnimated?ma(this._pruneTiles,this):setTimeout(E(this._pruneTiles,this),250)))},_getTilePos:function(h){return h.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(h){var y=new gt(this._wrapX?Le(h.x,this._wrapX):h.x,this._wrapY?Le(h.y,this._wrapY):h.y);return y.z=h.z,y},_pxBoundsToTileRange:function(h){var y=this.getTileSize();return new _e(h.min.unscaleBy(y).floor(),h.max.unscaleBy(y).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var h in this._tiles)if(!this._tiles[h].loaded)return!1;return!0}});function Rd(h){return new Ln(h)}var sr=Ln.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(h,y){this._url=h,y=it(this,y),y.detectRetina&&We.retina&&y.maxZoom>0?(y.tileSize=Math.floor(y.tileSize/2),y.zoomReverse?(y.zoomOffset--,y.minZoom=Math.min(y.maxZoom,y.minZoom+1)):(y.zoomOffset++,y.maxZoom=Math.max(y.minZoom,y.maxZoom-1)),y.minZoom=Math.max(0,y.minZoom)):y.zoomReverse?y.minZoom=Math.min(y.maxZoom,y.minZoom):y.maxZoom=Math.max(y.minZoom,y.maxZoom),typeof y.subdomains=="string"&&(y.subdomains=y.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(h,y){return this._url===h&&y===void 0&&(y=!0),this._url=h,y||this.redraw(),this},createTile:function(h,y){var _=document.createElement("img");return Wt(_,"load",E(this._tileOnLoad,this,y,_)),Wt(_,"error",E(this._tileOnError,this,y,_)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(_.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(_.referrerPolicy=this.options.referrerPolicy),_.alt="",_.src=this.getTileUrl(h),_},getTileUrl:function(h){var y={r:We.retina?"@2x":"",s:this._getSubdomain(h),x:h.x,y:h.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var _=this._globalTileRange.max.y-h.y;this.options.tms&&(y.y=_),y["-y"]=_}return Ft(this._url,J(y,this.options))},_tileOnLoad:function(h,y){We.ielt9?setTimeout(E(h,this,null,y),0):h(null,y)},_tileOnError:function(h,y,_){var M=this.options.errorTileUrl;M&&y.getAttribute("src")!==M&&(y.src=M),h(_,y)},_onTileRemove:function(h){h.tile.onload=null},_getZoomForUrl:function(){var h=this._tileZoom,y=this.options.maxZoom,_=this.options.zoomReverse,M=this.options.zoomOffset;return _&&(h=y-h),h+M},_getSubdomain:function(h){var y=Math.abs(h.x+h.y)%this.options.subdomains.length;return this.options.subdomains[y]},_abortLoading:function(){var h,y;for(h in this._tiles)if(this._tiles[h].coords.z!==this._tileZoom&&(y=this._tiles[h].el,y.onload=Ce,y.onerror=Ce,!y.complete)){y.src=$t;var _=this._tiles[h].coords;Va(y),delete this._tiles[h],this.fire("tileabort",{tile:y,coords:_})}},_removeTile:function(h){var y=this._tiles[h];if(y)return y.el.setAttribute("src",$t),Ln.prototype._removeTile.call(this,h)},_tileReady:function(h,y,_){if(!(!this._map||_&&_.getAttribute("src")===$t))return Ln.prototype._tileReady.call(this,h,y,_)}});function bo(h,y){return new sr(h,y)}var fi=sr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(h,y){this._url=h;var _=J({},this.defaultWmsParams);for(var M in y)M in this.options||(_[M]=y[M]);y=it(this,y);var j=y.detectRetina&&We.retina?2:1,te=this.getTileSize();_.width=te.x*j,_.height=te.y*j,this.wmsParams=_},onAdd:function(h){this._crs=this.options.crs||h.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var y=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[y]=this._crs.code,sr.prototype.onAdd.call(this,h)},getTileUrl:function(h){var y=this._tileCoordsToNwSe(h),_=this._crs,M=tt(_.project(y[0]),_.project(y[1])),j=M.min,te=M.max,we=(this._wmsVersion>=1.3&&this._crs===zd?[j.y,j.x,te.y,te.x]:[j.x,j.y,te.x,te.y]).join(","),De=sr.prototype.getTileUrl.call(this,h);return De+Te(this.wmsParams,De,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+we},setParams:function(h,y){return J(this.wmsParams,h),y||this.redraw(),this}});function eo(h,y){return new fi(h,y)}sr.WMS=fi,bo.wms=eo;var zn=mo.extend({options:{padding:.1},initialize:function(h){it(this,h),re(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),fa(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var h={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(h.zoomanim=this._onAnimZoom),h},_onAnimZoom:function(h){this._updateTransform(h.center,h.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(h,y){var _=this._map.getZoomScale(y,this._zoom),M=this._map.getSize().multiplyBy(.5+this.options.padding),j=this._map.project(this._center,y),te=M.multiplyBy(-_).add(j).subtract(this._map._getNewPixelOrigin(h,y));We.any3d?si(this._container,te,_):cs(this._container,te)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var h in this._layers)this._layers[h]._reset()},_onZoomEnd:function(){for(var h in this._layers)this._layers[h]._project()},_updatePaths:function(){for(var h in this._layers)this._layers[h]._update()},_update:function(){var h=this.options.padding,y=this._map.getSize(),_=this._map.containerPointToLayerPoint(y.multiplyBy(-h)).round();this._bounds=new _e(_,_.add(y.multiplyBy(1+h*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),zr=zn.extend({options:{tolerance:0},getEvents:function(){var h=zn.prototype.getEvents.call(this);return h.viewprereset=this._onViewPreReset,h},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){zn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var h=this._container=document.createElement("canvas");Wt(h,"mousemove",this._onMouseMove,this),Wt(h,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Wt(h,"mouseout",this._handleMouseOut,this),h._leaflet_disable_events=!0,this._ctx=h.getContext("2d")},_destroyContainer:function(){pa(this._redrawRequest),delete this._ctx,Va(this._container),Nt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var h;this._redrawBounds=null;for(var y in this._layers)h=this._layers[y],h._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){zn.prototype._update.call(this);var h=this._bounds,y=this._container,_=h.getSize(),M=We.retina?2:1;cs(y,h.min),y.width=M*_.x,y.height=M*_.y,y.style.width=_.x+"px",y.style.height=_.y+"px",We.retina&&this._ctx.scale(2,2),this._ctx.translate(-h.min.x,-h.min.y),this.fire("update")}},_reset:function(){zn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(h){this._updateDashArray(h),this._layers[re(h)]=h;var y=h._order={layer:h,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=y),this._drawLast=y,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(h){this._requestRedraw(h)},_removePath:function(h){var y=h._order,_=y.next,M=y.prev;_?_.prev=M:this._drawLast=M,M?M.next=_:this._drawFirst=_,delete h._order,delete this._layers[re(h)],this._requestRedraw(h)},_updatePath:function(h){this._extendRedrawBounds(h),h._project(),h._update(),this._requestRedraw(h)},_updateStyle:function(h){this._updateDashArray(h),this._requestRedraw(h)},_updateDashArray:function(h){if(typeof h.options.dashArray=="string"){var y=h.options.dashArray.split(/[, ]+/),_=[],M,j;for(j=0;j<y.length;j++){if(M=Number(y[j]),isNaN(M))return;_.push(M)}h.options._dashArray=_}else h.options._dashArray=h.options.dashArray},_requestRedraw:function(h){this._map&&(this._extendRedrawBounds(h),this._redrawRequest=this._redrawRequest||ma(this._redraw,this))},_extendRedrawBounds:function(h){if(h._pxBounds){var y=(h.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new _e,this._redrawBounds.extend(h._pxBounds.min.subtract([y,y])),this._redrawBounds.extend(h._pxBounds.max.add([y,y]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var h=this._redrawBounds;if(h){var y=h.getSize();this._ctx.clearRect(h.min.x,h.min.y,y.x,y.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var h,y=this._redrawBounds;if(this._ctx.save(),y){var _=y.getSize();this._ctx.beginPath(),this._ctx.rect(y.min.x,y.min.y,_.x,_.y),this._ctx.clip()}this._drawing=!0;for(var M=this._drawFirst;M;M=M.next)h=M.layer,(!y||h._pxBounds&&h._pxBounds.intersects(y))&&h._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(h,y){if(this._drawing){var _,M,j,te,we=h._parts,De=we.length,$e=this._ctx;if(De){for($e.beginPath(),_=0;_<De;_++){for(M=0,j=we[_].length;M<j;M++)te=we[_][M],$e[M?"lineTo":"moveTo"](te.x,te.y);y&&$e.closePath()}this._fillStroke($e,h)}}},_updateCircle:function(h){if(!(!this._drawing||h._empty())){var y=h._point,_=this._ctx,M=Math.max(Math.round(h._radius),1),j=(Math.max(Math.round(h._radiusY),1)||M)/M;j!==1&&(_.save(),_.scale(1,j)),_.beginPath(),_.arc(y.x,y.y/j,M,0,Math.PI*2,!1),j!==1&&_.restore(),this._fillStroke(_,h)}},_fillStroke:function(h,y){var _=y.options;_.fill&&(h.globalAlpha=_.fillOpacity,h.fillStyle=_.fillColor||_.color,h.fill(_.fillRule||"evenodd")),_.stroke&&_.weight!==0&&(h.setLineDash&&h.setLineDash(y.options&&y.options._dashArray||[]),h.globalAlpha=_.opacity,h.lineWidth=_.weight,h.strokeStyle=_.color,h.lineCap=_.lineCap,h.lineJoin=_.lineJoin,h.stroke())},_onClick:function(h){for(var y=this._map.mouseEventToLayerPoint(h),_,M,j=this._drawFirst;j;j=j.next)_=j.layer,_.options.interactive&&_._containsPoint(y)&&(!(h.type==="click"||h.type==="preclick")||!this._map._draggableMoved(_))&&(M=_);this._fireEvent(M?[M]:!1,h)},_onMouseMove:function(h){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var y=this._map.mouseEventToLayerPoint(h);this._handleMouseHover(h,y)}},_handleMouseOut:function(h){var y=this._hoveredLayer;y&&(Ds(this._container,"leaflet-interactive"),this._fireEvent([y],h,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(h,y){if(!this._mouseHoverThrottled){for(var _,M,j=this._drawFirst;j;j=j.next)_=j.layer,_.options.interactive&&_._containsPoint(y)&&(M=_);M!==this._hoveredLayer&&(this._handleMouseOut(h),M&&(fa(this._container,"leaflet-interactive"),this._fireEvent([M],h,"mouseover"),this._hoveredLayer=M)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,h),this._mouseHoverThrottled=!0,setTimeout(E(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(h,y,_){this._map._fireDOMEvent(y,_||y.type,h)},_bringToFront:function(h){var y=h._order;if(y){var _=y.next,M=y.prev;if(_)_.prev=M;else return;M?M.next=_:_&&(this._drawFirst=_),y.prev=this._drawLast,this._drawLast.next=y,y.next=null,this._drawLast=y,this._requestRedraw(h)}},_bringToBack:function(h){var y=h._order;if(y){var _=y.next,M=y.prev;if(M)M.next=_;else return;_?_.prev=M:M&&(this._drawLast=M),y.prev=null,y.next=this._drawFirst,this._drawFirst.prev=y,this._drawFirst=y,this._requestRedraw(h)}}});function Dr(h){return We.canvas?new zr(h):null}var nr=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(h){return document.createElement("<lvml:"+h+' class="lvml">')}}catch(h){}return function(h){return document.createElement("<"+h+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),Br={_initContainer:function(){this._container=za("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(zn.prototype._update.call(this),this.fire("update"))},_initPath:function(h){var y=h._container=nr("shape");fa(y,"leaflet-vml-shape "+(this.options.className||"")),y.coordsize="1 1",h._path=nr("path"),y.appendChild(h._path),this._updateStyle(h),this._layers[re(h)]=h},_addPath:function(h){var y=h._container;this._container.appendChild(y),h.options.interactive&&h.addInteractiveTarget(y)},_removePath:function(h){var y=h._container;Va(y),h.removeInteractiveTarget(y),delete this._layers[re(h)]},_updateStyle:function(h){var y=h._stroke,_=h._fill,M=h.options,j=h._container;j.stroked=!!M.stroke,j.filled=!!M.fill,M.stroke?(y||(y=h._stroke=nr("stroke")),j.appendChild(y),y.weight=M.weight+"px",y.color=M.color,y.opacity=M.opacity,M.dashArray?y.dashStyle=mt(M.dashArray)?M.dashArray.join(" "):M.dashArray.replace(/( *, *)/g," "):y.dashStyle="",y.endcap=M.lineCap.replace("butt","flat"),y.joinstyle=M.lineJoin):y&&(j.removeChild(y),h._stroke=null),M.fill?(_||(_=h._fill=nr("fill")),j.appendChild(_),_.color=M.fillColor||M.color,_.opacity=M.fillOpacity):_&&(j.removeChild(_),h._fill=null)},_updateCircle:function(h){var y=h._point.round(),_=Math.round(h._radius),M=Math.round(h._radiusY||_);this._setPath(h,h._empty()?"M0 0":"AL "+y.x+","+y.y+" "+_+","+M+" 0,"+65535*360)},_setPath:function(h,y){h._path.v=y},_bringToFront:function(h){xa(h._container)},_bringToBack:function(h){_r(h._container)}},to=We.vml?nr:Yn,gh=zn.extend({_initContainer:function(){this._container=to("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=to("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Va(this._container),Nt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){zn.prototype._update.call(this);var h=this._bounds,y=h.getSize(),_=this._container;(!this._svgSize||!this._svgSize.equals(y))&&(this._svgSize=y,_.setAttribute("width",y.x),_.setAttribute("height",y.y)),cs(_,h.min),_.setAttribute("viewBox",[h.min.x,h.min.y,y.x,y.y].join(" ")),this.fire("update")}},_initPath:function(h){var y=h._path=to("path");h.options.className&&fa(y,h.options.className),h.options.interactive&&fa(y,"leaflet-interactive"),this._updateStyle(h),this._layers[re(h)]=h},_addPath:function(h){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(h._path),h.addInteractiveTarget(h._path)},_removePath:function(h){Va(h._path),h.removeInteractiveTarget(h._path),delete this._layers[re(h)]},_updatePath:function(h){h._project(),h._update()},_updateStyle:function(h){var y=h._path,_=h.options;y&&(_.stroke?(y.setAttribute("stroke",_.color),y.setAttribute("stroke-opacity",_.opacity),y.setAttribute("stroke-width",_.weight),y.setAttribute("stroke-linecap",_.lineCap),y.setAttribute("stroke-linejoin",_.lineJoin),_.dashArray?y.setAttribute("stroke-dasharray",_.dashArray):y.removeAttribute("stroke-dasharray"),_.dashOffset?y.setAttribute("stroke-dashoffset",_.dashOffset):y.removeAttribute("stroke-dashoffset")):y.setAttribute("stroke","none"),_.fill?(y.setAttribute("fill",_.fillColor||_.color),y.setAttribute("fill-opacity",_.fillOpacity),y.setAttribute("fill-rule",_.fillRule||"evenodd")):y.setAttribute("fill","none"))},_updatePoly:function(h,y){this._setPath(h,Po(h._parts,y))},_updateCircle:function(h){var y=h._point,_=Math.max(Math.round(h._radius),1),M=Math.max(Math.round(h._radiusY),1)||_,j="a"+_+","+M+" 0 1,0 ",te=h._empty()?"M0 0":"M"+(y.x-_)+","+y.y+j+_*2+",0 "+j+-_*2+",0 ";this._setPath(h,te)},_setPath:function(h,y){h._path.setAttribute("d",y)},_bringToFront:function(h){xa(h._path)},_bringToBack:function(h){_r(h._path)}});We.vml&&gh.include(Br);function yh(h){return We.svg||We.vml?new gh(h):null}Oa.include({getRenderer:function(h){var y=h.options.renderer||this._getPaneRenderer(h.options.pane)||this.options.renderer||this._renderer;return y||(y=this._renderer=this._createRenderer()),this.hasLayer(y)||this.addLayer(y),y},_getPaneRenderer:function(h){if(h==="overlayPane"||h===void 0)return!1;var y=this._paneRenderers[h];return y===void 0&&(y=this._createRenderer({pane:h}),this._paneRenderers[h]=y),y},_createRenderer:function(h){return this.options.preferCanvas&&Dr(h)||yh(h)}});var ha=Ei.extend({initialize:function(h,y){Ei.prototype.initialize.call(this,this._boundsToLatLngs(h),y)},setBounds:function(h){return this.setLatLngs(this._boundsToLatLngs(h))},_boundsToLatLngs:function(h){return h=St(h),[h.getSouthWest(),h.getNorthWest(),h.getNorthEast(),h.getSouthEast()]}});function nd(h,y){return new ha(h,y)}gh.create=to,gh.pointsToPath=Po,di.geometryToLayer=Mn,di.coordsToLatLng=go,di.coordsToLatLngs=Cr,di.latLngToCoords=qh,di.latLngsToCoords=dh,di.getFeature=Ci,di.asFeature=fh,Oa.mergeOptions({boxZoom:!0});var wo=Fo.extend({initialize:function(h){this._map=h,this._container=h._container,this._pane=h._panes.overlayPane,this._resetStateTimeout=0,h.on("unload",this._destroy,this)},addHooks:function(){Wt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Nt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Va(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(h){if(!h.shiftKey||h.which!==1&&h.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ai(),Hh(),this._startPoint=this._map.mouseEventToContainerPoint(h),Wt(document,{contextmenu:po,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(h){this._moved||(this._moved=!0,this._box=za("div","leaflet-zoom-box",this._container),fa(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(h);var y=new _e(this._point,this._startPoint),_=y.getSize();cs(this._box,y.min),this._box.style.width=_.x+"px",this._box.style.height=_.y+"px"},_finish:function(){this._moved&&(Va(this._box),Ds(this._container,"leaflet-crosshair")),Co(),Ki(),Nt(document,{contextmenu:po,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(h){if(!(h.which!==1&&h.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(E(this._resetState,this),0);var y=new Ot(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(y).fire("boxzoomend",{boxZoomBounds:y})}},_onKeyDown:function(h){h.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Oa.addInitHook("addHandler","boxZoom",wo),Oa.mergeOptions({doubleClickZoom:!0});var bl=Fo.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(h){var y=this._map,_=y.getZoom(),M=y.options.zoomDelta,j=h.originalEvent.shiftKey?_-M:_+M;y.options.doubleClickZoom==="center"?y.setZoom(j):y.setZoomAround(h.containerPoint,j)}});Oa.addInitHook("addHandler","doubleClickZoom",bl),Oa.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var vo=Fo.extend({addHooks:function(){if(!this._draggable){var h=this._map;this._draggable=new js(h._mapPane,h._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),h.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),h.on("zoomend",this._onZoomEnd,this),h.whenReady(this._onZoomEnd,this))}fa(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ds(this._map._container,"leaflet-grab"),Ds(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var h=this._map;if(h._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var y=St(this._map.options.maxBounds);this._offsetLimit=tt(this._map.latLngToContainerPoint(y.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(y.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;h.fire("movestart").fire("dragstart"),h.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(h){if(this._map.options.inertia){var y=this._lastTime=+new Date,_=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(_),this._times.push(y),this._prunePositions(y)}this._map.fire("move",h).fire("drag",h)},_prunePositions:function(h){for(;this._positions.length>1&&h-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var h=this._map.getSize().divideBy(2),y=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=y.subtract(h).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(h,y){return h-(h-y)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var h=this._draggable._newPos.subtract(this._draggable._startPos),y=this._offsetLimit;h.x<y.min.x&&(h.x=this._viscousLimit(h.x,y.min.x)),h.y<y.min.y&&(h.y=this._viscousLimit(h.y,y.min.y)),h.x>y.max.x&&(h.x=this._viscousLimit(h.x,y.max.x)),h.y>y.max.y&&(h.y=this._viscousLimit(h.y,y.max.y)),this._draggable._newPos=this._draggable._startPos.add(h)}},_onPreDragWrap:function(){var h=this._worldWidth,y=Math.round(h/2),_=this._initialWorldOffset,M=this._draggable._newPos.x,j=(M-y+_)%h+y-_,te=(M+y+_)%h-y-_,we=Math.abs(j+_)<Math.abs(te+_)?j:te;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=we},_onDragEnd:function(h){var y=this._map,_=y.options,M=!_.inertia||h.noInertia||this._times.length<2;if(y.fire("dragend",h),M)y.fire("moveend");else{this._prunePositions(+new Date);var j=this._lastPos.subtract(this._positions[0]),te=(this._lastTime-this._times[0])/1e3,we=_.easeLinearity,De=j.multiplyBy(we/te),$e=De.distanceTo([0,0]),ct=Math.min(_.inertiaMaxSpeed,$e),Mt=De.multiplyBy(ct/$e),Kt=ct/(_.inertiaDeceleration*we),ka=Mt.multiplyBy(-Kt/2).round();!ka.x&&!ka.y?y.fire("moveend"):(ka=y._limitOffset(ka,y.options.maxBounds),ma(function(){y.panBy(ka,{duration:Kt,easeLinearity:we,noMoveStart:!0,animate:!0})}))}}});Oa.addInitHook("addHandler","dragging",vo),Oa.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Hd=Fo.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(h){this._map=h,this._setPanDelta(h.options.keyboardPanDelta),this._setZoomDelta(h.options.zoomDelta)},addHooks:function(){var h=this._map._container;h.tabIndex<=0&&(h.tabIndex="0"),Wt(h,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Nt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var h=document.body,y=document.documentElement,_=h.scrollTop||y.scrollTop,M=h.scrollLeft||y.scrollLeft;this._map._container.focus(),window.scrollTo(M,_)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(h){var y=this._panKeys={},_=this.keyCodes,M,j;for(M=0,j=_.left.length;M<j;M++)y[_.left[M]]=[-1*h,0];for(M=0,j=_.right.length;M<j;M++)y[_.right[M]]=[h,0];for(M=0,j=_.down.length;M<j;M++)y[_.down[M]]=[0,h];for(M=0,j=_.up.length;M<j;M++)y[_.up[M]]=[0,-1*h]},_setZoomDelta:function(h){var y=this._zoomKeys={},_=this.keyCodes,M,j;for(M=0,j=_.zoomIn.length;M<j;M++)y[_.zoomIn[M]]=h;for(M=0,j=_.zoomOut.length;M<j;M++)y[_.zoomOut[M]]=-h},_addHooks:function(){Wt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Nt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(h){if(!(h.altKey||h.ctrlKey||h.metaKey)){var y=h.keyCode,_=this._map,M;if(y in this._panKeys){if(!_._panAnim||!_._panAnim._inProgress)if(M=this._panKeys[y],h.shiftKey&&(M=Dt(M).multiplyBy(3)),_.options.maxBounds&&(M=_._limitOffset(Dt(M),_.options.maxBounds)),_.options.worldCopyJump){var j=_.wrapLatLng(_.unproject(_.project(_.getCenter()).add(M)));_.panTo(j)}else _.panBy(M)}else if(y in this._zoomKeys)_.setZoom(_.getZoom()+(h.shiftKey?3:1)*this._zoomKeys[y]);else if(y===27&&_._popup&&_._popup.options.closeOnEscapeKey)_.closePopup();else return;po(h)}}});Oa.addInitHook("addHandler","keyboard",Hd),Oa.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var wl=Fo.extend({addHooks:function(){Wt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Nt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(h){var y=Xs(h),_=this._map.options.wheelDebounceTime;this._delta+=y,this._lastMousePos=this._map.mouseEventToContainerPoint(h),this._startTime||(this._startTime=+new Date);var M=Math.max(_-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(E(this._performZoom,this),M),po(h)},_performZoom:function(){var h=this._map,y=h.getZoom(),_=this._map.options.zoomSnap||0;h._stop();var M=this._delta/(this._map.options.wheelPxPerZoomLevel*4),j=4*Math.log(2/(1+Math.exp(-Math.abs(M))))/Math.LN2,te=_?Math.ceil(j/_)*_:j,we=h._limitZoom(y+(this._delta>0?te:-te))-y;this._delta=0,this._startTime=null,we&&(h.options.scrollWheelZoom==="center"?h.setZoom(y+we):h.setZoomAround(this._lastMousePos,y+we))}});Oa.addInitHook("addHandler","scrollWheelZoom",wl);var Rr=600;Oa.mergeOptions({tapHold:We.touchNative&&We.safari&&We.mobile,tapTolerance:15});var od=Fo.extend({addHooks:function(){Wt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Nt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(h){if(clearTimeout(this._holdTimeout),h.touches.length===1){var y=h.touches[0];this._startPos=this._newPos=new gt(y.clientX,y.clientY),this._holdTimeout=setTimeout(E(function(){this._cancel(),this._isTapValid()&&(Wt(document,"touchend",wa),Wt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",y))},this),Rr),Wt(document,"touchend touchcancel contextmenu",this._cancel,this),Wt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function h(){Nt(document,"touchend",wa),Nt(document,"touchend touchcancel",h)},_cancel:function(){clearTimeout(this._holdTimeout),Nt(document,"touchend touchcancel contextmenu",this._cancel,this),Nt(document,"touchmove",this._onMove,this)},_onMove:function(h){var y=h.touches[0];this._newPos=new gt(y.clientX,y.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(h,y){var _=new MouseEvent(h,{bubbles:!0,cancelable:!0,view:window,screenX:y.screenX,screenY:y.screenY,clientX:y.clientX,clientY:y.clientY});_._simulated=!0,y.target.dispatchEvent(_)}});Oa.addInitHook("addHandler","tapHold",od),Oa.mergeOptions({touchZoom:We.touch,bounceAtZoomLimits:!0});var vl=Fo.extend({addHooks:function(){fa(this._map._container,"leaflet-touch-zoom"),Wt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ds(this._map._container,"leaflet-touch-zoom"),Nt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(h){var y=this._map;if(!(!h.touches||h.touches.length!==2||y._animatingZoom||this._zooming)){var _=y.mouseEventToContainerPoint(h.touches[0]),M=y.mouseEventToContainerPoint(h.touches[1]);this._centerPoint=y.getSize()._divideBy(2),this._startLatLng=y.containerPointToLatLng(this._centerPoint),y.options.touchZoom!=="center"&&(this._pinchStartLatLng=y.containerPointToLatLng(_.add(M)._divideBy(2))),this._startDist=_.distanceTo(M),this._startZoom=y.getZoom(),this._moved=!1,this._zooming=!0,y._stop(),Wt(document,"touchmove",this._onTouchMove,this),Wt(document,"touchend touchcancel",this._onTouchEnd,this),wa(h)}},_onTouchMove:function(h){if(!(!h.touches||h.touches.length!==2||!this._zooming)){var y=this._map,_=y.mouseEventToContainerPoint(h.touches[0]),M=y.mouseEventToContainerPoint(h.touches[1]),j=_.distanceTo(M)/this._startDist;if(this._zoom=y.getScaleZoom(j,this._startZoom),!y.options.bounceAtZoomLimits&&(this._zoom<y.getMinZoom()&&j<1||this._zoom>y.getMaxZoom()&&j>1)&&(this._zoom=y._limitZoom(this._zoom)),y.options.touchZoom==="center"){if(this._center=this._startLatLng,j===1)return}else{var te=_._add(M)._divideBy(2)._subtract(this._centerPoint);if(j===1&&te.x===0&&te.y===0)return;this._center=y.unproject(y.project(this._pinchStartLatLng,this._zoom).subtract(te),this._zoom)}this._moved||(y._moveStart(!0,!1),this._moved=!0),pa(this._animRequest);var we=E(y._move,y,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=ma(we,this,!0),wa(h)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,pa(this._animRequest),Nt(document,"touchmove",this._onTouchMove,this),Nt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Oa.addInitHook("addHandler","touchZoom",vl),Oa.BoxZoom=wo,Oa.DoubleClickZoom=bl,Oa.Drag=vo,Oa.Keyboard=Hd,Oa.ScrollWheelZoom=wl,Oa.TapHold=od,Oa.TouchZoom=vl,N.Bounds=_e,N.Browser=We,N.CRS=da,N.Canvas=zr,N.Circle=lh,N.CircleMarker=li,N.Class=os,N.Control=vn,N.DivIcon=Wh,N.DivOverlay=cn,N.DomEvent=ll,N.DomUtil=fn,N.Draggable=js,N.Evented=It,N.FeatureGroup=jo,N.GeoJSON=di,N.GridLayer=Ln,N.Handler=Fo,N.Icon=Uo,N.ImageOverlay=ch,N.LatLng=Ct,N.LatLngBounds=Ot,N.Layer=mo,N.LayerGroup=hh,N.LineUtil=Gh,N.Map=Oa,N.Marker=hi,N.Mixin=rc,N.Path=qo,N.Point=gt,N.PolyUtil=cl,N.Polygon=Ei,N.Polyline=tr,N.Popup=Lr,N.PosAnimation=Ar,N.Projection=mf,N.Rectangle=ha,N.Renderer=zn,N.SVG=gh,N.SVGOverlay=sd,N.TileLayer=sr,N.Tooltip=uh,N.Transformation=_i,N.Util=Ca,N.VideoOverlay=Mr,N.bind=E,N.bounds=tt,N.canvas=Dr,N.circle=yf,N.circleMarker=Bd,N.control=ua,N.divIcon=Zh,N.extend=J,N.featureGroup=ad,N.geoJSON=Vh,N.geoJson=gl,N.gridLayer=Rd,N.icon=Fh,N.imageOverlay=vf,N.latLng=Ht,N.latLngBounds=St,N.layerGroup=gf,N.map=Ka,N.marker=Dd,N.point=Dt,N.polygon=wf,N.polyline=bf,N.popup=yl,N.rectangle=nd,N.setOptions=it,N.stamp=re,N.svg=yh,N.svgOverlay=Ra,N.tileLayer=bo,N.tooltip=mh,N.transformation=Tn,N.version=U,N.videoOverlay=ph;var Hr=window.L;N.noConflict=function(){return window.L=Hr,this},window.L=N}))})(Iu,Iu.exports)),Iu.exports}var Ld=y1();const ly=hn(Ld);function nc(B,Y,N){return Object.freeze({instance:B,context:Y,container:N})}function xu(B,Y){return Y==null?function(U,J){const he=Be.useRef(void 0);return he.current||(he.current=B(U,J)),he}:function(U,J){const he=Be.useRef(void 0);he.current||(he.current=B(U,J));const E=Be.useRef(U),{instance:c}=he.current;return Be.useEffect(function(){E.current!==U&&(Y(c,U,E.current),E.current=U)},[c,U,Y]),he}}function b1(B,Y){Be.useEffect(function(){var J;return((J=Y.layerContainer)!=null?J:Y.map).addLayer(B.instance),function(){var E;(E=Y.layerContainer)==null||E.removeLayer(B.instance),Y.map.removeLayer(B.instance)}},[Y,B])}function w1(B){return function(N){const U=rp(),J=B(Hm(N,U),U);return m1(U.map,N.attribution),hy(J.current,N.eventHandlers),b1(J.current,U),J}}function jw(B,Y){const N=Be.useRef(void 0);Be.useEffect(function(){var J;if(Y.pathOptions!==N.current){const he=(J=Y.pathOptions)!=null?J:{};B.instance.setStyle(he),N.current=he}},[B,Y])}function Uw(B){return function(N){const U=rp(),J=B(Hm(N,U),U);return hy(J.current,N.eventHandlers),b1(J.current,U),jw(J.current,N),J}}function qw(B,Y){const N=xu(B,Y),U=w1(N);return ry(U)}function v1(B,Y){const N=xu(B),U=Gw(N,Y);return Rw(U)}function O1(B,Y){const N=xu(B,Y),U=Uw(N);return ry(U)}function Vw(B,Y){const N=xu(B,Y),U=w1(N);return Hw(U)}function Ww(B,Y,N){const{opacity:U,zIndex:J}=Y;U!=null&&U!==N.opacity&&B.setOpacity(U),J!=null&&J!==N.zIndex&&B.setZIndex(J)}function dy(){return rp().map}const hp=O1(function(he,J){var E=he,{center:Y,children:N}=E,U=il(E,["center","children"]);const c=new Ld.CircleMarker(Y,U);return nc(c,_u(J,{overlayContainer:c}))},zw),Zw=xu(function(J,U){var he=J,{children:Y}=he,N=il(he,["children"]);const E=new Ld.Control.Layers(void 0,void 0,N);return nc(E,_u(U,{layersControl:E}))},function(Y,N,U){N.collapsed!==U.collapsed&&(N.collapsed===!0?Y.collapse():Y.expand())}),Xw=Nw(Zw),lp=ry(Xw);function k1(B){return function(N){const U=rp(),J=Be.useRef(N),[he,E]=Be.useState(null),{layersControl:c,map:re}=U,fe=Be.useCallback(Pe=>{c!=null&&(J.current.checked&&re.addLayer(Pe),B(c,Pe,J.current.name),E(Pe))},[B,c,re]),Le=Be.useCallback(Pe=>{c==null||c.removeLayer(Pe),E(null)},[c]),Ce=Be.useMemo(()=>_u(U,{layerContainer:{addLayer:fe,removeLayer:Le}}),[U,fe,Le]);return Be.useEffect(()=>{he!==null&&J.current!==N&&(N.checked===!0&&(J.current.checked==null||J.current.checked===!1)?re.addLayer(he):J.current.checked===!0&&(N.checked==null||N.checked===!1)&&re.removeLayer(he),J.current=N)}),N.children?gu.createElement(Rm,{value:Ce},N.children):null}}lp.BaseLayer=k1(function(Y,N,U){Y.addBaseLayer(N,U)}),lp.Overlay=k1(function(Y,N,U){Y.addOverlay(N,U)});function Yw(Pe,Ce){var ft=Pe,{bounds:B,boundsOptions:Y,center:N,children:U,className:J,id:he,placeholder:E,style:c,whenReady:re,zoom:fe}=ft,Le=il(ft,["bounds","boundsOptions","center","children","className","id","placeholder","style","whenReady","zoom"]);const[kt]=Be.useState({className:J,id:he,style:c}),[it,Te]=Be.useState(null),Vt=Be.useRef(void 0);Be.useImperativeHandle(Ce,()=>{var Et;return(Et=it==null?void 0:it.map)!=null?Et:null},[it]);const Ft=Be.useCallback(Et=>{if(Et!==null&&!Vt.current){const $t=new Ld.Map(Et,Le);Vt.current=$t,N!=null&&fe!=null?$t.setView(N,fe):B!=null&&$t.fitBounds(B,Y),re!=null&&$t.whenReady(re),Te(Bw($t))}},[]);Be.useEffect(()=>()=>{it==null||it.map.remove()},[it]);const mt=it?gu.createElement(Rm,{value:it},U):E!=null?E:null;return gu.createElement("div",Or(rn({},kt),{ref:Ft}),mt)}const fy=Be.forwardRef(Yw),_1=qw(function(J,U){var he=J,{position:Y}=he,N=il(he,["position"]);const E=new Ld.Marker(Y,N);return nc(E,_u(U,{overlayContainer:E}))},function(Y,N,U){N.position!==U.position&&Y.setLatLng(N.position),N.icon!=null&&N.icon!==U.icon&&Y.setIcon(N.icon),N.zIndexOffset!=null&&N.zIndexOffset!==U.zIndexOffset&&Y.setZIndexOffset(N.zIndexOffset),N.opacity!=null&&N.opacity!==U.opacity&&Y.setOpacity(N.opacity),Y.dragging!=null&&N.draggable!==U.draggable&&(N.draggable===!0?Y.dragging.enable():Y.dragging.disable())}),$w=O1(function(J,U){var he=J,{positions:Y}=he,N=il(he,["positions"]);const E=new Ld.Polyline(Y,N);return nc(E,_u(U,{overlayContainer:E}))},function(Y,N,U){N.positions!==U.positions&&Y.setLatLngs(N.positions)}),cy=v1(function(Y,N){const U=new Ld.Popup(Y,N.overlayContainer);return nc(U,N)},function(Y,N,{position:U},J){Be.useEffect(function(){const{instance:E}=Y;function c(fe){fe.popup===E&&(E.update(),J(!0))}function re(fe){fe.popup===E&&J(!1)}return N.map.on({popupopen:c,popupclose:re}),N.overlayContainer==null?(U!=null&&E.setLatLng(U),E.openOn(N.map)):N.overlayContainer.bindPopup(E),function(){var Le;N.map.off({popupopen:c,popupclose:re}),(Le=N.overlayContainer)==null||Le.unbindPopup(),N.map.removeLayer(E)}},[Y,N,J,U])}),oc=Vw(function(J,U){var he=J,{url:Y}=he,N=il(he,["url"]);const E=new Ld.TileLayer(Y,Hm(N,U));return nc(E,U)},function(Y,N,U){Ww(Y,N,U);const{url:J}=N;J!=null&&J!==U.url&&Y.setUrl(J)}),Tu=v1(function(Y,N){const U=new Ld.Tooltip(Y,N.overlayContainer);return nc(U,N)},function(Y,N,{position:U},J){Be.useEffect(function(){const E=N.overlayContainer;if(E==null)return;const{instance:c}=Y,re=Le=>{Le.tooltip===c&&(U!=null&&c.setLatLng(U),c.update(),J(!0))},fe=Le=>{Le.tooltip===c&&J(!1)};return E.on({tooltipopen:re,tooltipclose:fe}),E.bindTooltip(c),function(){E.off({tooltipopen:re,tooltipclose:fe}),E._map!=null&&E.unbindTooltip()}},[Y,N,J,U])}),{BaseLayer:py}=lp;function Kw({booksIndex:B,placesData:Y}){var Ce;const N=Jg(),[U,J]=Be.useState(1),[he,E]=Be.useState([]),c=Pe=>{N(`/place/${Pe}`)},re=Be.useMemo(()=>B!=null&&B.books?Math.max(...B.books.map(Pe=>Pe.placeCount)):1,[B]);Be.useEffect(()=>{if(!Y)return;const Pe=[],ft=new Set;Object.values(Y).forEach(kt=>{if(!kt.lat||!kt.lng)return;kt.occurrences.some(Te=>Te.book===U)&&!ft.has(kt.id)&&(ft.add(kt.id),Pe.push(kt))}),E(Pe)},[U,Y]);const fe=Pe=>{J(Pe)},Le=Pe=>{N(`/book/${Pe}`)};return B!=null&&B.books?xe.jsxs("div",{className:"summary-view",children:[xe.jsxs("div",{className:"books-panel",children:[xe.jsx("h2",{children:"The Histories"}),xe.jsx("p",{className:"ui-text",style:{marginBottom:"1rem",color:"var(--color-brown-light)",fontSize:"0.9rem"},children:"Click to preview places, double-click to read"}),xe.jsx("ul",{className:"book-list",children:B.books.map(Pe=>xe.jsxs("li",{className:`book-item ${U===Pe.id?"selected":""}`,onClick:()=>fe(Pe.id),onDoubleClick:()=>Le(Pe.id),children:[xe.jsx("h3",{children:Pe.title}),xe.jsxs("div",{className:"book-stats ui-text",children:[Pe.chapterCount," chapters  ",Pe.placeCount," place mentions"]}),xe.jsx("div",{className:"place-bar",children:xe.jsx("div",{className:"place-bar-fill",style:{width:`${Pe.placeCount/re*100}%`}})})]},Pe.id))})]}),xe.jsxs("div",{className:"summary-map",children:[xe.jsxs(fy,{center:[38,28],zoom:4,style:{height:"100%",width:"100%"},scrollWheelZoom:!0,children:[xe.jsxs(lp,{position:"topright",children:[xe.jsx(py,{checked:!0,name:"Satellite Imagery",children:xe.jsx(oc,{attribution:" Esri",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",maxZoom:19,opacity:.7})}),xe.jsx(py,{name:"Modern Political Map",children:xe.jsx(oc,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",maxZoom:19})}),xe.jsx(py,{name:"CAWM Ancient World",children:xe.jsx(oc,{attribution:' <a href="https://cawm.lib.uiowa.edu/">CAWM</a> (CC BY 4.0)',url:"http://cawm.lib.uiowa.edu/tiles/{z}/{x}/{y}.png",maxZoom:11})})]}),he.map(Pe=>xe.jsx(hp,{center:[Pe.lat,Pe.lng],radius:6,pathOptions:{fillColor:"#c45a3b",fillOpacity:.8,color:"#fff",weight:2},eventHandlers:{click:()=>c(Pe.id)},children:xe.jsxs(cy,{children:[xe.jsx("div",{className:"popup-place-name",children:Pe.name}),Pe.placeType&&xe.jsx("div",{className:"popup-place-type",children:Pe.placeType}),xe.jsx(Qr,{to:`/place/${Pe.id}`,className:"ui-text",style:{fontSize:"0.85rem",display:"block",marginTop:"0.5rem"},children:"View details "})]})},Pe.id))]}),xe.jsxs("div",{style:{position:"absolute",top:"20px",left:"20px",background:"white",padding:"0.75rem 1rem",borderRadius:"4px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",zIndex:1e3},children:[xe.jsxs("h3",{style:{margin:0,fontSize:"1rem"},children:["Book ",U,": ",(Ce=B.books[U-1])==null?void 0:Ce.title.split(": ")[1]]}),xe.jsxs("p",{className:"ui-text",style:{margin:"0.25rem 0 0",fontSize:"0.85rem",color:"var(--color-brown-light)"},children:[he.length," unique places"]})]})]})]}):xe.jsx("div",{className:"loading",children:"Loading..."})}function Qw({bookData:B,bookInfo:Y,currentChapter:N,currentChapterData:U,placesData:J,selectedPlace:he,highlightedPlaces:E,onChapterChange:c,onPlaceClick:re,language:fe,onLanguageToggle:Le,greekText:Ce}){const Pe=Be.useRef(null);Be.useEffect(()=>{Pe.current&&(Pe.current.scrollTop=0)},[N]);const ft=Be.useMemo(()=>{if(!U)return null;const Et=U.text,Ia=[...U.places||[]].sort((ba,fs)=>ba.startOffset-fs.startOffset),zt=[];let ca=0;return Ia.forEach((ba,fs)=>{ba.startOffset>ca&&zt.push({type:"text",content:Et.slice(ca,ba.startOffset)});const ma=J==null?void 0:J[ba.placeId],pa=ma&&ma.lat&&ma.lng;zt.push({type:"place",placeId:ba.placeId,name:ba.name,hasCoords:pa,isSelected:he===ba.placeId,isHighlighted:E.has(ba.placeId)}),ca=ba.endOffset}),ca<Et.length&&zt.push({type:"text",content:Et.slice(ca)}),zt},[U,J,he,E]),kt=Be.useMemo(()=>{if(!U)return[];const Et=U.places||[],$t=[],Ia=new Set;return Et.forEach(zt=>{const ca=J==null?void 0:J[zt.placeId];!(ca&&ca.lat&&ca.lng)&&!Ia.has(zt.placeId)&&(Ia.add(zt.placeId),$t.push({id:zt.placeId,name:zt.name}))}),$t.sort((zt,ca)=>zt.name.localeCompare(ca.name))},[U,J]),it=Be.useMemo(()=>B!=null&&B.chapters?B.chapters.map(Et=>Et.id).sort((Et,$t)=>Et-$t):[],[B]),Te=it.indexOf(N),Vt=()=>{Te>0&&c(it[Te-1])},Ft=()=>{Te>=0&&Te<it.length-1&&c(it[Te+1])},mt=Et=>{c(parseInt(Et.target.value,10))};return!B||!U?xe.jsx("div",{className:"text-panel",children:xe.jsx("div",{className:"loading",children:"Loading chapter..."})}):xe.jsxs("div",{className:"text-panel",children:[xe.jsxs("div",{className:"text-header",children:[xe.jsxs("div",{children:[xe.jsx(Qr,{to:"/",className:"back-button ui-text",style:{marginRight:"1rem"},children:" Books"}),xe.jsx("h2",{style:{display:"inline"},children:(Y==null?void 0:Y.title)||`Book ${B.id}`})]}),xe.jsxs("div",{className:"chapter-nav",children:[xe.jsx("button",{onClick:Le,className:"language-toggle",title:"Switch between English and Greek text",children:fe==="english"?"":"English"}),xe.jsx("button",{onClick:Vt,disabled:Te<=0,children:" Prev"}),xe.jsx("select",{value:N,onChange:mt,children:it.map(Et=>xe.jsxs("option",{value:Et,children:["Chapter ",Et]},Et))}),xe.jsx("button",{onClick:Ft,disabled:Te>=it.length-1,children:"Next "})]})]}),xe.jsx("div",{className:"text-content",ref:Pe,children:xe.jsxs("div",{className:"chapter-section",children:[xe.jsxs("div",{className:"chapter-number ui-text",children:["Chapter ",N," (of ",it.length,")"]}),fe==="greek"?xe.jsx("div",{className:"chapter-text greek-text",children:Ce||"Loading Greek text..."}):xe.jsx("div",{className:"chapter-text",children:ft==null?void 0:ft.map((Et,$t)=>{if(Et.type==="text")return xe.jsx("span",{children:Et.content},$t);const Ia=["place-mention",Et.isSelected?"selected":"",Et.isHighlighted?"highlighted":"",Et.hasCoords?"":"no-coords"].filter(Boolean).join(" ");return Et.hasCoords?xe.jsx(Qr,{to:`/place/${Et.placeId}`,className:Ia,onClick:zt=>{zt.preventDefault(),re(Et.placeId)},onDoubleClick:zt=>{zt.preventDefault(),window.location.href=`#/place/${Et.placeId}`},title:"Click to highlight on map, double-click for details",children:Et.name},$t):xe.jsx("span",{className:Ia,style:{opacity:.7,cursor:"default"},title:"Location unknown",children:Et.name},$t)})}),fe==="english"&&kt.length>0&&xe.jsxs("div",{className:"unlocated-places",children:[xe.jsxs("h4",{children:["Places without known coordinates (",kt.length,")"]}),xe.jsx("div",{className:"unlocated-list",children:kt.map(Et=>xe.jsx("span",{className:"unlocated-place",children:Et.name},Et.id))})]})]})})]})}var Nm={exports:{}},Gm={exports:{}};var Jw=Gm.exports,I1;function e0(){return I1||(I1=1,(function(B,Y){(function(N,U){B.exports=U()})(Jw,(function(){var N={},U={};function J(E,c,re){if(U[E]=re,E==="index"){var fe="var sharedModule = {}; ("+U.shared+")(sharedModule); ("+U.worker+")(sharedModule);",Le={};return U.shared(Le),U.index(N,Le),typeof window!="undefined"&&N.setWorkerUrl(window.URL.createObjectURL(new Blob([fe],{type:"text/javascript"}))),N}}J("shared",["exports"],(function(E){function c(s,e,a,r){return new(a||(a=Promise))((function(d,u){function m(T){try{k(r.next(T))}catch(P){u(P)}}function v(T){try{k(r.throw(T))}catch(P){u(P)}}function k(T){var P;T.done?d(T.value):(P=T.value,P instanceof a?P:new a((function(z){z(P)}))).then(m,v)}k((r=r.apply(s,e||[])).next())}))}function re(s,e){this.x=s,this.y=e}function fe(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Le,Ce;typeof SuppressedError=="function"&&SuppressedError,re.prototype={clone(){return new re(this.x,this.y)},add(s){return this.clone()._add(s)},sub(s){return this.clone()._sub(s)},multByPoint(s){return this.clone()._multByPoint(s)},divByPoint(s){return this.clone()._divByPoint(s)},mult(s){return this.clone()._mult(s)},div(s){return this.clone()._div(s)},rotate(s){return this.clone()._rotate(s)},rotateAround(s,e){return this.clone()._rotateAround(s,e)},matMult(s){return this.clone()._matMult(s)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(s){return this.x===s.x&&this.y===s.y},dist(s){return Math.sqrt(this.distSqr(s))},distSqr(s){const e=s.x-this.x,a=s.y-this.y;return e*e+a*a},angle(){return Math.atan2(this.y,this.x)},angleTo(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith(s){return this.angleWithSep(s.x,s.y)},angleWithSep(s,e){return Math.atan2(this.x*e-this.y*s,this.x*s+this.y*e)},_matMult(s){const e=s[2]*this.x+s[3]*this.y;return this.x=s[0]*this.x+s[1]*this.y,this.y=e,this},_add(s){return this.x+=s.x,this.y+=s.y,this},_sub(s){return this.x-=s.x,this.y-=s.y,this},_mult(s){return this.x*=s,this.y*=s,this},_div(s){return this.x/=s,this.y/=s,this},_multByPoint(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint(s){return this.x/=s.x,this.y/=s.y,this},_unit(){return this._div(this.mag()),this},_perp(){const s=this.y;return this.y=this.x,this.x=-s,this},_rotate(s){const e=Math.cos(s),a=Math.sin(s),r=a*this.x+e*this.y;return this.x=e*this.x-a*this.y,this.y=r,this},_rotateAround(s,e){const a=Math.cos(s),r=Math.sin(s),d=e.y+r*(this.x-e.x)+a*(this.y-e.y);return this.x=e.x+a*(this.x-e.x)-r*(this.y-e.y),this.y=d,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:re},re.convert=function(s){if(s instanceof re)return s;if(Array.isArray(s))return new re(+s[0],+s[1]);if(s.x!==void 0&&s.y!==void 0)return new re(+s.x,+s.y);throw new Error("Expected [x, y] or {x, y} point format")};var Pe=(function(){if(Ce)return Le;function s(e,a,r,d){this.cx=3*e,this.bx=3*(r-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*a,this.by=3*(d-a)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=a,this.p2x=r,this.p2y=d}return Ce=1,Le=s,s.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,a){if(a===void 0&&(a=1e-6),e<0)return 0;if(e>1)return 1;for(var r=e,d=0;d<8;d++){var u=this.sampleCurveX(r)-e;if(Math.abs(u)<a)return r;var m=this.sampleCurveDerivativeX(r);if(Math.abs(m)<1e-6)break;r-=u/m}var v=0,k=1;for(r=e,d=0;d<20&&(u=this.sampleCurveX(r),!(Math.abs(u-e)<a));d++)e>u?v=r:k=r,r=.5*(k-v)+v;return r},solve:function(e,a){return this.sampleCurveY(this.solveCurveX(e,a))}},Le})(),ft=fe(Pe);let kt,it;function Te(){return kt==null&&(kt=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),kt}function Vt(){if(it==null&&(it=!1,Te())){const e=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(e){for(let r=0;r<25;r++){const d=4*r;e.fillStyle=`rgb(${d},${d+1},${d+2})`,e.fillRect(r%5,Math.floor(r/5),1,1)}const a=e.getImageData(0,0,5,5).data;for(let r=0;r<100;r++)if(r%4!=3&&a[r]!==r){it=!0;break}}}return it||!1}var Ft=1e-6,mt=typeof Float32Array!="undefined"?Float32Array:Array;function Et(){var s=new mt(9);return mt!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[5]=0,s[6]=0,s[7]=0),s[0]=1,s[4]=1,s[8]=1,s}function $t(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function Ia(){var s=new mt(3);return mt!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0),s}function zt(s){var e=s[0],a=s[1],r=s[2];return Math.sqrt(e*e+a*a+r*r)}function ca(s,e,a){var r=new mt(3);return r[0]=s,r[1]=e,r[2]=a,r}function ba(s,e,a){return s[0]=e[0]+a[0],s[1]=e[1]+a[1],s[2]=e[2]+a[2],s}function fs(s,e,a){return s[0]=e[0]*a,s[1]=e[1]*a,s[2]=e[2]*a,s}function ma(s,e,a){var r=e[0],d=e[1],u=e[2],m=a[0],v=a[1],k=a[2];return s[0]=d*k-u*v,s[1]=u*m-r*k,s[2]=r*v-d*m,s}var pa,Ca=zt;function os(s,e,a){var r=e[0],d=e[1],u=e[2],m=e[3];return s[0]=a[0]*r+a[4]*d+a[8]*u+a[12]*m,s[1]=a[1]*r+a[5]*d+a[9]*u+a[13]*m,s[2]=a[2]*r+a[6]*d+a[10]*u+a[14]*m,s[3]=a[3]*r+a[7]*d+a[11]*u+a[15]*m,s}function Ts(){var s=new mt(4);return mt!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0),s[3]=1,s}function Je(s,e,a,r){var d=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",u=Math.PI/360;e*=u,r*=u,a*=u;var m=Math.sin(e),v=Math.cos(e),k=Math.sin(a),T=Math.cos(a),P=Math.sin(r),z=Math.cos(r);switch(d){case"xyz":s[0]=m*T*z+v*k*P,s[1]=v*k*z-m*T*P,s[2]=v*T*P+m*k*z,s[3]=v*T*z-m*k*P;break;case"xzy":s[0]=m*T*z-v*k*P,s[1]=v*k*z-m*T*P,s[2]=v*T*P+m*k*z,s[3]=v*T*z+m*k*P;break;case"yxz":s[0]=m*T*z+v*k*P,s[1]=v*k*z-m*T*P,s[2]=v*T*P-m*k*z,s[3]=v*T*z+m*k*P;break;case"yzx":s[0]=m*T*z+v*k*P,s[1]=v*k*z+m*T*P,s[2]=v*T*P-m*k*z,s[3]=v*T*z-m*k*P;break;case"zxy":s[0]=m*T*z-v*k*P,s[1]=v*k*z+m*T*P,s[2]=v*T*P+m*k*z,s[3]=v*T*z-m*k*P;break;case"zyx":s[0]=m*T*z-v*k*P,s[1]=v*k*z+m*T*P,s[2]=v*T*P-m*k*z,s[3]=v*T*z+m*k*P;break;default:throw new Error("Unknown angle order "+d)}return s}function It(){var s=new mt(2);return mt!=Float32Array&&(s[0]=0,s[1]=0),s}function gt(s,e){var a=new mt(2);return a[0]=s,a[1]=e,a}Ia(),pa=new mt(4),mt!=Float32Array&&(pa[0]=0,pa[1]=0,pa[2]=0,pa[3]=0),Ia(),ca(1,0,0),ca(0,1,0),Ts(),Ts(),Et(),It();const jt=8192;function Dt(s,e,a){return e*(jt/(s.tileSize*Math.pow(2,a-s.tileID.overscaledZ)))}function _e(s,e){return(s%e+e)%e}function tt(s,e,a){return s*(1-a)+e*a}function Ot(s){if(s<=0)return 0;if(s>=1)return 1;const e=s*s,a=e*s;return 4*(s<.5?a:3*(s-e)+a-.75)}function St(s,e,a,r){const d=new ft(s,e,a,r);return u=>d.solve(u)}const Ct=St(.25,.1,.25,1);function Ht(s,e,a){return Math.min(a,Math.max(e,s))}function da(s,e,a){const r=a-e,d=((s-e)%r+r)%r+e;return d===e?a:d}function Ma(s,...e){for(const a of e)for(const r in a)s[r]=a[r];return s}let is=1;function xn(s,e,a){const r={};for(const d in s)r[d]=e.call(this,s[d],d,s);return r}function _i(s,e,a){const r={};for(const d in s)e.call(this,s[d],d,s)&&(r[d]=s[d]);return r}function Tn(s){return Array.isArray(s)?s.map(Tn):typeof s=="object"&&s?xn(s,Tn):s}const kr={};function As(s){kr[s]||(typeof console!="undefined"&&console.warn(s),kr[s]=!0)}function Yn(s,e,a){return(a.y-s.y)*(e.x-s.x)>(e.y-s.y)*(a.x-s.x)}function Po(s){return typeof WorkerGlobalScope!="undefined"&&s!==void 0&&s instanceof WorkerGlobalScope}let vs=null;function Ro(s){return typeof ImageBitmap!="undefined"&&s instanceof ImageBitmap}const Zi="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Xi(s,e,a,r,d){return c(this,void 0,void 0,(function*(){if(typeof VideoFrame=="undefined")throw new Error("VideoFrame not supported");const u=new VideoFrame(s,{timestamp:0});try{const m=u==null?void 0:u.format;if(!m||!m.startsWith("BGR")&&!m.startsWith("RGB"))throw new Error(`Unrecognized format ${m}`);const v=m.startsWith("BGR"),k=new Uint8ClampedArray(r*d*4);if(yield u.copyTo(k,(function(T,P,z,R,H){const V=4*Math.max(-P,0),W=(Math.max(0,z)-z)*R*4+V,X=4*R,ee=Math.max(0,P),ue=Math.max(0,z);return{rect:{x:ee,y:ue,width:Math.min(T.width,P+R)-ee,height:Math.min(T.height,z+H)-ue},layout:[{offset:W,stride:X}]}})(s,e,a,r,d)),v)for(let T=0;T<k.length;T+=4){const P=k[T];k[T]=k[T+2],k[T+2]=P}return k}finally{u.close()}}))}let Ho,No;function Jr(s,e,a,r){return s.addEventListener(e,a,r),{unsubscribe:()=>{s.removeEventListener(e,a,r)}}}function wn(s){return s*Math.PI/180}function ro(s){return s/Math.PI*180}const Re={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},K={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},$="AbortError";class ne extends Error{constructor(e=$){super(e instanceof Error?e.message:e),this.name=$,e instanceof Error&&e.stack&&(this.stack=e.stack)}}function Oe(s){return s.name===$}const Ie={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function je(s){return Ie.REGISTERED_PROTOCOLS[s.substring(0,s.indexOf("://"))]}const ze="global-dispatcher";class Se extends Error{constructor(e,a,r,d){super(`AJAXError: ${a} (${e}): ${r}`),this.status=e,this.statusText=a,this.url=r,this.body=d}}const Ue=()=>Po(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,nt=function(s,e){if(/:\/\//.test(s.url)&&!/^https?:|^file:/.test(s.url)){const r=je(s.url);if(r)return r(s,e);if(Po(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:s,targetMapId:ze},e)}if(!(/^file:/.test(a=s.url)||/^file:/.test(Ue())&&!/^\w+:/.test(a))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(r,d){return c(this,void 0,void 0,(function*(){const u=new Request(r.url,{method:r.method||"GET",body:r.body,credentials:r.credentials,headers:r.headers,cache:r.cache,referrer:Ue(),signal:d.signal});let m,v;r.type!=="json"||u.headers.has("Accept")||u.headers.set("Accept","application/json");try{m=yield fetch(u)}catch(T){throw Oe(T)?T:new Se(0,T.message,r.url,new Blob)}if(!m.ok){const T=yield m.blob();throw new Se(m.status,m.statusText,r.url,T)}v=r.type==="arrayBuffer"||r.type==="image"?m.arrayBuffer():r.type==="json"?m.json():m.text();const k=yield v;return d.signal.throwIfAborted(),{data:k,cacheControl:m.headers.get("Cache-Control"),expires:m.headers.get("Expires")}}))})(s,e);if(Po(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:s,mustQueue:!0,targetMapId:ze},e)}var a;return(function(r,d){return new Promise(((u,m)=>{var v;const k=new XMLHttpRequest;k.open(r.method||"GET",r.url,!0),r.type!=="arrayBuffer"&&r.type!=="image"||(k.responseType="arraybuffer");for(const T in r.headers)k.setRequestHeader(T,r.headers[T]);r.type==="json"&&(k.responseType="text",!((v=r.headers)===null||v===void 0)&&v.Accept||k.setRequestHeader("Accept","application/json")),k.withCredentials=r.credentials==="include",k.onerror=()=>{m(new Error(k.statusText))},k.onload=()=>{if(!d.signal.aborted)if((k.status>=200&&k.status<300||k.status===0)&&k.response!==null){let T=k.response;if(r.type==="json")try{T=JSON.parse(k.response)}catch(P){return void m(P)}u({data:T,cacheControl:k.getResponseHeader("Cache-Control"),expires:k.getResponseHeader("Expires")})}else{const T=new Blob([k.response],{type:k.getResponseHeader("Content-Type")});m(new Se(k.status,k.statusText,r.url,T))}},d.signal.addEventListener("abort",(()=>{k.abort(),m(new ne(d.signal.reason))})),k.send(r.body)}))})(s,e)};function st(s){if(!s||s.indexOf("://")<=0||s.indexOf("data:image/")===0||s.indexOf("blob:")===0)return!0;const e=new URL(s),a=window.location;return e.protocol===a.protocol&&e.host===a.host}function Bt(s,e,a){a[s]&&a[s].indexOf(e)!==-1||(a[s]=a[s]||[],a[s].push(e))}function Ut(s,e,a){if(a&&a[s]){const r=a[s].indexOf(e);r!==-1&&a[s].splice(r,1)}}class Jt{constructor(e,a={}){Ma(this,a),this.type=e}}class Ga extends Jt{constructor(e,a={}){super("error",Ma({error:e},a))}}class Ea{on(e,a){return this._listeners=this._listeners||{},Bt(e,a,this._listeners),{unsubscribe:()=>{this.off(e,a)}}}off(e,a){return Ut(e,a,this._listeners),Ut(e,a,this._oneTimeListeners),this}once(e,a){return a?(this._oneTimeListeners=this._oneTimeListeners||{},Bt(e,a,this._oneTimeListeners),this):new Promise((r=>this.once(e,r)))}fire(e,a){typeof e=="string"&&(e=new Jt(e,a||{}));const r=e.type;if(this.listens(r)){e.target=this;const d=this._listeners&&this._listeners[r]?this._listeners[r].slice():[];for(const v of d)v.call(this,e);const u=this._oneTimeListeners&&this._oneTimeListeners[r]?this._oneTimeListeners[r].slice():[];for(const v of u)Ut(r,v,this._oneTimeListeners),v.call(this,e);const m=this._eventedParent;m&&(Ma(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),m.fire(e))}else e instanceof Ga&&console.error(e.error);return this}listens(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)}setEventedParent(e,a){return this._eventedParent=e,this._eventedParentData=a,this}}var Ne={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number",length:2},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},encoding:{type:"enum",values:{mvt:{},mlt:{}},default:"mvt"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"filter"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},filter:{type:"boolean",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"expression_name",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}},interpolation:{type:"array",value:"interpolation_name",minimum:1},interpolation_name:{type:"enum",values:{linear:{syntax:{overloads:[{parameters:[],"output-type":"interpolation"}],parameters:[]}},exponential:{syntax:{overloads:[{parameters:["base"],"output-type":"interpolation"}],parameters:[{name:"base",type:"number literal"}]}},"cubic-bezier":{syntax:{overloads:[{parameters:["x1","y1","x2","y2"],"output-type":"interpolation"}],parameters:[{name:"x1",type:"number literal"},{name:"y1",type:"number literal"},{name:"x2",type:"number literal"},{name:"y2",type:"number literal"}]}}}}};const Za=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Ws(s,e){const a={};for(const r in s)r!=="ref"&&(a[r]=s[r]);return Za.forEach((r=>{r in e&&(a[r]=e[r])})),a}function sa(s,e){if(Array.isArray(s)){if(!Array.isArray(e)||s.length!==e.length)return!1;for(let a=0;a<s.length;a++)if(!sa(s[a],e[a]))return!1;return!0}if(typeof s=="object"&&s!==null&&e!==null){if(typeof e!="object"||Object.keys(s).length!==Object.keys(e).length)return!1;for(const a in s)if(!sa(s[a],e[a]))return!1;return!0}return s===e}function Xa(s,e){s.push(e)}function dn(s,e,a){Xa(a,{command:"addSource",args:[s,e[s]]})}function qa(s,e,a){Xa(e,{command:"removeSource",args:[s]}),a[s]=!0}function Ls(s,e,a,r){qa(s,a,r),dn(s,e,a)}function es(s,e,a){let r;for(r in s[a])if(Object.prototype.hasOwnProperty.call(s[a],r)&&r!=="data"&&!sa(s[a][r],e[a][r]))return!1;for(r in e[a])if(Object.prototype.hasOwnProperty.call(e[a],r)&&r!=="data"&&!sa(s[a][r],e[a][r]))return!1;return!0}function Zs(s,e,a,r,d,u){s=s||{},e=e||{};for(const m in s)Object.prototype.hasOwnProperty.call(s,m)&&(sa(s[m],e[m])||a.push({command:u,args:[r,m,e[m],d]}));for(const m in e)Object.prototype.hasOwnProperty.call(e,m)&&!Object.prototype.hasOwnProperty.call(s,m)&&(sa(s[m],e[m])||a.push({command:u,args:[r,m,e[m],d]}))}function Bh(s){return s.id}function Rn(s,e){return s[e.id]=e,s}class We{constructor(e,a,r,d){this.message=(e?`${e}: `:"")+r,d&&(this.identifier=d),a!=null&&a.__line__&&(this.line=a.__line__)}}function An(s,...e){for(const a of e)for(const r in a)s[r]=a[r];return s}class Sn extends Error{constructor(e,a){super(a),this.message=a,this.key=e}}class Go{constructor(e,a=[]){this.parent=e,this.bindings={};for(const[r,d]of a)this.bindings[r]=d}concat(e){return new Go(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}const ts={kind:"null"},wt={kind:"number"},na={kind:"string"},ta={kind:"boolean"},ho={kind:"color"},Xl={kind:"projectionDefinition"},Ii={kind:"object"},oa={kind:"value"},eh={kind:"collator"},ti={kind:"formatted"},Yi={kind:"padding"},Eo={kind:"colorArray"},xi={kind:"numberArray"},zs={kind:"resolvedImage"},Rh={kind:"variableAnchorOffsetCollection"};function Hn(s,e){return{kind:"array",itemType:s,N:e}}function La(s){if(s.kind==="array"){const e=La(s.itemType);return typeof s.N=="number"?`array<${e}, ${s.N}>`:s.itemType.kind==="value"?"array":`array<${e}>`}return s.kind}const ai=[ts,wt,na,ta,ho,Xl,ti,Ii,Hn(oa),Yi,xi,Eo,zs,Rh];function Ti(s,e){if(e.kind==="error")return null;if(s.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!Ti(s.itemType,e.itemType))&&(typeof s.N!="number"||s.N===e.N))return null}else{if(s.kind===e.kind)return null;if(s.kind==="value"){for(const a of ai)if(!Ti(a,e))return null}}return`Expected ${La(s)} but found ${La(e)} instead.`}function th(s,e){return e.some((a=>a.kind===s.kind))}function $i(s,e){return e.some((a=>a==="null"?s===null:a==="array"?Array.isArray(s):a==="object"?s&&!Array.isArray(s)&&typeof s=="object":a===typeof s))}function $n(s,e){return s.kind==="array"&&e.kind==="array"?s.itemType.kind===e.itemType.kind&&typeof s.N=="number":s.kind===e.kind}const za=.96422,Va=.82521,Kn=4/29,xa=6/29,_r=3*xa*xa,Yl=xa*xa*xa,fa=Math.PI/180,Ds=180/Math.PI;function ah(s){return(s%=360)<0&&(s+=360),s}function rl([s,e,a,r]){let d,u;const m=hl((.2225045*(s=ys(s))+.7168786*(e=ys(e))+.0606169*(a=ys(a)))/1);s===e&&e===a?d=u=m:(d=hl((.4360747*s+.3850649*e+.1430804*a)/za),u=hl((.0139322*s+.0971045*e+.7141733*a)/Va));const v=116*m-16;return[v<0?0:v,500*(d-m),200*(m-u),r]}function ys(s){return s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4)}function hl(s){return s>Yl?Math.pow(s,1/3):s/_r+Kn}function sh([s,e,a,r]){let d=(s+16)/116,u=isNaN(e)?d:d+e/500,m=isNaN(a)?d:d-a/200;return d=1*cs(d),u=za*cs(u),m=Va*cs(m),[si(3.1338561*u-1.6168667*d-.4906146*m),si(-.9787684*u+1.9161415*d+.033454*m),si(.0719453*u-.2289914*d+1.4052427*m),r]}function si(s){return(s=s<=.00304?12.92*s:1.055*Math.pow(s,1/2.4)-.055)<0?0:s>1?1:s}function cs(s){return s>xa?s*s*s:_r*(s-Kn)}const Ir=Object.hasOwn||function(s,e){return Object.prototype.hasOwnProperty.call(s,e)};function Ai(s,e){return Ir(s,e)?s[e]:void 0}function Co(s){return parseInt(s.padEnd(2,s),16)/255}function $l(s,e){return ni(e?s/100:s,0,1)}function ni(s,e,a){return Math.min(Math.max(e,s),a)}function Hh(s){return!s.some(Number.isNaN)}const Ki={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function oi(s,e,a){return s+a*(e-s)}function xr(s,e,a){return s.map(((r,d)=>oi(r,e[d],a)))}class ra{constructor(e,a,r,d=1,u=!0){this.r=e,this.g=a,this.b=r,this.a=d,u||(this.r*=d,this.g*=d,this.b*=d,d||this.overwriteGetter("rgb",[e,a,r,d]))}static parse(e){if(e instanceof ra)return e;if(typeof e!="string")return;const a=(function(r){if((r=r.toLowerCase().trim())==="transparent")return[0,0,0,0];const d=Ai(Ki,r);if(d){const[m,v,k]=d;return[m/255,v/255,k/255,1]}if(r.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(r)){const m=r.length<6?1:2;let v=1;return[Co(r.slice(v,v+=m)),Co(r.slice(v,v+=m)),Co(r.slice(v,v+=m)),Co(r.slice(v,v+m)||"ff")]}if(r.startsWith("rgb")){const m=r.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(m){const[v,k,T,P,z,R,H,V,W,X,ee,ue]=m,ae=[P||" ",H||" ",X].join("");if(ae==="  "||ae==="  /"||ae===",,"||ae===",,,"){const oe=[T,R,W].join(""),ge=oe==="%%%"?100:oe===""?255:0;if(ge){const ve=[ni(+k/ge,0,1),ni(+z/ge,0,1),ni(+V/ge,0,1),ee?$l(+ee,ue):1];if(Hh(ve))return ve}}return}}const u=r.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(u){const[m,v,k,T,P,z,R,H,V]=u,W=[k||" ",P||" ",R].join("");if(W==="  "||W==="  /"||W===",,"||W===",,,"){const X=[+v,ni(+T,0,100),ni(+z,0,100),H?$l(+H,V):1];if(Hh(X))return(function([ee,ue,ae,oe]){function ge(ve){const Fe=(ve+ee/30)%12,ot=ue*Math.min(ae,1-ae);return ae-ot*Math.max(-1,Math.min(Fe-3,9-Fe,1))}return ee=ah(ee),ue/=100,ae/=100,[ge(0),ge(8),ge(4),oe]})(X)}}})(e);return a?new ra(...a,!1):void 0}get rgb(){const{r:e,g:a,b:r,a:d}=this,u=d||1/0;return this.overwriteGetter("rgb",[e/u,a/u,r/u,d])}get hcl(){return this.overwriteGetter("hcl",(function(e){const[a,r,d,u]=rl(e),m=Math.sqrt(r*r+d*d);return[Math.round(1e4*m)?ah(Math.atan2(d,r)*Ds):NaN,m,a,u]})(this.rgb))}get lab(){return this.overwriteGetter("lab",rl(this.rgb))}overwriteGetter(e,a){return Object.defineProperty(this,e,{value:a}),a}toString(){const[e,a,r,d]=this.rgb;return`rgba(${[e,a,r].map((u=>Math.round(255*u))).join(",")},${d})`}static interpolate(e,a,r,d="rgb"){switch(d){case"rgb":{const[u,m,v,k]=xr(e.rgb,a.rgb,r);return new ra(u,m,v,k,!1)}case"hcl":{const[u,m,v,k]=e.hcl,[T,P,z,R]=a.hcl;let H,V;if(isNaN(u)||isNaN(T))isNaN(u)?isNaN(T)?H=NaN:(H=T,v!==1&&v!==0||(V=P)):(H=u,z!==1&&z!==0||(V=m));else{let ae=T-u;T>u&&ae>180?ae-=360:T<u&&u-T>180&&(ae+=360),H=u+r*ae}const[W,X,ee,ue]=(function([ae,oe,ge,ve]){return ae=isNaN(ae)?0:ae*fa,sh([ge,Math.cos(ae)*oe,Math.sin(ae)*oe,ve])})([H,V!=null?V:oi(m,P,r),oi(v,z,r),oi(k,R,r)]);return new ra(W,X,ee,ue,!1)}case"lab":{const[u,m,v,k]=sh(xr(e.lab,a.lab,r));return new ra(u,m,v,k,!1)}}}}ra.black=new ra(0,0,0,1),ra.white=new ra(1,1,1,1),ra.transparent=new ra(0,0,0,0),ra.red=new ra(1,0,0,1);class lo{constructor(e,a,r){this.sensitivity=e?a?"variant":"case":a?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,a){return this.collator.compare(e,a)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const Kl=["bottom","center","top"];class nh{constructor(e,a,r,d,u,m){this.text=e,this.image=a,this.scale=r,this.fontStack=d,this.textColor=u,this.verticalAlign=m}}class fn{constructor(e){this.sections=e}static fromString(e){return new fn([new nh(e,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((e=>e.text.length!==0||e.image&&e.image.name.length!==0))}static factory(e){return e instanceof fn?e:fn.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map((e=>e.text)).join("")}}class Wt{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Wt)return e;if(typeof e=="number")return new Wt([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const a of e)if(typeof a!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]]}return new Wt(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,a,r){return new Wt(xr(e.values,a.values,r))}}class Ba{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Ba)return e;if(typeof e=="number")return new Ba([e]);if(Array.isArray(e)){for(const a of e)if(typeof a!="number")return;return new Ba(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,a,r){return new Ba(xr(e.values,a.values,r))}}class Nt{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Nt)return e;if(typeof e=="string"){const r=ra.parse(e);return r?new Nt([r]):void 0}if(!Array.isArray(e))return;const a=[];for(const r of e){if(typeof r!="string")return;const d=ra.parse(r);if(!d)return;a.push(d)}return new Nt(a)}toString(){return JSON.stringify(this.values)}static interpolate(e,a,r,d="rgb"){const u=[];if(e.values.length!=a.values.length)throw new Error(`colorArray: Arrays have mismatched length (${e.values.length} vs. ${a.values.length}), cannot interpolate.`);for(let m=0;m<e.values.length;m++)u.push(ra.interpolate(e.values[m],a.values[m],r,d));return new Nt(u)}}class $a extends Error{constructor(e){super(e),this.name="RuntimeError"}toJSON(){return this.message}}const fo=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Os{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Os)return e;if(Array.isArray(e)&&!(e.length<1)&&e.length%2==0){for(let a=0;a<e.length;a+=2){const r=e[a],d=e[a+1];if(typeof r!="string"||!fo.has(r)||!Array.isArray(d)||d.length!==2||typeof d[0]!="number"||typeof d[1]!="number")return}return new Os(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,a,r){const d=e.values,u=a.values;if(d.length!==u.length)throw new $a(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${a.toString()}`);const m=[];for(let v=0;v<d.length;v+=2){if(d[v]!==u[v])throw new $a(`Cannot interpolate values containing mismatched anchors. from[${v}]: ${d[v]}, to[${v}]: ${u[v]}`);m.push(d[v]);const[k,T]=d[v+1],[P,z]=u[v+1];m.push([oi(k,P,r),oi(T,z,r)])}return new Os(m)}}class Pn{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Pn({name:e,available:!1}):null}}class ks{constructor(e,a,r){this.from=e,this.to=a,this.transition=r}static interpolate(e,a,r){return new ks(e,a,r)}static parse(e){return e instanceof ks?e:Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number"?new ks(e[0],e[1],e[2]):typeof e=="object"&&typeof e.from=="string"&&typeof e.to=="string"&&typeof e.transition=="number"?new ks(e.from,e.to,e.transition):typeof e=="string"?new ks(e,e,1):void 0}}function Qn(s,e,a,r){return typeof s=="number"&&s>=0&&s<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof a=="number"&&a>=0&&a<=255?r===void 0||typeof r=="number"&&r>=0&&r<=1?null:`Invalid rgba value [${[s,e,a,r].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof r=="number"?[s,e,a,r]:[s,e,a]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function co(s){if(s===null||typeof s=="string"||typeof s=="boolean"||typeof s=="number"||s instanceof ks||s instanceof ra||s instanceof lo||s instanceof fn||s instanceof Wt||s instanceof Ba||s instanceof Nt||s instanceof Os||s instanceof Pn)return!0;if(Array.isArray(s)){for(const e of s)if(!co(e))return!1;return!0}if(typeof s=="object"){for(const e in s)if(!co(s[e]))return!1;return!0}return!1}function wa(s){if(s===null)return ts;if(typeof s=="string")return na;if(typeof s=="boolean")return ta;if(typeof s=="number")return wt;if(s instanceof ra)return ho;if(s instanceof ks)return Xl;if(s instanceof lo)return eh;if(s instanceof fn)return ti;if(s instanceof Wt)return Yi;if(s instanceof Ba)return xi;if(s instanceof Nt)return Eo;if(s instanceof Os)return Rh;if(s instanceof Pn)return zs;if(Array.isArray(s)){const e=s.length;let a;for(const r of s){const d=wa(r);if(a){if(a===d)continue;a=oa;break}a=d}return Hn(a||oa,e)}return Ii}function po(s){const e=typeof s;return s===null?"":e==="string"||e==="number"||e==="boolean"?String(s):s instanceof ra||s instanceof ks||s instanceof fn||s instanceof Wt||s instanceof Ba||s instanceof Nt||s instanceof Os||s instanceof Pn?s.toString():JSON.stringify(s)}class uo{constructor(e,a){this.type=e,this.value=a}static parse(e,a){if(e.length!==2)return a.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!co(e[1]))return a.error("invalid value");const r=e[1];let d=wa(r);const u=a.expectedType;return d.kind!=="array"||d.N!==0||!u||u.kind!=="array"||typeof u.N=="number"&&u.N!==0||(d=u),new uo(d,r)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Tr={string:na,number:wt,boolean:ta,object:Ii};class Jn{constructor(e,a){this.type=e,this.args=a}static parse(e,a){if(e.length<2)return a.error("Expected at least one argument.");let r,d=1;const u=e[0];if(u==="array"){let v,k;if(e.length>2){const T=e[1];if(typeof T!="string"||!(T in Tr)||T==="object")return a.error('The item type argument of "array" must be one of string, number, boolean',1);v=Tr[T],d++}else v=oa;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return a.error('The length argument to "array" must be a positive integer literal',2);k=e[2],d++}r=Hn(v,k)}else{if(!Tr[u])throw new Error(`Types doesn't contain name = ${u}`);r=Tr[u]}const m=[];for(;d<e.length;d++){const v=a.parse(e[d],d,oa);if(!v)return null;m.push(v)}return new Jn(r,m)}evaluate(e){for(let a=0;a<this.args.length;a++){const r=this.args[a].evaluate(e);if(!Ti(this.type,wa(r)))return r;if(a===this.args.length-1)throw new $a(`Expected value to be of type ${La(this.type)}, but found ${La(wa(r))} instead.`)}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}}const Xs={"to-boolean":ta,"to-color":ho,"to-number":wt,"to-string":na};class En{constructor(e,a){this.type=e,this.args=a}static parse(e,a){if(e.length<2)return a.error("Expected at least one argument.");const r=e[0];if(!Xs[r])throw new Error(`Can't parse ${r} as it is not part of the known types`);if((r==="to-boolean"||r==="to-string")&&e.length!==2)return a.error("Expected one argument.");const d=Xs[r],u=[];for(let m=1;m<e.length;m++){const v=a.parse(e[m],m,oa);if(!v)return null;u.push(v)}return new En(d,u)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let a,r;for(const d of this.args){if(a=d.evaluate(e),r=null,a instanceof ra)return a;if(typeof a=="string"){const u=e.parseColor(a);if(u)return u}else if(Array.isArray(a)&&(r=a.length<3||a.length>4?`Invalid rgba value ${JSON.stringify(a)}: expected an array containing either three or four numeric values.`:Qn(a[0],a[1],a[2],a[3]),!r))return new ra(a[0]/255,a[1]/255,a[2]/255,a[3])}throw new $a(r||`Could not parse color from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"padding":{let a;for(const r of this.args){a=r.evaluate(e);const d=Wt.parse(a);if(d)return d}throw new $a(`Could not parse padding from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"numberArray":{let a;for(const r of this.args){a=r.evaluate(e);const d=Ba.parse(a);if(d)return d}throw new $a(`Could not parse numberArray from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"colorArray":{let a;for(const r of this.args){a=r.evaluate(e);const d=Nt.parse(a);if(d)return d}throw new $a(`Could not parse colorArray from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"variableAnchorOffsetCollection":{let a;for(const r of this.args){a=r.evaluate(e);const d=Os.parse(a);if(d)return d}throw new $a(`Could not parse variableAnchorOffsetCollection from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"number":{let a=null;for(const r of this.args){if(a=r.evaluate(e),a===null)return 0;const d=Number(a);if(!isNaN(d))return d}throw new $a(`Could not convert ${JSON.stringify(a)} to number.`)}case"formatted":return fn.fromString(po(this.args[0].evaluate(e)));case"resolvedImage":return Pn.fromString(po(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return po(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}}const ll=["Unknown","Point","LineString","Polygon"];class Ar{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?ll[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let a=this._parseColorCache.get(e);return a||(a=ra.parse(e),this._parseColorCache.set(e,a)),a}}class Oa{constructor(e,a,r=[],d,u=new Go,m=[]){this.registry=e,this.path=r,this.key=r.map((v=>`[${v}]`)).join(""),this.scope=u,this.errors=m,this.expectedType=d,this._isConstant=a}parse(e,a,r,d,u={}){return a?this.concat(a,r,d)._parse(e,u):this._parse(e,u)}_parse(e,a){function r(d,u,m){return m==="assert"?new Jn(u,[d]):m==="coerce"?new En(u,[d]):d}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const d=e[0];if(typeof d!="string")return this.error(`Expression name must be a string, but found ${typeof d} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const u=this.registry[d];if(u){let m=u.parse(e,this);if(!m)return null;if(this.expectedType){const v=this.expectedType,k=m.type;if(v.kind!=="string"&&v.kind!=="number"&&v.kind!=="boolean"&&v.kind!=="object"&&v.kind!=="array"||k.kind!=="value"){if(v.kind==="projectionDefinition"&&["string","array"].includes(k.kind)||["color","formatted","resolvedImage"].includes(v.kind)&&["value","string"].includes(k.kind)||["padding","numberArray"].includes(v.kind)&&["value","number","array"].includes(k.kind)||v.kind==="colorArray"&&["value","string","array"].includes(k.kind)||v.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(k.kind))m=r(m,v,a.typeAnnotation||"coerce");else if(this.checkSubtype(v,k))return null}else m=r(m,v,a.typeAnnotation||"assert")}if(!(m instanceof uo)&&m.type.kind!=="resolvedImage"&&this._isConstant(m)){const v=new Ar;try{m=new uo(m.type,m.evaluate(v))}catch(k){return this.error(k.message),null}}return m}return this.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,a,r){const d=typeof e=="number"?this.path.concat(e):this.path,u=r?this.scope.concat(r):this.scope;return new Oa(this.registry,this._isConstant,d,a||null,u,this.errors)}error(e,...a){const r=`${this.key}${a.map((d=>`[${d}]`)).join("")}`;this.errors.push(new Sn(r,e))}checkSubtype(e,a){const r=Ti(e,a);return r&&this.error(r),r}}class Ka{constructor(e,a){this.type=a.type,this.bindings=[].concat(e),this.result=a}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const a of this.bindings)e(a[1]);e(this.result)}static parse(e,a){if(e.length<4)return a.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const r=[];for(let u=1;u<e.length-1;u+=2){const m=e[u];if(typeof m!="string")return a.error(`Expected string, but found ${typeof m} instead.`,u);if(/[^a-zA-Z0-9_]/.test(m))return a.error("Variable names must contain only alphanumeric characters or '_'.",u);const v=a.parse(e[u+1],u+1);if(!v)return null;r.push([m,v])}const d=a.parse(e[e.length-1],e.length-1,a.expectedType,r);return d?new Ka(r,d):null}outputDefined(){return this.result.outputDefined()}}class vn{constructor(e,a){this.type=a.type,this.name=e,this.boundExpression=a}static parse(e,a){if(e.length!==2||typeof e[1]!="string")return a.error("'var' expression requires exactly one string literal argument.");const r=e[1];return a.scope.has(r)?new vn(r,a.scope.get(r)):a.error(`Unknown variable "${r}". Make sure "${r}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class ua{constructor(e,a,r){this.type=e,this.index=a,this.input=r}static parse(e,a){if(e.length!==3)return a.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=a.parse(e[1],1,wt),d=a.parse(e[2],2,Hn(a.expectedType||oa));return r&&d?new ua(d.type.itemType,r,d):null}evaluate(e){const a=this.index.evaluate(e),r=this.input.evaluate(e);if(a<0)throw new $a(`Array index out of bounds: ${a} < 0.`);if(a>=r.length)throw new $a(`Array index out of bounds: ${a} > ${r.length-1}.`);if(a!==Math.floor(a))throw new $a(`Array index must be an integer, but found ${a} instead.`);return r[a]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class ia{constructor(e,a){this.type=ta,this.needle=e,this.haystack=a}static parse(e,a){if(e.length!==3)return a.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=a.parse(e[1],1,oa),d=a.parse(e[2],2,oa);return r&&d?th(r.type,[ta,na,wt,ts,oa])?new ia(r,d):a.error(`Expected first argument to be of type boolean, string, number or null, but found ${La(r.type)} instead`):null}evaluate(e){const a=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!r)return!1;if(!$i(a,["boolean","string","number","null"]))throw new $a(`Expected first argument to be of type boolean, string, number or null, but found ${La(wa(a))} instead.`);if(!$i(r,["string","array"]))throw new $a(`Expected second argument to be of type array or string, but found ${La(wa(r))} instead.`);return r.indexOf(a)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class oh{constructor(e,a,r){this.type=wt,this.needle=e,this.haystack=a,this.fromIndex=r}static parse(e,a){if(e.length<=2||e.length>=5)return a.error(`Expected 2 or 3 arguments, but found ${e.length-1} instead.`);const r=a.parse(e[1],1,oa),d=a.parse(e[2],2,oa);if(!r||!d)return null;if(!th(r.type,[ta,na,wt,ts,oa]))return a.error(`Expected first argument to be of type boolean, string, number or null, but found ${La(r.type)} instead`);if(e.length===4){const u=a.parse(e[3],3,wt);return u?new oh(r,d,u):null}return new oh(r,d)}evaluate(e){const a=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!$i(a,["boolean","string","number","null"]))throw new $a(`Expected first argument to be of type boolean, string, number or null, but found ${La(wa(a))} instead.`);let d;if(this.fromIndex&&(d=this.fromIndex.evaluate(e)),$i(r,["string"])){const u=r.indexOf(a,d);return u===-1?-1:[...r.slice(0,u)].length}if($i(r,["array"]))return r.indexOf(a,d);throw new $a(`Expected second argument to be of type array or string, but found ${La(wa(r))} instead.`)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class Sa{constructor(e,a,r,d,u,m){this.inputType=e,this.type=a,this.input=r,this.cases=d,this.outputs=u,this.otherwise=m}static parse(e,a){if(e.length<5)return a.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return a.error("Expected an even number of arguments.");let r,d;a.expectedType&&a.expectedType.kind!=="value"&&(d=a.expectedType);const u={},m=[];for(let T=2;T<e.length-1;T+=2){let P=e[T];const z=e[T+1];Array.isArray(P)||(P=[P]);const R=a.concat(T);if(P.length===0)return R.error("Expected at least one branch label.");for(const V of P){if(typeof V!="number"&&typeof V!="string")return R.error("Branch labels must be numbers or strings.");if(typeof V=="number"&&Math.abs(V)>Number.MAX_SAFE_INTEGER)return R.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof V=="number"&&Math.floor(V)!==V)return R.error("Numeric branch labels must be integer values.");if(r){if(R.checkSubtype(r,wa(V)))return null}else r=wa(V);if(u[String(V)]!==void 0)return R.error("Branch labels must be unique.");u[String(V)]=m.length}const H=a.parse(z,T,d);if(!H)return null;d=d||H.type,m.push(H)}const v=a.parse(e[1],1,oa);if(!v)return null;const k=a.parse(e[e.length-1],e.length-1,d);return k?v.type.kind!=="value"&&a.concat(1).checkSubtype(r,v.type)?null:new Sa(r,d,v,u,m,k):null}evaluate(e){const a=this.input.evaluate(e);return(wa(a)===this.inputType&&this.outputs[this.cases[a]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))&&this.otherwise.outputDefined()}}class dl{constructor(e,a,r){this.type=e,this.branches=a,this.otherwise=r}static parse(e,a){if(e.length<4)return a.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return a.error("Expected an odd number of arguments.");let r;a.expectedType&&a.expectedType.kind!=="value"&&(r=a.expectedType);const d=[];for(let m=1;m<e.length-1;m+=2){const v=a.parse(e[m],m,ta);if(!v)return null;const k=a.parse(e[m+1],m+1,r);if(!k)return null;d.push([v,k]),r=r||k.type}const u=a.parse(e[e.length-1],e.length-1,r);if(!u)return null;if(!r)throw new Error("Can't infer output type");return new dl(r,d,u)}evaluate(e){for(const[a,r]of this.branches)if(a.evaluate(e))return r.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[a,r]of this.branches)e(a),e(r);e(this.otherwise)}outputDefined(){return this.branches.every((([e,a])=>a.outputDefined()))&&this.otherwise.outputDefined()}}class Mo{constructor(e,a,r,d){this.type=e,this.input=a,this.beginIndex=r,this.endIndex=d}static parse(e,a){if(e.length<=2||e.length>=5)return a.error(`Expected 2 or 3 arguments, but found ${e.length-1} instead.`);const r=a.parse(e[1],1,oa),d=a.parse(e[2],2,wt);if(!r||!d)return null;if(!th(r.type,[Hn(oa),na,oa]))return a.error(`Expected first argument to be of type array or string, but found ${La(r.type)} instead`);if(e.length===4){const u=a.parse(e[3],3,wt);return u?new Mo(r.type,r,d,u):null}return new Mo(r.type,r,d)}evaluate(e){const a=this.input.evaluate(e),r=this.beginIndex.evaluate(e);let d;if(this.endIndex&&(d=this.endIndex.evaluate(e)),$i(a,["string"]))return[...a].slice(r,d).join("");if($i(a,["array"]))return a.slice(r,d);throw new $a(`Expected first argument to be of type array or string, but found ${La(wa(a))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function Sr(s,e){const a=s.length-1;let r,d,u=0,m=a,v=0;for(;u<=m;)if(v=Math.floor((u+m)/2),r=s[v],d=s[v+1],r<=e){if(v===a||e<d)return v;u=v+1}else{if(!(r>e))throw new $a("Input is not a number.");m=v-1}return 0}class Pr{constructor(e,a,r){this.type=e,this.input=a,this.labels=[],this.outputs=[];for(const[d,u]of r)this.labels.push(d),this.outputs.push(u)}static parse(e,a){if(e.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return a.error("Expected an even number of arguments.");const r=a.parse(e[1],1,wt);if(!r)return null;const d=[];let u=null;a.expectedType&&a.expectedType.kind!=="value"&&(u=a.expectedType);for(let m=1;m<e.length;m+=2){const v=m===1?-1/0:e[m],k=e[m+1],T=m,P=m+1;if(typeof v!="number")return a.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',T);if(d.length&&d[d.length-1][0]>=v)return a.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',T);const z=a.parse(k,P,u);if(!z)return null;u=u||z.type,d.push([v,z])}return new Pr(u,r,d)}evaluate(e){const a=this.labels,r=this.outputs;if(a.length===1)return r[0].evaluate(e);const d=this.input.evaluate(e);if(d<=a[0])return r[0].evaluate(e);const u=a.length;return d>=a[u-1]?r[u-1].evaluate(e):r[Sr(a,d)].evaluate(e)}eachChild(e){e(this.input);for(const a of this.outputs)e(a)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}}function Ql(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var fl,Fo,rc=(function(){if(Fo)return fl;function s(e,a,r,d){this.cx=3*e,this.bx=3*(r-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*a,this.by=3*(d-a)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=a,this.p2x=r,this.p2y=d}return Fo=1,fl=s,s.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,a){if(a===void 0&&(a=1e-6),e<0)return 0;if(e>1)return 1;for(var r=e,d=0;d<8;d++){var u=this.sampleCurveX(r)-e;if(Math.abs(u)<a)return r;var m=this.sampleCurveDerivativeX(r);if(Math.abs(m)<1e-6)break;r-=u/m}var v=0,k=1;for(r=e,d=0;d<20&&(u=this.sampleCurveX(r),!(Math.abs(u-e)<a));d++)e>u?v=r:k=r,r=.5*(k-v)+v;return r},solve:function(e,a){return this.sampleCurveY(this.solveCurveX(e,a))}},fl})(),Jl=Ql(rc);class js{constructor(e,a,r,d,u){this.type=e,this.operator=a,this.interpolation=r,this.input=d,this.labels=[],this.outputs=[];for(const[m,v]of u)this.labels.push(m),this.outputs.push(v)}static interpolationFactor(e,a,r,d){let u=0;if(e.name==="exponential")u=ii(a,e.base,r,d);else if(e.name==="linear")u=ii(a,1,r,d);else if(e.name==="cubic-bezier"){const m=e.controlPoints;u=new Jl(m[0],m[1],m[2],m[3]).solve(ii(a,1,r,d))}return u}static parse(e,a){let[r,d,u,...m]=e;if(!Array.isArray(d)||d.length===0)return a.error("Expected an interpolation type expression.",1);if(d[0]==="linear")d={name:"linear"};else if(d[0]==="exponential"){const T=d[1];if(typeof T!="number")return a.error("Exponential interpolation requires a numeric base.",1,1);d={name:"exponential",base:T}}else{if(d[0]!=="cubic-bezier")return a.error(`Unknown interpolation type ${String(d[0])}`,1,0);{const T=d.slice(1);if(T.length!==4||T.some((P=>typeof P!="number"||P<0||P>1)))return a.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);d={name:"cubic-bezier",controlPoints:T}}}if(e.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return a.error("Expected an even number of arguments.");if(u=a.parse(u,2,wt),!u)return null;const v=[];let k=null;r!=="interpolate-hcl"&&r!=="interpolate-lab"||a.expectedType==Eo?a.expectedType&&a.expectedType.kind!=="value"&&(k=a.expectedType):k=ho;for(let T=0;T<m.length;T+=2){const P=m[T],z=m[T+1],R=T+3,H=T+4;if(typeof P!="number")return a.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',R);if(v.length&&v[v.length-1][0]>=P)return a.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',R);const V=a.parse(z,H,k);if(!V)return null;k=k||V.type,v.push([P,V])}return $n(k,wt)||$n(k,Xl)||$n(k,ho)||$n(k,Yi)||$n(k,xi)||$n(k,Eo)||$n(k,Rh)||$n(k,Hn(wt))?new js(k,r,d,u,v):a.error(`Type ${La(k)} is not interpolatable.`)}evaluate(e){const a=this.labels,r=this.outputs;if(a.length===1)return r[0].evaluate(e);const d=this.input.evaluate(e);if(d<=a[0])return r[0].evaluate(e);const u=a.length;if(d>=a[u-1])return r[u-1].evaluate(e);const m=Sr(a,d),v=js.interpolationFactor(this.interpolation,d,a[m],a[m+1]),k=r[m].evaluate(e),T=r[m+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return oi(k,T,v);case"color":return ra.interpolate(k,T,v);case"padding":return Wt.interpolate(k,T,v);case"colorArray":return Nt.interpolate(k,T,v);case"numberArray":return Ba.interpolate(k,T,v);case"variableAnchorOffsetCollection":return Os.interpolate(k,T,v);case"array":return xr(k,T,v);case"projectionDefinition":return ks.interpolate(k,T,v)}case"interpolate-hcl":switch(this.type.kind){case"color":return ra.interpolate(k,T,v,"hcl");case"colorArray":return Nt.interpolate(k,T,v,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return ra.interpolate(k,T,v,"lab");case"colorArray":return Nt.interpolate(k,T,v,"lab")}}}eachChild(e){e(this.input);for(const a of this.outputs)e(a)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}}function ii(s,e,a,r){const d=r-a,u=s-a;return d===0?0:e===1?u/d:(Math.pow(e,u)-1)/(Math.pow(e,d)-1)}const bs={color:ra.interpolate,number:oi,padding:Wt.interpolate,numberArray:Ba.interpolate,colorArray:Nt.interpolate,variableAnchorOffsetCollection:Os.interpolate,array:xr};class Qi{constructor(e,a){this.type=e,this.args=a}static parse(e,a){if(e.length<2)return a.error("Expected at least one argument.");let r=null;const d=a.expectedType;d&&d.kind!=="value"&&(r=d);const u=[];for(const v of e.slice(1)){const k=a.parse(v,1+u.length,r,void 0,{typeAnnotation:"omit"});if(!k)return null;r=r||k.type,u.push(k)}if(!r)throw new Error("No output type");const m=d&&u.some((v=>Ti(d,v.type)));return new Qi(m?oa:r,u)}evaluate(e){let a,r=null,d=0;for(const u of this.args)if(d++,r=u.evaluate(e),r&&r instanceof Pn&&!r.available&&(a||(a=r.name),r=null,d===this.args.length&&(r=a)),r!==null)break;return r}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}}function cl(s,e){return s==="=="||s==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function Nh(s,e,a,r){return r.compare(e,a)===0}function Ss(s,e,a){const r=s!=="=="&&s!=="!=";return class X1{constructor(u,m,v){this.type=ta,this.lhs=u,this.rhs=m,this.collator=v,this.hasUntypedArgument=u.type.kind==="value"||m.type.kind==="value"}static parse(u,m){if(u.length!==3&&u.length!==4)return m.error("Expected two or three arguments.");const v=u[0];let k=m.parse(u[1],1,oa);if(!k)return null;if(!cl(v,k.type))return m.concat(1).error(`"${v}" comparisons are not supported for type '${La(k.type)}'.`);let T=m.parse(u[2],2,oa);if(!T)return null;if(!cl(v,T.type))return m.concat(2).error(`"${v}" comparisons are not supported for type '${La(T.type)}'.`);if(k.type.kind!==T.type.kind&&k.type.kind!=="value"&&T.type.kind!=="value")return m.error(`Cannot compare types '${La(k.type)}' and '${La(T.type)}'.`);r&&(k.type.kind==="value"&&T.type.kind!=="value"?k=new Jn(T.type,[k]):k.type.kind!=="value"&&T.type.kind==="value"&&(T=new Jn(k.type,[T])));let P=null;if(u.length===4){if(k.type.kind!=="string"&&T.type.kind!=="string"&&k.type.kind!=="value"&&T.type.kind!=="value")return m.error("Cannot use collator to compare non-string types.");if(P=m.parse(u[3],3,eh),!P)return null}return new X1(k,T,P)}evaluate(u){const m=this.lhs.evaluate(u),v=this.rhs.evaluate(u);if(r&&this.hasUntypedArgument){const k=wa(m),T=wa(v);if(k.kind!==T.kind||k.kind!=="string"&&k.kind!=="number")throw new $a(`Expected arguments for "${s}" to be (string, string) or (number, number), but found (${k.kind}, ${T.kind}) instead.`)}if(this.collator&&!r&&this.hasUntypedArgument){const k=wa(m),T=wa(v);if(k.kind!=="string"||T.kind!=="string")return e(u,m,v)}return this.collator?a(u,m,v,this.collator.evaluate(u)):e(u,m,v)}eachChild(u){u(this.lhs),u(this.rhs),this.collator&&u(this.collator)}outputDefined(){return!0}}}const uf=Ss("==",(function(s,e,a){return e===a}),Nh),ed=Ss("!=",(function(s,e,a){return e!==a}),(function(s,e,a,r){return!Nh(0,e,a,r)})),td=Ss("<",(function(s,e,a){return e<a}),(function(s,e,a,r){return r.compare(e,a)<0})),hc=Ss(">",(function(s,e,a){return e>a}),(function(s,e,a,r){return r.compare(e,a)>0})),ih=Ss("<=",(function(s,e,a){return e<=a}),(function(s,e,a,r){return r.compare(e,a)<=0})),pl=Ss(">=",(function(s,e,a){return e>=a}),(function(s,e,a,r){return r.compare(e,a)>=0}));class Ji{constructor(e,a,r){this.type=eh,this.locale=r,this.caseSensitive=e,this.diacriticSensitive=a}static parse(e,a){if(e.length!==2)return a.error("Expected one argument.");const r=e[1];if(typeof r!="object"||Array.isArray(r))return a.error("Collator options argument must be an object.");const d=a.parse(r["case-sensitive"]!==void 0&&r["case-sensitive"],1,ta);if(!d)return null;const u=a.parse(r["diacritic-sensitive"]!==void 0&&r["diacritic-sensitive"],1,ta);if(!u)return null;let m=null;return r.locale&&(m=a.parse(r.locale,1,na),!m)?null:new Ji(d,u,m)}evaluate(e){return new lo(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}class er{constructor(e,a,r,d,u){this.type=na,this.number=e,this.locale=a,this.currency=r,this.minFractionDigits=d,this.maxFractionDigits=u}static parse(e,a){if(e.length!==3)return a.error("Expected two arguments.");const r=a.parse(e[1],1,wt);if(!r)return null;const d=e[2];if(typeof d!="object"||Array.isArray(d))return a.error("NumberFormat options argument must be an object.");let u=null;if(d.locale&&(u=a.parse(d.locale,1,na),!u))return null;let m=null;if(d.currency&&(m=a.parse(d.currency,1,na),!m))return null;let v=null;if(d["min-fraction-digits"]&&(v=a.parse(d["min-fraction-digits"],1,wt),!v))return null;let k=null;return d["max-fraction-digits"]&&(k=a.parse(d["max-fraction-digits"],1,wt),!k)?null:new er(r,u,m,v,k)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class ul{constructor(e){this.type=ti,this.sections=e}static parse(e,a){if(e.length<2)return a.error("Expected at least one argument.");const r=e[1];if(!Array.isArray(r)&&typeof r=="object")return a.error("First argument must be an image or text section.");const d=[];let u=!1;for(let m=1;m<=e.length-1;++m){const v=e[m];if(u&&typeof v=="object"&&!Array.isArray(v)){u=!1;let k=null;if(v["font-scale"]&&(k=a.parse(v["font-scale"],1,wt),!k))return null;let T=null;if(v["text-font"]&&(T=a.parse(v["text-font"],1,Hn(na)),!T))return null;let P=null;if(v["text-color"]&&(P=a.parse(v["text-color"],1,ho),!P))return null;let z=null;if(v["vertical-align"]){if(typeof v["vertical-align"]=="string"&&!Kl.includes(v["vertical-align"]))return a.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${v["vertical-align"]}' instead.`);if(z=a.parse(v["vertical-align"],1,na),!z)return null}const R=d[d.length-1];R.scale=k,R.font=T,R.textColor=P,R.verticalAlign=z}else{const k=a.parse(e[m],1,oa);if(!k)return null;const T=k.type.kind;if(T!=="string"&&T!=="value"&&T!=="null"&&T!=="resolvedImage")return a.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");u=!0,d.push({content:k,scale:null,font:null,textColor:null,verticalAlign:null})}}return new ul(d)}evaluate(e){return new fn(this.sections.map((a=>{const r=a.content.evaluate(e);return wa(r)===zs?new nh("",r,null,null,null,a.verticalAlign?a.verticalAlign.evaluate(e):null):new nh(po(r),null,a.scale?a.scale.evaluate(e):null,a.font?a.font.evaluate(e).join(","):null,a.textColor?a.textColor.evaluate(e):null,a.verticalAlign?a.verticalAlign.evaluate(e):null)})))}eachChild(e){for(const a of this.sections)e(a.content),a.scale&&e(a.scale),a.font&&e(a.font),a.textColor&&e(a.textColor),a.verticalAlign&&e(a.verticalAlign)}outputDefined(){return!1}}class Si{constructor(e){this.type=zs,this.input=e}static parse(e,a){if(e.length!==2)return a.error("Expected two arguments.");const r=a.parse(e[1],1,na);return r?new Si(r):a.error("No image name provided.")}evaluate(e){const a=this.input.evaluate(e),r=Pn.fromString(a);return r&&e.availableImages&&(r.available=e.availableImages.indexOf(a)>-1),r}eachChild(e){e(this.input)}outputDefined(){return!1}}class Cn{constructor(e){this.type=wt,this.input=e}static parse(e,a){if(e.length!==2)return a.error(`Expected 1 argument, but found ${e.length-1} instead.`);const r=a.parse(e[1],1);return r?r.type.kind!=="array"&&r.type.kind!=="string"&&r.type.kind!=="value"?a.error(`Expected argument of type string or array, but found ${La(r.type)} instead.`):new Cn(r):null}evaluate(e){const a=this.input.evaluate(e);if(typeof a=="string")return[...a].length;if(Array.isArray(a))return a.length;throw new $a(`Expected value to be of type string or array, but found ${La(wa(a))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}const Bs=8192;function rh(s,e){const a=(180+s[0])/360,r=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s[1]*Math.PI/360)))/360,d=Math.pow(2,e.z);return[Math.round(a*d*Bs),Math.round(r*d*Bs)]}function Gh(s,e){const a=Math.pow(2,e.z);return[(d=(s[0]/Bs+e.x)/a,360*d-180),(r=(s[1]/Bs+e.y)/a,360/Math.PI*Math.atan(Math.exp((180-360*r)*Math.PI/180))-90)];var r,d}function Er(s,e){s[0]=Math.min(s[0],e[0]),s[1]=Math.min(s[1],e[1]),s[2]=Math.max(s[2],e[0]),s[3]=Math.max(s[3],e[1])}function Pi(s,e){return!(s[0]<=e[0]||s[2]>=e[2]||s[1]<=e[1]||s[3]>=e[3])}function mf(s,e,a){const r=s[0]-e[0],d=s[1]-e[1],u=s[0]-a[0],m=s[1]-a[1];return r*m-u*d==0&&r*u<=0&&d*m<=0}function ml(s,e,a,r){return(d=[r[0]-a[0],r[1]-a[1]])[0]*(u=[e[0]-s[0],e[1]-s[1]])[1]-d[1]*u[0]!=0&&!(!jo(s,e,a,r)||!jo(a,r,s,e));var d,u}function zd(s,e,a){for(const r of a)for(let d=0;d<r.length-1;++d)if(ml(s,e,r[d],r[d+1]))return!0;return!1}function ri(s,e,a=!1){let r=!1;for(const v of e)for(let k=0;k<v.length-1;k++){if(mf(s,v[k],v[k+1]))return a;(u=v[k])[1]>(d=s)[1]!=(m=v[k+1])[1]>d[1]&&d[0]<(m[0]-u[0])*(d[1]-u[1])/(m[1]-u[1])+u[0]&&(r=!r)}var d,u,m;return r}function mo(s,e){for(const a of e)if(ri(s,a))return!0;return!1}function hh(s,e){for(const a of s)if(!ri(a,e))return!1;for(let a=0;a<s.length-1;++a)if(zd(s[a],s[a+1],e))return!1;return!0}function gf(s,e){for(const a of e)if(hh(s,a))return!0;return!1}function jo(s,e,a,r){const d=r[0]-a[0],u=r[1]-a[1],m=(s[0]-a[0])*u-d*(s[1]-a[1]),v=(e[0]-a[0])*u-d*(e[1]-a[1]);return m>0&&v<0||m<0&&v>0}function ad(s,e,a){const r=[];for(let d=0;d<s.length;d++){const u=[];for(let m=0;m<s[d].length;m++){const v=rh(s[d][m],a);Er(e,v),u.push(v)}r.push(u)}return r}function Uo(s,e,a){const r=[];for(let d=0;d<s.length;d++){const u=ad(s[d],e,a);r.push(u)}return r}function Fh(s,e,a,r){if(s[0]<a[0]||s[0]>a[2]){const d=.5*r;let u=s[0]-a[0]>d?-r:a[0]-s[0]>d?r:0;u===0&&(u=s[0]-a[2]>d?-r:a[2]-s[0]>d?r:0),s[0]+=u}Er(e,s)}function jh(s,e,a,r){const d=Math.pow(2,r.z)*Bs,u=[r.x*Bs,r.y*Bs],m=[];for(const v of s)for(const k of v){const T=[k.x+u[0],k.y+u[1]];Fh(T,e,a,d),m.push(T)}return m}function Uh(s,e,a,r){const d=Math.pow(2,r.z)*Bs,u=[r.x*Bs,r.y*Bs],m=[];for(const k of s){const T=[];for(const P of k){const z=[P.x+u[0],P.y+u[1]];Er(e,z),T.push(z)}m.push(T)}if(e[2]-e[0]<=d/2){(v=e)[0]=v[1]=1/0,v[2]=v[3]=-1/0;for(const k of m)for(const T of k)Fh(T,e,a,d)}var v;return m}class hi{constructor(e,a){this.type=ta,this.geojson=e,this.geometries=a}static parse(e,a){if(e.length!==2)return a.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(co(e[1])){const r=e[1];if(r.type==="FeatureCollection"){const d=[];for(const u of r.features){const{type:m,coordinates:v}=u.geometry;m==="Polygon"&&d.push(v),m==="MultiPolygon"&&d.push(...v)}if(d.length)return new hi(r,{type:"MultiPolygon",coordinates:d})}else if(r.type==="Feature"){const d=r.geometry.type;if(d==="Polygon"||d==="MultiPolygon")return new hi(r,r.geometry)}else if(r.type==="Polygon"||r.type==="MultiPolygon")return new hi(r,r)}return a.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return(function(a,r){const d=[1/0,1/0,-1/0,-1/0],u=[1/0,1/0,-1/0,-1/0],m=a.canonicalID();if(r.type==="Polygon"){const v=ad(r.coordinates,u,m),k=jh(a.geometry(),d,u,m);if(!Pi(d,u))return!1;for(const T of k)if(!ri(T,v))return!1}if(r.type==="MultiPolygon"){const v=Uo(r.coordinates,u,m),k=jh(a.geometry(),d,u,m);if(!Pi(d,u))return!1;for(const T of k)if(!mo(T,v))return!1}return!0})(e,this.geometries);if(e.geometryType()==="LineString")return(function(a,r){const d=[1/0,1/0,-1/0,-1/0],u=[1/0,1/0,-1/0,-1/0],m=a.canonicalID();if(r.type==="Polygon"){const v=ad(r.coordinates,u,m),k=Uh(a.geometry(),d,u,m);if(!Pi(d,u))return!1;for(const T of k)if(!hh(T,v))return!1}if(r.type==="MultiPolygon"){const v=Uo(r.coordinates,u,m),k=Uh(a.geometry(),d,u,m);if(!Pi(d,u))return!1;for(const T of k)if(!gf(T,v))return!1}return!0})(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Dd=class{constructor(s=[],e=(a,r)=>a<r?-1:a>r?1:0){if(this.data=s,this.length=this.data.length,this.compare=e,this.length>0)for(let a=(this.length>>1)-1;a>=0;a--)this._down(a)}push(s){this.data.push(s),this._up(this.length++)}pop(){if(this.length===0)return;const s=this.data[0],e=this.data.pop();return--this.length>0&&(this.data[0]=e,this._down(0)),s}peek(){return this.data[0]}_up(s){const{data:e,compare:a}=this,r=e[s];for(;s>0;){const d=s-1>>1,u=e[d];if(a(r,u)>=0)break;e[s]=u,s=d}e[s]=r}_down(s){const{data:e,compare:a}=this,r=this.length>>1,d=e[s];for(;s<r;){let u=1+(s<<1);const m=u+1;if(m<this.length&&a(e[m],e[u])<0&&(u=m),a(e[u],d)>=0)break;e[s]=e[u],s=u}e[s]=d}};function qo(s,e,a=0,r=s.length-1,d=Bd){for(;r>a;){if(r-a>600){const k=r-a+1,T=e-a+1,P=Math.log(k),z=.5*Math.exp(2*P/3),R=.5*Math.sqrt(P*z*(k-z)/k)*(T-k/2<0?-1:1);qo(s,e,Math.max(a,Math.floor(e-T*z/k+R)),Math.min(r,Math.floor(e+(k-T)*z/k+R)),d)}const u=s[e];let m=a,v=r;for(li(s,a,e),d(s[r],u)>0&&li(s,a,r);m<v;){for(li(s,m,v),m++,v--;d(s[m],u)<0;)m++;for(;d(s[v],u)>0;)v--}d(s[a],u)===0?li(s,a,v):(v++,li(s,v,r)),v<=e&&(a=v+1),e<=v&&(r=v-1)}}function li(s,e,a){const r=s[e];s[e]=s[a],s[a]=r}function Bd(s,e){return s<e?-1:s>e?1:0}function lh(s,e){if(s.length<=1)return[s];const a=[];let r,d;for(const u of s){const m=tr(u);m!==0&&(u.area=Math.abs(m),d===void 0&&(d=m<0),d===m<0?(r&&a.push(r),r=[u]):r.push(u))}if(r&&a.push(r),e>1)for(let u=0;u<a.length;u++)a[u].length<=e||(qo(a[u],e,1,a[u].length-1,yf),a[u]=a[u].slice(0,e));return a}function yf(s,e){return e.area-s.area}function tr(s){let e=0;for(let a,r,d=0,u=s.length,m=u-1;d<u;m=d++)a=s[d],r=s[m],e+=(r.x-a.x)*(a.y+r.y);return e}const bf=1/298.257223563,Ei=bf*(2-bf),wf=Math.PI/180;class di{constructor(e){const a=6378.137*wf*1e3,r=Math.cos(e*wf),d=1/(1-Ei*(1-r*r)),u=Math.sqrt(d);this.kx=a*u*r,this.ky=a*u*d*(1-Ei)}distance(e,a){const r=this.wrap(e[0]-a[0])*this.kx,d=(e[1]-a[1])*this.ky;return Math.sqrt(r*r+d*d)}pointOnLine(e,a){let r,d,u,m,v=1/0;for(let k=0;k<e.length-1;k++){let T=e[k][0],P=e[k][1],z=this.wrap(e[k+1][0]-T)*this.kx,R=(e[k+1][1]-P)*this.ky,H=0;z===0&&R===0||(H=(this.wrap(a[0]-T)*this.kx*z+(a[1]-P)*this.ky*R)/(z*z+R*R),H>1?(T=e[k+1][0],P=e[k+1][1]):H>0&&(T+=z/this.kx*H,P+=R/this.ky*H)),z=this.wrap(a[0]-T)*this.kx,R=(a[1]-P)*this.ky;const V=z*z+R*R;V<v&&(v=V,r=T,d=P,u=k,m=H)}return{point:[r,d],index:u,t:Math.max(0,Math.min(1,m))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}}function Mn(s,e){return e[0]-s[0]}function ar(s){return s[1]-s[0]+1}function go(s,e){return s[1]>=s[0]&&s[1]<e}function Cr(s,e){if(s[0]>s[1])return[null,null];const a=ar(s);if(e){if(a===2)return[s,null];const d=Math.floor(a/2);return[[s[0],s[0]+d],[s[0]+d,s[1]]]}if(a===1)return[s,null];const r=Math.floor(a/2)-1;return[[s[0],s[0]+r],[s[0]+r+1,s[1]]]}function qh(s,e){if(!go(e,s.length))return[1/0,1/0,-1/0,-1/0];const a=[1/0,1/0,-1/0,-1/0];for(let r=e[0];r<=e[1];++r)Er(a,s[r]);return a}function dh(s){const e=[1/0,1/0,-1/0,-1/0];for(const a of s)for(const r of a)Er(e,r);return e}function Ci(s){return s[0]!==-1/0&&s[1]!==-1/0&&s[2]!==1/0&&s[3]!==1/0}function fh(s,e,a){if(!Ci(s)||!Ci(e))return NaN;let r=0,d=0;return s[2]<e[0]&&(r=e[0]-s[2]),s[0]>e[2]&&(r=s[0]-e[2]),s[1]>e[3]&&(d=s[1]-e[3]),s[3]<e[1]&&(d=e[1]-s[3]),a.distance([0,0],[r,d])}function yo(s,e,a){const r=a.pointOnLine(e,s);return a.distance(s,r.point)}function Vh(s,e,a,r,d){const u=Math.min(yo(s,[a,r],d),yo(e,[a,r],d)),m=Math.min(yo(a,[s,e],d),yo(r,[s,e],d));return Math.min(u,m)}function gl(s,e,a,r,d){if(!go(e,s.length)||!go(r,a.length))return 1/0;let u=1/0;for(let m=e[0];m<e[1];++m){const v=s[m],k=s[m+1];for(let T=r[0];T<r[1];++T){const P=a[T],z=a[T+1];if(ml(v,k,P,z))return 0;u=Math.min(u,Vh(v,k,P,z,d))}}return u}function ch(s,e,a,r,d){if(!go(e,s.length)||!go(r,a.length))return NaN;let u=1/0;for(let m=e[0];m<=e[1];++m)for(let v=r[0];v<=r[1];++v)if(u=Math.min(u,d.distance(s[m],a[v])),u===0)return u;return u}function vf(s,e,a){if(ri(s,e,!0))return 0;let r=1/0;for(const d of e){const u=d[0],m=d[d.length-1];if(u!==m&&(r=Math.min(r,yo(s,[m,u],a)),r===0))return r;const v=a.pointOnLine(d,s);if(r=Math.min(r,a.distance(s,v.point)),r===0)return r}return r}function Mr(s,e,a,r){if(!go(e,s.length))return NaN;for(let u=e[0];u<=e[1];++u)if(ri(s[u],a,!0))return 0;let d=1/0;for(let u=e[0];u<e[1];++u){const m=s[u],v=s[u+1];for(const k of a)for(let T=0,P=k.length,z=P-1;T<P;z=T++){const R=k[z],H=k[T];if(ml(m,v,R,H))return 0;d=Math.min(d,Vh(m,v,R,H,r))}}return d}function ph(s,e){for(const a of s)for(const r of a)if(ri(r,e,!0))return!0;return!1}function sd(s,e,a,r=1/0){const d=dh(s),u=dh(e);if(r!==1/0&&fh(d,u,a)>=r)return r;if(Pi(d,u)){if(ph(s,e))return 0}else if(ph(e,s))return 0;let m=1/0;for(const v of s)for(let k=0,T=v.length,P=T-1;k<T;P=k++){const z=v[P],R=v[k];for(const H of e)for(let V=0,W=H.length,X=W-1;V<W;X=V++){const ee=H[X],ue=H[V];if(ml(z,R,ee,ue))return 0;m=Math.min(m,Vh(z,R,ee,ue,a))}}return m}function Ra(s,e,a,r,d,u){if(!u)return;const m=fh(qh(r,u),d,a);m<e&&s.push([m,u,[0,0]])}function cn(s,e,a,r,d,u,m){if(!u||!m)return;const v=fh(qh(r,u),qh(d,m),a);v<e&&s.push([v,u,m])}function Lr(s,e,a,r,d=1/0){let u=Math.min(r.distance(s[0],a[0][0]),d);if(u===0)return u;const m=new Dd([[0,[0,s.length-1],[0,0]]],Mn),v=dh(a);for(;m.length>0;){const k=m.pop();if(k[0]>=u)continue;const T=k[1],P=e?50:100;if(ar(T)<=P){if(!go(T,s.length))return NaN;if(e){const z=Mr(s,T,a,r);if(isNaN(z)||z===0)return z;u=Math.min(u,z)}else for(let z=T[0];z<=T[1];++z){const R=vf(s[z],a,r);if(u=Math.min(u,R),u===0)return 0}}else{const z=Cr(T,e);Ra(m,u,r,s,v,z[0]),Ra(m,u,r,s,v,z[1])}}return u}function yl(s,e,a,r,d,u=1/0){let m=Math.min(u,d.distance(s[0],a[0]));if(m===0)return m;const v=new Dd([[0,[0,s.length-1],[0,a.length-1]]],Mn);for(;v.length>0;){const k=v.pop();if(k[0]>=m)continue;const T=k[1],P=k[2],z=e?50:100,R=r?50:100;if(ar(T)<=z&&ar(P)<=R){if(!go(T,s.length)&&go(P,a.length))return NaN;let H;if(e&&r)H=gl(s,T,a,P,d),m=Math.min(m,H);else if(e&&!r){const V=s.slice(T[0],T[1]+1);for(let W=P[0];W<=P[1];++W)if(H=yo(a[W],V,d),m=Math.min(m,H),m===0)return m}else if(!e&&r){const V=a.slice(P[0],P[1]+1);for(let W=T[0];W<=T[1];++W)if(H=yo(s[W],V,d),m=Math.min(m,H),m===0)return m}else H=ch(s,T,a,P,d),m=Math.min(m,H)}else{const H=Cr(T,e),V=Cr(P,r);cn(v,m,d,s,a,H[0],V[0]),cn(v,m,d,s,a,H[0],V[1]),cn(v,m,d,s,a,H[1],V[0]),cn(v,m,d,s,a,H[1],V[1])}}return m}function uh(s){return s.type==="MultiPolygon"?s.coordinates.map((e=>({type:"Polygon",coordinates:e}))):s.type==="MultiLineString"?s.coordinates.map((e=>({type:"LineString",coordinates:e}))):s.type==="MultiPoint"?s.coordinates.map((e=>({type:"Point",coordinates:e}))):[s]}class mh{constructor(e,a){this.type=wt,this.geojson=e,this.geometries=a}static parse(e,a){if(e.length!==2)return a.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(co(e[1])){const r=e[1];if(r.type==="FeatureCollection")return new mh(r,r.features.map((d=>uh(d.geometry))).flat());if(r.type==="Feature")return new mh(r,uh(r.geometry));if("type"in r&&"coordinates"in r)return new mh(r,uh(r))}return a.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return(function(a,r){const d=a.geometry(),u=d.flat().map((k=>Gh([k.x,k.y],a.canonical)));if(d.length===0)return NaN;const m=new di(u[0][1]);let v=1/0;for(const k of r){switch(k.type){case"Point":v=Math.min(v,yl(u,!1,[k.coordinates],!1,m,v));break;case"LineString":v=Math.min(v,yl(u,!1,k.coordinates,!0,m,v));break;case"Polygon":v=Math.min(v,Lr(u,!1,k.coordinates,m,v))}if(v===0)return v}return v})(e,this.geometries);if(e.geometryType()==="LineString")return(function(a,r){const d=a.geometry(),u=d.flat().map((k=>Gh([k.x,k.y],a.canonical)));if(d.length===0)return NaN;const m=new di(u[0][1]);let v=1/0;for(const k of r){switch(k.type){case"Point":v=Math.min(v,yl(u,!0,[k.coordinates],!1,m,v));break;case"LineString":v=Math.min(v,yl(u,!0,k.coordinates,!0,m,v));break;case"Polygon":v=Math.min(v,Lr(u,!0,k.coordinates,m,v))}if(v===0)return v}return v})(e,this.geometries);if(e.geometryType()==="Polygon")return(function(a,r){const d=a.geometry();if(d.length===0||d[0].length===0)return NaN;const u=lh(d,0).map((k=>k.map((T=>T.map((P=>Gh([P.x,P.y],a.canonical))))))),m=new di(u[0][0][0][1]);let v=1/0;for(const k of r)for(const T of u){switch(k.type){case"Point":v=Math.min(v,Lr([k.coordinates],!1,T,m,v));break;case"LineString":v=Math.min(v,Lr(k.coordinates,!0,T,m,v));break;case"Polygon":v=Math.min(v,sd(T,k.coordinates,m,v))}if(v===0)return v}return v})(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class Wh{constructor(e){this.type=oa,this.key=e}static parse(e,a){if(e.length!==2)return a.error(`Expected 1 argument, but found ${e.length-1} instead.`);const r=e[1];return r==null?a.error("Global state property must be defined."):typeof r!="string"?a.error(`Global state property must be string, but found ${typeof e[1]} instead.`):new Wh(r)}evaluate(e){var a;const r=(a=e.globals)===null||a===void 0?void 0:a.globalState;return r&&Object.keys(r).length!==0?Ai(r,this.key):null}eachChild(){}outputDefined(){return!1}}const Zh={"==":uf,"!=":ed,">":hc,"<":td,">=":pl,"<=":ih,array:Jn,at:ua,boolean:Jn,case:dl,coalesce:Qi,collator:Ji,format:ul,image:Si,in:ia,"index-of":oh,interpolate:js,"interpolate-hcl":js,"interpolate-lab":js,length:Cn,let:Ka,literal:uo,match:Sa,number:Jn,"number-format":er,object:Jn,slice:Mo,step:Pr,string:Jn,"to-boolean":En,"to-color":En,"to-number":En,"to-string":En,var:vn,within:hi,distance:mh,"global-state":Wh};class Ln{constructor(e,a,r,d){this.name=e,this.type=a,this._evaluate=r,this.args=d}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,a){const r=e[0],d=Ln.definitions[r];if(!d)return a.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0);const u=Array.isArray(d)?d[0]:d.type,m=Array.isArray(d)?[[d[1],d[2]]]:d.overloads,v=m.filter((([T])=>!Array.isArray(T)||T.length===e.length-1));let k=null;for(const[T,P]of v){k=new Oa(a.registry,eo,a.path,null,a.scope);const z=[];let R=!1;for(let H=1;H<e.length;H++){const V=e[H],W=Array.isArray(T)?T[H-1]:T.type,X=k.parse(V,1+z.length,W);if(!X){R=!0;break}z.push(X)}if(!R)if(Array.isArray(T)&&T.length!==z.length)k.error(`Expected ${T.length} arguments, but found ${z.length} instead.`);else{for(let H=0;H<z.length;H++){const V=Array.isArray(T)?T[H]:T.type,W=z[H];k.concat(H+1).checkSubtype(V,W.type)}if(k.errors.length===0)return new Ln(r,u,P,z)}}if(v.length===1)a.errors.push(...k.errors);else{const T=(v.length?v:m).map((([z])=>{return R=z,Array.isArray(R)?`(${R.map(La).join(", ")})`:`(${La(R.type)}...)`;var R})).join(" | "),P=[];for(let z=1;z<e.length;z++){const R=a.parse(e[z],1+P.length);if(!R)return null;P.push(La(R.type))}a.error(`Expected arguments of type ${T}, but found (${P.join(", ")}) instead.`)}return null}static register(e,a){Ln.definitions=a;for(const r in a)e[r]=Ln}}function Rd(s,[e,a,r,d]){e=e.evaluate(s),a=a.evaluate(s),r=r.evaluate(s);const u=d?d.evaluate(s):1,m=Qn(e,a,r,u);if(m)throw new $a(m);return new ra(e/255,a/255,r/255,u,!1)}function sr(s,e){return s in e}function bo(s,e){const a=e[s];return a===void 0?null:a}function fi(s){return{type:s}}function eo(s){if(s instanceof vn)return eo(s.boundExpression);if(s instanceof Ln&&s.name==="error"||s instanceof Ji||s instanceof hi||s instanceof mh||s instanceof Wh)return!1;const e=s instanceof En||s instanceof Jn;let a=!0;return s.eachChild((r=>{a=e?a&&eo(r):a&&r instanceof uo})),!!a&&zn(s)&&Dr(s,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function zn(s){if(s instanceof Ln&&(s.name==="get"&&s.args.length===1||s.name==="feature-state"||s.name==="has"&&s.args.length===1||s.name==="properties"||s.name==="geometry-type"||s.name==="id"||/^filter-/.test(s.name))||s instanceof hi||s instanceof mh)return!1;let e=!0;return s.eachChild((a=>{e&&!zn(a)&&(e=!1)})),e}function zr(s){if(s instanceof Ln&&s.name==="feature-state")return!1;let e=!0;return s.eachChild((a=>{e&&!zr(a)&&(e=!1)})),e}function Dr(s,e){if(s instanceof Ln&&e.indexOf(s.name)>=0)return!1;let a=!0;return s.eachChild((r=>{a&&!Dr(r,e)&&(a=!1)})),a}function nr(s){return{result:"success",value:s}}function Br(s){return{result:"error",value:s}}function to(s){return s["property-type"]==="data-driven"||s["property-type"]==="cross-faded-data-driven"}function gh(s){return!!s.expression&&s.expression.parameters.indexOf("zoom")>-1}function yh(s){return!!s.expression&&s.expression.interpolated}function ha(s){return s instanceof Number?"number":s instanceof String?"string":s instanceof Boolean?"boolean":Array.isArray(s)?"array":s===null?"null":typeof s}function nd(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)&&wa(s)===Ii}function wo(s){return s}function bl(s,e){const a=s.stops&&typeof s.stops[0][0]=="object",r=a||!(a||s.property!==void 0),d=s.type||(yh(e)?"exponential":"interval"),u=(function(P){switch(P.type){case"color":return ra.parse;case"padding":return Wt.parse;case"numberArray":return Ba.parse;case"colorArray":return Nt.parse;default:return null}})(e);if(u&&((s=An({},s)).stops&&(s.stops=s.stops.map((P=>[P[0],u(P[1])]))),s.default=u(s.default?s.default:e.default)),s.colorSpace&&(m=s.colorSpace)!=="rgb"&&m!=="hcl"&&m!=="lab")throw new Error(`Unknown color space: "${s.colorSpace}"`);var m;const v=(function(P){switch(P){case"exponential":return Rr;case"interval":return wl;case"categorical":return Hd;case"identity":return od;default:throw new Error(`Unknown function type "${P}"`)}})(d);let k,T;if(d==="categorical"){k=Object.create(null);for(const P of s.stops)k[P[0]]=P[1];T=typeof s.stops[0][0]}if(a){const P={},z=[];for(let V=0;V<s.stops.length;V++){const W=s.stops[V],X=W[0].zoom;P[X]===void 0&&(P[X]={zoom:X,type:s.type,property:s.property,default:s.default,stops:[]},z.push(X)),P[X].stops.push([W[0].value,W[1]])}const R=[];for(const V of z)R.push([P[V].zoom,bl(P[V],e)]);const H={name:"linear"};return{kind:"composite",interpolationType:H,interpolationFactor:js.interpolationFactor.bind(void 0,H),zoomStops:R.map((V=>V[0])),evaluate:({zoom:V},W)=>Rr({stops:R,base:s.base},e,V).evaluate(V,W)}}if(r){const P=d==="exponential"?{name:"exponential",base:s.base!==void 0?s.base:1}:null;return{kind:"camera",interpolationType:P,interpolationFactor:js.interpolationFactor.bind(void 0,P),zoomStops:s.stops.map((z=>z[0])),evaluate:({zoom:z})=>v(s,e,z,k,T)}}return{kind:"source",evaluate(P,z){const R=z&&z.properties?z.properties[s.property]:void 0;return R===void 0?vo(s.default,e.default):v(s,e,R,k,T)}}}function vo(s,e,a){return s!==void 0?s:e!==void 0?e:a!==void 0?a:void 0}function Hd(s,e,a,r,d){return vo(typeof a===d?r[a]:void 0,s.default,e.default)}function wl(s,e,a){if(ha(a)!=="number")return vo(s.default,e.default);const r=s.stops.length;if(r===1||a<=s.stops[0][0])return s.stops[0][1];if(a>=s.stops[r-1][0])return s.stops[r-1][1];const d=Sr(s.stops.map((u=>u[0])),a);return s.stops[d][1]}function Rr(s,e,a){const r=s.base!==void 0?s.base:1;if(ha(a)!=="number")return vo(s.default,e.default);const d=s.stops.length;if(d===1||a<=s.stops[0][0])return s.stops[0][1];if(a>=s.stops[d-1][0])return s.stops[d-1][1];const u=Sr(s.stops.map((P=>P[0])),a),m=(function(P,z,R,H){const V=H-R,W=P-R;return V===0?0:z===1?W/V:(Math.pow(z,W)-1)/(Math.pow(z,V)-1)})(a,r,s.stops[u][0],s.stops[u+1][0]),v=s.stops[u][1],k=s.stops[u+1][1],T=bs[e.type]||wo;return typeof v.evaluate=="function"?{evaluate(...P){const z=v.evaluate.apply(void 0,P),R=k.evaluate.apply(void 0,P);if(z!==void 0&&R!==void 0)return T(z,R,m,s.colorSpace)}}:T(v,k,m,s.colorSpace)}function od(s,e,a){switch(e.type){case"color":a=ra.parse(a);break;case"formatted":a=fn.fromString(a.toString());break;case"resolvedImage":a=Pn.fromString(a.toString());break;case"padding":a=Wt.parse(a);break;case"colorArray":a=Nt.parse(a);break;case"numberArray":a=Ba.parse(a);break;default:ha(a)===e.type||e.type==="enum"&&e.values[a]||(a=void 0)}return vo(a,s.default,e.default)}Ln.register(Zh,{error:[{kind:"error"},[na],(s,[e])=>{throw new $a(e.evaluate(s))}],typeof:[na,[oa],(s,[e])=>La(wa(e.evaluate(s)))],"to-rgba":[Hn(wt,4),[ho],(s,[e])=>{const[a,r,d,u]=e.evaluate(s).rgb;return[255*a,255*r,255*d,u]}],rgb:[ho,[wt,wt,wt],Rd],rgba:[ho,[wt,wt,wt,wt],Rd],has:{type:ta,overloads:[[[na],(s,[e])=>sr(e.evaluate(s),s.properties())],[[na,Ii],(s,[e,a])=>sr(e.evaluate(s),a.evaluate(s))]]},get:{type:oa,overloads:[[[na],(s,[e])=>bo(e.evaluate(s),s.properties())],[[na,Ii],(s,[e,a])=>bo(e.evaluate(s),a.evaluate(s))]]},"feature-state":[oa,[na],(s,[e])=>bo(e.evaluate(s),s.featureState||{})],properties:[Ii,[],s=>s.properties()],"geometry-type":[na,[],s=>s.geometryType()],id:[oa,[],s=>s.id()],zoom:[wt,[],s=>s.globals.zoom],"heatmap-density":[wt,[],s=>s.globals.heatmapDensity||0],elevation:[wt,[],s=>s.globals.elevation||0],"line-progress":[wt,[],s=>s.globals.lineProgress||0],accumulated:[oa,[],s=>s.globals.accumulated===void 0?null:s.globals.accumulated],"+":[wt,fi(wt),(s,e)=>{let a=0;for(const r of e)a+=r.evaluate(s);return a}],"*":[wt,fi(wt),(s,e)=>{let a=1;for(const r of e)a*=r.evaluate(s);return a}],"-":{type:wt,overloads:[[[wt,wt],(s,[e,a])=>e.evaluate(s)-a.evaluate(s)],[[wt],(s,[e])=>-e.evaluate(s)]]},"/":[wt,[wt,wt],(s,[e,a])=>e.evaluate(s)/a.evaluate(s)],"%":[wt,[wt,wt],(s,[e,a])=>e.evaluate(s)%a.evaluate(s)],ln2:[wt,[],()=>Math.LN2],pi:[wt,[],()=>Math.PI],e:[wt,[],()=>Math.E],"^":[wt,[wt,wt],(s,[e,a])=>Math.pow(e.evaluate(s),a.evaluate(s))],sqrt:[wt,[wt],(s,[e])=>Math.sqrt(e.evaluate(s))],log10:[wt,[wt],(s,[e])=>Math.log(e.evaluate(s))/Math.LN10],ln:[wt,[wt],(s,[e])=>Math.log(e.evaluate(s))],log2:[wt,[wt],(s,[e])=>Math.log(e.evaluate(s))/Math.LN2],sin:[wt,[wt],(s,[e])=>Math.sin(e.evaluate(s))],cos:[wt,[wt],(s,[e])=>Math.cos(e.evaluate(s))],tan:[wt,[wt],(s,[e])=>Math.tan(e.evaluate(s))],asin:[wt,[wt],(s,[e])=>Math.asin(e.evaluate(s))],acos:[wt,[wt],(s,[e])=>Math.acos(e.evaluate(s))],atan:[wt,[wt],(s,[e])=>Math.atan(e.evaluate(s))],min:[wt,fi(wt),(s,e)=>Math.min(...e.map((a=>a.evaluate(s))))],max:[wt,fi(wt),(s,e)=>Math.max(...e.map((a=>a.evaluate(s))))],abs:[wt,[wt],(s,[e])=>Math.abs(e.evaluate(s))],round:[wt,[wt],(s,[e])=>{const a=e.evaluate(s);return a<0?-Math.round(-a):Math.round(a)}],floor:[wt,[wt],(s,[e])=>Math.floor(e.evaluate(s))],ceil:[wt,[wt],(s,[e])=>Math.ceil(e.evaluate(s))],"filter-==":[ta,[na,oa],(s,[e,a])=>s.properties()[e.value]===a.value],"filter-id-==":[ta,[oa],(s,[e])=>s.id()===e.value],"filter-type-==":[ta,[na],(s,[e])=>s.geometryType()===e.value],"filter-<":[ta,[na,oa],(s,[e,a])=>{const r=s.properties()[e.value],d=a.value;return typeof r==typeof d&&r<d}],"filter-id-<":[ta,[oa],(s,[e])=>{const a=s.id(),r=e.value;return typeof a==typeof r&&a<r}],"filter->":[ta,[na,oa],(s,[e,a])=>{const r=s.properties()[e.value],d=a.value;return typeof r==typeof d&&r>d}],"filter-id->":[ta,[oa],(s,[e])=>{const a=s.id(),r=e.value;return typeof a==typeof r&&a>r}],"filter-<=":[ta,[na,oa],(s,[e,a])=>{const r=s.properties()[e.value],d=a.value;return typeof r==typeof d&&r<=d}],"filter-id-<=":[ta,[oa],(s,[e])=>{const a=s.id(),r=e.value;return typeof a==typeof r&&a<=r}],"filter->=":[ta,[na,oa],(s,[e,a])=>{const r=s.properties()[e.value],d=a.value;return typeof r==typeof d&&r>=d}],"filter-id->=":[ta,[oa],(s,[e])=>{const a=s.id(),r=e.value;return typeof a==typeof r&&a>=r}],"filter-has":[ta,[oa],(s,[e])=>e.value in s.properties()],"filter-has-id":[ta,[],s=>s.id()!==null&&s.id()!==void 0],"filter-type-in":[ta,[Hn(na)],(s,[e])=>e.value.indexOf(s.geometryType())>=0],"filter-id-in":[ta,[Hn(oa)],(s,[e])=>e.value.indexOf(s.id())>=0],"filter-in-small":[ta,[na,Hn(oa)],(s,[e,a])=>a.value.indexOf(s.properties()[e.value])>=0],"filter-in-large":[ta,[na,Hn(oa)],(s,[e,a])=>(function(r,d,u,m){for(;u<=m;){const v=u+m>>1;if(d[v]===r)return!0;d[v]>r?m=v-1:u=v+1}return!1})(s.properties()[e.value],a.value,0,a.value.length-1)],all:{type:ta,overloads:[[[ta,ta],(s,[e,a])=>e.evaluate(s)&&a.evaluate(s)],[fi(ta),(s,e)=>{for(const a of e)if(!a.evaluate(s))return!1;return!0}]]},any:{type:ta,overloads:[[[ta,ta],(s,[e,a])=>e.evaluate(s)||a.evaluate(s)],[fi(ta),(s,e)=>{for(const a of e)if(a.evaluate(s))return!0;return!1}]]},"!":[ta,[ta],(s,[e])=>!e.evaluate(s)],"is-supported-script":[ta,[na],(s,[e])=>{const a=s.globals&&s.globals.isSupportedScript;return!a||a(e.evaluate(s))}],upcase:[na,[na],(s,[e])=>e.evaluate(s).toUpperCase()],downcase:[na,[na],(s,[e])=>e.evaluate(s).toLowerCase()],concat:[na,fi(oa),(s,e)=>e.map((a=>po(a.evaluate(s)))).join("")],"resolved-locale":[na,[eh],(s,[e])=>e.evaluate(s).resolvedLocale()]});class vl{constructor(e,a,r){this.expression=e,this._warningHistory={},this._evaluator=new Ar,this._defaultValue=a?(function(d){if(d.type==="color"&&nd(d.default))return new ra(0,0,0,0);switch(d.type){case"color":return ra.parse(d.default)||null;case"padding":return Wt.parse(d.default)||null;case"numberArray":return Ba.parse(d.default)||null;case"colorArray":return Nt.parse(d.default)||null;case"variableAnchorOffsetCollection":return Os.parse(d.default)||null;case"projectionDefinition":return ks.parse(d.default)||null;default:return d.default===void 0?null:d.default}})(a):null,this._enumValues=a&&a.type==="enum"?a.values:null,this._globalState=r}evaluateWithoutErrorHandling(e,a,r,d,u,m){return this._globalState&&(e=De(e,this._globalState)),this._evaluator.globals=e,this._evaluator.feature=a,this._evaluator.featureState=r,this._evaluator.canonical=d,this._evaluator.availableImages=u||null,this._evaluator.formattedSection=m,this.expression.evaluate(this._evaluator)}evaluate(e,a,r,d,u,m){this._globalState&&(e=De(e,this._globalState)),this._evaluator.globals=e,this._evaluator.feature=a||null,this._evaluator.featureState=r||null,this._evaluator.canonical=d,this._evaluator.availableImages=u||null,this._evaluator.formattedSection=m||null;try{const v=this.expression.evaluate(this._evaluator);if(v==null||typeof v=="number"&&v!=v)return this._defaultValue;if(this._enumValues&&!(v in this._enumValues))throw new $a(`Expected value to be one of ${Object.keys(this._enumValues).map((k=>JSON.stringify(k))).join(", ")}, but found ${JSON.stringify(v)} instead.`);return v}catch(v){return this._warningHistory[v.message]||(this._warningHistory[v.message]=!0,typeof console!="undefined"&&console.warn(v.message)),this._defaultValue}}}function Hr(s){return Array.isArray(s)&&s.length>0&&typeof s[0]=="string"&&s[0]in Zh}function h(s,e,a){const r=new Oa(Zh,eo,[],e?(function(u){const m={color:ho,string:na,number:wt,enum:na,boolean:ta,formatted:ti,padding:Yi,numberArray:xi,colorArray:Eo,projectionDefinition:Xl,resolvedImage:zs,variableAnchorOffsetCollection:Rh};return u.type==="array"?Hn(m[u.value]||oa,u.length):m[u.type]})(e):void 0),d=r.parse(s,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return d?nr(new vl(d,e,a)):Br(r.errors)}class y{constructor(e,a,r){this.kind=e,this._styleExpression=a,this.isStateDependent=e!=="constant"&&!zr(a.expression),this.globalStateRefs=we(a.expression),this._globalState=r}evaluateWithoutErrorHandling(e,a,r,d,u,m){return this._globalState&&(e=De(e,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(e,a,r,d,u,m)}evaluate(e,a,r,d,u,m){return this._globalState&&(e=De(e,this._globalState)),this._styleExpression.evaluate(e,a,r,d,u,m)}}class _{constructor(e,a,r,d,u){this.kind=e,this.zoomStops=r,this._styleExpression=a,this.isStateDependent=e!=="camera"&&!zr(a.expression),this.globalStateRefs=we(a.expression),this.interpolationType=d,this._globalState=u}evaluateWithoutErrorHandling(e,a,r,d,u,m){return this._globalState&&(e=De(e,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(e,a,r,d,u,m)}evaluate(e,a,r,d,u,m){return this._globalState&&(e=De(e,this._globalState)),this._styleExpression.evaluate(e,a,r,d,u,m)}interpolationFactor(e,a,r){return this.interpolationType?js.interpolationFactor(this.interpolationType,e,a,r):0}}function M(s,e,a){const r=h(s,e,a);if(r.result==="error")return r;const d=r.value.expression,u=zn(d);if(!u&&!to(e))return Br([new Sn("","data expressions not supported")]);const m=Dr(d,["zoom"]);if(!m&&!gh(e))return Br([new Sn("","zoom expressions not supported")]);const v=te(d);return v||m?v instanceof Sn?Br([v]):v instanceof js&&!yh(e)?Br([new Sn("",'"interpolate" expressions cannot be used with this property')]):nr(v?new _(u?"camera":"composite",r.value,v.labels,v instanceof js?v.interpolation:void 0,a):new y(u?"constant":"source",r.value,a)):Br([new Sn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class j{constructor(e,a){this._parameters=e,this._specification=a,An(this,bl(this._parameters,this._specification))}static deserialize(e){return new j(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function te(s){let e=null;if(s instanceof Ka)e=te(s.result);else if(s instanceof Qi){for(const a of s.args)if(e=te(a),e)break}else(s instanceof Pr||s instanceof js)&&s.input instanceof Ln&&s.input.name==="zoom"&&(e=s);return e instanceof Sn||s.eachChild((a=>{const r=te(a);r instanceof Sn?e=r:!e&&r?e=new Sn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&r&&e!==r&&(e=new Sn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),e}function we(s,e=new Set){return s instanceof Wh&&e.add(s.key),s.eachChild((a=>{we(a,e)})),e}function De(s,e){const{zoom:a,heatmapDensity:r,elevation:d,lineProgress:u,isSupportedScript:m,accumulated:v}=s!=null?s:{};return{zoom:a,heatmapDensity:r,elevation:d,lineProgress:u,isSupportedScript:m,accumulated:v,globalState:e}}function $e(s){if(s===!0||s===!1)return!0;if(!Array.isArray(s)||s.length===0)return!1;switch(s[0]){case"has":return s.length>=2&&s[1]!=="$id"&&s[1]!=="$type";case"in":return s.length>=3&&(typeof s[1]!="string"||Array.isArray(s[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return s.length!==3||Array.isArray(s[1])||Array.isArray(s[2]);case"any":case"all":for(const e of s.slice(1))if(!$e(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}const ct={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Mt(s,e){if(s==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};$e(s)||(s=Ys(s));const a=h(s,ct,e);if(a.result==="error")throw new Error(a.value.map((r=>`${r.key}: ${r.message}`)).join(", "));return{filter:(r,d,u)=>a.value.evaluate(r,d,{},u),needGeometry:ka(s),getGlobalStateRefs:()=>we(a.value.expression)}}function Kt(s,e){return s<e?-1:s>e?1:0}function ka(s){if(!Array.isArray(s))return!1;if(s[0]==="within"||s[0]==="distance")return!0;for(let e=1;e<s.length;e++)if(ka(s[e]))return!0;return!1}function Ys(s){if(!s)return!0;const e=s[0];return s.length<=1?e!=="any":e==="=="?Rs(s[1],s[2],"=="):e==="!="?Ha(Rs(s[1],s[2],"==")):e==="<"||e===">"||e==="<="||e===">="?Rs(s[1],s[2],e):e==="any"?(a=s.slice(1),["any"].concat(a.map(Ys))):e==="all"?["all"].concat(s.slice(1).map(Ys)):e==="none"?["all"].concat(s.slice(1).map(Ys).map(Ha)):e==="in"?Oo(s[1],s.slice(2)):e==="!in"?Ha(Oo(s[1],s.slice(2))):e==="has"?Ya(s[1]):e!=="!has"||Ha(Ya(s[1]));var a}function Rs(s,e,a){switch(s){case"$type":return[`filter-type-${a}`,e];case"$id":return[`filter-id-${a}`,e];default:return[`filter-${a}`,s,e]}}function Oo(s,e){if(e.length===0)return!1;switch(s){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((a=>typeof a!=typeof e[0]))?["filter-in-large",s,["literal",e.sort(Kt)]]:["filter-in-small",s,["literal",e]]}}function Ya(s){switch(s){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",s]}}function Ha(s){return["!",s]}function Pa(s){const e=typeof s;if(e==="number"||e==="boolean"||e==="string"||s==null)return JSON.stringify(s);if(Array.isArray(s)){let d="[";for(const u of s)d+=`${Pa(u)},`;return`${d}]`}const a=Object.keys(s).sort();let r="{";for(let d=0;d<a.length;d++)r+=`${JSON.stringify(a[d])}:${Pa(s[a[d]])},`;return`${r}}`}function or(s){let e="";for(const a of Za)e+=`/${Pa(s[a])}`;return e}function Lo(s){const e=s.value;return e?[new We(s.key,e,"constants have been deprecated as of v8")]:[]}function _s(s){return s instanceof Number||s instanceof String||s instanceof Boolean?s.valueOf():s}function ko(s){if(Array.isArray(s))return s.map(ko);if(s instanceof Object&&!(s instanceof Number||s instanceof String||s instanceof Boolean)){const e={};for(const a in s)e[a]=ko(s[a]);return e}return _s(s)}function ao(s){const e=s.key,a=s.value,r=s.valueSpec||{},d=s.objectElementValidators||{},u=s.style,m=s.styleSpec,v=s.validateSpec;let k=[];const T=ha(a);if(T!=="object")return[new We(e,a,`object expected, ${T} found`)];for(const P in a){const z=P.split(".")[0],R=Ai(r,z)||r["*"];let H;if(Ai(d,z))H=d[z];else if(Ai(r,z)){if(a[P]===void 0)continue;H=v}else if(d["*"])H=d["*"];else{if(!r["*"]){k.push(new We(e,a[P],`unknown property "${P}"`));continue}H=v}k=k.concat(H({key:(e&&`${e}.`)+P,value:a[P],valueSpec:R,style:u,styleSpec:m,object:a,objectKey:P,validateSpec:v},a))}for(const P in r)d[P]||r[P].required&&r[P].default===void 0&&a[P]===void 0&&k.push(new We(e,a,`missing required property "${P}"`));return k}function Ps(s){const e=s.value,a=s.valueSpec,r=s.style,d=s.styleSpec,u=s.key,m=s.arrayElementValidator||s.validateSpec;if(ha(e)!=="array")return[new We(u,e,`array expected, ${ha(e)} found`)];if(a.length&&e.length!==a.length)return[new We(u,e,`array length ${a.length} expected, length ${e.length} found`)];let v={type:a.value,values:a.values};d.$version<7&&(v.function=a.function),ha(a.value)==="object"&&(v=a.value);let k=[];for(let T=0;T<e.length;T++)k=k.concat(m({array:e,arrayIndex:T,value:e[T],valueSpec:v,validateSpec:s.validateSpec,style:r,styleSpec:d,key:`${u}[${T}]`}));return k}function zo(s){const e=s.key,a=s.value,r=s.valueSpec;let d=ha(a);return d==="number"&&a!=a&&(d="NaN"),d!=="number"?[new We(e,a,`number expected, ${d} found`)]:"minimum"in r&&a<r.minimum?[new We(e,a,`${a} is less than the minimum value ${r.minimum}`)]:"maximum"in r&&a>r.maximum?[new We(e,a,`${a} is greater than the maximum value ${r.maximum}`)]:[]}function Mi(s){const e=s.valueSpec,a=_s(s.value.type);let r,d,u,m={};const v=a!=="categorical"&&s.value.property===void 0,k=!v,T=ha(s.value.stops)==="array"&&ha(s.value.stops[0])==="array"&&ha(s.value.stops[0][0])==="object",P=ao({key:s.key,value:s.value,valueSpec:s.styleSpec.function,validateSpec:s.validateSpec,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{stops:function(H){if(a==="identity")return[new We(H.key,H.value,'identity function may not have a "stops" property')];let V=[];const W=H.value;return V=V.concat(Ps({key:H.key,value:W,valueSpec:H.valueSpec,validateSpec:H.validateSpec,style:H.style,styleSpec:H.styleSpec,arrayElementValidator:z})),ha(W)==="array"&&W.length===0&&V.push(new We(H.key,W,"array must have at least one stop")),V},default:function(H){return H.validateSpec({key:H.key,value:H.value,valueSpec:e,validateSpec:H.validateSpec,style:H.style,styleSpec:H.styleSpec})}}});return a==="identity"&&v&&P.push(new We(s.key,s.value,'missing required property "property"')),a==="identity"||s.value.stops||P.push(new We(s.key,s.value,'missing required property "stops"')),a==="exponential"&&s.valueSpec.expression&&!yh(s.valueSpec)&&P.push(new We(s.key,s.value,"exponential functions not supported")),s.styleSpec.$version>=8&&(k&&!to(s.valueSpec)?P.push(new We(s.key,s.value,"property functions not supported")):v&&!gh(s.valueSpec)&&P.push(new We(s.key,s.value,"zoom functions not supported"))),a!=="categorical"&&!T||s.value.property!==void 0||P.push(new We(s.key,s.value,'"property" property is required')),P;function z(H){let V=[];const W=H.value,X=H.key;if(ha(W)!=="array")return[new We(X,W,`array expected, ${ha(W)} found`)];if(W.length!==2)return[new We(X,W,`array length 2 expected, length ${W.length} found`)];if(T){if(ha(W[0])!=="object")return[new We(X,W,`object expected, ${ha(W[0])} found`)];if(W[0].zoom===void 0)return[new We(X,W,"object stop key must have zoom")];if(W[0].value===void 0)return[new We(X,W,"object stop key must have value")];if(u&&u>_s(W[0].zoom))return[new We(X,W[0].zoom,"stop zoom values must appear in ascending order")];_s(W[0].zoom)!==u&&(u=_s(W[0].zoom),d=void 0,m={}),V=V.concat(ao({key:`${X}[0]`,value:W[0],valueSpec:{zoom:{}},validateSpec:H.validateSpec,style:H.style,styleSpec:H.styleSpec,objectElementValidators:{zoom:zo,value:R}}))}else V=V.concat(R({key:`${X}[0]`,value:W[0],validateSpec:H.validateSpec,style:H.style,styleSpec:H.styleSpec},W));return Hr(ko(W[1]))?V.concat([new We(`${X}[1]`,W[1],"expressions are not allowed in function stops.")]):V.concat(H.validateSpec({key:`${X}[1]`,value:W[1],valueSpec:e,validateSpec:H.validateSpec,style:H.style,styleSpec:H.styleSpec}))}function R(H,V){const W=ha(H.value),X=_s(H.value),ee=H.value!==null?H.value:V;if(r){if(W!==r)return[new We(H.key,ee,`${W} stop domain type must match previous stop domain type ${r}`)]}else r=W;if(W!=="number"&&W!=="string"&&W!=="boolean")return[new We(H.key,ee,"stop domain value must be a number, string, or boolean")];if(W!=="number"&&a!=="categorical"){let ue=`number expected, ${W} found`;return to(e)&&a===void 0&&(ue+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new We(H.key,ee,ue)]}return a!=="categorical"||W!=="number"||isFinite(X)&&Math.floor(X)===X?a!=="categorical"&&W==="number"&&d!==void 0&&X<d?[new We(H.key,ee,"stop domain values must appear in ascending order")]:(d=X,a==="categorical"&&X in m?[new We(H.key,ee,"stop domain values must be unique")]:(m[X]=!0,[])):[new We(H.key,ee,`integer expected, found ${X}`)]}}function Li(s){const e=(s.expressionContext==="property"?M:h)(ko(s.value),s.valueSpec);if(e.result==="error")return e.value.map((r=>new We(`${s.key}${r.key}`,s.value,r.message)));const a=e.value.expression||e.value._styleExpression.expression;if(s.expressionContext==="property"&&s.propertyKey==="text-font"&&!a.outputDefined())return[new We(s.key,s.value,`Invalid data expression for "${s.propertyKey}". Output values must be contained as literals within the expression.`)];if(s.expressionContext==="property"&&s.propertyType==="layout"&&!zr(a))return[new We(s.key,s.value,'"feature-state" data expressions are not supported with layout properties.')];if(s.expressionContext==="filter"&&!zr(a))return[new We(s.key,s.value,'"feature-state" data expressions are not supported with filters.')];if(s.expressionContext&&s.expressionContext.indexOf("cluster")===0){if(!Dr(a,["zoom","feature-state"]))return[new We(s.key,s.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(s.expressionContext==="cluster-initial"&&!zn(a))return[new We(s.key,s.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ir(s){const e=s.key,a=s.value,r=ha(a);return r!=="string"?[new We(e,a,`color expected, ${r} found`)]:ra.parse(String(a))?[]:[new We(e,a,`color expected, "${a}" found`)]}function ci(s){const e=s.key,a=s.value,r=s.valueSpec,d=[];return Array.isArray(r.values)?r.values.indexOf(_s(a))===-1&&d.push(new We(e,a,`expected one of [${r.values.join(", ")}], ${JSON.stringify(a)} found`)):Object.keys(r.values).indexOf(_s(a))===-1&&d.push(new We(e,a,`expected one of [${Object.keys(r.values).join(", ")}], ${JSON.stringify(a)} found`)),d}function Do(s){return $e(ko(s.value))?Li(An({},s,{expressionContext:"filter",valueSpec:{value:"boolean"}})):zi(s)}function zi(s){const e=s.value,a=s.key;if(ha(e)!=="array")return[new We(a,e,`array expected, ${ha(e)} found`)];const r=s.styleSpec;let d,u=[];if(e.length<1)return[new We(a,e,"filter array must have at least 1 element")];switch(u=u.concat(ci({key:`${a}[0]`,value:e[0],valueSpec:r.filter_operator,style:s.style,styleSpec:s.styleSpec})),_s(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&_s(e[1])==="$type"&&u.push(new We(a,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":e.length!==3&&u.push(new We(a,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(d=ha(e[1]),d!=="string"&&u.push(new We(`${a}[1]`,e[1],`string expected, ${d} found`)));for(let m=2;m<e.length;m++)d=ha(e[m]),_s(e[1])==="$type"?u=u.concat(ci({key:`${a}[${m}]`,value:e[m],valueSpec:r.geometry_type,style:s.style,styleSpec:s.styleSpec})):d!=="string"&&d!=="number"&&d!=="boolean"&&u.push(new We(`${a}[${m}]`,e[m],`string, number, or boolean expected, ${d} found`));break;case"any":case"all":case"none":for(let m=1;m<e.length;m++)u=u.concat(zi({key:`${a}[${m}]`,value:e[m],style:s.style,styleSpec:s.styleSpec}));break;case"has":case"!has":d=ha(e[1]),e.length!==2?u.push(new We(a,e,`filter array for "${e[0]}" operator must have 2 elements`)):d!=="string"&&u.push(new We(`${a}[1]`,e[1],`string expected, ${d} found`))}return u}function bh(s,e){const a=s.key,r=s.validateSpec,d=s.style,u=s.styleSpec,m=s.value,v=s.objectKey,k=u[`${e}_${s.layerType}`];if(!k)return[];const T=v.match(/^(.*)-transition$/);if(e==="paint"&&T&&k[T[1]]&&k[T[1]].transition)return r({key:a,value:m,valueSpec:u.transition,style:d,styleSpec:u});const P=s.valueSpec||k[v];if(!P)return[new We(a,m,`unknown property "${v}"`)];let z;if(ha(m)==="string"&&to(P)&&!P.tokens&&(z=/^{([^}]+)}$/.exec(m)))return[new We(a,m,`"${v}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(z[1])} }\`.`)];const R=[];return s.layerType==="symbol"&&v==="text-font"&&nd(ko(m))&&_s(m.type)==="identity"&&R.push(new We(a,m,'"text-font" does not support identity functions')),R.concat(r({key:s.key,value:m,valueSpec:P,style:d,styleSpec:u,expressionContext:"property",propertyType:e,propertyKey:v}))}function Nr(s){return bh(s,"paint")}function Of(s){return bh(s,"layout")}function kf(s){let e=[];const a=s.value,r=s.key,d=s.style,u=s.styleSpec;if(ha(a)!=="object")return[new We(r,a,`object expected, ${ha(a)} found`)];a.type||a.ref||e.push(new We(r,a,'either "type" or "ref" is required'));let m=_s(a.type);const v=_s(a.ref);if(a.id){const k=_s(a.id);for(let T=0;T<s.arrayIndex;T++){const P=d.layers[T];_s(P.id)===k&&e.push(new We(r,a.id,`duplicate layer id "${a.id}", previously used at line ${P.id.__line__}`))}}if("ref"in a){let k;["type","source","source-layer","filter","layout"].forEach((T=>{T in a&&e.push(new We(r,a[T],`"${T}" is prohibited for ref layers`))})),d.layers.forEach((T=>{_s(T.id)===v&&(k=T)})),k?k.ref?e.push(new We(r,a.ref,"ref cannot reference another ref layer")):m=_s(k.type):e.push(new We(r,a.ref,`ref layer "${v}" not found`))}else if(m!=="background")if(a.source){const k=d.sources&&d.sources[a.source],T=k&&_s(k.type);k?T==="vector"&&m==="raster"?e.push(new We(r,a.source,`layer "${a.id}" requires a raster source`)):T!=="raster-dem"&&m==="hillshade"||T!=="raster-dem"&&m==="color-relief"?e.push(new We(r,a.source,`layer "${a.id}" requires a raster-dem source`)):T==="raster"&&m!=="raster"?e.push(new We(r,a.source,`layer "${a.id}" requires a vector source`)):T!=="vector"||a["source-layer"]?T==="raster-dem"&&m!=="hillshade"&&m!=="color-relief"?e.push(new We(r,a.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):m!=="line"||!a.paint||!a.paint["line-gradient"]||T==="geojson"&&k.lineMetrics||e.push(new We(r,a,`layer "${a.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new We(r,a,`layer "${a.id}" must specify a "source-layer"`)):e.push(new We(r,a.source,`source "${a.source}" not found`))}else e.push(new We(r,a,'missing required property "source"'));return e=e.concat(ao({key:r,value:a,valueSpec:u.layer,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,objectElementValidators:{"*":()=>[],type:()=>s.validateSpec({key:`${r}.type`,value:a.type,valueSpec:u.layer.type,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,object:a,objectKey:"type"}),filter:Do,layout:k=>ao({layer:a,key:k.key,value:k.value,style:k.style,styleSpec:k.styleSpec,validateSpec:k.validateSpec,objectElementValidators:{"*":T=>Of(An({layerType:m},T))}}),paint:k=>ao({layer:a,key:k.key,value:k.value,style:k.style,styleSpec:k.styleSpec,validateSpec:k.validateSpec,objectElementValidators:{"*":T=>Nr(An({layerType:m},T))}})}})),e}function pi(s){const e=s.value,a=s.key,r=ha(e);return r!=="string"?[new We(a,e,`string expected, ${r} found`)]:[]}const id={promoteId:function({key:s,value:e}){if(ha(e)==="string")return pi({key:s,value:e});{const a=[];for(const r in e)a.push(...pi({key:`${s}.${r}`,value:e[r]}));return a}}};function wh(s){const e=s.value,a=s.key,r=s.styleSpec,d=s.style,u=s.validateSpec;if(!e.type)return[new We(a,e,'"type" is required')];const m=_s(e.type);let v;switch(m){case"vector":case"raster":return v=ao({key:a,value:e,valueSpec:r[`source_${m.replace("-","_")}`],style:s.style,styleSpec:r,objectElementValidators:id,validateSpec:u}),v;case"raster-dem":return v=(function(k){var T;const P=(T=k.sourceName)!==null&&T!==void 0?T:"",z=k.value,R=k.styleSpec,H=R.source_raster_dem,V=k.style;let W=[];const X=ha(z);if(z===void 0)return W;if(X!=="object")return W.push(new We("source_raster_dem",z,`object expected, ${X} found`)),W;const ee=_s(z.encoding)==="custom",ue=["redFactor","greenFactor","blueFactor","baseShift"],ae=k.value.encoding?`"${k.value.encoding}"`:"Default";for(const oe in z)!ee&&ue.includes(oe)?W.push(new We(oe,z[oe],`In "${P}": "${oe}" is only valid when "encoding" is set to "custom". ${ae} encoding found`)):H[oe]?W=W.concat(k.validateSpec({key:oe,value:z[oe],valueSpec:H[oe],validateSpec:k.validateSpec,style:V,styleSpec:R})):W.push(new We(oe,z[oe],`unknown property "${oe}"`));return W})({sourceName:a,value:e,style:s.style,styleSpec:r,validateSpec:u}),v;case"geojson":if(v=ao({key:a,value:e,valueSpec:r.source_geojson,style:d,styleSpec:r,validateSpec:u,objectElementValidators:id}),e.cluster)for(const k in e.clusterProperties){const[T,P]=e.clusterProperties[k],z=typeof T=="string"?[T,["accumulated"],["get",k]]:T;v.push(...Li({key:`${a}.${k}.map`,value:P,expressionContext:"cluster-map"})),v.push(...Li({key:`${a}.${k}.reduce`,value:z,expressionContext:"cluster-reduce"}))}return v;case"video":return ao({key:a,value:e,valueSpec:r.source_video,style:d,validateSpec:u,styleSpec:r});case"image":return ao({key:a,value:e,valueSpec:r.source_image,style:d,validateSpec:u,styleSpec:r});case"canvas":return[new We(a,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ci({key:`${a}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function pn(s){const e=s.value,a=s.styleSpec,r=a.light,d=s.style;let u=[];const m=ha(e);if(e===void 0)return u;if(m!=="object")return u=u.concat([new We("light",e,`object expected, ${m} found`)]),u;for(const v in e){const k=v.match(/^(.*)-transition$/);u=u.concat(k&&r[k[1]]&&r[k[1]].transition?s.validateSpec({key:v,value:e[v],valueSpec:a.transition,validateSpec:s.validateSpec,style:d,styleSpec:a}):r[v]?s.validateSpec({key:v,value:e[v],valueSpec:r[v],validateSpec:s.validateSpec,style:d,styleSpec:a}):[new We(v,e[v],`unknown property "${v}"`)])}return u}function Nd(s){const e=s.value,a=s.styleSpec,r=a.sky,d=s.style,u=ha(e);if(e===void 0)return[];if(u!=="object")return[new We("sky",e,`object expected, ${u} found`)];let m=[];for(const v in e)m=m.concat(r[v]?s.validateSpec({key:v,value:e[v],valueSpec:r[v],style:d,styleSpec:a}):[new We(v,e[v],`unknown property "${v}"`)]);return m}function _f(s){const e=s.value,a=s.styleSpec,r=a.terrain,d=s.style;let u=[];const m=ha(e);if(e===void 0)return u;if(m!=="object")return u=u.concat([new We("terrain",e,`object expected, ${m} found`)]),u;for(const v in e)u=u.concat(r[v]?s.validateSpec({key:v,value:e[v],valueSpec:r[v],validateSpec:s.validateSpec,style:d,styleSpec:a}):[new We(v,e[v],`unknown property "${v}"`)]);return u}function lc(s){let e=[];const a=s.value,r=s.key;if(Array.isArray(a)){const d=[],u=[];for(const m in a)a[m].id&&d.includes(a[m].id)&&e.push(new We(r,a,`all the sprites' ids must be unique, but ${a[m].id} is duplicated`)),d.push(a[m].id),a[m].url&&u.includes(a[m].url)&&e.push(new We(r,a,`all the sprites' URLs must be unique, but ${a[m].url} is duplicated`)),u.push(a[m].url),e=e.concat(ao({key:`${r}[${m}]`,value:a[m],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:s.validateSpec}));return e}return pi({key:r,value:a})}function dp(s){return!!s&&s.constructor===Object}function dc(s){return dp(s.value)?[]:[new We(s.key,s.value,`object expected, ${ha(s.value)} found`)]}const an={"*":()=>[],array:Ps,boolean:function(s){const e=s.value,a=s.key,r=ha(e);return r!=="boolean"?[new We(a,e,`boolean expected, ${r} found`)]:[]},number:zo,color:ir,constants:Lo,enum:ci,filter:Do,function:Mi,layer:kf,object:ao,source:wh,light:pn,sky:Nd,terrain:_f,projection:function(s){const e=s.value,a=s.styleSpec,r=a.projection,d=s.style,u=ha(e);if(e===void 0)return[];if(u!=="object")return[new We("projection",e,`object expected, ${u} found`)];let m=[];for(const v in e)m=m.concat(r[v]?s.validateSpec({key:v,value:e[v],valueSpec:r[v],style:d,styleSpec:a}):[new We(v,e[v],`unknown property "${v}"`)]);return m},projectionDefinition:function(s){const e=s.key;let a=s.value;a=a instanceof String?a.valueOf():a;const r=ha(a);return r!=="array"||(function(d){return Array.isArray(d)&&d.length===3&&typeof d[0]=="string"&&typeof d[1]=="string"&&typeof d[2]=="number"})(a)||(function(d){return!!["interpolate","step","literal"].includes(d[0])})(a)?["array","string"].includes(r)?[]:[new We(e,a,`projection expected, invalid type "${r}" found`)]:[new We(e,a,`projection expected, invalid array ${JSON.stringify(a)} found`)]},string:pi,formatted:function(s){return pi(s).length===0?[]:Li(s)},resolvedImage:function(s){return pi(s).length===0?[]:Li(s)},padding:function(s){const e=s.key,a=s.value;if(ha(a)==="array"){if(a.length<1||a.length>4)return[new We(e,a,`padding requires 1 to 4 values; ${a.length} values found`)];const r={type:"number"};let d=[];for(let u=0;u<a.length;u++)d=d.concat(s.validateSpec({key:`${e}[${u}]`,value:a[u],validateSpec:s.validateSpec,valueSpec:r}));return d}return zo({key:e,value:a,valueSpec:{}})},numberArray:function(s){const e=s.key,a=s.value;if(ha(a)==="array"){const r={type:"number"};if(a.length<1)return[new We(e,a,"array length at least 1 expected, length 0 found")];let d=[];for(let u=0;u<a.length;u++)d=d.concat(s.validateSpec({key:`${e}[${u}]`,value:a[u],validateSpec:s.validateSpec,valueSpec:r}));return d}return zo({key:e,value:a,valueSpec:{}})},colorArray:function(s){const e=s.key,a=s.value;if(ha(a)==="array"){if(a.length<1)return[new We(e,a,"array length at least 1 expected, length 0 found")];let r=[];for(let d=0;d<a.length;d++)r=r.concat(ir({key:`${e}[${d}]`,value:a[d]}));return r}return ir({key:e,value:a})},variableAnchorOffsetCollection:function(s){const e=s.key,a=s.value,r=ha(a),d=s.styleSpec;if(r!=="array"||a.length<1||a.length%2!=0)return[new We(e,a,"variableAnchorOffsetCollection requires a non-empty array of even length")];let u=[];for(let m=0;m<a.length;m+=2)u=u.concat(ci({key:`${e}[${m}]`,value:a[m],valueSpec:d.layout_symbol["text-anchor"]})),u=u.concat(Ps({key:`${e}[${m+1}]`,value:a[m+1],valueSpec:{length:2,value:"number"},validateSpec:s.validateSpec,style:s.style,styleSpec:d}));return u},sprite:lc,state:dc,fontFaces:function(s){const e=s.key,a=s.value,r=s.validateSpec,d=s.styleSpec,u=s.style;if(!dp(a))return[new We(e,a,`object expected, ${ha(a)} found`)];const m=[];for(const v in a){const k=a[v],T=ha(k);if(T==="string")m.push(...pi({key:`${e}.${v}`,value:k}));else if(T==="array"){const P={url:{type:"string",required:!0},"unicode-range":{type:"array",value:"string"}};for(const[z,R]of k.entries())m.push(...ao({key:`${e}.${v}[${z}]`,value:R,valueSpec:P,styleSpec:d,style:u,validateSpec:r}))}else m.push(new We(`${e}.${v}`,k,`string or array expected, ${T} found`))}return m}};function Gr(s){const e=s.value,a=s.valueSpec,r=s.styleSpec;return s.validateSpec=Gr,a.expression&&nd(_s(e))?Mi(s):a.expression&&Hr(ko(e))?Li(s):a.type&&an[a.type]?an[a.type](s):ao(An({},s,{valueSpec:a.type?r[a.type]:a}))}function rd(s){const e=s.value,a=s.key,r=pi(s);return r.length||(e.indexOf("{fontstack}")===-1&&r.push(new We(a,e,'"glyphs" url must include a "{fontstack}" token')),e.indexOf("{range}")===-1&&r.push(new We(a,e,'"glyphs" url must include a "{range}" token'))),r}function _o(s,e=Ne){let a=[];return a=a.concat(Gr({key:"",value:s,valueSpec:e.$root,styleSpec:e,style:s,validateSpec:Gr,objectElementValidators:{glyphs:rd,"*":()=>[]}})),s.constants&&(a=a.concat(Lo({key:"constants",value:s.constants}))),Ol(a)}function ui(s){return function(e){return s(Object.assign({},e,{validateSpec:Gr}))}}function Ol(s){return[].concat(s).sort(((e,a)=>e.line-a.line))}function Io(s){return function(...e){return Ol(s.apply(this,e))}}_o.source=Io(ui(wh)),_o.sprite=Io(ui(lc)),_o.glyphs=Io(ui(rd)),_o.light=Io(ui(pn)),_o.sky=Io(ui(Nd)),_o.terrain=Io(ui(_f)),_o.state=Io(ui(dc)),_o.layer=Io(ui(kf)),_o.filter=Io(ui(Do)),_o.paintProperty=Io(ui(Nr)),_o.layoutProperty=Io(ui(Of));const Au={type:"enum","property-type":"data-constant",expression:{interpolated:!1,parameters:["global-state"]},values:{visible:{},none:{}},transition:!1,default:"visible"};class hd{constructor(e,a){this._globalState=a,this.setValue(e)}evaluate(){var e;return(e=this._literalValue)!==null&&e!==void 0?e:this._compiledValue.evaluate({})}setValue(e){if(e==null||e==="visible"||e==="none")return this._literalValue=e==="none"?"none":"visible",this._compiledValue=void 0,void(this._globalStateRefs=new Set);const a=h(e,Au,this._globalState);if(a.result==="error")throw this._literalValue="visible",this._compiledValue=void 0,new Error(a.value.map((r=>`${r.key}: ${r.message}`)).join(", "));this._literalValue=void 0,this._compiledValue=a.value,this._globalStateRefs=we(a.value.expression)}getGlobalStateRefs(){return this._globalStateRefs}}const Gd=Ne,Dn=_o,rr=Dn.light,If=Dn.sky,xf=Dn.paintProperty,fp=Dn.layoutProperty;function hr(s,e){let a=!1;if(e&&e.length)for(const r of e)s.fire(new Ga(new Error(r.message))),a=!0;return a}class Xh{constructor(e,a,r){const d=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;const m=new Int32Array(this.arrayBuffer);e=m[0],this.d=(a=m[1])+2*(r=m[2]);for(let k=0;k<this.d*this.d;k++){const T=m[3+k],P=m[3+k+1];d.push(T===P?null:m.subarray(T,P))}const v=m[3+d.length+1];this.keys=m.subarray(m[3+d.length],v),this.bboxes=m.subarray(v),this.insert=this._insertReadonly}else{this.d=a+2*r;for(let m=0;m<this.d*this.d;m++)d.push([]);this.keys=[],this.bboxes=[]}this.n=a,this.extent=e,this.padding=r,this.scale=a/e,this.uid=0;const u=r/a*e;this.min=-u,this.max=e+u}insert(e,a,r,d,u){this._forEachCell(a,r,d,u,this._insertCell,this.uid++,void 0,void 0),this.keys.push(e),this.bboxes.push(a),this.bboxes.push(r),this.bboxes.push(d),this.bboxes.push(u)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(e,a,r,d,u,m){this.cells[u].push(m)}query(e,a,r,d,u){const m=this.min,v=this.max;if(e<=m&&a<=m&&v<=r&&v<=d&&!u)return Array.prototype.slice.call(this.keys);{const k=[];return this._forEachCell(e,a,r,d,this._queryCell,k,{},u),k}}_queryCell(e,a,r,d,u,m,v,k){const T=this.cells[u];if(T!==null){const P=this.keys,z=this.bboxes;for(let R=0;R<T.length;R++){const H=T[R];if(v[H]===void 0){const V=4*H;(k?k(z[V+0],z[V+1],z[V+2],z[V+3]):e<=z[V+2]&&a<=z[V+3]&&r>=z[V+0]&&d>=z[V+1])?(v[H]=!0,m.push(P[H])):v[H]=!1}}}}_forEachCell(e,a,r,d,u,m,v,k){const T=this._convertToCellCoord(e),P=this._convertToCellCoord(a),z=this._convertToCellCoord(r),R=this._convertToCellCoord(d);for(let H=T;H<=z;H++)for(let V=P;V<=R;V++){const W=this.d*V+H;if((!k||k(this._convertFromCellCoord(H),this._convertFromCellCoord(V),this._convertFromCellCoord(H+1),this._convertFromCellCoord(V+1)))&&u.call(this,e,a,r,d,W,m,v,k))return}}_convertFromCellCoord(e){return(e-this.padding)/this.scale}_convertToCellCoord(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const e=this.cells,a=3+this.cells.length+1+1;let r=0;for(let m=0;m<this.cells.length;m++)r+=this.cells[m].length;const d=new Int32Array(a+r+this.keys.length+this.bboxes.length);d[0]=this.extent,d[1]=this.n,d[2]=this.padding;let u=a;for(let m=0;m<e.length;m++){const v=e[m];d[3+m]=u,d.set(v,u),u+=v.length}return d[3+e.length]=u,d.set(this.keys,u),u+=this.keys.length,d[3+e.length+1]=u,d.set(this.bboxes,u),u+=this.bboxes.length,d.buffer}static serialize(e,a){const r=e.toArrayBuffer();return a&&a.push(r),{buffer:r}}static deserialize(e){return new Xh(e.buffer)}}const Vo={};function Rt(s,e,a={}){if(Vo[s])throw new Error(`${s} is already registered.`);Object.defineProperty(e,"_classRegistryKey",{value:s,writeable:!1}),Vo[s]={klass:e,omit:a.omit||[],shallow:a.shallow||[]}}Rt("Object",Object),Rt("Set",Set),Rt("TransferableGridIndex",Xh),Rt("Color",ra),Rt("Error",Error),Rt("AJAXError",Se),Rt("ResolvedImage",Pn),Rt("StylePropertyFunction",j),Rt("StyleExpression",vl,{omit:["_evaluator"]}),Rt("ZoomDependentExpression",_),Rt("ZoomConstantExpression",y),Rt("CompoundExpression",Ln,{omit:["_evaluate"]});for(const s in Zh)Zh[s]._classRegistryKey||Rt(`Expression_${s}`,Zh[s]);function Fd(s){return s&&typeof ArrayBuffer!="undefined"&&(s instanceof ArrayBuffer||s.constructor&&s.constructor.name==="ArrayBuffer")}function Tf(s){return s.$name||s.constructor._classRegistryKey}function Di(s){return!(function(e){if(e===null||typeof e!="object")return!1;const a=Tf(e);return!(!a||a==="Object")})(s)&&(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||s instanceof Blob||s instanceof Error||Fd(s)||Ro(s)||ArrayBuffer.isView(s)||s instanceof ImageData)}function lr(s,e){if(Di(s))return(Fd(s)||Ro(s))&&e&&e.push(s),ArrayBuffer.isView(s)&&e&&e.push(s.buffer),s instanceof ImageData&&e&&e.push(s.data.buffer),s;if(Array.isArray(s)){const u=[];for(const m of s)u.push(lr(m,e));return u}if(typeof s!="object")throw new Error("can't serialize object of type "+typeof s);const a=Tf(s);if(!a)throw new Error(`can't serialize object of unregistered class ${s.constructor.name}`);if(!Vo[a])throw new Error(`${a} is not registered.`);const{klass:r}=Vo[a],d=r.serialize?r.serialize(s,e):{};if(r.serialize){if(e&&d===e[e.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const u in s){if(!s.hasOwnProperty(u)||Vo[a].omit.indexOf(u)>=0)continue;const m=s[u];d[u]=Vo[a].shallow.indexOf(u)>=0?m:lr(m,e)}s instanceof Error&&(d.message=s.message)}if(d.$name)throw new Error("$name property is reserved for worker serialization logic.");return a!=="Object"&&(d.$name=a),d}function ld(s){if(Di(s))return s;if(Array.isArray(s))return s.map(ld);if(typeof s!="object")throw new Error("can't deserialize object of type "+typeof s);const e=Tf(s)||"Object";if(!Vo[e])throw new Error(`can't deserialize unregistered class ${e}`);const{klass:a}=Vo[e];if(!a)throw new Error(`can't deserialize unregistered class ${e}`);if(a.deserialize)return a.deserialize(s);const r=Object.create(a.prototype);for(const d of Object.keys(s)){if(d==="$name")continue;const u=s[d];r[d]=Vo[e].shallow.indexOf(d)>=0?u:ld(u)}return r}class Af{constructor(){this.first=!0}update(e,a){const r=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=r,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=r,!0):(this.lastFloorZoom>r?(this.lastIntegerZoom=r+1,this.lastIntegerZoomTime=a):this.lastFloorZoom<r&&(this.lastIntegerZoom=r,this.lastIntegerZoomTime=a),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=r,!0))}}function Fr(s){return/[\u02EA\u02EB\u2E80-\u2FDF\u2FF0-\u303F\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FD-\u30FF\u3105-\u312F\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(s))}function kl(s){return/[\u02EA\u02EB\u1100-\u11FF\u1400-\u167F\u18B0-\u18F5\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u3007\u3012\u3013\u3020-\u302F\u3031-\u303F\u3041-\u3096\u309D-\u30FB\u30FD-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE48\uFE50-\uFE57\uFE5F-\uFE62\uFE67-\uFE6F\uFF00-\uFF07\uFF0A-\uFF0C\uFF0E-\uFF19\uFF1F-\uFF3A\uFF3C\uFF3E\uFF40-\uFF5A\uFFE0-\uFFE2\uFFE4-\uFFE7]|\uD802[\uDD80-\uDD9F]|\uD805[\uDD80-\uDDFF]|\uD806[\uDE00-\uDEBF]|\uD811[\uDC00-\uDE7F]|\uD81B[\uDFE0-\uDFE4\uDFF0-\uDFF6]|[\uD81C-\uD822\uD83D\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD30-\uDEFB]|\uD833[\uDEC0-\uDFCF]|\uD834[\uDC00-\uDDFF\uDEE0-\uDF7F]|\uD836[\uDC00-\uDEAF]|\uD83C[\uDC00-\uDE00\uDF00-\uDFFF]|\uD83E[\uDD00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(s))}function jd(s){return/\s/u.test(String.fromCodePoint(s))}function jr(s){for(const e of s)if(kl(e.codePointAt(0)))return!0;return!1}function Sf(s){for(const e of s)if(!fc(e.codePointAt(0)))return!1;return!0}function Ud(s){const e=s.map((a=>{try{return new RegExp(`\\p{sc=${a}}`,"u").source}catch(r){return null}})).filter((a=>a));return new RegExp(e.join("|"),"u")}const Ur=Ud(["Arab","Dupl","Mong","Ougr","Syrc"]);function fc(s){return!Ur.test(String.fromCodePoint(s))}function qr(s){return!(kl(s)||(e=s,/[\xA7\xA9\xAE\xB1\xBC-\xBE\xD7\xF7\u2016\u2020\u2021\u2030\u2031\u203B\u203C\u2042\u2047-\u2049\u2051\u2100-\u218F\u221E\u2234\u2235\u2300-\u2307\u230C-\u231F\u2324-\u2328\u232B\u237D-\u239A\u23BE-\u23CD\u23CF\u23D1-\u23DB\u23E2-\u2422\u2424-\u24FF\u25A0-\u2619\u2620-\u2767\u2776-\u2793\u2B12-\u2B2F\u2B50-\u2B59\u2BB8-\u2BEB\u3000-\u303F\u30A0-\u30FF\uE000-\uF8FF\uFE30-\uFE6F\uFF00-\uFFEF\uFFFC\uFFFD]|[\uDB80-\uDBFF][\uDC00-\uDFFF]/gim.test(String.fromCodePoint(e))));var e}const Pf=Ud(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function qd(s){return Pf.test(String.fromCodePoint(s))}function Vr(s,e){return!(!e&&qd(s)||/[\u0900-\u0DFF\u0F00-\u109F\u1780-\u17FF]/gim.test(String.fromCodePoint(s)))}function vh(s){for(const e of s)if(qd(e.codePointAt(0)))return!0;return!1}const Bi=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(s){this.pluginStatus=s.pluginStatus,this.pluginURL=s.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(s){if(Bi.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=s.applyArabicShaping,this.processBidirectionalText=s.processBidirectionalText,this.processStyledBidirectionalText=s.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(s,e){return c(this,void 0,void 0,(function*(){if(this.isParsed())return this.getState();if(s.pluginStatus!=="loading")return this.setState(s),s;const a=s.pluginURL,r=new Promise((u=>{this.loadScriptResolve=u}));e(a);const d=new Promise((u=>setTimeout((()=>u()),this.TIMEOUT)));if(yield Promise.race([r,d]),this.isParsed()){const u={pluginStatus:"loaded",pluginURL:a};return this.setState(u),u}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${a}`)}))}};class as{constructor(e,a){this.isSupportedScript=cc,this.zoom=e,a?(this.now=a.now||0,this.fadeDuration=a.fadeDuration||0,this.zoomHistory=a.zoomHistory||new Af,this.transition=a.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Af,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const e=this.zoom,a=e-Math.floor(e),r=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:a+(1-a)*r}:{fromScale:.5,toScale:1,t:1-(1-r)*a}}}function cc(s){return(function(e,a){for(const r of e)if(!Vr(r.codePointAt(0),a))return!1;return!0})(s,Bi.getRTLTextPluginStatus()==="loaded")}const Oh="-transition";class Yh{constructor(e,a,r){this.property=e,this.value=a,this.expression=(function(d,u,m){if(nd(d))return new j(d,u);if(Hr(d)){const v=M(d,u,m);if(v.result==="error")throw new Error(v.value.map((k=>`${k.key}: ${k.message}`)).join(", "));return v.value}{let v=d;return u.type==="color"&&typeof d=="string"?v=ra.parse(d):u.type!=="padding"||typeof d!="number"&&!Array.isArray(d)?u.type!=="numberArray"||typeof d!="number"&&!Array.isArray(d)?u.type!=="colorArray"||typeof d!="string"&&!Array.isArray(d)?u.type==="variableAnchorOffsetCollection"&&Array.isArray(d)?v=Os.parse(d):u.type==="projectionDefinition"&&typeof d=="string"&&(v=ks.parse(d)):v=Nt.parse(d):v=Ba.parse(d):v=Wt.parse(d),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>v}}})(a===void 0?e.specification.default:a,e.specification,r)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(e,a,r){return this.property.possiblyEvaluate(this,e,a,r)}}class Vd{constructor(e,a){this.property=e,this.value=new Yh(e,void 0,a)}transitioned(e,a){return new _l(this.property,this.value,a,Ma({},e.transition,this.transition),e.now)}untransitioned(){return new _l(this.property,this.value,null,{},0)}}class Ef{constructor(e,a){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues),this._globalState=a}getValue(e){return Tn(this._values[e].value.value)}setValue(e,a){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new Vd(this._values[e].property,this._globalState)),this._values[e].value=new Yh(this._values[e].property,a===null?void 0:Tn(a),this._globalState)}getTransition(e){return Tn(this._values[e].transition)}setTransition(e,a){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new Vd(this._values[e].property,this._globalState)),this._values[e].transition=Tn(a)||void 0}serialize(){const e={};for(const a of Object.keys(this._values)){const r=this.getValue(a);r!==void 0&&(e[a]=r);const d=this.getTransition(a);d!==void 0&&(e[`${a}${Oh}`]=d)}return e}transitioned(e,a){const r=new Wd(this._properties);for(const d of Object.keys(this._values))r._values[d]=this._values[d].transitioned(e,a._values[d]);return r}untransitioned(){const e=new Wd(this._properties);for(const a of Object.keys(this._values))e._values[a]=this._values[a].untransitioned();return e}}class _l{constructor(e,a,r,d,u){this.property=e,this.value=a,this.begin=u+d.delay||0,this.end=this.begin+d.duration||0,e.specification.transition&&(d.delay||d.duration)&&(this.prior=r)}possiblyEvaluate(e,a,r){const d=e.now||0,u=this.value.possiblyEvaluate(e,a,r),m=this.prior;if(m){if(d>this.end)return this.prior=null,u;if(this.value.isDataDriven())return this.prior=null,u;if(d<this.begin)return m.possiblyEvaluate(e,a,r);{const v=(d-this.begin)/(this.end-this.begin);return this.property.interpolate(m.possiblyEvaluate(e,a,r),u,Ot(v))}}return u}}class Wd{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,a,r){const d=new Il(this._properties);for(const u of Object.keys(this._values))d._values[u]=this._values[u].possiblyEvaluate(e,a,r);return d}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class pc{constructor(e,a){this._properties=e,this._values=Object.create(e.defaultPropertyValues),this._globalState=a}hasValue(e){return this._values[e].value!==void 0}getValue(e){return Tn(this._values[e].value)}setValue(e,a){this._values[e]=new Yh(this._values[e].property,a===null?void 0:Tn(a),this._globalState)}serialize(){const e={};for(const a of Object.keys(this._values)){const r=this.getValue(a);r!==void 0&&(e[a]=r)}return e}possiblyEvaluate(e,a,r){const d=new Il(this._properties);for(const u of Object.keys(this._values))d._values[u]=this._values[u].possiblyEvaluate(e,a,r);return d}}class mi{constructor(e,a,r){this.property=e,this.value=a,this.parameters=r}isConstant(){return this.value.kind==="constant"}constantOr(e){return this.value.kind==="constant"?this.value.value:e}evaluate(e,a,r,d){return this.property.evaluate(this.value,this.parameters,e,a,r,d)}}class Il{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class Gt{constructor(e){this.specification=e}possiblyEvaluate(e,a){if(e.isDataDriven())throw new Error("Value should not be data driven");return e.expression.evaluate(a)}interpolate(e,a,r){const d=bs[this.specification.type];return d?d(e,a,r):e}}class qt{constructor(e,a){this.specification=e,this.overrides=a}possiblyEvaluate(e,a,r,d){return new mi(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(a,null,{},r,d)}:e.expression,a)}interpolate(e,a,r){if(e.value.kind!=="constant"||a.value.kind!=="constant")return e;if(e.value.value===void 0||a.value.value===void 0)return new mi(this,{kind:"constant",value:void 0},e.parameters);const d=bs[this.specification.type];if(d){const u=d(e.value.value,a.value.value,r);return new mi(this,{kind:"constant",value:u},e.parameters)}return e}evaluate(e,a,r,d,u,m){return e.kind==="constant"?e.value:e.evaluate(a,r,d,u,m)}}class Ri extends qt{possiblyEvaluate(e,a,r,d){if(e.value===void 0)return new mi(this,{kind:"constant",value:void 0},a);if(e.expression.kind==="constant"){const u=e.expression.evaluate(a,null,{},r,d),m=e.property.specification.type==="resolvedImage"&&typeof u!="string"?u.name:u,v=this._calculate(m,m,m,a);return new mi(this,{kind:"constant",value:v},a)}if(e.expression.kind==="camera"){const u=this._calculate(e.expression.evaluate({zoom:a.zoom-1}),e.expression.evaluate({zoom:a.zoom}),e.expression.evaluate({zoom:a.zoom+1}),a);return new mi(this,{kind:"constant",value:u},a)}return new mi(this,e.expression,a)}evaluate(e,a,r,d,u,m){if(e.kind==="source"){const v=e.evaluate(a,r,d,u,m);return this._calculate(v,v,v,a)}return e.kind==="composite"?this._calculate(e.evaluate({zoom:Math.floor(a.zoom)-1},r,d),e.evaluate({zoom:Math.floor(a.zoom)},r,d),e.evaluate({zoom:Math.floor(a.zoom)+1},r,d),a):e.value}_calculate(e,a,r,d){return d.zoom>d.zoomHistory.lastIntegerZoom?{from:e,to:a}:{from:r,to:a}}interpolate(e){return e}}class dd{constructor(e){this.specification=e}possiblyEvaluate(e,a,r,d){if(e.value!==void 0){if(e.expression.kind==="constant"){const u=e.expression.evaluate(a,null,{},r,d);return this._calculate(u,u,u,a)}return this._calculate(e.expression.evaluate(new as(Math.floor(a.zoom-1),a)),e.expression.evaluate(new as(Math.floor(a.zoom),a)),e.expression.evaluate(new as(Math.floor(a.zoom+1),a)),a)}}_calculate(e,a,r,d){return d.zoom>d.zoomHistory.lastIntegerZoom?{from:e,to:a}:{from:r,to:a}}interpolate(e){return e}}class Zd{constructor(e){this.specification=e}possiblyEvaluate(e,a,r,d){return!!e.expression.evaluate(a,null,{},r,d)}interpolate(){return!1}}class sn{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const a in e){const r=e[a];r.specification.overridable&&this.overridableProperties.push(a);const d=this.defaultPropertyValues[a]=new Yh(r,void 0,void 0),u=this.defaultTransitionablePropertyValues[a]=new Vd(r,void 0);this.defaultTransitioningPropertyValues[a]=u.untransitioned(),this.defaultPossiblyEvaluatedValues[a]=d.possiblyEvaluate({})}}}Rt("DataDrivenProperty",qt),Rt("DataConstantProperty",Gt),Rt("CrossFadedDataDrivenProperty",Ri),Rt("CrossFadedProperty",dd),Rt("ColorRampProperty",Zd);class Us extends Ea{constructor(e,a,r){if(super(),this.id=e.id,this.type=e.type,this._globalState=r,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},this._visibilityExpression=(function(d,u){return new hd(d,u)})(this.visibility,r),e.type!=="custom"&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,e.type!=="background"&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter,this._featureFilter=Mt(e.filter,r)),a.layout&&(this._unevaluatedLayout=new pc(a.layout,r)),a.paint)){this._transitionablePaint=new Ef(a.paint,r);for(const d in e.paint)this.setPaintProperty(d,e.paint[d],{validate:!1});for(const d in e.layout)this.setLayoutProperty(d,e.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Il(a.paint)}}setFilter(e){this.filter=e,this._featureFilter=Mt(e,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(e){return e==="visibility"?this.visibility:this._unevaluatedLayout.getValue(e)}getLayoutAffectingGlobalStateRefs(){const e=new Set;for(const a of this._visibilityExpression.getGlobalStateRefs())e.add(a);if(this._unevaluatedLayout)for(const a in this._unevaluatedLayout._values){const r=this._unevaluatedLayout._values[a];for(const d of r.getGlobalStateRefs())e.add(d)}for(const a of this._featureFilter.getGlobalStateRefs())e.add(a);return e}getPaintAffectingGlobalStateRefs(){var e;const a=new globalThis.Map;if(this._transitionablePaint)for(const r in this._transitionablePaint._values){const d=this._transitionablePaint._values[r].value;for(const u of d.getGlobalStateRefs()){const m=(e=a.get(u))!==null&&e!==void 0?e:[];m.push({name:r,value:d.value}),a.set(u,m)}}return a}getVisibilityAffectingGlobalStateRefs(){return this._visibilityExpression.getGlobalStateRefs()}setLayoutProperty(e,a,r={}){if(a==null||!this._validate(fp,`layers.${this.id}.layout.${e}`,e,a,r))return e==="visibility"?(this.visibility=a,this._visibilityExpression.setValue(a),void this.recalculateVisibility()):void this._unevaluatedLayout.setValue(e,a)}getPaintProperty(e){return e.endsWith(Oh)?this._transitionablePaint.getTransition(e.slice(0,-11)):this._transitionablePaint.getValue(e)}setPaintProperty(e,a,r={}){if(a!=null&&this._validate(xf,`layers.${this.id}.paint.${e}`,e,a,r))return!1;if(e.endsWith(Oh))return this._transitionablePaint.setTransition(e.slice(0,-11),a||void 0),!1;{const d=this._transitionablePaint._values[e],u=d.property.specification["property-type"]==="cross-faded-data-driven",m=d.value.isDataDriven(),v=d.value;this._transitionablePaint.setValue(e,a),this._handleSpecialPaintPropertyUpdate(e);const k=this._transitionablePaint._values[e].value;return k.isDataDriven()||m||u||this._handleOverridablePaintPropertyUpdate(e,v,k)}}_handleSpecialPaintPropertyUpdate(e){}_handleOverridablePaintPropertyUpdate(e,a,r){return!1}isHidden(e=this.minzoom,a=!1){return!!(this.minzoom&&e<(a?Math.floor(this.minzoom):this.minzoom))||!!(this.maxzoom&&e>=this.maxzoom)||this._evaluatedVisibility==="none"}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculateVisibility(){this._evaluatedVisibility=this._visibilityExpression.evaluate()}recalculate(e,a){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,a)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,a)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),_i(e,((a,r)=>!(a===void 0||r==="layout"&&!Object.keys(a).length||r==="paint"&&!Object.keys(a).length)))}_validate(e,a,r,d,u={}){return(!u||u.validate!==!1)&&hr(this,e.call(Dn,{key:a,layerType:this.type,objectKey:r,value:d,styleSpec:Ne,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const a=this.paint.get(e);if(a instanceof mi&&to(a.property.specification)&&(a.value.kind==="source"||a.value.kind==="composite")&&a.value.isStateDependent)return!0}return!1}}let $s;var Xd={get paint(){return $s=$s||new sn({"raster-opacity":new Gt(Ne.paint_raster["raster-opacity"]),"raster-hue-rotate":new Gt(Ne.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Gt(Ne.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Gt(Ne.paint_raster["raster-brightness-max"]),"raster-saturation":new Gt(Ne.paint_raster["raster-saturation"]),"raster-contrast":new Gt(Ne.paint_raster["raster-contrast"]),"raster-resampling":new Gt(Ne.paint_raster["raster-resampling"]),"raster-fade-duration":new Gt(Ne.paint_raster["raster-fade-duration"])})}};class kh extends Us{constructor(e,a){super(e,Xd,a)}}const _a={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Qa{constructor(e,a){this._structArray=e,this._pos1=a*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class va{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,a){return e._trim(),a&&(e.isTransferred=!0,a.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const a=Object.create(this.prototype);return a.arrayBuffer=e.arrayBuffer,a.length=e.length,a.capacity=e.arrayBuffer.byteLength/a.bytesPerElement,a._refreshViews(),a}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const a=this.uint8;this._refreshViews(),a&&this.uint8.set(a)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Hs(s,e=1){let a=0,r=0;return{members:s.map((d=>{const u=_a[d.type].BYTES_PER_ELEMENT,m=a=Hi(a,Math.max(e,u)),v=d.components||1;return r=Math.max(r,u),a+=u*v,{name:d.name,type:d.type,components:v,offset:m}})),size:Hi(a,Math.max(r,e)),alignment:e}}function Hi(s,e){return Math.ceil(s/e)*e}class dr extends va{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,a){const r=this.length;return this.resize(r+1),this.emplace(r,e,a)}emplace(e,a,r){const d=2*e;return this.int16[d+0]=a,this.int16[d+1]=r,e}}dr.prototype.bytesPerElement=4,Rt("StructArrayLayout2i4",dr);class xl extends va{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,a,r){const d=this.length;return this.resize(d+1),this.emplace(d,e,a,r)}emplace(e,a,r,d){const u=3*e;return this.int16[u+0]=a,this.int16[u+1]=r,this.int16[u+2]=d,e}}xl.prototype.bytesPerElement=6,Rt("StructArrayLayout3i6",xl);class Tl extends va{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,a,r,d){const u=this.length;return this.resize(u+1),this.emplace(u,e,a,r,d)}emplace(e,a,r,d,u){const m=4*e;return this.int16[m+0]=a,this.int16[m+1]=r,this.int16[m+2]=d,this.int16[m+3]=u,e}}Tl.prototype.bytesPerElement=8,Rt("StructArrayLayout4i8",Tl);class _h extends va{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,a,r,d,u,m){const v=this.length;return this.resize(v+1),this.emplace(v,e,a,r,d,u,m)}emplace(e,a,r,d,u,m,v){const k=6*e;return this.int16[k+0]=a,this.int16[k+1]=r,this.int16[k+2]=d,this.int16[k+3]=u,this.int16[k+4]=m,this.int16[k+5]=v,e}}_h.prototype.bytesPerElement=12,Rt("StructArrayLayout2i4i12",_h);class uc extends va{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,a,r,d,u,m){const v=this.length;return this.resize(v+1),this.emplace(v,e,a,r,d,u,m)}emplace(e,a,r,d,u,m,v){const k=4*e,T=8*e;return this.int16[k+0]=a,this.int16[k+1]=r,this.uint8[T+4]=d,this.uint8[T+5]=u,this.uint8[T+6]=m,this.uint8[T+7]=v,e}}uc.prototype.bytesPerElement=8,Rt("StructArrayLayout2i4ub8",uc);class Es extends va{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,a){const r=this.length;return this.resize(r+1),this.emplace(r,e,a)}emplace(e,a,r){const d=2*e;return this.float32[d+0]=a,this.float32[d+1]=r,e}}Es.prototype.bytesPerElement=8,Rt("StructArrayLayout2f8",Es);class fr extends va{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,a,r,d,u,m,v,k,T,P){const z=this.length;return this.resize(z+1),this.emplace(z,e,a,r,d,u,m,v,k,T,P)}emplace(e,a,r,d,u,m,v,k,T,P,z){const R=10*e;return this.uint16[R+0]=a,this.uint16[R+1]=r,this.uint16[R+2]=d,this.uint16[R+3]=u,this.uint16[R+4]=m,this.uint16[R+5]=v,this.uint16[R+6]=k,this.uint16[R+7]=T,this.uint16[R+8]=P,this.uint16[R+9]=z,e}}fr.prototype.bytesPerElement=20,Rt("StructArrayLayout10ui20",fr);class fd extends va{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,a,r,d,u,m,v,k){const T=this.length;return this.resize(T+1),this.emplace(T,e,a,r,d,u,m,v,k)}emplace(e,a,r,d,u,m,v,k,T){const P=8*e;return this.uint16[P+0]=a,this.uint16[P+1]=r,this.uint16[P+2]=d,this.uint16[P+3]=u,this.uint16[P+4]=m,this.uint16[P+5]=v,this.uint16[P+6]=k,this.uint16[P+7]=T,e}}fd.prototype.bytesPerElement=16,Rt("StructArrayLayout8ui16",fd);class cd extends va{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,a,r,d,u,m,v,k,T,P,z,R){const H=this.length;return this.resize(H+1),this.emplace(H,e,a,r,d,u,m,v,k,T,P,z,R)}emplace(e,a,r,d,u,m,v,k,T,P,z,R,H){const V=12*e;return this.int16[V+0]=a,this.int16[V+1]=r,this.int16[V+2]=d,this.int16[V+3]=u,this.uint16[V+4]=m,this.uint16[V+5]=v,this.uint16[V+6]=k,this.uint16[V+7]=T,this.int16[V+8]=P,this.int16[V+9]=z,this.int16[V+10]=R,this.int16[V+11]=H,e}}cd.prototype.bytesPerElement=24,Rt("StructArrayLayout4i4ui4i24",cd);class Yd extends va{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,a,r){const d=this.length;return this.resize(d+1),this.emplace(d,e,a,r)}emplace(e,a,r,d){const u=3*e;return this.float32[u+0]=a,this.float32[u+1]=r,this.float32[u+2]=d,e}}Yd.prototype.bytesPerElement=12,Rt("StructArrayLayout3f12",Yd);class $d extends va{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const a=this.length;return this.resize(a+1),this.emplace(a,e)}emplace(e,a){return this.uint32[1*e+0]=a,e}}$d.prototype.bytesPerElement=4,Rt("StructArrayLayout1ul4",$d);class Kd extends va{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,a,r,d,u,m,v,k,T){const P=this.length;return this.resize(P+1),this.emplace(P,e,a,r,d,u,m,v,k,T)}emplace(e,a,r,d,u,m,v,k,T,P){const z=10*e,R=5*e;return this.int16[z+0]=a,this.int16[z+1]=r,this.int16[z+2]=d,this.int16[z+3]=u,this.int16[z+4]=m,this.int16[z+5]=v,this.uint32[R+3]=k,this.uint16[z+8]=T,this.uint16[z+9]=P,e}}Kd.prototype.bytesPerElement=20,Rt("StructArrayLayout6i1ul2ui20",Kd);class $h extends va{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,a,r,d,u,m){const v=this.length;return this.resize(v+1),this.emplace(v,e,a,r,d,u,m)}emplace(e,a,r,d,u,m,v){const k=6*e;return this.int16[k+0]=a,this.int16[k+1]=r,this.int16[k+2]=d,this.int16[k+3]=u,this.int16[k+4]=m,this.int16[k+5]=v,e}}$h.prototype.bytesPerElement=12,Rt("StructArrayLayout2i2i2i12",$h);class Ih extends va{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,a,r,d,u){const m=this.length;return this.resize(m+1),this.emplace(m,e,a,r,d,u)}emplace(e,a,r,d,u,m){const v=4*e,k=8*e;return this.float32[v+0]=a,this.float32[v+1]=r,this.float32[v+2]=d,this.int16[k+6]=u,this.int16[k+7]=m,e}}Ih.prototype.bytesPerElement=16,Rt("StructArrayLayout2f1f2i16",Ih);class so extends va{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,a,r,d,u,m){const v=this.length;return this.resize(v+1),this.emplace(v,e,a,r,d,u,m)}emplace(e,a,r,d,u,m,v){const k=16*e,T=4*e,P=8*e;return this.uint8[k+0]=a,this.uint8[k+1]=r,this.float32[T+1]=d,this.float32[T+2]=u,this.int16[P+6]=m,this.int16[P+7]=v,e}}so.prototype.bytesPerElement=16,Rt("StructArrayLayout2ub2f2i16",so);class Ns extends va{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,a,r){const d=this.length;return this.resize(d+1),this.emplace(d,e,a,r)}emplace(e,a,r,d){const u=3*e;return this.uint16[u+0]=a,this.uint16[u+1]=r,this.uint16[u+2]=d,e}}Ns.prototype.bytesPerElement=6,Rt("StructArrayLayout3ui6",Ns);class Wr extends va{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,a,r,d,u,m,v,k,T,P,z,R,H,V,W,X,ee){const ue=this.length;return this.resize(ue+1),this.emplace(ue,e,a,r,d,u,m,v,k,T,P,z,R,H,V,W,X,ee)}emplace(e,a,r,d,u,m,v,k,T,P,z,R,H,V,W,X,ee,ue){const ae=24*e,oe=12*e,ge=48*e;return this.int16[ae+0]=a,this.int16[ae+1]=r,this.uint16[ae+2]=d,this.uint16[ae+3]=u,this.uint32[oe+2]=m,this.uint32[oe+3]=v,this.uint32[oe+4]=k,this.uint16[ae+10]=T,this.uint16[ae+11]=P,this.uint16[ae+12]=z,this.float32[oe+7]=R,this.float32[oe+8]=H,this.uint8[ge+36]=V,this.uint8[ge+37]=W,this.uint8[ge+38]=X,this.uint32[oe+10]=ee,this.int16[ae+22]=ue,e}}Wr.prototype.bytesPerElement=48,Rt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Wr);class Al extends va{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,a,r,d,u,m,v,k,T,P,z,R,H,V,W,X,ee,ue,ae,oe,ge,ve,Fe,ot,et,lt,At,yt){const ut=this.length;return this.resize(ut+1),this.emplace(ut,e,a,r,d,u,m,v,k,T,P,z,R,H,V,W,X,ee,ue,ae,oe,ge,ve,Fe,ot,et,lt,At,yt)}emplace(e,a,r,d,u,m,v,k,T,P,z,R,H,V,W,X,ee,ue,ae,oe,ge,ve,Fe,ot,et,lt,At,yt,ut){const Ke=32*e,xt=16*e;return this.int16[Ke+0]=a,this.int16[Ke+1]=r,this.int16[Ke+2]=d,this.int16[Ke+3]=u,this.int16[Ke+4]=m,this.int16[Ke+5]=v,this.int16[Ke+6]=k,this.int16[Ke+7]=T,this.uint16[Ke+8]=P,this.uint16[Ke+9]=z,this.uint16[Ke+10]=R,this.uint16[Ke+11]=H,this.uint16[Ke+12]=V,this.uint16[Ke+13]=W,this.uint16[Ke+14]=X,this.uint16[Ke+15]=ee,this.uint16[Ke+16]=ue,this.uint16[Ke+17]=ae,this.uint16[Ke+18]=oe,this.uint16[Ke+19]=ge,this.uint16[Ke+20]=ve,this.uint16[Ke+21]=Fe,this.uint16[Ke+22]=ot,this.uint32[xt+12]=et,this.float32[xt+13]=lt,this.float32[xt+14]=At,this.uint16[Ke+30]=yt,this.uint16[Ke+31]=ut,e}}Al.prototype.bytesPerElement=64,Rt("StructArrayLayout8i15ui1ul2f2ui64",Al);class Sl extends va{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const a=this.length;return this.resize(a+1),this.emplace(a,e)}emplace(e,a){return this.float32[1*e+0]=a,e}}Sl.prototype.bytesPerElement=4,Rt("StructArrayLayout1f4",Sl);class pd extends va{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,a,r){const d=this.length;return this.resize(d+1),this.emplace(d,e,a,r)}emplace(e,a,r,d){const u=3*e;return this.uint16[6*e+0]=a,this.float32[u+1]=r,this.float32[u+2]=d,e}}pd.prototype.bytesPerElement=12,Rt("StructArrayLayout1ui2f12",pd);class cr extends va{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,a,r){const d=this.length;return this.resize(d+1),this.emplace(d,e,a,r)}emplace(e,a,r,d){const u=4*e;return this.uint32[2*e+0]=a,this.uint16[u+2]=r,this.uint16[u+3]=d,e}}cr.prototype.bytesPerElement=8,Rt("StructArrayLayout1ul2ui8",cr);class g extends va{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,a){const r=this.length;return this.resize(r+1),this.emplace(r,e,a)}emplace(e,a,r){const d=2*e;return this.uint16[d+0]=a,this.uint16[d+1]=r,e}}g.prototype.bytesPerElement=4,Rt("StructArrayLayout2ui4",g);class t extends va{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const a=this.length;return this.resize(a+1),this.emplace(a,e)}emplace(e,a){return this.uint16[1*e+0]=a,e}}t.prototype.bytesPerElement=2,Rt("StructArrayLayout1ui2",t);class o extends va{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,a,r,d){const u=this.length;return this.resize(u+1),this.emplace(u,e,a,r,d)}emplace(e,a,r,d,u){const m=4*e;return this.float32[m+0]=a,this.float32[m+1]=r,this.float32[m+2]=d,this.float32[m+3]=u,e}}o.prototype.bytesPerElement=16,Rt("StructArrayLayout4f16",o);class l extends Qa{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new re(this.anchorPointX,this.anchorPointY)}}l.prototype.size=20;class p extends Kd{get(e){return new l(this,e)}}Rt("CollisionBoxArray",p);class w extends Qa{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(e){this._structArray.uint8[this._pos1+37]=e}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(e){this._structArray.uint8[this._pos1+38]=e}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(e){this._structArray.uint32[this._pos4+10]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}w.prototype.size=48;class O extends Wr{get(e){return new w(this,e)}}Rt("PlacedSymbolArray",O);class I extends Qa{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(e){this._structArray.uint32[this._pos4+12]=e}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}I.prototype.size=64;class A extends Al{get(e){return new I(this,e)}}Rt("SymbolInstanceArray",A);class C extends Sl{getoffsetX(e){return this.float32[1*e+0]}}Rt("GlyphOffsetArray",C);class D extends xl{getx(e){return this.int16[3*e+0]}gety(e){return this.int16[3*e+1]}gettileUnitDistanceFromAnchor(e){return this.int16[3*e+2]}}Rt("SymbolLineVertexArray",D);class F extends Qa{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}F.prototype.size=12;class G extends pd{get(e){return new F(this,e)}}Rt("TextAnchorOffsetArray",G);class Z extends Qa{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Z.prototype.size=8;class Q extends cr{get(e){return new Z(this,e)}}Rt("FeatureIndexArray",Q);class ie extends dr{}class de extends dr{}class le extends dr{}class pe extends _h{}class be extends uc{}class ce extends Es{}class ye extends fr{}class ke extends fd{}class me extends cd{}class Ee extends Yd{}class Ze extends $d{}class Ge extends $h{}class qe extends so{}class Ve extends Ns{}class bt extends g{}const vt=Hs([{name:"a_pos",components:2,type:"Int16"}],4),{members:ht}=vt;class Tt{constructor(e=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=e}prepareSegment(e,a,r,d){const u=this.segments[this.segments.length-1];return e>Tt.MAX_VERTEX_ARRAY_LENGTH&&As(`Max vertices per segment is ${Tt.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Tt.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!u||u.vertexLength+e>Tt.MAX_VERTEX_ARRAY_LENGTH||u.sortKey!==d?this.createNewSegment(a,r,d):u}createNewSegment(e,a,r){const d={vertexOffset:e.length,primitiveOffset:a.length,vertexLength:0,primitiveLength:0,vaos:{}};return r!==void 0&&(d.sortKey=r),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(d),d}getOrCreateLatestSegment(e,a,r){return this.prepareSegment(0,e,a,r)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const e of this.segments)for(const a in e.vaos)e.vaos[a].destroy()}static simpleSegment(e,a,r,d){return new Tt([{vertexOffset:e,primitiveOffset:a,vertexLength:r,primitiveLength:d,vaos:{},sortKey:0}])}}function la(s,e){return 256*(s=Ht(Math.floor(s),0,255))+Ht(Math.floor(e),0,255)}Tt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Rt("SegmentVector",Tt);const Ja=Hs([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),ws=Hs([{name:"a_dasharray_from",components:4,type:"Uint16"},{name:"a_dasharray_to",components:4,type:"Uint16"}]);var ps,Cs,rs,qs={exports:{}},Ms={exports:{}},Nn={exports:{}},Ks=(function(){if(rs)return qs.exports;rs=1;var s=(ps||(ps=1,Ms.exports=function(a,r){var d,u,m,v,k,T,P,z;for(u=a.length-(d=3&a.length),m=r,k=3432918353,T=461845907,z=0;z<u;)P=255&a.charCodeAt(z)|(255&a.charCodeAt(++z))<<8|(255&a.charCodeAt(++z))<<16|(255&a.charCodeAt(++z))<<24,++z,m=27492+(65535&(v=5*(65535&(m=(m^=P=(65535&(P=(P=(65535&P)*k+(((P>>>16)*k&65535)<<16)&4294967295)<<15|P>>>17))*T+(((P>>>16)*T&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(P=0,d){case 3:P^=(255&a.charCodeAt(z+2))<<16;case 2:P^=(255&a.charCodeAt(z+1))<<8;case 1:m^=P=(65535&(P=(P=(65535&(P^=255&a.charCodeAt(z)))*k+(((P>>>16)*k&65535)<<16)&4294967295)<<15|P>>>17))*T+(((P>>>16)*T&65535)<<16)&4294967295}return m^=a.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0}),Ms.exports),e=(Cs||(Cs=1,Nn.exports=function(a,r){for(var d,u=a.length,m=r^u,v=0;u>=4;)d=1540483477*(65535&(d=255&a.charCodeAt(v)|(255&a.charCodeAt(++v))<<8|(255&a.charCodeAt(++v))<<16|(255&a.charCodeAt(++v))<<24))+((1540483477*(d>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(d=1540483477*(65535&(d^=d>>>24))+((1540483477*(d>>>16)&65535)<<16)),u-=4,++v;switch(u){case 3:m^=(255&a.charCodeAt(v+2))<<16;case 2:m^=(255&a.charCodeAt(v+1))<<8;case 1:m=1540483477*(65535&(m^=255&a.charCodeAt(v)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0}),Nn.exports);return qs.exports=s,qs.exports.murmur3=s,qs.exports.murmur2=e,qs.exports})(),Qs=fe(Ks);class Gn{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,a,r,d){this.ids.push(Zr(e)),this.positions.push(a,r,d)}getPositions(e){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const a=Zr(e);let r=0,d=this.ids.length-1;for(;r<d;){const m=r+d>>1;this.ids[m]>=a?d=m:r=m+1}const u=[];for(;this.ids[r]===a;)u.push({index:this.positions[3*r],start:this.positions[3*r+1],end:this.positions[3*r+2]}),r++;return u}static serialize(e,a){const r=new Float64Array(e.ids),d=new Uint32Array(e.positions);return Xr(r,d,0,r.length-1),a&&a.push(r.buffer,d.buffer),{ids:r,positions:d}}static deserialize(e){const a=new Gn;return a.ids=e.ids,a.positions=e.positions,a.indexed=!0,a}}function Zr(s){const e=+s;return!isNaN(e)&&e<=Number.MAX_SAFE_INTEGER?e:Qs(String(s))}function Xr(s,e,a,r){for(;a<r;){const d=s[a+r>>1];let u=a-1,m=r+1;for(;;){do u++;while(s[u]<d);do m--;while(s[m]>d);if(u>=m)break;pr(s,u,m),pr(e,3*u,3*m),pr(e,3*u+1,3*m+1),pr(e,3*u+2,3*m+2)}m-a<r-m?(Xr(s,e,a,m),a=m+1):(Xr(s,e,m+1,r),r=m)}}function pr(s,e,a){const r=s[e];s[e]=s[a],s[a]=r}Rt("FeaturePositionMap",Gn);class Wo{constructor(e,a){this.gl=e.gl,this.location=a}}class Pl extends Wo{constructor(e,a){super(e,a),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}}class ud extends Wo{constructor(e,a){super(e,a),this.current=[0,0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}}class ur extends Wo{constructor(e,a){super(e,a),this.current=ra.transparent}set(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}}const Zo=new Float32Array(16);function gi(s){return[la(255*s.r,255*s.g),la(255*s.b,255*s.a)]}class Ni{constructor(e,a,r){this.value=e,this.uniformNames=a.map((d=>`u_${d}`)),this.type=r}setUniform(e,a,r){e.set(r.constantOr(this.value))}getBinding(e,a,r){return this.type==="color"?new ur(e,a):new Pl(e,a)}}class Gi{constructor(e,a){this.uniformNames=a.map((r=>`u_${r}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(e,a){this.pixelRatioFrom=a.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=a.tlbr,this.patternTo=e.tlbr}setConstantDashPositions(e,a){this.dashTo=[0,e.y,e.height,e.width],this.dashFrom=[0,a.y,a.height,a.width]}setUniform(e,a,r,d){let u=null;d==="u_pattern_to"?u=this.patternTo:d==="u_pattern_from"?u=this.patternFrom:d==="u_dasharray_to"?u=this.dashTo:d==="u_dasharray_from"?u=this.dashFrom:d==="u_pixel_ratio_to"?u=this.pixelRatioTo:d==="u_pixel_ratio_from"&&(u=this.pixelRatioFrom),u!==null&&e.set(u)}getBinding(e,a,r){return r.substr(0,9)==="u_pattern"||r.substr(0,12)==="u_dasharray_"?new ud(e,a):new Pl(e,a)}}class ss{constructor(e,a,r,d){this.expression=e,this.type=r,this.maxValue=0,this.paintVertexAttributes=a.map((u=>({name:`a_${u}`,type:"Float32",components:r==="color"?2:1,offset:0}))),this.paintVertexArray=new d}populatePaintArray(e,a,r){const d=this.paintVertexArray.length,u=this.expression.evaluate(new as(0,r),a,{},r.canonical,[],r.formattedSection);this.paintVertexArray.resize(e),this._setPaintValue(d,e,u)}updatePaintArray(e,a,r,d,u){const m=this.expression.evaluate(new as(0,u),r,d);this._setPaintValue(e,a,m)}_setPaintValue(e,a,r){if(this.type==="color"){const d=gi(r);for(let u=e;u<a;u++)this.paintVertexArray.emplace(u,d[0],d[1])}else{for(let d=e;d<a;d++)this.paintVertexArray.emplace(d,r);this.maxValue=Math.max(this.maxValue,Math.abs(r))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class us{constructor(e,a,r,d,u,m){this.expression=e,this.uniformNames=a.map((v=>`u_${v}_t`)),this.type=r,this.useIntegerZoom=d,this.zoom=u,this.maxValue=0,this.paintVertexAttributes=a.map((v=>({name:`a_${v}`,type:"Float32",components:r==="color"?4:2,offset:0}))),this.paintVertexArray=new m}populatePaintArray(e,a,r){const d=this.expression.evaluate(new as(this.zoom,r),a,{},r.canonical,[],r.formattedSection),u=this.expression.evaluate(new as(this.zoom+1,r),a,{},r.canonical,[],r.formattedSection),m=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(m,e,d,u)}updatePaintArray(e,a,r,d,u){const m=this.expression.evaluate(new as(this.zoom,u),r,d),v=this.expression.evaluate(new as(this.zoom+1,u),r,d);this._setPaintValue(e,a,m,v)}_setPaintValue(e,a,r,d){if(this.type==="color"){const u=gi(r),m=gi(d);for(let v=e;v<a;v++)this.paintVertexArray.emplace(v,u[0],u[1],m[0],m[1])}else{for(let u=e;u<a;u++)this.paintVertexArray.emplace(u,r,d);this.maxValue=Math.max(this.maxValue,Math.abs(r),Math.abs(d))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,a){const r=this.useIntegerZoom?Math.floor(a.zoom):a.zoom,d=Ht(this.expression.interpolationFactor(r,this.zoom,this.zoom+1),0,1);e.set(d)}getBinding(e,a,r){return new Pl(e,a)}}class un{constructor(e,a,r,d,u,m){this.expression=e,this.type=a,this.useIntegerZoom=r,this.zoom=d,this.layerId=m,this.zoomInPaintVertexArray=new u,this.zoomOutPaintVertexArray=new u}populatePaintArray(e,a,r){const d=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(d,e,this.getPositionIds(a),r)}updatePaintArray(e,a,r,d,u){this._setPaintValues(e,a,this.getPositionIds(r),u)}_setPaintValues(e,a,r,d){const u=this.getPositions(d);if(!u||!r)return;const m=u[r.min],v=u[r.mid],k=u[r.max];if(m&&v&&k)for(let T=e;T<a;T++)this.emplace(this.zoomInPaintVertexArray,T,v,m),this.emplace(this.zoomOutPaintVertexArray,T,v,k)}upload(e){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){const a=this.getVertexAttributes();this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,a,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,a,this.expression.isStateDependent)}}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class On extends un{getPositions(e){return e.imagePositions}getPositionIds(e){return e.patterns&&e.patterns[this.layerId]}getVertexAttributes(){return Ja.members}emplace(e,a,r,d){e.emplace(a,r.tlbr[0],r.tlbr[1],r.tlbr[2],r.tlbr[3],d.tlbr[0],d.tlbr[1],d.tlbr[2],d.tlbr[3],r.pixelRatio,d.pixelRatio)}}class Cf extends un{getPositions(e){return e.dashPositions}getPositionIds(e){return e.dashes&&e.dashes[this.layerId]}getVertexAttributes(){return ws.members}emplace(e,a,r,d){e.emplace(a,0,r.y,r.height,r.width,0,d.y,d.height,d.width)}}class Mf{constructor(e,a,r){this.binders={},this._buffers=[];const d=[];for(const u in e.paint._values){if(!r(u))continue;const m=e.paint.get(u);if(!(m instanceof mi&&to(m.property.specification)))continue;const v=cp(u,e.type),k=m.value,T=m.property.specification.type,P=m.property.useIntegerZoom,z=m.property.specification["property-type"],R=z==="cross-faded"||z==="cross-faded-data-driven";if(k.kind==="constant")this.binders[u]=R?new Gi(k.value,v):new Ni(k.value,v,T),d.push(`/u_${u}`);else if(k.kind==="source"||R){const H=Qh(u,T,"source");this.binders[u]=R?u==="line-dasharray"?new Cf(k,T,P,a,H,e.id):new On(k,T,P,a,H,e.id):new ss(k,v,T,H),d.push(`/a_${u}`)}else{const H=Qh(u,T,"composite");this.binders[u]=new us(k,v,T,P,a,H),d.push(`/z_${u}`)}}this.cacheKey=d.sort().join("")}getMaxValue(e){const a=this.binders[e];return a instanceof ss||a instanceof us?a.maxValue:0}populatePaintArrays(e,a,r){for(const d in this.binders){const u=this.binders[d];(u instanceof ss||u instanceof us||u instanceof un)&&u.populatePaintArray(e,a,r)}}setConstantPatternPositions(e,a){for(const r in this.binders){const d=this.binders[r];d instanceof Gi&&d.setConstantPatternPositions(e,a)}}setConstantDashPositions(e,a){for(const r in this.binders){const d=this.binders[r];d instanceof Gi&&d.setConstantDashPositions(e,a)}}updatePaintArrays(e,a,r,d,u){let m=!1;for(const v in e){const k=a.getPositions(v);for(const T of k){const P=r.feature(T.index);for(const z in this.binders){const R=this.binders[z];if((R instanceof ss||R instanceof us||R instanceof un)&&R.expression.isStateDependent===!0){const H=d.paint.get(z);R.expression=H.value,R.updatePaintArray(T.start,T.end,P,e[v],u),m=!0}}}}return m}defines(){const e=[];for(const a in this.binders){const r=this.binders[a];(r instanceof Ni||r instanceof Gi)&&e.push(...r.uniformNames.map((d=>`#define HAS_UNIFORM_${d}`)))}return e}getBinderAttributes(){const e=[];for(const a in this.binders){const r=this.binders[a];if(r instanceof ss||r instanceof us)for(let d=0;d<r.paintVertexAttributes.length;d++)e.push(r.paintVertexAttributes[d].name);else if(r instanceof un){const d=r.getVertexAttributes();for(const u of d)e.push(u.name)}}return e}getBinderUniforms(){const e=[];for(const a in this.binders){const r=this.binders[a];if(r instanceof Ni||r instanceof Gi||r instanceof us)for(const d of r.uniformNames)e.push(d)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e,a){const r=[];for(const d in this.binders){const u=this.binders[d];if(u instanceof Ni||u instanceof Gi||u instanceof us){for(const m of u.uniformNames)if(a[m]){const v=u.getBinding(e,a[m],m);r.push({name:m,property:d,binding:v})}}}return r}setUniforms(e,a,r,d){for(const{name:u,property:m,binding:v}of a)this.binders[m].setUniform(v,d,r.get(m),u)}updatePaintBuffers(e){this._buffers=[];for(const a in this.binders){const r=this.binders[a];if(e&&r instanceof un){const d=e.fromScale===2?r.zoomInPaintVertexBuffer:r.zoomOutPaintVertexBuffer;d&&this._buffers.push(d)}else(r instanceof ss||r instanceof us)&&r.paintVertexBuffer&&this._buffers.push(r.paintVertexBuffer)}}upload(e){for(const a in this.binders){const r=this.binders[a];(r instanceof ss||r instanceof us||r instanceof un)&&r.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const a=this.binders[e];(a instanceof ss||a instanceof us||a instanceof un)&&a.destroy()}}}class Kh{constructor(e,a,r=()=>!0){this.programConfigurations={};for(const d of e)this.programConfigurations[d.id]=new Mf(d,a,r);this.needsUpload=!1,this._featureMap=new Gn,this._bufferOffset=0}populatePaintArrays(e,a,r,d){for(const u in this.programConfigurations)this.programConfigurations[u].populatePaintArrays(e,a,d);a.id!==void 0&&this._featureMap.add(a.id,r,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,a,r,d){for(const u of r)this.needsUpload=this.programConfigurations[u.id].updatePaintArrays(e,this._featureMap,a,u,d)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const a in this.programConfigurations)this.programConfigurations[a].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}function cp(s,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-dasharray":["dasharray_to","dasharray_from"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[s]||[s.replace(`${e}-`,"").replace(/-/g,"_")]}function Qh(s,e,a){const r={color:{source:Es,composite:o},number:{source:Sl,composite:Es}},d=(function(u){return{"line-pattern":{source:ye,composite:ye},"fill-pattern":{source:ye,composite:ye},"fill-extrusion-pattern":{source:ye,composite:ye},"line-dasharray":{source:ke,composite:ke}}[u]})(s);return d&&d[a]||r[e][a]}Rt("ConstantBinder",Ni),Rt("CrossFadedConstantBinder",Gi),Rt("SourceExpressionBinder",ss),Rt("CrossFadedPatternBinder",On),Rt("CrossFadedDasharrayBinder",Cf),Rt("CompositeExpressionBinder",us),Rt("ProgramConfiguration",Mf,{omit:["_buffers"]}),Rt("ProgramConfigurationSet",Kh);const Lf=Math.pow(2,14)-1,xh=-Lf-1;function Th(s){const e=jt/s.extent,a=s.loadGeometry();for(let r=0;r<a.length;r++){const d=a[r];for(let u=0;u<d.length;u++){const m=d[u],v=Math.round(m.x*e),k=Math.round(m.y*e);m.x=Ht(v,xh,Lf),m.y=Ht(k,xh,Lf),(v<m.x||v>m.x+1||k<m.y||k>m.y+1)&&As("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return a}function mr(s,e){return{type:s.type,id:s.id,properties:s.properties,geometry:e?Th(s):[]}}const zf=-32768;function Qd(s,e,a,r,d){s.emplaceBack(zf+8*e+r,zf+8*a+d)}class Jd{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((a=>a.id)),this.index=e.index,this.hasDependencies=!1,this.layoutVertexArray=new de,this.indexArray=new Ve,this.segments=new Tt,this.programConfigurations=new Kh(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter((a=>a.isStateDependent())).map((a=>a.id))}populate(e,a,r){const d=this.layers[0],u=[];let m=null,v=!1,k=d.type==="heatmap";if(d.type==="circle"){const P=d;m=P.layout.get("circle-sort-key"),v=!m.isConstant(),k=k||P.paint.get("circle-pitch-alignment")==="map"}const T=k?a.subdivisionGranularity.circle:1;for(const{feature:P,id:z,index:R,sourceLayerIndex:H}of e){const V=this.layers[0]._featureFilter.needGeometry,W=mr(P,V);if(!this.layers[0]._featureFilter.filter(new as(this.zoom),W,r))continue;const X=v?m.evaluate(W,{},r):void 0,ee={id:z,properties:P.properties,type:P.type,sourceLayerIndex:H,index:R,geometry:V?W.geometry:Th(P),patterns:{},sortKey:X};u.push(ee)}v&&u.sort(((P,z)=>P.sortKey-z.sortKey));for(const P of u){const{geometry:z,index:R,sourceLayerIndex:H}=P,V=e[R].feature;this.addFeature(P,z,R,r,T),a.featureIndex.insert(V,z,R,H,this.index)}}update(e,a,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,a,this.stateDependentLayers,{imagePositions:r})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ht),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,a,r,d,u=1){let m;switch(u){case 1:m=[0,7];break;case 3:m=[0,2,5,7];break;case 5:m=[0,1,3,4,6,7];break;case 7:m=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${u}; valid values are 1, 3, 5, 7.`)}const v=m.length;for(const k of a)for(const T of k){const P=T.x,z=T.y;if(P<0||P>=jt||z<0||z>=jt)continue;const R=this.segments.prepareSegment(v*v,this.layoutVertexArray,this.indexArray,e.sortKey),H=R.vertexLength;for(let V=0;V<v;V++)for(let W=0;W<v;W++)Qd(this.layoutVertexArray,P,z,m[W],m[V]);for(let V=0;V<v-1;V++)for(let W=0;W<v-1;W++){const X=H+V*v+W,ee=H+(V+1)*v+W;this.indexArray.emplaceBack(X,ee+1,X+1),this.indexArray.emplaceBack(X,ee,ee+1)}R.vertexLength+=v*v,R.primitiveLength+=(v-1)*(v-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,{imagePositions:{},canonical:d})}}function ef(s,e){for(let a=0;a<s.length;a++)if(Jh(e,s[a]))return!0;for(let a=0;a<e.length;a++)if(Jh(s,e[a]))return!0;return!!no(s,e)}function pp(s,e,a){return!!Jh(s,e)||!!mp(e,s,a)}function up(s,e){if(s.length===1)return Pu(e,s[0]);for(let a=0;a<e.length;a++){const r=e[a];for(let d=0;d<r.length;d++)if(Jh(s,r[d]))return!0}for(let a=0;a<s.length;a++)if(Pu(e,s[a]))return!0;for(let a=0;a<e.length;a++)if(no(s,e[a]))return!0;return!1}function Fn(s,e,a){if(s.length>1){if(no(s,e))return!0;for(let r=0;r<e.length;r++)if(mp(e[r],s,a))return!0}for(let r=0;r<s.length;r++)if(mp(s[r],e,a))return!0;return!1}function no(s,e){if(s.length===0||e.length===0)return!1;for(let a=0;a<s.length-1;a++){const r=s[a],d=s[a+1];for(let u=0;u<e.length-1;u++)if(jm(r,d,e[u],e[u+1]))return!0}return!1}function jm(s,e,a,r){return Yn(s,a,r)!==Yn(e,a,r)&&Yn(s,e,a)!==Yn(s,e,r)}function mp(s,e,a){const r=a*a;if(e.length===1)return s.distSqr(e[0])<r;for(let d=1;d<e.length;d++)if(Su(s,e[d-1],e[d])<r)return!0;return!1}function Su(s,e,a){const r=e.distSqr(a);if(r===0)return s.distSqr(e);const d=((s.x-e.x)*(a.x-e.x)+(s.y-e.y)*(a.y-e.y))/r;return s.distSqr(d<0?e:d>1?a:a.sub(e)._mult(d)._add(e))}function Pu(s,e){let a,r,d,u=!1;for(let m=0;m<s.length;m++){a=s[m];for(let v=0,k=a.length-1;v<a.length;k=v++)r=a[v],d=a[k],r.y>e.y!=d.y>e.y&&e.x<(d.x-r.x)*(e.y-r.y)/(d.y-r.y)+r.x&&(u=!u)}return u}function Jh(s,e){let a=!1;for(let r=0,d=s.length-1;r<s.length;d=r++){const u=s[r],m=s[d];u.y>e.y!=m.y>e.y&&e.x<(m.x-u.x)*(e.y-u.y)/(m.y-u.y)+u.x&&(a=!a)}return a}function Um(s,e,a){const r=a[0],d=a[2];if(s.x<r.x&&e.x<r.x||s.x>d.x&&e.x>d.x||s.y<r.y&&e.y<r.y||s.y>d.y&&e.y>d.y)return!1;const u=Yn(s,e,a[0]);return u!==Yn(s,e,a[1])||u!==Yn(s,e,a[2])||u!==Yn(s,e,a[3])}function El(s,e,a){const r=e.paint.get(s).value;return r.kind==="constant"?r.value:a.programConfigurations.get(e.id).getMaxValue(s)}function mc(s){return Math.sqrt(s[0]*s[0]+s[1]*s[1])}function gp(s,e,a,r,d){if(!e[0]&&!e[1])return s;const u=re.convert(e)._mult(d);a==="viewport"&&u._rotate(-r);const m=[];for(let v=0;v<s.length;v++)m.push(s[v].sub(u));return m}function yp(s){const e=[];for(let a=0;a<s.length;a++){const r=s[a],d=e.at(-1);(a===0||d&&!r.equals(d))&&e.push(r)}return e}function Eu({queryGeometry:s,size:e},a){return pp(s,a,e)}function qm({queryGeometry:s,size:e,transform:a,unwrappedTileID:r,getElevation:d},u){return pp(s,u,e*(a.projectTileCoordinates(u.x,u.y,r,d).signedDistanceFromCamera/a.cameraToCenterDistance))}function Vm({queryGeometry:s,size:e,transform:a,unwrappedTileID:r,getElevation:d},u){const m=a.projectTileCoordinates(u.x,u.y,r,d).signedDistanceFromCamera,v=e*(a.cameraToCenterDistance/m);return pp(s,gc(u,a,r,d),v)}function Wm({queryGeometry:s,size:e,transform:a,unwrappedTileID:r,getElevation:d},u){return pp(s,gc(u,a,r,d),e)}function bp({queryGeometry:s,size:e,transform:a,unwrappedTileID:r,getElevation:d,pitchAlignment:u="map",pitchScale:m="map"},v){const k=u==="map"?m==="map"?Eu:qm:m==="map"?Vm:Wm,T={queryGeometry:s,size:e,transform:a,unwrappedTileID:r,getElevation:d};for(const P of v)for(const z of P)if(k(T,z))return!0;return!1}function gc(s,e,a,r){const d=e.projectTileCoordinates(s.x,s.y,a,r).point;return new re((.5*d.x+.5)*e.width,(.5*-d.y+.5)*e.height)}let wp,Cu;Rt("CircleBucket",Jd,{omit:["layers"]});var Mu={get paint(){return Cu=Cu||new sn({"circle-radius":new qt(Ne.paint_circle["circle-radius"]),"circle-color":new qt(Ne.paint_circle["circle-color"]),"circle-blur":new qt(Ne.paint_circle["circle-blur"]),"circle-opacity":new qt(Ne.paint_circle["circle-opacity"]),"circle-translate":new Gt(Ne.paint_circle["circle-translate"]),"circle-translate-anchor":new Gt(Ne.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Gt(Ne.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Gt(Ne.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new qt(Ne.paint_circle["circle-stroke-width"]),"circle-stroke-color":new qt(Ne.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new qt(Ne.paint_circle["circle-stroke-opacity"])})},get layout(){return wp=wp||new sn({"circle-sort-key":new qt(Ne.layout_circle["circle-sort-key"])})}};class vp extends Us{constructor(e,a){super(e,Mu,a)}createBucket(e){return new Jd(e)}queryRadius(e){const a=e;return El("circle-radius",this,a)+El("circle-stroke-width",this,a)+mc(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:e,feature:a,featureState:r,geometry:d,transform:u,pixelsToTileUnits:m,unwrappedTileID:v,getElevation:k}){const T=gp(e,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-u.bearingInRadians,m),P=this.paint.get("circle-radius").evaluate(a,r)+this.paint.get("circle-stroke-width").evaluate(a,r),z=this.paint.get("circle-pitch-scale"),R=this.paint.get("circle-pitch-alignment");let H,V;return R==="map"?(H=T,V=P*m):(H=(function(W,X,ee,ue){return W.map((ae=>gc(ae,X,ee,ue)))})(T,u,v,k),V=P),bp({queryGeometry:H,size:V,transform:u,unwrappedTileID:v,getElevation:k,pitchAlignment:R,pitchScale:z},d)}}class Op extends Jd{}let Lu;Rt("HeatmapBucket",Op,{omit:["layers"]});var zu={get paint(){return Lu=Lu||new sn({"heatmap-radius":new qt(Ne.paint_heatmap["heatmap-radius"]),"heatmap-weight":new qt(Ne.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Gt(Ne.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Zd(Ne.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Gt(Ne.paint_heatmap["heatmap-opacity"])})}};function kp(s,{width:e,height:a},r,d){if(d){if(d instanceof Uint8ClampedArray)d=new Uint8Array(d.buffer);else if(d.length!==e*a*r)throw new RangeError(`mismatched image size. expected: ${d.length} but got: ${e*a*r}`)}else d=new Uint8Array(e*a*r);return s.width=e,s.height=a,s.data=d,s}function el(s,{width:e,height:a},r){if(e===s.width&&a===s.height)return;const d=kp({},{width:e,height:a},r);yc(s,d,{x:0,y:0},{x:0,y:0},{width:Math.min(s.width,e),height:Math.min(s.height,a)},r),s.width=e,s.height=a,s.data=d.data}function yc(s,e,a,r,d,u){if(d.width===0||d.height===0)return e;if(d.width>s.width||d.height>s.height||a.x>s.width-d.width||a.y>s.height-d.height)throw new RangeError("out of range source coordinates for image copy");if(d.width>e.width||d.height>e.height||r.x>e.width-d.width||r.y>e.height-d.height)throw new RangeError("out of range destination coordinates for image copy");const m=s.data,v=e.data;if(m===v)throw new Error("srcData equals dstData, so image is already copied");for(let k=0;k<d.height;k++){const T=((a.y+k)*s.width+a.x)*u,P=((r.y+k)*e.width+r.x)*u;for(let z=0;z<d.width*u;z++)v[P+z]=m[T+z]}return e}class bc{constructor(e,a){kp(this,e,1,a)}resize(e){el(this,e,1)}clone(){return new bc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,a,r,d,u){yc(e,a,r,d,u,1)}}class Xo{constructor(e,a){kp(this,e,4,a)}resize(e){el(this,e,4)}replace(e,a){a?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new Xo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,a,r,d,u){yc(e,a,r,d,u,4)}setPixel(e,a,r){const d=4*(e*this.width+a);this.data[d+0]=Math.round(255*r.r/r.a),this.data[d+1]=Math.round(255*r.g/r.a),this.data[d+2]=Math.round(255*r.b/r.a),this.data[d+3]=Math.round(255*r.a)}}function tl(s){const e={},a=s.resolution||256,r=s.clips?s.clips.length:1,d=s.image||new Xo({width:a,height:r});if(Math.log(a)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${a}`);const u=(m,v,k)=>{e[s.evaluationKey]=k;const T=s.expression.evaluate(e);d.setPixel(m/4/a,v/4,T)};if(s.clips)for(let m=0,v=0;m<r;++m,v+=4*a)for(let k=0,T=0;k<a;k++,T+=4){const P=k/(a-1),{start:z,end:R}=s.clips[m];u(v,T,z*(1-P)+R*P)}else for(let m=0,v=0;m<a;m++,v+=4)u(0,v,m/(a-1));return d}Rt("AlphaImage",bc),Rt("RGBAImage",Xo);const wc="big-fb";class Zm extends Us{createBucket(e){return new Op(e)}constructor(e,a){super(e,zu,a),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){e==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=tl({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(wc)&&this.heatmapFbos.delete(wc)}queryRadius(e){return El("heatmap-radius",this,e)}queryIntersectsFeature({queryGeometry:e,feature:a,featureState:r,geometry:d,transform:u,pixelsToTileUnits:m,unwrappedTileID:v,getElevation:k}){return bp({queryGeometry:e,size:this.paint.get("heatmap-radius").evaluate(a,r)*m,transform:u,unwrappedTileID:v,getElevation:k},d)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&!this.isHidden()}}let vc;var Oc={get paint(){return vc=vc||new sn({"hillshade-illumination-direction":new Gt(Ne.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new Gt(Ne.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new Gt(Ne.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Gt(Ne.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Gt(Ne.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Gt(Ne.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Gt(Ne.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new Gt(Ne.paint_hillshade["hillshade-method"])})}};class Js extends Us{constructor(e,a){super(e,Oc,a),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let e=this.paint.get("hillshade-illumination-direction").values,a=this.paint.get("hillshade-illumination-altitude").values,r=this.paint.get("hillshade-highlight-color").values,d=this.paint.get("hillshade-shadow-color").values;const u=Math.max(e.length,a.length,r.length,d.length);e=e.concat(Array(u-e.length).fill(e.at(-1))),a=a.concat(Array(u-a.length).fill(a.at(-1))),r=r.concat(Array(u-r.length).fill(r.at(-1))),d=d.concat(Array(u-d.length).fill(d.at(-1)));const m=a.map(wn);return{directionRadians:e.map(wn),altitudeRadians:m,shadowColor:d,highlightColor:r}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&!this.isHidden()}}let Xm;var my={get paint(){return Xm=Xm||new sn({"color-relief-opacity":new Gt(Ne["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new Zd(Ne["paint_color-relief"]["color-relief-color"])})}};class _p{constructor(e,a,r,d){this.context=e,this.format=r,this.texture=e.gl.createTexture(),this.update(a,d)}update(e,a,r){const{width:d,height:u}=e,m=!(this.size&&this.size[0]===d&&this.size[1]===u||r),{context:v}=this,{gl:k}=v;if(this.useMipmap=!!(a&&a.useMipmap),k.bindTexture(k.TEXTURE_2D,this.texture),v.pixelStoreUnpackFlipY.set(!1),v.pixelStoreUnpack.set(1),v.pixelStoreUnpackPremultiplyAlpha.set(this.format===k.RGBA&&(!a||a.premultiply!==!1)),m)this.size=[d,u],e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||Ro(e)?k.texImage2D(k.TEXTURE_2D,0,this.format,this.format,k.UNSIGNED_BYTE,e):k.texImage2D(k.TEXTURE_2D,0,this.format,d,u,0,this.format,k.UNSIGNED_BYTE,e.data);else{const{x:T,y:P}=r||{x:0,y:0};e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||Ro(e)?k.texSubImage2D(k.TEXTURE_2D,0,T,P,k.RGBA,k.UNSIGNED_BYTE,e):k.texSubImage2D(k.TEXTURE_2D,0,T,P,d,u,k.RGBA,k.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&k.generateMipmap(k.TEXTURE_2D),v.pixelStoreUnpackFlipY.setDefault(),v.pixelStoreUnpack.setDefault(),v.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(e,a,r){const{context:d}=this,{gl:u}=d;u.bindTexture(u.TEXTURE_2D,this.texture),r!==u.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(r=u.LINEAR),e!==this.filter&&(u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,e),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,r||e),this.filter=e),a!==this.wrap&&(u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,a),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,a),this.wrap=a)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}class Df{constructor(e,a,r,d=1,u=1,m=1,v=0){if(this.uid=e,a.height!==a.width)throw new RangeError("DEM tiles must be square");if(r&&!["mapbox","terrarium","custom"].includes(r))return void As(`"${r}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=a.height;const k=this.dim=a.height-2;switch(this.data=new Uint32Array(a.data.buffer),r){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=d,this.greenFactor=u,this.blueFactor=m,this.baseShift=v;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let T=0;T<k;T++)this.data[this._idx(-1,T)]=this.data[this._idx(0,T)],this.data[this._idx(k,T)]=this.data[this._idx(k-1,T)],this.data[this._idx(T,-1)]=this.data[this._idx(T,0)],this.data[this._idx(T,k)]=this.data[this._idx(T,k-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(k,-1)]=this.data[this._idx(k-1,0)],this.data[this._idx(-1,k)]=this.data[this._idx(0,k-1)],this.data[this._idx(k,k)]=this.data[this._idx(k-1,k-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let T=0;T<k;T++)for(let P=0;P<k;P++){const z=this.get(T,P);z>this.max&&(this.max=z),z<this.min&&(this.min=z)}}get(e,a){const r=new Uint8Array(this.data.buffer),d=4*this._idx(e,a);return this.unpack(r[d],r[d+1],r[d+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(e,a){if(e<-1||e>=this.dim+1||a<-1||a>=this.dim+1)throw new RangeError(`Out of range source coordinates for DEM data. x: ${e}, y: ${a}, dim: ${this.dim}`);return(a+1)*this.stride+(e+1)}unpack(e,a,r){return e*this.redFactor+a*this.greenFactor+r*this.blueFactor-this.baseShift}pack(e){return Cl(e,this.getUnpackVector())}getPixels(){return new Xo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(e,a,r){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let d=a*this.dim,u=a*this.dim+this.dim,m=r*this.dim,v=r*this.dim+this.dim;switch(a){case-1:d=u-1;break;case 1:u=d+1}switch(r){case-1:m=v-1;break;case 1:v=m+1}const k=-a*this.dim,T=-r*this.dim;for(let P=m;P<v;P++)for(let z=d;z<u;z++)this.data[this._idx(z,P)]=e.data[this._idx(z+k,P+T)]}}function Cl(s,e){const a=e[0],r=e[1],d=e[2],u=e[3],m=Math.min(a,r,d),v=Math.round((s+u)/m);return{r:Math.floor(v*m/a)%256,g:Math.floor(v*m/r)%256,b:Math.floor(v*m/d)%256}}Rt("DEMData",Df);class Ym extends Us{constructor(e,a){super(e,my,a)}_createColorRamp(e){const a={elevationStops:[],colorStops:[]},r=this._transitionablePaint._values["color-relief-color"].value.expression;if(r instanceof y&&r._styleExpression.expression instanceof js){this.colorRampExpression=r;const m=r._styleExpression.expression;a.elevationStops=m.labels,a.colorStops=[];for(const v of a.elevationStops)a.colorStops.push(m.evaluate({globals:{elevation:v}}))}if(a.elevationStops.length<1&&(a.elevationStops=[0],a.colorStops=[ra.transparent]),a.elevationStops.length<2&&(a.elevationStops.push(a.elevationStops[0]+1),a.colorStops.push(a.colorStops[0])),a.elevationStops.length<=e)return a;const d={elevationStops:[],colorStops:[]},u=(a.elevationStops.length-1)/(e-1);for(let m=0;m<a.elevationStops.length-.5;m+=u)d.elevationStops.push(a.elevationStops[Math.round(m)]),d.colorStops.push(a.colorStops[Math.round(m)]);return As(`Too many colors in specification of ${this.id} color-relief layer, may not render properly. Max possible colors: ${e}, provided: ${a.elevationStops.length}`),d}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(e,a,r){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const d=this._createColorRamp(a),u=new Xo({width:d.colorStops.length,height:1}),m=new Xo({width:d.colorStops.length,height:1});for(let v=0;v<d.elevationStops.length;v++){const k=Cl(d.elevationStops[v],r);m.setPixel(0,v,new ra(k.r/255,k.g/255,k.b/255,1)),u.setPixel(0,v,d.colorStops[v])}return this.colorRampTextures={elevationTexture:new _p(e,m,e.gl.RGBA),colorTexture:new _p(e,u,e.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return!this.isHidden()&&!!this.colorRampTextures}}const $m=Hs([{name:"a_pos",components:2,type:"Int16"}],4),{members:kc}=$m;function gr(s,e,a){const r=a.patternDependencies;let d=!1;for(const u of e){const m=u.paint.get(`${s}-pattern`);m.isConstant()||(d=!0);const v=m.constantOr(null);v&&(d=!0,r[v.to]=!0,r[v.from]=!0)}return d}function Ip(s,e,a,r,d){const{zoom:u}=r,m=d.patternDependencies;for(const v of e){const k=v.paint.get(`${s}-pattern`).value;if(k.kind!=="constant"){let T=k.evaluate({zoom:u-1},a,{},d.availableImages),P=k.evaluate({zoom:u},a,{},d.availableImages),z=k.evaluate({zoom:u+1},a,{},d.availableImages);T=T&&T.name?T.name:T,P=P&&P.name?P.name:P,z=z&&z.name?z.name:z,m[T]=!0,m[P]=!0,m[z]=!0,a.patterns[v.id]={min:T,mid:P,max:z}}}return a}function xp(s,e,a,r,d){let u;if(d===(function(m,v,k,T){let P=0;for(let z=v,R=k-T;z<k;z+=T)P+=(m[R]-m[z])*(m[z+1]+m[R+1]),R=z;return P})(s,e,a,r)>0)for(let m=e;m<a;m+=r)u=yi(m/r|0,s[m],s[m+1],u);else for(let m=a-r;m>=e;m-=r)u=yi(m/r|0,s[m],s[m+1],u);return u&&Fi(u,u.next)&&(bi(u),u=u.next),u}function md(s,e){if(!s)return s;e||(e=s);let a,r=s;do if(a=!1,r.steiner||!Fi(r,r.next)&&Wa(r.prev,r,r.next)!==0)r=r.next;else{if(bi(r),r=e=r.prev,r===r.next)break;a=!0}while(a||r!==e);return e}function tf(s,e,a,r,d,u,m){if(!s)return;!m&&u&&(function(k,T,P,z){let R=k;do R.z===0&&(R.z=Un(R.x,R.y,T,P,z)),R.prevZ=R.prev,R.nextZ=R.next,R=R.next;while(R!==k);R.prevZ.nextZ=null,R.prevZ=null,(function(H){let V,W=1;do{let X,ee=H;H=null;let ue=null;for(V=0;ee;){V++;let ae=ee,oe=0;for(let ve=0;ve<W&&(oe++,ae=ae.nextZ,ae);ve++);let ge=W;for(;oe>0||ge>0&&ae;)oe!==0&&(ge===0||!ae||ee.z<=ae.z)?(X=ee,ee=ee.nextZ,oe--):(X=ae,ae=ae.nextZ,ge--),ue?ue.nextZ=X:H=X,X.prevZ=ue,ue=X;ee=ae}ue.nextZ=null,W*=2}while(V>1)})(R)})(s,r,d,u);let v=s;for(;s.prev!==s.next;){const k=s.prev,T=s.next;if(u?Tp(s,r,d,u):Du(s))e.push(k.i,s.i,T.i),bi(s),s=T.next,v=T.next;else if((s=T)===v){m?m===1?tf(s=Km(md(s),e),e,a,r,d,u,2):m===2&&Ml(s,e,a,r,d,u):tf(md(s),e,a,r,d,u,1);break}}}function Du(s){const e=s.prev,a=s,r=s.next;if(Wa(e,a,r)>=0)return!1;const d=e.x,u=a.x,m=r.x,v=e.y,k=a.y,T=r.y,P=Math.min(d,u,m),z=Math.min(v,k,T),R=Math.max(d,u,m),H=Math.max(v,k,T);let V=r.next;for(;V!==e;){if(V.x>=P&&V.x<=R&&V.y>=z&&V.y<=H&&Bf(d,v,u,k,m,T,V.x,V.y)&&Wa(V.prev,V,V.next)>=0)return!1;V=V.next}return!0}function Tp(s,e,a,r){const d=s.prev,u=s,m=s.next;if(Wa(d,u,m)>=0)return!1;const v=d.x,k=u.x,T=m.x,P=d.y,z=u.y,R=m.y,H=Math.min(v,k,T),V=Math.min(P,z,R),W=Math.max(v,k,T),X=Math.max(P,z,R),ee=Un(H,V,e,a,r),ue=Un(W,X,e,a,r);let ae=s.prevZ,oe=s.nextZ;for(;ae&&ae.z>=ee&&oe&&oe.z<=ue;){if(ae.x>=H&&ae.x<=W&&ae.y>=V&&ae.y<=X&&ae!==d&&ae!==m&&Bf(v,P,k,z,T,R,ae.x,ae.y)&&Wa(ae.prev,ae,ae.next)>=0||(ae=ae.prevZ,oe.x>=H&&oe.x<=W&&oe.y>=V&&oe.y<=X&&oe!==d&&oe!==m&&Bf(v,P,k,z,T,R,oe.x,oe.y)&&Wa(oe.prev,oe,oe.next)>=0))return!1;oe=oe.nextZ}for(;ae&&ae.z>=ee;){if(ae.x>=H&&ae.x<=W&&ae.y>=V&&ae.y<=X&&ae!==d&&ae!==m&&Bf(v,P,k,z,T,R,ae.x,ae.y)&&Wa(ae.prev,ae,ae.next)>=0)return!1;ae=ae.prevZ}for(;oe&&oe.z<=ue;){if(oe.x>=H&&oe.x<=W&&oe.y>=V&&oe.y<=X&&oe!==d&&oe!==m&&Bf(v,P,k,z,T,R,oe.x,oe.y)&&Wa(oe.prev,oe,oe.next)>=0)return!1;oe=oe.nextZ}return!0}function Km(s,e){let a=s;do{const r=a.prev,d=a.next.next;!Fi(r,d)&&Hu(r,a,a.next,d)&&xc(r,d)&&xc(d,r)&&(e.push(r.i,a.i,d.i),bi(a),bi(a.next),a=s=d),a=a.next}while(a!==s);return md(a)}function Ml(s,e,a,r,d,u){let m=s;do{let v=m.next.next;for(;v!==m.prev;){if(m.i!==v.i&&nn(m,v)){let k=Tc(m,v);return m=md(m,m.next),k=md(k,k.next),tf(m,e,a,r,d,u,0),void tf(k,e,a,r,d,u,0)}v=v.next}m=m.next}while(m!==s)}function jn(s,e){let a=s.x-e.x;return a===0&&(a=s.y-e.y,a===0)&&(a=(s.next.y-s.y)/(s.next.x-s.x)-(e.next.y-e.y)/(e.next.x-e.x)),a}function Bu(s,e){const a=(function(d,u){let m=u;const v=d.x,k=d.y;let T,P=-1/0;if(Fi(d,m))return m;do{if(Fi(d,m.next))return m.next;if(k<=m.y&&k>=m.next.y&&m.next.y!==m.y){const W=m.x+(k-m.y)*(m.next.x-m.x)/(m.next.y-m.y);if(W<=v&&W>P&&(P=W,T=m.x<m.next.x?m:m.next,W===v))return T}m=m.next}while(m!==u);if(!T)return null;const z=T,R=T.x,H=T.y;let V=1/0;m=T;do{if(v>=m.x&&m.x>=R&&v!==m.x&&Ru(k<H?v:P,k,R,H,k<H?P:v,k,m.x,m.y)){const W=Math.abs(k-m.y)/(v-m.x);xc(m,d)&&(W<V||W===V&&(m.x>T.x||m.x===T.x&&Qm(T,m)))&&(T=m,V=W)}m=m.next}while(m!==z);return T})(s,e);if(!a)return e;const r=Tc(a,s);return md(r,r.next),md(a,a.next)}function Qm(s,e){return Wa(s.prev,s,e.prev)<0&&Wa(e.next,s,s.next)<0}function Un(s,e,a,r,d){return(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-a)*d|0)|s<<8))|s<<4))|s<<2))|s<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*d|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function gy(s){let e=s,a=s;do(e.x<a.x||e.x===a.x&&e.y<a.y)&&(a=e),e=e.next;while(e!==s);return a}function Ru(s,e,a,r,d,u,m,v){return(d-m)*(e-v)>=(s-m)*(u-v)&&(s-m)*(r-v)>=(a-m)*(e-v)&&(a-m)*(u-v)>=(d-m)*(r-v)}function Bf(s,e,a,r,d,u,m,v){return!(s===m&&e===v)&&Ru(s,e,a,r,d,u,m,v)}function nn(s,e){return s.next.i!==e.i&&s.prev.i!==e.i&&!(function(a,r){let d=a;do{if(d.i!==a.i&&d.next.i!==a.i&&d.i!==r.i&&d.next.i!==r.i&&Hu(d,d.next,a,r))return!0;d=d.next}while(d!==a);return!1})(s,e)&&(xc(s,e)&&xc(e,s)&&(function(a,r){let d=a,u=!1;const m=(a.x+r.x)/2,v=(a.y+r.y)/2;do d.y>v!=d.next.y>v&&d.next.y!==d.y&&m<(d.next.x-d.x)*(v-d.y)/(d.next.y-d.y)+d.x&&(u=!u),d=d.next;while(d!==a);return u})(s,e)&&(Wa(s.prev,s,e.prev)||Wa(s,e.prev,e))||Fi(s,e)&&Wa(s.prev,s,s.next)>0&&Wa(e.prev,e,e.next)>0)}function Wa(s,e,a){return(e.y-s.y)*(a.x-e.x)-(e.x-s.x)*(a.y-e.y)}function Fi(s,e){return s.x===e.x&&s.y===e.y}function Hu(s,e,a,r){const d=Ic(Wa(s,e,a)),u=Ic(Wa(s,e,r)),m=Ic(Wa(a,r,s)),v=Ic(Wa(a,r,e));return d!==u&&m!==v||!(d!==0||!_c(s,a,e))||!(u!==0||!_c(s,r,e))||!(m!==0||!_c(a,s,r))||!(v!==0||!_c(a,e,r))}function _c(s,e,a){return e.x<=Math.max(s.x,a.x)&&e.x>=Math.min(s.x,a.x)&&e.y<=Math.max(s.y,a.y)&&e.y>=Math.min(s.y,a.y)}function Ic(s){return s>0?1:s<0?-1:0}function xc(s,e){return Wa(s.prev,s,s.next)<0?Wa(s,e,s.next)>=0&&Wa(s,s.prev,e)>=0:Wa(s,e,s.prev)<0||Wa(s,s.next,e)<0}function Tc(s,e){const a=Ap(s.i,s.x,s.y),r=Ap(e.i,e.x,e.y),d=s.next,u=e.prev;return s.next=e,e.prev=s,a.next=d,d.prev=a,r.next=a,a.prev=r,u.next=r,r.prev=u,r}function yi(s,e,a,r){const d=Ap(s,e,a);return r?(d.next=r.next,d.prev=r,r.next.prev=d,r.next=d):(d.prev=d,d.next=d),d}function bi(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function Ap(s,e,a){return{i:s,x:e,y:a,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class oo{constructor(e,a){if(a>e)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=e,this._minGranularity=a}getGranularityForZoomLevel(e){return Math.max(Math.floor(this._baseZoomGranularity/(1<<e)),this._minGranularity,1)}}class Ac{constructor(e){this.fill=e.fill,this.line=e.line,this.tile=e.tile,this.stencil=e.stencil,this.circle=e.circle}}Ac.noSubdivision=new Ac({fill:new oo(0,0),line:new oo(0,0),tile:new oo(0,0),stencil:new oo(0,0),circle:1}),Rt("SubdivisionGranularityExpression",oo),Rt("SubdivisionGranularitySetting",Ac);const ji=-32768,Ah=32767;class Ll{constructor(e,a){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=e,this._granularityCellSize=jt/e,this._canonical=a}_getKey(e,a){return(e+=32768)<<16|a+32768}_vertexToIndex(e,a){if(e<-32768||a<-32768||e>32767||a>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const r=0|Math.round(e),d=0|Math.round(a),u=this._getKey(r,d);if(this._vertexDictionary.has(u))return this._vertexDictionary.get(u);const m=this._vertexBuffer.length/2;return this._vertexDictionary.set(u,m),this._vertexBuffer.push(r,d),m}_subdivideTrianglesScanline(e){if(this._granularity<2)return(function(d,u){const m=[];for(let v=0;v<u.length;v+=3){const k=u[v],T=u[v+1],P=u[v+2],z=d[2*k],R=d[2*k+1];(d[2*T]-z)*(d[2*P+1]-R)-(d[2*T+1]-R)*(d[2*P]-z)>0?(m.push(k),m.push(P),m.push(T)):(m.push(k),m.push(T),m.push(P))}return m})(this._vertexBuffer,e);const a=[],r=e.length;for(let d=0;d<r;d+=3){const u=[e[d+0],e[d+1],e[d+2]],m=[this._vertexBuffer[2*e[d+0]+0],this._vertexBuffer[2*e[d+0]+1],this._vertexBuffer[2*e[d+1]+0],this._vertexBuffer[2*e[d+1]+1],this._vertexBuffer[2*e[d+2]+0],this._vertexBuffer[2*e[d+2]+1]];let v=1/0,k=1/0,T=-1/0,P=-1/0;for(let W=0;W<3;W++){const X=m[2*W],ee=m[2*W+1];v=Math.min(v,X),T=Math.max(T,X),k=Math.min(k,ee),P=Math.max(P,ee)}if(v===T||k===P)continue;const z=Math.floor(v/this._granularityCellSize),R=Math.ceil(T/this._granularityCellSize),H=Math.floor(k/this._granularityCellSize),V=Math.ceil(P/this._granularityCellSize);if(z!==R||H!==V)for(let W=H;W<V;W++){const X=this._scanlineGenerateVertexRingForCellRow(W,m,u);Sh(this._vertexBuffer,X,a)}else a.push(...u)}return a}_scanlineGenerateVertexRingForCellRow(e,a,r){const d=e*this._granularityCellSize,u=d+this._granularityCellSize,m=[];for(let v=0;v<3;v++){const k=a[2*v],T=a[2*v+1],P=a[2*(v+1)%6],z=a[(2*(v+1)+1)%6],R=a[2*(v+2)%6],H=a[(2*(v+2)+1)%6],V=P-k,W=z-T,X=V===0,ee=W===0,ue=(d-T)/W,ae=(u-T)/W,oe=Math.min(ue,ae),ge=Math.max(ue,ae);if(!ee&&(oe>=1||ge<=0)||ee&&(T<d||T>u)){z>=d&&z<=u&&m.push(r[(v+1)%3]);continue}!ee&&oe>0&&m.push(this._vertexToIndex(k+V*oe,T+W*oe));const ve=k+V*Math.max(oe,0),Fe=k+V*Math.min(ge,1);X||this._generateIntraEdgeVertices(m,k,T,P,z,ve,Fe),!ee&&ge<1&&m.push(this._vertexToIndex(k+V*ge,T+W*ge)),(ee||z>=d&&z<=u)&&m.push(r[(v+1)%3]),!ee&&(z<=d||z>=u)&&this._generateInterEdgeVertices(m,k,T,P,z,R,H,Fe,d,u)}return m}_generateIntraEdgeVertices(e,a,r,d,u,m,v){const k=d-a,T=u-r,P=T===0,z=P?Math.min(a,d):Math.min(m,v),R=P?Math.max(a,d):Math.max(m,v),H=Math.floor(z/this._granularityCellSize)+1,V=Math.ceil(R/this._granularityCellSize)-1;if(P?a<d:m<v)for(let W=H;W<=V;W++){const X=W*this._granularityCellSize;e.push(this._vertexToIndex(X,r+T*(X-a)/k))}else for(let W=V;W>=H;W--){const X=W*this._granularityCellSize;e.push(this._vertexToIndex(X,r+T*(X-a)/k))}}_generateInterEdgeVertices(e,a,r,d,u,m,v,k,T,P){const z=u-r,R=m-d,H=v-u,V=(T-u)/H,W=(P-u)/H,X=Math.min(V,W),ee=Math.max(V,W),ue=d+R*X;let ae=Math.floor(Math.min(ue,k)/this._granularityCellSize)+1,oe=Math.ceil(Math.max(ue,k)/this._granularityCellSize)-1,ge=k<ue;const ve=H===0;if(ve&&(v===T||v===P))return;if(ve||X>=1||ee<=0){const ot=r-v,et=m+(a-m)*Math.min((T-v)/ot,(P-v)/ot);ae=Math.floor(Math.min(et,k)/this._granularityCellSize)+1,oe=Math.ceil(Math.max(et,k)/this._granularityCellSize)-1,ge=k<et}const Fe=z>0?P:T;if(ge)for(let ot=ae;ot<=oe;ot++)e.push(this._vertexToIndex(ot*this._granularityCellSize,Fe));else for(let ot=oe;ot>=ae;ot--)e.push(this._vertexToIndex(ot*this._granularityCellSize,Fe))}_generateOutline(e){const a=[];for(const r of e){const d=zl(r,this._granularity,!0),u=this._pointArrayToIndices(d),m=[];for(let v=1;v<u.length;v++)m.push(u[v-1]),m.push(u[v]);a.push(m)}return a}_handlePoles(e){let a=!1,r=!1;this._canonical&&(this._canonical.y===0&&(a=!0),this._canonical.y===(1<<this._canonical.z)-1&&(r=!0)),(a||r)&&this._fillPoles(e,a,r)}_ensureNoPoleVertices(){const e=this._vertexBuffer;for(let a=0;a<e.length;a+=2){const r=e[a+1];r===ji&&(e[a+1]=-32767),r===Ah&&(e[a+1]=32766)}}_generatePoleQuad(e,a,r,d,u,m){d>u!=(m===ji)?(e.push(a),e.push(r),e.push(this._vertexToIndex(d,m)),e.push(r),e.push(this._vertexToIndex(u,m)),e.push(this._vertexToIndex(d,m))):(e.push(r),e.push(a),e.push(this._vertexToIndex(d,m)),e.push(this._vertexToIndex(u,m)),e.push(r),e.push(this._vertexToIndex(d,m)))}_fillPoles(e,a,r){const d=this._vertexBuffer,u=jt,m=e.length;for(let v=2;v<m;v+=3){const k=e[v-2],T=e[v-1],P=e[v],z=d[2*k],R=d[2*k+1],H=d[2*T],V=d[2*T+1],W=d[2*P],X=d[2*P+1];a&&(R===0&&V===0&&this._generatePoleQuad(e,k,T,z,H,ji),V===0&&X===0&&this._generatePoleQuad(e,T,P,H,W,ji),X===0&&R===0&&this._generatePoleQuad(e,P,k,W,z,ji)),r&&(R===u&&V===u&&this._generatePoleQuad(e,k,T,z,H,Ah),V===u&&X===u&&this._generatePoleQuad(e,T,P,H,W,Ah),X===u&&R===u&&this._generatePoleQuad(e,P,k,W,z,Ah))}}_initializeVertices(e){for(let a=0;a<e.length;a+=2)this._vertexToIndex(e[a],e[a+1])}subdividePolygonInternal(e,a){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:r,holeIndices:d}=(function(v){const k=[],T=[];for(const P of v)if(P.length!==0){P!==v[0]&&k.push(T.length/2);for(let z=0;z<P.length;z++)T.push(P[z].x),T.push(P[z].y)}return{flattened:T,holeIndices:k}})(e);let u;this._initializeVertices(r);try{const v=(function(T,P,z=2){const R=P&&P.length,H=R?P[0]*z:T.length;let V=xp(T,0,H,z,!0);const W=[];if(!V||V.next===V.prev)return W;let X,ee,ue;if(R&&(V=(function(ae,oe,ge,ve){const Fe=[];for(let ot=0,et=oe.length;ot<et;ot++){const lt=xp(ae,oe[ot]*ve,ot<et-1?oe[ot+1]*ve:ae.length,ve,!1);lt===lt.next&&(lt.steiner=!0),Fe.push(gy(lt))}Fe.sort(jn);for(let ot=0;ot<Fe.length;ot++)ge=Bu(Fe[ot],ge);return ge})(T,P,V,z)),T.length>80*z){X=T[0],ee=T[1];let ae=X,oe=ee;for(let ge=z;ge<H;ge+=z){const ve=T[ge],Fe=T[ge+1];ve<X&&(X=ve),Fe<ee&&(ee=Fe),ve>ae&&(ae=ve),Fe>oe&&(oe=Fe)}ue=Math.max(ae-X,oe-ee),ue=ue!==0?32767/ue:0}return tf(V,W,z,X,ee,ue,0),W})(r,d),k=this._convertIndices(r,v);u=this._subdivideTrianglesScanline(k)}catch(v){console.error(v)}let m=[];return a&&(m=this._generateOutline(e)),this._ensureNoPoleVertices(),this._handlePoles(u),{verticesFlattened:this._vertexBuffer,indicesTriangles:u,indicesLineList:m}}_convertIndices(e,a){const r=[];for(let d=0;d<a.length;d++)r.push(this._vertexToIndex(e[2*a[d]],e[2*a[d]+1]));return r}_pointArrayToIndices(e){const a=[];for(let r=0;r<e.length;r++){const d=e[r];a.push(this._vertexToIndex(d.x,d.y))}return a}}function Sp(s,e,a,r=!0){return new Ll(a,e).subdividePolygonInternal(s,r)}function zl(s,e,a=!1){if(!s||s.length<1)return[];if(s.length<2)return[];const r=s[0],d=s[s.length-1],u=a&&(r.x!==d.x||r.y!==d.y);if(e<2)return u?[...s,s[0]]:[...s];const m=Math.floor(jt/e),v=[];v.push(new re(s[0].x,s[0].y));const k=s.length,T=u?k:k-1;for(let P=0;P<T;P++){const z=s[P],R=P<k-1?s[P+1]:s[0],H=z.x,V=z.y,W=R.x,X=R.y,ee=H!==W,ue=V!==X;if(!ee&&!ue)continue;const ae=W-H,oe=X-V,ge=Math.abs(ae),ve=Math.abs(oe);let Fe=H,ot=V;for(;;){const lt=ae>0?(Math.floor(Fe/m)+1)*m:(Math.ceil(Fe/m)-1)*m,At=oe>0?(Math.floor(ot/m)+1)*m:(Math.ceil(ot/m)-1)*m,yt=Math.abs(Fe-lt),ut=Math.abs(ot-At),Ke=Math.abs(Fe-W),xt=Math.abs(ot-X),Pt=ee?yt/ge:Number.POSITIVE_INFINITY,Lt=ue?ut/ve:Number.POSITIVE_INFINITY;if((Ke<=yt||!ee)&&(xt<=ut||!ue))break;if(Pt<Lt&&ee||!ue){Fe=lt,ot+=oe*Pt;const _t=new re(Fe,Math.round(ot));v[v.length-1].x===_t.x&&v[v.length-1].y===_t.y||v.push(_t)}else{Fe+=ae*Lt,ot=At;const _t=new re(Math.round(Fe),ot);v[v.length-1].x===_t.x&&v[v.length-1].y===_t.y||v.push(_t)}}const et=new re(W,X);v[v.length-1].x===et.x&&v[v.length-1].y===et.y||v.push(et)}return v}function Sh(s,e,a){if(e.length===0)throw new Error("Subdivision vertex ring is empty.");let r=0,d=s[2*e[0]];for(let k=1;k<e.length;k++){const T=s[2*e[k]];T<d&&(d=T,r=k)}const u=e.length;let m=r,v=(m+1)%u;for(;;){const k=m-1>=0?m-1:u-1,T=(v+1)%u,P=s[2*e[k]],z=s[2*e[T]],R=s[2*e[m]],H=s[2*e[m]+1],V=s[2*e[v]+1];let W=!1;if(P<z)W=!0;else if(P>z)W=!1;else{const X=V-H,ee=-(s[2*e[v]]-R),ue=H<V?1:-1;((P-R)*X+(s[2*e[k]+1]-H)*ee)*ue>((z-R)*X+(s[2*e[T]+1]-H)*ee)*ue&&(W=!0)}if(W){const X=e[k],ee=e[m],ue=e[v];X!==ee&&X!==ue&&ee!==ue&&a.push(ue,ee,X),m--,m<0&&(m=u-1)}else{const X=e[T],ee=e[m],ue=e[v];X!==ee&&X!==ue&&ee!==ue&&a.push(ue,ee,X),v++,v>=u&&(v=0)}if(k===T)break}}function Nu(s,e,a,r,d,u,m,v,k){const T=d.length/2,P=m&&v&&k;if(T<Tt.MAX_VERTEX_ARRAY_LENGTH){const z=e.prepareSegment(T,a,r),R=z.vertexLength;for(let W=0;W<u.length;W+=3)r.emplaceBack(R+u[W],R+u[W+1],R+u[W+2]);let H,V;z.vertexLength+=T,z.primitiveLength+=u.length/3,P&&(V=m.prepareSegment(T,a,v),H=V.vertexLength,V.vertexLength+=T);for(let W=0;W<d.length;W+=2)s(d[W],d[W+1]);if(P)for(let W=0;W<k.length;W++){const X=k[W];for(let ee=1;ee<X.length;ee+=2)v.emplaceBack(H+X[ee-1],H+X[ee]);V.primitiveLength+=X.length/2}}else(function(z,R,H,V,W,X){const ee=[];for(let ve=0;ve<V.length/2;ve++)ee.push(-1);const ue={count:0};let ae=0,oe=z.getOrCreateLatestSegment(R,H),ge=oe.vertexLength;for(let ve=2;ve<W.length;ve+=3){const Fe=W[ve-2],ot=W[ve-1],et=W[ve];let lt=ee[Fe]<ae,At=ee[ot]<ae,yt=ee[et]<ae;oe.vertexLength+((lt?1:0)+(At?1:0)+(yt?1:0))>Tt.MAX_VERTEX_ARRAY_LENGTH&&(oe=z.createNewSegment(R,H),ae=ue.count,lt=!0,At=!0,yt=!0,ge=0);const ut=al(ee,V,X,ue,Fe,lt,oe),Ke=al(ee,V,X,ue,ot,At,oe),xt=al(ee,V,X,ue,et,yt,oe);H.emplaceBack(ge+ut-ae,ge+Ke-ae,ge+xt-ae),oe.primitiveLength++}})(e,a,r,d,u,s),P&&(function(z,R,H,V,W,X){const ee=[];for(let ve=0;ve<V.length/2;ve++)ee.push(-1);const ue={count:0};let ae=0,oe=z.getOrCreateLatestSegment(R,H),ge=oe.vertexLength;for(let ve=0;ve<W.length;ve++){const Fe=W[ve];for(let ot=1;ot<W[ve].length;ot+=2){const et=Fe[ot-1],lt=Fe[ot];let At=ee[et]<ae,yt=ee[lt]<ae;oe.vertexLength+((At?1:0)+(yt?1:0))>Tt.MAX_VERTEX_ARRAY_LENGTH&&(oe=z.createNewSegment(R,H),ae=ue.count,At=!0,yt=!0,ge=0);const ut=al(ee,V,X,ue,et,At,oe),Ke=al(ee,V,X,ue,lt,yt,oe);H.emplaceBack(ge+ut-ae,ge+Ke-ae),oe.primitiveLength++}}})(m,a,v,d,k,s),e.forceNewSegmentOnNextPrepare(),m==null||m.forceNewSegmentOnNextPrepare()}function al(s,e,a,r,d,u,m){if(u){const v=r.count;return a(e[2*d],e[2*d+1]),s[d]=r.count,r.count++,m.vertexLength++,v}return s[d]}class af{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((a=>a.id)),this.index=e.index,this.hasDependencies=!1,this.patternFeatures=[],this.layoutVertexArray=new le,this.indexArray=new Ve,this.indexArray2=new bt,this.programConfigurations=new Kh(e.layers,e.zoom),this.segments=new Tt,this.segments2=new Tt,this.stateDependentLayerIds=this.layers.filter((a=>a.isStateDependent())).map((a=>a.id))}populate(e,a,r){this.hasDependencies=gr("fill",this.layers,a);const d=this.layers[0].layout.get("fill-sort-key"),u=!d.isConstant(),m=[];for(const{feature:v,id:k,index:T,sourceLayerIndex:P}of e){const z=this.layers[0]._featureFilter.needGeometry,R=mr(v,z);if(!this.layers[0]._featureFilter.filter(new as(this.zoom),R,r))continue;const H=u?d.evaluate(R,{},r,a.availableImages):void 0,V={id:k,properties:v.properties,type:v.type,sourceLayerIndex:P,index:T,geometry:z?R.geometry:Th(v),patterns:{},sortKey:H};m.push(V)}u&&m.sort(((v,k)=>v.sortKey-k.sortKey));for(const v of m){const{geometry:k,index:T,sourceLayerIndex:P}=v;if(this.hasDependencies){const z=Ip("fill",this.layers,v,{zoom:this.zoom},a);this.patternFeatures.push(z)}else this.addFeature(v,k,T,r,{},a.subdivisionGranularity);a.featureIndex.insert(e[T].feature,k,T,P,this.index)}}update(e,a,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,a,this.stateDependentLayers,{imagePositions:r})}addFeatures(e,a,r){for(const d of this.patternFeatures)this.addFeature(d,d.geometry,d.index,a,r,e.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,kc),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,a,r,d,u,m){for(const v of lh(a,500)){const k=Sp(v,d,m.fill.getGranularityForZoomLevel(d.z)),T=this.layoutVertexArray;Nu(((P,z)=>{T.emplaceBack(P,z)}),this.segments,this.layoutVertexArray,this.indexArray,k.verticesFlattened,k.indicesTriangles,this.segments2,this.indexArray2,k.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,{imagePositions:u,canonical:d})}}let Rf,sf;Rt("FillBucket",af,{omit:["layers","patternFeatures"]});var Jm={get paint(){return sf=sf||new sn({"fill-antialias":new Gt(Ne.paint_fill["fill-antialias"]),"fill-opacity":new qt(Ne.paint_fill["fill-opacity"]),"fill-color":new qt(Ne.paint_fill["fill-color"]),"fill-outline-color":new qt(Ne.paint_fill["fill-outline-color"]),"fill-translate":new Gt(Ne.paint_fill["fill-translate"]),"fill-translate-anchor":new Gt(Ne.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ri(Ne.paint_fill["fill-pattern"])})},get layout(){return Rf=Rf||new sn({"fill-sort-key":new qt(Ne.layout_fill["fill-sort-key"])})}};class eg extends Us{constructor(e,a){super(e,Jm,a)}recalculate(e,a){super.recalculate(e,a);const r=this.paint._values["fill-outline-color"];r.value.kind==="constant"&&r.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(e){return new af(e)}queryRadius(){return mc(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:e,geometry:a,transform:r,pixelsToTileUnits:d}){return up(gp(e,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-r.bearingInRadians,d),a)}isTileClipped(){return!0}}const Sc=Hs([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),tg=Hs([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Pp}=Sc;class Hf{constructor(e,a,r,d,u){this.properties={},this.extent=r,this.type=0,this.id=void 0,this._pbf=e,this._geometry=-1,this._keys=d,this._values=u,e.readFields(yy,this,a)}loadGeometry(){const e=this._pbf;e.pos=this._geometry;const a=e.readVarint()+e.pos,r=[];let d,u=1,m=0,v=0,k=0;for(;e.pos<a;){if(m<=0){const T=e.readVarint();u=7&T,m=T>>3}if(m--,u===1||u===2)v+=e.readSVarint(),k+=e.readSVarint(),u===1&&(d&&r.push(d),d=[]),d&&d.push(new re(v,k));else{if(u!==7)throw new Error(`unknown command ${u}`);d&&d.push(d[0].clone())}}return d&&r.push(d),r}bbox(){const e=this._pbf;e.pos=this._geometry;const a=e.readVarint()+e.pos;let r=1,d=0,u=0,m=0,v=1/0,k=-1/0,T=1/0,P=-1/0;for(;e.pos<a;){if(d<=0){const z=e.readVarint();r=7&z,d=z>>3}if(d--,r===1||r===2)u+=e.readSVarint(),m+=e.readSVarint(),u<v&&(v=u),u>k&&(k=u),m<T&&(T=m),m>P&&(P=m);else if(r!==7)throw new Error(`unknown command ${r}`)}return[v,T,k,P]}toGeoJSON(e,a,r){const d=this.extent*Math.pow(2,r),u=this.extent*e,m=this.extent*a,v=this.loadGeometry();function k(R){return[360*(R.x+u)/d-180,360/Math.PI*Math.atan(Math.exp((1-2*(R.y+m)/d)*Math.PI))-90]}function T(R){return R.map(k)}let P;if(this.type===1){const R=[];for(const V of v)R.push(V[0]);const H=T(R);P=R.length===1?{type:"Point",coordinates:H[0]}:{type:"MultiPoint",coordinates:H}}else if(this.type===2){const R=v.map(T);P=R.length===1?{type:"LineString",coordinates:R[0]}:{type:"MultiLineString",coordinates:R}}else{if(this.type!==3)throw new Error("unknown feature type");{const R=ag(v),H=[];for(const V of R)H.push(V.map(T));P=H.length===1?{type:"Polygon",coordinates:H[0]}:{type:"MultiPolygon",coordinates:H}}}const z={type:"Feature",geometry:P,properties:this.properties};return this.id!=null&&(z.id=this.id),z}}function yy(s,e,a){s===1?e.id=a.readVarint():s===2?(function(r,d){const u=r.readVarint()+r.pos;for(;r.pos<u;){const m=d._keys[r.readVarint()],v=d._values[r.readVarint()];d.properties[m]=v}})(a,e):s===3?e.type=a.readVarint():s===4&&(e._geometry=a.pos)}function ag(s){const e=s.length;if(e<=1)return[s];const a=[];let r,d;for(let u=0;u<e;u++){const m=ms(s[u]);m!==0&&(d===void 0&&(d=m<0),d===m<0?(r&&a.push(r),r=[s[u]]):r&&r.push(s[u]))}return r&&a.push(r),a}function ms(s){let e=0;for(let a,r,d=0,u=s.length,m=u-1;d<u;m=d++)a=s[d],r=s[m],e+=(r.x-a.x)*(a.y+r.y);return e}Hf.types=["Unknown","Point","LineString","Polygon"];class Gs{constructor(e,a){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(Fa,this,a),this.length=this._features.length}feature(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];const a=this._pbf.readVarint()+this._pbf.pos;return new Hf(this._pbf,a,this.extent,this._keys,this._values)}}function Fa(s,e,a){s===15?e.version=a.readVarint():s===1?e.name=a.readString():s===5?e.extent=a.readVarint():s===2?e._features.push(a.pos):s===3?e._keys.push(a.readString()):s===4&&e._values.push((function(r){let d=null;const u=r.readVarint()+r.pos;for(;r.pos<u;){const m=r.readVarint()>>3;d=m===1?r.readString():m===2?r.readFloat():m===3?r.readDouble():m===4?r.readVarint64():m===5?r.readVarint():m===6?r.readSVarint():m===7?r.readBoolean():null}if(d==null)throw new Error("unknown feature value");return d})(a))}class ja{constructor(e,a){this.layers=e.readFields(Is,{},a)}}function Is(s,e,a){if(s===3){const r=new Gs(a,a.readVarint()+a.pos);r.length&&(e[r.name]=r)}}const wi=Math.pow(2,13);function Yr(s,e,a,r,d,u,m,v){s.emplaceBack(e,a,2*Math.floor(r*wi)+m,d*wi*2,u*wi*2,Math.round(v))}class gd{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((a=>a.id)),this.index=e.index,this.hasDependencies=!1,this.layoutVertexArray=new pe,this.centroidVertexArray=new ie,this.indexArray=new Ve,this.programConfigurations=new Kh(e.layers,e.zoom),this.segments=new Tt,this.stateDependentLayerIds=this.layers.filter((a=>a.isStateDependent())).map((a=>a.id))}populate(e,a,r){this.features=[],this.hasDependencies=gr("fill-extrusion",this.layers,a);for(const{feature:d,id:u,index:m,sourceLayerIndex:v}of e){const k=this.layers[0]._featureFilter.needGeometry,T=mr(d,k);if(!this.layers[0]._featureFilter.filter(new as(this.zoom),T,r))continue;const P={id:u,sourceLayerIndex:v,index:m,geometry:k?T.geometry:Th(d),properties:d.properties,type:d.type,patterns:{}};this.hasDependencies?this.features.push(Ip("fill-extrusion",this.layers,P,{zoom:this.zoom},a)):this.addFeature(P,P.geometry,m,r,{},a.subdivisionGranularity),a.featureIndex.insert(d,P.geometry,m,v,this.index,!0)}}addFeatures(e,a,r){for(const d of this.features){const{geometry:u}=d;this.addFeature(d,u,d.index,a,r,e.subdivisionGranularity)}}update(e,a,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,a,this.stateDependentLayers,{imagePositions:r})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Pp),this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,tg.members,!0),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(e,a,r,d,u,m){for(const v of lh(a,500)){const k={x:0,y:0,sampleCount:0},T=this.layoutVertexArray.length;this.processPolygon(k,d,e,v,m);const P=this.layoutVertexArray.length-T,z=Math.floor(k.x/k.sampleCount),R=Math.floor(k.y/k.sampleCount);for(let H=0;H<P;H++)this.centroidVertexArray.emplaceBack(z,R)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,{imagePositions:u,canonical:d})}processPolygon(e,a,r,d,u){if(d.length<1||mn(d[0]))return;for(const z of d)z.length!==0&&Gu(e,z);const m={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},v=u.fill.getGranularityForZoomLevel(a.z),k=Hf.types[r.type]==="Polygon";for(const z of d){if(z.length===0||mn(z))continue;const R=zl(z,v,k);this._generateSideFaces(R,m)}if(!k)return;const T=Sp(d,a,v,!1),P=this.layoutVertexArray;Nu(((z,R)=>{Yr(P,z,R,0,0,1,1,0)}),this.segments,this.layoutVertexArray,this.indexArray,T.verticesFlattened,T.indicesTriangles)}_generateSideFaces(e,a){let r=0;for(let d=1;d<e.length;d++){const u=e[d],m=e[d-1];if(Dl(u,m))continue;a.segment.vertexLength+4>Tt.MAX_VERTEX_ARRAY_LENGTH&&(a.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const v=u.sub(m)._perp()._unit(),k=m.dist(u);r+k>32768&&(r=0),Yr(this.layoutVertexArray,u.x,u.y,v.x,v.y,0,0,r),Yr(this.layoutVertexArray,u.x,u.y,v.x,v.y,0,1,r),r+=k,Yr(this.layoutVertexArray,m.x,m.y,v.x,v.y,0,0,r),Yr(this.layoutVertexArray,m.x,m.y,v.x,v.y,0,1,r);const T=a.segment.vertexLength;this.indexArray.emplaceBack(T,T+2,T+1),this.indexArray.emplaceBack(T+1,T+2,T+3),a.segment.vertexLength+=4,a.segment.primitiveLength+=2}}}function Gu(s,e){for(let a=0;a<e.length;a++){const r=e[a];a===e.length-1&&e[0].x===r.x&&e[0].y===r.y||(s.x+=r.x,s.y+=r.y,s.sampleCount++)}}function Dl(s,e){return s.x===e.x&&(s.x<0||s.x>jt)||s.y===e.y&&(s.y<0||s.y>jt)}function mn(s){return s.every((e=>e.x<0))||s.every((e=>e.x>jt))||s.every((e=>e.y<0))||s.every((e=>e.y>jt))}let Bl;Rt("FillExtrusionBucket",gd,{omit:["layers","features"]});var nf={get paint(){return Bl=Bl||new sn({"fill-extrusion-opacity":new Gt(Ne["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new qt(Ne["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Gt(Ne["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Gt(Ne["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ri(Ne["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new qt(Ne["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new qt(Ne["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Gt(Ne["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Fu extends Us{constructor(e,a){super(e,nf,a)}createBucket(e){return new gd(e)}queryRadius(){return mc(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:e,feature:a,featureState:r,geometry:d,transform:u,pixelsToTileUnits:m,pixelPosMatrix:v}){const k=gp(e,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-u.bearingInRadians,m),T=this.paint.get("fill-extrusion-height").evaluate(a,r),P=this.paint.get("fill-extrusion-base").evaluate(a,r),z=(function(H,V){const W=[];for(const X of H){const ee=[X.x,X.y,0,1];os(ee,ee,V),W.push(new re(ee[0]/ee[3],ee[1]/ee[3]))}return W})(k,v),R=(function(H,V,W,X){const ee=[],ue=[],ae=X[8]*V,oe=X[9]*V,ge=X[10]*V,ve=X[11]*V,Fe=X[8]*W,ot=X[9]*W,et=X[10]*W,lt=X[11]*W;for(const At of H){const yt=[],ut=[];for(const Ke of At){const xt=Ke.x,Pt=Ke.y,Lt=X[0]*xt+X[4]*Pt+X[12],_t=X[1]*xt+X[5]*Pt+X[13],Yt=X[2]*xt+X[6]*Pt+X[14],Da=X[3]*xt+X[7]*Pt+X[15],ga=Yt+ge,en=Da+ve,Qo=Lt+Fe,Zn=_t+ot,tn=Yt+et,Vs=Da+lt,ds=new re((Lt+ae)/en,(_t+oe)/en);ds.z=ga/en,yt.push(ds);const gn=new re(Qo/Vs,Zn/Vs);gn.z=tn/Vs,ut.push(gn)}ee.push(yt),ue.push(ut)}return[ee,ue]})(d,P,T,v);return(function(H,V,W){let X=1/0;up(W,V)&&(X=of(W,V[0]));for(let ee=0;ee<V.length;ee++){const ue=V[ee],ae=H[ee];for(let oe=0;oe<ue.length-1;oe++){const ge=ue[oe],ve=[ge,ue[oe+1],ae[oe+1],ae[oe],ge];ef(W,ve)&&(X=Math.min(X,of(W,ve)))}}return X!==1/0&&X})(R[0],R[1],z)}}function Bo(s,e){return s.x*e.x+s.y*e.y}function of(s,e){if(s.length===1){let a=0;const r=e[a++];let d;for(;!d||r.equals(d);)if(d=e[a++],!d)return 1/0;for(;a<e.length;a++){const u=e[a],m=s[0],v=d.sub(r),k=u.sub(r),T=m.sub(r),P=Bo(v,v),z=Bo(v,k),R=Bo(k,k),H=Bo(T,v),V=Bo(T,k),W=P*R-z*z,X=(R*H-z*V)/W,ee=(P*V-z*H)/W,ue=r.z*(1-X-ee)+d.z*X+u.z*ee;if(isFinite(ue))return ue}return 1/0}{let a=1/0;for(const r of e)a=Math.min(a,r.z);return a}}const Pc=Hs([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Ui}=Pc,ju=Hs([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Ep}=ju,sg=Math.cos(Math.PI/180*37.5),Ec=Math.pow(2,14)/.5;class Nf{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((a=>a.id)),this.index=e.index,this.hasDependencies=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((a=>{this.gradients[a.id]={}})),this.layoutVertexArray=new be,this.layoutVertexArray2=new ce,this.indexArray=new Ve,this.programConfigurations=new Kh(e.layers,e.zoom),this.segments=new Tt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((a=>a.isStateDependent())).map((a=>a.id))}populate(e,a,r){this.hasDependencies=gr("line",this.layers,a)||this.hasLineDasharray(this.layers);const d=this.layers[0].layout.get("line-sort-key"),u=!d.isConstant(),m=[];for(const{feature:v,id:k,index:T,sourceLayerIndex:P}of e){const z=this.layers[0]._featureFilter.needGeometry,R=mr(v,z);if(!this.layers[0]._featureFilter.filter(new as(this.zoom),R,r))continue;const H=u?d.evaluate(R,{},r):void 0,V={id:k,properties:v.properties,type:v.type,sourceLayerIndex:P,index:T,geometry:z?R.geometry:Th(v),patterns:{},dashes:{},sortKey:H};m.push(V)}u&&m.sort(((v,k)=>v.sortKey-k.sortKey));for(const v of m){const{geometry:k,index:T,sourceLayerIndex:P}=v;this.hasDependencies?(gr("line",this.layers,a)?Ip("line",this.layers,v,{zoom:this.zoom},a):this.hasLineDasharray(this.layers)&&this.addLineDashDependencies(this.layers,v,this.zoom,a),this.patternFeatures.push(v)):this.addFeature(v,k,T,r,{},{},a.subdivisionGranularity),a.featureIndex.insert(e[T].feature,k,T,P,this.index)}}update(e,a,r,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,a,this.stateDependentLayers,{imagePositions:r,dashPositions:d})}addFeatures(e,a,r,d){for(const u of this.patternFeatures)this.addFeature(u,u.geometry,u.index,a,r,d,e.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,Ep)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Ui),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,a,r,d,u,m,v){const k=this.layers[0].layout,T=k.get("line-join").evaluate(e,{}),P=k.get("line-cap"),z=k.get("line-miter-limit"),R=k.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const H of a)this.addLine(H,e,T,P,z,R,d,v);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,{imagePositions:u,dashPositions:m,canonical:d})}addLine(e,a,r,d,u,m,v,k){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,e=zl(e,v?k.line.getGranularityForZoomLevel(v.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ae=0;ae<e.length-1;ae++)this.totalDistance+=e[ae].dist(e[ae+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const T=Hf.types[a.type]==="Polygon";let P=e.length;for(;P>=2&&e[P-1].equals(e[P-2]);)P--;let z=0;for(;z<P-1&&e[z].equals(e[z+1]);)z++;if(P<(T?3:2))return;r==="bevel"&&(u=1.05);const R=this.overscaling<=16?122880/(512*this.overscaling):0,H=this.segments.prepareSegment(10*P,this.layoutVertexArray,this.indexArray);let V,W,X,ee,ue;this.e1=this.e2=-1,T&&(V=e[P-2],ue=e[z].sub(V)._unit()._perp());for(let ae=z;ae<P;ae++){if(X=ae===P-1?T?e[z+1]:void 0:e[ae+1],X&&e[ae].equals(X))continue;ue&&(ee=ue),V&&(W=V),V=e[ae],ue=X?X.sub(V)._unit()._perp():ee,ee=ee||ue;let oe=ee.add(ue);oe.x===0&&oe.y===0||oe._unit();const ge=ee.x*ue.x+ee.y*ue.y,ve=oe.x*ue.x+oe.y*ue.y,Fe=ve!==0?1/ve:1/0,ot=2*Math.sqrt(2-2*ve),et=ve<sg&&W&&X,lt=ee.x*ue.y-ee.y*ue.x>0;if(et&&ae>z){const ut=V.dist(W);if(ut>2*R){const Ke=V.sub(V.sub(W)._mult(R/ut)._round());this.updateDistance(W,Ke),this.addCurrentVertex(Ke,ee,0,0,H),W=Ke}}const At=W&&X;let yt=At?r:T?"butt":d;if(At&&yt==="round"&&(Fe<m?yt="miter":Fe<=2&&(yt="fakeround")),yt==="miter"&&Fe>u&&(yt="bevel"),yt==="bevel"&&(Fe>2&&(yt="flipbevel"),Fe<u&&(yt="miter")),W&&this.updateDistance(W,V),yt==="miter")oe._mult(Fe),this.addCurrentVertex(V,oe,0,0,H);else if(yt==="flipbevel"){if(Fe>100)oe=ue.mult(-1);else{const ut=Fe*ee.add(ue).mag()/ee.sub(ue).mag();oe._perp()._mult(ut*(lt?-1:1))}this.addCurrentVertex(V,oe,0,0,H),this.addCurrentVertex(V,oe.mult(-1),0,0,H)}else if(yt==="bevel"||yt==="fakeround"){const ut=-Math.sqrt(Fe*Fe-1),Ke=lt?ut:0,xt=lt?0:ut;if(W&&this.addCurrentVertex(V,ee,Ke,xt,H),yt==="fakeround"){const Pt=Math.round(180*ot/Math.PI/20);for(let Lt=1;Lt<Pt;Lt++){let _t=Lt/Pt;if(_t!==.5){const Da=_t-.5;_t+=_t*Da*(_t-1)*((1.0904+ge*(ge*(3.55645-1.43519*ge)-3.2452))*Da*Da+(.848013+ge*(.215638*ge-1.06021)))}const Yt=ue.sub(ee)._mult(_t)._add(ee)._unit()._mult(lt?-1:1);this.addHalfVertex(V,Yt.x,Yt.y,!1,lt,0,H)}}X&&this.addCurrentVertex(V,ue,-Ke,-xt,H)}else if(yt==="butt")this.addCurrentVertex(V,oe,0,0,H);else if(yt==="square"){const ut=W?1:-1;this.addCurrentVertex(V,oe,ut,ut,H)}else yt==="round"&&(W&&(this.addCurrentVertex(V,ee,0,0,H),this.addCurrentVertex(V,ee,1,1,H,!0)),X&&(this.addCurrentVertex(V,ue,-1,-1,H,!0),this.addCurrentVertex(V,ue,0,0,H)));if(et&&ae<P-1){const ut=V.dist(X);if(ut>2*R){const Ke=V.add(X.sub(V)._mult(R/ut)._round());this.updateDistance(V,Ke),this.addCurrentVertex(Ke,ue,0,0,H),V=Ke}}}}addCurrentVertex(e,a,r,d,u,m=!1){const v=a.y*d-a.x,k=-a.y-a.x*d;this.addHalfVertex(e,a.x+a.y*r,a.y-a.x*r,m,!1,r,u),this.addHalfVertex(e,v,k,m,!0,-d,u),this.distance>Ec/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(e,a,r,d,u,m))}addHalfVertex({x:e,y:a},r,d,u,m,v,k){const T=.5*(this.lineClips?this.scaledDistance*(Ec-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e<<1)+(u?1:0),(a<<1)+(m?1:0),Math.round(63*r)+128,Math.round(63*d)+128,1+(v===0?0:v<0?-1:1)|(63&T)<<2,T>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const P=k.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,P,this.e2),k.primitiveLength++),m?this.e2=P:this.e1=P}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(e,a){this.distance+=e.dist(a),this.updateScaledDistance()}hasLineDasharray(e){for(const a of e){const r=a.paint.get("line-dasharray");if(r&&!r.isConstant())return!0}return!1}addLineDashDependencies(e,a,r,d){for(const u of e){const m=u.paint.get("line-dasharray");if(!m||m.value.kind==="constant")continue;const v=u.layout.get("line-cap")==="round",k={dasharray:m.value.evaluate({zoom:r-1},a,{}),round:v},T={dasharray:m.value.evaluate({zoom:r},a,{}),round:v},P={dasharray:m.value.evaluate({zoom:r+1},a,{}),round:v},z=`${k.dasharray.join(",")},${k.round}`,R=`${T.dasharray.join(",")},${T.round}`,H=`${P.dasharray.join(",")},${P.round}`;d.dashDependencies[z]=k,d.dashDependencies[R]=T,d.dashDependencies[H]=P,a.dashes[u.id]={min:z,mid:R,max:H}}}}let Rl,qn;Rt("LineBucket",Nf,{omit:["layers","patternFeatures"]});var Hl={get paint(){return qn=qn||new sn({"line-opacity":new qt(Ne.paint_line["line-opacity"]),"line-color":new qt(Ne.paint_line["line-color"]),"line-translate":new Gt(Ne.paint_line["line-translate"]),"line-translate-anchor":new Gt(Ne.paint_line["line-translate-anchor"]),"line-width":new qt(Ne.paint_line["line-width"]),"line-gap-width":new qt(Ne.paint_line["line-gap-width"]),"line-offset":new qt(Ne.paint_line["line-offset"]),"line-blur":new qt(Ne.paint_line["line-blur"]),"line-dasharray":new Ri(Ne.paint_line["line-dasharray"]),"line-pattern":new Ri(Ne.paint_line["line-pattern"]),"line-gradient":new Zd(Ne.paint_line["line-gradient"])})},get layout(){return Rl=Rl||new sn({"line-cap":new Gt(Ne.layout_line["line-cap"]),"line-join":new qt(Ne.layout_line["line-join"]),"line-miter-limit":new Gt(Ne.layout_line["line-miter-limit"]),"line-round-limit":new Gt(Ne.layout_line["line-round-limit"]),"line-sort-key":new qt(Ne.layout_line["line-sort-key"])})}};class Gf extends qt{possiblyEvaluate(e,a){return a=new as(Math.floor(a.zoom),{now:a.now,fadeDuration:a.fadeDuration,zoomHistory:a.zoomHistory,transition:a.transition}),super.possiblyEvaluate(e,a)}evaluate(e,a,r,d){return a=Ma({},a,{zoom:Math.floor(a.zoom)}),super.evaluate(e,a,r,d)}}let $r;class Uu extends Us{constructor(e,a){super(e,Hl,a),this.gradientVersion=0,$r||($r=new Gf(Hl.paint.properties["line-width"].specification),$r.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(e){if(e==="line-gradient"){const a=this.gradientExpression();this.stepInterpolant=!!(function(r){return r._styleExpression!==void 0})(a)&&a._styleExpression.expression instanceof Pr,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(e,a){super.recalculate(e,a),this.paint._values["line-floorwidth"]=$r.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}createBucket(e){return new Nf(e)}queryRadius(e){const a=e,r=Cp(El("line-width",this,a),El("line-gap-width",this,a)),d=El("line-offset",this,a);return r/2+Math.abs(d)+mc(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:e,feature:a,featureState:r,geometry:d,transform:u,pixelsToTileUnits:m}){const v=gp(e,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-u.bearingInRadians,m),k=m/2*Cp(this.paint.get("line-width").evaluate(a,r),this.paint.get("line-gap-width").evaluate(a,r)),T=this.paint.get("line-offset").evaluate(a,r);return T&&(d=(function(P,z){const R=[];for(let H=0;H<P.length;H++){const V=yp(P[H]),W=[];for(let X=0;X<V.length;X++){const ee=V[X],ue=V[X-1],ae=V[X+1],oe=X===0?new re(0,0):ee.sub(ue)._unit()._perp(),ge=X===V.length-1?new re(0,0):ae.sub(ee)._unit()._perp(),ve=oe._add(ge)._unit(),Fe=ve.x*ge.x+ve.y*ge.y;Fe!==0&&ve._mult(1/Fe),W.push(ve._mult(z)._add(ee))}R.push(W)}return R})(d,T*m)),(function(P,z,R){for(let H=0;H<z.length;H++){const V=z[H];if(P.length>=3){for(let W=0;W<V.length;W++)if(Jh(P,V[W]))return!0}if(Fn(P,V,R))return!0}return!1})(v,d,k)}isTileClipped(){return!0}}function Cp(s,e){return e>0?e+2*s:s}const ng=Hs([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Cc=Hs([{name:"a_projected_pos",components:3,type:"Float32"}],4);Hs([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const qu=Hs([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Hs([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const qi=Hs([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),og=Hs([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Vi(s,e,a){return s.sections.forEach((r=>{r.text=(function(d,u,m){const v=u.layout.get("text-transform").evaluate(m,{});return v==="uppercase"?d=d.toLocaleUpperCase():v==="lowercase"&&(d=d.toLocaleLowerCase()),Bi.applyArabicShaping&&(d=Bi.applyArabicShaping(d)),d})(r.text,e,a)})),s}Hs([{name:"triangle",components:3,type:"Uint16"}]),Hs([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Hs([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Hs([{type:"Float32",name:"offsetX"}]),Hs([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Hs([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);var Bn=24;const Ff={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},by={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},yd={40:!0};function Mc(s,e,a,r,d,u){if("fontStack"in e){const m=a[e.fontStack],v=m&&m[s];return v?v.metrics.advance*e.scale+d:0}{const m=r[e.imageName];return m?m.displaySize[0]*e.scale*Bn/u+d:0}}function Mp(s,e,a,r){const d=Math.pow(s-e,2);return r?s<e?d/2:2*d:d+Math.abs(a)*a}function jf(s,e,a){let r=0;return s===10&&(r-=1e4),a&&(r+=150),s!==40&&s!==65288||(r+=50),e!==41&&e!==65289||(r+=50),r}function Vu(s,e,a,r,d,u){let m=null,v=Mp(e,a,d,u);for(const k of r){const T=Mp(e-k.x,a,d,u)+k.badness;T<=v&&(m=k,v=T)}return{index:s,x:e,priorBreak:m,badness:v}}function Wu(s){return s?Wu(s.priorBreak).concat(s.index):[]}class rf{constructor(e="",a=[],r=[]){this.text=e,this.sections=a,this.sectionIndex=r,this.imageSectionID=null}static fromFeature(e,a){const r=new rf;for(let d=0;d<e.sections.length;d++){const u=e.sections[d];u.image?r.addImageSection(u):r.addTextSection(u,a)}return r}length(){return[...this.text].length}getSection(e){return this.sections[this.sectionIndex[e]]}getSectionIndex(e){return this.sectionIndex[e]}verticalizePunctuation(){this.text=(function(e){let a="",r={premature:!0,value:void 0};const d=e[Symbol.iterator]();let u=d.next();const m=e[Symbol.iterator]();m.next();let v=m.next();for(;!u.done;)a+=!v.done&&qr(v.value.codePointAt(0))&&!Ff[v.value]||!r.premature&&qr(r.value.codePointAt(0))&&!Ff[r.value]||!Ff[u.value]?u.value:Ff[u.value],r={value:u.value,premature:!1},u=d.next(),v=m.next();return a})(this.text)}hasZeroWidthSpaces(){return this.text.includes("")}trim(){const e=this.text.match(/^\s*/),a=e?e[0].length:0,r=this.text.match(/\S\s*$/),d=r?r[0].length-1:0;this.text=this.text.substring(a,this.text.length-d),this.sectionIndex=this.sectionIndex.slice(a,this.sectionIndex.length-d)}substring(e,a){const r=[...this.text].slice(e,a).join(""),d=this.sectionIndex.slice(e,a);return new rf(r,this.sections,d)}toCodeUnitIndex(e){return[...this.text].slice(0,e).join("").length}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((e,a)=>Math.max(e,this.sections[a].scale)),0)}getMaxImageSize(e){let a=0,r=0;for(let d=0;d<this.length();d++){const u=this.getSection(d);if("imageName"in u){const m=e[u.imageName];if(!m)continue;const v=m.displaySize;a=Math.max(a,v[0]),r=Math.max(r,v[1])}}return{maxImageWidth:a,maxImageHeight:r}}addTextSection(e,a){this.text+=e.text,this.sections.push({scale:e.scale||1,verticalAlign:e.verticalAlign||"bottom",fontStack:e.fontStack||a});const r=this.sections.length-1;this.sectionIndex.push(...[...e.text].map((()=>r)))}addImageSection(e){const a=e.image?e.image.name:"";if(a.length===0)return void As("Can't add FormattedSection with an empty image.");const r=this.getNextImageSectionCharCode();r?(this.text+=String.fromCharCode(r),this.sections.push({scale:1,verticalAlign:e.verticalAlign||"bottom",imageName:a}),this.sectionIndex.push(this.sections.length-1)):As("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}determineLineBreaks(e,a,r,d,u){const m=[],v=this.determineAverageLineWidth(e,a,r,d,u),k=this.hasZeroWidthSpaces();let T=0,P=0;const z=this.text[Symbol.iterator]();let R=z.next();const H=this.text[Symbol.iterator]();H.next();let V=H.next();const W=this.text[Symbol.iterator]();W.next(),W.next();let X=W.next();for(;!R.done;){const ee=this.getSection(P),ue=R.value.codePointAt(0);if(jd(ue)||(T+=Mc(ue,ee,r,d,e,u)),!V.done){const ae=Fr(ue),oe=V.value.codePointAt(0);(by[ue]||ae||"imageName"in ee||!X.done&&yd[oe])&&m.push(Vu(P+1,T,v,m,jf(ue,oe,ae&&k),!1))}P++,R=z.next(),V=H.next(),X=W.next()}return Wu(Vu(this.length(),T,v,m,0,!0))}determineAverageLineWidth(e,a,r,d,u){let m=0,v=0;for(const k of this.text){const T=this.getSection(v);m+=Mc(k.codePointAt(0),T,r,d,e,u),v++}return m/Math.max(1,Math.ceil(m/a))}}const Lp=4294967296,Lc=1/Lp,zp=typeof TextDecoder=="undefined"?null:new TextDecoder("utf-8");class Dp{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,a,r=this.length){for(;this.pos<r;){const d=this.readVarint(),u=d>>3,m=this.pos;this.type=7&d,e(u,a,this),this.pos===m&&this.skip(d)}return a}readMessage(e,a){return this.readFields(e,a,this.readVarint()+this.pos)}readFixed32(){const e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){const e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*Lp;return this.pos+=8,e}readSFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*Lp;return this.pos+=8,e}readFloat(){const e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){const e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){const a=this.buf;let r,d;return d=a[this.pos++],r=127&d,d<128?r:(d=a[this.pos++],r|=(127&d)<<7,d<128?r:(d=a[this.pos++],r|=(127&d)<<14,d<128?r:(d=a[this.pos++],r|=(127&d)<<21,d<128?r:(d=a[this.pos],r|=(15&d)<<28,(function(u,m,v){const k=v.buf;let T,P;if(P=k[v.pos++],T=(112&P)>>4,P<128||(P=k[v.pos++],T|=(127&P)<<3,P<128)||(P=k[v.pos++],T|=(127&P)<<10,P<128)||(P=k[v.pos++],T|=(127&P)<<17,P<128)||(P=k[v.pos++],T|=(127&P)<<24,P<128)||(P=k[v.pos++],T|=(1&P)<<31,P<128))return Uf(u,T,m);throw new Error("Expected varint not more than 10 bytes")})(r,e,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const e=this.readVarint();return e%2==1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){const e=this.readVarint()+this.pos,a=this.pos;return this.pos=e,e-a>=12&&zp?zp.decode(this.buf.subarray(a,e)):(function(r,d,u){let m="",v=d;for(;v<u;){const k=r[v];let T,P,z,R=null,H=k>239?4:k>223?3:k>191?2:1;if(v+H>u)break;H===1?k<128&&(R=k):H===2?(T=r[v+1],(192&T)==128&&(R=(31&k)<<6|63&T,R<=127&&(R=null))):H===3?(T=r[v+1],P=r[v+2],(192&T)==128&&(192&P)==128&&(R=(15&k)<<12|(63&T)<<6|63&P,(R<=2047||R>=55296&&R<=57343)&&(R=null))):H===4&&(T=r[v+1],P=r[v+2],z=r[v+3],(192&T)==128&&(192&P)==128&&(192&z)==128&&(R=(15&k)<<18|(63&T)<<12|(63&P)<<6|63&z,(R<=65535||R>=1114112)&&(R=null))),R===null?(R=65533,H=1):R>65535&&(R-=65536,m+=String.fromCharCode(R>>>10&1023|55296),R=56320|1023&R),m+=String.fromCharCode(R),v+=H}return m})(this.buf,a,e)}readBytes(){const e=this.readVarint()+this.pos,a=this.buf.subarray(this.pos,e);return this.pos=e,a}readPackedVarint(e=[],a){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readVarint(a));return e}readPackedSVarint(e=[]){const a=this.readPackedEnd();for(;this.pos<a;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){const a=this.readPackedEnd();for(;this.pos<a;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){const a=this.readPackedEnd();for(;this.pos<a;)e.push(this.readFloat());return e}readPackedDouble(e=[]){const a=this.readPackedEnd();for(;this.pos<a;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){const a=this.readPackedEnd();for(;this.pos<a;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){const a=this.readPackedEnd();for(;this.pos<a;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){const a=this.readPackedEnd();for(;this.pos<a;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){const a=this.readPackedEnd();for(;this.pos<a;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(e){const a=7&e;if(a===0)for(;this.buf[this.pos++]>127;);else if(a===2)this.pos=this.readVarint()+this.pos;else if(a===5)this.pos+=4;else{if(a!==1)throw new Error(`Unimplemented type: ${a}`);this.pos+=8}}writeTag(e,a){this.writeVarint(e<<3|a)}realloc(e){let a=this.length||16;for(;a<this.pos+e;)a*=2;if(a!==this.length){const r=new Uint8Array(a);r.set(this.buf),this.buf=r,this.dataView=new DataView(r.buffer),this.length=a}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,-1&e,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*Lc),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,-1&e,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*Lc),!0),this.pos+=8}writeVarint(e){(e=+e||0)>268435455||e<0?(function(a,r){let d,u;if(a>=0?(d=a%4294967296|0,u=a/4294967296|0):(d=~(-a%4294967296),u=~(-a/4294967296),4294967295^d?d=d+1|0:(d=0,u=u+1|0)),a>=18446744073709552e3||a<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");r.realloc(10),(function(m,v,k){k.buf[k.pos++]=127&m|128,m>>>=7,k.buf[k.pos++]=127&m|128,m>>>=7,k.buf[k.pos++]=127&m|128,m>>>=7,k.buf[k.pos++]=127&m|128,k.buf[k.pos]=127&(m>>>=7)})(d,0,r),(function(m,v){const k=(7&m)<<4;v.buf[v.pos++]|=k|((m>>>=3)?128:0),m&&(v.buf[v.pos++]=127&m|((m>>>=7)?128:0),m&&(v.buf[v.pos++]=127&m|((m>>>=7)?128:0),m&&(v.buf[v.pos++]=127&m|((m>>>=7)?128:0),m&&(v.buf[v.pos++]=127&m|((m>>>=7)?128:0),m&&(v.buf[v.pos++]=127&m)))))})(u,r)})(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))}writeSVarint(e){this.writeVarint(e<0?2*-e-1:2*e)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(4*e.length),this.pos++;const a=this.pos;this.pos=(function(d,u,m){for(let v,k,T=0;T<u.length;T++){if(v=u.charCodeAt(T),v>55295&&v<57344){if(!k){v>56319||T+1===u.length?(d[m++]=239,d[m++]=191,d[m++]=189):k=v;continue}if(v<56320){d[m++]=239,d[m++]=191,d[m++]=189,k=v;continue}v=k-55296<<10|v-56320|65536,k=null}else k&&(d[m++]=239,d[m++]=191,d[m++]=189,k=null);v<128?d[m++]=v:(v<2048?d[m++]=v>>6|192:(v<65536?d[m++]=v>>12|224:(d[m++]=v>>18|240,d[m++]=v>>12&63|128),d[m++]=v>>6&63|128),d[m++]=63&v|128)}return m})(this.buf,e,this.pos);const r=this.pos-a;r>=128&&ig(a,r,this),this.pos=a-1,this.writeVarint(r),this.pos+=r}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){const a=e.length;this.writeVarint(a),this.realloc(a);for(let r=0;r<a;r++)this.buf[this.pos++]=e[r]}writeRawMessage(e,a){this.pos++;const r=this.pos;e(a,this);const d=this.pos-r;d>=128&&ig(r,d,this),this.pos=r-1,this.writeVarint(d),this.pos+=d}writeMessage(e,a,r){this.writeTag(e,2),this.writeRawMessage(a,r)}writePackedVarint(e,a){a.length&&this.writeMessage(e,rg,a)}writePackedSVarint(e,a){a.length&&this.writeMessage(e,hg,a)}writePackedBoolean(e,a){a.length&&this.writeMessage(e,lg,a)}writePackedFloat(e,a){a.length&&this.writeMessage(e,qf,a)}writePackedDouble(e,a){a.length&&this.writeMessage(e,Bp,a)}writePackedFixed32(e,a){a.length&&this.writeMessage(e,dg,a)}writePackedSFixed32(e,a){a.length&&this.writeMessage(e,fg,a)}writePackedFixed64(e,a){a.length&&this.writeMessage(e,cg,a)}writePackedSFixed64(e,a){a.length&&this.writeMessage(e,pg,a)}writeBytesField(e,a){this.writeTag(e,2),this.writeBytes(a)}writeFixed32Field(e,a){this.writeTag(e,5),this.writeFixed32(a)}writeSFixed32Field(e,a){this.writeTag(e,5),this.writeSFixed32(a)}writeFixed64Field(e,a){this.writeTag(e,1),this.writeFixed64(a)}writeSFixed64Field(e,a){this.writeTag(e,1),this.writeSFixed64(a)}writeVarintField(e,a){this.writeTag(e,0),this.writeVarint(a)}writeSVarintField(e,a){this.writeTag(e,0),this.writeSVarint(a)}writeStringField(e,a){this.writeTag(e,2),this.writeString(a)}writeFloatField(e,a){this.writeTag(e,5),this.writeFloat(a)}writeDoubleField(e,a){this.writeTag(e,1),this.writeDouble(a)}writeBooleanField(e,a){this.writeVarintField(e,+a)}}function Uf(s,e,a){return a?4294967296*e+(s>>>0):4294967296*(e>>>0)+(s>>>0)}function ig(s,e,a){const r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));a.realloc(r);for(let d=a.pos-1;d>=s;d--)a.buf[d+r]=a.buf[d]}function rg(s,e){for(let a=0;a<s.length;a++)e.writeVarint(s[a])}function hg(s,e){for(let a=0;a<s.length;a++)e.writeSVarint(s[a])}function qf(s,e){for(let a=0;a<s.length;a++)e.writeFloat(s[a])}function Bp(s,e){for(let a=0;a<s.length;a++)e.writeDouble(s[a])}function lg(s,e){for(let a=0;a<s.length;a++)e.writeBoolean(s[a])}function dg(s,e){for(let a=0;a<s.length;a++)e.writeFixed32(s[a])}function fg(s,e){for(let a=0;a<s.length;a++)e.writeSFixed32(s[a])}function cg(s,e){for(let a=0;a<s.length;a++)e.writeFixed64(s[a])}function pg(s,e){for(let a=0;a<s.length;a++)e.writeSFixed64(s[a])}function ug(s,e,a){s===1&&a.readMessage(Rp,e)}function Rp(s,e,a){if(s===3){const{id:r,bitmap:d,width:u,height:m,left:v,top:k,advance:T}=a.readMessage(mg,{});e.push({id:r,bitmap:new bc({width:u+6,height:m+6},d),metrics:{width:u,height:m,left:v,top:k,advance:T}})}}function mg(s,e,a){s===1?e.id=a.readVarint():s===2?e.bitmap=a.readBytes():s===3?e.width=a.readVarint():s===4?e.height=a.readVarint():s===5?e.left=a.readSVarint():s===6?e.top=a.readSVarint():s===7&&(e.advance=a.readVarint())}function Zu(s){let e=0,a=0;for(const m of s)e+=m.w*m.h,a=Math.max(a,m.w);s.sort(((m,v)=>v.h-m.h));const r=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),a),h:1/0}];let d=0,u=0;for(const m of s)for(let v=r.length-1;v>=0;v--){const k=r[v];if(!(m.w>k.w||m.h>k.h)){if(m.x=k.x,m.y=k.y,u=Math.max(u,m.y+m.h),d=Math.max(d,m.x+m.w),m.w===k.w&&m.h===k.h){const T=r.pop();T&&v<r.length&&(r[v]=T)}else m.h===k.h?(k.x+=m.w,k.w-=m.w):m.w===k.w?(k.y+=m.h,k.h-=m.h):(r.push({x:k.x+m.w,y:k.y,w:k.w-m.w,h:m.h}),k.y+=m.h,k.h-=m.h);break}}return{w:d,h:u,fill:e/(d*u)||0}}class gs{constructor(e,{pixelRatio:a,version:r,stretchX:d,stretchY:u,content:m,textFitWidth:v,textFitHeight:k}){this.paddedRect=e,this.pixelRatio=a,this.stretchX=d,this.stretchY=u,this.content=m,this.version=r,this.textFitWidth=v,this.textFitHeight=k}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Hp{constructor(e,a){const r={},d={};this.haveRenderCallbacks=[];const u=[];this.addImages(e,r,u),this.addImages(a,d,u);const{w:m,h:v}=Zu(u),k=new Xo({width:m||1,height:v||1});for(const T in e){const P=e[T],z=r[T].paddedRect;Xo.copy(P.data,k,{x:0,y:0},{x:z.x+1,y:z.y+1},P.data)}for(const T in a){const P=a[T],z=d[T].paddedRect,R=z.x+1,H=z.y+1,V=P.data.width,W=P.data.height;Xo.copy(P.data,k,{x:0,y:0},{x:R,y:H},P.data),Xo.copy(P.data,k,{x:0,y:W-1},{x:R,y:H-1},{width:V,height:1}),Xo.copy(P.data,k,{x:0,y:0},{x:R,y:H+W},{width:V,height:1}),Xo.copy(P.data,k,{x:V-1,y:0},{x:R-1,y:H},{width:1,height:W}),Xo.copy(P.data,k,{x:0,y:0},{x:R+V,y:H},{width:1,height:W})}this.image=k,this.iconPositions=r,this.patternPositions=d}addImages(e,a,r){for(const d in e){const u=e[d],m={x:0,y:0,w:u.data.width+2,h:u.data.height+2};r.push(m),a[d]=new gs(m,u),u.hasRenderCallback&&this.haveRenderCallbacks.push(d)}}patchUpdatedImages(e,a){e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const r in e.updatedImages)this.patchUpdatedImage(this.iconPositions[r],e.getImage(r),a),this.patchUpdatedImage(this.patternPositions[r],e.getImage(r),a)}patchUpdatedImage(e,a,r){if(!e||!a||e.version===a.version)return;e.version=a.version;const[d,u]=e.tl;r.update(a.data,void 0,{x:d,y:u})}}var bd;function zc(s,e,a,r,d,u,m,v,k,T,P,z,R,H,V){const W=rf.fromFeature(s,d);let X;z===E.az.vertical&&W.verticalizePunctuation();let ee=W.determineLineBreaks(T,u,e,r,H);const{processBidirectionalText:ue,processStyledBidirectionalText:ae}=Bi;if(ue&&W.sections.length===1){X=[],ee=ee.map((Fe=>W.toCodeUnitIndex(Fe)));const ve=ue(W.toString(),ee);for(const Fe of ve){const ot=[...Fe].map((()=>0));X.push(new rf(Fe,W.sections,ot))}}else if(ae){X=[],ee=ee.map((et=>W.toCodeUnitIndex(et)));let ve=0;const Fe=[];for(const et of W.text)Fe.push(...Array(et.length).fill(W.sectionIndex[ve])),ve++;const ot=ae(W.text,Fe,ee);for(const et of ot){const lt=[];let At="";for(const yt of et[0])lt.push(et[1][At.length]),At+=yt;X.push(new rf(et[0],W.sections,lt))}}else X=(function(ve,Fe){const ot=[];let et=0;for(const lt of Fe)ot.push(ve.substring(et,lt)),et=lt;return et<ve.length()&&ot.push(ve.substring(et,ve.length())),ot})(W,ee);const oe=[],ge={positionedLines:oe,text:W.toString(),top:P[1],bottom:P[1],left:P[0],right:P[0],writingMode:z,iconsInText:!1,verticalizable:!1};return(function(ve,Fe,ot,et,lt,At,yt,ut,Ke,xt,Pt,Lt){let _t=0,Yt=0,Da=0,ga=0;const en=ut==="right"?1:ut==="left"?0:.5,Qo=Bn/Lt;let Zn=0;for(const ds of lt){ds.trim();const gn=ds.getMaxScale(),_n={positionedGlyphs:[],lineOffset:0};ve.positionedLines[Zn]=_n;const Fs=_n.positionedGlyphs;let wr=0;if(!ds.length()){Yt+=At,++Zn;continue}const Jo=wy(et,ds,Qo);let vr=0;for(const Ao of ds.text){const on=ds.getSection(vr),Xn=Ao.codePointAt(0),yn=Np(Ke,Pt,Xn),So={glyph:Xn,imageName:null,x:_t,y:Yt+-17,vertical:yn,scale:1,fontStack:"",sectionIndex:ds.getSectionIndex(vr),metrics:null,rect:null};let ff;if("fontStack"in on){if(ff=Vf(on,Xn,yn,Jo,Fe,ot),!ff)continue;So.fontStack=on.fontStack}else{if(ve.iconsInText=!0,on.scale*=Qo,ff=Yu(on,yn,gn,Jo,et),!ff)continue;wr=Math.max(wr,ff.imageOffset),So.imageName=on.imageName}const{rect:ql,metrics:Pm,baselineOffset:tc}=ff;So.y+=tc,So.scale=on.scale,So.metrics=Pm,So.rect=ql,Fs.push(So),yn?(ve.verticalizable=!0,_t+=("imageName"in on?Pm.advance:Bn)*on.scale+xt):_t+=Pm.advance*on.scale+xt,vr++}Fs.length!==0&&(Da=Math.max(_t-xt,Da),Gp(Fs,0,Fs.length-1,en)),_t=0,_n.lineOffset=Math.max(wr,(gn-1)*Bn);const ol=At*gn+wr;Yt+=ol,ga=Math.max(ol,ga),++Zn}const{horizontalAlign:tn,verticalAlign:Vs}=Xu(yt);(function(ds,gn,_n,Fs,wr,Jo,vr,ol,Ao){const on=(gn-_n)*wr;let Xn=0;Xn=Jo!==vr?-ol*Fs- -17:-Fs*Ao*vr+.5*vr;for(const yn of ds)for(const So of yn.positionedGlyphs)So.x+=on,So.y+=Xn})(ve.positionedLines,en,tn,Vs,Da,ga,At,Yt,lt.length),ve.top+=-Vs*Yt,ve.bottom=ve.top+Yt,ve.left+=-tn*Da,ve.right=ve.left+Da})(ge,e,a,r,X,m,v,k,z,T,R,V),!(function(ve){for(const Fe of ve)if(Fe.positionedGlyphs.length!==0)return!1;return!0})(oe)&&ge}function Xu(s){let e=.5,a=.5;switch(s){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(s){case"bottom":case"bottom-right":case"bottom-left":a=1;break;case"top":case"top-right":case"top-left":a=0}return{horizontalAlign:e,verticalAlign:a}}function wy(s,e,a){const r=e.getMaxScale()*Bn,{maxImageWidth:d,maxImageHeight:u}=e.getMaxImageSize(s),m=Math.max(r,u*a);return{verticalLineContentWidth:Math.max(r,d*a),horizontalLineContentHeight:m}}function gg(s){switch(s){case"top":return 0;case"center":return .5;default:return 1}}function Np(s,e,a){return!(s===E.az.horizontal||!e&&!kl(a)||e&&(jd(a)||(r=a,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(r)))));var r}function Vf(s,e,a,r,d,u){const m=u[s.fontStack],v=(function(T,P,z,R){if(T&&T.rect)return T;const H=P[z.fontStack],V=H&&H[R];return V?{rect:null,metrics:V.metrics}:null})(m&&m[e],d,s,e);if(v===null)return null;let k;if(a)k=r.verticalLineContentWidth-s.scale*Bn;else{const T=gg(s.verticalAlign);k=(r.horizontalLineContentHeight-s.scale*Bn)*T}return{rect:v.rect,metrics:v.metrics,baselineOffset:k}}function Yu(s,e,a,r,d){const u=d[s.imageName];if(!u)return null;const m=u.paddedRect,v=u.displaySize,k={width:v[0],height:v[1],left:1,top:-3,advance:e?v[1]:v[0]};let T;if(e)T=r.verticalLineContentWidth-v[1]*s.scale;else{const P=gg(s.verticalAlign);T=(r.horizontalLineContentHeight-v[1]*s.scale)*P}return{rect:m,metrics:k,baselineOffset:T,imageOffset:(e?v[0]:v[1])*s.scale-Bn*a}}function Gp(s,e,a,r){if(r===0)return;const d=s[a],u=(s[a].x+d.metrics.advance*d.scale)*r;for(let m=e;m<=a;m++)s[m].x-=u}function $u(s,e,a){const{horizontalAlign:r,verticalAlign:d}=Xu(a),u=e[0]-s.displaySize[0]*r,m=e[1]-s.displaySize[1]*d;return{image:s,top:m,bottom:m+s.displaySize[1],left:u,right:u+s.displaySize[0]}}function Nl(s){var e,a;let r=s.left,d=s.top,u=s.right-r,m=s.bottom-d;const v=(e=s.image.textFitWidth)!==null&&e!==void 0?e:"stretchOrShrink",k=(a=s.image.textFitHeight)!==null&&a!==void 0?a:"stretchOrShrink",T=(s.image.content[2]-s.image.content[0])/(s.image.content[3]-s.image.content[1]);if(k==="proportional"){if(v==="stretchOnly"&&u/m<T||v==="proportional"){const P=Math.ceil(m*T);r*=P/u,u=P}}else if(v==="proportional"&&k==="stretchOnly"&&T!==0&&u/m>T){const P=Math.ceil(u/T);d*=P/m,m=P}return{x1:r,y1:d,x2:r+u,y2:d+m}}function Ph(s,e,a,r,d,u){const m=s.image;let v;if(m.content){const X=m.content,ee=m.pixelRatio||1;v=[X[0]/ee,X[1]/ee,m.displaySize[0]-X[2]/ee,m.displaySize[1]-X[3]/ee]}const k=e.left*u,T=e.right*u;let P,z,R,H;a==="width"||a==="both"?(H=d[0]+k-r[3],z=d[0]+T+r[1]):(H=d[0]+(k+T-m.displaySize[0])/2,z=H+m.displaySize[0]);const V=e.top*u,W=e.bottom*u;return a==="height"||a==="both"?(P=d[1]+V-r[0],R=d[1]+W+r[2]):(P=d[1]+(V+W-m.displaySize[1])/2,R=P+m.displaySize[1]),{image:m,top:P,right:z,bottom:R,left:H,collisionPadding:v}}Rt("ImagePosition",gs),Rt("ImageAtlas",Hp),E.az=void 0,(bd=E.az||(E.az={}))[bd.none=0]="none",bd[bd.horizontal=1]="horizontal",bd[bd.vertical=2]="vertical",bd[bd.horizontalOnly=3]="horizontalOnly";const yr=128,wd=32640;function Ku(s,e){const{expression:a}=e;if(a.kind==="constant")return{kind:"constant",layoutSize:a.evaluate(new as(s+1))};if(a.kind==="source")return{kind:"source"};{const{zoomStops:r,interpolationType:d}=a;let u=0;for(;u<r.length&&r[u]<=s;)u++;u=Math.max(0,u-1);let m=u;for(;m<r.length&&r[m]<s+1;)m++;m=Math.min(r.length-1,m);const v=r[u],k=r[m];return a.kind==="composite"?{kind:"composite",minZoom:v,maxZoom:k,interpolationType:d}:{kind:"camera",minZoom:v,maxZoom:k,minSize:a.evaluate(new as(v)),maxSize:a.evaluate(new as(k)),interpolationType:d}}}function Fp(s,e,a){let r="never";const d=s.get(e);return d?r=d:s.get(a)&&(r="always"),r}const yg=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Dc(s,e,a,r,d,u,m,v,k,T,P,z,R){const H=v?Math.min(wd,Math.round(v[0])):0,V=v?Math.min(wd,Math.round(v[1])):0;s.emplaceBack(e,a,Math.round(32*r),Math.round(32*d),u,m,(H<<1)+(k?1:0),V,16*T,16*P,256*z,256*R)}function Qu(s,e,a){s.emplaceBack(e.x,e.y,a),s.emplaceBack(e.x,e.y,a),s.emplaceBack(e.x,e.y,a),s.emplaceBack(e.x,e.y,a)}function Ju(s){for(const e of s.sections)if(vh(e.text))return!0;return!1}class jp{constructor(e){this.layoutVertexArray=new me,this.indexArray=new Ve,this.programConfigurations=e,this.segments=new Tt,this.dynamicLayoutVertexArray=new Ee,this.opacityVertexArray=new Ze,this.hasVisibleVertices=!1,this.placedSymbolArray=new O}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(e,a,r,d){this.isEmpty()||(r&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ng.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,a),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,Cc.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,yg,!0),this.opacityVertexBuffer.itemSize=1),(r||d)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Rt("SymbolBuffers",jp);class Up{constructor(e,a,r){this.layoutVertexArray=new e,this.layoutAttributes=a,this.indexArray=new r,this.segments=new Tt,this.collisionVertexArray=new qe}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,qu.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Rt("CollisionBuffers",Up);class Wf{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((m=>m.id)),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasDependencies=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const a=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Ku(this.zoom,a["text-size"]),this.iconSizeData=Ku(this.zoom,a["icon-size"]);const r=this.layers[0].layout,d=r.get("symbol-sort-key"),u=r.get("symbol-z-order");this.canOverlap=Fp(r,"text-overlap","text-allow-overlap")!=="never"||Fp(r,"icon-overlap","icon-allow-overlap")!=="never"||r.get("text-ignore-placement")||r.get("icon-ignore-placement"),this.sortFeaturesByKey=u!=="viewport-y"&&!d.isConstant(),this.sortFeaturesByY=(u==="viewport-y"||u==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,r.get("symbol-placement")==="point"&&(this.writingModes=r.get("text-writing-mode").map((m=>E.az[m]))),this.stateDependentLayerIds=this.layers.filter((m=>m.isStateDependent())).map((m=>m.id)),this.sourceID=e.sourceID}createArrays(){this.text=new jp(new Kh(this.layers,this.zoom,(e=>/^text/.test(e)))),this.icon=new jp(new Kh(this.layers,this.zoom,(e=>/^icon/.test(e)))),this.glyphOffsetArray=new C,this.lineVertexArray=new D,this.symbolInstances=new A,this.textAnchorOffsets=new G}calculateGlyphDependencies(e,a,r,d,u){for(const m of e)if(a[m.codePointAt(0)]=!0,(r||d)&&u){const v=Ff[m];v&&(a[v.codePointAt(0)]=!0)}}populate(e,a,r){const d=this.layers[0],u=d.layout,m=u.get("text-font"),v=u.get("text-field"),k=u.get("icon-image"),T=(v.value.kind!=="constant"||v.value.value instanceof fn&&!v.value.value.isEmpty()||v.value.value.toString().length>0)&&(m.value.kind!=="constant"||m.value.value.length>0),P=k.value.kind!=="constant"||!!k.value.value||Object.keys(k.parameters).length>0,z=u.get("symbol-sort-key");if(this.features=[],!T&&!P)return;const R=a.iconDependencies,H=a.glyphDependencies,V=a.availableImages,W=new as(this.zoom);for(const{feature:X,id:ee,index:ue,sourceLayerIndex:ae}of e){const oe=d._featureFilter.needGeometry,ge=mr(X,oe);if(!d._featureFilter.filter(W,ge,r))continue;let ve,Fe;if(oe||(ge.geometry=Th(X)),T){const et=d.getValueAndResolveTokens("text-field",ge,r,V),lt=fn.factory(et),At=this.hasRTLText=this.hasRTLText||Ju(lt);(!At||Bi.getRTLTextPluginStatus()==="unavailable"||At&&Bi.isParsed())&&(ve=Vi(lt,d,ge))}if(P){const et=d.getValueAndResolveTokens("icon-image",ge,r,V);Fe=et instanceof Pn?et:Pn.fromString(et)}if(!ve&&!Fe)continue;const ot=this.sortFeaturesByKey?z.evaluate(ge,{},r):void 0;if(this.features.push({id:ee,text:ve,icon:Fe,index:ue,sourceLayerIndex:ae,geometry:ge.geometry,properties:X.properties,type:Hf.types[X.type],sortKey:ot}),Fe&&(R[Fe.name]=!0),ve){const et=m.evaluate(ge,{},r).join(","),lt=u.get("text-rotation-alignment")!=="viewport"&&u.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(E.az.vertical)>=0;for(const At of ve.sections)if(At.image)R[At.image.name]=!0;else{const yt=jr(ve.toString()),ut=At.fontStack||et,Ke=H[ut]=H[ut]||{};this.calculateGlyphDependencies(At.text,Ke,lt,this.allowVerticalPlacement,yt)}}}u.get("symbol-placement")==="line"&&(this.features=(function(X){const ee={},ue={},ae=[];let oe=0;function ge(et){ae.push(X[et]),oe++}function ve(et,lt,At){const yt=ue[et];return delete ue[et],ue[lt]=yt,ae[yt].geometry[0].pop(),ae[yt].geometry[0]=ae[yt].geometry[0].concat(At[0]),yt}function Fe(et,lt,At){const yt=ee[lt];return delete ee[lt],ee[et]=yt,ae[yt].geometry[0].shift(),ae[yt].geometry[0]=At[0].concat(ae[yt].geometry[0]),yt}function ot(et,lt,At){const yt=At?lt[0][lt[0].length-1]:lt[0][0];return`${et}:${yt.x}:${yt.y}`}for(let et=0;et<X.length;et++){const lt=X[et],At=lt.geometry,yt=lt.text?lt.text.toString():null;if(!yt){ge(et);continue}const ut=ot(yt,At),Ke=ot(yt,At,!0);if(ut in ue&&Ke in ee&&ue[ut]!==ee[Ke]){const xt=Fe(ut,Ke,At),Pt=ve(ut,Ke,ae[xt].geometry);delete ee[ut],delete ue[Ke],ue[ot(yt,ae[Pt].geometry,!0)]=Pt,ae[xt].geometry=null}else ut in ue?ve(ut,Ke,At):Ke in ee?Fe(ut,Ke,At):(ge(et),ee[ut]=oe-1,ue[Ke]=oe-1)}return ae.filter((et=>et.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((X,ee)=>X.sortKey-ee.sortKey))}update(e,a,r){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,a,this.layers,{imagePositions:r}),this.icon.programConfigurations.updatePaintArrays(e,a,this.layers,{imagePositions:r}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,a){const r=this.lineVertexArray.length;if(e.segment!==void 0){let d=e.dist(a[e.segment+1]),u=e.dist(a[e.segment]);const m={};for(let v=e.segment+1;v<a.length;v++)m[v]={x:a[v].x,y:a[v].y,tileUnitDistanceFromAnchor:d},v<a.length-1&&(d+=a[v+1].dist(a[v]));for(let v=e.segment||0;v>=0;v--)m[v]={x:a[v].x,y:a[v].y,tileUnitDistanceFromAnchor:u},v>0&&(u+=a[v-1].dist(a[v]));for(let v=0;v<a.length;v++){const k=m[v];this.lineVertexArray.emplaceBack(k.x,k.y,k.tileUnitDistanceFromAnchor)}}return{lineStartIndex:r,lineLength:this.lineVertexArray.length-r}}addSymbols(e,a,r,d,u,m,v,k,T,P,z,R){const H=e.indexArray,V=e.layoutVertexArray,W=e.segments.prepareSegment(4*a.length,V,H,this.canOverlap?m.sortKey:void 0),X=this.glyphOffsetArray.length,ee=W.vertexLength,ue=this.allowVerticalPlacement&&v===E.az.vertical?Math.PI/2:0,ae=m.text&&m.text.sections;for(let oe=0;oe<a.length;oe++){const{tl:ge,tr:ve,bl:Fe,br:ot,tex:et,pixelOffsetTL:lt,pixelOffsetBR:At,minFontScaleX:yt,minFontScaleY:ut,glyphOffset:Ke,isSDF:xt,sectionIndex:Pt}=a[oe],Lt=W.vertexLength,_t=Ke[1];Dc(V,k.x,k.y,ge.x,_t+ge.y,et.x,et.y,r,xt,lt.x,lt.y,yt,ut),Dc(V,k.x,k.y,ve.x,_t+ve.y,et.x+et.w,et.y,r,xt,At.x,lt.y,yt,ut),Dc(V,k.x,k.y,Fe.x,_t+Fe.y,et.x,et.y+et.h,r,xt,lt.x,At.y,yt,ut),Dc(V,k.x,k.y,ot.x,_t+ot.y,et.x+et.w,et.y+et.h,r,xt,At.x,At.y,yt,ut),Qu(e.dynamicLayoutVertexArray,k,ue),H.emplaceBack(Lt,Lt+2,Lt+1),H.emplaceBack(Lt+1,Lt+2,Lt+3),W.vertexLength+=4,W.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ke[0]),oe!==a.length-1&&Pt===a[oe+1].sectionIndex||e.programConfigurations.populatePaintArrays(V.length,m,m.index,{imagePositions:{},canonical:R,formattedSection:ae&&ae[Pt]})}e.placedSymbolArray.emplaceBack(k.x,k.y,X,this.glyphOffsetArray.length-X,ee,T,P,k.segment,r?r[0]:0,r?r[1]:0,d[0],d[1],v,0,!1,0,z)}_addCollisionDebugVertex(e,a,r,d,u,m){return a.emplaceBack(0,0),e.emplaceBack(r.x,r.y,d,u,Math.round(m.x),Math.round(m.y))}addCollisionDebugVertices(e,a,r,d,u,m,v){const k=u.segments.prepareSegment(4,u.layoutVertexArray,u.indexArray),T=k.vertexLength,P=u.layoutVertexArray,z=u.collisionVertexArray,R=v.anchorX,H=v.anchorY;this._addCollisionDebugVertex(P,z,m,R,H,new re(e,a)),this._addCollisionDebugVertex(P,z,m,R,H,new re(r,a)),this._addCollisionDebugVertex(P,z,m,R,H,new re(r,d)),this._addCollisionDebugVertex(P,z,m,R,H,new re(e,d)),k.vertexLength+=4;const V=u.indexArray;V.emplaceBack(T,T+1),V.emplaceBack(T+1,T+2),V.emplaceBack(T+2,T+3),V.emplaceBack(T+3,T),k.primitiveLength+=4}addDebugCollisionBoxes(e,a,r,d){for(let u=e;u<a;u++){const m=this.collisionBoxArray.get(u);this.addCollisionDebugVertices(m.x1,m.y1,m.x2,m.y2,d?this.textCollisionBox:this.iconCollisionBox,m.anchorPoint,r)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Up(Ge,qi.members,bt),this.iconCollisionBox=new Up(Ge,qi.members,bt);for(let e=0;e<this.symbolInstances.length;e++){const a=this.symbolInstances.get(e);this.addDebugCollisionBoxes(a.textBoxStartIndex,a.textBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.iconBoxStartIndex,a.iconBoxEndIndex,a,!1),this.addDebugCollisionBoxes(a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex,a,!1)}}_deserializeCollisionBoxesForSymbol(e,a,r,d,u,m,v,k,T){const P={};for(let z=a;z<r;z++){const R=e.get(z);P.textBox={x1:R.x1,y1:R.y1,x2:R.x2,y2:R.y2,anchorPointX:R.anchorPointX,anchorPointY:R.anchorPointY},P.textFeatureIndex=R.featureIndex;break}for(let z=d;z<u;z++){const R=e.get(z);P.verticalTextBox={x1:R.x1,y1:R.y1,x2:R.x2,y2:R.y2,anchorPointX:R.anchorPointX,anchorPointY:R.anchorPointY},P.verticalTextFeatureIndex=R.featureIndex;break}for(let z=m;z<v;z++){const R=e.get(z);P.iconBox={x1:R.x1,y1:R.y1,x2:R.x2,y2:R.y2,anchorPointX:R.anchorPointX,anchorPointY:R.anchorPointY},P.iconFeatureIndex=R.featureIndex;break}for(let z=k;z<T;z++){const R=e.get(z);P.verticalIconBox={x1:R.x1,y1:R.y1,x2:R.x2,y2:R.y2,anchorPointX:R.anchorPointX,anchorPointY:R.anchorPointY},P.verticalIconFeatureIndex=R.featureIndex;break}return P}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let a=0;a<this.symbolInstances.length;a++){const r=this.symbolInstances.get(a);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,r.textBoxStartIndex,r.textBoxEndIndex,r.verticalTextBoxStartIndex,r.verticalTextBoxEndIndex,r.iconBoxStartIndex,r.iconBoxEndIndex,r.verticalIconBoxStartIndex,r.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,a){const r=e.placedSymbolArray.get(a),d=r.vertexStartIndex+4*r.numGlyphs;for(let u=r.vertexStartIndex;u<d;u+=4)e.indexArray.emplaceBack(u,u+2,u+1),e.indexArray.emplaceBack(u+1,u+2,u+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const a=Math.sin(e),r=Math.cos(e),d=[],u=[],m=[];for(let v=0;v<this.symbolInstances.length;++v){m.push(v);const k=this.symbolInstances.get(v);d.push(0|Math.round(a*k.anchorX+r*k.anchorY)),u.push(k.featureIndex)}return m.sort(((v,k)=>d[v]-d[k]||u[k]-u[v])),m}addToSortKeyRanges(e,a){const r=this.sortKeyRanges[this.sortKeyRanges.length-1];r&&r.sortKey===a?r.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:a,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const a of this.symbolInstanceIndexes){const r=this.symbolInstances.get(a);this.featureSortOrder.push(r.featureIndex),[r.rightJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.leftJustifiedTextSymbolIndex].forEach(((d,u,m)=>{d>=0&&m.indexOf(d)===u&&this.addIndicesForPlacedSymbol(this.text,d)})),r.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,r.verticalPlacedTextSymbolIndex),r.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,r.placedIconSymbolIndex),r.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,r.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let qp,Vp;Rt("SymbolBucket",Wf,{omit:["layers","collisionBoxArray","features","compareText"]}),Wf.MAX_GLYPHS=65535,Wf.addDynamicAttributes=Qu;var em={get paint(){return Vp=Vp||new sn({"icon-opacity":new qt(Ne.paint_symbol["icon-opacity"]),"icon-color":new qt(Ne.paint_symbol["icon-color"]),"icon-halo-color":new qt(Ne.paint_symbol["icon-halo-color"]),"icon-halo-width":new qt(Ne.paint_symbol["icon-halo-width"]),"icon-halo-blur":new qt(Ne.paint_symbol["icon-halo-blur"]),"icon-translate":new Gt(Ne.paint_symbol["icon-translate"]),"icon-translate-anchor":new Gt(Ne.paint_symbol["icon-translate-anchor"]),"text-opacity":new qt(Ne.paint_symbol["text-opacity"]),"text-color":new qt(Ne.paint_symbol["text-color"],{runtimeType:ho,getOverride:s=>s.textColor,hasOverride:s=>!!s.textColor}),"text-halo-color":new qt(Ne.paint_symbol["text-halo-color"]),"text-halo-width":new qt(Ne.paint_symbol["text-halo-width"]),"text-halo-blur":new qt(Ne.paint_symbol["text-halo-blur"]),"text-translate":new Gt(Ne.paint_symbol["text-translate"]),"text-translate-anchor":new Gt(Ne.paint_symbol["text-translate-anchor"])})},get layout(){return qp=qp||new sn({"symbol-placement":new Gt(Ne.layout_symbol["symbol-placement"]),"symbol-spacing":new Gt(Ne.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Gt(Ne.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new qt(Ne.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Gt(Ne.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Gt(Ne.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Gt(Ne.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Gt(Ne.layout_symbol["icon-ignore-placement"]),"icon-optional":new Gt(Ne.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Gt(Ne.layout_symbol["icon-rotation-alignment"]),"icon-size":new qt(Ne.layout_symbol["icon-size"]),"icon-text-fit":new Gt(Ne.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Gt(Ne.layout_symbol["icon-text-fit-padding"]),"icon-image":new qt(Ne.layout_symbol["icon-image"]),"icon-rotate":new qt(Ne.layout_symbol["icon-rotate"]),"icon-padding":new qt(Ne.layout_symbol["icon-padding"]),"icon-keep-upright":new Gt(Ne.layout_symbol["icon-keep-upright"]),"icon-offset":new qt(Ne.layout_symbol["icon-offset"]),"icon-anchor":new qt(Ne.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Gt(Ne.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Gt(Ne.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Gt(Ne.layout_symbol["text-rotation-alignment"]),"text-field":new qt(Ne.layout_symbol["text-field"]),"text-font":new qt(Ne.layout_symbol["text-font"]),"text-size":new qt(Ne.layout_symbol["text-size"]),"text-max-width":new qt(Ne.layout_symbol["text-max-width"]),"text-line-height":new Gt(Ne.layout_symbol["text-line-height"]),"text-letter-spacing":new qt(Ne.layout_symbol["text-letter-spacing"]),"text-justify":new qt(Ne.layout_symbol["text-justify"]),"text-radial-offset":new qt(Ne.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Gt(Ne.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new qt(Ne.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new qt(Ne.layout_symbol["text-anchor"]),"text-max-angle":new Gt(Ne.layout_symbol["text-max-angle"]),"text-writing-mode":new Gt(Ne.layout_symbol["text-writing-mode"]),"text-rotate":new qt(Ne.layout_symbol["text-rotate"]),"text-padding":new Gt(Ne.layout_symbol["text-padding"]),"text-keep-upright":new Gt(Ne.layout_symbol["text-keep-upright"]),"text-transform":new qt(Ne.layout_symbol["text-transform"]),"text-offset":new qt(Ne.layout_symbol["text-offset"]),"text-allow-overlap":new Gt(Ne.layout_symbol["text-allow-overlap"]),"text-overlap":new Gt(Ne.layout_symbol["text-overlap"]),"text-ignore-placement":new Gt(Ne.layout_symbol["text-ignore-placement"]),"text-optional":new Gt(Ne.layout_symbol["text-optional"])})}};class bg{constructor(e){if(e.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=e.property.overrides?e.property.overrides.runtimeType:ts,this.defaultValue=e}evaluate(e){if(e.formattedSection){const a=this.defaultValue.property.overrides;if(a&&a.hasOverride(e.formattedSection))return a.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Rt("FormatSectionOverride",bg,{omit:["defaultValue"]});class vd extends Us{constructor(e,a){super(e,em,a)}recalculate(e,a){if(super.recalculate(e,a),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const r=this.layout.get("text-writing-mode");if(r){const d=[];for(const u of r)d.indexOf(u)<0&&d.push(u);this.layout._values["text-writing-mode"]=d}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(e,a,r,d){const u=this.layout.get(e).evaluate(a,{},r,d),m=this._unevaluatedLayout._values[e];return m.isDataDriven()||Hr(m.value)||!u?u:(function(v,k){return k.replace(/{([^{}]+)}/g,((T,P)=>v&&P in v?String(v[P]):""))})(a.properties,u)}createBucket(e){return new Wf(e)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const e of em.paint.overridableProperties){if(!vd.hasPaintOverride(this.layout,e))continue;const a=this.paint.get(e),r=new bg(a),d=new vl(r,a.property.specification);let u=null;u=a.value.kind==="constant"||a.value.kind==="source"?new y("source",d):new _("composite",d,a.value.zoomStops),this.paint._values[e]=new mi(a.property,u,a.parameters)}}_handleOverridablePaintPropertyUpdate(e,a,r){return!(!this.layout||a.isDataDriven()||r.isDataDriven())&&vd.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,a){const r=e.get("text-field"),d=em.paint.properties[a];let u=!1;const m=v=>{for(const k of v)if(d.overrides&&d.overrides.hasOverride(k))return void(u=!0)};if(r.value.kind==="constant"&&r.value.value instanceof fn)m(r.value.value.sections);else if(r.value.kind==="source"||r.value.kind==="composite"){const v=T=>{u||(T instanceof uo&&wa(T.value)===ti?m(T.value.sections):T instanceof ul?m(T.sections):T.eachChild(v))},k=r.value;k._styleExpression&&v(k._styleExpression.expression)}return u}}let wg;var vg={get paint(){return wg=wg||new sn({"background-color":new Gt(Ne.paint_background["background-color"]),"background-pattern":new dd(Ne.paint_background["background-pattern"]),"background-opacity":new Gt(Ne.paint_background["background-opacity"])})}};class Ua extends Us{constructor(e,a){super(e,vg,a)}}class tm extends Us{constructor(e,a){super(e,{},a),this.onAdd=r=>{this.implementation.onAdd&&this.implementation.onAdd(r,r.painter.context.gl)},this.onRemove=r=>{this.implementation.onRemove&&this.implementation.onRemove(r,r.painter.context.gl)},this.implementation=e}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Wp{constructor(e){this._methodToThrottle=e,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const am={once:!0},Zp=63710088e-1;class sl{constructor(e,a){if(isNaN(e)||isNaN(a))throw new Error(`Invalid LngLat object: (${e}, ${a})`);if(this.lng=+e,this.lat=+a,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new sl(da(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const a=Math.PI/180,r=this.lat*a,d=e.lat*a,u=Math.sin(r)*Math.sin(d)+Math.cos(r)*Math.cos(d)*Math.cos((e.lng-this.lng)*a);return Zp*Math.acos(Math.min(u,1))}static convert(e){if(e instanceof sl)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new sl(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new sl(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Zf=2*Math.PI*Zp;function Bc(s){return Zf*Math.cos(s*Math.PI/180)}function Og(s){return(180+s)/360}function sm(s){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s*Math.PI/360)))/360}function kg(s,e){return s/Bc(e)}function _g(s){return 360*s-180}function Rc(s){return 360/Math.PI*Math.atan(Math.exp((180-360*s)*Math.PI/180))-90}function nm(s,e){return s*Bc(Rc(e))}class hs{constructor(e,a,r=0){this.x=+e,this.y=+a,this.z=+r}static fromLngLat(e,a=0){const r=sl.convert(e);return new hs(Og(r.lng),sm(r.lat),kg(a,r.lat))}toLngLat(){return new sl(_g(this.x),Rc(this.y))}toAltitude(){return nm(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Zf*(e=Rc(this.y),1/Math.cos(e*Math.PI/180));var e}}function Xp(s,e,a){var r=2*Math.PI*6378137/256/Math.pow(2,a);return[s*r-2*Math.PI*6378137/2,e*r-2*Math.PI*6378137/2]}class io{constructor(e,a,r){if(!(function(d,u,m){return!(d<0||d>25||m<0||m>=Math.pow(2,d)||u<0||u>=Math.pow(2,d))})(e,a,r))throw new Error(`x=${a}, y=${r}, z=${e} outside of bounds. 0<=x<${Math.pow(2,e)}, 0<=y<${Math.pow(2,e)} 0<=z<=25 `);this.z=e,this.x=a,this.y=r,this.key=Xf(0,e,e,a,r)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,a,r){const d=(function(m,v,k){var T=Xp(256*m,256*(v=Math.pow(2,k)-v-1),k),P=Xp(256*(m+1),256*(v+1),k);return T[0]+","+T[1]+","+P[0]+","+P[1]})(this.x,this.y,this.z),u=(function(m,v,k){let T,P="";for(let z=m;z>0;z--)T=1<<z-1,P+=(v&T?1:0)+(k&T?2:0);return P})(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(r==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,a>1?"@2x":"").replace(/{quadkey}/g,u).replace(/{bbox-epsg-3857}/g,d)}isChildOf(e){const a=this.z-e.z;return a>0&&e.x===this.x>>a&&e.y===this.y>>a}getTilePoint(e){const a=Math.pow(2,this.z);return new re((e.x*a-this.x)*jt,(e.y*a-this.y)*jt)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Ig{constructor(e,a){this.wrap=e,this.canonical=a,this.key=Xf(e,a.z,a.z,a.x,a.y)}}class Wi{constructor(e,a,r,d,u){if(this.terrainRttPosMatrix32f=null,e<r)throw new Error(`overscaledZ should be >= z; overscaledZ = ${e}; z = ${r}`);this.overscaledZ=e,this.wrap=a,this.canonical=new io(r,+d,+u),this.key=Xf(a,e,r,d,u)}clone(){return new Wi(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = ${this.overscaledZ}`);const a=this.canonical.z-e;return e>this.canonical.z?new Wi(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Wi(e,this.wrap,e,this.canonical.x>>a,this.canonical.y>>a)}isOverscaled(){return this.overscaledZ>this.canonical.z}calculateScaledKey(e,a){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = ${this.overscaledZ}`);const r=this.canonical.z-e;return e>this.canonical.z?Xf(this.wrap*+a,e,this.canonical.z,this.canonical.x,this.canonical.y):Xf(this.wrap*+a,e,e,this.canonical.x>>r,this.canonical.y>>r)}isChildOf(e){if(e.wrap!==this.wrap||this.overscaledZ-e.overscaledZ<=0)return!1;if(e.overscaledZ===0)return this.overscaledZ>0;const a=this.canonical.z-e.canonical.z;return!(a<0)&&e.canonical.x===this.canonical.x>>a&&e.canonical.y===this.canonical.y>>a}children(e){if(this.overscaledZ>=e)return[new Wi(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const a=this.canonical.z+1,r=2*this.canonical.x,d=2*this.canonical.y;return[new Wi(a,this.wrap,a,r,d),new Wi(a,this.wrap,a,r+1,d),new Wi(a,this.wrap,a,r,d+1),new Wi(a,this.wrap,a,r+1,d+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new Wi(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new Wi(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Ig(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(e){return this.canonical.getTilePoint(new hs(e.x-this.wrap,e.y))}}function Xf(s,e,a,r,d){(s*=2)<0&&(s=-1*s-1);const u=1<<a;return(u*u*s+u*d+r).toString(36)+a.toString(36)+e.toString(36)}function Hc(s,e){return e?s.properties[e]:s.id}function om(s,e){const a={id:s.id};if(e.removeAllProperties&&(delete s.removeProperties,delete s.addOrUpdateProperties,delete e.removeProperties),e.removeProperties)for(const r of e.removeProperties){const d=s.addOrUpdateProperties.findIndex((u=>u.key===r));d>-1&&s.addOrUpdateProperties.splice(d,1)}return(s.removeAllProperties||e.removeAllProperties)&&(a.removeAllProperties=!0),(s.removeProperties||e.removeProperties)&&(a.removeProperties=[...s.removeProperties||[],...e.removeProperties||[]]),(s.addOrUpdateProperties||e.addOrUpdateProperties)&&(a.addOrUpdateProperties=[...s.addOrUpdateProperties||[],...e.addOrUpdateProperties||[]]),(s.newGeometry||e.newGeometry)&&(a.newGeometry=e.newGeometry||s.newGeometry),a}function Nc(s){var e,a;if(!s)return{};const r={};return r.removeAll=s.removeAll,r.remove=new Set(s.remove||[]),r.add=new Map((e=s.add)===null||e===void 0?void 0:e.map((d=>[d.id,d]))),r.update=new Map((a=s.update)===null||a===void 0?void 0:a.map((d=>[d.id,d]))),r}Rt("CanonicalTileID",io),Rt("OverscaledTileID",Wi,{omit:["terrainRttPosMatrix32f"]});class Od{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(e){return this.minX=Math.min(this.minX,e.x),this.minY=Math.min(this.minY,e.y),this.maxX=Math.max(this.maxX,e.x),this.maxY=Math.max(this.maxY,e.y),this}expandBy(e){return this.minX-=e,this.minY-=e,this.maxX+=e,this.maxY+=e,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(e){return this.expandBy(-e)}map(e){const a=new Od;return a.extend(e(new re(this.minX,this.minY))),a.extend(e(new re(this.maxX,this.minY))),a.extend(e(new re(this.minX,this.maxY))),a.extend(e(new re(this.maxX,this.maxY))),a}static fromPoints(e){const a=new Od;for(const r of e)a.extend(r);return a}contains(e){return e.x>=this.minX&&e.x<=this.maxX&&e.y>=this.minY&&e.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(e){return!this.empty()&&!e.empty()&&e.minX>=this.minX&&e.maxX<=this.maxX&&e.minY>=this.minY&&e.maxY<=this.maxY}intersects(e){return!this.empty()&&!e.empty()&&e.minX<=this.maxX&&e.maxX>=this.minX&&e.minY<=this.maxY&&e.maxY>=this.minY}}class im{constructor(e){this._stringToNumber={},this._numberToString=[];for(let a=0;a<e.length;a++){const r=e[a];this._stringToNumber[r]=a,this._numberToString[a]=r}}encode(e){return this._stringToNumber[e]}decode(e){if(e>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${e} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[e]}}class Yp{constructor(e,a,r,d,u){this.type="Feature",this._vectorTileFeature=e,this._x=r,this._y=d,this._z=a,this.properties=e.properties,this.id=u}projectPoint(e,a,r,d){return[360*(e.x+a)/d-180,360/Math.PI*Math.atan(Math.exp((1-2*(e.y+r)/d)*Math.PI))-90]}projectLine(e,a,r,d){return e.map((u=>this.projectPoint(u,a,r,d)))}get geometry(){if(this._geometry)return this._geometry;const e=this._vectorTileFeature,a=e.extent*Math.pow(2,this._z),r=e.extent*this._x,d=e.extent*this._y,u=e.loadGeometry();switch(e.type){case 1:{const m=[];for(const k of u)m.push(k[0]);const v=this.projectLine(m,r,d,a);this._geometry=m.length===1?{type:"Point",coordinates:v[0]}:{type:"MultiPoint",coordinates:v};break}case 2:{const m=u.map((v=>this.projectLine(v,r,d,a)));this._geometry=m.length===1?{type:"LineString",coordinates:m[0]}:{type:"MultiLineString",coordinates:m};break}case 3:{const m=ag(u),v=[];for(const k of m)v.push(k.map((T=>this.projectLine(T,r,d,a))));this._geometry=v.length===1?{type:"Polygon",coordinates:v[0]}:{type:"MultiPolygon",coordinates:v};break}default:throw new Error(`unknown feature type: ${e.type}`)}return this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={geometry:this.geometry};for(const a in this)a!=="_geometry"&&a!=="_vectorTileFeature"&&a!=="_x"&&a!=="_y"&&a!=="_z"&&(e[a]=this[a]);return e}}class kd{constructor(e,a,r){ya(this,"_name");ya(this,"dataBuffer");ya(this,"nullabilityBuffer");ya(this,"_size");this._name=e,this.dataBuffer=a,typeof r=="number"?this._size=r:(this.nullabilityBuffer=r,this._size=r.size())}getValue(e){return this.nullabilityBuffer&&!this.nullabilityBuffer.get(e)?null:this.getValueFromBuffer(e)}has(e){return this.nullabilityBuffer&&this.nullabilityBuffer.get(e)||!this.nullabilityBuffer}get name(){return this._name}get size(){return this._size}}class $p extends kd{}class Kp extends $p{getValueFromBuffer(e){return this.dataBuffer[e]}}class rm extends $p{getValueFromBuffer(e){return this.dataBuffer[e]}}class hm extends kd{constructor(a,r,d,u){super(a,r,u);ya(this,"delta");this.delta=d}}class lm extends hm{constructor(e,a,r,d){super(e,Int32Array.of(a),r,d)}getValueFromBuffer(e){return this.dataBuffer[0]+e*this.delta}}class dm extends kd{constructor(e,a,r){super(e,Int32Array.of(a),r)}getValueFromBuffer(e){return this.dataBuffer[0]}}class _d{constructor(e,a,r,d,u=4096){ya(this,"_name");ya(this,"_geometryVector");ya(this,"_idVector");ya(this,"_propertyVectors");ya(this,"_extent");ya(this,"propertyVectorsMap");this._name=e,this._geometryVector=a,this._idVector=r,this._propertyVectors=d,this._extent=u}get name(){return this._name}get idVector(){return this._idVector}get geometryVector(){return this._geometryVector}get propertyVectors(){return this._propertyVectors}getPropertyVector(e){return this.propertyVectorsMap||(this.propertyVectorsMap=new Map(this._propertyVectors.map((a=>[a.name,a])))),this.propertyVectorsMap.get(e)}*[Symbol.iterator](){const e=this.geometryVector[Symbol.iterator]();let a=0;for(;a<this.numFeatures;){let r;this.idVector&&(r=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(a)):this.idVector.getValue(a));const d=e==null?void 0:e.next().value,u={};for(const m of this.propertyVectors){if(!m)continue;const v=m.name,k=m.getValue(a);k!==null&&(u[v]=k)}a++,yield{id:r,geometry:d,properties:u}}}get numFeatures(){return this.geometryVector.numGeometries}get extent(){return this._extent}getFeatures(){const e=[],a=this.geometryVector.getGeometries();for(let r=0;r<this.numFeatures;r++){let d;this.idVector&&(d=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(r)):this.idVector.getValue(r));const u={coordinates:a[r],type:this.geometryVector.geometryType(r)},m={};for(const v of this.propertyVectors){if(!v)continue;const k=v.name,T=v.getValue(r);T!==null&&(m[k]=T)}e.push({id:d,geometry:u,properties:m})}return e}containsMaxSaveIntegerValues(e){return e instanceof Kp||e instanceof dm&&e instanceof lm||e instanceof rm}}class xg{constructor(e){ya(this,"value");this.value=e}get(){return this.value}set(e){this.value=e}increment(){return this.value++}add(e){this.value+=e}}var Ta,Eh,xo,Ch,Id,Yo,kn,Vn,br,vi;function Wn(s,e,a){const r=new Int32Array(a);let d=0,u=e.get();for(let m=0;m<r.length;m++){let v=s[u++],k=127&v;v<128||(v=s[u++],k|=(127&v)<<7,v<128||(v=s[u++],k|=(127&v)<<14,v<128||(v=s[u++],k|=(127&v)<<21,v<128||(v=s[u++],k|=(15&v)<<28)))),r[d++]=k}return e.set(u),r}function Gc(s,e,a){const r=new BigInt64Array(a);for(let d=0;d<r.length;d++)r[d]=Qp(s,e);return r}function Tg(s,e){let a,r;return r=s[e.get()],e.increment(),a=127&r,r<128?a:(r=s[e.get()],e.increment(),a|=(127&r)<<7,r<128?a:(r=s[e.get()],e.increment(),a|=(127&r)<<14,r<128?a:(r=s[e.get()],e.increment(),a|=(127&r)<<21,r<128?a:(r=s[e.get()],a|=(15&r)<<28,(function(d,u,m){let v,k;if(k=u[m.get()],m.increment(),v=(112&k)>>4,k<128||(k=u[m.get()],m.increment(),v|=(127&k)<<3,k<128)||(k=u[m.get()],m.increment(),v|=(127&k)<<10,k<128)||(k=u[m.get()],m.increment(),v|=(127&k)<<17,k<128)||(k=u[m.get()],m.increment(),v|=(127&k)<<24,k<128)||(k=u[m.get()],m.increment(),v|=(1&k)<<31,k<128))return 4294967296*v+(d>>>0);throw new Error("Expected varint not more than 10 bytes")})(a,s,e)))))}function Yf(s,e,a,r){throw new Error("FastPFor is not implemented yet.")}function To(s){return s>>>1^-(1&s)}function hf(s){return s>>BigInt(1)^-(BigInt(1)&s)}function Qp(s,e){let a=BigInt(0),r=0,d=e.get();for(;d<s.length;){const u=s[d++];if(a|=BigInt(127&u)<<BigInt(r),!(128&u))break;if(r+=7,r>=64)throw new Error("Varint too long")}return e.set(d),a}function nl(s,e,a){const r=new Int32Array(a);let d=0;for(let u=0;u<e;u++){const m=s[u];r.fill(s[u+e],d,d+m),d+=m}return r}function Ag(s,e,a){const r=new BigInt64Array(a);let d=0;for(let u=0;u<e;u++){const m=Number(s[u]);r.fill(s[u+e],d,d+m),d+=m}return r}function Sg(s,e,a){const r=new Float64Array(a);let d=0;for(let u=0;u<e;u++){const m=s[u];r.fill(s[u+e],d,d+m),d+=m}return r}function xd(s){const e=s.length/4*4;let a=1;if(e>=4)for(let r=s[0];a<e-4;a+=4)r=s[a]+=r,r=s[a+1]+=r,r=s[a+2]+=r,r=s[a+3]+=r;for(;a!=s.length;)s[a]+=s[a-1],++a}function fm(s){s[0]=s[0]>>>1^-(1&s[0]),s[1]=s[1]>>>1^-(1&s[1]);const e=s.length/4*4;let a=2;if(e>=4)for(;a<e-4;a+=4){const r=s[a],d=s[a+1],u=s[a+2],m=s[a+3];s[a]=(r>>>1^-(1&r))+s[a-2],s[a+1]=(d>>>1^-(1&d))+s[a-1],s[a+2]=(u>>>1^-(1&u))+s[a],s[a+3]=(m>>>1^-(1&m))+s[a+1]}for(;a!=s.length;a+=2)s[a]=(s[a]>>>1^-(1&s[a]))+s[a-2],s[a+1]=(s[a+1]>>>1^-(1&s[a+1]))+s[a-1]}(function(s){s.NONE="NONE",s.DELTA="DELTA",s.COMPONENTWISE_DELTA="COMPONENTWISE_DELTA",s.RLE="RLE",s.MORTON="MORTON",s.PDE="PDE"})(Ta||(Ta={})),(function(s){s.NONE="NONE",s.FAST_PFOR="FAST_PFOR",s.VARINT="VARINT",s.ALP="ALP"})(Eh||(Eh={})),(function(s){s.PRESENT="PRESENT",s.DATA="DATA",s.OFFSET="OFFSET",s.LENGTH="LENGTH"})(xo||(xo={}));class cm{constructor(e,a,r){ya(this,"_dictionaryType");ya(this,"_offsetType");ya(this,"_lengthType");this._dictionaryType=e,this._offsetType=a,this._lengthType=r}get dictionaryType(){return this._dictionaryType}get offsetType(){return this._offsetType}get lengthType(){return this._lengthType}}function $o(s,e){const a=(function(r,d){const u=r[d.get()],m=Object.values(xo)[u>>4];let v=null;switch(m){case xo.DATA:v=new cm(Object.values(Ch)[15&u]);break;case xo.OFFSET:v=new cm(null,Object.values(Id)[15&u]);break;case xo.LENGTH:v=new cm(null,null,Object.values(Yo)[15&u])}d.increment();const k=r[d.get()],T=Object.values(Ta)[k>>5],P=Object.values(Ta)[k>>2&7],z=Object.values(Eh)[3&k];d.increment();const R=Wn(r,d,2),H=R[0];return{physicalStreamType:m,logicalStreamType:v,logicalLevelTechnique1:T,logicalLevelTechnique2:P,physicalLevelTechnique:z,numValues:H,byteLength:R[1],decompressedCount:H}})(s,e);return a.logicalLevelTechnique1===Ta.MORTON?(function(r,d,u){const m=Wn(d,u,2);return{physicalStreamType:r.physicalStreamType,logicalStreamType:r.logicalStreamType,logicalLevelTechnique1:r.logicalLevelTechnique1,logicalLevelTechnique2:r.logicalLevelTechnique2,physicalLevelTechnique:r.physicalLevelTechnique,numValues:r.numValues,byteLength:r.byteLength,decompressedCount:r.decompressedCount,numBits:m[0],coordinateShift:m[1]}})(a,s,e):Ta.RLE!==a.logicalLevelTechnique1&&Ta.RLE!==a.logicalLevelTechnique2||Eh.NONE===a.physicalLevelTechnique?a:(function(r,d,u){const m=Wn(d,u,2);return{physicalStreamType:r.physicalStreamType,logicalStreamType:r.logicalStreamType,logicalLevelTechnique1:r.logicalLevelTechnique1,logicalLevelTechnique2:r.logicalLevelTechnique2,physicalLevelTechnique:r.physicalLevelTechnique,numValues:r.numValues,byteLength:r.byteLength,decompressedCount:m[1],runs:m[0],numRleValues:m[1]}})(a,s,e)}(function(s){s.NONE="NONE",s.SINGLE="SINGLE",s.SHARED="SHARED",s.VERTEX="VERTEX",s.MORTON="MORTON",s.FSST="FSST"})(Ch||(Ch={})),(function(s){s.VERTEX="VERTEX",s.INDEX="INDEX",s.STRING="STRING",s.KEY="KEY"})(Id||(Id={})),(function(s){s.VAR_BINARY="VAR_BINARY",s.GEOMETRIES="GEOMETRIES",s.PARTS="PARTS",s.RINGS="RINGS",s.TRIANGLES="TRIANGLES",s.SYMBOL="SYMBOL",s.DICTIONARY="DICTIONARY"})(Yo||(Yo={})),(function(s){s[s.FLAT=0]="FLAT",s[s.CONST=1]="CONST",s[s.SEQUENCE=2]="SEQUENCE",s[s.DICTIONARY=3]="DICTIONARY",s[s.FSST_DICTIONARY=4]="FSST_DICTIONARY"})(kn||(kn={}));class Mh{constructor(e,a){ya(this,"values");ya(this,"_size");this.values=e,this._size=a}get(e){const a=Math.floor(e/8);return(this.values[a]>>e%8&1)==1}set(e,a){const r=Math.floor(e/8);this.values[r]=this.values[r]|(a?1:0)<<e%8}getInt(e){const a=Math.floor(e/8);return this.values[a]>>e%8&1}size(){return this._size}getBuffer(){return this.values}}function Ko(s,e,a,r,d){return(function(u,m,v){switch(m.logicalLevelTechnique1){case Ta.DELTA:return m.logicalLevelTechnique2===Ta.RLE?(function(k,T,P){const z=new Int32Array(P);let R=0,H=0;for(let V=0;V<T;V++){const W=k[V],X=To(k[V+T]);for(let ee=0;ee<W;ee++)H+=X,z[R++]=H}return z})(u,m.runs,m.numRleValues):((function(k){k[0]=k[0]>>>1^-(1&k[0]);const T=k.length/4*4;let P=1;if(T>=4)for(;P<T-4;P+=4){const z=k[P],R=k[P+1],H=k[P+2],V=k[P+3];k[P]=(z>>>1^-(1&z))+k[P-1],k[P+1]=(R>>>1^-(1&R))+k[P],k[P+2]=(H>>>1^-(1&H))+k[P+1],k[P+3]=(V>>>1^-(1&V))+k[P+2]}for(;P!=k.length;++P)k[P]=(k[P]>>>1^-(1&k[P]))+k[P-1]})(u),u);case Ta.RLE:return(function(k,T,P){return P?(function(z,R,H){const V=new Int32Array(H);let W=0;for(let X=0;X<R;X++){const ee=z[X];let ue=z[X+R];ue=ue>>>1^-(1&ue),V.fill(ue,W,W+ee),W+=ee}return V})(k,T.runs,T.numRleValues):nl(k,T.runs,T.numRleValues)})(u,m,v);case Ta.MORTON:return xd(u),u;case Ta.COMPONENTWISE_DELTA:return fm(u),u;case Ta.NONE:return v&&(function(k){for(let T=0;T<k.length;T++){const P=k[T];k[T]=P>>>1^-(1&P)}})(u),u;default:throw new Error(`The specified Logical level technique is not supported: ${m.logicalLevelTechnique1}`)}})(Jp(s,e,a),a,r)}function Td(s,e,a){return(function(r,d){if(d.logicalLevelTechnique1===Ta.DELTA&&d.logicalLevelTechnique2===Ta.NONE)return(function(m){const v=new Int32Array(m.length+1);v[0]=0,v[1]=To(m[0]);let k=v[1],T=2;for(;T!=v.length;++T){const P=m[T-1];k+=P>>>1^-(1&P),v[T]=v[T-1]+k}return v})(r);if(d.logicalLevelTechnique1===Ta.RLE&&d.logicalLevelTechnique2===Ta.NONE)return(function(m,v,k){const T=new Int32Array(k+1);T[0]=0;let P=1,z=T[0];for(let R=0;R<v;R++){const H=m[R],V=m[R+v];for(let W=P;W<P+H;W++)T[W]=V+z,z=T[W];P+=H}return T})(r,d.runs,d.numRleValues);if(d.logicalLevelTechnique1===Ta.NONE&&d.logicalLevelTechnique2===Ta.NONE){(function(m){let v=0;for(let k=0;k<m.length;k++)m[k]+=v,v=m[k]})(r);const u=new Int32Array(d.numValues+1);return u[0]=0,u.set(r,1),u}if(d.logicalLevelTechnique1===Ta.DELTA&&d.logicalLevelTechnique2===Ta.RLE){const u=(function(m,v,k){const T=new Int32Array(k+1);T[0]=0;let P=1,z=T[0];for(let R=0;R<v;R++){const H=m[R];let V=m[R+v];V=V>>>1^-(1&V);for(let W=P;W<P+H;W++)T[W]=V+z,z=T[W];P+=H}return T})(r,d.runs,d.numRleValues);return xd(u),u}throw new Error("Only delta encoding is supported for transforming length to offset streams yet.")})(Jp(s,e,a),a)}function Jp(s,e,a){const r=a.physicalLevelTechnique;if(r===Eh.FAST_PFOR)return Yf();if(r===Eh.VARINT)return Wn(s,e,a.numValues);if(r===Eh.NONE){const d=e.get();e.add(a.byteLength);const u=s.subarray(d,e.get());return new Int32Array(u)}throw new Error("Specified physicalLevelTechnique is not supported (yet).")}function pm(s,e,a,r){const d=Jp(s,e,a);if(d.length===1){const u=d[0];return r?To(u):u}return r?(function(u){return To(u[1])})(d):(function(u){return u[1]})(d)}function um(s,e,a){return(function(r){if(r.length==2){const d=To(r[1]);return[d,d]}return[To(r[2]),To(r[3])]})(Jp(s,e,a))}function lf(s,e,a){return(function(r){if(r.length==2){const d=hf(r[1]);return[d,d]}return[hf(r[2]),hf(r[3])]})(Gc(s,e,a.numValues))}function $f(s,e,a,r){return(function(d,u,m){switch(u.logicalLevelTechnique1){case Ta.DELTA:return u.logicalLevelTechnique2===Ta.RLE?(function(v,k,T){const P=new BigInt64Array(T);let z=0,R=BigInt(0);for(let H=0;H<k;H++){const V=Number(v[H]),W=hf(v[H+k]);for(let X=0;X<V;X++)R+=W,P[z++]=R}return P})(d,u.runs,u.numRleValues):((function(v){v[0]=v[0]>>BigInt(1)^-(BigInt(1)&v[0]);const k=v.length/4*4;let T=1;if(k>=4)for(;T<k-4;T+=4){const P=v[T],z=v[T+1],R=v[T+2],H=v[T+3];v[T]=(P>>BigInt(1)^-(BigInt(1)&P))+v[T-1],v[T+1]=(z>>BigInt(1)^-(BigInt(1)&z))+v[T],v[T+2]=(R>>BigInt(1)^-(BigInt(1)&R))+v[T+1],v[T+3]=(H>>BigInt(1)^-(BigInt(1)&H))+v[T+2]}for(;T!=v.length;++T)v[T]=(v[T]>>BigInt(1)^-(BigInt(1)&v[T]))+v[T-1]})(d),d);case Ta.RLE:return(function(v,k,T){return T?(function(P,z,R){const H=new BigInt64Array(R);let V=0;for(let W=0;W<z;W++){const X=Number(P[W]);let ee=P[W+z];ee=ee>>BigInt(1)^-(BigInt(1)&ee),H.fill(ee,V,V+X),V+=X}return H})(v,k.runs,k.numRleValues):Ag(v,k.runs,k.numRleValues)})(d,u,m);case Ta.NONE:return m&&(function(v){for(let k=0;k<v.length;k++){const T=v[k];v[k]=T>>BigInt(1)^-(BigInt(1)&T)}})(d),d;default:throw new Error(`The specified Logical level technique is not supported: ${u.logicalLevelTechnique1}`)}})(Gc(s,e,a.numValues),a,r)}function mm(s,e,a,r){const d=Gc(s,e,a.numValues);if(d.length===1){const u=d[0];return r?hf(u):u}return r?(function(u){return hf(u[1])})(d):(function(u){return u[1]})(d)}function gm(s,e,a,r,d){return(function(u,m,v,k){switch(m.logicalLevelTechnique1){case Ta.DELTA:return m.logicalLevelTechnique2===Ta.RLE&&(u=nl(u,m.runs,m.numRleValues)),(function(T,P){const z=new Int32Array(T.size());let R=0;T.get(0)?(z[0]=T.get(0)?P[0]>>>1^-(1&P[0]):0,R=1):z[0]=0;let H=1;for(;H!=z.length;++H)z[H]=T.get(H)?z[H-1]+(P[R]>>>1^-(1&P[R++])):z[H-1];return z})(k,u);case Ta.RLE:return(function(T,P,z,R){const H=P;return z?(function(V,W,X){const ee=new Int32Array(V.size());let ue=0;for(let ae=0;ae<X;ae++){const oe=W[ae];let ge=W[ae+X];ge=ge>>>1^-(1&ge);for(let ve=ue;ve<ue+oe;ve++)V.get(ve)?ee[ve]=ge:(ee[ve]=0,ue++);ue+=oe}return ee})(R,T,H.runs):(function(V,W,X){const ee=new Int32Array(V.size());let ue=0;for(let ae=0;ae<X;ae++){const oe=W[ae],ge=W[ae+X];for(let ve=ue;ve<ue+oe;ve++)V.get(ve)?ee[ve]=ge:(ee[ve]=0,ue++);ue+=oe}return ee})(R,T,H.runs)})(u,m,v,k);case Ta.MORTON:return xd(u),u;case Ta.COMPONENTWISE_DELTA:return fm(u),u;case Ta.NONE:return u=v?(function(T,P){const z=new Int32Array(T.size());let R=0,H=0;for(;H!=z.length;++H)if(T.get(H)){const V=P[R++];z[H]=V>>>1^-(1&V)}else z[H]=0;return z})(k,u):(function(T,P){const z=new Int32Array(T.size());let R=0,H=0;for(;H!=z.length;++H)z[H]=T.get(H)?P[R++]:0;return z})(k,u),u;default:throw new Error("The specified Logical level technique is not supported")}})(a.physicalLevelTechnique===Eh.FAST_PFOR?Yf():Wn(s,e,a.numValues),a,r,d)}function Gl(s,e,a,r){const d=s.logicalLevelTechnique1;if(d===Ta.RLE)return s.runs===1?kn.CONST:kn.FLAT;const u=e instanceof Mh?e.size():e;if(d===Ta.DELTA&&s.logicalLevelTechnique2===Ta.RLE){const m=s.runs,v=2;if(s.numRleValues!==u)return kn.FLAT;if(m===1)return kn.SEQUENCE;if(m===2){const k=r.get();let T;if(s.physicalLevelTechnique===Eh.VARINT)T=Wn(a,r,4);else{const P=r.get();T=new Int32Array(a.buffer,a.byteOffset+P,4)}if(r.set(k),T[2]===v&&T[3]===v)return kn.SEQUENCE}}return s.numValues===1?kn.CONST:kn.FLAT}class Kf extends $p{getValueFromBuffer(e){return this.dataBuffer[e]}}class ym extends hm{constructor(e,a,r,d){super(e,BigInt64Array.of(a),r,d)}getValueFromBuffer(e){return this.dataBuffer[0]+BigInt(e)*this.delta}}class Fl{constructor(e,a,r){ya(this,"_geometryOffsets");ya(this,"_partOffsets");ya(this,"_ringOffsets");this._geometryOffsets=e,this._partOffsets=a,this._ringOffsets=r}get geometryOffsets(){return this._geometryOffsets}get partOffsets(){return this._partOffsets}get ringOffsets(){return this._ringOffsets}}function Fc(s,e,a){return{x:eu(s,e)-a,y:eu(s>>1,e)-a}}function eu(s,e){let a=0;for(let r=0;r<e;r++)a|=(s&1<<2*r)>>r;return a}(function(s){s[s.POINT=0]="POINT",s[s.LINESTRING=1]="LINESTRING",s[s.POLYGON=2]="POLYGON",s[s.MULTIPOINT=3]="MULTIPOINT",s[s.MULTILINESTRING=4]="MULTILINESTRING",s[s.MULTIPOLYGON=5]="MULTIPOLYGON"})(Vn||(Vn={})),(function(s){s[s.POINT=0]="POINT",s[s.LINESTRING=1]="LINESTRING",s[s.POLYGON=2]="POLYGON"})(br||(br={})),(function(s){s[s.MORTON=0]="MORTON",s[s.VEC_2=1]="VEC_2",s[s.VEC_3=2]="VEC_3"})(vi||(vi={}));class tu{createPoint(e){return[[e]]}createMultiPoint(e){return e.map((a=>[a]))}createLineString(e){return[e]}createMultiLineString(e){return e}createPolygon(e,a){return[e].concat(a)}createMultiPolygon(e){return e.flat()}}function bm(s){const e=new Array(s.numGeometries);let a=1,r=1,d=1,u=0;const m=new tu;let v=0,k=0;const T=s.mortonSettings,P=s.topologyVector,z=P.geometryOffsets,R=P.partOffsets,H=P.ringOffsets,V=s.vertexOffsets,W=s.containsPolygonGeometry(),X=s.vertexBuffer;for(let ee=0;ee<s.numGeometries;ee++){const ue=s.geometryType(ee);if(ue===Vn.POINT){if(V&&V.length!==0)if(s.vertexBufferType===vi.VEC_2){const ae=2*V[k++],oe=new re(X[ae],X[ae+1]);e[u++]=m.createPoint(oe)}else{const ae=Fc(X[V[k++]],T.numBits,T.coordinateShift),oe=new re(ae.x,ae.y);e[u++]=m.createPoint(oe)}else{const ae=new re(X[v++],X[v++]);e[u++]=m.createPoint(ae)}z&&d++,R&&a++,H&&r++}else if(ue===Vn.MULTIPOINT){const ae=z[d]-z[d-1];d++;const oe=new Array(ae);if(V&&V.length!==0){for(let ge=0;ge<ae;ge++){const ve=2*V[k++];oe[ge]=new re(X[ve],X[ve+1])}e[u++]=m.createMultiPoint(oe)}else{for(let ge=0;ge<ae;ge++){const ve=X[v++],Fe=X[v++];oe[ge]=new re(ve,Fe)}e[u++]=m.createMultiPoint(oe)}}else if(ue===Vn.LINESTRING){let ae,oe=0;W?(oe=H[r]-H[r-1],r++):oe=R[a]-R[a-1],a++,V&&V.length!==0?(ae=s.vertexBufferType===vi.VEC_2?qc(X,V,k,oe,!1):vm(X,V,k,oe,!1,T),k+=oe):(ae=wm(X,v,oe,!1),v+=2*oe),e[u++]=m.createLineString(ae),z&&d++}else if(ue===Vn.POLYGON){const ae=R[a]-R[a-1];a++;const oe=new Array(ae-1);let ge=H[r]-H[r-1];if(r++,V&&V.length!==0){const ve=s.vertexBufferType===vi.VEC_2?au(X,V,k,ge):Uc(X,V,k,ge,0,T);k+=ge;for(let Fe=0;Fe<oe.length;Fe++)ge=H[r]-H[r-1],r++,oe[Fe]=s.vertexBufferType===vi.VEC_2?au(X,V,k,ge):Uc(X,V,k,ge,0,T),k+=ge;e[u++]=m.createPolygon(ve,oe)}else{const ve=jc(X,v,ge);v+=2*ge;for(let Fe=0;Fe<oe.length;Fe++)ge=H[r]-H[r-1],r++,oe[Fe]=jc(X,v,ge),v+=2*ge;e[u++]=m.createPolygon(ve,oe)}z&&d++}else if(ue===Vn.MULTILINESTRING){const ae=z[d]-z[d-1];d++;const oe=new Array(ae);if(V&&V.length!==0){for(let ge=0;ge<ae;ge++){let ve=0;W?(ve=H[r]-H[r-1],r++):ve=R[a]-R[a-1],a++;const Fe=s.vertexBufferType===vi.VEC_2?qc(X,V,k,ve,!1):vm(X,V,k,ve,!1,T);oe[ge]=Fe,k+=ve}e[u++]=m.createMultiLineString(oe)}else{for(let ge=0;ge<ae;ge++){let ve=0;W?(ve=H[r]-H[r-1],r++):ve=R[a]-R[a-1],a++,oe[ge]=wm(X,v,ve,!1),v+=2*ve}e[u++]=m.createMultiLineString(oe)}}else{if(ue!==Vn.MULTIPOLYGON)throw new Error("The specified geometry type is currently not supported.");{const ae=z[d]-z[d-1];d++;const oe=new Array(ae);let ge=0;if(V&&V.length!==0){for(let ve=0;ve<ae;ve++){const Fe=R[a]-R[a-1];a++;const ot=new Array(Fe-1);ge=H[r]-H[r-1],r++;const et=s.vertexBufferType===vi.VEC_2?au(X,V,k,ge):Uc(X,V,k,ge,0,T);k+=ge;for(let lt=0;lt<ot.length;lt++)ge=H[r]-H[r-1],r++,ot[lt]=s.vertexBufferType===vi.VEC_2?au(X,V,k,ge):Uc(X,V,k,ge,0,T),k+=ge;oe[ve]=m.createPolygon(et,ot)}e[u++]=m.createMultiPolygon(oe)}else{for(let ve=0;ve<ae;ve++){const Fe=R[a]-R[a-1];a++;const ot=new Array(Fe-1);ge=H[r]-H[r-1],r++;const et=jc(X,v,ge);v+=2*ge;for(let lt=0;lt<ot.length;lt++){const At=H[r]-H[r-1];r++,ot[lt]=jc(X,v,At),v+=2*At}oe[ve]=m.createPolygon(et,ot)}e[u++]=m.createMultiPolygon(oe)}}}}return e}function jc(s,e,a){return wm(s,e,a,!0)}function au(s,e,a,r){return qc(s,e,a,r,!0)}function Uc(s,e,a,r,d,u){return vm(s,e,a,r,!0,u)}function wm(s,e,a,r){const d=new Array(r?a+1:a);for(let u=0;u<2*a;u+=2)d[u/2]=new re(s[e+u],s[e+u+1]);return r&&(d[d.length-1]=d[0]),d}function qc(s,e,a,r,d){const u=new Array(d?r+1:r);for(let m=0;m<2*r;m+=2){const v=2*e[a+m/2];u[m/2]=new re(s[v],s[v+1])}return d&&(u[u.length-1]=u[0]),u}function vm(s,e,a,r,d,u){const m=new Array(d?r+1:r);for(let v=0;v<r;v++){const k=Fc(s[e[a+v]],u.numBits,u.coordinateShift);m[v]=new re(k.x,k.y)}return d&&(m[m.length-1]=m[0]),m}class Vc{constructor(e,a,r,d,u){ya(this,"_vertexBufferType");ya(this,"_topologyVector");ya(this,"_vertexOffsets");ya(this,"_vertexBuffer");ya(this,"_mortonSettings");this._vertexBufferType=e,this._topologyVector=a,this._vertexOffsets=r,this._vertexBuffer=d,this._mortonSettings=u}get vertexBufferType(){return this._vertexBufferType}get topologyVector(){return this._topologyVector}get vertexOffsets(){return this._vertexOffsets}get vertexBuffer(){return this._vertexBuffer}*[Symbol.iterator](){const e=bm(this);let a=0;for(;a<this.numGeometries;)yield{coordinates:e[a],type:this.geometryType(a)},a++}getSimpleEncodedVertex(e){const a=this.vertexOffsets?2*this.vertexOffsets[e]:2*e;return[this.vertexBuffer[a],this.vertexBuffer[a+1]]}getVertex(e){if(this.vertexOffsets&&this.mortonSettings){const r=Fc(this.vertexBuffer[this.vertexOffsets[e]],this.mortonSettings.numBits,this.mortonSettings.coordinateShift);return[r.x,r.y]}const a=this.vertexOffsets?2*this.vertexOffsets[e]:2*e;return[this.vertexBuffer[a],this.vertexBuffer[a+1]]}getGeometries(){return bm(this)}get mortonSettings(){return this._mortonSettings}}class Wc extends Vc{constructor(a,r,d,u,m,v,k){super(d,u,m,v,k);ya(this,"_numGeometries");ya(this,"_geometryType");this._numGeometries=a,this._geometryType=r}geometryType(a){return this._geometryType}get numGeometries(){return this._numGeometries}containsPolygonGeometry(){return this._geometryType===Vn.POLYGON||this._geometryType===Vn.MULTIPOLYGON}containsSingleGeometryType(){return!0}}class Zc extends Vc{constructor(a,r,d,u,m,v){super(a,d,u,m,v);ya(this,"_geometryTypes");this._geometryTypes=r}geometryType(a){return this._geometryTypes[a]}get numGeometries(){return this._geometryTypes.length}containsPolygonGeometry(){for(let a=0;a<this.numGeometries;a++)if(this.geometryType(a)===Vn.POLYGON||this.geometryType(a)===Vn.MULTIPOLYGON)return!0;return!1}containsSingleGeometryType(){return!1}}class Pg{constructor(e,a,r,d){ya(this,"_triangleOffsets");ya(this,"_indexBuffer");ya(this,"_vertexBuffer");ya(this,"_topologyVector");this._triangleOffsets=e,this._indexBuffer=a,this._vertexBuffer=r,this._topologyVector=d}get triangleOffsets(){return this._triangleOffsets}get indexBuffer(){return this._indexBuffer}get vertexBuffer(){return this._vertexBuffer}get topologyVector(){return this._topologyVector}getGeometries(){if(!this._topologyVector)throw new Error("Cannot convert GpuVector to coordinates without topology information");const e=new Array(this.numGeometries),a=this._topologyVector,r=a.partOffsets,d=a.ringOffsets,u=a.geometryOffsets;let m=0,v=1,k=1,T=1;for(let P=0;P<this.numGeometries;P++)switch(this.geometryType(P)){case Vn.POLYGON:{const z=r[v]-r[v-1];v++;const R=[];for(let H=0;H<z;H++){const V=d[k]-d[k-1];k++;const W=[];for(let X=0;X<V;X++){const ee=this._vertexBuffer[m++],ue=this._vertexBuffer[m++];W.push(new re(ee,ue))}W.length>0&&W.push(W[0]),R.push(W)}e[P]=R,u&&T++}break;case Vn.MULTIPOLYGON:{const z=u[T]-u[T-1];T++;const R=[];for(let H=0;H<z;H++){const V=r[v]-r[v-1];v++;for(let W=0;W<V;W++){const X=d[k]-d[k-1];k++;const ee=[];for(let ue=0;ue<X;ue++){const ae=this._vertexBuffer[m++],oe=this._vertexBuffer[m++];ee.push(new re(ae,oe))}ee.length>0&&ee.push(ee[0]),R.push(ee)}}e[P]=R}}return e}[Symbol.iterator](){return null}}function Qf(s,e,a,r,d,u){return new vy(s,e,a,r,d,u)}class vy extends Pg{constructor(a,r,d,u,m,v){super(d,u,m,v);ya(this,"_numGeometries");ya(this,"_geometryType");this._numGeometries=a,this._geometryType=r}geometryType(a){return this._geometryType}get numGeometries(){return this._numGeometries}containsSingleGeometryType(){return!0}}function Om(s,e,a,r,d){return new Eg(s,e,a,r,d)}class Eg extends Pg{constructor(a,r,d,u,m){super(r,d,u,m);ya(this,"_geometryTypes");this._geometryTypes=a}geometryType(a){return this._geometryTypes[a]}get numGeometries(){return this._geometryTypes.length}containsSingleGeometryType(){return!1}}function Cg(s,e,a,r,d){const u=$o(s,a);let m=null,v=null,k=null,T=null,P=null,z=null,R=null,H=null;if(Gl(u,r,s,a)===kn.CONST){const W=pm(s,a,u,!1);for(let X=0;X<e-1;X++){const ee=$o(s,a);switch(ee.physicalStreamType){case xo.LENGTH:switch(ee.logicalStreamType.lengthType){case Yo.GEOMETRIES:m=Td(s,a,ee);break;case Yo.PARTS:v=Td(s,a,ee);break;case Yo.RINGS:k=Td(s,a,ee);break;case Yo.TRIANGLES:R=Td(s,a,ee)}break;case xo.OFFSET:switch(ee.logicalStreamType.offsetType){case Id.VERTEX:T=Ko(s,a,ee,!1);break;case Id.INDEX:H=Ko(s,a,ee,!1)}break;case xo.DATA:Ch.VERTEX===ee.logicalStreamType.dictionaryType?P=Ko(s,a,ee,!0):(z={numBits:ee.numBits,coordinateShift:ee.coordinateShift},P=Ko(s,a,ee,!1))}}return H!==null?m!=null||v!=null?Qf(r,W,R,H,P,new Fl(m,v,k)):Qf(r,W,R,H,P):z===null?(function(X,ee,ue,ae,oe){return new Wc(X,ee,vi.VEC_2,ue,ae,oe)})(r,W,new Fl(m,v,k),T,P):(function(X,ee,ue,ae,oe,ge){return new Wc(X,ee,vi.MORTON,ue,ae,oe,ge)})(r,W,new Fl(m,v,k),T,P,z)}const V=Ko(s,a,u,!1);for(let W=0;W<e-1;W++){const X=$o(s,a);switch(X.physicalStreamType){case xo.LENGTH:switch(X.logicalStreamType.lengthType){case Yo.GEOMETRIES:m=Ko(s,a,X,!1);break;case Yo.PARTS:v=Ko(s,a,X,!1);break;case Yo.RINGS:k=Ko(s,a,X,!1);break;case Yo.TRIANGLES:R=Td(s,a,X)}break;case xo.OFFSET:switch(X.logicalStreamType.offsetType){case Id.VERTEX:T=Ko(s,a,X,!1);break;case Id.INDEX:H=Ko(s,a,X,!1)}break;case xo.DATA:Ch.VERTEX===X.logicalStreamType.dictionaryType?P=Ko(s,a,X,!0):(z={numBits:X.numBits,coordinateShift:X.coordinateShift},P=Ko(s,a,X,!1))}}return H!==null&&v===null?Om(V,R,H,P):(m!==null?(m=su(V,m,2),v!==null&&k!==null?(v=nu(V,m,v,!1),k=(function(W,X,ee,ue){const ae=new Int32Array(ee[ee.length-1]+1);let oe=0;ae[0]=oe;let ge=1,ve=1,Fe=0;for(let ot=0;ot<W.length;ot++){const et=W[ot],lt=X[ot+1]-X[ot];if(et!==0&&et!==3)for(let At=0;At<lt;At++){const yt=ee[ge]-ee[ge-1];ge++;for(let ut=0;ut<yt;ut++)oe=ae[ve++]=oe+ue[Fe++]}else for(let At=0;At<lt;At++)ae[ve++]=++oe,ge++}return ae})(V,m,v,k)):v!==null&&(v=(function(W,X,ee){const ue=new Int32Array(X[X.length-1]+1);let ae=0;ue[0]=ae;let oe=1,ge=0;for(let ve=0;ve<W.length;ve++){const Fe=W[ve],ot=X[ve+1]-X[ve];if(Fe===4||Fe===1)for(let et=0;et<ot;et++)ae=ue[oe++]=ae+ee[ge++];else for(let et=0;et<ot;et++)ue[oe++]=++ae}return ue})(V,m,v))):v!==null&&k!==null?(v=su(V,v,1),k=nu(V,v,k,!0)):v!==null&&(v=su(V,v,0)),H!==null?Om(V,R,H,P,new Fl(m,v,k)):z===null?(function(W,X,ee,ue){return new Zc(vi.VEC_2,W,X,ee,ue)})(V,new Fl(m,v,k),T,P):(function(W,X,ee,ue,ae){return new Zc(vi.MORTON,W,X,ee,ue,ae)})(V,new Fl(m,v,k),T,P,z))}function su(s,e,a){const r=new Int32Array(s.length+1);let d=0;r[0]=d;let u=0;for(let m=0;m<s.length;m++)d=r[m+1]=d+(s[m]>a?e[u++]:1);return r}function nu(s,e,a,r){const d=new Int32Array(e[e.length-1]+1);let u=0;d[0]=u;let m=1,v=0;for(let k=0;k<s.length;k++){const T=s[k],P=e[k+1]-e[k];if(T===5||T===2||r&&(T===4||T===1))for(let z=0;z<P;z++)u=d[m++]=u+a[v++];else for(let z=0;z<P;z++)d[m++]=++u}return d}class Mg extends kd{constructor(a,r,d){super(a,r.getBuffer(),d);ya(this,"dataVector");this.dataVector=r}getValueFromBuffer(a){return this.dataVector.get(a)}}class Lg extends $p{getValueFromBuffer(e){return this.dataBuffer[e]}}class Xc extends kd{constructor(e,a,r){super(e,BigInt64Array.of(a),r)}getValueFromBuffer(e){return this.dataBuffer[0]}}function Yc(s,e,a){return zg(s,Math.ceil(e/8),a)}function zg(s,e,a){const r=new Uint8Array(e);let d=0;for(;d<e;){const u=s[a.increment()];if(u<=127){const m=u+3,v=s[a.increment()],k=d+m;r.fill(v,d,k),d=k}else{const m=256-u;for(let v=0;v<m;v++)r[d++]=s[a.increment()]}}return r}const km=new TextDecoder;function $c(s,e,a){return a-e>=12?km.decode(s.subarray(e,a)):(function(r,d,u){let m="",v=d;for(;v<u;){const k=r[v];let T,P,z,R=null,H=k>239?4:k>223?3:k>191?2:1;if(v+H>u)break;H===1?k<128&&(R=k):H===2?(T=r[v+1],(192&T)==128&&(R=(31&k)<<6|63&T,R<=127&&(R=null))):H===3?(T=r[v+1],P=r[v+2],(192&T)==128&&(192&P)==128&&(R=(15&k)<<12|(63&T)<<6|63&P,(R<=2047||R>=55296&&R<=57343)&&(R=null))):H===4&&(T=r[v+1],P=r[v+2],z=r[v+3],(192&T)==128&&(192&P)==128&&(192&z)==128&&(R=(15&k)<<18|(63&T)<<12|(63&P)<<6|63&z,(R<=65535||R>=1114112)&&(R=null))),R===null?(R=65533,H=1):R>65535&&(R-=65536,m+=String.fromCharCode(R>>>10&1023|55296),R=56320|1023&R),m+=String.fromCharCode(R),v+=H}return m})(s,e,a)}class Jf extends kd{constructor(a,r,d,u){super(a,d,u);ya(this,"offsetBuffer");this.offsetBuffer=r}}class ou extends Jf{constructor(a,r,d,u){super(a,r,d,u!=null?u:r.length-1);ya(this,"textEncoder");this.textEncoder=new TextEncoder}getValueFromBuffer(a){return $c(this.dataBuffer,this.offsetBuffer[a],this.offsetBuffer[a+1])}}class df extends Jf{constructor(a,r,d,u,m){super(a,d,u,m!=null?m:r.length);ya(this,"indexBuffer");ya(this,"textEncoder");this.indexBuffer=r,this.indexBuffer=r,this.textEncoder=new TextEncoder}getValueFromBuffer(a){const r=this.indexBuffer[a];return $c(this.dataBuffer,this.offsetBuffer[r],this.offsetBuffer[r+1])}}class iu extends Jf{constructor(a,r,d,u,m,v,k){super(a,d,u,k);ya(this,"indexBuffer");ya(this,"symbolOffsetBuffer");ya(this,"symbolTableBuffer");ya(this,"textEncoder");ya(this,"symbolLengthBuffer");ya(this,"lengthBuffer");ya(this,"decodedDictionary");this.indexBuffer=r,this.symbolOffsetBuffer=m,this.symbolTableBuffer=v,this.textEncoder=new TextEncoder}getValueFromBuffer(a){this.decodedDictionary==null&&(this.symbolLengthBuffer==null&&(this.symbolLengthBuffer=this.offsetToLengthBuffer(this.symbolOffsetBuffer),this.lengthBuffer=this.offsetToLengthBuffer(this.offsetBuffer)),this.decodedDictionary=(function(d,u,m){const v=[],k=new Array(u.length).fill(0);for(let T=1;T<u.length;T++)k[T]=k[T-1]+u[T-1];for(let T=0;T<m.length;T++)if(m[T]===255)v.push(m[++T]);else{const P=u[m[T]],z=k[m[T]];for(let R=0;R<P;R++)v.push(d[z+R])}return new Uint8Array(v)})(this.symbolTableBuffer,this.symbolLengthBuffer,this.dataBuffer));const r=this.indexBuffer[a];return $c(this.decodedDictionary,this.offsetBuffer[r],this.offsetBuffer[r+1])}offsetToLengthBuffer(a){const r=new Uint32Array(a.length-1);let d=a[0];for(let u=1;u<a.length;u++){const m=a[u];r[u-1]=m-d,d=m}return r}}function Ad(s,e,a,r,d,u){return a.type==="scalarType"?(function(m,v,k,T,P,z){let R=null,H=0;if(m===0)return null;if(z.nullable){const W=$o(v,k);H=W.numValues;const X=k.get(),ee=Yc(v,H,k);k.set(X+W.byteLength),R=new Mh(ee,W.numValues)}const V=R!=null?R:T;switch(P.physicalType){case 4:case 3:return(function(W,X,ee,ue,ae){const oe=$o(W,X),ge=Gl(oe,ae,W,X),ve=ue.physicalType===3;if(ge===kn.FLAT){const Fe=Kr(ae)?gm(W,X,oe,ve,ae):Ko(W,X,oe,ve);return new Kp(ee.name,Fe,ae)}if(ge===kn.SEQUENCE){const Fe=um(W,X,oe);return new lm(ee.name,Fe[0],Fe[1],oe.numRleValues)}{const Fe=pm(W,X,oe,ve);return new dm(ee.name,Fe,ae)}})(v,k,z,P,V);case 9:return(function(W,X,ee,ue,ae){var yt,ut;let oe=null,ge=null,ve=null,Fe=null,ot=null,et=null,lt=null,At=null;for(let Ke=0;Ke<ue;Ke++){const xt=$o(X,ee);if(xt.byteLength!==0)switch(xt.physicalStreamType){case xo.PRESENT:{const Pt=Yc(X,xt.numValues,ee);et=new Mh(Pt,xt.numValues);break}case xo.OFFSET:ge=ae!=null||et!=null?gm(X,ee,xt,!1,ae!=null?ae:et):Ko(X,ee,xt,!1);break;case xo.LENGTH:{const Pt=Td(X,ee,xt);Yo.DICTIONARY===xt.logicalStreamType.lengthType?oe=Pt:Yo.SYMBOL===xt.logicalStreamType.lengthType?Fe=Pt:lt=Pt;break}case xo.DATA:{const Pt=X.subarray(ee.get(),ee.get()+xt.byteLength);ee.add(xt.byteLength);const Lt=xt.logicalStreamType.dictionaryType;Ch.FSST===Lt?ot=Pt:Ch.SINGLE===Lt||Ch.SHARED===Lt?ve=Pt:Ch.NONE===Lt&&(At=Pt);break}}}return(ut=(yt=(function(Ke,xt,Pt,Lt,_t,Yt,Da){return xt?new iu(Ke,Pt,Lt,_t,Yt,xt,Da):null})(W,ot,ge,oe,ve,Fe,ae!=null?ae:et))!=null?yt:(function(Ke,xt,Pt,Lt,_t){return xt?_t?new df(Ke,Pt,Lt,xt,_t):new df(Ke,Pt,Lt,xt):null})(W,ve,ge,oe,ae!=null?ae:et))!=null?ut:(function(Ke,xt,Pt,Lt,_t){if(!xt||!Pt)return null;if(Lt)return _t?new df(Ke,Lt,xt,Pt,_t):new df(Ke,Lt,xt,Pt);if(_t&&_t.size()!==xt.length-1){const Yt=new Int32Array(_t.size());let Da=0;for(let ga=0;ga<_t.size();ga++)Yt[ga]=_t.get(ga)?Da++:0;return new df(Ke,Yt,xt,Pt,_t)}return _t?new ou(Ke,xt,Pt,_t):new ou(Ke,xt,Pt)})(W,lt,At,ge,ae!=null?ae:et)})(z.name,v,k,z.nullable?m-1:m,R);case 0:return(function(W,X,ee,ue,ae){const oe=$o(W,X),ge=oe.numValues,ve=X.get(),Fe=Kr(ae)?(function(et,lt,At,yt){const ut=zg(et,Math.ceil(lt/8),At),Ke=new Mh(ut,lt),xt=yt.size(),Pt=new Mh(new Uint8Array(xt),xt);let Lt=0;for(let _t=0;_t<yt.size();_t++){const Yt=!!yt.get(_t)&&Ke.get(Lt++);Pt.set(_t,Yt)}return Pt.getBuffer()})(W,ge,X,ae):Yc(W,ge,X);X.set(ve+oe.byteLength);const ot=new Mh(Fe,ge);return new Mg(ee.name,ot,ae)})(v,k,z,0,V);case 6:case 5:return(function(W,X,ee,ue,ae){const oe=$o(W,X),ge=Gl(oe,ue,W,X),ve=ae.physicalType===5;if(ge===kn.FLAT){const Fe=Kr(ue)?(function(ot,et,lt,At,yt){return(function(ut,Ke,xt,Pt){switch(Ke.logicalLevelTechnique1){case Ta.DELTA:return Ke.logicalLevelTechnique2===Ta.RLE&&(ut=Ag(ut,Ke.runs,Ke.numRleValues)),(function(Lt,_t){const Yt=new BigInt64Array(Lt.size());let Da=0;Lt.get(0)?(Yt[0]=Lt.get(0)?_t[0]>>BigInt(1)^-(BigInt(1)&_t[0]):BigInt(0),Da=1):Yt[0]=BigInt(0);let ga=1;for(;ga!=Yt.length;++ga)Yt[ga]=Lt.get(ga)?Yt[ga-1]+(_t[Da]>>BigInt(1)^-(BigInt(1)&_t[Da++])):Yt[ga-1];return Yt})(Pt,ut);case Ta.RLE:return(function(Lt,_t,Yt,Da){const ga=_t;return Yt?(function(en,Qo,Zn){const tn=new BigInt64Array(en.size());let Vs=0;for(let ds=0;ds<Zn;ds++){const gn=Number(Qo[ds]);let _n=Qo[ds+Zn];_n=_n>>BigInt(1)^-(BigInt(1)&_n);for(let Fs=Vs;Fs<Vs+gn;Fs++)en.get(Fs)?tn[Fs]=_n:(tn[Fs]=BigInt(0),Vs++);Vs+=gn}return tn})(Da,Lt,ga.runs):(function(en,Qo,Zn){const tn=new BigInt64Array(en.size());let Vs=0;for(let ds=0;ds<Zn;ds++){const gn=Number(Qo[ds]),_n=Qo[ds+Zn];for(let Fs=Vs;Fs<Vs+gn;Fs++)en.get(Fs)?tn[Fs]=_n:(tn[Fs]=BigInt(0),Vs++);Vs+=gn}return tn})(Da,Lt,ga.runs)})(ut,Ke,xt,Pt);case Ta.NONE:return ut=xt?(function(Lt,_t){const Yt=new BigInt64Array(Lt.size());let Da=0,ga=0;for(;ga!=Yt.length;++ga)if(Lt.get(ga)){const en=_t[Da++];Yt[ga]=en>>BigInt(1)^-(BigInt(1)&en)}else Yt[ga]=BigInt(0);return Yt})(Pt,ut):(function(Lt,_t){const Yt=new BigInt64Array(Lt.size());let Da=0,ga=0;for(;ga!=Yt.length;++ga)Yt[ga]=Lt.get(ga)?_t[Da++]:BigInt(0);return Yt})(Pt,ut),ut;default:throw new Error("The specified Logical level technique is not supported")}})(Gc(ot,et,lt.numValues),lt,At,yt)})(W,X,oe,ve,ue):$f(W,X,oe,ve);return new Kf(ee.name,Fe,ue)}if(ge===kn.SEQUENCE){const Fe=lf(W,X,oe);return new ym(ee.name,Fe[0],Fe[1],oe.numRleValues)}{const Fe=mm(W,X,oe,ve);return new Xc(ee.name,Fe,ue)}})(v,k,z,V,P);case 7:return(function(W,X,ee,ue){const ae=$o(W,X),oe=Kr(ue)?(function(ge,ve,Fe,ot){const et=ve.get(),lt=et+ot*Float32Array.BYTES_PER_ELEMENT,At=new Uint8Array(ge.subarray(et,lt)).buffer,yt=new Float32Array(At);ve.set(lt);const ut=Fe.size(),Ke=new Float32Array(ut);let xt=0;for(let Pt=0;Pt<ut;Pt++)Ke[Pt]=Fe.get(Pt)?yt[xt++]:0;return Ke})(W,X,ue,ae.numValues):(function(ge,ve,Fe){const ot=ve.get(),et=ot+Fe*Float32Array.BYTES_PER_ELEMENT,lt=new Uint8Array(ge.subarray(ot,et)).buffer,At=new Float32Array(lt);return ve.set(et),At})(W,X,ae.numValues);return new Lg(ee.name,oe,ue)})(v,k,z,V);case 8:return(function(W,X,ee,ue){const ae=$o(W,X),oe=Kr(ue)?(function(ge,ve,Fe,ot){const et=ve.get(),lt=et+ot*Float64Array.BYTES_PER_ELEMENT,At=new Uint8Array(ge.subarray(et,lt)).buffer,yt=new Float64Array(At);ve.set(lt);const ut=Fe.size(),Ke=new Float64Array(ut);let xt=0;for(let Pt=0;Pt<ut;Pt++)Ke[Pt]=Fe.get(Pt)?yt[xt++]:0;return Ke})(W,X,ue,ae.numValues):(function(ge,ve,Fe){const ot=ve.get(),et=ot+Fe*Float64Array.BYTES_PER_ELEMENT,lt=new Uint8Array(ge.subarray(ot,et)).buffer,At=new Float64Array(lt);return ve.set(et),At})(W,X,ae.numValues);return new rm(ee.name,oe,ue)})(v,k,z,V);default:throw new Error(`The specified data type for the field is currently not supported: ${P}`)}})(r,s,e,d,a.scalarType,a):r!=1?null:(function(m,v,k,T){let P=null,z=null,R=null,H=null,V=!1;for(;!V;){const ue=$o(m,v);switch(ue.physicalStreamType){case xo.LENGTH:Yo.DICTIONARY===ue.logicalStreamType.lengthType?P=Td(m,v,ue):R=Td(m,v,ue);break;case xo.DATA:Ch.SINGLE===ue.logicalStreamType.dictionaryType||Ch.SHARED===ue.logicalStreamType.dictionaryType?(z=m.subarray(v.get(),v.get()+ue.byteLength),V=!0):H=m.subarray(v.get(),v.get()+ue.byteLength),v.add(ue.byteLength)}}const W=k.complexType.children,X=[];let ee=0;for(const ue of W){const ae=Wn(m,v,1)[0];if(ae==0)continue;const oe=`${k.name}${ue.name==="default"?"":":"+ue.name}`;if(ae!==2||ue.type!=="scalarField"||ue.scalarField.physicalType!==9)throw new Error("Currently only optional string fields are implemented for a struct.");const ge=$o(m,v),ve=Yc(m,ge.numValues,v),Fe=$o(m,v),ot=Fe.decompressedCount!==T?gm(m,v,Fe,!1,new Mh(ve,ge.numValues)):Ko(m,v,Fe,!1);X[ee++]=H?new iu(oe,ot,P,z,R,H,new Mh(ve,ge.numValues)):new df(oe,ot,P,z,new Mh(ve,ge.numValues))}return X})(s,e,a,d)}function Kr(s){return s instanceof Mh}function Sd(s){if(s.name==="id")return!1;if(s.type==="scalarType"){const e=s.scalarType;if(e.type==="physicalType")switch(e.physicalType){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:default:return!1;case 9:return!0}else if(e.type==="logicalType")return!1}else if(s.type==="complexType"){const e=s.complexType;if(e.type==="physicalType")switch(e.physicalType){case 0:case 1:return!0;default:return!1}}return console.warn("Unexpected column type in hasStreamCount",s),!1}const Kc=new TextDecoder;function ec(s,e){const a=Wn(s,e,1)[0];if(a===0)return"";const r=e.get(),d=s.subarray(r,r+a);return e.add(a),Kc.decode(d)}function jl(s,e){const a=Wn(s,e,1)[0]>>>0,r=!!(4&a),d=!!(2&a),u=Wn(s,e,1)[0]>>>0,m={};if(1&a&&(m.nullable=!0),d){const v={};if(r?(v.type="logicalType",v.logicalType=u):(v.type="physicalType",v.physicalType=u),8&a){const k=Wn(s,e,1)[0]>>>0;v.children=new Array(k);for(let T=0;T<k;T++)v.children[T]=jl(s,e)}m.type="complexField",m.complexField=v}else{const v={};r?(v.type="logicalType",v.logicalType=u):(v.type="physicalType",v.physicalType=u),m.type="scalarField",m.scalarField=v}return m}function Oy(s,e){const a=Wn(s,e,1)[0]>>>0,r=(function(d){switch(d){case 0:case 1:case 2:case 3:{const u={};u.nullable=!!(1&d),u.columnScope=0;const m={};return m.physicalType=d>1?6:4,m.type="physicalType",u.scalarType=m,u.type="scalarType",u}case 4:{const u={nullable:!1,columnScope:0},m={type:"physicalType",physicalType:0};return u.type="complexType",u.complexType=m,u}case 30:{const u={nullable:!1,columnScope:0},m={type:"physicalType",physicalType:1};return u.type="complexType",u.complexType=m,u}default:return(function(u){let m=null;switch(u){case 10:case 11:m=0;break;case 12:case 13:m=1;break;case 14:case 15:m=2;break;case 16:case 17:m=3;break;case 18:case 19:m=4;break;case 20:case 21:m=5;break;case 22:case 23:m=6;break;case 24:case 25:m=7;break;case 26:case 27:m=8;break;case 28:case 29:m=9;break;default:return null}const v={};v.nullable=!!(1&u),v.columnScope=0;const k={type:"physicalType"};return k.physicalType=m,v.type="scalarType",v.scalarType=k,v})(d)}})(a);if(!r)throw new Error(`Unsupported column type code: ${a}`);if((function(d){return d>=10})(a)?r.name=ec(s,e):a>=0&&a<=3?r.name="id":a===4&&(r.name="geometry"),(function(d){return d===30})(a)){const d=Wn(s,e,1)[0]>>>0,u=r.complexType;u.children=new Array(d);for(let m=0;m<d;m++)u.children[m]=jl(s,e)}return r}function Dg(s,e){const a={featureTables:[]},r={};r.name=ec(s,e);const d=Wn(s,e,1)[0]>>>0,u=Wn(s,e,1)[0]>>>0;r.columns=new Array(u);for(let m=0;m<u;m++)r.columns[m]=Oy(s,e);return a.featureTables.push(r),[a,d]}function Qc(s,e,a,r,d,u,m=!1){const v=e.scalarType.physicalType,k=Gl(d,u,s,a);if(v===4)switch(k){case kn.FLAT:{const T=Ko(s,a,d,!1);return new Kp(r,T,u)}case kn.SEQUENCE:{const T=um(s,a,d);return new lm(r,T[0],T[1],d.numRleValues)}case kn.CONST:{const T=pm(s,a,d,!1);return new dm(r,T,u)}}else switch(k){case kn.FLAT:{if(m){const P=(function(z,R,H,V){const W=(function(X,ee,ue){const ae=new Float64Array(ee);for(let oe=0;oe<ee;oe++)ae[oe]=Tg(X,ue);return ae})(z,H.numValues,R);return(function(X,ee,ue){switch(ee.logicalLevelTechnique1){case Ta.DELTA:return ee.logicalLevelTechnique2===Ta.RLE&&(X=Sg(X,ee.runs,ee.numRleValues)),(function(ae){ae[0]=ae[0]%2==1?(ae[0]+1)/-2:ae[0]/2;const oe=ae.length/4*4;let ge=1;if(oe>=4)for(;ge<oe-4;ge+=4){const ve=ae[ge],Fe=ae[ge+1],ot=ae[ge+2],et=ae[ge+3];ae[ge]=(ve%2==1?(ve+1)/-2:ve/2)+ae[ge-1],ae[ge+1]=(Fe%2==1?(Fe+1)/-2:Fe/2)+ae[ge],ae[ge+2]=(ot%2==1?(ot+1)/-2:ot/2)+ae[ge+1],ae[ge+3]=(et%2==1?(et+1)/-2:et/2)+ae[ge+2]}for(;ge!=ae.length;++ge)ae[ge]=(ae[ge]%2==1?(ae[ge]+1)/-2:ae[ge]/2)+ae[ge-1]})(X),X;case Ta.RLE:return(function(ae,oe,ge){return Sg(ae,oe.runs,oe.numRleValues)})(X,ee);case Ta.NONE:return X;default:throw new Error(`The specified Logical level technique is not supported: ${ee.logicalLevelTechnique1}`)}})(W,H)})(s,a,d);return new rm(r,P,u)}const T=$f(s,a,d,!1);return new Kf(r,T,u)}case kn.SEQUENCE:{const T=lf(s,a,d);return new ym(r,T[0],T[1],d.numRleValues)}case kn.CONST:{const T=mm(s,a,d,!1);return new Xc(r,T,u)}}throw new Error("Vector type not supported for id column.")}class ky{constructor(e,a){var r;switch(this._featureData=e,this.properties=this._featureData.properties||{},(r=this._featureData.geometry)===null||r===void 0?void 0:r.type){case Vn.POINT:case Vn.MULTIPOINT:this.type=1;break;case Vn.LINESTRING:case Vn.MULTILINESTRING:this.type=2;break;case Vn.POLYGON:case Vn.MULTIPOLYGON:this.type=3;break;default:this.type=0}this.extent=a,this.id=Number(this._featureData.id)}loadGeometry(){const e=[];for(const a of this._featureData.geometry.coordinates){const r=[];for(const d of a)r.push(new re(d.x,d.y));e.push(r)}return e}}class Bg{constructor(e){this.features=[],this.featureTable=e,this.name=e.name,this.extent=e.extent,this.version=2,this.features=e.getFeatures(),this.length=this.features.length}feature(e){return new ky(this.features[e],this.extent)}}class Jc{constructor(e){this.layers={};const a=(function(r,d,u=!0){const m=new xg(0),v=[];for(;m.get()<r.length;){const k=Wn(r,m,1)[0]>>>0,T=m.get()+k;if(T>r.length)throw new Error(`Block overruns tile: ${T} > ${r.length}`);if(Wn(r,m,1)[0]>>>0!=1){m.set(T);continue}const P=Dg(r,m),z=P[1],R=P[0].featureTables[0];let H=null,V=null;const W=[];let X=0;for(const ue of R.columns){const ae=ue.name;if(ae==="id"){let oe=null;if(ue.nullable){const ve=$o(r,m),Fe=m.get(),ot=Yc(r,ve.numValues,m);m.set(Fe+ve.byteLength),oe=new Mh(ot,ve.numValues)}const ge=$o(r,m);X=ge.decompressedCount,H=Qc(r,ue,m,ae,ge,oe!=null?oe:X,u)}else if(ae==="geometry"){const oe=Wn(r,m,1)[0];if(X===0){const ge=m.get();X=$o(r,m).decompressedCount,m.set(ge)}V=Cg(r,oe,m,X)}else{const oe=Sd(ue)?Wn(r,m,1)[0]:1;if(oe===0&&ue.type==="scalarType")continue;const ge=Ad(r,m,ue,oe,X);if(ge)if(Array.isArray(ge))for(const ve of ge)W.push(ve);else W.push(ge)}}const ee=new _d(R.name,V,H,W,z);v.push(ee),m.set(T)}return v})(new Uint8Array(e));this.layers=a.reduce(((r,d)=>Object.assign(Object.assign({},r),{[d.name]:new Bg(d)})),{})}}class Rg{constructor(e,a){this.feature=e,this.type=e.type,this.properties=e.tags?e.tags:{},this.extent=a,"id"in e&&(typeof e.id=="string"?this.id=parseInt(e.id,10):typeof e.id!="number"||isNaN(e.id)||(this.id=e.id))}loadGeometry(){const e=[],a=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const r of a){const d=[];for(const u of r)d.push(new re(u[0],u[1]));e.push(d)}return e}}const ep="_geojsonTileLayer";function ru(s,e){e.writeVarintField(15,s.version||1),e.writeStringField(1,s.name||""),e.writeVarintField(5,s.extent||4096);const a={keys:[],values:[],keycache:{},valuecache:{}};for(let u=0;u<s.length;u++)a.feature=s.feature(u),e.writeMessage(2,hu,a);const r=a.keys;for(const u of r)e.writeStringField(3,u);const d=a.values;for(const u of d)e.writeMessage(4,lu,u)}function hu(s,e){if(!s.feature)return;const a=s.feature;a.id!==void 0&&e.writeVarintField(1,a.id),e.writeMessage(2,Hg,s),e.writeVarintField(3,a.type),e.writeMessage(4,Im,a)}function Hg(s,e){var a;for(const r in(a=s.feature)==null?void 0:a.properties){let d=s.feature.properties[r],u=s.keycache[r];if(d==null)continue;u===void 0&&(s.keys.push(r),u=s.keys.length-1,s.keycache[r]=u),e.writeVarint(u),typeof d!="string"&&typeof d!="boolean"&&typeof d!="number"&&(d=JSON.stringify(d));const m=typeof d+":"+d;let v=s.valuecache[m];v===void 0&&(s.values.push(d),v=s.values.length-1,s.valuecache[m]=v),e.writeVarint(v)}}function Pd(s,e){return(e<<3)+(7&s)}function _m(s){return s<<1^s>>31}function Im(s,e){const a=s.loadGeometry(),r=s.type;let d=0,u=0;for(const m of a){let v=1;r===1&&(v=m.length),e.writeVarint(Pd(1,v));const k=r===3?m.length-1:m.length;for(let T=0;T<k;T++){T===1&&r!==1&&e.writeVarint(Pd(2,k-1));const P=m[T].x-d,z=m[T].y-u;e.writeVarint(_m(P)),e.writeVarint(_m(z)),d+=P,u+=z}s.type===3&&e.writeVarint(Pd(7,1))}}function lu(s,e){const a=typeof s;a==="string"?e.writeStringField(1,s):a==="boolean"?e.writeBooleanField(7,s):a==="number"&&(s%1!=0?e.writeDoubleField(3,s):s<0?e.writeSVarintField(6,s):e.writeVarintField(5,s))}class xm{constructor(e,a){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Xh(jt,16,0),this.grid3D=new Xh(jt,16,0),this.featureIndexArray=new Q,this.promoteId=a}insert(e,a,r,d,u,m){const v=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(r,d,u);const k=m?this.grid3D:this.grid;for(let T=0;T<a.length;T++){const P=a[T],z=[1/0,1/0,-1/0,-1/0];for(let R=0;R<P.length;R++){const H=P[R];z[0]=Math.min(z[0],H.x),z[1]=Math.min(z[1],H.y),z[2]=Math.max(z[2],H.x),z[3]=Math.max(z[3],H.y)}z[0]<jt&&z[1]<jt&&z[2]>=0&&z[3]>=0&&k.insert(v,z[0],z[1],z[2],z[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=this.encoding!=="mlt"?new ja(new Dp(this.rawTileData)).layers:new Jc(this.rawTileData).layers,this.sourceLayerCoder=new im(this.vtLayers?Object.keys(this.vtLayers).sort():[ep])),this.vtLayers}query(e,a,r,d){this.loadVTLayers();const u=e.params,m=jt/e.tileSize/e.scale,v=Mt(u.filter,u.globalState),k=e.queryGeometry,T=e.queryPadding*m,P=Od.fromPoints(k),z=this.grid.query(P.minX-T,P.minY-T,P.maxX+T,P.maxY+T),R=Od.fromPoints(e.cameraQueryGeometry).expandBy(T),H=this.grid3D.query(R.minX,R.minY,R.maxX,R.maxY,((X,ee,ue,ae)=>(function(oe,ge,ve,Fe,ot){for(const lt of oe)if(ge<=lt.x&&ve<=lt.y&&Fe>=lt.x&&ot>=lt.y)return!0;const et=[new re(ge,ve),new re(ge,ot),new re(Fe,ot),new re(Fe,ve)];if(oe.length>2){for(const lt of et)if(Jh(oe,lt))return!0}for(let lt=0;lt<oe.length-1;lt++)if(Um(oe[lt],oe[lt+1],et))return!0;return!1})(e.cameraQueryGeometry,X-T,ee-T,ue+T,ae+T)));for(const X of H)z.push(X);z.sort(du);const V={};let W;for(let X=0;X<z.length;X++){const ee=z[X];if(ee===W)continue;W=ee;const ue=this.featureIndexArray.get(ee);let ae=null;this.loadMatchingFeature(V,ue.bucketIndex,ue.sourceLayerIndex,ue.featureIndex,v,u.layers,u.availableImages,a,r,d,((oe,ge,ve)=>(ae||(ae=Th(oe)),ge.queryIntersectsFeature({queryGeometry:k,feature:oe,featureState:ve,geometry:ae,zoom:this.z,transform:e.transform,pixelsToTileUnits:m,pixelPosMatrix:e.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:e.getElevation}))))}return V}loadMatchingFeature(e,a,r,d,u,m,v,k,T,P,z){const R=this.bucketLayerIDs[a];if(m&&!R.some((X=>m.has(X))))return;const H=this.sourceLayerCoder.decode(r),V=this.vtLayers[H].feature(d);if(u.needGeometry){const X=mr(V,!0);if(!u.filter(new as(this.tileID.overscaledZ),X,this.tileID.canonical))return}else if(!u.filter(new as(this.tileID.overscaledZ),V))return;const W=this.getId(V,H);for(let X=0;X<R.length;X++){const ee=R[X];if(m&&!m.has(ee))continue;const ue=k[ee];if(!ue)continue;let ae={};W&&P&&(ae=P.getState(ue.sourceLayer||ep,W));const oe=Ma({},T[ee]);oe.paint=Ng(oe.paint,ue.paint,V,ae,v),oe.layout=Ng(oe.layout,ue.layout,V,ae,v);const ge=!z||z(V,ue,ae);if(!ge)continue;const ve=new Yp(V,this.z,this.x,this.y,W);ve.layer=oe;let Fe=e[ee];Fe===void 0&&(Fe=e[ee]=[]),Fe.push({featureIndex:d,feature:ve,intersectionZ:ge})}}lookupSymbolFeatures(e,a,r,d,u,m,v,k){const T={};this.loadVTLayers();const P=Mt(u.filterSpec,u.globalState);for(const z of e)this.loadMatchingFeature(T,r,d,z,P,m,v,k,a);return T}hasLayer(e){for(const a of this.bucketLayerIDs)for(const r of a)if(e===r)return!0;return!1}getId(e,a){var r;let d=e.id;return this.promoteId&&(d=e.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[a]],typeof d=="boolean"&&(d=Number(d)),d===void 0&&(!((r=e.properties)===null||r===void 0)&&r.cluster)&&this.promoteId&&(d=Number(e.properties.cluster_id))),d}}function Ng(s,e,a,r,d){return xn(s,((u,m)=>{const v=e instanceof Il?e.get(m):null;return v&&v.evaluate?v.evaluate(a,r,d):v}))}function du(s,e){return e-s}function n(s,e,a,r,d){const u=[];for(let m=0;m<s.length;m++){const v=s[m];let k;for(let T=0;T<v.length-1;T++){let P=v[T],z=v[T+1];P.x<e&&z.x<e||(P.x<e?P=new re(e,P.y+(e-P.x)/(z.x-P.x)*(z.y-P.y))._round():z.x<e&&(z=new re(e,P.y+(e-P.x)/(z.x-P.x)*(z.y-P.y))._round()),P.y<a&&z.y<a||(P.y<a?P=new re(P.x+(a-P.y)/(z.y-P.y)*(z.x-P.x),a)._round():z.y<a&&(z=new re(P.x+(a-P.y)/(z.y-P.y)*(z.x-P.x),a)._round()),P.x>=r&&z.x>=r||(P.x>=r?P=new re(r,P.y+(r-P.x)/(z.x-P.x)*(z.y-P.y))._round():z.x>=r&&(z=new re(r,P.y+(r-P.x)/(z.x-P.x)*(z.y-P.y))._round()),P.y>=d&&z.y>=d||(P.y>=d?P=new re(P.x+(d-P.y)/(z.y-P.y)*(z.x-P.x),d)._round():z.y>=d&&(z=new re(P.x+(d-P.y)/(z.y-P.y)*(z.x-P.x),d)._round()),k&&P.equals(k[k.length-1])||(k=[P],u.push(k)),k.push(z)))))}}return u}function i(s,e,a,r,d){switch(e){case 1:return(function(u,m,v,k){const T=[];for(const P of u)for(const z of P){const R=k===0?z.x:z.y;R>=m&&R<=v&&T.push([z])}return T})(s,a,r,d);case 2:return b(s,a,r,d,!1);case 3:return b(s,a,r,d,!0)}return[]}function f(s,e,a,r,d){const u=r===0?x:S;let m=[];const v=[];for(let P=0;P<s.length-1;P++){const z=s[P],R=s[P+1],H=r===0?z.x:z.y,V=r===0?R.x:R.y;let W=!1;H<e?V>e&&m.push(u(z,R,e)):H>a?V<a&&m.push(u(z,R,a)):m.push(z),V<e&&H>=e&&(m.push(u(z,R,e)),W=!0),V>a&&H<=a&&(m.push(u(z,R,a)),W=!0),!d&&W&&(v.push(m),m=[])}const k=s.length-1,T=r===0?s[k].x:s[k].y;return T>=e&&T<=a&&m.push(s[k]),d&&m.length>0&&!m[0].equals(m[m.length-1])&&m.push(new re(m[0].x,m[0].y)),m.length>0&&v.push(m),v}function b(s,e,a,r,d){const u=[];for(const m of s){const v=f(m,e,a,r,d);v.length>0&&u.push(...v)}return u}function x(s,e,a){return new re(a,s.y+(a-s.x)/(e.x-s.x)*(e.y-s.y))}function S(s,e,a){return new re(s.x+(a-s.y)/(e.y-s.y)*(e.x-s.x),a)}Rt("FeatureIndex",xm,{omit:["rawTileData","sourceLayerCoder"]});class q extends re{constructor(e,a,r,d){super(e,a),this.angle=r,d!==void 0&&(this.segment=d)}clone(){return new q(this.x,this.y,this.angle,this.segment)}}function se(s,e,a,r,d){if(e.segment===void 0||a===0)return!0;let u=e,m=e.segment+1,v=0;for(;v>-a/2;){if(m--,m<0)return!1;v-=s[m].dist(u),u=s[m]}v+=s[m].dist(s[m+1]),m++;const k=[];let T=0;for(;v<a/2;){const P=s[m],z=s[m+1];if(!z)return!1;let R=s[m-1].angleTo(P)-P.angleTo(z);for(R=Math.abs((R+3*Math.PI)%(2*Math.PI)-Math.PI),k.push({distance:v,angleDelta:R}),T+=R;v-k[0].distance>r;)T-=k.shift().angleDelta;if(T>d)return!1;m++,v+=P.dist(z)}return!0}function Ae(s){let e=0;for(let a=0;a<s.length-1;a++)e+=s[a].dist(s[a+1]);return e}function Ye(s,e,a){return s?.6*e*a:0}function rt(s,e){return Math.max(s?s.right-s.left:0,e?e.right-e.left:0)}function pt(s,e,a,r,d,u){const m=Ye(a,d,u),v=rt(a,r)*u;let k=0;const T=Ae(s)/2;for(let P=0;P<s.length-1;P++){const z=s[P],R=s[P+1],H=z.dist(R);if(k+H>T){const V=(T-k)/H,W=bs.number(z.x,R.x,V),X=bs.number(z.y,R.y,V),ee=new q(W,X,R.angleTo(z),P);return ee._round(),!m||se(s,ee,v,m,e)?ee:void 0}k+=H}}function Qe(s,e,a,r,d,u,m,v,k){const T=Ye(r,u,m),P=rt(r,d),z=P*m,R=s[0].x===0||s[0].x===k||s[0].y===0||s[0].y===k;return e-z<e/4&&(e=z+e/4),at(s,R?e/2*v%e:(P/2+2*u)*m*v%e,e,T,a,z,R,!1,k)}function at(s,e,a,r,d,u,m,v,k){const T=u/2,P=Ae(s);let z=0,R=e-a,H=[];for(let V=0;V<s.length-1;V++){const W=s[V],X=s[V+1],ee=W.dist(X),ue=X.angleTo(W);for(;R+a<z+ee;){R+=a;const ae=(R-z)/ee,oe=bs.number(W.x,X.x,ae),ge=bs.number(W.y,X.y,ae);if(oe>=0&&oe<k&&ge>=0&&ge<k&&R-T>=0&&R+T<=P){const ve=new q(oe,ge,ue,V);ve._round(),r&&!se(s,ve,u,r,d)||H.push(ve)}}z+=ee}return v||H.length||m||(H=at(s,z/2,a,r,d,u,m,!0,k)),H}function Zt(s,e,a,r){const d=[],u=s.image,m=u.pixelRatio,v=u.paddedRect.w-2,k=u.paddedRect.h-2;let T={x1:s.left,y1:s.top,x2:s.right,y2:s.bottom};const P=u.stretchX||[[0,v]],z=u.stretchY||[[0,k]],R=(Ke,xt)=>Ke+xt[1]-xt[0],H=P.reduce(R,0),V=z.reduce(R,0),W=v-H,X=k-V;let ee=0,ue=H,ae=0,oe=V,ge=0,ve=W,Fe=0,ot=X;if(u.content&&r){const Ke=u.content,xt=Ke[2]-Ke[0],Pt=Ke[3]-Ke[1];(u.textFitWidth||u.textFitHeight)&&(T=Nl(s)),ee=aa(P,0,Ke[0]),ae=aa(z,0,Ke[1]),ue=aa(P,Ke[0],Ke[2]),oe=aa(z,Ke[1],Ke[3]),ge=Ke[0]-ee,Fe=Ke[1]-ae,ve=xt-ue,ot=Pt-oe}const et=T.x1,lt=T.y1,At=T.x2-et,yt=T.y2-lt,ut=(Ke,xt,Pt,Lt)=>{const _t=He(Ke.stretch-ee,ue,At,et),Yt=Me(Ke.fixed-ge,ve,Ke.stretch,H),Da=He(xt.stretch-ae,oe,yt,lt),ga=Me(xt.fixed-Fe,ot,xt.stretch,V),en=He(Pt.stretch-ee,ue,At,et),Qo=Me(Pt.fixed-ge,ve,Pt.stretch,H),Zn=He(Lt.stretch-ae,oe,yt,lt),tn=Me(Lt.fixed-Fe,ot,Lt.stretch,V),Vs=new re(_t,Da),ds=new re(en,Da),gn=new re(en,Zn),_n=new re(_t,Zn),Fs=new re(Yt/m,ga/m),wr=new re(Qo/m,tn/m),Jo=e*Math.PI/180;if(Jo){const Ao=Math.sin(Jo),on=Math.cos(Jo),Xn=[on,-Ao,Ao,on];Vs._matMult(Xn),ds._matMult(Xn),_n._matMult(Xn),gn._matMult(Xn)}const vr=Ke.stretch+Ke.fixed,ol=xt.stretch+xt.fixed;return{tl:Vs,tr:ds,bl:_n,br:gn,tex:{x:u.paddedRect.x+1+vr,y:u.paddedRect.y+1+ol,w:Pt.stretch+Pt.fixed-vr,h:Lt.stretch+Lt.fixed-ol},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Fs,pixelOffsetBR:wr,minFontScaleX:ve/m/At,minFontScaleY:ot/m/yt,isSDF:a}};if(r&&(u.stretchX||u.stretchY)){const Ke=xs(P,W,H),xt=xs(z,X,V);for(let Pt=0;Pt<Ke.length-1;Pt++){const Lt=Ke[Pt],_t=Ke[Pt+1];for(let Yt=0;Yt<xt.length-1;Yt++)d.push(ut(Lt,xt[Yt],_t,xt[Yt+1]))}}else d.push(ut({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:v+1},{fixed:0,stretch:k+1}));return d}function aa(s,e,a){let r=0;for(const d of s)r+=Math.max(e,Math.min(a,d[1]))-Math.max(e,Math.min(a,d[0]));return r}function xs(s,e,a){const r=[{fixed:-1,stretch:0}];for(const[d,u]of s){const m=r[r.length-1];r.push({fixed:d-m.stretch,stretch:m.stretch}),r.push({fixed:d-m.stretch,stretch:m.stretch+(u-d)})}return r.push({fixed:e+1,stretch:a}),r}function He(s,e,a,r){return s/e*a+r}function Me(s,e,a,r){return s-e*a/r}Rt("Anchor",q);class Xe{constructor(e,a,r,d,u,m,v,k,T,P){var z;if(this.boxStartIndex=e.length,T){let R=m.top,H=m.bottom;const V=m.collisionPadding;V&&(R-=V[1],H+=V[3]);let W=H-R;W>0&&(W=Math.max(10,W),this.circleDiameter=W)}else{const R=!((z=m.image)===null||z===void 0)&&z.content&&(m.image.textFitWidth||m.image.textFitHeight)?Nl(m):{x1:m.left,y1:m.top,x2:m.right,y2:m.bottom};R.y1=R.y1*v-k[0],R.y2=R.y2*v+k[2],R.x1=R.x1*v-k[3],R.x2=R.x2*v+k[1];const H=m.collisionPadding;if(H&&(R.x1-=H[0]*v,R.y1-=H[1]*v,R.x2+=H[2]*v,R.y2+=H[3]*v),P){const V=new re(R.x1,R.y1),W=new re(R.x2,R.y1),X=new re(R.x1,R.y2),ee=new re(R.x2,R.y2),ue=P*Math.PI/180;V._rotate(ue),W._rotate(ue),X._rotate(ue),ee._rotate(ue),R.x1=Math.min(V.x,W.x,X.x,ee.x),R.x2=Math.max(V.x,W.x,X.x,ee.x),R.y1=Math.min(V.y,W.y,X.y,ee.y),R.y2=Math.max(V.y,W.y,X.y,ee.y)}e.emplaceBack(a.x,a.y,R.x1,R.y1,R.x2,R.y2,r,d,u)}this.boxEndIndex=e.length}}class dt{constructor(e=[],a=(r,d)=>r<d?-1:r>d?1:0){if(this.data=e,this.length=this.data.length,this.compare=a,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;const e=this.data[0],a=this.data.pop();return--this.length>0&&(this.data[0]=a,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:a,compare:r}=this,d=a[e];for(;e>0;){const u=e-1>>1,m=a[u];if(r(d,m)>=0)break;a[e]=m,e=u}a[e]=d}_down(e){const{data:a,compare:r}=this,d=this.length>>1,u=a[e];for(;e<d;){let m=1+(e<<1);const v=m+1;if(v<this.length&&r(a[v],a[m])<0&&(m=v),r(a[m],u)>=0)break;a[e]=a[m],e=m}a[e]=u}}function ea(s,e=1,a=!1){const r=Od.fromPoints(s[0]),d=Math.min(r.width(),r.height());let u=d/2;const m=new dt([],ls),{minX:v,minY:k,maxX:T,maxY:P}=r;if(d===0)return new re(v,k);for(let H=v;H<T;H+=d)for(let V=k;V<P;V+=d)m.push(new Xt(H+u,V+u,u,s));let z=(function(H){let V=0,W=0,X=0;const ee=H[0];for(let ue=0,ae=ee.length,oe=ae-1;ue<ae;oe=ue++){const ge=ee[ue],ve=ee[oe],Fe=ge.x*ve.y-ve.x*ge.y;W+=(ge.x+ve.x)*Fe,X+=(ge.y+ve.y)*Fe,V+=3*Fe}return new Xt(W/V,X/V,0,H)})(s),R=m.length;for(;m.length;){const H=m.pop();(H.d>z.d||!z.d)&&(z=H,a&&console.log("found best %d after %d probes",Math.round(1e4*H.d)/1e4,R)),H.max-z.d<=e||(u=H.h/2,m.push(new Xt(H.p.x-u,H.p.y-u,u,s)),m.push(new Xt(H.p.x+u,H.p.y-u,u,s)),m.push(new Xt(H.p.x-u,H.p.y+u,u,s)),m.push(new Xt(H.p.x+u,H.p.y+u,u,s)),R+=4)}return a&&(console.log(`num probes: ${R}`),console.log(`best distance: ${z.d}`)),z.p}function ls(s,e){return e.max-s.max}function Xt(s,e,a,r){this.p=new re(s,e),this.h=a,this.d=(function(d,u){let m=!1,v=1/0;for(let k=0;k<u.length;k++){const T=u[k];for(let P=0,z=T.length,R=z-1;P<z;R=P++){const H=T[P],V=T[R];H.y>d.y!=V.y>d.y&&d.x<(V.x-H.x)*(d.y-H.y)/(V.y-H.y)+H.x&&(m=!m),v=Math.min(v,Su(d,H,V))}}return(m?1:-1)*Math.sqrt(v)})(this.p,r),this.max=this.d+this.h*Math.SQRT2}var Qt;E.aP=void 0,(Qt=E.aP||(E.aP={}))[Qt.center=1]="center",Qt[Qt.left=2]="left",Qt[Qt.right=3]="right",Qt[Qt.top=4]="top",Qt[Qt.bottom=5]="bottom",Qt[Qt["top-left"]=6]="top-left",Qt[Qt["top-right"]=7]="top-right",Qt[Qt["bottom-left"]=8]="bottom-left",Qt[Qt["bottom-right"]=9]="bottom-right";const Na=Number.POSITIVE_INFINITY;function ns(s,e){return e[1]!==Na?(function(a,r,d){let u=0,m=0;switch(r=Math.abs(r),d=Math.abs(d),a){case"top-right":case"top-left":case"top":m=d-7;break;case"bottom-right":case"bottom-left":case"bottom":m=7-d}switch(a){case"top-right":case"bottom-right":case"right":u=-r;break;case"top-left":case"bottom-left":case"left":u=r}return[u,m]})(s,e[0],e[1]):(function(a,r){let d=0,u=0;r<0&&(r=0);const m=r/Math.SQRT2;switch(a){case"top-right":case"top-left":u=m-7;break;case"bottom-right":case"bottom-left":u=7-m;break;case"bottom":u=7-r;break;case"top":u=r-7}switch(a){case"top-right":case"bottom-right":d=-m;break;case"top-left":case"bottom-left":d=m;break;case"left":d=r;break;case"right":d=-r}return[d,u]})(s,e[0])}function Ul(s,e,a){var r;const d=s.layout,u=(r=d.get("text-variable-anchor-offset"))===null||r===void 0?void 0:r.evaluate(e,{},a);if(u){const v=u.values,k=[];for(let T=0;T<v.length;T+=2){const P=k[T]=v[T],z=v[T+1].map((R=>R*Bn));P.startsWith("top")?z[1]-=7:P.startsWith("bottom")&&(z[1]+=7),k[T+1]=z}return new Os(k)}const m=d.get("text-variable-anchor");if(m){let v;v=s._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[d.get("text-radial-offset").evaluate(e,{},a)*Bn,Na]:d.get("text-offset").evaluate(e,{},a).map((T=>T*Bn));const k=[];for(const T of m)k.push(T,ns(T,v));return new Os(k)}return null}function Tm(s){switch(s){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function c0(s,e,a,r,d,u,m,v,k,T,P,z){let R=u.textMaxSize.evaluate(e,{});R===void 0&&(R=m);const H=s.layers[0].layout,V=H.get("icon-offset").evaluate(e,{},P),W=D1(a.horizontal),X=m/24,ee=s.tilePixelRatio*X,ue=s.tilePixelRatio*R/24,ae=s.tilePixelRatio*v,oe=s.tilePixelRatio*H.get("symbol-spacing"),ge=H.get("text-padding")*s.tilePixelRatio,ve=(function(Pt,Lt,_t,Yt=1){const Da=Pt.get("icon-padding").evaluate(Lt,{},_t),ga=Da&&Da.values;return[ga[0]*Yt,ga[1]*Yt,ga[2]*Yt,ga[3]*Yt]})(H,e,P,s.tilePixelRatio),Fe=H.get("text-max-angle")/180*Math.PI,ot=H.get("text-rotation-alignment")!=="viewport"&&H.get("symbol-placement")!=="point",et=H.get("icon-rotation-alignment")==="map"&&H.get("symbol-placement")!=="point",lt=H.get("symbol-placement"),At=oe/2,yt=H.get("icon-text-fit");let ut;r&&yt!=="none"&&(s.allowVerticalPlacement&&a.vertical&&(ut=Ph(r,a.vertical,yt,H.get("icon-text-fit-padding"),V,X)),W&&(r=Ph(r,W,yt,H.get("icon-text-fit-padding"),V,X)));const Ke=P?z.line.getGranularityForZoomLevel(P.z):1,xt=(Pt,Lt)=>{Lt.x<0||Lt.x>=jt||Lt.y<0||Lt.y>=jt||(function(_t,Yt,Da,ga,en,Qo,Zn,tn,Vs,ds,gn,_n,Fs,wr,Jo,vr,ol,Ao,on,Xn,yn,So,ff,ql,Pm){const tc=_t.addToLineVertexArray(Yt,Da);let tp,fu,cu,pu,N1=0,G1=0,F1=0,j1=0,Ey=-1,Cy=-1;const cf={};let U1=Qs("");if(_t.allowVerticalPlacement&&ga.vertical){const Oi=tn.layout.get("text-rotate").evaluate(yn,{},ql)+90;cu=new Xe(Vs,Yt,ds,gn,_n,ga.vertical,Fs,wr,Jo,Oi),Zn&&(pu=new Xe(Vs,Yt,ds,gn,_n,Zn,ol,Ao,Jo,Oi))}if(en){const Oi=tn.layout.get("icon-rotate").evaluate(yn,{}),Lh=tn.layout.get("icon-text-fit")!=="none",ap=Zt(en,Oi,ff,Lh),Wl=Zn?Zt(Zn,Oi,ff,Lh):void 0;fu=new Xe(Vs,Yt,ds,gn,_n,en,ol,Ao,!1,Oi),N1=4*ap.length;const sp=_t.iconSizeData;let Ed=null;sp.kind==="source"?(Ed=[yr*tn.layout.get("icon-size").evaluate(yn,{})],Ed[0]>wd&&As(`${_t.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):sp.kind==="composite"&&(Ed=[yr*So.compositeIconSizes[0].evaluate(yn,{},ql),yr*So.compositeIconSizes[1].evaluate(yn,{},ql)],(Ed[0]>wd||Ed[1]>wd)&&As(`${_t.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),_t.addSymbols(_t.icon,ap,Ed,Xn,on,yn,E.az.none,Yt,tc.lineStartIndex,tc.lineLength,-1,ql),Ey=_t.icon.placedSymbolArray.length-1,Wl&&(G1=4*Wl.length,_t.addSymbols(_t.icon,Wl,Ed,Xn,on,yn,E.az.vertical,Yt,tc.lineStartIndex,tc.lineLength,-1,ql),Cy=_t.icon.placedSymbolArray.length-1)}const q1=Object.keys(ga.horizontal);for(const Oi of q1){const Lh=ga.horizontal[Oi];if(!tp){U1=Qs(Lh.text);const Wl=tn.layout.get("text-rotate").evaluate(yn,{},ql);tp=new Xe(Vs,Yt,ds,gn,_n,Lh,Fs,wr,Jo,Wl)}const ap=Lh.positionedLines.length===1;if(F1+=z1(_t,Yt,Lh,Qo,tn,Jo,yn,vr,tc,ga.vertical?E.az.horizontal:E.az.horizontalOnly,ap?q1:[Oi],cf,Ey,So,ql),ap)break}ga.vertical&&(j1+=z1(_t,Yt,ga.vertical,Qo,tn,Jo,yn,vr,tc,E.az.vertical,["vertical"],cf,Cy,So,ql));const m0=tp?tp.boxStartIndex:_t.collisionBoxArray.length,g0=tp?tp.boxEndIndex:_t.collisionBoxArray.length,y0=cu?cu.boxStartIndex:_t.collisionBoxArray.length,b0=cu?cu.boxEndIndex:_t.collisionBoxArray.length,w0=fu?fu.boxStartIndex:_t.collisionBoxArray.length,v0=fu?fu.boxEndIndex:_t.collisionBoxArray.length,O0=pu?pu.boxStartIndex:_t.collisionBoxArray.length,k0=pu?pu.boxEndIndex:_t.collisionBoxArray.length;let Vl=-1;const Fg=(Oi,Lh)=>Oi&&Oi.circleDiameter?Math.max(Oi.circleDiameter,Lh):Lh;Vl=Fg(tp,Vl),Vl=Fg(cu,Vl),Vl=Fg(fu,Vl),Vl=Fg(pu,Vl);const V1=Vl>-1?1:0;V1&&(Vl*=Pm/Bn),_t.glyphOffsetArray.length>=Wf.MAX_GLYPHS&&As("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),yn.sortKey!==void 0&&_t.addToSortKeyRanges(_t.symbolInstances.length,yn.sortKey);const _0=Ul(tn,yn,ql),[I0,x0]=(function(Oi,Lh){const ap=Oi.length,Wl=Lh==null?void 0:Lh.values;if((Wl==null?void 0:Wl.length)>0)for(let sp=0;sp<Wl.length;sp+=2){const Ed=Wl[sp+1];Oi.emplaceBack(E.aP[Wl[sp]],Ed[0],Ed[1])}return[ap,Oi.length]})(_t.textAnchorOffsets,_0);_t.symbolInstances.emplaceBack(Yt.x,Yt.y,cf.right>=0?cf.right:-1,cf.center>=0?cf.center:-1,cf.left>=0?cf.left:-1,cf.vertical||-1,Ey,Cy,U1,m0,g0,y0,b0,w0,v0,O0,k0,ds,F1,j1,N1,G1,V1,0,Fs,Vl,I0,x0)})(s,Lt,Pt,a,r,d,ut,s.layers[0],s.collisionBoxArray,e.index,e.sourceLayerIndex,s.index,ee,[ge,ge,ge,ge],ot,k,ae,ve,et,V,e,u,T,P,m)};if(lt==="line")for(const Pt of n(e.geometry,0,0,jt,jt)){const Lt=zl(Pt,Ke),_t=Qe(Lt,oe,Fe,a.vertical||W,r,24,ue,s.overscaling,jt);for(const Yt of _t)W&&p0(s,W.text,At,Yt)||xt(Lt,Yt)}else if(lt==="line-center"){for(const Pt of e.geometry)if(Pt.length>1){const Lt=zl(Pt,Ke),_t=pt(Lt,Fe,a.vertical||W,r,24,ue);_t&&xt(Lt,_t)}}else if(e.type==="Polygon")for(const Pt of lh(e.geometry,0)){const Lt=ea(Pt,16);xt(zl(Pt[0],Ke,!0),new q(Lt.x,Lt.y,0))}else if(e.type==="LineString")for(const Pt of e.geometry){const Lt=zl(Pt,Ke);xt(Lt,new q(Lt[0].x,Lt[0].y,0))}else if(e.type==="Point")for(const Pt of e.geometry)for(const Lt of Pt)xt([Lt],new q(Lt.x,Lt.y,0))}function z1(s,e,a,r,d,u,m,v,k,T,P,z,R,H,V){const W=(function(ue,ae,oe,ge,ve,Fe,ot,et){const lt=ge.layout.get("text-rotate").evaluate(Fe,{})*Math.PI/180,At=[];for(const yt of ae.positionedLines)for(const ut of yt.positionedGlyphs){if(!ut.rect)continue;const Ke=ut.rect||{};let xt=4,Pt=!0,Lt=1,_t=0;const Yt=(ve||et)&&ut.vertical,Da=ut.metrics.advance*ut.scale/2;if(et&&ae.verticalizable&&(_t=yt.lineOffset/2-(ut.imageName?-(Bn-ut.metrics.width*ut.scale)/2:(ut.scale-1)*Bn)),ut.imageName){const Ao=ot[ut.imageName];Pt=Ao.sdf,Lt=Ao.pixelRatio,xt=1/Lt}const ga=ve?[ut.x+Da,ut.y]:[0,0];let en=ve?[0,0]:[ut.x+Da+oe[0],ut.y+oe[1]-_t],Qo=[0,0];Yt&&(Qo=en,en=[0,0]);const Zn=ut.metrics.isDoubleResolution?2:1,tn=(ut.metrics.left-xt)*ut.scale-Da+en[0],Vs=(-ut.metrics.top-xt)*ut.scale+en[1],ds=tn+Ke.w/Zn*ut.scale/Lt,gn=Vs+Ke.h/Zn*ut.scale/Lt,_n=new re(tn,Vs),Fs=new re(ds,Vs),wr=new re(tn,gn),Jo=new re(ds,gn);if(Yt){const Ao=new re(-Da,Da- -17),on=-Math.PI/2,Xn=12-Da,yn=new re(22-Xn,-(ut.imageName?Xn:0)),So=new re(...Qo);_n._rotateAround(on,Ao)._add(yn)._add(So),Fs._rotateAround(on,Ao)._add(yn)._add(So),wr._rotateAround(on,Ao)._add(yn)._add(So),Jo._rotateAround(on,Ao)._add(yn)._add(So)}if(lt){const Ao=Math.sin(lt),on=Math.cos(lt),Xn=[on,-Ao,Ao,on];_n._matMult(Xn),Fs._matMult(Xn),wr._matMult(Xn),Jo._matMult(Xn)}const vr=new re(0,0),ol=new re(0,0);At.push({tl:_n,tr:Fs,bl:wr,br:Jo,tex:Ke,writingMode:ae.writingMode,glyphOffset:ga,sectionIndex:ut.sectionIndex,isSDF:Pt,pixelOffsetTL:vr,pixelOffsetBR:ol,minFontScaleX:0,minFontScaleY:0})}return At})(0,a,v,d,u,m,r,s.allowVerticalPlacement),X=s.textSizeData;let ee=null;X.kind==="source"?(ee=[yr*d.layout.get("text-size").evaluate(m,{})],ee[0]>wd&&As(`${s.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):X.kind==="composite"&&(ee=[yr*H.compositeTextSizes[0].evaluate(m,{},V),yr*H.compositeTextSizes[1].evaluate(m,{},V)],(ee[0]>wd||ee[1]>wd)&&As(`${s.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),s.addSymbols(s.text,W,ee,v,u,m,T,e,k.lineStartIndex,k.lineLength,R,V);for(const ue of P)z[ue]=s.text.placedSymbolArray.length-1;return 4*W.length}function D1(s){for(const e in s)return s[e];return null}function p0(s,e,a,r){const d=s.compareText;if(e in d){const u=d[e];for(let m=u.length-1;m>=0;m--)if(r.dist(u[m])<a)return!0}else d[e]=[];return d[e].push(r),!1}const B1=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class _y{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[a,r]=new Uint8Array(e,0,2);if(a!==219)throw new Error("Data does not appear to be in a KDBush format.");const d=r>>4;if(d!==1)throw new Error(`Got v${d} data when expected v1.`);const u=B1[15&r];if(!u)throw new Error("Unrecognized array type.");const[m]=new Uint16Array(e,2,1),[v]=new Uint32Array(e,4,1);return new _y(v,m,u,e)}constructor(e,a=64,r=Float64Array,d){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+a,2),65535),this.ArrayType=r,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const u=B1.indexOf(this.ArrayType),m=2*e*this.ArrayType.BYTES_PER_ELEMENT,v=e*this.IndexArrayType.BYTES_PER_ELEMENT,k=(8-v%8)%8;if(u<0)throw new Error(`Unexpected typed array class: ${r}.`);d&&d instanceof ArrayBuffer?(this.data=d,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+v+k,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+m+v+k),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+v+k,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+u]),new Uint16Array(this.data,2,1)[0]=a,new Uint32Array(this.data,4,1)[0]=e)}add(e,a){const r=this._pos>>1;return this.ids[r]=r,this.coords[this._pos++]=e,this.coords[this._pos++]=a,r}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return Iy(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,a,r,d){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:u,coords:m,nodeSize:v}=this,k=[0,u.length-1,0],T=[];for(;k.length;){const P=k.pop()||0,z=k.pop()||0,R=k.pop()||0;if(z-R<=v){for(let X=R;X<=z;X++){const ee=m[2*X],ue=m[2*X+1];ee>=e&&ee<=r&&ue>=a&&ue<=d&&T.push(u[X])}continue}const H=R+z>>1,V=m[2*H],W=m[2*H+1];V>=e&&V<=r&&W>=a&&W<=d&&T.push(u[H]),(P===0?e<=V:a<=W)&&(k.push(R),k.push(H-1),k.push(1-P)),(P===0?r>=V:d>=W)&&(k.push(H+1),k.push(z),k.push(1-P))}return T}within(e,a,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:d,coords:u,nodeSize:m}=this,v=[0,d.length-1,0],k=[],T=r*r;for(;v.length;){const P=v.pop()||0,z=v.pop()||0,R=v.pop()||0;if(z-R<=m){for(let X=R;X<=z;X++)H1(u[2*X],u[2*X+1],e,a)<=T&&k.push(d[X]);continue}const H=R+z>>1,V=u[2*H],W=u[2*H+1];H1(V,W,e,a)<=T&&k.push(d[H]),(P===0?e-r<=V:a-r<=W)&&(v.push(R),v.push(H-1),v.push(1-P)),(P===0?e+r>=V:a+r>=W)&&(v.push(H+1),v.push(z),v.push(1-P))}return k}}function Iy(s,e,a,r,d,u){if(d-r<=a)return;const m=r+d>>1;R1(s,e,m,r,d,u),Iy(s,e,a,r,m-1,1-u),Iy(s,e,a,m+1,d,1-u)}function R1(s,e,a,r,d,u){for(;d>r;){if(d-r>600){const T=d-r+1,P=a-r+1,z=Math.log(T),R=.5*Math.exp(2*z/3),H=.5*Math.sqrt(z*R*(T-R)/T)*(P-T/2<0?-1:1);R1(s,e,a,Math.max(r,Math.floor(a-P*R/T+H)),Math.min(d,Math.floor(a+(T-P)*R/T+H)),u)}const m=e[2*a+u];let v=r,k=d;for(Am(s,e,r,a),e[2*d+u]>m&&Am(s,e,r,d);v<k;){for(Am(s,e,v,k),v++,k--;e[2*v+u]<m;)v++;for(;e[2*k+u]>m;)k--}e[2*r+u]===m?Am(s,e,r,k):(k++,Am(s,e,k,d)),k<=a&&(r=k+1),a<=k&&(d=k-1)}}function Am(s,e,a,r){xy(s,a,r),xy(e,2*a,2*r),xy(e,2*a+1,2*r+1)}function xy(s,e,a){const r=s[e];s[e]=s[a],s[a]=r}function H1(s,e,a,r){const d=s-a,u=e-r;return d*d+u*u}var Ty;E.cH=void 0,(Ty=E.cH||(E.cH={})).create="create",Ty.load="load",Ty.fullLoad="fullLoad";let Gg=null,Sm=[];const Ay=1e3/60,Sy="loadTime",Py="fullLoadTime",u0={mark(s){performance.mark(s)},frame(s){const e=s;Gg!=null&&Sm.push(e-Gg),Gg=e},clearMetrics(){Gg=null,Sm=[],performance.clearMeasures(Sy),performance.clearMeasures(Py);for(const s in E.cH)performance.clearMarks(E.cH[s])},getPerformanceMetrics(){performance.measure(Sy,E.cH.create,E.cH.load),performance.measure(Py,E.cH.create,E.cH.fullLoad);const s=performance.getEntriesByName(Sy)[0].duration,e=performance.getEntriesByName(Py)[0].duration,a=Sm.length,r=1/(Sm.reduce(((u,m)=>u+m),0)/a/1e3),d=Sm.filter((u=>u>Ay)).reduce(((u,m)=>u+(m-Ay)/Ay),0);return{loadTime:s,fullLoadTime:e,fps:r,percentDroppedFrames:d/(a+d)*100,totalFrames:a}}};E.$=Te,E.A=mt,E.B=hr,E.C=Dn,E.D=Gt,E.E=Ea,E.F=function([s,e,a]){return e+=90,e*=Math.PI/180,a*=Math.PI/180,{x:s*Math.cos(e)*Math.sin(a),y:s*Math.sin(e)*Math.sin(a),z:s*Math.cos(a)}},E.G=bs,E.H=as,E.I=gs,E.J=If,E.K=function(s){if(vs==null){const e=s.navigator?s.navigator.userAgent:null;vs=!!s.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return vs},E.L=class{constructor(s,e){this.target=s,this.mapId=e,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new Wp((()=>this.process())),this.subscription=Jr(this.target,"message",(a=>this.receive(a)),!1),this.globalScope=Po(self)?s:window}registerMessageHandler(s,e){this.messageHandlers[s]=e}unregisterMessageHandler(s){delete this.messageHandlers[s]}sendAsync(s,e){return new Promise(((a,r)=>{const d=Math.round(1e18*Math.random()).toString(36).substring(0,10),u=e?Jr(e.signal,"abort",(()=>{u==null||u.unsubscribe(),delete this.resolveRejects[d];const k={id:d,type:"<cancel>",origin:location.origin,targetMapId:s.targetMapId,sourceMapId:this.mapId};this.target.postMessage(k)}),am):null;this.resolveRejects[d]={resolve:k=>{u==null||u.unsubscribe(),a(k)},reject:k=>{u==null||u.unsubscribe(),r(k)}};const m=[],v=Object.assign(Object.assign({},s),{id:d,sourceMapId:this.mapId,origin:location.origin,data:lr(s.data,m)});this.target.postMessage(v,{transfer:m})}))}receive(s){const e=s.data,a=e.id;if(!(e.origin!=="file://"&&location.origin!=="file://"&&e.origin!=="resource://android"&&location.origin!=="resource://android"&&e.origin!==location.origin||e.targetMapId&&this.mapId!==e.targetMapId)){if(e.type==="<cancel>"){delete this.tasks[a];const r=this.abortControllers[a];return delete this.abortControllers[a],void(r&&r.abort())}if(Po(self)||e.mustQueue)return this.tasks[a]=e,this.taskQueue.push(a),void this.invoker.trigger();this.processTask(a,e)}}process(){if(this.taskQueue.length===0)return;const s=this.taskQueue.shift(),e=this.tasks[s];delete this.tasks[s],this.taskQueue.length>0&&this.invoker.trigger(),e&&this.processTask(s,e)}processTask(s,e){return c(this,void 0,void 0,(function*(){if(e.type==="<response>"){const d=this.resolveRejects[s];return delete this.resolveRejects[s],d?void(e.error?d.reject(ld(e.error)):d.resolve(ld(e.data))):void 0}if(!this.messageHandlers[e.type])return void this.completeTask(s,new Error(`Could not find a registered handler for ${e.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const a=ld(e.data),r=new AbortController;this.abortControllers[s]=r;try{const d=yield this.messageHandlers[e.type](e.sourceMapId,a,r);this.completeTask(s,null,d)}catch(d){this.completeTask(s,d)}}))}completeTask(s,e,a){const r=[];delete this.abortControllers[s];const d={id:s,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:e?lr(e):null,data:lr(a,r)};this.target.postMessage(d,{transfer:r})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},E.M=ze,E.N=function(){var s=new mt(16);return mt!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0),s[0]=1,s[5]=1,s[10]=1,s[15]=1,s},E.O=function(s,e,a){var r,d,u,m,v,k,T,P,z,R,H,V,W=a[0],X=a[1],ee=a[2];return e===s?(s[12]=e[0]*W+e[4]*X+e[8]*ee+e[12],s[13]=e[1]*W+e[5]*X+e[9]*ee+e[13],s[14]=e[2]*W+e[6]*X+e[10]*ee+e[14],s[15]=e[3]*W+e[7]*X+e[11]*ee+e[15]):(d=e[1],u=e[2],m=e[3],v=e[4],k=e[5],T=e[6],P=e[7],z=e[8],R=e[9],H=e[10],V=e[11],s[0]=r=e[0],s[1]=d,s[2]=u,s[3]=m,s[4]=v,s[5]=k,s[6]=T,s[7]=P,s[8]=z,s[9]=R,s[10]=H,s[11]=V,s[12]=r*W+v*X+z*ee+e[12],s[13]=d*W+k*X+R*ee+e[13],s[14]=u*W+T*X+H*ee+e[14],s[15]=m*W+P*X+V*ee+e[15]),s},E.P=re,E.Q=function(s,e,a){var r=a[0],d=a[1],u=a[2];return s[0]=e[0]*r,s[1]=e[1]*r,s[2]=e[2]*r,s[3]=e[3]*r,s[4]=e[4]*d,s[5]=e[5]*d,s[6]=e[6]*d,s[7]=e[7]*d,s[8]=e[8]*u,s[9]=e[9]*u,s[10]=e[10]*u,s[11]=e[11]*u,s[12]=e[12],s[13]=e[13],s[14]=e[14],s[15]=e[15],s},E.R=Xo,E.S=function(s,e,a){var r=e[0],d=e[1],u=e[2],m=e[3],v=e[4],k=e[5],T=e[6],P=e[7],z=e[8],R=e[9],H=e[10],V=e[11],W=e[12],X=e[13],ee=e[14],ue=e[15],ae=a[0],oe=a[1],ge=a[2],ve=a[3];return s[0]=ae*r+oe*v+ge*z+ve*W,s[1]=ae*d+oe*k+ge*R+ve*X,s[2]=ae*u+oe*T+ge*H+ve*ee,s[3]=ae*m+oe*P+ge*V+ve*ue,s[4]=(ae=a[4])*r+(oe=a[5])*v+(ge=a[6])*z+(ve=a[7])*W,s[5]=ae*d+oe*k+ge*R+ve*X,s[6]=ae*u+oe*T+ge*H+ve*ee,s[7]=ae*m+oe*P+ge*V+ve*ue,s[8]=(ae=a[8])*r+(oe=a[9])*v+(ge=a[10])*z+(ve=a[11])*W,s[9]=ae*d+oe*k+ge*R+ve*X,s[10]=ae*u+oe*T+ge*H+ve*ee,s[11]=ae*m+oe*P+ge*V+ve*ue,s[12]=(ae=a[12])*r+(oe=a[13])*v+(ge=a[14])*z+(ve=a[15])*W,s[13]=ae*d+oe*k+ge*R+ve*X,s[14]=ae*u+oe*T+ge*H+ve*ee,s[15]=ae*m+oe*P+ge*V+ve*ue,s},E.T=_p,E.U=function(s,e){const a={};for(let r=0;r<e.length;r++){const d=e[r];d in s&&(a[d]=s[d])}return a},E.V=sl,E.W=da,E.X=sm,E.Y=Og,E.Z=Oe,E._=c,E.a=ne,E.a$=fs,E.a0=Vt,E.a1=Xi,E.a2=Wi,E.a3=_g,E.a4=Rc,E.a5=jt,E.a6=function(s,e,a){if(!s)return e||{};if(!e)return s||{};const r=Nc(s),d=Nc(e);(function(m,v){v.removeAll&&(m.add.clear(),m.update.clear(),m.remove.clear(),v.remove.clear());for(const k of v.remove)m.add.delete(k),m.update.delete(k);for(const[k,T]of v.update){const P=m.update.get(k);P&&(v.update.set(k,om(P,T)),m.update.delete(k))}})(r,d);const u={};if((r.removeAll||d.removeAll)&&(u.removeAll=!0),u.remove=new Set([...r.remove,...d.remove]),u.add=new Map([...r.add,...d.add]),u.update=new Map([...r.update,...d.update]),u.remove.size&&u.add.size)for(const m of u.add.keys())u.remove.delete(m);return(function(m){const v={};return m.removeAll&&(v.removeAll=m.removeAll),m.remove&&(v.remove=Array.from(m.remove)),m.add&&(v.add=Array.from(m.add.values())),m.update&&(v.update=Array.from(m.update.values())),v})(u)},E.a7=function(s,e){const a=new Map;if(s==null||s.type==null)return a;if(s.type==="Feature"){const r=Hc(s,e);return r==null?void 0:(a.set(r,s),a)}if(s.type==="FeatureCollection"){const r=new Set;for(const d of s.features){const u=Hc(d,e);if(u==null||r.has(u))return;r.add(u),a.set(u,d)}return a}},E.a8=function(s,e,a){var r,d;const u=[];if(e.removeAll)s.clear();else if(e.remove)for(const m of e.remove){const v=s.get(m);v&&(u.push(v.geometry),s.delete(m))}if(e.add)for(const m of e.add){const v=Hc(m,a);if(v==null)continue;const k=s.get(v);k&&u.push(k.geometry),u.push(m.geometry),s.set(v,m)}if(e.update)for(const m of e.update){const v=s.get(m.id);if(!v)continue;const k=!!m.newGeometry,T=m.removeAllProperties||((r=m.removeProperties)===null||r===void 0?void 0:r.length)>0||((d=m.addOrUpdateProperties)===null||d===void 0?void 0:d.length)>0;if(!k&&!T)continue;u.push(v.geometry);const P=Object.assign({},v);if(s.set(m.id,P),k&&(u.push(m.newGeometry),P.geometry=m.newGeometry),T){if(P.properties=m.removeAllProperties?{}:Object.assign({},P.properties||{}),m.removeProperties)for(const z of m.removeProperties)delete P.properties[z];if(m.addOrUpdateProperties)for(const{key:z,value:R}of m.addOrUpdateProperties)P.properties[z]=R}}return u},E.a9=hs,E.aA=function(s,{uSize:e,uSizeT:a},{lowerSize:r,upperSize:d}){return s.kind==="source"?r/yr:s.kind==="composite"?bs.number(r/yr,d/yr,a):e},E.aB=function(s,e){var a=e[0],r=e[1],d=e[2],u=e[3],m=e[4],v=e[5],k=e[6],T=e[7],P=e[8],z=e[9],R=e[10],H=e[11],V=e[12],W=e[13],X=e[14],ee=e[15],ue=a*v-r*m,ae=a*k-d*m,oe=a*T-u*m,ge=r*k-d*v,ve=r*T-u*v,Fe=d*T-u*k,ot=P*W-z*V,et=P*X-R*V,lt=P*ee-H*V,At=z*X-R*W,yt=z*ee-H*W,ut=R*ee-H*X,Ke=ue*ut-ae*yt+oe*At+ge*lt-ve*et+Fe*ot;return Ke?(s[0]=(v*ut-k*yt+T*At)*(Ke=1/Ke),s[1]=(d*yt-r*ut-u*At)*Ke,s[2]=(W*Fe-X*ve+ee*ge)*Ke,s[3]=(R*ve-z*Fe-H*ge)*Ke,s[4]=(k*lt-m*ut-T*et)*Ke,s[5]=(a*ut-d*lt+u*et)*Ke,s[6]=(X*oe-V*Fe-ee*ae)*Ke,s[7]=(P*Fe-R*oe+H*ae)*Ke,s[8]=(m*yt-v*lt+T*ot)*Ke,s[9]=(r*lt-a*yt-u*ot)*Ke,s[10]=(V*ve-W*oe+ee*ue)*Ke,s[11]=(z*oe-P*ve-H*ue)*Ke,s[12]=(v*et-m*At-k*ot)*Ke,s[13]=(a*At-r*et+d*ot)*Ke,s[14]=(W*ae-V*ge-X*ue)*Ke,s[15]=(P*ge-z*ae+R*ue)*Ke,s):null},E.aC=It,E.aD=function(s){var e=s[0],a=s[1];return Math.sqrt(e*e+a*a)},E.aE=function(s){return s[0]=0,s[1]=0,s},E.aF=function(s,e,a){return s[0]=e[0]*a,s[1]=e[1]*a,s},E.aG=Qu,E.aH=os,E.aI=function(s,e,a,r){const d=e.y-s.y,u=e.x-s.x,m=r.y-a.y,v=r.x-a.x,k=m*u-v*d;if(k===0)return null;const T=(v*(s.y-a.y)-m*(s.x-a.x))/k;return new re(s.x+T*u,s.y+T*d)},E.aJ=n,E.aK=ef,E.aL=function(s){let e=1/0,a=1/0,r=-1/0,d=-1/0;for(const u of s)e=Math.min(e,u.x),a=Math.min(a,u.y),r=Math.max(r,u.x),d=Math.max(d,u.y);return[e,a,r,d]},E.aM=Bn,E.aN=Dt,E.aO=function(s,e,a,r,d=!1){if(!a[0]&&!a[1])return[0,0];const u=d?r==="map"?-s.bearingInRadians:0:r==="viewport"?s.bearingInRadians:0;if(u){const m=Math.sin(u),v=Math.cos(u);a=[a[0]*v-a[1]*m,a[0]*m+a[1]*v]}return[d?a[0]:Dt(e,a[0],s.zoom),d?a[1]:Dt(e,a[1],s.zoom)]},E.aQ=Fp,E.aR=Tm,E.aS=Xu,E.aT=_y,E.aU=Hs,E.aV=Ac,E.aW=ie,E.aX=Tt,E.aY=Ve,E.aZ=ro,E.a_=nm,E.aa=Od,E.ab=25,E.ac=io,E.ad=s=>{const e=window.document.createElement("video");return e.muted=!0,new Promise((a=>{e.onloadstart=()=>{a(e)};for(const r of s){const d=window.document.createElement("source");st(r)||(e.crossOrigin="Anonymous"),d.src=r,e.appendChild(d)}}))},E.ae=We,E.af=function(){return is++},E.ag=p,E.ah=Wf,E.ai=ep,E.aj=Mt,E.ak=mr,E.al=Yp,E.am=function(s){const e={};if(s.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((a,r,d,u)=>{const m=d||u;return e[r]=!m||m.toLowerCase(),""})),e["max-age"]){const a=parseInt(e["max-age"],10);isNaN(a)?delete e["max-age"]:e["max-age"]=a}return e},E.an=Ht,E.ao=85.051129,E.ap=wn,E.aq=function(s){return Math.pow(2,s)},E.ar=$t,E.as=kg,E.at=function(s){return Math.log(s)/Math.LN2},E.au=function(s){var e=s[0],a=s[1];return e*e+a*a},E.av=function(s){if(!s.length)return new Set;const e=Math.max(...s.map((k=>k.canonical.z)));let a=1/0,r=-1/0,d=1/0,u=-1/0;const m=[];for(const k of s){const{x:T,y:P,z}=k.canonical,R=Math.pow(2,e-z),H=T*R,V=P*R;m.push({id:k,x:H,y:V}),H<a&&(a=H),H>r&&(r=H),V<d&&(d=V),V>u&&(u=V)}const v=new Set;for(const k of m)k.x!==a&&k.x!==r&&k.y!==d&&k.y!==u||v.add(k.id);return v},E.aw=function(s,e){const a=Math.abs(2*s.wrap)-+(s.wrap<0),r=Math.abs(2*e.wrap)-+(e.wrap<0);return s.overscaledZ-e.overscaledZ||r-a||e.canonical.y-s.canonical.y||e.canonical.x-s.canonical.x},E.ax=class{constructor(s,e){this.max=s,this.onRemove=e,this.reset()}reset(){for(const s in this.data)for(const e of this.data[s])e.timeout&&clearTimeout(e.timeout),this.onRemove(e.value);return this.data={},this.order=[],this}add(s,e,a){const r=s.wrapped().key;this.data[r]===void 0&&(this.data[r]=[]);const d={value:e,timeout:void 0};if(a!==void 0&&(d.timeout=setTimeout((()=>{this.remove(s,d)}),a)),this.data[r].push(d),this.order.push(r),this.order.length>this.max){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}has(s){return s.wrapped().key in this.data}getAndRemove(s){return this.has(s)?this._getAndRemoveByKey(s.wrapped().key):null}_getAndRemoveByKey(s){const e=this.data[s].shift();return e.timeout&&clearTimeout(e.timeout),this.data[s].length===0&&delete this.data[s],this.order.splice(this.order.indexOf(s),1),e.value}getByKey(s){const e=this.data[s];return e?e[0].value:null}get(s){return this.has(s)?this.data[s.wrapped().key][0].value:null}remove(s,e){if(!this.has(s))return this;const a=s.wrapped().key,r=e===void 0?0:this.data[a].indexOf(e),d=this.data[a][r];return this.data[a].splice(r,1),d.timeout&&clearTimeout(d.timeout),this.data[a].length===0&&delete this.data[a],this.onRemove(d.value),this.order.splice(this.order.indexOf(a),1),this}setMaxSize(s){for(this.max=s;this.order.length>this.max;){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}filter(s){const e=[];for(const a in this.data)for(const r of this.data[a])s(r.value)||e.push(r);for(const a of e)this.remove(a.value.tileID,a)}},E.ay=function(s,e){let a=0,r=0;if(s.kind==="constant")r=s.layoutSize;else if(s.kind!=="source"){const{interpolationType:d,minZoom:u,maxZoom:m}=s,v=d?Ht(js.interpolationFactor(d,e,u,m),0,1):0;s.kind==="camera"?r=bs.number(s.minSize,s.maxSize,v):a=v}return{uSizeT:a,uSize:r}},E.b=Ro,E.b$=ur,E.b0=ba,E.b1=function(s){var e=new mt(3);return e[0]=s[0],e[1]=s[1],e[2]=s[2],e},E.b2=function(s,e,a){return s[0]=e[0]-a[0],s[1]=e[1]-a[1],s[2]=e[2]-a[2],s},E.b3=function(s,e){var a=e[0],r=e[1],d=e[2],u=a*a+r*r+d*d;return u>0&&(u=1/Math.sqrt(u)),s[0]=e[0]*u,s[1]=e[1]*u,s[2]=e[2]*u,s},E.b4=ma,E.b5=function(s,e){return s[0]*e[0]+s[1]*e[1]+s[2]*e[2]},E.b6=function(s,e,a){return s[0]=e[0]*a[0],s[1]=e[1]*a[1],s[2]=e[2]*a[2],s[3]=e[3]*a[3],s},E.b7=zt,E.b8=function(s,e,a){const r=e[0]*a[0]+e[1]*a[1]+e[2]*a[2];return r===0?null:(-(s[0]*a[0]+s[1]*a[1]+s[2]*a[2])-a[3])/r},E.b9=Ca,E.bA=function(s,e,a,r){return s[0]=e[0]+a[0]*r,s[1]=e[1]+a[1]*r,s[2]=e[2]+a[2]*r,s},E.bB=Je,E.bC=function(s,e,a){var r=a[0],d=a[1],u=a[2],m=a[3],v=e[0],k=e[1],T=e[2],P=d*T-u*k,z=u*v-r*T,R=r*k-d*v;return s[0]=v+m*(P+=P)+d*(R+=R)-u*(z+=z),s[1]=k+m*z+u*P-r*R,s[2]=T+m*R+r*z-d*P,s},E.bD=function(s,e,a){const r=(function(k){var T=k[3],P=k[4],z=k[5],R=k[6],H=k[7],V=k[8];return k[0]*(V*P-z*H)+k[1]*(-V*T+z*R)+k[2]*(H*T-P*R)})([s[0],s[1],s[2],e[0],e[1],e[2],a[0],a[1],a[2]]);if(r===0)return null;const d=ma([],[e[0],e[1],e[2]],[a[0],a[1],a[2]]),u=ma([],[a[0],a[1],a[2]],[s[0],s[1],s[2]]),m=ma([],[s[0],s[1],s[2]],[e[0],e[1],e[2]]),v=fs([],d,-s[3]);return ba(v,v,fs([],u,-e[3])),ba(v,v,fs([],m,-a[3])),fs(v,v,1/r),v},E.bE=Zp,E.bF=function(){return new Float64Array(4)},E.bG=function(s,e,a,r){var d=[],u=[];return d[0]=e[0]-a[0],d[1]=e[1]-a[1],d[2]=e[2]-a[2],u[0]=d[0]*Math.cos(r)-d[1]*Math.sin(r),u[1]=d[0]*Math.sin(r)+d[1]*Math.cos(r),u[2]=d[2],s[0]=u[0]+a[0],s[1]=u[1]+a[1],s[2]=u[2]+a[2],s},E.bH=function(s,e,a,r){var d=[],u=[];return d[0]=e[0]-a[0],d[1]=e[1]-a[1],d[2]=e[2]-a[2],u[0]=d[0],u[1]=d[1]*Math.cos(r)-d[2]*Math.sin(r),u[2]=d[1]*Math.sin(r)+d[2]*Math.cos(r),s[0]=u[0]+a[0],s[1]=u[1]+a[1],s[2]=u[2]+a[2],s},E.bI=function(s,e,a,r){var d=[],u=[];return d[0]=e[0]-a[0],d[1]=e[1]-a[1],d[2]=e[2]-a[2],u[0]=d[2]*Math.sin(r)+d[0]*Math.cos(r),u[1]=d[1],u[2]=d[2]*Math.cos(r)-d[0]*Math.sin(r),s[0]=u[0]+a[0],s[1]=u[1]+a[1],s[2]=u[2]+a[2],s},E.bJ=function(s,e,a){var r=Math.sin(a),d=Math.cos(a),u=e[0],m=e[1],v=e[2],k=e[3],T=e[8],P=e[9],z=e[10],R=e[11];return e!==s&&(s[4]=e[4],s[5]=e[5],s[6]=e[6],s[7]=e[7],s[12]=e[12],s[13]=e[13],s[14]=e[14],s[15]=e[15]),s[0]=u*d-T*r,s[1]=m*d-P*r,s[2]=v*d-z*r,s[3]=k*d-R*r,s[8]=u*r+T*d,s[9]=m*r+P*d,s[10]=v*r+z*d,s[11]=k*r+R*d,s},E.bK=function(s,e){const a=_e(s,360),r=_e(e,360),d=r-a,u=r>a?d-360:d+360;return Math.abs(d)<Math.abs(u)?d:u},E.bL=function(s){return s[0]=0,s[1]=0,s[2]=0,s},E.bM=function(s,e,a,r){const d=Math.sqrt(s*s+e*e),u=Math.sqrt(a*a+r*r);s/=d,e/=d,a/=u,r/=u;const m=Math.acos(s*a+e*r);return-e*a+s*r>0?m:-m},E.bN=function(s,e){const a=_e(s,2*Math.PI),r=_e(e,2*Math.PI);return Math.min(Math.abs(a-r),Math.abs(a-r+2*Math.PI),Math.abs(a-r-2*Math.PI))},E.bO=function(){const s={},e=Ne.$version;for(const a in Ne.$root){const r=Ne.$root[a];if(r.required){let d=null;d=a==="version"?e:r.type==="array"?[]:{},d!=null&&(s[a]=d)}}return s},E.bP=Ue,E.bQ=Af,E.bR=function s(e,a){if(Array.isArray(e)){if(!Array.isArray(a)||e.length!==a.length)return!1;for(let r=0;r<e.length;r++)if(!s(e[r],a[r]))return!1;return!0}if(typeof e=="object"&&e!==null&&a!==null){if(typeof a!="object"||Object.keys(e).length!==Object.keys(a).length)return!1;for(const r in e)if(!s(e[r],a[r]))return!1;return!0}return e===a},E.bS=function(s){s=s.slice();const e=Object.create(null);for(let a=0;a<s.length;a++)e[s[a].id]=s[a];for(let a=0;a<s.length;a++)"ref"in s[a]&&(s[a]=Ws(s[a],e[s[a].ref]));return s},E.bT=function(s,e){if(s.type==="custom")return new tm(s,e);switch(s.type){case"background":return new Ua(s,e);case"circle":return new vp(s,e);case"color-relief":return new Ym(s,e);case"fill":return new eg(s,e);case"fill-extrusion":return new Fu(s,e);case"heatmap":return new Zm(s,e);case"hillshade":return new Js(s,e);case"line":return new Uu(s,e);case"raster":return new kh(s,e);case"symbol":return new vd(s,e)}},E.bU=s=>s.type==="raster",E.bV=Tn,E.bW=function(s,e){if(!s)return[{command:"setStyle",args:[e]}];let a=[];try{if(!sa(s.version,e.version))return[{command:"setStyle",args:[e]}];sa(s.center,e.center)||a.push({command:"setCenter",args:[e.center]}),sa(s.state,e.state)||a.push({command:"setGlobalState",args:[e.state]}),sa(s.centerAltitude,e.centerAltitude)||a.push({command:"setCenterAltitude",args:[e.centerAltitude]}),sa(s.zoom,e.zoom)||a.push({command:"setZoom",args:[e.zoom]}),sa(s.bearing,e.bearing)||a.push({command:"setBearing",args:[e.bearing]}),sa(s.pitch,e.pitch)||a.push({command:"setPitch",args:[e.pitch]}),sa(s.roll,e.roll)||a.push({command:"setRoll",args:[e.roll]}),sa(s.sprite,e.sprite)||a.push({command:"setSprite",args:[e.sprite]}),sa(s.glyphs,e.glyphs)||a.push({command:"setGlyphs",args:[e.glyphs]}),sa(s.transition,e.transition)||a.push({command:"setTransition",args:[e.transition]}),sa(s.light,e.light)||a.push({command:"setLight",args:[e.light]}),sa(s.terrain,e.terrain)||a.push({command:"setTerrain",args:[e.terrain]}),sa(s.sky,e.sky)||a.push({command:"setSky",args:[e.sky]}),sa(s.projection,e.projection)||a.push({command:"setProjection",args:[e.projection]});const r={},d=[];(function(m,v,k,T){let P;for(P in v=v||{},m=m||{})Object.prototype.hasOwnProperty.call(m,P)&&(Object.prototype.hasOwnProperty.call(v,P)||qa(P,k,T));for(P in v)Object.prototype.hasOwnProperty.call(v,P)&&(Object.prototype.hasOwnProperty.call(m,P)?sa(m[P],v[P])||(m[P].type==="geojson"&&v[P].type==="geojson"&&es(m,v,P)?Xa(k,{command:"setGeoJSONSourceData",args:[P,v[P].data]}):Ls(P,v,k,T)):dn(P,v,k))})(s.sources,e.sources,d,r);const u=[];s.layers&&s.layers.forEach((m=>{"source"in m&&r[m.source]?a.push({command:"removeLayer",args:[m.id]}):u.push(m)})),a=a.concat(d),(function(m,v,k){v=v||[];const T=(m=m||[]).map(Bh),P=v.map(Bh),z=m.reduce(Rn,{}),R=v.reduce(Rn,{}),H=T.slice(),V=Object.create(null);let W,X,ee,ue,ae;for(let oe=0,ge=0;oe<T.length;oe++)W=T[oe],Object.prototype.hasOwnProperty.call(R,W)?ge++:(Xa(k,{command:"removeLayer",args:[W]}),H.splice(H.indexOf(W,ge),1));for(let oe=0,ge=0;oe<P.length;oe++)W=P[P.length-1-oe],H[H.length-1-oe]!==W&&(Object.prototype.hasOwnProperty.call(z,W)?(Xa(k,{command:"removeLayer",args:[W]}),H.splice(H.lastIndexOf(W,H.length-ge),1)):ge++,ue=H[H.length-oe],Xa(k,{command:"addLayer",args:[R[W],ue]}),H.splice(H.length-oe,0,W),V[W]=!0);for(let oe=0;oe<P.length;oe++)if(W=P[oe],X=z[W],ee=R[W],!V[W]&&!sa(X,ee))if(sa(X.source,ee.source)&&sa(X["source-layer"],ee["source-layer"])&&sa(X.type,ee.type)){for(ae in Zs(X.layout,ee.layout,k,W,null,"setLayoutProperty"),Zs(X.paint,ee.paint,k,W,null,"setPaintProperty"),sa(X.filter,ee.filter)||Xa(k,{command:"setFilter",args:[W,ee.filter]}),sa(X.minzoom,ee.minzoom)&&sa(X.maxzoom,ee.maxzoom)||Xa(k,{command:"setLayerZoomRange",args:[W,ee.minzoom,ee.maxzoom]}),X)Object.prototype.hasOwnProperty.call(X,ae)&&ae!=="layout"&&ae!=="paint"&&ae!=="filter"&&ae!=="metadata"&&ae!=="minzoom"&&ae!=="maxzoom"&&(ae.indexOf("paint.")===0?Zs(X[ae],ee[ae],k,W,ae.slice(6),"setPaintProperty"):sa(X[ae],ee[ae])||Xa(k,{command:"setLayerProperty",args:[W,ae,ee[ae]]}));for(ae in ee)Object.prototype.hasOwnProperty.call(ee,ae)&&!Object.prototype.hasOwnProperty.call(X,ae)&&ae!=="layout"&&ae!=="paint"&&ae!=="filter"&&ae!=="metadata"&&ae!=="minzoom"&&ae!=="maxzoom"&&(ae.indexOf("paint.")===0?Zs(X[ae],ee[ae],k,W,ae.slice(6),"setPaintProperty"):sa(X[ae],ee[ae])||Xa(k,{command:"setLayerProperty",args:[W,ae,ee[ae]]}))}else Xa(k,{command:"removeLayer",args:[W]}),ue=H[H.lastIndexOf(W)+1],Xa(k,{command:"addLayer",args:[ee,ue]})})(u,e.layers,a)}catch(r){console.warn("Unable to compute style diff:",r),a=[{command:"setStyle",args:[e]}]}return a},E.bX=function(s){const e=[],a=s.id;return a===void 0&&e.push({message:`layers.${a}: missing required property "id"`}),s.render===void 0&&e.push({message:`layers.${a}: missing required method "render"`}),s.renderingMode&&s.renderingMode!=="2d"&&s.renderingMode!=="3d"&&e.push({message:`layers.${a}: property "renderingMode" must be either "2d" or "3d"`}),e},E.bY=xn,E.bZ=_i,E.b_=class extends Wo{constructor(s,e){super(s,e),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1i(this.location,s))}},E.ba=function(s,e,a){return s[0]=e[0]*a,s[1]=e[1]*a,s[2]=e[2]*a,s[3]=e[3]*a,s},E.bb=function(s,e){return s[0]*e[0]+s[1]*e[1]+s[2]*e[2]+s[3]},E.bc=Ig,E.bd=Xf,E.be=function(s,e,a,r,d){var u=1/Math.tan(e/2);if(s[0]=u/a,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=u,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=-1,s[12]=0,s[13]=0,s[15]=0,d!=null&&d!==1/0){var m=1/(r-d);s[10]=(d+r)*m,s[14]=2*d*r*m}else s[10]=-1,s[14]=-2*r;return s},E.bf=function(s){var e=new mt(16);return e[0]=s[0],e[1]=s[1],e[2]=s[2],e[3]=s[3],e[4]=s[4],e[5]=s[5],e[6]=s[6],e[7]=s[7],e[8]=s[8],e[9]=s[9],e[10]=s[10],e[11]=s[11],e[12]=s[12],e[13]=s[13],e[14]=s[14],e[15]=s[15],e},E.bg=function(s,e,a){var r=Math.sin(a),d=Math.cos(a),u=e[0],m=e[1],v=e[2],k=e[3],T=e[4],P=e[5],z=e[6],R=e[7];return e!==s&&(s[8]=e[8],s[9]=e[9],s[10]=e[10],s[11]=e[11],s[12]=e[12],s[13]=e[13],s[14]=e[14],s[15]=e[15]),s[0]=u*d+T*r,s[1]=m*d+P*r,s[2]=v*d+z*r,s[3]=k*d+R*r,s[4]=T*d-u*r,s[5]=P*d-m*r,s[6]=z*d-v*r,s[7]=R*d-k*r,s},E.bh=function(s,e,a){var r=Math.sin(a),d=Math.cos(a),u=e[4],m=e[5],v=e[6],k=e[7],T=e[8],P=e[9],z=e[10],R=e[11];return e!==s&&(s[0]=e[0],s[1]=e[1],s[2]=e[2],s[3]=e[3],s[12]=e[12],s[13]=e[13],s[14]=e[14],s[15]=e[15]),s[4]=u*d+T*r,s[5]=m*d+P*r,s[6]=v*d+z*r,s[7]=k*d+R*r,s[8]=T*d-u*r,s[9]=P*d-m*r,s[10]=z*d-v*r,s[11]=R*d-k*r,s},E.bi=function(){const s=new Float32Array(16);return $t(s),s},E.bj=function(){const s=new Float64Array(16);return $t(s),s},E.bk=function(){return new Float64Array(16)},E.bl=function(s,e,a){const r=new Float64Array(4);return Je(r,s,e-90,a),r},E.bm=function(s,e,a,r){var d,u,m,v,k,T=e[0],P=e[1],z=e[2],R=e[3],H=a[0],V=a[1],W=a[2],X=a[3];return(u=T*H+P*V+z*W+R*X)<0&&(u=-u,H=-H,V=-V,W=-W,X=-X),1-u>Ft?(d=Math.acos(u),m=Math.sin(d),v=Math.sin((1-r)*d)/m,k=Math.sin(r*d)/m):(v=1-r,k=r),s[0]=v*T+k*H,s[1]=v*P+k*V,s[2]=v*z+k*W,s[3]=v*R+k*X,s},E.bn=function(s){const e=new Float64Array(9);(function(u,m){var v=m[0],k=m[1],T=m[2],P=m[3],z=v+v,R=k+k,H=T+T,V=v*z,W=k*z,X=k*R,ee=T*z,ue=T*R,ae=T*H,oe=P*z,ge=P*R,ve=P*H;u[0]=1-X-ae,u[3]=W-ve,u[6]=ee+ge,u[1]=W+ve,u[4]=1-V-ae,u[7]=ue-oe,u[2]=ee-ge,u[5]=ue+oe,u[8]=1-V-X})(e,s);const a=ro(-Math.asin(Ht(e[2],-1,1)));let r,d;return Math.hypot(e[5],e[8])<.001?(r=0,d=-ro(Math.atan2(e[3],e[4]))):(r=ro(e[5]===0&&e[8]===0?0:Math.atan2(e[5],e[8])),d=ro(e[1]===0&&e[0]===0?0:Math.atan2(e[1],e[0]))),{roll:r,pitch:a+90,bearing:d}},E.bo=function(s,e){return s.roll==e.roll&&s.pitch==e.pitch&&s.bearing==e.bearing},E.bp=ra,E.bq=Pl,E.br=ji,E.bs=Ah,E.bt=oo,E.bu=tt,E.bv=Ot,E.bw=ks,E.bx=function(s,e,a,r,d){return tt(r,d,Ht((s-e)/(a-e),0,1))},E.by=_e,E.bz=function(){return new Float64Array(3)},E.c=Ie,E.c$=function(s,e,a,r,d){return c(this,void 0,void 0,(function*(){if(Vt())try{return yield Xi(s,e,a,r,d)}catch(u){}return(function(u,m,v,k,T){const P=u.width,z=u.height;Ho&&No||(Ho=new OffscreenCanvas(P,z),No=Ho.getContext("2d",{willReadFrequently:!0})),Ho.width=P,Ho.height=z,No.drawImage(u,0,0,P,z);const R=No.getImageData(m,v,k,T);return No.clearRect(0,0,P,z),R.data})(s,e,a,r,d)}))},E.c0=class extends Wo{constructor(s,e){super(s,e),this.current=Zo}set(s){if(s[12]!==this.current[12]||s[0]!==this.current[0])return this.current=s,void this.gl.uniformMatrix4fv(this.location,!1,s);for(let e=1;e<16;e++)if(s[e]!==this.current[e]){this.current=s,this.gl.uniformMatrix4fv(this.location,!1,s);break}}},E.c1=ud,E.c2=class extends Wo{constructor(s,e){super(s,e),this.current=[0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]||(this.current=s,this.gl.uniform3f(this.location,s[0],s[1],s[2]))}},E.c3=class extends Wo{constructor(s,e){super(s,e),this.current=[0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]||(this.current=s,this.gl.uniform2f(this.location,s[0],s[1]))}},E.c4=Et,E.c5=function(s,e){var a=Math.sin(e),r=Math.cos(e);return s[0]=r,s[1]=a,s[2]=0,s[3]=-a,s[4]=r,s[5]=0,s[6]=0,s[7]=0,s[8]=1,s},E.c6=function(s,e,a){var r=e[0],d=e[1],u=e[2];return s[0]=r*a[0]+d*a[3]+u*a[6],s[1]=r*a[1]+d*a[4]+u*a[7],s[2]=r*a[2]+d*a[5]+u*a[8],s},E.c7=function(s,e,a,r,d,u,m){var v=1/(e-a),k=1/(r-d),T=1/(u-m);return s[0]=-2*v,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*k,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*T,s[11]=0,s[12]=(e+a)*v,s[13]=(d+r)*k,s[14]=(m+u)*T,s[15]=1,s},E.c8=class extends Wo{constructor(s,e){super(s,e),this.current=new Array}set(s){if(s!=this.current){this.current=s;const e=new Float32Array(4*s.length);for(let a=0;a<s.length;a++)e[4*a]=s[a].r,e[4*a+1]=s[a].g,e[4*a+2]=s[a].b,e[4*a+3]=s[a].a;this.gl.uniform4fv(this.location,e)}}},E.c9=class extends Wo{constructor(s,e){super(s,e),this.current=new Array}set(s){if(s!=this.current){this.current=s;const e=new Float32Array(s);this.gl.uniform1fv(this.location,e)}}},E.cA=function(s,e){return Re[e]&&"touches"in s},E.cB=function(s){return Re[s]||K[s]},E.cC=function(s,e,a){var r=e[0],d=e[1];return s[0]=a[0]*r+a[4]*d+a[12],s[1]=a[1]*r+a[5]*d+a[13],s},E.cD=function(s,e){const{x:a,y:r}=hs.fromLngLat(e);return!(s<0||s>25||r<0||r>=1||a<0||a>=1)},E.cE=function(s,e){return s[0]=e[0],s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=e[1],s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=e[2],s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s},E.cF=class extends xl{},E.cG=u0,E.cI=Se,E.cJ=function(s,e){Ie.REGISTERED_PROTOCOLS[s]=e},E.cK=function(s){delete Ie.REGISTERED_PROTOCOLS[s]},E.cL=function(s,e){const a={};for(let d=0;d<s.length;d++){const u=e&&e[s[d].id]||or(s[d]);e&&(e[s[d].id]=u);let m=a[u];m||(m=a[u]=[]),m.push(s[d])}const r=[];for(const d in a)r.push(a[d]);return r},E.cM=Rt,E.cN=im,E.cO=xm,E.cP=Hp,E.cQ=function(s){s.bucket.createArrays(),s.bucket.tilePixelRatio=jt/(512*s.bucket.overscaling),s.bucket.compareText={},s.bucket.iconsNeedLinear=!1;const e=s.bucket.layers[0],a=e.layout,r=e._unevaluatedLayout._values,d={layoutIconSize:r["icon-size"].possiblyEvaluate(new as(s.bucket.zoom+1),s.canonical),layoutTextSize:r["text-size"].possiblyEvaluate(new as(s.bucket.zoom+1),s.canonical),textMaxSize:r["text-size"].possiblyEvaluate(new as(18))};if(s.bucket.textSizeData.kind==="composite"){const{minZoom:T,maxZoom:P}=s.bucket.textSizeData;d.compositeTextSizes=[r["text-size"].possiblyEvaluate(new as(T),s.canonical),r["text-size"].possiblyEvaluate(new as(P),s.canonical)]}if(s.bucket.iconSizeData.kind==="composite"){const{minZoom:T,maxZoom:P}=s.bucket.iconSizeData;d.compositeIconSizes=[r["icon-size"].possiblyEvaluate(new as(T),s.canonical),r["icon-size"].possiblyEvaluate(new as(P),s.canonical)]}const u=a.get("text-line-height")*Bn,m=a.get("text-rotation-alignment")!=="viewport"&&a.get("symbol-placement")!=="point",v=a.get("text-keep-upright"),k=a.get("text-size");for(const T of s.bucket.features){const P=a.get("text-font").evaluate(T,{},s.canonical).join(","),z=k.evaluate(T,{},s.canonical),R=d.layoutTextSize.evaluate(T,{},s.canonical),H=d.layoutIconSize.evaluate(T,{},s.canonical),V={horizontal:{},vertical:void 0},W=T.text;let X,ee=[0,0];if(W){const oe=W.toString(),ge=a.get("text-letter-spacing").evaluate(T,{},s.canonical)*Bn,ve=Sf(oe)?ge:0,Fe=a.get("text-anchor").evaluate(T,{},s.canonical),ot=Ul(e,T,s.canonical);if(!ot){const yt=a.get("text-radial-offset").evaluate(T,{},s.canonical);ee=yt?ns(Fe,[yt*Bn,Na]):a.get("text-offset").evaluate(T,{},s.canonical).map((ut=>ut*Bn))}let et=m?"center":a.get("text-justify").evaluate(T,{},s.canonical);const lt=a.get("symbol-placement")==="point"?a.get("text-max-width").evaluate(T,{},s.canonical)*Bn:1/0,At=()=>{s.bucket.allowVerticalPlacement&&jr(oe)&&(V.vertical=zc(W,s.glyphMap,s.glyphPositions,s.imagePositions,P,lt,u,Fe,"left",ve,ee,E.az.vertical,!0,R,z))};if(!m&&ot){const yt=new Set;if(et==="auto")for(let Ke=0;Ke<ot.values.length;Ke+=2)yt.add(Tm(ot.values[Ke]));else yt.add(et);let ut=!1;for(const Ke of yt)if(!V.horizontal[Ke])if(ut)V.horizontal[Ke]=V.horizontal[0];else{const xt=zc(W,s.glyphMap,s.glyphPositions,s.imagePositions,P,lt,u,"center",Ke,ve,ee,E.az.horizontal,!1,R,z);xt&&(V.horizontal[Ke]=xt,ut=xt.positionedLines.length===1)}At()}else{et==="auto"&&(et=Tm(Fe));const yt=zc(W,s.glyphMap,s.glyphPositions,s.imagePositions,P,lt,u,Fe,et,ve,ee,E.az.horizontal,!1,R,z);yt&&(V.horizontal[et]=yt),At(),jr(oe)&&m&&v&&(V.vertical=zc(W,s.glyphMap,s.glyphPositions,s.imagePositions,P,lt,u,Fe,et,ve,ee,E.az.vertical,!1,R,z))}}let ue=!1;if(T.icon&&T.icon.name){const oe=s.imageMap[T.icon.name];oe&&(X=$u(s.imagePositions[T.icon.name],a.get("icon-offset").evaluate(T,{},s.canonical),a.get("icon-anchor").evaluate(T,{},s.canonical)),ue=!!oe.sdf,s.bucket.sdfIcons===void 0?s.bucket.sdfIcons=ue:s.bucket.sdfIcons!==ue&&As("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(oe.pixelRatio!==s.bucket.pixelRatio||a.get("icon-rotate").constantOr(1)!==0)&&(s.bucket.iconsNeedLinear=!0))}const ae=D1(V.horizontal)||V.vertical;s.bucket.iconsInText=!!ae&&ae.iconsInText,(ae||X)&&c0(s.bucket,T,V,X,s.imageMap,d,R,H,ee,ue,s.canonical,s.subdivisionGranularity)}s.showCollisionBoxes&&s.bucket.generateCollisionDebugBuffers()},E.cR=af,E.cS=gd,E.cT=Nf,E.cU=function(s){const e=new Dp;return(function(a,r){for(const d in a.layers)r.writeMessage(3,ru,a.layers[d])})(s,e),e.finish()},E.cV=function(s,e,a,r,d,u){let m=i(s,e,a,d,0);return m=i(m,e,r,u,1),m},E.cW=class{constructor(s){this.maxEntries=s,this.map=new Map}get(s){const e=this.map.get(s);return e!==void 0&&(this.map.delete(s),this.map.set(s,e)),e}set(s,e){if(this.map.has(s))this.map.delete(s);else if(this.map.size>=this.maxEntries){const a=this.map.keys().next().value;this.map.delete(a)}this.map.set(s,e)}clear(){this.map.clear()}},E.cX=ja,E.cY=Dp,E.cZ=Jc,E.c_=class{constructor(s){this._marks={start:[s.url,"start"].join("#"),end:[s.url,"end"].join("#"),measure:s.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let s=performance.getEntriesByName(this._marks.measure);return s.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),s=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),s}},E.ca=class extends Ih{},E.cb=og,E.cc=class extends Ns{},E.cd=wc,E.ce=function(s){return s<=1?1:Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))},E.cf=tl,E.cg=function(s,e,a){var r=e[0],d=e[1],u=e[2],m=a[3]*r+a[7]*d+a[11]*u+a[15];return s[0]=(a[0]*r+a[4]*d+a[8]*u+a[12])/(m=m||1),s[1]=(a[1]*r+a[5]*d+a[9]*u+a[13])/m,s[2]=(a[2]*r+a[6]*d+a[10]*u+a[14])/m,s},E.ch=class extends Tl{},E.ci=class extends t{},E.cj=function(s,e){return s[0]===e[0]&&s[1]===e[1]&&s[2]===e[2]&&s[3]===e[3]&&s[4]===e[4]&&s[5]===e[5]&&s[6]===e[6]&&s[7]===e[7]&&s[8]===e[8]&&s[9]===e[9]&&s[10]===e[10]&&s[11]===e[11]&&s[12]===e[12]&&s[13]===e[13]&&s[14]===e[14]&&s[15]===e[15]},E.ck=function(s,e){var a=s[0],r=s[1],d=s[2],u=s[3],m=s[4],v=s[5],k=s[6],T=s[7],P=s[8],z=s[9],R=s[10],H=s[11],V=s[12],W=s[13],X=s[14],ee=s[15],ue=e[0],ae=e[1],oe=e[2],ge=e[3],ve=e[4],Fe=e[5],ot=e[6],et=e[7],lt=e[8],At=e[9],yt=e[10],ut=e[11],Ke=e[12],xt=e[13],Pt=e[14],Lt=e[15];return Math.abs(a-ue)<=Ft*Math.max(1,Math.abs(a),Math.abs(ue))&&Math.abs(r-ae)<=Ft*Math.max(1,Math.abs(r),Math.abs(ae))&&Math.abs(d-oe)<=Ft*Math.max(1,Math.abs(d),Math.abs(oe))&&Math.abs(u-ge)<=Ft*Math.max(1,Math.abs(u),Math.abs(ge))&&Math.abs(m-ve)<=Ft*Math.max(1,Math.abs(m),Math.abs(ve))&&Math.abs(v-Fe)<=Ft*Math.max(1,Math.abs(v),Math.abs(Fe))&&Math.abs(k-ot)<=Ft*Math.max(1,Math.abs(k),Math.abs(ot))&&Math.abs(T-et)<=Ft*Math.max(1,Math.abs(T),Math.abs(et))&&Math.abs(P-lt)<=Ft*Math.max(1,Math.abs(P),Math.abs(lt))&&Math.abs(z-At)<=Ft*Math.max(1,Math.abs(z),Math.abs(At))&&Math.abs(R-yt)<=Ft*Math.max(1,Math.abs(R),Math.abs(yt))&&Math.abs(H-ut)<=Ft*Math.max(1,Math.abs(H),Math.abs(ut))&&Math.abs(V-Ke)<=Ft*Math.max(1,Math.abs(V),Math.abs(Ke))&&Math.abs(W-xt)<=Ft*Math.max(1,Math.abs(W),Math.abs(xt))&&Math.abs(X-Pt)<=Ft*Math.max(1,Math.abs(X),Math.abs(Pt))&&Math.abs(ee-Lt)<=Ft*Math.max(1,Math.abs(ee),Math.abs(Lt))},E.cl=function(s,e){return s[0]=e[0],s[1]=e[1],s[2]=e[2],s[3]=e[3],s[4]=e[4],s[5]=e[5],s[6]=e[6],s[7]=e[7],s[8]=e[8],s[9]=e[9],s[10]=e[10],s[11]=e[11],s[12]=e[12],s[13]=e[13],s[14]=e[14],s[15]=e[15],s},E.cm=s=>s.type==="symbol",E.cn=s=>s.type==="circle",E.co=s=>s.type==="heatmap",E.cp=s=>s.type==="line",E.cq=s=>s.type==="fill",E.cr=s=>s.type==="fill-extrusion",E.cs=s=>s.type==="hillshade",E.ct=s=>s.type==="color-relief",E.cu=s=>s.type==="background",E.cv=s=>s.type==="custom",E.cw=St,E.cx=function(s,e,a){const r=gt(e.x-a.x,e.y-a.y),d=gt(s.x-a.x,s.y-a.y),u=Math.atan2(r[0]*d[1]-r[1]*d[0],(function(m,v){return m[0]*v[0]+m[1]*v[1]})(r,d));return ro(u)},E.cy=Ct,E.cz=function(s,e){return K[e]&&(s instanceof MouseEvent||s instanceof WheelEvent)},E.d=st,E.d0=Df,E.d1=fe,E.d2=class{constructor(s,e){this.layers={[ep]:this},this.name=ep,this.version=e?e.version:1,this.extent=e?e.extent:4096,this.length=s.length,this.features=s}feature(s){return new Rg(this.features[s],this.extent)}},E.d3=h,E.d4=Bi,E.e=Ma,E.f=s=>c(void 0,void 0,void 0,(function*(){if(s.byteLength===0)return createImageBitmap(new ImageData(1,1));const e=new Blob([new Uint8Array(s)],{type:"image/png"});try{return createImageBitmap(e)}catch(a){throw new Error(`Could not load image because of ${a.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),E.g=je,E.h=s=>new Promise(((e,a)=>{const r=new Image;r.onload=()=>{e(r),URL.revokeObjectURL(r.src),r.onload=null,window.requestAnimationFrame((()=>{r.src=Zi}))},r.onerror=()=>a(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const d=new Blob([new Uint8Array(s)],{type:"image/png"});r.src=s.byteLength?URL.createObjectURL(d):Zi})),E.i=Po,E.j=(s,e)=>nt(Ma(s,{type:"json"}),e),E.k=Ga,E.l=Jt,E.m=nt,E.n=(s,e)=>nt(Ma(s,{type:"arrayBuffer"}),e),E.o=function(s){return new Dp(s).readFields(ug,[])},E.p=Zu,E.q=function(s){return/[\u02EA\u02EB\u1100-\u11FF\u2E80-\u2FDF\u3000-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(s))},E.r=bc,E.s=Jr,E.t=sn,E.u=Ne,E.v=Gd,E.w=As,E.x=Ef,E.y=rr,E.z=Oh})),J("worker",["./shared"],(function(E){class c{constructor(K,$){this.keyCache={},K&&this.replace(K,$)}replace(K,$){this._layerConfigs={},this._layers={},this.update(K,[],$)}update(K,$,ne){for(const Ie of K){this._layerConfigs[Ie.id]=Ie;const je=this._layers[Ie.id]=E.bT(Ie,ne);je._featureFilter=E.aj(je.filter,ne),this.keyCache[Ie.id]&&delete this.keyCache[Ie.id]}for(const Ie of $)delete this.keyCache[Ie],delete this._layerConfigs[Ie],delete this._layers[Ie];this.familiesBySource={};const Oe=E.cL(Object.values(this._layerConfigs),this.keyCache);for(const Ie of Oe){const je=Ie.map((Bt=>this._layers[Bt.id])),ze=je[0];if(ze.isHidden())continue;const Se=ze.source||"";let Ue=this.familiesBySource[Se];Ue||(Ue=this.familiesBySource[Se]={});const nt=ze.sourceLayer||E.ai;let st=Ue[nt];st||(st=Ue[nt]=[]),st.push(je)}}}class re{constructor(K){const $={},ne=[];for(const ze in K){const Se=K[ze],Ue=$[ze]={};for(const nt in Se){const st=Se[+nt];if(!st||st.bitmap.width===0||st.bitmap.height===0)continue;const Bt={x:0,y:0,w:st.bitmap.width+2,h:st.bitmap.height+2};ne.push(Bt),Ue[nt]={rect:Bt,metrics:st.metrics}}}const{w:Oe,h:Ie}=E.p(ne),je=new E.r({width:Oe||1,height:Ie||1});for(const ze in K){const Se=K[ze];for(const Ue in Se){const nt=Se[+Ue];if(!nt||nt.bitmap.width===0||nt.bitmap.height===0)continue;const st=$[ze][Ue].rect;E.r.copy(nt.bitmap,je,{x:0,y:0},{x:st.x+1,y:st.y+1},nt.bitmap)}}this.image=je,this.positions=$}}E.cM("GlyphAtlas",re);class fe{constructor(K){this.tileID=new E.a2(K.tileID.overscaledZ,K.tileID.wrap,K.tileID.canonical.z,K.tileID.canonical.x,K.tileID.canonical.y),this.uid=K.uid,this.zoom=K.zoom,this.pixelRatio=K.pixelRatio,this.tileSize=K.tileSize,this.source=K.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=K.showCollisionBoxes,this.collectResourceTiming=!!K.collectResourceTiming,this.returnDependencies=!!K.returnDependencies,this.promoteId=K.promoteId,this.inFlightDependencies=[]}parse(K,$,ne,Oe,Ie){return E._(this,void 0,void 0,(function*(){this.status="parsing",this.data=K,this.collisionBoxArray=new E.ag;const je=new E.cN(Object.keys(K.layers).sort()),ze=new E.cO(this.tileID,this.promoteId);ze.bucketLayerIDs=[];const Se={},Ue={featureIndex:ze,iconDependencies:{},patternDependencies:{},glyphDependencies:{},dashDependencies:{},availableImages:ne,subdivisionGranularity:Ie},nt=$.familiesBySource[this.source];for(const es in nt){const Zs=K.layers[es];if(!Zs)continue;Zs.version===1&&E.w(`Vector tile source "${this.source}" layer "${es}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Bh=je.encode(es),Rn=[];for(let We=0;We<Zs.length;We++){const An=Zs.feature(We),Sn=ze.getId(An,es);Rn.push({feature:An,id:Sn,index:We,sourceLayerIndex:Bh})}for(const We of nt[es]){const An=We[0];An.source!==this.source&&E.w(`layer.source = ${An.source} does not equal this.source = ${this.source}`),An.isHidden(this.zoom,!0)||(Le(We,this.zoom,ne),(Se[An.id]=An.createBucket({index:ze.bucketLayerIDs.length,layers:We,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Bh,sourceID:this.source})).populate(Rn,Ue,this.tileID.canonical),ze.bucketLayerIDs.push(We.map((Sn=>Sn.id))))}}const st=E.bY(Ue.glyphDependencies,(es=>Object.keys(es).map(Number)));this.inFlightDependencies.forEach((es=>es==null?void 0:es.abort())),this.inFlightDependencies=[];let Bt=Promise.resolve({});if(Object.keys(st).length){const es=new AbortController;this.inFlightDependencies.push(es),Bt=Oe.sendAsync({type:"GG",data:{stacks:st,source:this.source,tileID:this.tileID,type:"glyphs"}},es)}const Ut=Object.keys(Ue.iconDependencies);let Jt=Promise.resolve({});if(Ut.length){const es=new AbortController;this.inFlightDependencies.push(es),Jt=Oe.sendAsync({type:"GI",data:{icons:Ut,source:this.source,tileID:this.tileID,type:"icons"}},es)}const Ga=Object.keys(Ue.patternDependencies);let Ea=Promise.resolve({});if(Ga.length){const es=new AbortController;this.inFlightDependencies.push(es),Ea=Oe.sendAsync({type:"GI",data:{icons:Ga,source:this.source,tileID:this.tileID,type:"patterns"}},es)}const Ne=Ue.dashDependencies;let Za=Promise.resolve({});if(Object.keys(Ne).length){const es=new AbortController;this.inFlightDependencies.push(es),Za=Oe.sendAsync({type:"GDA",data:{dashes:Ne}},es)}const[Ws,sa,Xa,dn]=yield Promise.all([Bt,Jt,Ea,Za]),qa=new re(Ws),Ls=new E.cP(sa,Xa);for(const es in Se){const Zs=Se[es];Zs instanceof E.ah?(Le(Zs.layers,this.zoom,ne),E.cQ({bucket:Zs,glyphMap:Ws,glyphPositions:qa.positions,imageMap:sa,imagePositions:Ls.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:Ue.subdivisionGranularity})):Zs.hasDependencies&&(Zs instanceof E.cR||Zs instanceof E.cS||Zs instanceof E.cT)&&(Le(Zs.layers,this.zoom,ne),Zs.addFeatures(Ue,this.tileID.canonical,Ls.patternPositions,dn))}return this.status="done",{buckets:Object.values(Se).filter((es=>!es.isEmpty())),featureIndex:ze,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:qa.image,imageAtlas:Ls,dashPositions:dn,glyphMap:this.returnDependencies?Ws:null,iconMap:this.returnDependencies?sa:null,glyphPositions:this.returnDependencies?qa.positions:null}}))}}function Le(Re,K,$){const ne=new E.H(K);for(const Oe of Re)Oe.recalculate(ne,$)}class Ce{constructor(K,$,ne,Oe,Ie){this.type=K,this.properties=ne||{},this.extent=Ie,this.pointsArray=$,this.id=Oe}loadGeometry(){return this.pointsArray.map((K=>K.map(($=>new E.P($.x,$.y)))))}}class Pe{constructor(K,$,ne){this.version=2,this._myFeatures=K,this.name=$,this.length=K.length,this.extent=ne}feature(K){return this._myFeatures[K]}}class ft{constructor(){this.layers={}}addLayer(K){this.layers[K.name]=K}}function kt(Re){let K=E.cU(Re);return K.byteOffset===0&&K.byteLength===K.buffer.byteLength||(K=new Uint8Array(K)),{vectorTile:Re,rawData:K.buffer}}function it(Re,K,$){const{extent:ne}=Re,Oe=Math.pow(2,$.z-K.z),Ie=($.x-K.x*Oe)*ne,je=($.y-K.y*Oe)*ne,ze=[];for(let Se=0;Se<Re.length;Se++){const Ue=Re.feature(Se);let nt=Ue.loadGeometry();for(const Bt of nt)for(const Ut of Bt)Ut.x=Ut.x*Oe-Ie,Ut.y=Ut.y*Oe-je;const st=128;nt=E.cV(nt,Ue.type,-st,-st,ne+st,ne+st),nt.length!==0&&ze.push(new Ce(Ue.type,nt,Ue.properties,Ue.id,ne))}return new Pe(ze,Re.name,ne)}class Te{constructor(K,$,ne){this.actor=K,this.layerIndex=$,this.availableImages=ne,this.fetching={},this.loading={},this.loaded={},this.overzoomedTileResultCache=new E.cW(1e3)}loadVectorTile(K,$){return E._(this,void 0,void 0,(function*(){const ne=yield E.n(K.request,$);try{return{vectorTile:K.encoding!=="mlt"?new E.cX(new E.cY(ne.data)):new E.cZ(ne.data),rawData:ne.data,cacheControl:ne.cacheControl,expires:ne.expires}}catch(Oe){const Ie=new Uint8Array(ne.data);let je=`Unable to parse the tile at ${K.request.url}, `;throw je+=Ie[0]===31&&Ie[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Oe.message}`,new Error(je)}}))}loadTile(K){return E._(this,void 0,void 0,(function*(){const{uid:$,overzoomParameters:ne}=K;ne&&(K.request=ne.overzoomRequest);const Oe=!!(K&&K.request&&K.request.collectResourceTiming)&&new E.c_(K.request),Ie=new fe(K);this.loading[$]=Ie;const je=new AbortController;Ie.abort=je;try{const ze=yield this.loadVectorTile(K,je);if(delete this.loading[$],!ze)return null;if(ne){const Bt=this._getOverzoomTile(K,ze.vectorTile);ze.rawData=Bt.rawData,ze.vectorTile=Bt.vectorTile}const Se=ze.rawData,Ue={};ze.expires&&(Ue.expires=ze.expires),ze.cacheControl&&(Ue.cacheControl=ze.cacheControl);const nt={};if(Oe){const Bt=Oe.finish();Bt&&(nt.resourceTiming=JSON.parse(JSON.stringify(Bt)))}Ie.vectorTile=ze.vectorTile;const st=Ie.parse(ze.vectorTile,this.layerIndex,this.availableImages,this.actor,K.subdivisionGranularity);this.loaded[$]=Ie,this.fetching[$]={rawTileData:Se,cacheControl:Ue,resourceTiming:nt};try{const Bt=yield st;return E.e({rawTileData:Se.slice(0),encoding:K.encoding},Bt,Ue,nt)}finally{delete this.fetching[$]}}catch(ze){throw delete this.loading[$],Ie.status="done",this.loaded[$]=Ie,ze}}))}_getOverzoomTile(K,$){const{tileID:ne,source:Oe,overzoomParameters:Ie}=K,{maxZoomTileID:je}=Ie,ze=`${je.key}_${ne.key}`,Se=this.overzoomedTileResultCache.get(ze);if(Se)return Se;const Ue=new ft,nt=this.layerIndex.familiesBySource[Oe];for(const Bt in nt){const Ut=$.layers[Bt];if(!Ut)continue;const Jt=it(Ut,je,ne.canonical);Jt.length>0&&Ue.addLayer(Jt)}const st=kt(Ue);return this.overzoomedTileResultCache.set(ze,st),st}reloadTile(K){return E._(this,void 0,void 0,(function*(){const $=K.uid;if(!this.loaded||!this.loaded[$])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const ne=this.loaded[$];if(ne.showCollisionBoxes=K.showCollisionBoxes,ne.status==="parsing"){const Oe=yield ne.parse(ne.vectorTile,this.layerIndex,this.availableImages,this.actor,K.subdivisionGranularity);let Ie;if(this.fetching[$]){const{rawTileData:je,cacheControl:ze,resourceTiming:Se}=this.fetching[$];delete this.fetching[$],Ie=E.e({rawTileData:je.slice(0),encoding:K.encoding},Oe,ze,Se)}else Ie=Oe;return Ie}if(ne.status==="done"&&ne.vectorTile)return ne.parse(ne.vectorTile,this.layerIndex,this.availableImages,this.actor,K.subdivisionGranularity)}))}abortTile(K){return E._(this,void 0,void 0,(function*(){const $=this.loading,ne=K.uid;$&&$[ne]&&$[ne].abort&&($[ne].abort.abort(),delete $[ne])}))}removeTile(K){return E._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[K.uid]&&delete this.loaded[K.uid]}))}}class Vt{constructor(){this.loaded={}}loadTile(K){return E._(this,void 0,void 0,(function*(){const{uid:$,encoding:ne,rawImageData:Oe,redFactor:Ie,greenFactor:je,blueFactor:ze,baseShift:Se}=K,Ue=Oe.width+2,nt=Oe.height+2,st=E.b(Oe)?new E.R({width:Ue,height:nt},yield E.c$(Oe,-1,-1,Ue,nt)):Oe,Bt=new E.d0($,st,ne,Ie,je,ze,Se);return this.loaded=this.loaded||{},this.loaded[$]=Bt,Bt}))}removeTile(K){const $=this.loaded,ne=K.uid;$&&$[ne]&&delete $[ne]}}var Ft,mt,Et=(function(){if(mt)return Ft;function Re($,ne){if($.length!==0){K($[0],ne);for(var Oe=1;Oe<$.length;Oe++)K($[Oe],!ne)}}function K($,ne){for(var Oe=0,Ie=0,je=0,ze=$.length,Se=ze-1;je<ze;Se=je++){var Ue=($[je][0]-$[Se][0])*($[Se][1]+$[je][1]),nt=Oe+Ue;Ie+=Math.abs(Oe)>=Math.abs(Ue)?Oe-nt+Ue:Ue-nt+Oe,Oe=nt}Oe+Ie>=0!=!!ne&&$.reverse()}return mt=1,Ft=function $(ne,Oe){var Ie,je=ne&&ne.type;if(je==="FeatureCollection")for(Ie=0;Ie<ne.features.length;Ie++)$(ne.features[Ie],Oe);else if(je==="GeometryCollection")for(Ie=0;Ie<ne.geometries.length;Ie++)$(ne.geometries[Ie],Oe);else if(je==="Feature")$(ne.geometry,Oe);else if(je==="Polygon")Re(ne.coordinates,Oe);else if(je==="MultiPolygon")for(Ie=0;Ie<ne.coordinates.length;Ie++)Re(ne.coordinates[Ie],Oe);return ne}})(),$t=E.d1(Et);const Ia={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Re=>Re},zt=Math.fround||(ca=new Float32Array(1),Re=>(ca[0]=+Re,ca[0]));var ca;class ba{constructor(K){this.options=Object.assign(Object.create(Ia),K),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(K){const{log:$,minZoom:ne,maxZoom:Oe}=this.options;$&&console.time("total time");const Ie=`prepare ${K.length} points`;$&&console.time(Ie),this.points=K;const je=[];for(let Se=0;Se<K.length;Se++){const Ue=K[Se];if(!Ue.geometry)continue;const[nt,st]=Ue.geometry.coordinates,Bt=zt(pa(nt)),Ut=zt(Ca(st));je.push(Bt,Ut,1/0,Se,-1,1),this.options.reduce&&je.push(0)}let ze=this.trees[Oe+1]=this._createTree(je);$&&console.timeEnd(Ie);for(let Se=Oe;Se>=ne;Se--){const Ue=+Date.now();ze=this.trees[Se]=this._createTree(this._cluster(ze,Se)),$&&console.log("z%d: %d clusters in %dms",Se,ze.numItems,+Date.now()-Ue)}return $&&console.timeEnd("total time"),this}getClusters(K,$){let ne=((K[0]+180)%360+360)%360-180;const Oe=Math.max(-90,Math.min(90,K[1]));let Ie=K[2]===180?180:((K[2]+180)%360+360)%360-180;const je=Math.max(-90,Math.min(90,K[3]));if(K[2]-K[0]>=360)ne=-180,Ie=180;else if(ne>Ie){const st=this.getClusters([ne,Oe,180,je],$),Bt=this.getClusters([-180,Oe,Ie,je],$);return st.concat(Bt)}const ze=this.trees[this._limitZoom($)],Se=ze.range(pa(ne),Ca(je),pa(Ie),Ca(Oe)),Ue=ze.data,nt=[];for(const st of Se){const Bt=this.stride*st;nt.push(Ue[Bt+5]>1?fs(Ue,Bt,this.clusterProps):this.points[Ue[Bt+3]])}return nt}getChildren(K){const $=this._getOriginId(K),ne=this._getOriginZoom(K),Oe="No cluster with the specified id.",Ie=this.trees[ne];if(!Ie)throw new Error(Oe);const je=Ie.data;if($*this.stride>=je.length)throw new Error(Oe);const ze=this.options.radius/(this.options.extent*Math.pow(2,ne-1)),Se=Ie.within(je[$*this.stride],je[$*this.stride+1],ze),Ue=[];for(const nt of Se){const st=nt*this.stride;je[st+4]===K&&Ue.push(je[st+5]>1?fs(je,st,this.clusterProps):this.points[je[st+3]])}if(Ue.length===0)throw new Error(Oe);return Ue}getLeaves(K,$,ne){const Oe=[];return this._appendLeaves(Oe,K,$=$||10,ne=ne||0,0),Oe}getTile(K,$,ne){const Oe=this.trees[this._limitZoom(K)],Ie=Math.pow(2,K),{extent:je,radius:ze}=this.options,Se=ze/je,Ue=(ne-Se)/Ie,nt=(ne+1+Se)/Ie,st={features:[]};return this._addTileFeatures(Oe.range(($-Se)/Ie,Ue,($+1+Se)/Ie,nt),Oe.data,$,ne,Ie,st),$===0&&this._addTileFeatures(Oe.range(1-Se/Ie,Ue,1,nt),Oe.data,Ie,ne,Ie,st),$===Ie-1&&this._addTileFeatures(Oe.range(0,Ue,Se/Ie,nt),Oe.data,-1,ne,Ie,st),st.features.length?st:null}getClusterExpansionZoom(K){let $=this._getOriginZoom(K)-1;for(;$<=this.options.maxZoom;){const ne=this.getChildren(K);if($++,ne.length!==1)break;K=ne[0].properties.cluster_id}return $}_appendLeaves(K,$,ne,Oe,Ie){const je=this.getChildren($);for(const ze of je){const Se=ze.properties;if(Se&&Se.cluster?Ie+Se.point_count<=Oe?Ie+=Se.point_count:Ie=this._appendLeaves(K,Se.cluster_id,ne,Oe,Ie):Ie<Oe?Ie++:K.push(ze),K.length===ne)break}return Ie}_createTree(K){const $=new E.aT(K.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ne=0;ne<K.length;ne+=this.stride)$.add(K[ne],K[ne+1]);return $.finish(),$.data=K,$}_addTileFeatures(K,$,ne,Oe,Ie,je){for(const ze of K){const Se=ze*this.stride,Ue=$[Se+5]>1;let nt,st,Bt;if(Ue)nt=ma($,Se,this.clusterProps),st=$[Se],Bt=$[Se+1];else{const Ga=this.points[$[Se+3]];nt=Ga.properties;const[Ea,Ne]=Ga.geometry.coordinates;st=pa(Ea),Bt=Ca(Ne)}const Ut={type:1,geometry:[[Math.round(this.options.extent*(st*Ie-ne)),Math.round(this.options.extent*(Bt*Ie-Oe))]],tags:nt};let Jt;Jt=Ue||this.options.generateId?$[Se+3]:this.points[$[Se+3]].id,Jt!==void 0&&(Ut.id=Jt),je.features.push(Ut)}}_limitZoom(K){return Math.max(this.options.minZoom,Math.min(Math.floor(+K),this.options.maxZoom+1))}_cluster(K,$){const{radius:ne,extent:Oe,reduce:Ie,minPoints:je}=this.options,ze=ne/(Oe*Math.pow(2,$)),Se=K.data,Ue=[],nt=this.stride;for(let st=0;st<Se.length;st+=nt){if(Se[st+2]<=$)continue;Se[st+2]=$;const Bt=Se[st],Ut=Se[st+1],Jt=K.within(Se[st],Se[st+1],ze),Ga=Se[st+5];let Ea=Ga;for(const Ne of Jt){const Za=Ne*nt;Se[Za+2]>$&&(Ea+=Se[Za+5])}if(Ea>Ga&&Ea>=je){let Ne,Za=Bt*Ga,Ws=Ut*Ga,sa=-1;const Xa=(st/nt<<5)+($+1)+this.points.length;for(const dn of Jt){const qa=dn*nt;if(Se[qa+2]<=$)continue;Se[qa+2]=$;const Ls=Se[qa+5];Za+=Se[qa]*Ls,Ws+=Se[qa+1]*Ls,Se[qa+4]=Xa,Ie&&(Ne||(Ne=this._map(Se,st,!0),sa=this.clusterProps.length,this.clusterProps.push(Ne)),Ie(Ne,this._map(Se,qa)))}Se[st+4]=Xa,Ue.push(Za/Ea,Ws/Ea,1/0,Xa,-1,Ea),Ie&&Ue.push(sa)}else{for(let Ne=0;Ne<nt;Ne++)Ue.push(Se[st+Ne]);if(Ea>1)for(const Ne of Jt){const Za=Ne*nt;if(!(Se[Za+2]<=$)){Se[Za+2]=$;for(let Ws=0;Ws<nt;Ws++)Ue.push(Se[Za+Ws])}}}}return Ue}_getOriginId(K){return K-this.points.length>>5}_getOriginZoom(K){return(K-this.points.length)%32}_map(K,$,ne){if(K[$+5]>1){const je=this.clusterProps[K[$+6]];return ne?Object.assign({},je):je}const Oe=this.points[K[$+3]].properties,Ie=this.options.map(Oe);return ne&&Ie===Oe?Object.assign({},Ie):Ie}}function fs(Re,K,$){return{type:"Feature",id:Re[K+3],properties:ma(Re,K,$),geometry:{type:"Point",coordinates:[(ne=Re[K],360*(ne-.5)),os(Re[K+1])]}};var ne}function ma(Re,K,$){const ne=Re[K+5],Oe=ne>=1e4?`${Math.round(ne/1e3)}k`:ne>=1e3?Math.round(ne/100)/10+"k":ne,Ie=Re[K+6],je=Ie===-1?{}:Object.assign({},$[Ie]);return Object.assign(je,{cluster:!0,cluster_id:Re[K+3],point_count:ne,point_count_abbreviated:Oe})}function pa(Re){return Re/360+.5}function Ca(Re){const K=Math.sin(Re*Math.PI/180),$=.5-.25*Math.log((1+K)/(1-K))/Math.PI;return $<0?0:$>1?1:$}function os(Re){const K=(180-360*Re)*Math.PI/180;return 360*Math.atan(Math.exp(K))/Math.PI-90}function Ts(Re,K,$,ne){let Oe=ne;const Ie=K+($-K>>1);let je,ze=$-K;const Se=Re[K],Ue=Re[K+1],nt=Re[$],st=Re[$+1];for(let Bt=K+3;Bt<$;Bt+=3){const Ut=Je(Re[Bt],Re[Bt+1],Se,Ue,nt,st);if(Ut>Oe)je=Bt,Oe=Ut;else if(Ut===Oe){const Jt=Math.abs(Bt-Ie);Jt<ze&&(je=Bt,ze=Jt)}}Oe>ne&&(je-K>3&&Ts(Re,K,je,ne),Re[je+2]=Oe,$-je>3&&Ts(Re,je,$,ne))}function Je(Re,K,$,ne,Oe,Ie){let je=Oe-$,ze=Ie-ne;if(je!==0||ze!==0){const Se=((Re-$)*je+(K-ne)*ze)/(je*je+ze*ze);Se>1?($=Oe,ne=Ie):Se>0&&($+=je*Se,ne+=ze*Se)}return je=Re-$,ze=K-ne,je*je+ze*ze}function It(Re,K,$,ne){const Oe={id:Re==null?null:Re,type:K,geometry:$,tags:ne,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(K==="Point"||K==="MultiPoint"||K==="LineString")gt(Oe,$);else if(K==="Polygon")gt(Oe,$[0]);else if(K==="MultiLineString")for(const Ie of $)gt(Oe,Ie);else if(K==="MultiPolygon")for(const Ie of $)gt(Oe,Ie[0]);return Oe}function gt(Re,K){for(let $=0;$<K.length;$+=3)Re.minX=Math.min(Re.minX,K[$]),Re.minY=Math.min(Re.minY,K[$+1]),Re.maxX=Math.max(Re.maxX,K[$]),Re.maxY=Math.max(Re.maxY,K[$+1])}function jt(Re,K,$,ne){if(!K.geometry)return;const Oe=K.geometry.coordinates;if(Oe&&Oe.length===0)return;const Ie=K.geometry.type,je=Math.pow($.tolerance/((1<<$.maxZoom)*$.extent),2);let ze=[],Se=K.id;if($.promoteId?Se=K.properties[$.promoteId]:$.generateId&&(Se=ne||0),Ie==="Point")Dt(Oe,ze);else if(Ie==="MultiPoint")for(const Ue of Oe)Dt(Ue,ze);else if(Ie==="LineString")_e(Oe,ze,je,!1);else if(Ie==="MultiLineString"){if($.lineMetrics){for(const Ue of Oe)ze=[],_e(Ue,ze,je,!1),Re.push(It(Se,"LineString",ze,K.properties));return}tt(Oe,ze,je,!1)}else if(Ie==="Polygon")tt(Oe,ze,je,!0);else{if(Ie!=="MultiPolygon"){if(Ie==="GeometryCollection"){for(const Ue of K.geometry.geometries)jt(Re,{id:Se,geometry:Ue,properties:K.properties},$,ne);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Ue of Oe){const nt=[];tt(Ue,nt,je,!0),ze.push(nt)}}Re.push(It(Se,Ie,ze,K.properties))}function Dt(Re,K){K.push(Ot(Re[0]),St(Re[1]),0)}function _e(Re,K,$,ne){let Oe,Ie,je=0;for(let Se=0;Se<Re.length;Se++){const Ue=Ot(Re[Se][0]),nt=St(Re[Se][1]);K.push(Ue,nt,0),Se>0&&(je+=ne?(Oe*nt-Ue*Ie)/2:Math.sqrt(Math.pow(Ue-Oe,2)+Math.pow(nt-Ie,2))),Oe=Ue,Ie=nt}const ze=K.length-3;K[2]=1,Ts(K,0,ze,$),K[ze+2]=1,K.size=Math.abs(je),K.start=0,K.end=K.size}function tt(Re,K,$,ne){for(let Oe=0;Oe<Re.length;Oe++){const Ie=[];_e(Re[Oe],Ie,$,ne),K.push(Ie)}}function Ot(Re){return Re/360+.5}function St(Re){const K=Math.sin(Re*Math.PI/180),$=.5-.25*Math.log((1+K)/(1-K))/Math.PI;return $<0?0:$>1?1:$}function Ct(Re,K,$,ne,Oe,Ie,je,ze){if(ne/=K,Ie>=($/=K)&&je<ne)return Re;if(je<$||Ie>=ne)return null;const Se=[];for(const Ue of Re){const nt=Ue.geometry;let st=Ue.type;const Bt=Oe===0?Ue.minX:Ue.minY,Ut=Oe===0?Ue.maxX:Ue.maxY;if(Bt>=$&&Ut<ne){Se.push(Ue);continue}if(Ut<$||Bt>=ne)continue;let Jt=[];if(st==="Point"||st==="MultiPoint")Ht(nt,Jt,$,ne,Oe);else if(st==="LineString")da(nt,Jt,$,ne,Oe,!1,ze.lineMetrics);else if(st==="MultiLineString")is(nt,Jt,$,ne,Oe,!1);else if(st==="Polygon")is(nt,Jt,$,ne,Oe,!0);else if(st==="MultiPolygon")for(const Ga of nt){const Ea=[];is(Ga,Ea,$,ne,Oe,!0),Ea.length&&Jt.push(Ea)}if(Jt.length){if(ze.lineMetrics&&st==="LineString"){for(const Ga of Jt)Se.push(It(Ue.id,st,Ga,Ue.tags));continue}st!=="LineString"&&st!=="MultiLineString"||(Jt.length===1?(st="LineString",Jt=Jt[0]):st="MultiLineString"),st!=="Point"&&st!=="MultiPoint"||(st=Jt.length===3?"Point":"MultiPoint"),Se.push(It(Ue.id,st,Jt,Ue.tags))}}return Se.length?Se:null}function Ht(Re,K,$,ne,Oe){for(let Ie=0;Ie<Re.length;Ie+=3){const je=Re[Ie+Oe];je>=$&&je<=ne&&xn(K,Re[Ie],Re[Ie+1],Re[Ie+2])}}function da(Re,K,$,ne,Oe,Ie,je){let ze=Ma(Re);const Se=Oe===0?_i:Tn;let Ue,nt,st=Re.start;for(let Ea=0;Ea<Re.length-3;Ea+=3){const Ne=Re[Ea],Za=Re[Ea+1],Ws=Re[Ea+2],sa=Re[Ea+3],Xa=Re[Ea+4],dn=Oe===0?Ne:Za,qa=Oe===0?sa:Xa;let Ls=!1;je&&(Ue=Math.sqrt(Math.pow(Ne-sa,2)+Math.pow(Za-Xa,2))),dn<$?qa>$&&(nt=Se(ze,Ne,Za,sa,Xa,$),je&&(ze.start=st+Ue*nt)):dn>ne?qa<ne&&(nt=Se(ze,Ne,Za,sa,Xa,ne),je&&(ze.start=st+Ue*nt)):xn(ze,Ne,Za,Ws),qa<$&&dn>=$&&(nt=Se(ze,Ne,Za,sa,Xa,$),Ls=!0),qa>ne&&dn<=ne&&(nt=Se(ze,Ne,Za,sa,Xa,ne),Ls=!0),!Ie&&Ls&&(je&&(ze.end=st+Ue*nt),K.push(ze),ze=Ma(Re)),je&&(st+=Ue)}let Bt=Re.length-3;const Ut=Re[Bt],Jt=Re[Bt+1],Ga=Oe===0?Ut:Jt;Ga>=$&&Ga<=ne&&xn(ze,Ut,Jt,Re[Bt+2]),Bt=ze.length-3,Ie&&Bt>=3&&(ze[Bt]!==ze[0]||ze[Bt+1]!==ze[1])&&xn(ze,ze[0],ze[1],ze[2]),ze.length&&K.push(ze)}function Ma(Re){const K=[];return K.size=Re.size,K.start=Re.start,K.end=Re.end,K}function is(Re,K,$,ne,Oe,Ie){for(const je of Re)da(je,K,$,ne,Oe,Ie,!1)}function xn(Re,K,$,ne){Re.push(K,$,ne)}function _i(Re,K,$,ne,Oe,Ie){const je=(Ie-K)/(ne-K);return xn(Re,Ie,$+(Oe-$)*je,1),je}function Tn(Re,K,$,ne,Oe,Ie){const je=(Ie-$)/(Oe-$);return xn(Re,K+(ne-K)*je,Ie,1),je}function kr(Re,K){const $=[];for(let ne=0;ne<Re.length;ne++){const Oe=Re[ne],Ie=Oe.type;let je;if(Ie==="Point"||Ie==="MultiPoint"||Ie==="LineString")je=As(Oe.geometry,K);else if(Ie==="MultiLineString"||Ie==="Polygon"){je=[];for(const ze of Oe.geometry)je.push(As(ze,K))}else if(Ie==="MultiPolygon"){je=[];for(const ze of Oe.geometry){const Se=[];for(const Ue of ze)Se.push(As(Ue,K));je.push(Se)}}$.push(It(Oe.id,Ie,je,Oe.tags))}return $}function As(Re,K){const $=[];$.size=Re.size,Re.start!==void 0&&($.start=Re.start,$.end=Re.end);for(let ne=0;ne<Re.length;ne+=3)$.push(Re[ne]+K,Re[ne+1],Re[ne+2]);return $}function Yn(Re,K){if(Re.transformed)return Re;const $=1<<Re.z,ne=Re.x,Oe=Re.y;for(const Ie of Re.features){const je=Ie.geometry,ze=Ie.type;if(Ie.geometry=[],ze===1)for(let Se=0;Se<je.length;Se+=2)Ie.geometry.push(Po(je[Se],je[Se+1],K,$,ne,Oe));else for(let Se=0;Se<je.length;Se++){const Ue=[];for(let nt=0;nt<je[Se].length;nt+=2)Ue.push(Po(je[Se][nt],je[Se][nt+1],K,$,ne,Oe));Ie.geometry.push(Ue)}}return Re.transformed=!0,Re}function Po(Re,K,$,ne,Oe,Ie){return[Math.round($*(Re*ne-Oe)),Math.round($*(K*ne-Ie))]}function vs(Re,K,$,ne,Oe){const Ie=K===Oe.maxZoom?0:Oe.tolerance/((1<<K)*Oe.extent),je={features:[],numPoints:0,numSimplified:0,numFeatures:Re.length,source:null,x:$,y:ne,z:K,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const ze of Re)Ro(je,ze,Ie,Oe);return je}function Ro(Re,K,$,ne){const Oe=K.geometry,Ie=K.type,je=[];if(Re.minX=Math.min(Re.minX,K.minX),Re.minY=Math.min(Re.minY,K.minY),Re.maxX=Math.max(Re.maxX,K.maxX),Re.maxY=Math.max(Re.maxY,K.maxY),Ie==="Point"||Ie==="MultiPoint")for(let ze=0;ze<Oe.length;ze+=3)je.push(Oe[ze],Oe[ze+1]),Re.numPoints++,Re.numSimplified++;else if(Ie==="LineString")Zi(je,Oe,Re,$,!1,!1);else if(Ie==="MultiLineString"||Ie==="Polygon")for(let ze=0;ze<Oe.length;ze++)Zi(je,Oe[ze],Re,$,Ie==="Polygon",ze===0);else if(Ie==="MultiPolygon")for(let ze=0;ze<Oe.length;ze++){const Se=Oe[ze];for(let Ue=0;Ue<Se.length;Ue++)Zi(je,Se[Ue],Re,$,!0,Ue===0)}if(je.length){let ze=K.tags||null;if(Ie==="LineString"&&ne.lineMetrics){ze={};for(const Ue in K.tags)ze[Ue]=K.tags[Ue];ze.mapbox_clip_start=Oe.start/Oe.size,ze.mapbox_clip_end=Oe.end/Oe.size}const Se={geometry:je,type:Ie==="Polygon"||Ie==="MultiPolygon"?3:Ie==="LineString"||Ie==="MultiLineString"?2:1,tags:ze};K.id!==null&&(Se.id=K.id),Re.features.push(Se)}}function Zi(Re,K,$,ne,Oe,Ie){const je=ne*ne;if(ne>0&&K.size<(Oe?je:ne))return void($.numPoints+=K.length/3);const ze=[];for(let Se=0;Se<K.length;Se+=3)(ne===0||K[Se+2]>je)&&($.numSimplified++,ze.push(K[Se],K[Se+1])),$.numPoints++;Oe&&(function(Se,Ue){let nt=0;for(let st=0,Bt=Se.length,Ut=Bt-2;st<Bt;Ut=st,st+=2)nt+=(Se[st]-Se[Ut])*(Se[st+1]+Se[Ut+1]);if(nt>0===Ue)for(let st=0,Bt=Se.length;st<Bt/2;st+=2){const Ut=Se[st],Jt=Se[st+1];Se[st]=Se[Bt-2-st],Se[st+1]=Se[Bt-1-st],Se[Bt-2-st]=Ut,Se[Bt-1-st]=Jt}})(ze,Ie),Re.push(ze)}const Xi={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Ho{constructor(K,$){const ne=($=this.options=(function(Ie,je){for(const ze in je)Ie[ze]=je[ze];return Ie})(Object.create(Xi),$)).debug;if(ne&&console.time("preprocess data"),$.maxZoom<0||$.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if($.promoteId&&$.generateId)throw new Error("promoteId and generateId cannot be used together.");let Oe=(function(Ie,je){const ze=[];if(Ie.type==="FeatureCollection")for(let Se=0;Se<Ie.features.length;Se++)jt(ze,Ie.features[Se],je,Se);else jt(ze,Ie.type==="Feature"?Ie:{geometry:Ie},je);return ze})(K,$);this.tiles={},this.tileCoords=[],ne&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",$.indexMaxZoom,$.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Oe=(function(Ie,je){const ze=je.buffer/je.extent;let Se=Ie;const Ue=Ct(Ie,1,-1-ze,ze,0,-1,2,je),nt=Ct(Ie,1,1-ze,2+ze,0,-1,2,je);return(Ue||nt)&&(Se=Ct(Ie,1,-ze,1+ze,0,-1,2,je)||[],Ue&&(Se=kr(Ue,1).concat(Se)),nt&&(Se=Se.concat(kr(nt,-1)))),Se})(Oe,$),Oe.length&&this.splitTile(Oe,0,0,0),ne&&(Oe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(K,$,ne,Oe,Ie,je,ze){const Se=[K,$,ne,Oe],Ue=this.options,nt=Ue.debug;for(;Se.length;){Oe=Se.pop(),ne=Se.pop(),$=Se.pop(),K=Se.pop();const st=1<<$,Bt=No($,ne,Oe);let Ut=this.tiles[Bt];if(!Ut&&(nt>1&&console.time("creation"),Ut=this.tiles[Bt]=vs(K,$,ne,Oe,Ue),this.tileCoords.push({z:$,x:ne,y:Oe}),nt)){nt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",$,ne,Oe,Ut.numFeatures,Ut.numPoints,Ut.numSimplified),console.timeEnd("creation"));const Ls=`z${$}`;this.stats[Ls]=(this.stats[Ls]||0)+1,this.total++}if(Ut.source=K,Ie==null){if($===Ue.indexMaxZoom||Ut.numPoints<=Ue.indexMaxPoints)continue}else{if($===Ue.maxZoom||$===Ie)continue;if(Ie!=null){const Ls=Ie-$;if(ne!==je>>Ls||Oe!==ze>>Ls)continue}}if(Ut.source=null,K.length===0)continue;nt>1&&console.time("clipping");const Jt=.5*Ue.buffer/Ue.extent,Ga=.5-Jt,Ea=.5+Jt,Ne=1+Jt;let Za=null,Ws=null,sa=null,Xa=null,dn=Ct(K,st,ne-Jt,ne+Ea,0,Ut.minX,Ut.maxX,Ue),qa=Ct(K,st,ne+Ga,ne+Ne,0,Ut.minX,Ut.maxX,Ue);K=null,dn&&(Za=Ct(dn,st,Oe-Jt,Oe+Ea,1,Ut.minY,Ut.maxY,Ue),Ws=Ct(dn,st,Oe+Ga,Oe+Ne,1,Ut.minY,Ut.maxY,Ue),dn=null),qa&&(sa=Ct(qa,st,Oe-Jt,Oe+Ea,1,Ut.minY,Ut.maxY,Ue),Xa=Ct(qa,st,Oe+Ga,Oe+Ne,1,Ut.minY,Ut.maxY,Ue),qa=null),nt>1&&console.timeEnd("clipping"),Se.push(Za||[],$+1,2*ne,2*Oe),Se.push(Ws||[],$+1,2*ne,2*Oe+1),Se.push(sa||[],$+1,2*ne+1,2*Oe),Se.push(Xa||[],$+1,2*ne+1,2*Oe+1)}}getTile(K,$,ne){K=+K,$=+$,ne=+ne;const Oe=this.options,{extent:Ie,debug:je}=Oe;if(K<0||K>24)return null;const ze=1<<K,Se=No(K,$=$+ze&ze-1,ne);if(this.tiles[Se])return Yn(this.tiles[Se],Ie);je>1&&console.log("drilling down to z%d-%d-%d",K,$,ne);let Ue,nt=K,st=$,Bt=ne;for(;!Ue&&nt>0;)nt--,st>>=1,Bt>>=1,Ue=this.tiles[No(nt,st,Bt)];return Ue&&Ue.source?(je>1&&(console.log("found parent tile z%d-%d-%d",nt,st,Bt),console.time("drilling down")),this.splitTile(Ue.source,nt,st,Bt,K,$,ne),je>1&&console.timeEnd("drilling down"),this.tiles[Se]?Yn(this.tiles[Se],Ie):null):null}}function No(Re,K,$){return 32*((1<<Re)*$+K)+Re}class Jr extends Te{constructor(K,$,ne,Oe=wn){super(K,$,ne),this._dataUpdateable=new Map,this._createGeoJSONIndex=Oe}loadVectorTile(K,$){return E._(this,void 0,void 0,(function*(){const ne=K.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Oe=this._geoJSONIndex.getTile(ne.z,ne.x,ne.y);return Oe?kt(new E.d2(Oe.features,{version:2,extent:E.a5})):null}))}loadData(K){return E._(this,void 0,void 0,(function*(){var $;($=this._pendingRequest)===null||$===void 0||$.abort();const ne=this._startPerformance(K);this._pendingRequest=new AbortController;try{(!this._pendingData||K.request||K.data||K.dataDiff)&&(this._pendingData=this.loadAndProcessGeoJSON(K,this._pendingRequest));const Oe=yield this._pendingData;this._geoJSONIndex=this._createGeoJSONIndex(Oe,K),this.loaded={};const Ie={};return K.request&&(Ie.data=Oe),this._finishPerformance(ne,K,Ie),Ie}catch(Oe){if(delete this._pendingRequest,E.Z(Oe))return{abandoned:!0};throw Oe}}))}_startPerformance(K){var $;if(!(($=K==null?void 0:K.request)===null||$===void 0)&&$.collectResourceTiming)return new E.c_(K.request)}_finishPerformance(K,$,ne){if(!K)return;const Oe=K.finish();Oe&&(ne.resourceTiming={},ne.resourceTiming[$.source]=JSON.parse(JSON.stringify(Oe)))}getData(){return E._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(K){const $=this.loaded;return $&&$[K.uid]?super.reloadTile(K):this.loadTile(K)}loadAndProcessGeoJSON(K,$){return E._(this,void 0,void 0,(function*(){let ne;if(K.request?ne=yield this.loadGeoJSONFromUrl(K.request,K.promoteId,$):K.data?ne=this._loadGeoJSONFromObject(K.data,K.promoteId):K.dataDiff&&(ne=this._loadGeoJSONFromDiff(K.dataDiff,K.promoteId,K.source)),delete this._pendingRequest,typeof ne!="object")throw new Error(`Input data given to '${K.source}' is not a valid GeoJSON object.`);return $t(ne,!0),K.filter&&(ne=this._filterGeoJSON(ne,K.filter)),ne}))}loadGeoJSONFromUrl(K,$,ne){return E._(this,void 0,void 0,(function*(){const Oe=yield E.j(K,ne);return this._dataUpdateable=E.a7(Oe.data,$),Oe.data}))}_loadGeoJSONFromObject(K,$){return this._dataUpdateable=E.a7(K,$),K}_loadGeoJSONFromDiff(K,$,ne){if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ne}`);E.a8(this._dataUpdateable,K,$);const Oe=Array.from(this._dataUpdateable.values());return this._toFeatureCollection(Oe)}_filterGeoJSON(K,$){const ne=E.d3($,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ne.result==="error")throw new Error(ne.value.map((Ie=>`${Ie.key}: ${Ie.message}`)).join(", "));const Oe=K.features.filter((Ie=>ne.value.evaluate({zoom:0},Ie)));return this._toFeatureCollection(Oe)}_toFeatureCollection(K){return{type:"FeatureCollection",features:K}}removeSource(K){return E._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(K){return this._geoJSONIndex.getClusterExpansionZoom(K.clusterId)}getClusterChildren(K){return this._geoJSONIndex.getChildren(K.clusterId)}getClusterLeaves(K){return this._geoJSONIndex.getLeaves(K.clusterId,K.limit,K.offset)}}function wn(Re,K){return K.cluster?new ba((function({superclusterOptions:$,clusterProperties:ne}){if(!ne||!$)return $;const Oe={},Ie={},je={accumulated:null,zoom:0},ze={properties:null},Se=Object.keys(ne);for(const Ue of Se){const[nt,st]=ne[Ue],Bt=E.d3(st),Ut=E.d3(typeof nt=="string"?[nt,["accumulated"],["get",Ue]]:nt);Oe[Ue]=Bt.value,Ie[Ue]=Ut.value}return $.map=Ue=>{ze.properties=Ue;const nt={};for(const st of Se)nt[st]=Oe[st].evaluate(je,ze);return nt},$.reduce=(Ue,nt)=>{ze.properties=nt;for(const st of Se)je.accumulated=Ue[st],Ue[st]=Ie[st].evaluate(je,ze)},$})(K)).load(Re.features):(function($,ne){return new Ho($,ne)})(Re,K.geojsonVtOptions)}class ro{constructor(K){this.self=K,this.actor=new E.L(K),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=($,ne)=>{if(this.externalWorkerSourceTypes[$])throw new Error(`Worker source with name "${$}" already registered.`);this.externalWorkerSourceTypes[$]=ne},this.self.addProtocol=E.cJ,this.self.removeProtocol=E.cK,this.self.registerRTLTextPlugin=$=>{E.d4.setMethods($)},this.actor.registerMessageHandler("LDT",(($,ne)=>this._getDEMWorkerSource($,ne.source).loadTile(ne))),this.actor.registerMessageHandler("RDT",(($,ne)=>E._(this,void 0,void 0,(function*(){this._getDEMWorkerSource($,ne.source).removeTile(ne)})))),this.actor.registerMessageHandler("GCEZ",(($,ne)=>E._(this,void 0,void 0,(function*(){return this._getWorkerSource($,ne.type,ne.source).getClusterExpansionZoom(ne)})))),this.actor.registerMessageHandler("GCC",(($,ne)=>E._(this,void 0,void 0,(function*(){return this._getWorkerSource($,ne.type,ne.source).getClusterChildren(ne)})))),this.actor.registerMessageHandler("GCL",(($,ne)=>E._(this,void 0,void 0,(function*(){return this._getWorkerSource($,ne.type,ne.source).getClusterLeaves(ne)})))),this.actor.registerMessageHandler("LD",(($,ne)=>this._getWorkerSource($,ne.type,ne.source).loadData(ne))),this.actor.registerMessageHandler("GD",(($,ne)=>this._getWorkerSource($,ne.type,ne.source).getData())),this.actor.registerMessageHandler("LT",(($,ne)=>this._getWorkerSource($,ne.type,ne.source).loadTile(ne))),this.actor.registerMessageHandler("RT",(($,ne)=>this._getWorkerSource($,ne.type,ne.source).reloadTile(ne))),this.actor.registerMessageHandler("AT",(($,ne)=>this._getWorkerSource($,ne.type,ne.source).abortTile(ne))),this.actor.registerMessageHandler("RMT",(($,ne)=>this._getWorkerSource($,ne.type,ne.source).removeTile(ne))),this.actor.registerMessageHandler("RS",(($,ne)=>E._(this,void 0,void 0,(function*(){if(!this.workerSources[$]||!this.workerSources[$][ne.type]||!this.workerSources[$][ne.type][ne.source])return;const Oe=this.workerSources[$][ne.type][ne.source];delete this.workerSources[$][ne.type][ne.source],Oe.removeSource!==void 0&&Oe.removeSource(ne)})))),this.actor.registerMessageHandler("RM",($=>E._(this,void 0,void 0,(function*(){delete this.layerIndexes[$],delete this.availableImages[$],delete this.workerSources[$],delete this.demWorkerSources[$],this.globalStates.delete($)})))),this.actor.registerMessageHandler("SR",(($,ne)=>E._(this,void 0,void 0,(function*(){this.referrer=ne})))),this.actor.registerMessageHandler("SRPS",(($,ne)=>this._syncRTLPluginState($,ne))),this.actor.registerMessageHandler("IS",(($,ne)=>E._(this,void 0,void 0,(function*(){this.self.importScripts(ne)})))),this.actor.registerMessageHandler("SI",(($,ne)=>this._setImages($,ne))),this.actor.registerMessageHandler("UL",(($,ne)=>E._(this,void 0,void 0,(function*(){this._getLayerIndex($).update(ne.layers,ne.removedIds,this._getGlobalState($))})))),this.actor.registerMessageHandler("UGS",(($,ne)=>E._(this,void 0,void 0,(function*(){const Oe=this._getGlobalState($);for(const Ie in ne)Oe[Ie]=ne[Ie]})))),this.actor.registerMessageHandler("SL",(($,ne)=>E._(this,void 0,void 0,(function*(){this._getLayerIndex($).replace(ne,this._getGlobalState($))}))))}_getGlobalState(K){let $=this.globalStates.get(K);return $||($={},this.globalStates.set(K,$)),$}_setImages(K,$){return E._(this,void 0,void 0,(function*(){this.availableImages[K]=$;for(const ne in this.workerSources[K]){const Oe=this.workerSources[K][ne];for(const Ie in Oe)Oe[Ie].availableImages=$}}))}_syncRTLPluginState(K,$){return E._(this,void 0,void 0,(function*(){return yield E.d4.syncState($,this.self.importScripts)}))}_getAvailableImages(K){let $=this.availableImages[K];return $||($=[]),$}_getLayerIndex(K){let $=this.layerIndexes[K];return $||($=this.layerIndexes[K]=new c),$}_getWorkerSource(K,$,ne){if(this.workerSources[K]||(this.workerSources[K]={}),this.workerSources[K][$]||(this.workerSources[K][$]={}),!this.workerSources[K][$][ne]){const Oe={sendAsync:(Ie,je)=>(Ie.targetMapId=K,this.actor.sendAsync(Ie,je))};switch($){case"vector":this.workerSources[K][$][ne]=new Te(Oe,this._getLayerIndex(K),this._getAvailableImages(K));break;case"geojson":this.workerSources[K][$][ne]=new Jr(Oe,this._getLayerIndex(K),this._getAvailableImages(K));break;default:this.workerSources[K][$][ne]=new this.externalWorkerSourceTypes[$](Oe,this._getLayerIndex(K),this._getAvailableImages(K))}}return this.workerSources[K][$][ne]}_getDEMWorkerSource(K,$){return this.demWorkerSources[K]||(this.demWorkerSources[K]={}),this.demWorkerSources[K][$]||(this.demWorkerSources[K][$]=new Vt),this.demWorkerSources[K][$]}}return E.i(self)&&(self.worker=new ro(self)),ro})),J("index",["exports","./shared"],(function(E,c){var re="5.16.0";function fe(){var g=new c.A(4);return c.A!=Float32Array&&(g[1]=0,g[2]=0),g[0]=1,g[3]=1,g}let Le,Ce,Pe;const ft={frame(g,t,o){const l=requestAnimationFrame((w=>{p(),t(w)})),{unsubscribe:p}=c.s(g.signal,"abort",(()=>{p(),cancelAnimationFrame(l),o(new c.a(g.signal.reason))}),!1)},frameAsync(g){return new Promise(((t,o)=>{this.frame(g,t,o)}))},getImageData(g,t=0){return this.getImageCanvasContext(g).getImageData(-t,-t,g.width+2*t,g.height+2*t)},getImageCanvasContext(g){const t=window.document.createElement("canvas"),o=t.getContext("2d",{willReadFrequently:!0});if(!o)throw new Error("failed to create canvas 2d context");return t.width=g.width,t.height=g.height,o.drawImage(g,0,0,g.width,g.height),o},resolveURL:g=>(Le||(Le=document.createElement("a")),Le.href=g,Le.href),hardwareConcurrency:typeof navigator!="undefined"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return Pe!==void 0?Pe:!!matchMedia&&(Ce==null&&(Ce=matchMedia("(prefers-reduced-motion: reduce)")),Ce.matches)},set prefersReducedMotion(g){Pe=g}},kt=new class{constructor(){this._realTime=typeof performance!="undefined"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),this._frozenAt=null}getCurrentTime(){return this._frozenAt!==null?this._frozenAt:this._realTime()}setNow(g){this._frozenAt=g}restoreNow(){this._frozenAt=null}isFrozen(){return this._frozenAt!==null}};function it(){return kt.getCurrentTime()}class Te{static testProp(t){if(!Te.docStyle)return t[0];for(let o=0;o<t.length;o++)if(t[o]in Te.docStyle)return t[o];return t[0]}static create(t,o,l){const p=window.document.createElement(t);return o!==void 0&&(p.className=o),l&&l.appendChild(p),p}static createNS(t,o){return window.document.createElementNS(t,o)}static disableDrag(){Te.docStyle&&Te.selectProp&&(Te.userSelect=Te.docStyle[Te.selectProp],Te.docStyle[Te.selectProp]="none")}static enableDrag(){Te.docStyle&&Te.selectProp&&(Te.docStyle[Te.selectProp]=Te.userSelect)}static setTransform(t,o){t.style[Te.transformProp]=o}static addEventListener(t,o,l,p={}){t.addEventListener(o,l,"passive"in p?p:p.capture)}static removeEventListener(t,o,l,p={}){t.removeEventListener(o,l,"passive"in p?p:p.capture)}static suppressClickInternal(t){t.preventDefault(),t.stopPropagation(),window.removeEventListener("click",Te.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",Te.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",Te.suppressClickInternal,!0)}),0)}static getScale(t){const o=t.getBoundingClientRect();return{x:o.width/t.offsetWidth||1,y:o.height/t.offsetHeight||1,boundingClientRect:o}}static getPoint(t,o,l){const p=o.boundingClientRect;return new c.P((l.clientX-p.left)/o.x-t.clientLeft,(l.clientY-p.top)/o.y-t.clientTop)}static mousePos(t,o){const l=Te.getScale(t);return Te.getPoint(t,l,o)}static touchPos(t,o){const l=[],p=Te.getScale(t);for(let w=0;w<o.length;w++)l.push(Te.getPoint(t,p,o[w]));return l}static mouseButton(t){return t.button}static remove(t){t.parentNode&&t.parentNode.removeChild(t)}static sanitize(t){const o=new DOMParser().parseFromString(t,"text/html").body||document.createElement("body"),l=o.querySelectorAll("script");for(const p of l)p.remove();return Te.clean(o),o.innerHTML}static isPossiblyDangerous(t,o){const l=o.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(t)||!l.includes("javascript:")&&!l.includes("data:"))||!!t.startsWith("on")||void 0}static clean(t){const o=t.children;for(const l of o)Te.removeAttributes(l),Te.clean(l)}static removeAttributes(t){for(const{name:o,value:l}of t.attributes)Te.isPossiblyDangerous(o,l)&&t.removeAttribute(o)}}Te.docStyle=typeof window!="undefined"&&window.document&&window.document.documentElement.style,Te.selectProp=Te.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),Te.transformProp=Te.testProp(["transform","WebkitTransform"]);const Vt={supported:!1,testSupport:function(g){!Et&&mt&&($t?Ia(g):Ft=g)}};let Ft,mt,Et=!1,$t=!1;function Ia(g){const t=g.createTexture();g.bindTexture(g.TEXTURE_2D,t);try{if(g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,mt),g.isContextLost())return;Vt.supported=!0}catch(o){}g.deleteTexture(t),Et=!0}var zt;typeof document!="undefined"&&(mt=document.createElement("img"),mt.onload=()=>{Ft&&Ia(Ft),Ft=null,$t=!0},mt.onerror=()=>{Et=!0,Ft=null},mt.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(g){let t,o,l,p;g.resetRequestQueue=()=>{t=[],o=0,l=0,p={}},g.addThrottleControl=A=>{const C=l++;return p[C]=A,C},g.removeThrottleControl=A=>{delete p[A],O()},g.getImage=(A,C,D=!0)=>new Promise(((F,G)=>{Vt.supported&&(A.headers||(A.headers={}),A.headers.accept="image/webp,*/*"),c.e(A,{type:"image"}),t.push({abortController:C,requestParameters:A,supportImageRefresh:D,state:"queued",onError:Z=>{G(Z)},onSuccess:Z=>{F(Z)}}),O()}));const w=A=>c._(this,void 0,void 0,(function*(){A.state="running";const{requestParameters:C,supportImageRefresh:D,onError:F,onSuccess:G,abortController:Z}=A,Q=D===!1&&!c.i(self)&&!c.g(C.url)&&(!C.headers||Object.keys(C.headers).reduce(((le,pe)=>le&&pe==="accept"),!0));o++;const ie=Q?I(C,Z):c.m(C,Z);try{const le=yield ie;delete A.abortController,A.state="completed",le.data instanceof HTMLImageElement||c.b(le.data)?G(le):le.data&&G({data:yield(de=le.data,typeof createImageBitmap=="function"?c.f(de):c.h(de)),cacheControl:le.cacheControl,expires:le.expires})}catch(le){delete A.abortController,F(le)}finally{o--,O()}var de})),O=()=>{const A=(()=>{for(const C of Object.keys(p))if(p[C]())return!0;return!1})()?c.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:c.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let C=o;C<A&&t.length>0;C++){const D=t.shift();D.abortController.signal.aborted?C--:w(D)}},I=(A,C)=>new Promise(((D,F)=>{const G=new Image,Z=A.url,Q=A.credentials;Q&&Q==="include"?G.crossOrigin="use-credentials":(Q&&Q==="same-origin"||!c.d(Z))&&(G.crossOrigin="anonymous"),C.signal.addEventListener("abort",(()=>{G.src="",F(new c.a(C.signal.reason))})),G.fetchPriority="high",G.onload=()=>{G.onerror=G.onload=null,D({data:G})},G.onerror=()=>{G.onerror=G.onload=null,C.signal.aborted||F(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},G.src=Z}))})(zt||(zt={})),zt.resetRequestQueue();class ca{constructor(t){this._transformRequestFn=t!=null?t:null}transformRequest(t,o){return this._transformRequestFn&&this._transformRequestFn(t,o)||{url:t}}setTransformRequest(t){this._transformRequestFn=t}}function ba(g){const t=[];if(typeof g=="string")t.push({id:"default",url:g});else if(g&&g.length>0){const o=[];for(const{id:l,url:p}of g){const w=`${l}${p}`;o.indexOf(w)===-1&&(o.push(w),t.push({id:l,url:p}))}}return t}function fs(g,t,o){try{const l=new URL(g);return l.pathname+=`${t}${o}`,l.toString()}catch(l){throw new Error(`Invalid sprite URL "${g}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function ma(g){const{userImage:t}=g;return!!(t&&t.render&&t.render())&&(g.data.replace(new Uint8Array(t.data.buffer)),!0)}class pa extends c.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new c.R({width:1,height:1}),this.dirty=!0}destroy(){this.atlasTexture&&(this.atlasTexture.destroy(),this.atlasTexture=null);for(const t of Object.keys(this.images))this.removeImage(t);this.patterns={},this.atlasImage=new c.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(t){if(this.loaded!==t&&(this.loaded=t,t)){for(const{ids:o,promiseResolve:l}of this.requestors)l(this._getImagesForIds(o));this.requestors=[]}}getImage(t){const o=this.images[t];if(o&&!o.data&&o.spriteData){const l=o.spriteData;o.data=new c.R({width:l.width,height:l.height},l.context.getImageData(l.x,l.y,l.width,l.height).data),o.spriteData=null}return o}addImage(t,o){if(this.images[t])throw new Error(`Image id ${t} already exist, use updateImage instead`);this._validate(t,o)&&(this.images[t]=o)}_validate(t,o){let l=!0;const p=o.data||o.spriteData;return this._validateStretch(o.stretchX,p&&p.width)||(this.fire(new c.k(new Error(`Image "${t}" has invalid "stretchX" value`))),l=!1),this._validateStretch(o.stretchY,p&&p.height)||(this.fire(new c.k(new Error(`Image "${t}" has invalid "stretchY" value`))),l=!1),this._validateContent(o.content,o)||(this.fire(new c.k(new Error(`Image "${t}" has invalid "content" value`))),l=!1),l}_validateStretch(t,o){if(!t)return!0;let l=0;for(const p of t){if(p[0]<l||p[1]<p[0]||o<p[1])return!1;l=p[1]}return!0}_validateContent(t,o){if(!t)return!0;if(t.length!==4)return!1;const l=o.spriteData,p=l&&l.width||o.data.width,w=l&&l.height||o.data.height;return!(t[0]<0||p<t[0]||t[1]<0||w<t[1]||t[2]<0||p<t[2]||t[3]<0||w<t[3]||t[2]<t[0]||t[3]<t[1])}updateImage(t,o,l=!0){const p=this.getImage(t);if(l&&(p.data.width!==o.data.width||p.data.height!==o.data.height))throw new Error(`size mismatch between old image (${p.data.width}x${p.data.height}) and new image (${o.data.width}x${o.data.height}).`);o.version=p.version+1,this.images[t]=o,this.updatedImages[t]=!0}removeImage(t){const o=this.images[t];delete this.images[t],delete this.patterns[t],o.userImage&&o.userImage.onRemove&&o.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(t){return new Promise(((o,l)=>{let p=!0;if(!this.isLoaded())for(const w of t)this.images[w]||(p=!1);this.isLoaded()||p?o(this._getImagesForIds(t)):this.requestors.push({ids:t,promiseResolve:o})}))}_getImagesForIds(t){const o={};for(const l of t){let p=this.getImage(l);p||(this.fire(new c.l("styleimagemissing",{id:l})),p=this.getImage(l)),p?o[l]={data:p.data.clone(),pixelRatio:p.pixelRatio,sdf:p.sdf,version:p.version,stretchX:p.stretchX,stretchY:p.stretchY,content:p.content,textFitWidth:p.textFitWidth,textFitHeight:p.textFitHeight,hasRenderCallback:!!(p.userImage&&p.userImage.render)}:c.w(`Image "${l}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return o}getPixelSize(){const{width:t,height:o}=this.atlasImage;return{width:t,height:o}}getPattern(t){const o=this.patterns[t],l=this.getImage(t);if(!l)return null;if(o&&o.position.version===l.version)return o.position;if(o)o.position.version=l.version;else{const p={w:l.data.width+2,h:l.data.height+2,x:0,y:0},w=new c.I(p,l);this.patterns[t]={bin:p,position:w}}return this._updatePatternAtlas(),this.patterns[t].position}bind(t){const o=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new c.T(t,this.atlasImage,o.RGBA),this.atlasTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE)}_updatePatternAtlas(){const t=[];for(const w in this.patterns)t.push(this.patterns[w].bin);const{w:o,h:l}=c.p(t),p=this.atlasImage;p.resize({width:o||1,height:l||1});for(const w in this.patterns){const{bin:O}=this.patterns[w],I=O.x+1,A=O.y+1,C=this.getImage(w).data,D=C.width,F=C.height;c.R.copy(C,p,{x:0,y:0},{x:I,y:A},{width:D,height:F}),c.R.copy(C,p,{x:0,y:F-1},{x:I,y:A-1},{width:D,height:1}),c.R.copy(C,p,{x:0,y:0},{x:I,y:A+F},{width:D,height:1}),c.R.copy(C,p,{x:D-1,y:0},{x:I-1,y:A},{width:1,height:F}),c.R.copy(C,p,{x:0,y:0},{x:I+D,y:A},{width:1,height:F})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(t){for(const o of t){if(this.callbackDispatchedThisFrame[o])continue;this.callbackDispatchedThisFrame[o]=!0;const l=this.getImage(o);l||c.w(`Image with ID: "${o}" was not found`),ma(l)&&this.updateImage(o,l)}}cloneImages(){const t={};for(const o in this.images){const l=this.images[o];t[o]=Object.assign(Object.assign({},l),{data:l.data?l.data.clone():null})}return t}}const Ca=1e20;function os(g,t,o,l,p,w,O,I,A){for(let C=t;C<t+l;C++)Ts(g,o*w+C,w,p,O,I,A);for(let C=o;C<o+p;C++)Ts(g,C*w+t,1,l,O,I,A)}function Ts(g,t,o,l,p,w,O){w[0]=0,O[0]=-Ca,O[1]=Ca,p[0]=g[t];for(let I=1,A=0,C=0;I<l;I++){p[I]=g[t+I*o];const D=I*I;do{const F=w[A];C=(p[I]-p[F]+D-F*F)/(I-F)/2}while(C<=O[A]&&--A>-1);A++,w[A]=I,O[A]=C,O[A+1]=Ca}for(let I=0,A=0;I<l;I++){for(;O[A+1]<I;)A++;const C=w[A],D=I-C;g[t+I*o]=p[C]+D*D}}const Je=c.v.layout_symbol["text-font"].default.join(",");class It{constructor(t,o,l){this.requestManager=t,this.localIdeographFontFamily=o,this.entries={},this.lang=l}setURL(t){this.url=t}getGlyphs(t){return c._(this,void 0,void 0,(function*(){const o=[];for(const w in t)for(const O of t[w])o.push(this._getAndCacheGlyphsPromise(w,O));const l=yield Promise.all(o),p={};for(const{stack:w,id:O,glyph:I}of l)p[w]||(p[w]={}),p[w][O]=I&&{id:I.id,bitmap:I.bitmap.clone(),metrics:I.metrics};return p}))}_getAndCacheGlyphsPromise(t,o){return c._(this,void 0,void 0,(function*(){let l=this.entries[t];l||(l=this.entries[t]={glyphs:{},requests:{},ranges:{}});let p=l.glyphs[o];return p!==void 0?{stack:t,id:o,glyph:p}:!this.url||this._charUsesLocalIdeographFontFamily(o)?(p=l.glyphs[o]=this._drawGlyph(l,t,o),{stack:t,id:o,glyph:p}):yield this._downloadAndCacheRangePromise(t,o)}))}_downloadAndCacheRangePromise(t,o){return c._(this,void 0,void 0,(function*(){const l=this.entries[t],p=Math.floor(o/256);if(l.ranges[p])return{stack:t,id:o,glyph:null};if(!l.requests[p]){const w=It.loadGlyphRange(t,p,this.url,this.requestManager);l.requests[p]=w}try{const w=yield l.requests[p];for(const O in w)l.glyphs[+O]=w[+O];return l.ranges[p]=!0,{stack:t,id:o,glyph:w[o]||null}}catch(w){const O=l.glyphs[o]=this._drawGlyph(l,t,o);return this._warnOnMissingGlyphRange(O,p,o,w),{stack:t,id:o,glyph:O}}}))}_warnOnMissingGlyphRange(t,o,l,p){const w=256*o,O=w+255,I=l.toString(16).padStart(4,"0").toUpperCase();c.w(`Unable to load glyph range ${o}, ${w}-${O}. Rendering codepoint U+${I} locally instead. ${p}`)}_charUsesLocalIdeographFontFamily(t){return!!this.localIdeographFontFamily&&c.q(t)}_drawGlyph(t,o,l){const p=o===Je&&this.localIdeographFontFamily!==""&&this._charUsesLocalIdeographFontFamily(l),w=p?"ideographTinySDF":"tinySDF";t[w]||(t[w]=this._createTinySDF(p?this.localIdeographFontFamily:o));const O=t[w].draw(String.fromCodePoint(l)),I=new RegExp("^\\p{gc=Cf}+$","u").test(String.fromCodePoint(l));return{id:l,bitmap:new c.r({width:O.width||60,height:O.height||60},O.data),metrics:{width:I?0:O.glyphWidth/2||24,height:O.glyphHeight/2||24,left:O.glyphLeft/2+.5||0,top:O.glyphTop/2-27.5||-8,advance:I?0:O.glyphAdvance/2||24,isDoubleResolution:!0}}}_createTinySDF(t){const o=t?t.split(","):[];o.push("sans-serif");const l=o.map((p=>/[-\w]+/.test(p)?p:`'${CSS.escape(p)}'`)).join(",");return new It.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:l,fontWeight:this._fontWeight(o[0]),fontStyle:this._fontStyle(o[0]),lang:this.lang})}_fontStyle(t){return/italic/i.test(t)?"italic":/oblique/i.test(t)?"oblique":"normal"}_fontWeight(t){const o={thin:100,hairline:100,"extra light":200,"ultra light":200,light:300,normal:400,regular:400,medium:500,semibold:600,demibold:600,bold:700,"extra bold":800,"ultra bold":800,black:900,heavy:900,"extra black":950,"ultra black":950};let l;for(const[p,w]of Object.entries(o))new RegExp(`\\b${p}\\b`,"i").test(t)&&(l=`${w}`);return l}destroy(){for(const t in this.entries){const o=this.entries[t];o.tinySDF&&(o.tinySDF=null),o.ideographTinySDF&&(o.ideographTinySDF=null),o.glyphs={},o.requests={},o.ranges={}}this.entries={}}}It.loadGlyphRange=function(g,t,o,l){return c._(this,void 0,void 0,(function*(){const p=256*t,w=p+255,O=l.transformRequest(o.replace("{fontstack}",g).replace("{range}",`${p}-${w}`),"Glyphs"),I=yield c.n(O,new AbortController);if(!I||!I.data)throw new Error(`Could not load glyph range. range: ${t}, ${p}-${w}`);const A={};for(const C of c.o(I.data))A[C.id]=C;return A}))},It.TinySDF=class{constructor({fontSize:g=24,buffer:t=3,radius:o=8,cutoff:l=.25,fontFamily:p="sans-serif",fontWeight:w="normal",fontStyle:O="normal",lang:I=null}={}){this.buffer=t,this.cutoff=l,this.radius=o,this.lang=I;const A=this.size=g+4*t,C=this._createCanvas(A),D=this.ctx=C.getContext("2d",{willReadFrequently:!0});D.font=`${O} ${w} ${g}px ${p}`,D.textBaseline="alphabetic",D.textAlign="left",D.fillStyle="black",this.gridOuter=new Float64Array(A*A),this.gridInner=new Float64Array(A*A),this.f=new Float64Array(A),this.z=new Float64Array(A+1),this.v=new Uint16Array(A)}_createCanvas(g){const t=document.createElement("canvas");return t.width=t.height=g,t}draw(g){const{width:t,actualBoundingBoxAscent:o,actualBoundingBoxDescent:l,actualBoundingBoxLeft:p,actualBoundingBoxRight:w}=this.ctx.measureText(g),O=Math.ceil(o),I=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(w-p))),A=Math.min(this.size-this.buffer,O+Math.ceil(l)),C=I+2*this.buffer,D=A+2*this.buffer,F=Math.max(C*D,0),G=new Uint8ClampedArray(F),Z={data:G,width:C,height:D,glyphWidth:I,glyphHeight:A,glyphTop:O,glyphLeft:0,glyphAdvance:t};if(I===0||A===0)return Z;const{ctx:Q,buffer:ie,gridInner:de,gridOuter:le}=this;this.lang&&(Q.lang=this.lang),Q.clearRect(ie,ie,I,A),Q.fillText(g,ie,ie+O);const pe=Q.getImageData(ie,ie,I,A);le.fill(Ca,0,F),de.fill(0,0,F);for(let be=0;be<A;be++)for(let ce=0;ce<I;ce++){const ye=pe.data[4*(be*I+ce)+3]/255;if(ye===0)continue;const ke=(be+ie)*C+ce+ie;if(ye===1)le[ke]=0,de[ke]=Ca;else{const me=.5-ye;le[ke]=me>0?me*me:0,de[ke]=me<0?me*me:0}}os(le,0,0,C,D,C,this.f,this.v,this.z),os(de,ie,ie,I,A,C,this.f,this.v,this.z);for(let be=0;be<F;be++){const ce=Math.sqrt(le[be])-Math.sqrt(de[be]);G[be]=Math.round(255-255*(ce/this.radius+this.cutoff))}return Z}};class gt{constructor(){this.specification=c.u.light.position}possiblyEvaluate(t,o){return c.F(t.expression.evaluate(o))}interpolate(t,o,l){return{x:c.G.number(t.x,o.x,l),y:c.G.number(t.y,o.y,l),z:c.G.number(t.z,o.z,l)}}}let jt;class Dt extends c.E{constructor(t){super(),jt=jt||new c.t({anchor:new c.D(c.u.light.anchor),position:new gt,color:new c.D(c.u.light.color),intensity:new c.D(c.u.light.intensity)}),this._transitionable=new c.x(jt,void 0),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(t,o={}){if(!this._validate(c.y,t,o))for(const l in t){const p=t[l];l.endsWith(c.z)?this._transitionable.setTransition(l.slice(0,-c.z.length),p):this._transitionable.setValue(l,p)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,o,l){return(!l||l.validate!==!1)&&c.B(this,t.call(c.C,{value:o,style:{glyphs:!0,sprite:!0},styleSpec:c.u}))}}const _e=new c.t({"sky-color":new c.D(c.u.sky["sky-color"]),"horizon-color":new c.D(c.u.sky["horizon-color"]),"fog-color":new c.D(c.u.sky["fog-color"]),"fog-ground-blend":new c.D(c.u.sky["fog-ground-blend"]),"horizon-fog-blend":new c.D(c.u.sky["horizon-fog-blend"]),"sky-horizon-blend":new c.D(c.u.sky["sky-horizon-blend"]),"atmosphere-blend":new c.D(c.u.sky["atmosphere-blend"])});class tt extends c.E{constructor(t){super(),this._transitionable=new c.x(_e,void 0),this.setSky(t),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new c.H(0))}setSky(t,o={}){if(!this._validate(c.J,t,o)){t||(t={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const l in t){const p=t[l];l.endsWith(c.z)?this._transitionable.setTransition(l.slice(0,-c.z.length),p):this._transitionable.setValue(l,p)}}}getSky(){return this._transitionable.serialize()}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,o,l={}){return(l==null?void 0:l.validate)!==!1&&c.B(this,t.call(c.C,c.e({value:o,style:{glyphs:!0,sprite:!0},styleSpec:c.u})))}calculateFogBlendOpacity(t){return t<60?0:t<70?(t-60)/10:1}}class Ot{constructor(t,o){this.width=t,this.height=o,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(t,o){const l=t.join(",")+String(o);return this.dashEntry[l]||(this.dashEntry[l]=this.addDash(t,o)),this.dashEntry[l]}getDashRanges(t,o,l){const p=[];let w=t.length%2==1?-t[t.length-1]*l:0,O=t[0]*l,I=!0;p.push({left:w,right:O,isDash:I,zeroLength:t[0]===0});let A=t[0];for(let C=1;C<t.length;C++){I=!I;const D=t[C];w=A*l,A+=D,O=A*l,p.push({left:w,right:O,isDash:I,zeroLength:D===0})}return p}addRoundDash(t,o,l){const p=o/2;for(let w=-l;w<=l;w++){const O=this.width*(this.nextRow+l+w);let I=0,A=t[I];for(let C=0;C<this.width;C++){C/A.right>1&&(A=t[++I]);const D=Math.abs(C-A.left),F=Math.abs(C-A.right),G=Math.min(D,F);let Z;const Q=w/l*(p+1);if(A.isDash){const ie=p-Math.abs(Q);Z=Math.sqrt(G*G+ie*ie)}else Z=p-Math.sqrt(G*G+Q*Q);this.data[O+C]=Math.max(0,Math.min(255,Z+128))}}}addRegularDash(t){for(let I=t.length-1;I>=0;--I){const A=t[I],C=t[I+1];A.zeroLength?t.splice(I,1):C&&C.isDash===A.isDash&&(C.left=A.left,t.splice(I,1))}const o=t[0],l=t[t.length-1];o.isDash===l.isDash&&(o.left=l.left-this.width,l.right=o.right+this.width);const p=this.width*this.nextRow;let w=0,O=t[w];for(let I=0;I<this.width;I++){I/O.right>1&&(O=t[++w]);const A=Math.abs(I-O.left),C=Math.abs(I-O.right),D=Math.min(A,C);this.data[p+I]=Math.max(0,Math.min(255,(O.isDash?D:-D)+128))}}addDash(t,o){const l=o?7:0,p=2*l+1;if(this.nextRow+p>this.height)return c.w("LineAtlas out of space"),null;let w=0;for(let I=0;I<t.length;I++)w+=t[I];if(w!==0){const I=this.width/w,A=this.getDashRanges(t,this.width,I);o?this.addRoundDash(A,I,l):this.addRegularDash(A)}const O={y:this.nextRow+l,height:2*l,width:w};return this.nextRow+=p,this.dirty=!0,O}bind(t){const o=t.gl;this.texture?(o.bindTexture(o.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,o.texSubImage2D(o.TEXTURE_2D,0,0,0,this.width,this.height,o.ALPHA,o.UNSIGNED_BYTE,this.data))):(this.texture=o.createTexture(),o.bindTexture(o.TEXTURE_2D,this.texture),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.REPEAT),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.REPEAT),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texImage2D(o.TEXTURE_2D,0,o.ALPHA,this.width,this.height,0,o.ALPHA,o.UNSIGNED_BYTE,this.data))}}const St="maplibre_preloaded_worker_pool";class Ct{constructor(){this.active={}}acquire(t){if(!this.workers)for(this.workers=[];this.workers.length<Ct.workerCount;)this.workers.push(new Worker(c.c.WORKER_URL));return this.active[t]=!0,this.workers.slice()}release(t){delete this.active[t],this.numActive()===0&&(this.workers.forEach((o=>{o.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[St]}numActive(){return Object.keys(this.active).length}}const Ht=Math.floor(ft.hardwareConcurrency/2);let da,Ma;function is(){return da||(da=new Ct),da}Ct.workerCount=c.K(globalThis)?Math.max(Math.min(Ht,3),1):1;class xn{constructor(t,o){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=o;const l=this.workerPool.acquire(o);for(let p=0;p<l.length;p++){const w=new c.L(l[p],o);w.name=`Worker ${p}`,this.actors.push(w)}if(!this.actors.length)throw new Error("No actors found")}broadcast(t,o){const l=[];for(const p of this.actors)l.push(p.sendAsync({type:t,data:o}));return Promise.all(l)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(t=!0){this.actors.forEach((o=>{o.remove()})),this.actors=[],t&&this.workerPool.release(this.id)}registerMessageHandler(t,o){for(const l of this.actors)l.registerMessageHandler(t,o)}unregisterMessageHandler(t){for(const o of this.actors)o.unregisterMessageHandler(t)}}function _i(){return Ma||(Ma=new xn(is(),c.M),Ma.registerMessageHandler("GR",((g,t,o)=>c.m(t,o)))),Ma}function Tn(g,t){const o=c.N();return c.O(o,o,[1,1,0]),c.Q(o,o,[.5*g.width,.5*g.height,1]),g.calculatePosMatrix?c.S(o,o,g.calculatePosMatrix(t.toUnwrapped())):o}function kr(g,t,o,l,p,w,O){var I;const A=(function(G,Z,Q){if(G)for(const ie of G){const de=Z[ie];if(de&&de.source===Q&&de.type==="fill-extrusion")return!0}else for(const ie in Z){const de=Z[ie];if(de.source===Q&&de.type==="fill-extrusion")return!0}return!1})((I=p==null?void 0:p.layers)!==null&&I!==void 0?I:null,t,g.id),C=w.maxPitchScaleFactor(),D=g.tilesIn(l,C,A);D.sort(As);const F=[];for(const G of D)F.push({wrappedTileID:G.tileID.wrapped().key,queryResults:G.tile.queryRenderedFeatures(t,o,g.getState(),G.queryGeometry,G.cameraQueryGeometry,G.scale,p,w,C,Tn(w,G.tileID),O?(Z,Q)=>O(G.tileID,Z,Q):void 0)});return(function(G,Z){for(const Q in G)for(const ie of G[Q])Yn(ie,Z);return G})((function(G){const Z={},Q={};for(const ie of G){const de=ie.queryResults,le=ie.wrappedTileID,pe=Q[le]=Q[le]||{};for(const be in de){const ce=de[be],ye=pe[be]=pe[be]||{},ke=Z[be]=Z[be]||[];for(const me of ce)ye[me.featureIndex]||(ye[me.featureIndex]=!0,ke.push(me))}}return Z})(F),g)}function As(g,t){const o=g.tileID,l=t.tileID;return o.overscaledZ-l.overscaledZ||o.canonical.y-l.canonical.y||o.wrap-l.wrap||o.canonical.x-l.canonical.x}function Yn(g,t){const o=g.feature,l=t.getFeatureState(o.layer["source-layer"],o.id);o.source=o.layer.source,o.layer["source-layer"]&&(o.sourceLayer=o.layer["source-layer"]),o.state=l}function Po(g,t,o){return c._(this,void 0,void 0,(function*(){let l=g;if(g.url?l=(yield c.j(t.transformRequest(g.url,"Source"),o)).data:yield ft.frameAsync(o),!l)return null;const p=c.U(c.e(l,g),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in l&&l.vector_layers&&(p.vectorLayerIds=l.vector_layers.map((w=>w.id))),p}))}class vs{constructor(t,o){t&&(o?this.setSouthWest(t).setNorthEast(o):Array.isArray(t)&&(t.length===4?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1])))}setNorthEast(t){return this._ne=t instanceof c.V?new c.V(t.lng,t.lat):c.V.convert(t),this}setSouthWest(t){return this._sw=t instanceof c.V?new c.V(t.lng,t.lat):c.V.convert(t),this}extend(t){const o=this._sw,l=this._ne;let p,w;if(t instanceof c.V)p=t,w=t;else{if(!(t instanceof vs))return Array.isArray(t)?t.length===4||t.every(Array.isArray)?this.extend(vs.convert(t)):this.extend(c.V.convert(t)):t&&("lng"in t||"lon"in t)&&"lat"in t?this.extend(c.V.convert(t)):this;if(p=t._sw,w=t._ne,!p||!w)return this}return o||l?(o.lng=Math.min(p.lng,o.lng),o.lat=Math.min(p.lat,o.lat),l.lng=Math.max(w.lng,l.lng),l.lat=Math.max(w.lat,l.lat)):(this._sw=new c.V(p.lng,p.lat),this._ne=new c.V(w.lng,w.lat)),this}getCenter(){return new c.V((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new c.V(this.getWest(),this.getNorth())}getSouthEast(){return new c.V(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:o,lat:l}=c.V.convert(t);let p=this._sw.lng<=o&&o<=this._ne.lng;return this._sw.lng>this._ne.lng&&(p=this._sw.lng>=o&&o>=this._ne.lng),this._sw.lat<=l&&l<=this._ne.lat&&p}intersects(t){if(!((t=vs.convert(t)).getNorth()>=this.getSouth()&&t.getSouth()<=this.getNorth()))return!1;const o=Math.abs(this.getEast()-this.getWest()),l=Math.abs(t.getEast()-t.getWest());if(o>=360||l>=360)return!0;const p=c.W(this.getWest(),-180,180),w=c.W(this.getEast(),-180,180),O=c.W(t.getWest(),-180,180),I=c.W(t.getEast(),-180,180),A=p>=w,C=O>=I;return!(!A||!C)||(A?I>=p||O<=w:C?w>=O||p<=I:O<=w&&I>=p)}static convert(t){return t instanceof vs?t:t&&new vs(t)}static fromLngLat(t,o=0){const l=360*o/40075017,p=l/Math.cos(Math.PI/180*t.lat);return new vs(new c.V(t.lng-p,t.lat-l),new c.V(t.lng+p,t.lat+l))}adjustAntiMeridian(){const t=new c.V(this._sw.lng,this._sw.lat),o=new c.V(this._ne.lng,this._ne.lat);return new vs(t,t.lng>o.lng?new c.V(o.lng+360,o.lat):o)}}class Ro{constructor(t,o,l){this.bounds=vs.convert(this.validateBounds(t)),this.minzoom=o||0,this.maxzoom=l||24}validateBounds(t){return Array.isArray(t)&&t.length===4?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}contains(t){const o=Math.pow(2,t.z),l=Math.floor(c.Y(this.bounds.getWest())*o),p=Math.floor(c.X(this.bounds.getNorth())*o),w=Math.ceil(c.Y(this.bounds.getEast())*o),O=Math.ceil(c.X(this.bounds.getSouth())*o);return t.x>=l&&t.x<w&&t.y>=p&&t.y<O}}class Zi extends c.E{constructor(t,o,l,p){if(super(),this.id=t,this.dispatcher=l,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,c.e(this,c.U(o,["url","scheme","tileSize","promoteId","encoding"])),this._options=c.e({type:"vector"},o),this._collectResourceTiming=o.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(p)}load(){return c._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new c.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const t=yield Po(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.tileManagers[this.id].clearTiles(),t&&(c.e(this,t),t.bounds&&(this.tileBounds=new Ro(t.bounds,this.minzoom,this.maxzoom)),this.fire(new c.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.l("data",{dataType:"source",sourceDataType:"content"})))}catch(t){this._tileJSONRequest=null,this._loaded=!0,c.Z(t)||this.fire(new c.k(t))}}))}loaded(){return this._loaded}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}onAdd(t){this.map=t,this.load()}setSourceProperty(t){this._tileJSONRequest&&this._tileJSONRequest.abort(),t(),this.load()}setTiles(t){return this.setSourceProperty((()=>{this._options.tiles=t})),this}setUrl(t){return this.setSourceProperty((()=>{this.url=t,this._options.url=t})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return c.e({},this._options)}loadTile(t){return c._(this,void 0,void 0,(function*(){const o=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),l={request:this.map._requestManager.transformRequest(o,"Tile"),uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,encoding:this.encoding,overzoomParameters:this._getOverzoomParameters(t)};l.request.collectResourceTiming=this._collectResourceTiming;let p="RT";if(t.actor&&t.state!=="expired"){if(t.state==="loading")return new Promise(((w,O)=>{t.reloadPromise={resolve:w,reject:O}}))}else t.actor=this.dispatcher.getActor(),p="LT";t.abortController=new AbortController;try{const w=yield t.actor.sendAsync({type:p,data:l},t.abortController);if(delete t.abortController,t.aborted)return;this._afterTileLoadWorkerResponse(t,w)}catch(w){if(delete t.abortController,t.aborted)return;if(w&&w.status!==404)throw w;this._afterTileLoadWorkerResponse(t,null)}}))}_getOverzoomParameters(t){if(t.tileID.canonical.z<=this.maxzoom||this.map._zoomLevelsToOverscale===void 0)return;const o=t.tileID.scaledTo(this.maxzoom).canonical,l=o.url(this.tiles,this.map.getPixelRatio(),this.scheme);return{maxZoomTileID:o,overzoomRequest:this.map._requestManager.transformRequest(l,"Tile")}}_afterTileLoadWorkerResponse(t,o){if(o&&o.resourceTiming&&(t.resourceTiming=o.resourceTiming),o&&this.map._refreshExpiredTiles&&t.setExpiryData(o),t.loadVectorData(o,this.map.painter),t.reloadPromise){const l=t.reloadPromise;t.reloadPromise=null,this.loadTile(t).then(l.resolve).catch(l.reject)}}abortTile(t){return c._(this,void 0,void 0,(function*(){t.abortController&&(t.abortController.abort(),delete t.abortController),t.actor&&(yield t.actor.sendAsync({type:"AT",data:{uid:t.uid,type:this.type,source:this.id}}))}))}unloadTile(t){return c._(this,void 0,void 0,(function*(){t.unloadVectorData(),t.actor&&(yield t.actor.sendAsync({type:"RMT",data:{uid:t.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class Xi extends c.E{constructor(t,o,l,p){super(),this.id=t,this.dispatcher=l,this.setEventedParent(p),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=c.e({type:"raster"},o),c.e(this,c.U(o,["url","scheme","tileSize"]))}load(){return c._(this,arguments,void 0,(function*(t=!1){this._loaded=!1,this.fire(new c.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const o=yield Po(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,o&&(c.e(this,o),o.bounds&&(this.tileBounds=new Ro(o.bounds,this.minzoom,this.maxzoom)),this.fire(new c.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:t})))}catch(o){this._tileJSONRequest=null,this._loaded=!0,c.Z(o)||this.fire(new c.k(o))}}))}loaded(){return this._loaded}onAdd(t){this.map=t,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(t){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),t(),this.load(!0)}setTiles(t){return this.setSourceProperty((()=>{this._options.tiles=t})),this}setUrl(t){return this.setSourceProperty((()=>{this.url=t,this._options.url=t})),this}serialize(){return c.e({},this._options)}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(t){return c._(this,void 0,void 0,(function*(){const o=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);t.abortController=new AbortController;try{const l=yield zt.getImage(this.map._requestManager.transformRequest(o,"Tile"),t.abortController,this.map._refreshExpiredTiles);if(delete t.abortController,t.aborted)return void(t.state="unloaded");if(l&&l.data){this.map._refreshExpiredTiles&&(l.cacheControl||l.expires)&&t.setExpiryData({cacheControl:l.cacheControl,expires:l.expires});const p=this.map.painter.context,w=p.gl,O=l.data;t.texture=this.map.painter.getTileTexture(O.width),t.texture?t.texture.update(O,{useMipmap:!0}):(t.texture=new c.T(p,O,w.RGBA,{useMipmap:!0}),t.texture.bind(w.LINEAR,w.CLAMP_TO_EDGE,w.LINEAR_MIPMAP_NEAREST)),t.state="loaded"}}catch(l){if(delete t.abortController,t.aborted)t.state="unloaded";else if(l)throw t.state="errored",l}}))}abortTile(t){return c._(this,void 0,void 0,(function*(){t.abortController&&(t.abortController.abort(),delete t.abortController)}))}unloadTile(t){return c._(this,void 0,void 0,(function*(){t.texture&&this.map.painter.saveTileTexture(t.texture)}))}hasTransition(){return!1}}class Ho extends Xi{constructor(t,o,l,p){super(t,o,l,p),this.type="raster-dem",this.maxzoom=22,this._options=c.e({type:"raster-dem"},o),this.encoding=o.encoding||"mapbox",this.redFactor=o.redFactor,this.greenFactor=o.greenFactor,this.blueFactor=o.blueFactor,this.baseShift=o.baseShift}loadTile(t){return c._(this,void 0,void 0,(function*(){const o=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),l=this.map._requestManager.transformRequest(o,"Tile");t.neighboringTiles=this._getNeighboringTiles(t.tileID),t.abortController=new AbortController;try{const p=yield zt.getImage(l,t.abortController,this.map._refreshExpiredTiles);if(delete t.abortController,t.aborted)return void(t.state="unloaded");if(p&&p.data){const w=p.data;this.map._refreshExpiredTiles&&(p.cacheControl||p.expires)&&t.setExpiryData({cacheControl:p.cacheControl,expires:p.expires});const O=c.b(w)&&c.$()?w:yield this.readImageNow(w),I={type:this.type,uid:t.uid,source:this.id,rawImageData:O,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!t.actor||t.state==="expired"){t.actor=this.dispatcher.getActor();const A=yield t.actor.sendAsync({type:"LDT",data:I});t.dem=A,t.needsHillshadePrepare=!0,t.needsTerrainPrepare=!0,t.state="loaded"}}}catch(p){if(delete t.abortController,t.aborted)t.state="unloaded";else if(p)throw t.state="errored",p}}))}readImageNow(t){return c._(this,void 0,void 0,(function*(){if(typeof VideoFrame!="undefined"&&c.a0()){const o=t.width+2,l=t.height+2;try{return new c.R({width:o,height:l},yield c.a1(t,-1,-1,o,l))}catch(p){}}return ft.getImageData(t,1)}))}_getNeighboringTiles(t){const o=t.canonical,l=Math.pow(2,o.z),p=(o.x-1+l)%l,w=o.x===0?t.wrap-1:t.wrap,O=(o.x+1+l)%l,I=o.x+1===l?t.wrap+1:t.wrap,A={};return A[new c.a2(t.overscaledZ,w,o.z,p,o.y).key]={backfilled:!1},A[new c.a2(t.overscaledZ,I,o.z,O,o.y).key]={backfilled:!1},o.y>0&&(A[new c.a2(t.overscaledZ,w,o.z,p,o.y-1).key]={backfilled:!1},A[new c.a2(t.overscaledZ,t.wrap,o.z,o.x,o.y-1).key]={backfilled:!1},A[new c.a2(t.overscaledZ,I,o.z,O,o.y-1).key]={backfilled:!1}),o.y+1<l&&(A[new c.a2(t.overscaledZ,w,o.z,p,o.y+1).key]={backfilled:!1},A[new c.a2(t.overscaledZ,t.wrap,o.z,o.x,o.y+1).key]={backfilled:!1},A[new c.a2(t.overscaledZ,I,o.z,O,o.y+1).key]={backfilled:!1}),A}unloadTile(t){return c._(this,void 0,void 0,(function*(){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&(yield t.actor.sendAsync({type:"RDT",data:{type:this.type,uid:t.uid,source:this.id}}))}))}}function No(g){return g.type==="GeometryCollection"?g.geometries.map((t=>t.coordinates)).flat(1/0):g.coordinates.flat(1/0)}function Jr(g){const t=new vs;let o;switch(g.type){case"FeatureCollection":o=g.features.map((l=>No(l.geometry))).flat(1/0);break;case"Feature":o=No(g.geometry);break;default:o=No(g)}if(o.length==0)return t;for(let l=0;l<o.length-1;l+=2)t.extend([o[l],o[l+1]]);return t}class wn extends c.E{constructor(t,o,l,p){super(),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:o.data},this.actor=l.getActor(),this.setEventedParent(p),this._data=typeof o.data=="string"?{url:o.data}:{geojson:o.data},this._options=c.e({},o),this._collectResourceTiming=o.collectResourceTiming,o.maxzoom!==void 0&&(this.maxzoom=o.maxzoom),o.type&&(this.type=o.type),o.attribution&&(this.attribution=o.attribution),this.promoteId=o.promoteId,o.clusterMaxZoom!==void 0&&this.maxzoom<=o.clusterMaxZoom&&c.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${o.clusterMaxZoom}".`),this.workerOptions=c.e({source:this.id,cluster:o.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(o.buffer!==void 0?o.buffer:128),tolerance:this._pixelsToTileUnits(o.tolerance!==void 0?o.tolerance:.375),extent:c.a5,maxZoom:this.maxzoom,lineMetrics:o.lineMetrics||!1,generateId:o.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(o.clusterMaxZoom),minPoints:Math.max(2,o.clusterMinPoints||2),extent:c.a5,radius:this._pixelsToTileUnits(o.clusterRadius||50),log:!1,generateId:o.generateId||!1},clusterProperties:o.clusterProperties,filter:o.filter},o.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_hasPendingWorkerUpdate(){return this._pendingWorkerUpdate.data!==void 0||this._pendingWorkerUpdate.diff!==void 0||this._pendingWorkerUpdate.optionsChanged}_pixelsToTileUnits(t){return t*(c.a5/this.tileSize)}_getClusterMaxZoom(t){const o=t?Math.round(t):this.maxzoom-1;return Number.isInteger(t)||t===void 0||c.w(`Integer expected for option 'clusterMaxZoom': provided value "${t}" rounded to "${o}"`),o}load(){return c._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(t){this.map=t,this.load()}setData(t,o){this._data=typeof t=="string"?{url:t}:{geojson:t},this._pendingWorkerUpdate={data:t};const l=this._updateWorkerData();return o?l:this}updateData(t,o){this._pendingWorkerUpdate.diff=c.a6(this._pendingWorkerUpdate.diff,t);const l=this._updateWorkerData();return o?l:this}getData(){return c._(this,void 0,void 0,(function*(){const t=c.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:t})}))}getBounds(){return c._(this,void 0,void 0,(function*(){return Jr(yield this.getData())}))}setClusterOptions(t){return this.workerOptions.cluster=t.cluster,t.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(t.clusterRadius)),t.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(t.clusterMaxZoom)),this._pendingWorkerUpdate.optionsChanged=!0,this._updateWorkerData(),this}getClusterExpansionZoom(t){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:t,source:this.id}})}getClusterChildren(t){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:t,source:this.id}})}getClusterLeaves(t,o,l){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:t,limit:o,offset:l}})}_updateWorkerData(){return c._(this,void 0,void 0,(function*(){if(this._isUpdatingWorker)return;if(!this._hasPendingWorkerUpdate())return void c.w(`No pending worker updates for GeoJSONSource ${this.id}.`);const{data:t,diff:o}=this._pendingWorkerUpdate,l=c.e({type:this.type},this.workerOptions);t!==void 0?(typeof t=="string"?(l.request=this.map._requestManager.transformRequest(ft.resolveURL(t),"Source"),l.request.collectResourceTiming=this._collectResourceTiming):l.data=t,this._pendingWorkerUpdate.data=void 0):o&&(l.dataDiff=o,this._pendingWorkerUpdate.diff=void 0),this._pendingWorkerUpdate.optionsChanged=void 0,this._isUpdatingWorker=!0,this.fire(new c.l("dataloading",{dataType:"source"}));try{const p=yield this.actor.sendAsync({type:"LD",data:l});if(this._isUpdatingWorker=!1,this._removed||p.abandoned)return void this.fire(new c.l("dataabort",{dataType:"source"}));p.data&&(this._data={geojson:p.data});const w=this._applyDiffToSource(o),O=this._getShouldReloadTileOptions(w);let I=null;p.resourceTiming&&p.resourceTiming[this.id]&&(I=p.resourceTiming[this.id].slice(0));const A={dataType:"source"};this._collectResourceTiming&&I&&I.length>0&&c.e(A,{resourceTiming:I}),this.fire(new c.l("data",Object.assign(Object.assign({},A),{sourceDataType:"metadata"}))),this.fire(new c.l("data",Object.assign(Object.assign({},A),{sourceDataType:"content",shouldReloadTileOptions:O})))}catch(p){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new c.l("dataabort",{dataType:"source"}));this.fire(new c.k(p))}finally{this._hasPendingWorkerUpdate()&&this._updateWorkerData()}}))}_applyDiffToSource(t){if(!t)return;const o=typeof this.promoteId=="string"?this.promoteId:void 0;if(!this._data.url&&!this._data.updateable){const p=c.a7(this._data.geojson,o);if(!p)throw new Error(`GeoJSONSource "${this.id}": GeoJSON data is not compatible with updateData`);this._data={updateable:p}}if(!this._data.updateable)return;const l=c.a8(this._data.updateable,t,o);return t.removeAll||this._options.cluster?void 0:l}_getShouldReloadTileOptions(t){if(t)return{affectedBounds:t.filter(Boolean).map((o=>Jr(o)))}}shouldReloadTile(t,{affectedBounds:o}){if(t.state==="loading")return!0;if(t.state==="unloaded")return!1;const{buffer:l,extent:p}=this.workerOptions.geojsonVtOptions,w=(function({x:O,y:I,z:A},C=0){const D=c.a3((O-C)/Math.pow(2,A)),F=c.a4((I+1+C)/Math.pow(2,A)),G=c.a3((O+1+C)/Math.pow(2,A)),Z=c.a4((I-C)/Math.pow(2,A));return new vs([D,F],[G,Z])})(t.tileID.canonical,l/p);for(const O of o)if(w.intersects(O))return!0;return!1}loaded(){return!this._isUpdatingWorker&&!this._hasPendingWorkerUpdate()}loadTile(t){return c._(this,void 0,void 0,(function*(){const o=t.actor?"RT":"LT";t.actor=this.actor;const l={type:this.type,uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};t.abortController=new AbortController;const p=yield this.actor.sendAsync({type:o,data:l},t.abortController);delete t.abortController,t.unloadVectorData(),t.aborted||t.loadVectorData(p,this.map.painter,o==="RT")}))}abortTile(t){return c._(this,void 0,void 0,(function*(){t.abortController&&(t.abortController.abort(),delete t.abortController),t.aborted=!0}))}unloadTile(t){return c._(this,void 0,void 0,(function*(){t.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:t.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return c.e({},this._options,{type:this.type,data:this._data.updateable?{type:"FeatureCollection",features:Array.from(this._data.updateable.values())}:this._data.url||this._data.geojson})}hasTransition(){return!1}}class ro extends c.E{constructor(t,o,l,p){super(),this.flippedWindingOrder=!1,this.id=t,this.dispatcher=l,this.coordinates=o.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(p),this.options=o}load(t){return c._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new c.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const o=yield zt.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,o&&o.data&&(this.image=o.data,t&&(this.coordinates=t),this._finishLoading())}catch(o){this._request=null,this._loaded=!0,c.Z(o)||this.fire(new c.k(o))}}))}loaded(){return this._loaded}updateImage(t){return t.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=t.url,this.load(t.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new c.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(t){this.map=t,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(t){this.coordinates=t;const o=t.map(c.a9.fromLngLat);var l;return this.tileID=(function(p){const w=c.aa.fromPoints(p),O=w.width(),I=w.height(),A=Math.max(O,I),C=Math.max(0,Math.floor(-Math.log(A)/Math.LN2)),D=Math.pow(2,C);return new c.ac(C,Math.floor((w.minX+w.maxX)/2*D),Math.floor((w.minY+w.maxY)/2*D))})(o),this.terrainTileRanges=this._getOverlappingTileRanges(o),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=o.map((p=>this.tileID.getTilePoint(p)._round())),this.flippedWindingOrder=((l=this.tileCoords)[1].x-l[0].x)*(l[2].y-l[0].y)-(l[1].y-l[0].y)*(l[2].x-l[0].x)<0,this.fire(new c.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const t=this.map.painter.context,o=t.gl;this.texture||(this.texture=new c.T(t,this.image,o.RGBA),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE));let l=!1;for(const p in this.tiles){const w=this.tiles[p];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture,l=!0)}l&&this.fire(new c.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(t){return c._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={}):t.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(t){const{minX:o,minY:l,maxX:p,maxY:w}=c.aa.fromPoints(t),O={};for(let I=0;I<=c.ab;I++){const A=Math.pow(2,I),C=Math.floor(o*A),D=Math.floor(l*A),F=Math.floor(p*A),G=Math.floor(w*A),Z=(C%A+A)%A,Q=F%A,ie=Math.floor(C/A),de=Math.floor(F/A);O[I]={minWrap:ie,maxWrap:de,minTileXWrapped:Z,maxTileXWrapped:Q,minTileY:D,maxTileY:G}}return O}}class Re extends ro{constructor(t,o,l,p){super(t,o,l,p),this.roundZoom=!0,this.type="video",this.options=o}load(){return c._(this,void 0,void 0,(function*(){this._loaded=!1;const t=this.options;this.urls=[];for(const o of t.urls)this.urls.push(this.map._requestManager.transformRequest(o,"Source").url);try{const o=yield c.ad(this.urls);if(this._loaded=!0,!o)return;this.video=o,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(o){this.fire(new c.k(o))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(t){if(this.video){const o=this.video.seekable;t<o.start(0)||t>o.end(0)?this.fire(new c.k(new c.ae(`sources.${this.id}`,null,`Playback for this video can be set only between the ${o.start(0)} and ${o.end(0)}-second mark.`))):this.video.currentTime=t}}getVideo(){return this.video}onAdd(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const t=this.map.painter.context,o=t.gl;this.texture?this.video.paused||(this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE),o.texSubImage2D(o.TEXTURE_2D,0,0,0,o.RGBA,o.UNSIGNED_BYTE,this.video)):(this.texture=new c.T(t,this.video,o.RGBA),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE));let l=!1;for(const p in this.tiles){const w=this.tiles[p];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture,l=!0)}l&&this.fire(new c.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class K extends ro{constructor(t,o,l,p){super(t,o,l,p),o.coordinates?Array.isArray(o.coordinates)&&o.coordinates.length===4&&!o.coordinates.some((w=>!Array.isArray(w)||w.length!==2||w.some((O=>typeof O!="number"))))||this.fire(new c.k(new c.ae(`sources.${t}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new c.k(new c.ae(`sources.${t}`,null,'missing required property "coordinates"'))),o.animate&&typeof o.animate!="boolean"&&this.fire(new c.k(new c.ae(`sources.${t}`,null,'optional "animate" property must be a boolean value'))),o.canvas?typeof o.canvas=="string"||o.canvas instanceof HTMLCanvasElement||this.fire(new c.k(new c.ae(`sources.${t}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new c.k(new c.ae(`sources.${t}`,null,'missing required property "canvas"'))),this.options=o,this.animate=o.animate===void 0||o.animate}load(){return c._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new c.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const o=this.map.painter.context,l=o.gl;this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):(this.texture=new c.T(o,this.canvas,l.RGBA,{premultiply:!0}),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE));let p=!1;for(const w in this.tiles){const O=this.tiles[w];O.state!=="loaded"&&(O.state="loaded",O.texture=this.texture,p=!0)}p&&this.fire(new c.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",animate:this.animate,canvas:this.options.canvas,coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const t of[this.canvas.width,this.canvas.height])if(isNaN(t)||t<=0)return!0;return!1}}const $={},ne=g=>{switch(g){case"geojson":return wn;case"image":return ro;case"raster":return Xi;case"raster-dem":return Ho;case"vector":return Zi;case"video":return Re;case"canvas":return K}return $[g]},Oe="RTLPluginLoaded";class Ie extends c.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=_i()}_syncState(t){return this.status=t,this.dispatcher.broadcast("SRPS",{pluginStatus:t,pluginURL:this.url}).catch((o=>{throw this.status="error",o}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(t){return c._(this,arguments,void 0,(function*(o,l=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=ft.resolveURL(o),!this.url)throw new Error(`requested url ${o} is invalid`);if(this.status==="unavailable"){if(!l)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return c._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new c.l(Oe))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let je=null;function ze(){return je||(je=new Ie),je}var Se,Ue;(function(g){g[g.Base=0]="Base",g[g.Parent=1]="Parent"})(Se||(Se={})),(function(g){g[g.Departing=0]="Departing",g[g.Incoming=1]="Incoming"})(Ue||(Ue={}));class nt{constructor(t,o){this.timeAdded=0,this.fadeEndTime=0,this.fadeOpacity=1,this.tileID=t,this.uid=c.af(),this.uses=0,this.tileSize=o,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}isRenderable(t){return this.hasData()&&(!this.fadeEndTime||this.fadeOpacity>0)&&(t||!this.holdingForSymbolFade())}setCrossFadeLogic({fadingRole:t,fadingDirection:o,fadingParentID:l,fadeEndTime:p}){this.resetFadeLogic(),this.fadingRole=t,this.fadingDirection=o,this.fadingParentID=l,this.fadeEndTime=p}setSelfFadeLogic(t){this.resetFadeLogic(),this.selfFading=!0,this.fadeEndTime=t}resetFadeLogic(){this.fadingRole=null,this.fadingDirection=null,this.fadingParentID=null,this.selfFading=!1,this.timeAdded=it(),this.fadeEndTime=0,this.fadeOpacity=1}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(t){this.demTexture&&t.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(t,o,l){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData,this.latestFeatureIndex.encoding=t.encoding):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData,this.latestFeatureIndex.encoding=this.latestEncoding)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=(function(p,w){const O={};if(!w)return O;for(const I of p){const A=I.layerIds.map((C=>w.getLayer(C))).filter(Boolean);if(A.length!==0){I.layers=A,I.stateDependentLayerIds&&(I.stateDependentLayers=I.stateDependentLayerIds.map((C=>A.filter((D=>D.id===C))[0])));for(const C of A)O[C.id]=I}}return O})(t.buckets,o==null?void 0:o.style),this.hasSymbolBuckets=!1;for(const p in this.buckets){const w=this.buckets[p];if(w instanceof c.ah){if(this.hasSymbolBuckets=!0,!l)break;w.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const p in this.buckets){const w=this.buckets[p];if(w instanceof c.ah&&w.hasRTLText){this.hasRTLText=!0,ze().lazyLoad();break}}this.queryPadding=0;for(const p in this.buckets){const w=this.buckets[p];this.queryPadding=Math.max(this.queryPadding,o.style.getLayer(p).queryRadius(w))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage),this.dashPositions=t.dashPositions}else this.collisionBoxArray=new c.ag}unloadVectorData(){for(const t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.dashPositions&&(this.dashPositions=null),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(t){return this.buckets[t.id]}upload(t){for(const l in this.buckets){const p=this.buckets[l];p.uploadPending()&&p.upload(t)}const o=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new c.T(t,this.imageAtlas.image,o.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new c.T(t,this.glyphAtlasImage,o.ALPHA),this.glyphAtlasImage=null)}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}queryRenderedFeatures(t,o,l,p,w,O,I,A,C,D,F){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:p,cameraQueryGeometry:w,scale:O,tileSize:this.tileSize,pixelPosMatrix:D,transform:A,params:I,queryPadding:this.queryPadding*C,getElevation:F},t,o,l):{}}querySourceFeatures(t,o){const l=this.latestFeatureIndex;if(!l||!l.rawTileData)return;const p=l.loadVTLayers(),w=o&&o.sourceLayer?o.sourceLayer:"",O=p[c.ai]||p[w];if(!O)return;const I=c.aj(o==null?void 0:o.filter,o==null?void 0:o.globalState),{z:A,x:C,y:D}=this.tileID.canonical,F={z:A,x:C,y:D};for(let G=0;G<O.length;G++){const Z=O.feature(G);if(I.needGeometry){const de=c.ak(Z,!0);if(!I.filter(new c.H(this.tileID.overscaledZ),de,this.tileID.canonical))continue}else if(!I.filter(new c.H(this.tileID.overscaledZ),Z))continue;const Q=l.getId(Z,w),ie=new c.al(Z,A,C,D,Q);ie.tile=F,t.push(ie)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(t){const o=this.expirationTime;if(t.cacheControl){const l=c.am(t.cacheControl);l["max-age"]&&(this.expirationTime=Date.now()+1e3*l["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){const l=Date.now();let p=!1;if(this.expirationTime>l)p=!1;else if(o)if(this.expirationTime<o)p=!0;else{const w=this.expirationTime-o;w?this.expirationTime=l+Math.max(w,3e4):p=!0}else p=!0;p?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(t,o){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(t).length===0)return;const l=this.latestFeatureIndex.loadVTLayers();for(const p in this.buckets){if(!o.style.hasLayer(p))continue;const w=this.buckets[p],O=w.layers[0].sourceLayer||c.ai,I=l[O],A=t[O];if(!I||!A||Object.keys(A).length===0)continue;w.update(A,I,this.imageAtlas&&this.imageAtlas.patternPositions||{},this.dashPositions||{});const C=o&&o.style&&o.style.getLayer(p);C&&(this.queryPadding=Math.max(this.queryPadding,C.queryRadius(w)))}}holdingForSymbolFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<it()}clearSymbolFadeHold(){this.symbolFadeHoldUntil=void 0}setSymbolHoldDuration(t){this.symbolFadeHoldUntil=it()+t}setDependencies(t,o){const l={};for(const p of o)l[p]=!0;this.dependencies[t]=l}hasDependency(t,o){for(const l of t){const p=this.dependencies[l];if(p){for(const w of o)if(p[w])return!0}}return!1}}class st{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(t,o,l){const p=String(o);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][p]=this.stateChanges[t][p]||{},c.e(this.stateChanges[t][p],l),this.deletedStates[t]===null){this.deletedStates[t]={};for(const w in this.state[t])w!==p&&(this.deletedStates[t][w]=null)}else if(this.deletedStates[t]&&this.deletedStates[t][p]===null){this.deletedStates[t][p]={};for(const w in this.state[t][p])l[w]||(this.deletedStates[t][p][w]=null)}else for(const w in l)this.deletedStates[t]&&this.deletedStates[t][p]&&this.deletedStates[t][p][w]===null&&delete this.deletedStates[t][p][w]}removeFeatureState(t,o,l){if(this.deletedStates[t]===null)return;const p=String(o);if(this.deletedStates[t]=this.deletedStates[t]||{},l&&o!==void 0)this.deletedStates[t][p]!==null&&(this.deletedStates[t][p]=this.deletedStates[t][p]||{},this.deletedStates[t][p][l]=null);else if(o!==void 0)if(this.stateChanges[t]&&this.stateChanges[t][p])for(l in this.deletedStates[t][p]={},this.stateChanges[t][p])this.deletedStates[t][p][l]=null;else this.deletedStates[t][p]=null;else this.deletedStates[t]=null}getState(t,o){const l=String(o),p=c.e({},(this.state[t]||{})[l],(this.stateChanges[t]||{})[l]);if(this.deletedStates[t]===null)return{};if(this.deletedStates[t]){const w=this.deletedStates[t][o];if(w===null)return{};for(const O in w)delete p[O]}return p}initializeTileState(t,o){t.setFeatureState(this.state,o)}coalesceChanges(t,o){const l={};for(const p in this.stateChanges){this.state[p]=this.state[p]||{};const w={};for(const O in this.stateChanges[p])this.state[p][O]||(this.state[p][O]={}),c.e(this.state[p][O],this.stateChanges[p][O]),w[O]=this.state[p][O];l[p]=w}for(const p in this.deletedStates){this.state[p]=this.state[p]||{};const w={};if(this.deletedStates[p]===null)for(const O in this.state[p])w[O]={},this.state[p][O]={};else for(const O in this.deletedStates[p]){if(this.deletedStates[p][O]===null)this.state[p][O]={};else for(const I of Object.keys(this.deletedStates[p][O]))delete this.state[p][O][I];w[O]=this.state[p][O]}l[p]=l[p]||{},c.e(l[p],w)}this.stateChanges={},this.deletedStates={},Object.keys(l).length!==0&&t.setFeatureState(l,o)}}const Bt=89.25;function Ut(g,t){const o=c.an(t.lat,-c.ao,c.ao);return new c.P(c.Y(t.lng)*g,c.X(o)*g)}function Jt(g,t){return new c.a9(t.x/g,t.y/g).toLngLat()}function Ga(g){return g.cameraToCenterDistance*Math.min(.85*Math.tan(c.ap(90-g.pitch)),Math.tan(c.ap(Bt-g.pitch)))}function Ea(g,t){const o=g.canonical,l=t/c.aq(o.z),p=o.x+Math.pow(2,o.z)*g.wrap,w=c.ar(new Float64Array(16));return c.O(w,w,[p*l,o.y*l,0]),c.Q(w,w,[l/c.a5,l/c.a5,1]),w}function Ne(g,t,o,l,p){const w=c.a9.fromLngLat(g,t),O=p*c.as(1,g.lat),{x:I,y:A,z:C}=Za(o,l);return new c.a9(w.x+O*-I,w.y+O*-A,w.z+O*-C)}function Za(g,t){const o=c.ap(g),l=c.ap(t),p=Math.cos(-o),w=Math.sin(o);return{x:w*Math.sin(l),y:-w*Math.cos(l),z:p}}function Ws(g,t,o){const l=t.intersectsFrustum(g);if(!o||l===0)return l;const p=t.intersectsPlane(o);return p===0?0:l===2&&p===2?2:1}function sa(g,t,o){let l=0;const p=(o-t)/10;for(let w=0;w<10;w++)l+=p*Math.pow(Math.cos(t+(w+.5)/10*(o-t)),g);return l}function Xa(g,t){return function(o,l,p,w,O){const I=2*((g-1)/c.at(Math.cos(c.ap(Bt-O))/Math.cos(c.ap(Bt)))-1),A=Math.acos(p/w),C=2*sa(I-1,0,c.ap(O/2)),D=Math.min(c.ap(Bt),A+c.ap(O/2)),F=sa(I-1,Math.min(D,A-c.ap(O/2)),D),G=Math.atan(l/p),Z=Math.hypot(l,p);let Q=o;return Q+=c.at(w/Z/Math.max(.5,Math.cos(c.ap(O/2)))),Q+=I*c.at(Math.cos(G))/2,Q-=c.at(Math.max(1,F/C/t))/2,Q}}const dn=Xa(9.314,3);function qa(g,t){const o=(t.roundZoom?Math.round:Math.floor)(g.zoom+c.at(g.tileSize/t.tileSize));return Math.max(0,o)}function Ls(g,t){const o=g.getCameraFrustum(),l=g.getClippingPlane(),p=g.screenPointToMercatorCoordinate(g.getCameraPoint()),w=c.a9.fromLngLat(g.center,g.elevation);p.z=w.z+Math.cos(g.pitchInRadians)*g.cameraToCenterDistance/g.worldSize;const O=g.getCoveringTilesDetailsProvider(),I=O.allowVariableZoom(g,t),A=qa(g,t),C=t.minzoom||0,D=t.maxzoom!==void 0?t.maxzoom:g.maxZoom,F=Math.min(Math.max(0,A),D),G=Math.pow(2,F),Z=[G*p.x,G*p.y,0],Q=[G*w.x,G*w.y,0],ie=Math.hypot(w.x-p.x,w.y-p.y),de=Math.abs(w.z-p.z),le=Math.hypot(ie,de),pe=ye=>({zoom:0,x:0,y:0,wrap:ye,fullyVisible:!1}),be=[],ce=[];if(g.renderWorldCopies&&O.allowWorldCopies())for(let ye=1;ye<=3;ye++)be.push(pe(-ye)),be.push(pe(ye));for(be.push(pe(0));be.length>0;){const ye=be.pop(),ke=ye.x,me=ye.y;let Ee=ye.fullyVisible;const Ze={x:ke,y:me,z:ye.zoom},Ge=O.getTileBoundingVolume(Ze,ye.wrap,g.elevation,t);if(!Ee){const vt=Ws(o,Ge,l);if(vt===0)continue;Ee=vt===2}const qe=O.distanceToTile2d(p.x,p.y,Ze,Ge);let Ve=A;I&&(Ve=(t.calculateTileZoom||dn)(g.zoom+c.at(g.tileSize/t.tileSize),qe,de,le,g.fov)),Ve=(t.roundZoom?Math.round:Math.floor)(Ve),Ve=Math.max(0,Ve);const bt=Math.min(Ve,D);if(ye.wrap=O.getWrap(w,Ze,ye.wrap),ye.zoom>=bt){if(ye.zoom<C)continue;const vt=F-ye.zoom,ht=Z[0]-.5-(ke<<vt),Tt=Z[1]-.5-(me<<vt),la=t.reparseOverscaled?Math.max(ye.zoom,Ve):ye.zoom;ce.push({tileID:new c.a2(ye.zoom===D?la:ye.zoom,ye.wrap,ye.zoom,ke,me),distanceSq:c.au([Q[0]-.5-ke,Q[1]-.5-me]),tileDistanceToCamera:Math.sqrt(ht*ht+Tt*Tt)})}else for(let vt=0;vt<4;vt++)be.push({zoom:ye.zoom+1,x:(ke<<1)+vt%2,y:(me<<1)+(vt>>1),wrap:ye.wrap,fullyVisible:Ee})}return ce.sort(((ye,ke)=>ye.distanceSq-ke.distanceSq)).map((ye=>ye.tileID))}const es=c.aa.fromPoints([new c.P(0,0),new c.P(c.a5,c.a5)]);function Zs(g){return g==="raster"||g==="image"||g==="video"}function Bh(g,t,o,l,p,w,O){if(!t.hasData())return!1;const{tileID:I,fadingRole:A,fadingDirection:C,fadingParentID:D}=t;if(A===Se.Base&&C===Ue.Incoming&&D)return o[D.key]=D,!0;const F=Math.max(I.overscaledZ-p,w);for(let G=I.overscaledZ-1;G>=F;G--){const Z=I.scaledTo(G),Q=g.getLoadedTile(Z);if(Q)return t.setCrossFadeLogic({fadingRole:Se.Base,fadingDirection:Ue.Incoming,fadingParentID:Q.tileID,fadeEndTime:l+O}),Q.setCrossFadeLogic({fadingRole:Se.Parent,fadingDirection:Ue.Departing,fadeEndTime:l+O}),o[Z.key]=Z,!0}return!1}function Rn(g,t,o,l,p,w){if(!t.hasData())return!1;const O=t.tileID.children(p);let I=We(g,t,O,o,l,p,w);if(I)return!0;for(const A of O)We(g,t,A.children(p),o,l,p,w)&&(I=!0);return I}function We(g,t,o,l,p,w,O){if(o[0].overscaledZ>=w)return!1;let I=!1;for(const A of o){const C=g.getLoadedTile(A);if(!C)continue;const{fadingRole:D,fadingDirection:F,fadingParentID:G}=C;D===Se.Base&&F===Ue.Departing&&G||(C.setCrossFadeLogic({fadingRole:Se.Base,fadingDirection:Ue.Departing,fadingParentID:t.tileID,fadeEndTime:p+O}),t.setCrossFadeLogic({fadingRole:Se.Parent,fadingDirection:Ue.Incoming,fadeEndTime:p+O})),l[A.key]=A,I=!0}return I}function An(g,t,o,l){const p=g.tileID;return!!g.selfFading||!g.hasData()&&!!t.has(p)&&(g.setSelfFadeLogic(o+l),!0)}function Sn(g,t){var o;g.needsHillshadePrepare=!0,g.needsTerrainPrepare=!0;let l=t.tileID.canonical.x-g.tileID.canonical.x;const p=t.tileID.canonical.y-g.tileID.canonical.y,w=Math.pow(2,g.tileID.canonical.z),O=t.tileID.key;l===0&&p===0||Math.abs(p)>1||(Math.abs(l)>1&&(Math.abs(l+w)===1?l+=w:Math.abs(l-w)===1&&(l-=w)),t.dem&&g.dem&&(g.dem.backfillBorder(t.dem,l,p),!((o=g.neighboringTiles)===null||o===void 0)&&o[O]&&(g.neighboringTiles[O].backfilled=!0)))}class Go{constructor(){this._tiles={}}handleWrapJump(t){const o={};for(const l in this._tiles){const p=this._tiles[l];p.tileID=p.tileID.unwrapTo(p.tileID.wrap+t),o[p.tileID.key]=p}this._tiles=o}setFeatureState(t,o){for(const l in this._tiles)this._tiles[l].setFeatureState(t,o)}getAllTiles(){return Object.values(this._tiles)}getAllIds(t=!1){return t?Object.values(this._tiles).map((o=>o.tileID)).sort(c.aw).map((o=>o.key)):Object.keys(this._tiles)}getTileById(t){return this._tiles[t]}setTile(t,o){this._tiles[t]=o}deleteTileById(t){delete this._tiles[t]}getLoadedTile(t){const o=this.getTileById(t.key);return o!=null&&o.hasData()?o:null}isIdRenderable(t,o=!1){var l;return(l=this.getTileById(t))===null||l===void 0?void 0:l.isRenderable(o)}getRenderableIds(t=0,o){const l=[];for(const p of this.getAllIds())this.isIdRenderable(p,o)&&l.push(this.getTileById(p));return o?l.sort(((p,w)=>{const O=p.tileID,I=w.tileID,A=new c.P(O.canonical.x,O.canonical.y)._rotate(-t),C=new c.P(I.canonical.x,I.canonical.y)._rotate(-t);return O.overscaledZ-I.overscaledZ||C.y-A.y||C.x-A.x})).map((p=>p.tileID.key)):l.map((p=>p.tileID)).sort(c.aw).map((p=>p.key))}}class ts extends c.E{constructor(t,o,l){super(),this.id=t,this.dispatcher=l,this.on("data",(p=>this._dataHandler(p))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((p,w,O,I)=>{const A=new(ne(w.type))(p,w,O,I);if(A.id!==p)throw new Error(`Expected Source id to be ${p} instead of ${A.id}`);return A})(t,o,l,this),this._inViewTiles=new Go,this._outOfViewCache=new c.ax(0,(p=>this._unloadTile(p))),this._timers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._rasterFadeDuration=0,this._maxFadingAncestorLevels=5,this._state=new st,this._didEmitContent=!1,this._updated=!1}onAdd(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._maxTileCacheZoomLevels=t?t._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(t)}onRemove(t){for(const o of this._inViewTiles.getAllTiles())o.unloadVectorData();this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(t),this._inViewTiles=new Go}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const t of this._inViewTiles.getAllTiles())if(t.state!=="loaded"&&t.state!=="errored")return!1;return!0}getSource(){return this._source}getState(){return this._state}pause(){this._paused=!0}resume(){if(!this._paused)return;const t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(t,o,l){return c._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(t),this._tileLoaded(t,o,l)}catch(p){t.state="errored",p.status!==404?this._source.fire(new c.k(p,{tile:t})):this.update(this.transform,this.terrain)}}))}_unloadTile(t){this._source.unloadTile&&this._source.unloadTile(t)}_abortTile(t){this._source.abortTile&&this._source.abortTile(t),this._source.fire(new c.l("dataabort",{tile:t,coord:t.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(t){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._inViewTiles,this.map?this.map.painter:null);for(const o of this._inViewTiles.getAllTiles())o.upload(t),o.prepare(this.map.style.imageManager)}getIds(){return this._inViewTiles.getAllIds(!0)}getRenderableIds(t){var o;return this._inViewTiles.getRenderableIds((o=this.transform)===null||o===void 0?void 0:o.bearingInRadians,t)}hasRenderableParent(t){const o=t.overscaledZ-1;if(o>=this._source.minzoom){const l=this.getLoadedTile(t.scaledTo(o));if(l)return this._inViewTiles.isIdRenderable(l.tileID.key)}return!1}reload(t,o=void 0){if(this._paused)this._shouldReloadOnResume=!0;else{this._outOfViewCache.reset();for(const l of this._inViewTiles.getAllIds()){const p=this._inViewTiles.getTileById(l);o&&!this._source.shouldReloadTile(p,o)||(t?this._reloadTile(l,"expired"):p.state!=="errored"&&this._reloadTile(l,"reloading"))}}}_reloadTile(t,o){return c._(this,void 0,void 0,(function*(){const l=this._inViewTiles.getTileById(t);l&&(l.state!=="loading"&&(l.state=o),yield this._loadTile(l,t,o))}))}_tileLoaded(t,o,l){t.timeAdded=it(),t.selfFading&&(t.fadeEndTime=t.timeAdded+this._rasterFadeDuration),l==="expired"&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(o,t),this.getSource().type==="raster-dem"&&t.dem&&(function(p,w){var O,I;const A=w.getRenderableIds();for(const C of A){if(!p.neighboringTiles||!p.neighboringTiles[C])continue;const D=w.getTileById(C);p.neighboringTiles[C].backfilled||Sn(p,D),!((I=(O=D.neighboringTiles)===null||O===void 0?void 0:O[p.tileID.key])===null||I===void 0)&&I.backfilled||Sn(D,p)}})(t,this._inViewTiles),this._state.initializeTileState(t,this.map?this.map.painter:null),t.aborted||this._source.fire(new c.l("data",{dataType:"source",tile:t,coord:t.tileID}))}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._inViewTiles.getTileById(t)}_retainLoadedChildren(t,o){const l=this._getLoadedDescendents(o),p=new Set;for(const w of o){const O=l[w.key];if(!(O!=null&&O.length)){p.add(w);continue}const I=w.overscaledZ+ts.maxOverzooming,A=O.filter((F=>F.tileID.overscaledZ<=I));if(!A.length){p.add(w);continue}const C=Math.min(...A.map((F=>F.tileID.overscaledZ))),D=A.filter((F=>F.tileID.overscaledZ===C)).map((F=>F.tileID));for(const F of D)t[F.key]=F;this._areDescendentsComplete(D,C,w.overscaledZ)||p.add(w)}return p}_getLoadedDescendents(t){var o;const l={};for(const p of this._inViewTiles.getAllTiles().filter((w=>w.hasData())))for(const w of t)p.tileID.isChildOf(w)&&(l[o=w.key]||(l[o]=[])).push(p);return l}_areDescendentsComplete(t,o,l){return t.length===1&&t[0].isOverscaled()?t[0].overscaledZ===o:Math.pow(4,o-l)===t.length}getLoadedTile(t){return this._inViewTiles.getLoadedTile(t)}updateCacheSize(t){const o=Math.ceil(t.width/this._source.tileSize)+1,l=Math.ceil(t.height/this._source.tileSize)+1,p=Math.floor(o*l*(this._maxTileCacheZoomLevels===null?c.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),w=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,p):p;this._outOfViewCache.setMaxSize(w)}handleWrapJump(t){const o=Math.round((t-(this._prevLng===void 0?t:this._prevLng))/360);this._prevLng=t,o&&(this._inViewTiles.handleWrapJump(o),this._resetTileReloadTimers())}update(t,o){if(!this._sourceLoaded||this._paused)return;let l;this.transform=t,this.terrain=o,this.updateCacheSize(t),this.handleWrapJump(this.transform.center.lng),this.used||this.usedForTerrain?this._source.tileID?l=t.getVisibleUnwrappedCoordinates(this._source.tileID).map((A=>new c.a2(A.canonical.z,A.wrap,A.canonical.z,A.canonical.x,A.canonical.y))):(l=Ls(t,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.type==="vector"&&this.map._zoomLevelsToOverscale!==void 0?t.maxZoom-this.map._zoomLevelsToOverscale:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:o,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(l=l.filter((A=>this._source.hasTile(A))))):l=[],this.usedForTerrain&&(l=this._addTerrainIdealTiles(l));const p=l.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,p&&this.fire(new c.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const w=qa(t,this._source),O=this._updateRetainedTiles(l,w),I=Zs(this._source.type);I&&this._rasterFadeDuration>0&&!o&&(function(A,C,D,F,G,Z,Q){const ie=it(),de=c.av(C);for(const le of C){const pe=A.getTileById(le.key);pe.fadingDirection!==Ue.Departing&&pe.fadeOpacity!==0||pe.resetFadeLogic(),Bh(A,pe,D,ie,F,G,Q)||Rn(A,pe,D,ie,Z,Q)||An(pe,de,ie,Q)||pe.resetFadeLogic()}})(this._inViewTiles,l,O,this._maxFadingAncestorLevels,this._source.minzoom,this._source.maxzoom,this._rasterFadeDuration),I?this._cleanUpRasterTiles(O):this._cleanUpVectorTiles(O)}_cleanUpRasterTiles(t){for(const o of this._inViewTiles.getAllIds())t[o]||this._removeTile(o)}_cleanUpVectorTiles(t){for(const o of this._inViewTiles.getAllIds()){const l=this._inViewTiles.getTileById(o);t[o]?l.clearSymbolFadeHold():l.hasSymbolBuckets?l.holdingForSymbolFade()?l.symbolFadeFinished()&&this._removeTile(o):l.setSymbolHoldDuration(this.map._fadeDuration):this._removeTile(o)}}_addTerrainIdealTiles(t){const o=[];for(const l of t)if(l.canonical.z>this._source.minzoom){const p=l.scaledTo(l.canonical.z-1);o.push(p);const w=l.scaledTo(Math.max(this._source.minzoom,Math.min(l.canonical.z,5)));o.push(w)}return t.concat(o)}releaseSymbolFadeTiles(){for(const t of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(t).holdingForSymbolFade()&&this._removeTile(t)}_updateRetainedTiles(t,o){var l;const p=new Set;for(const C of t)this._addTile(C).hasData()||p.add(C);const w=t.reduce(((C,D)=>(C[D.key]=D,C)),{}),O=this._retainLoadedChildren(w,p),I={},A=Math.max(o-ts.maxUnderzooming,this._source.minzoom);for(const C of O){let D=this._inViewTiles.getTileById(C.key),F=D==null?void 0:D.wasRequested();for(let G=C.overscaledZ-1;G>=A;--G){const Z=C.scaledTo(G);if(I[Z.key])break;if(I[Z.key]=!0,D=this.getTile(Z),!D&&F&&(D=this._addTile(Z)),D){const Q=D.hasData();if((Q||!(!((l=this.map)===null||l===void 0)&&l.cancelPendingTileRequestsWhileZooming)||F)&&(w[Z.key]=Z),F=D.wasRequested(),Q)break}}}return w}_addTile(t){let o=this._inViewTiles.getTileById(t.key);if(o)return o;o=this._outOfViewCache.getAndRemove(t),o&&(o.resetFadeLogic(),this._setTileReloadTimer(t.key,o),o.tileID=t,this._state.initializeTileState(o,this.map?this.map.painter:null));const l=o;return o||(o=new nt(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(o,t.key,o.state)),o.uses++,this._inViewTiles.setTile(t.key,o),l||this._source.fire(new c.l("dataloading",{tile:o,coord:o.tileID,dataType:"source"})),o}_setTileReloadTimer(t,o){this._clearTileReloadTimer(t);const l=o.getExpiryTimeout();l&&(this._timers[t]=setTimeout((()=>{this._reloadTile(t,"expired"),delete this._timers[t]}),l))}_clearTileReloadTimer(t){const o=this._timers[t];o&&(clearTimeout(o),delete this._timers[t])}_resetTileReloadTimers(){for(const t in this._timers)clearTimeout(this._timers[t]),delete this._timers[t];for(const t of this._inViewTiles.getAllIds()){const o=this._inViewTiles.getTileById(t);this._setTileReloadTimer(t,o)}}refreshTiles(t){for(const o of this._inViewTiles.getAllIds()){const l=this._inViewTiles.getTileById(o);(this._inViewTiles.isIdRenderable(o)||l.state=="errored")&&t.some((p=>p.equals(l.tileID.canonical)))&&this._reloadTile(o,"expired")}}_removeTile(t){const o=this._inViewTiles.getTileById(t);o&&(o.uses--,this._inViewTiles.deleteTileById(t),this._clearTileReloadTimer(t),o.uses>0||(o.hasData()&&o.state!=="reloading"?this._outOfViewCache.add(o.tileID,o,o.getExpiryTimeout()):(o.aborted=!0,this._abortTile(o),this._unloadTile(o))))}_dataHandler(t){t.dataType==="source"&&(t.sourceDataType!=="metadata"?t.sourceDataType==="content"&&this._sourceLoaded&&!this._paused&&(this.reload(t.sourceDataChanged,t.shouldReloadTileOptions),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0):this._sourceLoaded=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const t of this._inViewTiles.getAllIds())this._removeTile(t);this._outOfViewCache.reset()}tilesIn(t,o,l){const p=[],w=this.transform;if(!w)return p;const O=w.getCoveringTilesDetailsProvider().allowWorldCopies(),I=l?w.getCameraQueryGeometry(t):t,A=Z=>w.screenPointToMercatorCoordinate(Z,this.terrain),C=this.transformBbox(t,A,!O),D=this.transformBbox(I,A,!O),F=this.getIds(),G=c.aa.fromPoints(D);for(let Z=0;Z<F.length;Z++){const Q=this._inViewTiles.getTileById(F[Z]);if(Q.holdingForSymbolFade())continue;const ie=O?[Q.tileID]:[Q.tileID.unwrapTo(-1),Q.tileID.unwrapTo(0)],de=Math.pow(2,w.zoom-Q.tileID.overscaledZ),le=o*Q.queryPadding*c.a5/Q.tileSize/de;for(const pe of ie){const be=G.map((ce=>pe.getTilePoint(new c.a9(ce.x,ce.y))));if(be.expandBy(le),be.intersects(es)){const ce=C.map((ke=>pe.getTilePoint(ke))),ye=D.map((ke=>pe.getTilePoint(ke)));p.push({tile:Q,tileID:O?pe:pe.unwrapTo(0),queryGeometry:ce,cameraQueryGeometry:ye,scale:de})}}}return p}transformBbox(t,o,l){let p=t.map(o);if(l){const w=c.aa.fromPoints(t);w.shrinkBy(.001*Math.min(w.width(),w.height()));const O=w.map(o);c.aa.fromPoints(p).covers(O)||(p=p.map((I=>I.x>.5?new c.a9(I.x-1,I.y,I.z):I)))}return p}getVisibleCoordinates(t){const o=this.getRenderableIds(t).map((l=>this._inViewTiles.getTileById(l).tileID));return this.transform&&this.transform.populateCache(o),o}hasTransition(){return!!this._source.hasTransition()||!(!Zs(this._source.type)||!(function(t,o){if(o<=0)return!1;const l=it();for(const p of t.getAllTiles())if(p.fadeEndTime>=l)return!0;return!1})(this._inViewTiles,this._rasterFadeDuration))}setRasterFadeDuration(t){this._rasterFadeDuration=t}setFeatureState(t,o,l){this._state.updateState(t=t||c.ai,o,l)}removeFeatureState(t,o,l){this._state.removeFeatureState(t=t||c.ai,o,l)}getFeatureState(t,o){return this._state.getState(t=t||c.ai,o)}setDependencies(t,o,l){const p=this._inViewTiles.getTileById(t);p&&p.setDependencies(o,l)}reloadTilesForDependencies(t,o){for(const l of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(l).hasDependency(t,o)&&this._reloadTile(l,"reloading");this._outOfViewCache.filter((l=>!l.hasDependency(t,o)))}areTilesLoaded(){for(const t of this._inViewTiles.getAllTiles())if(t.state!=="loaded"&&t.state!=="errored")return!1;return!0}}ts.maxUnderzooming=10,ts.maxOverzooming=3;class wt{constructor(t,o){this.reset(t,o)}reset(t,o){this.points=t||[],this._distances=[0];for(let l=1;l<this.points.length;l++)this._distances[l]=this._distances[l-1]+this.points[l].dist(this.points[l-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(o||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(t){if(this.points.length===1)return this.points[0];t=c.an(t,0,1);let o=1,l=this._distances[o];const p=t*this.paddedLength+this.padding;for(;l<p&&o<this._distances.length;)l=this._distances[++o];const w=o-1,O=this._distances[w],I=l-O,A=I>0?(p-O)/I:0;return this.points[w].mult(1-A).add(this.points[o].mult(A))}}function na(g,t){let o=!0;return g==="always"||g!=="never"&&t!=="never"||(o=!1),o}class ta{constructor(t,o,l){const p=this.boxCells=[],w=this.circleCells=[];this.xCellCount=Math.ceil(t/l),this.yCellCount=Math.ceil(o/l);for(let O=0;O<this.xCellCount*this.yCellCount;O++)p.push([]),w.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=o,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/o,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(t,o,l,p,w){this._forEachCell(o,l,p,w,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(o),this.bboxes.push(l),this.bboxes.push(p),this.bboxes.push(w)}insertCircle(t,o,l,p){this._forEachCell(o-p,l-p,o+p,l+p,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(o),this.circles.push(l),this.circles.push(p)}_insertBoxCell(t,o,l,p,w,O){this.boxCells[w].push(O)}_insertCircleCell(t,o,l,p,w,O){this.circleCells[w].push(O)}_query(t,o,l,p,w,O,I){if(l<0||t>this.width||p<0||o>this.height)return[];const A=[];if(t<=0&&o<=0&&this.width<=l&&this.height<=p){if(w)return[{key:null,x1:t,y1:o,x2:l,y2:p}];for(let C=0;C<this.boxKeys.length;C++)A.push({key:this.boxKeys[C],x1:this.bboxes[4*C],y1:this.bboxes[4*C+1],x2:this.bboxes[4*C+2],y2:this.bboxes[4*C+3]});for(let C=0;C<this.circleKeys.length;C++){const D=this.circles[3*C],F=this.circles[3*C+1],G=this.circles[3*C+2];A.push({key:this.circleKeys[C],x1:D-G,y1:F-G,x2:D+G,y2:F+G})}}else this._forEachCell(t,o,l,p,this._queryCell,A,{hitTest:w,overlapMode:O,seenUids:{box:{},circle:{}}},I);return A}query(t,o,l,p){return this._query(t,o,l,p,!1,null)}hitTest(t,o,l,p,w,O){return this._query(t,o,l,p,!0,w,O).length>0}hitTestCircle(t,o,l,p,w){const O=t-l,I=t+l,A=o-l,C=o+l;if(I<0||O>this.width||C<0||A>this.height)return!1;const D=[];return this._forEachCell(O,A,I,C,this._queryCellCircle,D,{hitTest:!0,overlapMode:p,circle:{x:t,y:o,radius:l},seenUids:{box:{},circle:{}}},w),D.length>0}_queryCell(t,o,l,p,w,O,I,A){const{seenUids:C,hitTest:D,overlapMode:F}=I,G=this.boxCells[w];if(G!==null){const Q=this.bboxes;for(const ie of G)if(!C.box[ie]){C.box[ie]=!0;const de=4*ie,le=this.boxKeys[ie];if(t<=Q[de+2]&&o<=Q[de+3]&&l>=Q[de+0]&&p>=Q[de+1]&&(!A||A(le))&&(!D||!na(F,le.overlapMode))&&(O.push({key:le,x1:Q[de],y1:Q[de+1],x2:Q[de+2],y2:Q[de+3]}),D))return!0}}const Z=this.circleCells[w];if(Z!==null){const Q=this.circles;for(const ie of Z)if(!C.circle[ie]){C.circle[ie]=!0;const de=3*ie,le=this.circleKeys[ie];if(this._circleAndRectCollide(Q[de],Q[de+1],Q[de+2],t,o,l,p)&&(!A||A(le))&&(!D||!na(F,le.overlapMode))){const pe=Q[de],be=Q[de+1],ce=Q[de+2];if(O.push({key:le,x1:pe-ce,y1:be-ce,x2:pe+ce,y2:be+ce}),D)return!0}}}return!1}_queryCellCircle(t,o,l,p,w,O,I,A){const{circle:C,seenUids:D,overlapMode:F}=I,G=this.boxCells[w];if(G!==null){const Q=this.bboxes;for(const ie of G)if(!D.box[ie]){D.box[ie]=!0;const de=4*ie,le=this.boxKeys[ie];if(this._circleAndRectCollide(C.x,C.y,C.radius,Q[de+0],Q[de+1],Q[de+2],Q[de+3])&&(!A||A(le))&&!na(F,le.overlapMode))return O.push(!0),!0}}const Z=this.circleCells[w];if(Z!==null){const Q=this.circles;for(const ie of Z)if(!D.circle[ie]){D.circle[ie]=!0;const de=3*ie,le=this.circleKeys[ie];if(this._circlesCollide(Q[de],Q[de+1],Q[de+2],C.x,C.y,C.radius)&&(!A||A(le))&&!na(F,le.overlapMode))return O.push(!0),!0}}}_forEachCell(t,o,l,p,w,O,I,A){const C=this._convertToXCellCoord(t),D=this._convertToYCellCoord(o),F=this._convertToXCellCoord(l),G=this._convertToYCellCoord(p);for(let Z=C;Z<=F;Z++)for(let Q=D;Q<=G;Q++)if(w.call(this,t,o,l,p,this.xCellCount*Q+Z,O,I,A))return}_convertToXCellCoord(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}_convertToYCellCoord(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}_circlesCollide(t,o,l,p,w,O){const I=p-t,A=w-o,C=l+O;return C*C>I*I+A*A}_circleAndRectCollide(t,o,l,p,w,O,I){const A=(O-p)/2,C=Math.abs(t-(p+A));if(C>A+l)return!1;const D=(I-w)/2,F=Math.abs(o-(w+D));if(F>D+l)return!1;if(C<=A||F<=D)return!0;const G=C-A,Z=F-D;return G*G+Z*Z<=l*l}}function ho(g,t,o){const l=c.N();if(!g){const{vecSouth:F,vecEast:G}=Ii(t),Z=fe();Z[0]=G[0],Z[1]=G[1],Z[2]=F[0],Z[3]=F[1],p=Z,(D=(O=(w=Z)[0])*(C=w[3])-(A=w[2])*(I=w[1]))&&(p[0]=C*(D=1/D),p[1]=-I*D,p[2]=-A*D,p[3]=O*D),l[0]=Z[0],l[1]=Z[1],l[4]=Z[2],l[5]=Z[3]}var p,w,O,I,A,C,D;return c.Q(l,l,[1/o,1/o,1]),l}function Xl(g,t,o,l){if(g){const p=c.N();if(!t){const{vecSouth:w,vecEast:O}=Ii(o);p[0]=O[0],p[1]=O[1],p[4]=w[0],p[5]=w[1]}return c.Q(p,p,[l,l,1]),p}return o.pixelsToClipSpaceMatrix}function Ii(g){const t=Math.cos(g.rollInRadians),o=Math.sin(g.rollInRadians),l=Math.cos(g.pitchInRadians),p=Math.cos(g.bearingInRadians),w=Math.sin(g.bearingInRadians),O=c.aC();O[0]=-p*l*o-w*t,O[1]=-w*l*o+p*t;const I=c.aD(O);I<1e-9?c.aE(O):c.aF(O,O,1/I);const A=c.aC();A[0]=p*l*t-w*o,A[1]=w*l*t+p*o;const C=c.aD(A);return C<1e-9?c.aE(A):c.aF(A,A,1/C),{vecEast:A,vecSouth:O}}function oa(g,t,o,l){let p;l?(p=[g,t,l(g,t),1],c.aH(p,p,o)):(p=[g,t,0,1],Kn(p,p,o));const w=p[3];return{point:new c.P(p[0]/w,p[1]/w),signedDistanceFromCamera:w,isOccluded:!1}}function eh(g,t){return .5+g/t*.5}function ti(g,t){return g.x>=-t[0]&&g.x<=t[0]&&g.y>=-t[1]&&g.y<=t[1]}function Yi(g,t,o,l,p,w,O,I,A,C,D,F,G){const Z=o?g.textSizeData:g.iconSizeData,Q=c.ay(Z,t.transform.zoom),ie=[256/t.width*2+1,256/t.height*2+1],de=o?g.text.dynamicLayoutVertexArray:g.icon.dynamicLayoutVertexArray;de.clear();const le=g.lineVertexArray,pe=o?g.text.placedSymbolArray:g.icon.placedSymbolArray,be=t.transform.width/t.transform.height;let ce=!1;for(let ye=0;ye<pe.length;ye++){const ke=pe.get(ye);if(ke.hidden||ke.writingMode===c.az.vertical&&!ce){Va(ke.numGlyphs,de);continue}ce=!1;const me=new c.P(ke.anchorX,ke.anchorY),Ee={getElevation:G,pitchedLabelPlaneMatrix:l,lineVertexArray:le,pitchWithMap:w,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:t.transform,tileAnchorPoint:me,unwrappedTileID:A,width:C,height:D,translation:F},Ze=Ti(ke.anchorX,ke.anchorY,Ee);if(!ti(Ze.point,ie)){Va(ke.numGlyphs,de);continue}const Ge=eh(t.transform.cameraToCenterDistance,Ze.signedDistanceFromCamera),qe=c.aA(Z,Q,ke),Ve=w?qe*t.transform.getPitchedTextCorrection(ke.anchorX,ke.anchorY,A)/Ge:qe*Ge,bt=zs({projectionContext:Ee,pitchedLabelPlaneMatrixInverse:p,symbol:ke,fontSize:Ve,flip:!1,keepUpright:O,glyphOffsetArray:g.glyphOffsetArray,dynamicLayoutVertexArray:de,aspectRatio:be,rotateToLine:I});ce=bt.useVertical,(bt.notEnoughRoom||ce||bt.needsFlipping&&zs({projectionContext:Ee,pitchedLabelPlaneMatrixInverse:p,symbol:ke,fontSize:Ve,flip:!0,keepUpright:O,glyphOffsetArray:g.glyphOffsetArray,dynamicLayoutVertexArray:de,aspectRatio:be,rotateToLine:I}).notEnoughRoom)&&Va(ke.numGlyphs,de)}o?g.text.dynamicLayoutVertexBuffer.updateData(de):g.icon.dynamicLayoutVertexBuffer.updateData(de)}function Eo(g,t,o,l,p,w,O,I){const A=w.glyphStartIndex+w.numGlyphs,C=w.lineStartIndex,D=w.lineStartIndex+w.lineLength,F=t.getoffsetX(w.glyphStartIndex),G=t.getoffsetX(A-1),Z=$n(g*F,o,l,p,w.segment,C,D,I,O);if(!Z)return null;const Q=$n(g*G,o,l,p,w.segment,C,D,I,O);return Q?I.projectionCache.anyProjectionOccluded?null:{first:Z,last:Q}:null}function xi(g,t,o,l){return g===c.az.horizontal&&Math.abs(o.y-t.y)>Math.abs(o.x-t.x)*l?{useVertical:!0}:(g===c.az.vertical?t.y<o.y:t.x>o.x)?{needsFlipping:!0}:null}function zs(g){const{projectionContext:t,pitchedLabelPlaneMatrixInverse:o,symbol:l,fontSize:p,flip:w,keepUpright:O,glyphOffsetArray:I,dynamicLayoutVertexArray:A,aspectRatio:C,rotateToLine:D}=g,F=p/24,G=l.lineOffsetX*F,Z=l.lineOffsetY*F;let Q;if(l.numGlyphs>1){const ie=l.glyphStartIndex+l.numGlyphs,de=l.lineStartIndex,le=l.lineStartIndex+l.lineLength,pe=Eo(F,I,G,Z,w,l,D,t);if(!pe)return{notEnoughRoom:!0};const be=ai(pe.first.point.x,pe.first.point.y,t,o),ce=ai(pe.last.point.x,pe.last.point.y,t,o);if(O&&!w){const ye=xi(l.writingMode,be,ce,C);if(ye)return ye}Q=[pe.first];for(let ye=l.glyphStartIndex+1;ye<ie-1;ye++){const ke=$n(F*I.getoffsetX(ye),G,Z,w,l.segment,de,le,t,D);if(!ke)return{notEnoughRoom:!0};Q.push(ke)}Q.push(pe.last)}else{if(O&&!w){const de=La(t.tileAnchorPoint.x,t.tileAnchorPoint.y,t).point,le=l.lineStartIndex+l.segment+1,pe=new c.P(t.lineVertexArray.getx(le),t.lineVertexArray.gety(le)),be=La(pe.x,pe.y,t),ce=be.signedDistanceFromCamera>0?be.point:Rh(t.tileAnchorPoint,pe,de,1,t),ye=ai(de.x,de.y,t,o),ke=ai(ce.x,ce.y,t,o),me=xi(l.writingMode,ye,ke,C);if(me)return me}const ie=$n(F*I.getoffsetX(l.glyphStartIndex),G,Z,w,l.segment,l.lineStartIndex,l.lineStartIndex+l.lineLength,t,D);if(!ie||t.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};Q=[ie]}for(const ie of Q)c.aG(A,ie.point,ie.angle);return{}}function Rh(g,t,o,l,p){const w=g.add(g.sub(t)._unit()),O=La(w.x,w.y,p).point,I=o.sub(O);return o.add(I._mult(l/I.mag()))}function Hn(g,t,o){const l=t.projectionCache;if(l.projections[g])return l.projections[g];const p=new c.P(t.lineVertexArray.getx(g),t.lineVertexArray.gety(g)),w=La(p.x,p.y,t);if(w.signedDistanceFromCamera>0)return l.projections[g]=w.point,l.anyProjectionOccluded=l.anyProjectionOccluded||w.isOccluded,w.point;const O=g-o.direction;return Rh(o.distanceFromAnchor===0?t.tileAnchorPoint:new c.P(t.lineVertexArray.getx(O),t.lineVertexArray.gety(O)),p,o.previousVertex,o.absOffsetX-o.distanceFromAnchor+1,t)}function La(g,t,o){const l=g+o.translation[0],p=t+o.translation[1];let w;return o.pitchWithMap?(w=oa(l,p,o.pitchedLabelPlaneMatrix,o.getElevation),w.isOccluded=!1):(w=o.transform.projectTileCoordinates(l,p,o.unwrappedTileID,o.getElevation),w.point.x=(.5*w.point.x+.5)*o.width,w.point.y=(.5*-w.point.y+.5)*o.height),w}function ai(g,t,o,l){if(o.pitchWithMap){const p=[g,t,0,1];return c.aH(p,p,l),o.transform.projectTileCoordinates(p[0]/p[3],p[1]/p[3],o.unwrappedTileID,o.getElevation).point}return{x:g/o.width*2-1,y:1-t/o.height*2}}function Ti(g,t,o){return o.transform.projectTileCoordinates(g,t,o.unwrappedTileID,o.getElevation)}function th(g,t,o){return g._unit()._perp()._mult(t*o)}function $i(g,t,o,l,p,w,O,I,A){if(I.projectionCache.offsets[g])return I.projectionCache.offsets[g];const C=o.add(t);if(g+A.direction<l||g+A.direction>=p)return I.projectionCache.offsets[g]=C,C;const D=Hn(g+A.direction,I,A),F=th(D.sub(o),O,A.direction),G=o.add(F),Z=D.add(F);return I.projectionCache.offsets[g]=c.aI(w,C,G,Z)||C,I.projectionCache.offsets[g]}function $n(g,t,o,l,p,w,O,I,A){const C=l?g-t:g+t;let D=C>0?1:-1,F=0;l&&(D*=-1,F=Math.PI),D<0&&(F+=Math.PI);let G,Z=D>0?w+p:w+p+1;I.projectionCache.cachedAnchorPoint?G=I.projectionCache.cachedAnchorPoint:(G=La(I.tileAnchorPoint.x,I.tileAnchorPoint.y,I).point,I.projectionCache.cachedAnchorPoint=G);let Q,ie,de=G,le=G,pe=0,be=0;const ce=Math.abs(C),ye=[];let ke;for(;pe+be<=ce;){if(Z+=D,Z<w||Z>=O)return null;pe+=be,le=de,ie=Q;const Ze={absOffsetX:ce,direction:D,distanceFromAnchor:pe,previousVertex:le};if(de=Hn(Z,I,Ze),o===0)ye.push(le),ke=de.sub(le);else{let Ge;const qe=de.sub(le);Ge=qe.mag()===0?th(Hn(Z+D,I,Ze).sub(de),o,D):th(qe,o,D),ie||(ie=le.add(Ge)),Q=$i(Z,Ge,de,w,O,ie,o,I,Ze),ye.push(ie),ke=Q.sub(ie)}be=ke.mag()}const me=ke._mult((ce-pe)/be)._add(ie||le),Ee=F+Math.atan2(de.y-le.y,de.x-le.x);return ye.push(me),{point:me,angle:A?Ee:0,path:ye}}const za=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Va(g,t){for(let o=0;o<g;o++){const l=t.length;t.resize(l+4),t.float32.set(za,3*l)}}function Kn(g,t,o){const l=t[0],p=t[1];return g[0]=o[0]*l+o[4]*p+o[12],g[1]=o[1]*l+o[5]*p+o[13],g[3]=o[3]*l+o[7]*p+o[15],g}const xa=100;class _r{constructor(t,o=new ta(t.width+200,t.height+200,25),l=new ta(t.width+200,t.height+200,25)){this.transform=t,this.grid=o,this.ignoredGrid=l,this.pitchFactor=Math.cos(t.pitch*Math.PI/180)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+xa,this.screenBottomBoundary=t.height+xa,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(t,o,l,p,w,O,I,A,C,D,F,G){const Z=this.projectAndGetPerspectiveRatio(t.anchorPointX+A[0],t.anchorPointY+A[1],w,D,G),Q=l*Z.perspectiveRatio;let ie;if(O||I)ie=this._projectCollisionBox(t,Q,p,w,O,I,A,Z,D,F,G);else{const ke=Z.x+(F?F.x*Q:0),me=Z.y+(F?F.y*Q:0);ie={allPointsOccluded:!1,box:[ke+t.x1*Q,me+t.y1*Q,ke+t.x2*Q,me+t.y2*Q]}}const[de,le,pe,be]=ie.box,ce=O?ie.allPointsOccluded:Z.isOccluded;let ye=ce;return ye||(ye=Z.perspectiveRatio<this.perspectiveRatioCutoff),ye||(ye=!this.isInsideGrid(de,le,pe,be)),ye||o!=="always"&&this.grid.hitTest(de,le,pe,be,o,C)?{box:[de,le,pe,be],placeable:!1,offscreen:!1,occluded:ce}:{box:[de,le,pe,be],placeable:!0,offscreen:this.isOffscreen(de,le,pe,be),occluded:ce}}placeCollisionCircles(t,o,l,p,w,O,I,A,C,D,F,G,Z,Q){const ie=[],de=new c.P(o.anchorX,o.anchorY),le=this.getPerspectiveRatio(de.x,de.y,O,Q),pe=(C?w*this.transform.getPitchedTextCorrection(o.anchorX,o.anchorY,O)/le:w*le)/c.aM,be={getElevation:Q,pitchedLabelPlaneMatrix:I,lineVertexArray:l,pitchWithMap:C,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:de,unwrappedTileID:O,width:this.transform.width,height:this.transform.height,translation:Z},ce=Eo(pe,p,o.lineOffsetX*pe,o.lineOffsetY*pe,!1,o,!1,be);let ye=!1,ke=!1,me=!0;if(ce){const Ee=.5*F*le+G,Ze=new c.P(-100,-100),Ge=new c.P(this.screenRightBoundary,this.screenBottomBoundary),qe=new wt,Ve=ce.first,bt=ce.last;let vt=[];for(let la=Ve.path.length-1;la>=1;la--)vt.push(Ve.path[la]);for(let la=1;la<bt.path.length;la++)vt.push(bt.path[la]);const ht=2.5*Ee;if(C){const la=this.projectPathToScreenSpace(vt,be);vt=la.some((Ja=>Ja.signedDistanceFromCamera<=0))?[]:la.map((Ja=>Ja.point))}let Tt=[];if(vt.length>0){const la=vt[0].clone(),Ja=vt[0].clone();for(let ws=1;ws<vt.length;ws++)la.x=Math.min(la.x,vt[ws].x),la.y=Math.min(la.y,vt[ws].y),Ja.x=Math.max(Ja.x,vt[ws].x),Ja.y=Math.max(Ja.y,vt[ws].y);Tt=la.x>=Ze.x&&Ja.x<=Ge.x&&la.y>=Ze.y&&Ja.y<=Ge.y?[vt]:Ja.x<Ze.x||la.x>Ge.x||Ja.y<Ze.y||la.y>Ge.y?[]:c.aJ([vt],Ze.x,Ze.y,Ge.x,Ge.y)}for(const la of Tt){qe.reset(la,.25*Ee);let Ja=0;Ja=qe.length<=.5*Ee?1:Math.ceil(qe.paddedLength/ht)+1;for(let ws=0;ws<Ja;ws++){const ps=ws/Math.max(Ja-1,1),Cs=qe.lerp(ps),rs=Cs.x+xa,qs=Cs.y+xa;ie.push(rs,qs,Ee,0);const Ms=rs-Ee,Nn=qs-Ee,Ks=rs+Ee,Qs=qs+Ee;if(me=me&&this.isOffscreen(Ms,Nn,Ks,Qs),ke=ke||this.isInsideGrid(Ms,Nn,Ks,Qs),t!=="always"&&this.grid.hitTestCircle(rs,qs,Ee,t,D)&&(ye=!0,!A))return{circles:[],offscreen:!1,collisionDetected:ye}}}}return{circles:!A&&ye||!ke||le<this.perspectiveRatioCutoff?[]:ie,offscreen:me,collisionDetected:ye}}projectPathToScreenSpace(t,o){const l=(function(p,w){const O=c.N();return c.aB(O,w.pitchedLabelPlaneMatrix),p.map((I=>{const A=oa(I.x,I.y,O,w.getElevation),C=w.transform.projectTileCoordinates(A.point.x,A.point.y,w.unwrappedTileID,w.getElevation);return C.point.x=(.5*C.point.x+.5)*w.width,C.point.y=(.5*-C.point.y+.5)*w.height,C}))})(t,o);return(function(p){let w=0,O=0,I=0,A=0;for(let C=0;C<p.length;C++)p[C].isOccluded?(I=C+1,A=0):(A++,A>O&&(O=A,w=I));return p.slice(w,w+O)})(l)}queryRenderedSymbols(t){if(t.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const o=[],l=new c.aa;for(const F of t){const G=new c.P(F.x+xa,F.y+xa);l.extend(G),o.push(G)}const{minX:p,minY:w,maxX:O,maxY:I}=l,A=this.grid.query(p,w,O,I).concat(this.ignoredGrid.query(p,w,O,I)),C={},D={};for(const F of A){const G=F.key;if(C[G.bucketInstanceId]===void 0&&(C[G.bucketInstanceId]={}),C[G.bucketInstanceId][G.featureIndex])continue;const Z=[new c.P(F.x1,F.y1),new c.P(F.x2,F.y1),new c.P(F.x2,F.y2),new c.P(F.x1,F.y2)];c.aK(o,Z)&&(C[G.bucketInstanceId][G.featureIndex]=!0,D[G.bucketInstanceId]===void 0&&(D[G.bucketInstanceId]=[]),D[G.bucketInstanceId].push(G.featureIndex))}return D}insertCollisionBox(t,o,l,p,w,O){(l?this.ignoredGrid:this.grid).insert({bucketInstanceId:p,featureIndex:w,collisionGroupID:O,overlapMode:o},t[0],t[1],t[2],t[3])}insertCollisionCircles(t,o,l,p,w,O){const I=l?this.ignoredGrid:this.grid,A={bucketInstanceId:p,featureIndex:w,collisionGroupID:O,overlapMode:o};for(let C=0;C<t.length;C+=4)I.insertCircle(A,t[C],t[C+1],t[C+2])}projectAndGetPerspectiveRatio(t,o,l,p,w){if(w){let O;p?(O=[t,o,p(t,o),1],c.aH(O,O,w)):(O=[t,o,0,1],Kn(O,O,w));const I=O[3];return{x:(O[0]/I+1)/2*this.transform.width+xa,y:(-O[1]/I+1)/2*this.transform.height+xa,perspectiveRatio:.5+this.transform.cameraToCenterDistance/I*.5,isOccluded:!1,signedDistanceFromCamera:I}}{const O=this.transform.projectTileCoordinates(t,o,l,p);return{x:(O.point.x+1)/2*this.transform.width+xa,y:(1-O.point.y)/2*this.transform.height+xa,perspectiveRatio:.5+this.transform.cameraToCenterDistance/O.signedDistanceFromCamera*.5,isOccluded:O.isOccluded,signedDistanceFromCamera:O.signedDistanceFromCamera}}}getPerspectiveRatio(t,o,l,p){const w=this.transform.projectTileCoordinates(t,o,l,p);return .5+this.transform.cameraToCenterDistance/w.signedDistanceFromCamera*.5}isOffscreen(t,o,l,p){return l<xa||t>=this.screenRightBoundary||p<xa||o>this.screenBottomBoundary}isInsideGrid(t,o,l,p){return l>=0&&t<this.gridRightBoundary&&p>=0&&o<this.gridBottomBoundary}getViewportMatrix(){const t=c.ar([]);return c.O(t,t,[-100,-100,0]),t}_projectCollisionBox(t,o,l,p,w,O,I,A,C,D,F){let G=1,Z=0,Q=0,ie=1;const de=t.anchorPointX+I[0],le=t.anchorPointY+I[1];if(O&&!w){const vt=this.projectAndGetPerspectiveRatio(de+1,le,p,C,F),ht=vt.x-A.x,Tt=Math.atan((vt.y-A.y)/ht)+(ht<0?Math.PI:0),la=Math.sin(Tt),Ja=Math.cos(Tt);G=Ja,Z=la,Q=-la,ie=Ja}else if(!O&&w){const vt=Ii(this.transform);G=vt.vecEast[0],Z=vt.vecEast[1],Q=vt.vecSouth[0],ie=vt.vecSouth[1]}let pe=A.x,be=A.y,ce=o;w&&(pe=de,be=le,ce=Math.pow(2,-(this.transform.zoom-l.overscaledZ)),ce*=this.transform.getPitchedTextCorrection(de,le,p),D||(ce*=c.an(.5+A.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),D&&(pe+=G*D.x*ce+Q*D.y*ce,be+=Z*D.x*ce+ie*D.y*ce);const ye=t.x1*ce,ke=t.x2*ce,me=(ye+ke)/2,Ee=t.y1*ce,Ze=t.y2*ce,Ge=(Ee+Ze)/2,qe=[{offsetX:ye,offsetY:Ee},{offsetX:me,offsetY:Ee},{offsetX:ke,offsetY:Ee},{offsetX:ke,offsetY:Ge},{offsetX:ke,offsetY:Ze},{offsetX:me,offsetY:Ze},{offsetX:ye,offsetY:Ze},{offsetX:ye,offsetY:Ge}];let Ve=[];for(const{offsetX:vt,offsetY:ht}of qe)Ve.push(new c.P(pe+G*vt+Q*ht,be+Z*vt+ie*ht));let bt=!1;if(w){const vt=Ve.map((ht=>this.projectAndGetPerspectiveRatio(ht.x,ht.y,p,C,F)));bt=vt.some((ht=>!ht.isOccluded)),Ve=vt.map((ht=>new c.P(ht.x,ht.y)))}else bt=!0;return{box:c.aL(Ve),allPointsOccluded:!bt}}}class Yl{constructor(t,o,l,p){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?o:-o))):p&&l?1:0,this.placed=l}isHidden(){return this.opacity===0&&!this.placed}}class fa{constructor(t,o,l,p,w){this.text=new Yl(t?t.text:null,o,l,w),this.icon=new Yl(t?t.icon:null,o,p,w)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ds{constructor(t,o,l){this.text=t,this.icon=o,this.skipFade=l}}class ah{constructor(t,o,l,p,w){this.bucketInstanceId=t,this.featureIndex=o,this.sourceLayerIndex=l,this.bucketIndex=p,this.tileID=w}}class rl{constructor(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}get(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){const o=++this.maxGroupID;this.collisionGroups[t]={ID:o,predicate:l=>l.collisionGroupID===o}}return this.collisionGroups[t]}}function ys(g,t,o,l,p){const{horizontalAlign:w,verticalAlign:O}=c.aS(g);return new c.P(-(w-.5)*t+l[0]*p,-(O-.5)*o+l[1]*p)}class hl{constructor(t,o,l,p,w){this.transform=t.clone(),this.terrain=o,this.collisionIndex=new _r(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=l,this.retainedQueryData={},this.collisionGroups=new rl(p),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=w,w&&(w.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(t){const o=this.terrain;return o?(l,p)=>o.getElevation(t,l,p):null}getBucketParts(t,o,l,p){const w=l.getBucket(o),O=l.latestFeatureIndex;if(!w||!O||o.id!==w.layerIds[0])return;const I=l.collisionBoxArray,A=w.layers[0].layout,C=w.layers[0].paint,D=Math.pow(2,this.transform.zoom-l.tileID.overscaledZ),F=l.tileSize/c.a5,G=l.tileID.toUnwrapped(),Z=A.get("text-rotation-alignment")==="map",Q=c.aN(l,1,this.transform.zoom),ie=c.aO(this.collisionIndex.transform,l,C.get("text-translate"),C.get("text-translate-anchor")),de=c.aO(this.collisionIndex.transform,l,C.get("icon-translate"),C.get("icon-translate-anchor")),le=ho(Z,this.transform,Q);this.retainedQueryData[w.bucketInstanceId]=new ah(w.bucketInstanceId,O,w.sourceLayerIndex,w.index,l.tileID);const pe={bucket:w,layout:A,translationText:ie,translationIcon:de,unwrappedTileID:G,pitchedLabelPlaneMatrix:le,scale:D,textPixelRatio:F,holdingForFade:l.holdingForSymbolFade(),collisionBoxArray:I,partiallyEvaluatedTextSize:c.ay(w.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(w.sourceID)};if(p)for(const be of w.sortKeyRanges){const{sortKey:ce,symbolInstanceStart:ye,symbolInstanceEnd:ke}=be;t.push({sortKey:ce,symbolInstanceStart:ye,symbolInstanceEnd:ke,parameters:pe})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:w.symbolInstances.length,parameters:pe})}attemptAnchorPlacement(t,o,l,p,w,O,I,A,C,D,F,G,Z,Q,ie,de,le,pe,be,ce){const ye=c.aP[t.textAnchor],ke=[t.textOffset0,t.textOffset1],me=ys(ye,l,p,ke,w),Ee=this.collisionIndex.placeCollisionBox(o,G,A,C,D,I,O,de,F.predicate,be,me,ce);if((!pe||this.collisionIndex.placeCollisionBox(pe,G,A,C,D,I,O,le,F.predicate,be,me,ce).placeable)&&Ee.placeable){let Ze;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Z.crossTileID]&&this.prevPlacement.placements[Z.crossTileID]&&this.prevPlacement.placements[Z.crossTileID].text&&(Ze=this.prevPlacement.variableOffsets[Z.crossTileID].anchor),Z.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Z.crossTileID]={textOffset:ke,width:l,height:p,anchor:ye,textBoxScale:w,prevAnchor:Ze},this.markUsedJustification(Q,ye,Z,ie),Q.allowVerticalPlacement&&(this.markUsedOrientation(Q,ie,Z),this.placedOrientations[Z.crossTileID]=ie),{shift:me,placedGlyphBoxes:Ee}}}placeLayerBucketPart(t,o,l){const{bucket:p,layout:w,translationText:O,translationIcon:I,unwrappedTileID:A,pitchedLabelPlaneMatrix:C,textPixelRatio:D,holdingForFade:F,collisionBoxArray:G,partiallyEvaluatedTextSize:Z,collisionGroup:Q}=t.parameters,ie=w.get("text-optional"),de=w.get("icon-optional"),le=c.aQ(w,"text-overlap","text-allow-overlap"),pe=le==="always",be=c.aQ(w,"icon-overlap","icon-allow-overlap"),ce=be==="always",ye=w.get("text-rotation-alignment")==="map",ke=w.get("text-pitch-alignment")==="map",me=w.get("icon-text-fit")!=="none",Ee=w.get("symbol-z-order")==="viewport-y",Ze=pe&&(ce||!p.hasIconData()||de),Ge=ce&&(pe||!p.hasTextData()||ie);!p.collisionArrays&&G&&p.deserializeCollisionBoxes(G);const qe=this.retainedQueryData[p.bucketInstanceId].tileID,Ve=this._getTerrainElevationFunc(qe),bt=this.transform.getFastPathSimpleProjectionMatrix(qe),vt=(ht,Tt,la)=>{var Ja,ws;if(o[ht.crossTileID])return;if(F)return void(this.placements[ht.crossTileID]=new Ds(!1,!1,!1));let ps=!1,Cs=!1,rs=!0,qs=null,Ms={box:null,placeable:!1,offscreen:null,occluded:!1},Nn={placeable:!1},Ks=null,Qs=null,Gn=null,Zr=0,Xr=0,pr=0;Tt.textFeatureIndex?Zr=Tt.textFeatureIndex:ht.useRuntimeCollisionCircles&&(Zr=ht.featureIndex),Tt.verticalTextFeatureIndex&&(Xr=Tt.verticalTextFeatureIndex);const Wo=Tt.textBox;if(Wo){const Zo=ss=>{let us=c.az.horizontal;if(p.allowVerticalPlacement&&!ss&&this.prevPlacement){const un=this.prevPlacement.placedOrientations[ht.crossTileID];un&&(this.placedOrientations[ht.crossTileID]=un,us=un,this.markUsedOrientation(p,us,ht))}return us},gi=(ss,us)=>{if(p.allowVerticalPlacement&&ht.numVerticalGlyphVertices>0&&Tt.verticalTextBox){for(const un of p.writingModes)if(un===c.az.vertical?(Ms=us(),Nn=Ms):Ms=ss(),Ms&&Ms.placeable)break}else Ms=ss()},Ni=ht.textAnchorOffsetStartIndex,Gi=ht.textAnchorOffsetEndIndex;if(Gi===Ni){const ss=(us,un)=>{const On=this.collisionIndex.placeCollisionBox(us,le,D,qe,A,ke,ye,O,Q.predicate,Ve,void 0,bt);return On&&On.placeable&&(this.markUsedOrientation(p,un,ht),this.placedOrientations[ht.crossTileID]=un),On};gi((()=>ss(Wo,c.az.horizontal)),(()=>{const us=Tt.verticalTextBox;return p.allowVerticalPlacement&&ht.numVerticalGlyphVertices>0&&us?ss(us,c.az.vertical):{box:null,offscreen:null}})),Zo(Ms&&Ms.placeable)}else{let ss=c.aP[(ws=(Ja=this.prevPlacement)===null||Ja===void 0?void 0:Ja.variableOffsets[ht.crossTileID])===null||ws===void 0?void 0:ws.anchor];const us=(On,Cf,Mf)=>{const Kh=On.x2-On.x1,cp=On.y2-On.y1,Qh=ht.textBoxScale,Lf=me&&be==="never"?Cf:null;let xh=null,Th=le==="never"?1:2,mr="never";ss&&Th++;for(let zf=0;zf<Th;zf++){for(let Qd=Ni;Qd<Gi;Qd++){const Jd=p.textAnchorOffsets.get(Qd);if(ss&&Jd.textAnchor!==ss)continue;const ef=this.attemptAnchorPlacement(Jd,On,Kh,cp,Qh,ye,ke,D,qe,A,Q,mr,ht,p,Mf,O,I,Lf,Ve);if(ef&&(xh=ef.placedGlyphBoxes,xh&&xh.placeable))return ps=!0,qs=ef.shift,xh}ss?ss=null:mr=le}return l&&!xh&&(xh={box:this.collisionIndex.placeCollisionBox(Wo,"always",D,qe,A,ke,ye,O,Q.predicate,Ve,void 0,bt).box,offscreen:!1,placeable:!1,occluded:!1}),xh};gi((()=>us(Wo,Tt.iconBox,c.az.horizontal)),(()=>{const On=Tt.verticalTextBox;return p.allowVerticalPlacement&&(!Ms||!Ms.placeable)&&ht.numVerticalGlyphVertices>0&&On?us(On,Tt.verticalIconBox,c.az.vertical):{box:null,occluded:!0,offscreen:null}})),Ms&&(ps=Ms.placeable,rs=Ms.offscreen);const un=Zo(Ms&&Ms.placeable);if(!ps&&this.prevPlacement){const On=this.prevPlacement.variableOffsets[ht.crossTileID];On&&(this.variableOffsets[ht.crossTileID]=On,this.markUsedJustification(p,On.anchor,ht,un))}}}if(Ks=Ms,ps=Ks&&Ks.placeable,rs=Ks&&Ks.offscreen,ht.useRuntimeCollisionCircles&&ht.centerJustifiedTextSymbolIndex>=0){const Zo=p.text.placedSymbolArray.get(ht.centerJustifiedTextSymbolIndex),gi=c.aA(p.textSizeData,Z,Zo),Ni=w.get("text-padding");Qs=this.collisionIndex.placeCollisionCircles(le,Zo,p.lineVertexArray,p.glyphOffsetArray,gi,A,C,l,ke,Q.predicate,ht.collisionCircleDiameter,Ni,O,Ve),Qs.circles.length&&Qs.collisionDetected&&!l&&c.w("Collisions detected, but collision boxes are not shown"),ps=pe||Qs.circles.length>0&&!Qs.collisionDetected,rs=rs&&Qs.offscreen}if(Tt.iconFeatureIndex&&(pr=Tt.iconFeatureIndex),Tt.iconBox){const Zo=gi=>this.collisionIndex.placeCollisionBox(gi,be,D,qe,A,ke,ye,I,Q.predicate,Ve,me&&qs?qs:void 0,bt);Nn&&Nn.placeable&&Tt.verticalIconBox?(Gn=Zo(Tt.verticalIconBox),Cs=Gn.placeable):(Gn=Zo(Tt.iconBox),Cs=Gn.placeable),rs=rs&&Gn.offscreen}const Pl=ie||ht.numHorizontalGlyphVertices===0&&ht.numVerticalGlyphVertices===0,ud=de||ht.numIconVertices===0;Pl||ud?ud?Pl||(Cs=Cs&&ps):ps=Cs&&ps:Cs=ps=Cs&&ps;const ur=Cs&&Gn.placeable;if(ps&&Ks.placeable&&this.collisionIndex.insertCollisionBox(Ks.box,le,w.get("text-ignore-placement"),p.bucketInstanceId,Nn&&Nn.placeable&&Xr?Xr:Zr,Q.ID),ur&&this.collisionIndex.insertCollisionBox(Gn.box,be,w.get("icon-ignore-placement"),p.bucketInstanceId,pr,Q.ID),Qs&&ps&&this.collisionIndex.insertCollisionCircles(Qs.circles,le,w.get("text-ignore-placement"),p.bucketInstanceId,Zr,Q.ID),l&&this.storeCollisionData(p.bucketInstanceId,la,Tt,Ks,Gn,Qs),ht.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(p.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[ht.crossTileID]=new Ds((ps||Ze)&&!(Ks!=null&&Ks.occluded),(Cs||Ge)&&!(Gn!=null&&Gn.occluded),rs||p.justReloaded),o[ht.crossTileID]=!0};if(Ee){if(t.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const ht=p.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Tt=ht.length-1;Tt>=0;--Tt){const la=ht[Tt];vt(p.symbolInstances.get(la),p.collisionArrays[la],la)}}else for(let ht=t.symbolInstanceStart;ht<t.symbolInstanceEnd;ht++)vt(p.symbolInstances.get(ht),p.collisionArrays[ht],ht);p.justReloaded=!1}storeCollisionData(t,o,l,p,w,O){if(l.textBox||l.iconBox){let I,A;this.collisionBoxArrays.has(t)?I=this.collisionBoxArrays.get(t):(I=new Map,this.collisionBoxArrays.set(t,I)),I.has(o)?A=I.get(o):(A={text:null,icon:null},I.set(o,A)),l.textBox&&(A.text=p.box),l.iconBox&&(A.icon=w.box)}if(O){let I=this.collisionCircleArrays[t];I===void 0&&(I=this.collisionCircleArrays[t]=[]);for(let A=0;A<O.circles.length;A+=4)I.push(O.circles[A+0]-xa),I.push(O.circles[A+1]-xa),I.push(O.circles[A+2]),I.push(O.collisionDetected?1:0)}}markUsedJustification(t,o,l,p){let w;w=p===c.az.vertical?l.verticalPlacedTextSymbolIndex:{left:l.leftJustifiedTextSymbolIndex,center:l.centerJustifiedTextSymbolIndex,right:l.rightJustifiedTextSymbolIndex}[c.aR(o)];const O=[l.leftJustifiedTextSymbolIndex,l.centerJustifiedTextSymbolIndex,l.rightJustifiedTextSymbolIndex,l.verticalPlacedTextSymbolIndex];for(const I of O)I>=0&&(t.text.placedSymbolArray.get(I).crossTileID=w>=0&&I!==w?0:l.crossTileID)}markUsedOrientation(t,o,l){const p=o===c.az.horizontal||o===c.az.horizontalOnly?o:0,w=o===c.az.vertical?o:0,O=[l.leftJustifiedTextSymbolIndex,l.centerJustifiedTextSymbolIndex,l.rightJustifiedTextSymbolIndex];for(const I of O)t.text.placedSymbolArray.get(I).placedOrientation=p;l.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(l.verticalPlacedTextSymbolIndex).placedOrientation=w)}commit(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;const o=this.prevPlacement;let l=!1;this.prevZoomAdjustment=o?o.zoomAdjustment(this.transform.zoom):0;const p=o?o.symbolFadeChange(t):1,w=o?o.opacities:{},O=o?o.variableOffsets:{},I=o?o.placedOrientations:{};for(const A in this.placements){const C=this.placements[A],D=w[A];D?(this.opacities[A]=new fa(D,p,C.text,C.icon),l=l||C.text!==D.text.placed||C.icon!==D.icon.placed):(this.opacities[A]=new fa(null,p,C.text,C.icon,C.skipFade),l=l||C.text||C.icon)}for(const A in w){const C=w[A];if(!this.opacities[A]){const D=new fa(C,p,!1,!1);D.isHidden()||(this.opacities[A]=D,l=l||C.text.placed||C.icon.placed)}}for(const A in O)this.variableOffsets[A]||!this.opacities[A]||this.opacities[A].isHidden()||(this.variableOffsets[A]=O[A]);for(const A in I)this.placedOrientations[A]||!this.opacities[A]||this.opacities[A].isHidden()||(this.placedOrientations[A]=I[A]);if(o&&o.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");l?this.lastPlacementChangeTime=t:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=o?o.lastPlacementChangeTime:t)}updateLayerOpacities(t,o){const l={};for(const p of o){const w=p.getBucket(t);w&&p.latestFeatureIndex&&t.id===w.layerIds[0]&&this.updateBucketOpacities(w,p.tileID,l,p.collisionBoxArray)}}updateBucketOpacities(t,o,l,p){t.hasTextData()&&(t.text.opacityVertexArray.clear(),t.text.hasVisibleVertices=!1),t.hasIconData()&&(t.icon.opacityVertexArray.clear(),t.icon.hasVisibleVertices=!1),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();const w=t.layers[0],O=w.layout,I=new fa(null,0,!1,!1,!0),A=O.get("text-allow-overlap"),C=O.get("icon-allow-overlap"),D=w._unevaluatedLayout.hasValue("text-variable-anchor")||w._unevaluatedLayout.hasValue("text-variable-anchor-offset"),F=O.get("text-rotation-alignment")==="map",G=O.get("text-pitch-alignment")==="map",Z=O.get("icon-text-fit")!=="none",Q=new fa(null,0,A&&(C||!t.hasIconData()||O.get("icon-optional")),C&&(A||!t.hasTextData()||O.get("text-optional")),!0);!t.collisionArrays&&p&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(p);const ie=(le,pe,be)=>{for(let ce=0;ce<pe/4;ce++)le.opacityVertexArray.emplaceBack(be);le.hasVisibleVertices=le.hasVisibleVertices||be!==Ki},de=this.collisionBoxArrays.get(t.bucketInstanceId);for(let le=0;le<t.symbolInstances.length;le++){const pe=t.symbolInstances.get(le),{numHorizontalGlyphVertices:be,numVerticalGlyphVertices:ce,crossTileID:ye}=pe;let ke=this.opacities[ye];l[ye]?ke=I:ke||(ke=Q,this.opacities[ye]=ke),l[ye]=!0;const me=pe.numIconVertices>0,Ee=this.placedOrientations[pe.crossTileID],Ze=Ee===c.az.vertical,Ge=Ee===c.az.horizontal||Ee===c.az.horizontalOnly;if(be>0||ce>0){const Ve=Hh(ke.text);ie(t.text,be,Ze?Ki:Ve),ie(t.text,ce,Ge?Ki:Ve);const bt=ke.text.isHidden();[pe.rightJustifiedTextSymbolIndex,pe.centerJustifiedTextSymbolIndex,pe.leftJustifiedTextSymbolIndex].forEach((Tt=>{Tt>=0&&(t.text.placedSymbolArray.get(Tt).hidden=bt||Ze?1:0)})),pe.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(pe.verticalPlacedTextSymbolIndex).hidden=bt||Ge?1:0);const vt=this.variableOffsets[pe.crossTileID];vt&&this.markUsedJustification(t,vt.anchor,pe,Ee);const ht=this.placedOrientations[pe.crossTileID];ht&&(this.markUsedJustification(t,"left",pe,ht),this.markUsedOrientation(t,ht,pe))}if(me){const Ve=Hh(ke.icon),bt=!(Z&&pe.verticalPlacedIconSymbolIndex&&Ze);pe.placedIconSymbolIndex>=0&&(ie(t.icon,pe.numIconVertices,bt?Ve:Ki),t.icon.placedSymbolArray.get(pe.placedIconSymbolIndex).hidden=ke.icon.isHidden()),pe.verticalPlacedIconSymbolIndex>=0&&(ie(t.icon,pe.numVerticalIconVertices,bt?Ki:Ve),t.icon.placedSymbolArray.get(pe.verticalPlacedIconSymbolIndex).hidden=ke.icon.isHidden())}const qe=de&&de.has(le)?de.get(le):{text:null,icon:null};if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){const Ve=t.collisionArrays[le];if(Ve){let bt=new c.P(0,0);if(Ve.textBox||Ve.verticalTextBox){let vt=!0;if(D){const ht=this.variableOffsets[ye];ht?(bt=ys(ht.anchor,ht.width,ht.height,ht.textOffset,ht.textBoxScale),F&&bt._rotate(G?-this.transform.bearingInRadians:this.transform.bearingInRadians)):vt=!1}if(Ve.textBox||Ve.verticalTextBox){let ht;Ve.textBox&&(ht=Ze),Ve.verticalTextBox&&(ht=Ge),sh(t.textCollisionBox.collisionVertexArray,ke.text.placed,!vt||ht,qe.text,bt.x,bt.y)}}if(Ve.iconBox||Ve.verticalIconBox){const vt=!!(!Ge&&Ve.verticalIconBox);let ht;Ve.iconBox&&(ht=vt),Ve.verticalIconBox&&(ht=!vt),sh(t.iconCollisionBox.collisionVertexArray,ke.icon.placed,ht,qe.icon,Z?bt.x:0,Z?bt.y:0)}}}}if(t.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.text.opacityVertexArray.length!==t.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${t.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${t.text.layoutVertexArray.length}) / 4`);if(t.icon.opacityVertexArray.length!==t.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${t.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${t.icon.layoutVertexArray.length}) / 4`);t.bucketInstanceId in this.collisionCircleArrays&&(t.collisionCircleArray=this.collisionCircleArrays[t.bucketInstanceId],delete this.collisionCircleArrays[t.bucketInstanceId])}symbolFadeChange(t){return this.fadeDuration===0?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(t){return Math.max(0,(this.transform.zoom-t)/1.5)}hasTransitions(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(t,o){const l=this.zoomAtLastRecencyCheck===o?1-this.zoomAdjustment(o):1;return this.zoomAtLastRecencyCheck=o,this.commitTime+this.fadeDuration*l>t}setStale(){this.stale=!0}}function sh(g,t,o,l,p,w){l&&l.length!==0||(l=[0,0,0,0]);const O=l[0]-xa,I=l[1]-xa,A=l[2]-xa,C=l[3]-xa;g.emplaceBack(t?1:0,o?1:0,p||0,w||0,O,I),g.emplaceBack(t?1:0,o?1:0,p||0,w||0,A,I),g.emplaceBack(t?1:0,o?1:0,p||0,w||0,A,C),g.emplaceBack(t?1:0,o?1:0,p||0,w||0,O,C)}const si=Math.pow(2,25),cs=Math.pow(2,24),Ir=Math.pow(2,17),Ai=Math.pow(2,16),Co=Math.pow(2,9),$l=Math.pow(2,8),ni=Math.pow(2,1);function Hh(g){if(g.opacity===0&&!g.placed)return 0;if(g.opacity===1&&g.placed)return 4294967295;const t=g.placed?1:0,o=Math.floor(127*g.opacity);return o*si+t*cs+o*Ir+t*Ai+o*Co+t*$l+o*ni+t}const Ki=0;class oi{constructor(t){this._sortAcrossTiles=t.layout.get("symbol-z-order")!=="viewport-y"&&!t.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(t,o,l,p,w){const O=this._bucketParts;for(;this._currentTileIndex<t.length;)if(o.getBucketParts(O,p,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,w())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,O.sort(((I,A)=>I.sortKey-A.sortKey)));this._currentPartIndex<O.length;)if(o.placeLayerBucketPart(O[this._currentPartIndex],this._seenCrossTileIDs,l),this._currentPartIndex++,w())return!0;return!1}}class xr{constructor(t,o,l,p,w,O,I,A){this.placement=new hl(t,o,O,I,A),this._currentPlacementIndex=l.length-1,this._forceFullPlacement=p,this._showCollisionBoxes=w,this._done=!1}isDone(){return this._done}continuePlacement(t,o,l){const p=it(),w=()=>!this._forceFullPlacement&&it()-p>2;for(;this._currentPlacementIndex>=0;){const O=o[t[this._currentPlacementIndex]],I=this.placement.collisionIndex.transform.zoom;if(O.type==="symbol"&&(!O.minzoom||O.minzoom<=I)&&(!O.maxzoom||O.maxzoom>I)){if(this._inProgressLayer||(this._inProgressLayer=new oi(O)),this._inProgressLayer.continuePlacement(l[O.source],this.placement,this._showCollisionBoxes,O,w))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(t){return this.placement.commit(t),this.placement}}const ra=512/c.a5/2;class lo{constructor(t,o,l){this.tileID=t,this.bucketInstanceId=l,this._symbolsByKey={};const p=new Map;for(let w=0;w<o.length;w++){const O=o.get(w),I=O.key,A=p.get(I);A?A.push(O):p.set(I,[O])}for(const[w,O]of p){const I={positions:O.map((A=>({x:Math.floor(A.anchorX*ra),y:Math.floor(A.anchorY*ra)}))),crossTileIDs:O.map((A=>A.crossTileID))};if(I.positions.length>128){const A=new c.aT(I.positions.length,16,Uint16Array);for(const{x:C,y:D}of I.positions)A.add(C,D);A.finish(),delete I.positions,I.index=A}this._symbolsByKey[w]=I}}getScaledCoordinates(t,o){const{x:l,y:p,z:w}=this.tileID.canonical,{x:O,y:I,z:A}=o.canonical,C=ra/Math.pow(2,A-w),D=(I*c.a5+t.anchorY)*C,F=p*c.a5*ra;return{x:Math.floor((O*c.a5+t.anchorX)*C-l*c.a5*ra),y:Math.floor(D-F)}}findMatches(t,o,l){const p=this.tileID.canonical.z<o.canonical.z?1:Math.pow(2,this.tileID.canonical.z-o.canonical.z);for(let w=0;w<t.length;w++){const O=t.get(w);if(O.crossTileID)continue;const I=this._symbolsByKey[O.key];if(!I)continue;const A=this.getScaledCoordinates(O,o);if(I.index){const C=I.index.range(A.x-p,A.y-p,A.x+p,A.y+p).sort();for(const D of C){const F=I.crossTileIDs[D];if(!l[F]){l[F]=!0,O.crossTileID=F;break}}}else if(I.positions)for(let C=0;C<I.positions.length;C++){const D=I.positions[C],F=I.crossTileIDs[C];if(Math.abs(D.x-A.x)<=p&&Math.abs(D.y-A.y)<=p&&!l[F]){l[F]=!0,O.crossTileID=F;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:t})=>t))}}class Kl{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class nh{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(t){const o=Math.round((t-this.lng)/360);if(o!==0)for(const l in this.indexes){const p=this.indexes[l],w={};for(const O in p){const I=p[O];I.tileID=I.tileID.unwrapTo(I.tileID.wrap+o),w[I.tileID.key]=I}this.indexes[l]=w}this.lng=t}addBucket(t,o,l){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===o.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(let w=0;w<o.symbolInstances.length;w++)o.symbolInstances.get(w).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});const p=this.usedCrossTileIDs[t.overscaledZ];for(const w in this.indexes){const O=this.indexes[w];if(Number(w)>t.overscaledZ)for(const I in O){const A=O[I];A.tileID.isChildOf(t)&&A.findMatches(o.symbolInstances,t,p)}else{const I=O[t.scaledTo(Number(w)).key];I&&I.findMatches(o.symbolInstances,t,p)}}for(let w=0;w<o.symbolInstances.length;w++){const O=o.symbolInstances.get(w);O.crossTileID||(O.crossTileID=l.generate(),p[O.crossTileID]=!0)}return this.indexes[t.overscaledZ]===void 0&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new lo(t,o.symbolInstances,o.bucketInstanceId),!0}removeBucketCrossTileIDs(t,o){for(const l of o.getCrossTileIDsLists())for(const p of l)delete this.usedCrossTileIDs[t][p]}removeStaleBuckets(t){let o=!1;for(const l in this.indexes){const p=this.indexes[l];for(const w in p)t[p[w].bucketInstanceId]||(this.removeBucketCrossTileIDs(l,p[w]),delete p[w],o=!0)}return o}}class fn{constructor(){this.layerIndexes={},this.crossTileIDs=new Kl,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(t,o,l){let p=this.layerIndexes[t.id];p===void 0&&(p=this.layerIndexes[t.id]=new nh);let w=!1;const O={};p.handleWrapJump(l);for(const I of o){const A=I.getBucket(t);A&&t.id===A.layerIds[0]&&(A.bucketInstanceId||(A.bucketInstanceId=++this.maxBucketInstanceId),p.addBucket(I.tileID,A,this.crossTileIDs)&&(w=!0),O[A.bucketInstanceId]=!0)}return p.removeStaleBuckets(O)&&(w=!0),w}pruneUnusedLayers(t){const o={};t.forEach((l=>{o[l]=!0}));for(const l in this.layerIndexes)o[l]||delete this.layerIndexes[l]}}var Wt="void main() {fragColor=vec4(1.0);}";const Ba={prelude:Nt(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:Nt("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:Nt("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:Nt(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:Nt(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Nt(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Nt(Wt,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:Nt(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:Nt(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Nt("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Nt("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:Nt(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:Nt("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:Nt(Wt,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:Nt(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:Nt(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:Nt(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:Nt(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Nt(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Nt(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Nt(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Nt(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:Nt(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Nt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Nt(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Nt(`uniform lowp float u_device_pixel_ratio;uniform lowp float u_lineatlas_width;uniform sampler2D u_image;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0/u_device_pixel_ratio)/min(dasharray_from.w,dasharray_to.w);alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),lineGradientSDF:Nt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform sampler2D u_image_dash;uniform float u_mix;uniform lowp float u_lineatlas_width;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);float sdfdist_a=texture(u_image_dash,v_tex_a).a;float sdfdist_b=texture(u_image_dash,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);float dash_alpha=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*dash_alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;out vec2 v_tex_a;out vec2 v_tex_b;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;float texel_height=1.0/u_image_height;float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),raster:Nt(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:Nt(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Nt(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Nt(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Nt("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Nt("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Nt("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:Nt("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:Nt(`#ifdef GL_ES
precision highp float;
#endif
in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:Nt("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Nt(g,t){const o=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,l=t.match(/in ([\w]+) ([\w]+)/g),p=g.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),O=w?w.concat(p):p,I={};return{fragmentSource:g=g.replace(o,((A,C,D,F,G)=>(I[G]=!0,C==="define"?`
#ifndef HAS_UNIFORM_u_${G}
in ${D} ${F} ${G};
#else
uniform ${D} ${F} u_${G};
#endif
`:`
#ifdef HAS_UNIFORM_u_${G}
    ${D} ${F} ${G} = u_${G};
#endif
`))),vertexSource:t=t.replace(o,((A,C,D,F,G)=>{const Z=F==="float"?"vec2":"vec4",Q=G.match(/color/)?"color":Z;return I[G]?C==="define"?`
#ifndef HAS_UNIFORM_u_${G}
uniform lowp float u_${G}_t;
in ${D} ${Z} a_${G};
out ${D} ${F} ${G};
#else
uniform ${D} ${F} u_${G};
#endif
`:Q==="vec4"?`
#ifndef HAS_UNIFORM_u_${G}
    ${G} = a_${G};
#else
    ${D} ${F} ${G} = u_${G};
#endif
`:`
#ifndef HAS_UNIFORM_u_${G}
    ${G} = unpack_mix_${Q}(a_${G}, u_${G}_t);
#else
    ${D} ${F} ${G} = u_${G};
#endif
`:C==="define"?`
#ifndef HAS_UNIFORM_u_${G}
uniform lowp float u_${G}_t;
in ${D} ${Z} a_${G};
#else
uniform ${D} ${F} u_${G};
#endif
`:Q==="vec4"?`
#ifndef HAS_UNIFORM_u_${G}
    ${D} ${F} ${G} = a_${G};
#else
    ${D} ${F} ${G} = u_${G};
#endif
`:`
#ifndef HAS_UNIFORM_u_${G}
    ${D} ${F} ${G} = unpack_mix_${Q}(a_${G}, u_${G}_t);
#else
    ${D} ${F} ${G} = u_${G};
#endif
`})),staticAttributes:l,staticUniforms:O}}class $a{constructor(t,o,l){this.vertexBuffer=t,this.indexBuffer=o,this.segments=l}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var fo=c.aU([{name:"a_pos",type:"Int16",components:2}]);const Os="#define PROJECTION_MERCATOR",Pn="mercator";class ks{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return Pn}get shaderDefine(){return Os}get shaderPreludeCode(){return Ba.projectionMercator}get vertexShaderPreludeCode(){return Ba.projectionMercator.vertexSource}get subdivisionGranularity(){return c.aV.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(t){}getMeshFromTileID(t,o,l,p,w){if(this._cachedMesh)return this._cachedMesh;const O=new c.aW;O.emplaceBack(0,0),O.emplaceBack(c.a5,0),O.emplaceBack(0,c.a5),O.emplaceBack(c.a5,c.a5);const I=t.createVertexBuffer(O,fo.members),A=c.aX.simpleSegment(0,0,4,2),C=new c.aY;C.emplaceBack(1,0,2),C.emplaceBack(1,2,3);const D=t.createIndexBuffer(C);return this._cachedMesh=new $a(I,D,A),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(t){}}class Qn{constructor(t=0,o=0,l=0,p=0){if(isNaN(t)||t<0||isNaN(o)||o<0||isNaN(l)||l<0||isNaN(p)||p<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=o,this.left=l,this.right=p}interpolate(t,o,l){return o.top!=null&&t.top!=null&&(this.top=c.G.number(t.top,o.top,l)),o.bottom!=null&&t.bottom!=null&&(this.bottom=c.G.number(t.bottom,o.bottom,l)),o.left!=null&&t.left!=null&&(this.left=c.G.number(t.left,o.left,l)),o.right!=null&&t.right!=null&&(this.right=c.G.number(t.right,o.right,l)),this}getCenter(t,o){const l=c.an((this.left+t-this.right)/2,0,t),p=c.an((this.top+o-this.bottom)/2,0,o);return new c.P(l,p)}equals(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}clone(){return new Qn(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function co(g,t){if(!g.renderWorldCopies||g.lngRange)return;const o=t.lng-g.center.lng;t.lng+=o>180?-360:o<-180?360:0}function wa(g){return Math.max(0,Math.floor(g))}class po{constructor(t,o){var l;this.applyConstrain=(p,w)=>this._constrainOverride!==null?this._constrainOverride(p,w):this._callbacks.defaultConstrain(p,w),this._callbacks=t,this._tileSize=512,this._renderWorldCopies=(o==null?void 0:o.renderWorldCopies)===void 0||!!(o!=null&&o.renderWorldCopies),this._minZoom=(o==null?void 0:o.minZoom)||0,this._maxZoom=(o==null?void 0:o.maxZoom)||22,this._minPitch=(o==null?void 0:o.minPitch)==null?0:o==null?void 0:o.minPitch,this._maxPitch=(o==null?void 0:o.maxPitch)==null?60:o==null?void 0:o.maxPitch,this._constrainOverride=(l=o==null?void 0:o.constrainOverride)!==null&&l!==void 0?l:null,this.setMaxBounds(),this._width=0,this._height=0,this._center=new c.V(0,0),this._elevation=0,this._zoom=0,this._tileZoom=wa(this._zoom),this._scale=c.aq(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Qn,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(t,o,l){this._constrainOverride=t.constrainOverride,this._latRange=t.latRange,this._lngRange=t.lngRange,this._width=t.width,this._height=t.height,this._center=t.center,this._elevation=t.elevation,this._minElevationForCurrentTile=t.minElevationForCurrentTile,this._zoom=t.zoom,this._tileZoom=wa(this._zoom),this._scale=c.aq(this._zoom),this._bearingInRadians=t.bearingInRadians,this._fovInRadians=t.fovInRadians,this._pitchInRadians=t.pitchInRadians,this._rollInRadians=t.rollInRadians,this._unmodified=t.unmodified,this._edgeInsets=new Qn(t.padding.top,t.padding.bottom,t.padding.left,t.padding.right),this._minZoom=t.minZoom,this._maxZoom=t.maxZoom,this._minPitch=t.minPitch,this._maxPitch=t.maxPitch,this._renderWorldCopies=t.renderWorldCopies,this._cameraToCenterDistance=t.cameraToCenterDistance,this._nearZ=t.nearZ,this._farZ=t.farZ,this._autoCalculateNearFarZ=!l&&t.autoCalculateNearFarZ,o&&this.constrainInternal(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(t){this._minElevationForCurrentTile=t}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(t){this._minZoom!==t&&(this._minZoom=t,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(t){this._minPitch!==t&&(this._minPitch=t,this.setPitch(Math.max(this.pitch,t)))}get maxPitch(){return this._maxPitch}setMaxPitch(t){this._maxPitch!==t&&(this._maxPitch=t,this.setPitch(Math.min(this.pitch,t)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(t){t===void 0?t=!0:t===null&&(t=!1),this._renderWorldCopies=t}get constrainOverride(){return this._constrainOverride}setConstrainOverride(t){t===void 0&&(t=null),this._constrainOverride!==t&&(this._constrainOverride=t,this.constrainInternal(),this._calcMatrices())}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new c.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(t){const o=c.W(t,-180,180)*Math.PI/180;var l,p,w,O,I,A,C,D,F;this._bearingInRadians!==o&&(this._unmodified=!1,this._bearingInRadians=o,this._calcMatrices(),this._rotationMatrix=fe(),l=this._rotationMatrix,w=-this._bearingInRadians,O=(p=this._rotationMatrix)[0],I=p[1],A=p[2],C=p[3],D=Math.sin(w),F=Math.cos(w),l[0]=O*F+A*D,l[1]=I*F+C*D,l[2]=O*-D+A*F,l[3]=I*-D+C*F)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(t){const o=c.an(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==o&&(this._unmodified=!1,this._pitchInRadians=o,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(t){const o=t/180*Math.PI;this._rollInRadians!==o&&(this._unmodified=!1,this._rollInRadians=o,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return c.aZ(this._fovInRadians)}setFov(t){t=c.an(t,.1,150),this.fov!==t&&(this._unmodified=!1,this._fovInRadians=c.ap(t),this._calcMatrices())}get zoom(){return this._zoom}setZoom(t){const o=this.applyConstrain(this._center,t).zoom;this._zoom!==o&&(this._unmodified=!1,this._zoom=o,this._tileZoom=Math.max(0,Math.floor(o)),this._scale=c.aq(o),this.constrainInternal(),this._calcMatrices())}get center(){return this._center}setCenter(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this.constrainInternal(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(t){t!==this._elevation&&(this._elevation=t,this.constrainInternal(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(t,o){this._autoCalculateNearFarZ=!1,this._nearZ=t,this._farZ=o,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(t){return this._edgeInsets.equals(t)}interpolatePadding(t,o,l){this._unmodified=!1,this._edgeInsets.interpolate(t,o,l),this.constrainInternal(),this._calcMatrices()}resize(t,o,l=!0){this._width=t,this._height=o,l&&this.constrainInternal(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new vs([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(t){t?(this._lngRange=[t.getWest(),t.getEast()],this._latRange=[t.getSouth(),t.getNorth()],this.constrainInternal()):(this._lngRange=null,this._latRange=[-c.ao,c.ao])}getCameraQueryGeometry(t,o){if(o.length===1)return[o[0],t];{const{minX:l,minY:p,maxX:w,maxY:O}=c.aa.fromPoints(o).extend(t);return[new c.P(l,p),new c.P(w,p),new c.P(w,O),new c.P(l,O),new c.P(l,p)]}}constrainInternal(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const t=this._unmodified,{center:o,zoom:l}=this.applyConstrain(this.center,this.zoom);this.setCenter(o),this.setZoom(l),this._unmodified=t,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let t=c.ar(new Float64Array(16));c.Q(t,t,[this._width/2,-this._height/2,1]),c.O(t,t,[1,-1,0]),this._clipSpaceToPixelsMatrix=t,t=c.ar(new Float64Array(16)),c.Q(t,t,[1,-1,1]),c.O(t,t,[-1,-1,0]),c.Q(t,t,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=t,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(t,o,l,p){const w=l!==void 0?l:this.bearing,O=p=p!==void 0?p:this.pitch,{distanceToCenter:I,clampedElevation:A}=this._distanceToCenterFromAltElevationPitch(o,this.elevation,O),{x:C,y:D}=Za(O,w),F=c.a9.fromLngLat(t,o);let G,Z,Q=c.a_(1,F.y),ie=0;do{if(ie+=1,ie>10)break;Z=I/Q,G=new c.a9(F.x+C*Z,F.y+D*Z),Q=1/G.meterInMercatorCoordinateUnits()}while(Math.abs(I-Z*Q)>1e-12);return{center:G.toLngLat(),elevation:A,zoom:c.at(this.height/2/Math.tan(this.fovInRadians/2)/Z/this.tileSize)}}recalculateZoomAndCenter(t){if(this.elevation-t==0)return;const o=1/this.worldSize,l=c.as(1,this.center.lat)*this.worldSize,p=c.a9.fromLngLat(this.center,this.elevation),w=p.x/o,O=p.y/o,I=p.z/o,A=this.pitch,C=this.bearing,{x:D,y:F,z:G}=Za(A,C),Z=this.cameraToCenterDistance,Q=w+Z*-D,ie=O+Z*-F,de=I+Z*G,{distanceToCenter:le,clampedElevation:pe}=this._distanceToCenterFromAltElevationPitch(de/l,t,A),be=le*l,ce=new c.a9((Q+D*be)*o,(ie+F*be)*o,0).toLngLat(),ye=c.as(1,ce.lat),ke=c.at(this.height/2/Math.tan(this.fovInRadians/2)/le/ye/this.tileSize);this._elevation=pe,this._center=ce,this.setZoom(ke)}_distanceToCenterFromAltElevationPitch(t,o,l){const p=-Math.cos(c.ap(l)),w=t-o;let O,I=o;return p*w>=0||Math.abs(p)<.1?(O=1e4,I=t+O*p):O=-w/p,{distanceToCenter:O,clampedElevation:I}}getCameraPoint(){const t=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new c.P(t*Math.sin(this.rollInRadians),t*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const t=c.as(1,this.center.lat)*this.worldSize;return Ne(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/t).toLngLat()}getMercatorTileCoordinates(t){if(!t)return[0,0,1,1];const o=t.canonical.z>=0?1<<t.canonical.z:Math.pow(2,t.canonical.z);return[t.canonical.x/o,t.canonical.y/o,1/o/c.a5,1/o/c.a5]}}class uo{constructor(t,o){this.min=t,this.max=o,this.center=c.a$([],c.b0([],this.min,this.max),.5)}quadrant(t){const o=[t%2==0,t<2],l=c.b1(this.min),p=c.b1(this.max);for(let w=0;w<o.length;w++)l[w]=o[w]?this.min[w]:this.center[w],p[w]=o[w]?this.center[w]:this.max[w];return p[2]=this.max[2],new uo(l,p)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}intersectsFrustum(t){let o=!0;for(let l=0;l<t.planes.length;l++){const p=this.intersectsPlane(t.planes[l]);if(p===0)return 0;p===1&&(o=!1)}return o?2:t.aabb.min[0]>this.max[0]||t.aabb.min[1]>this.max[1]||t.aabb.min[2]>this.max[2]||t.aabb.max[0]<this.min[0]||t.aabb.max[1]<this.min[1]||t.aabb.max[2]<this.min[2]?0:1}intersectsPlane(t){let o=t[3],l=t[3];for(let p=0;p<3;p++)t[p]>0?(o+=t[p]*this.min[p],l+=t[p]*this.max[p]):(l+=t[p]*this.min[p],o+=t[p]*this.max[p]);return o>=0?2:l<0?0:1}}class Tr{distanceToTile2d(t,o,l,p){const w=p.distanceX([t,o]),O=p.distanceY([t,o]);return Math.hypot(w,O)}getWrap(t,o,l){return l}getTileBoundingVolume(t,o,l,p){var w,O;let I=0,A=0;if(p!=null&&p.terrain){const D=new c.a2(t.z,o,t.z,t.x,t.y),F=p.terrain.getMinMaxElevation(D);I=(w=F.minElevation)!==null&&w!==void 0?w:Math.min(0,l),A=(O=F.maxElevation)!==null&&O!==void 0?O:Math.max(0,l)}const C=1<<t.z;return new uo([o+t.x/C,t.y/C,I],[o+(t.x+1)/C,(t.y+1)/C,A])}allowVariableZoom(t,o){const l=t.fov*(Math.abs(Math.cos(t.rollInRadians))*t.height+Math.abs(Math.sin(t.rollInRadians))*t.width)/t.height,p=c.an(78.5-l/2,0,60);return!!o.terrain||t.pitch>p}allowWorldCopies(){return!0}prepareNextFrame(){}}class Jn{constructor(t,o,l){this.points=t,this.planes=o,this.aabb=l}static fromInvProjectionMatrix(t,o=1,l=0,p,w){const O=w?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],I=Math.pow(2,l),A=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((G=>(function(Z,Q,ie,de){const le=c.aH([],Z,Q),pe=1/le[3]/ie*de;return c.b6(le,le,[pe,pe,1/le[3],pe])})(G,t,o,I)));p&&(function(G,Z,Q,ie){const de=ie?4:0,le=ie?0:4;let pe=0;const be=[],ce=[];for(let me=0;me<4;me++){const Ee=c.b2([],G[me+le],G[me+de]),Ze=c.b7(Ee);c.a$(Ee,Ee,1/Ze),be.push(Ze),ce.push(Ee)}for(let me=0;me<4;me++){const Ee=c.b8(G[me+de],ce[me],Q);pe=Ee!==null&&Ee>=0?Math.max(pe,Ee):Math.max(pe,be[me])}const ye=(function(me,Ee){const Ze=c.b2([],me[Ee[0]],me[Ee[1]]),Ge=c.b2([],me[Ee[2]],me[Ee[1]]),qe=[0,0,0,0];return c.b3(qe,c.b4([],Ze,Ge)),qe[3]=-c.b5(qe,me[Ee[0]]),qe})(G,Z),ke=(function(me,Ee){const Ze=c.b9(me),Ge=c.ba([],me,1/Ze),qe=c.b2([],Ee,c.a$([],Ge,c.b5(Ee,Ge))),Ve=c.b9(qe);if(Ve>0){const bt=Math.sqrt(1-Ge[3]*Ge[3]),vt=c.a$([],Ge,-Ge[3]),ht=c.b0([],vt,c.a$([],qe,bt/Ve));return c.bb(Ee,ht)}return null})(Q,ye);if(ke!==null){const me=ke/c.b5(ce[0],ye);pe=Math.min(pe,me)}for(let me=0;me<4;me++){const Ee=Math.min(pe,be[me]);G[me+le]=[G[me+de][0]+ce[me][0]*Ee,G[me+de][1]+ce[me][1]*Ee,G[me+de][2]+ce[me][2]*Ee,1]}})(A,O[0],p,w);const C=O.map((G=>{const Z=c.b2([],A[G[0]],A[G[1]]),Q=c.b2([],A[G[2]],A[G[1]]),ie=c.b3([],c.b4([],Z,Q)),de=-c.b5(ie,A[G[1]]);return ie.concat(de)})),D=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],F=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const G of A)for(let Z=0;Z<3;Z++)D[Z]=Math.min(D[Z],G[Z]),F[Z]=Math.max(F[Z],G[Z]);return new Jn(A,C,new uo(D,F))}}class Xs{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(t){this._helper.setMinZoom(t)}setMaxZoom(t){this._helper.setMaxZoom(t)}setMinPitch(t){this._helper.setMinPitch(t)}setMaxPitch(t){this._helper.setMaxPitch(t)}setRenderWorldCopies(t){this._helper.setRenderWorldCopies(t)}setBearing(t){this._helper.setBearing(t)}setPitch(t){this._helper.setPitch(t)}setRoll(t){this._helper.setRoll(t)}setFov(t){this._helper.setFov(t)}setZoom(t){this._helper.setZoom(t)}setCenter(t){this._helper.setCenter(t)}setElevation(t){this._helper.setElevation(t)}setMinElevationForCurrentTile(t){this._helper.setMinElevationForCurrentTile(t)}setPadding(t){this._helper.setPadding(t)}interpolatePadding(t,o,l){return this._helper.interpolatePadding(t,o,l)}isPaddingEqual(t){return this._helper.isPaddingEqual(t)}resize(t,o,l=!0){this._helper.resize(t,o,l)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(t){this._helper.setMaxBounds(t)}setConstrainOverride(t){this._helper.setConstrainOverride(t)}overrideNearFarZ(t,o){this._helper.overrideNearFarZ(t,o)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(t){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),t)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(t,o){}constructor(t){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this.defaultConstrain=(o,l)=>{l=c.an(+l,this.minZoom,this.maxZoom);const p={center:new c.V(o.lng,o.lat),zoom:l};let w=this._helper._lngRange;if(!this._helper._renderWorldCopies&&w===null){const ce=179.9999999999;w=[-ce,ce]}const O=this.tileSize*c.aq(p.zoom);let I=0,A=O,C=0,D=O,F=0,G=0;const{x:Z,y:Q}=this.size;if(this._helper._latRange){const ce=this._helper._latRange;I=c.X(ce[1])*O,A=c.X(ce[0])*O,A-I<Q&&(F=Q/(A-I))}w&&(C=c.W(c.Y(w[0])*O,0,O),D=c.W(c.Y(w[1])*O,0,O),D<C&&(D+=O),D-C<Z&&(G=Z/(D-C)));const{x:ie,y:de}=Ut(O,o);let le,pe;const be=Math.max(G||0,F||0);if(be){const ce=new c.P(G?(D+C)/2:ie,F?(A+I)/2:de);return p.center=Jt(O,ce).wrap(),p.zoom+=c.at(be),p}if(this._helper._latRange){const ce=Q/2;de-ce<I&&(pe=I+ce),de+ce>A&&(pe=A-ce)}if(w){const ce=(C+D)/2;let ye=ie;this._helper._renderWorldCopies&&(ye=c.W(ie,ce-O/2,ce+O/2));const ke=Z/2;ye-ke<C&&(le=C+ke),ye+ke>D&&(le=D-ke)}if(le!==void 0||pe!==void 0){const ce=new c.P(le!=null?le:ie,pe!=null?pe:de);p.center=Jt(O,ce).wrap()}return p},this.applyConstrain=(o,l)=>this._helper.applyConstrain(o,l),this._helper=new po({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(o,l)=>this.defaultConstrain(o,l)},t),this._coveringTilesDetailsProvider=new Tr}clone(){const t=new Xs;return t.apply(this,!1),t}apply(t,o,l){this._helper.apply(t,o,l)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(t){const o=[new c.bc(0,t)];if(this._helper._renderWorldCopies){const l=this.screenPointToMercatorCoordinate(new c.P(0,0)),p=this.screenPointToMercatorCoordinate(new c.P(this._helper._width,0)),w=this.screenPointToMercatorCoordinate(new c.P(this._helper._width,this._helper._height)),O=this.screenPointToMercatorCoordinate(new c.P(0,this._helper._height)),I=Math.floor(Math.min(l.x,p.x,w.x,O.x)),A=Math.floor(Math.max(l.x,p.x,w.x,O.x)),C=1;for(let D=I-C;D<=A+C;D++)D!==0&&o.push(new c.bc(D,t))}return o}getCameraFrustum(){return Jn.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(t){const o=this.screenPointToLocation(this.centerPoint,t),l=t?t.getElevationForLngLatZoom(o,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(l)}setLocationAtPoint(t,o){const l=c.as(this.elevation,this.center.lat),p=this.screenPointToMercatorCoordinateAtZ(o,l),w=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,l),O=c.a9.fromLngLat(t),I=new c.a9(O.x-(p.x-w.x),O.y-(p.y-w.y));this.setCenter(I==null?void 0:I.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(t,o){return o?this.coordinatePoint(c.a9.fromLngLat(t),o.getElevationForLngLat(t,this),this._pixelMatrix3D):this.coordinatePoint(c.a9.fromLngLat(t))}screenPointToLocation(t,o){var l;return(l=this.screenPointToMercatorCoordinate(t,o))===null||l===void 0?void 0:l.toLngLat()}screenPointToMercatorCoordinate(t,o){if(o){const l=o.pointCoordinate(t);if(l!=null)return l}return this.screenPointToMercatorCoordinateAtZ(t)}screenPointToMercatorCoordinateAtZ(t,o){const l=o||0,p=[t.x,t.y,0,1],w=[t.x,t.y,1,1];c.aH(p,p,this._pixelMatrixInverse),c.aH(w,w,this._pixelMatrixInverse);const O=p[3],I=w[3],A=p[1]/O,C=w[1]/I,D=p[2]/O,F=w[2]/I,G=D===F?0:(l-D)/(F-D);return new c.a9(c.G.number(p[0]/O,w[0]/I,G)/this.worldSize,c.G.number(A,C,G)/this.worldSize,l)}coordinatePoint(t,o=0,l=this._pixelMatrix){const p=[t.x*this.worldSize,t.y*this.worldSize,o,1];return c.aH(p,p,l),new c.P(p[0]/p[3],p[1]/p[3])}getBounds(){const t=Math.max(0,this._helper._height/2-Ga(this));return new vs().extend(this.screenPointToLocation(new c.P(0,t))).extend(this.screenPointToLocation(new c.P(this._helper._width,t))).extend(this.screenPointToLocation(new c.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new c.P(0,this._helper._height)))}isPointOnMapSurface(t,o){return o?o.pointCoordinate(t)!=null:t.y>this.height/2-Ga(this)}calculatePosMatrix(t,o=!1,l){var p;const w=(p=t.key)!==null&&p!==void 0?p:c.bd(t.wrap,t.canonical.z,t.canonical.z,t.canonical.x,t.canonical.y),O=o?this._alignedPosMatrixCache:this._posMatrixCache;if(O.has(w)){const C=O.get(w);return l?C.f32:C.f64}const I=Ea(t,this.worldSize);c.S(I,o?this._alignedProjMatrix:this._viewProjMatrix,I);const A={f64:I,f32:new Float32Array(I)};return O.set(w,A),l?A.f32:A.f64}calculateFogMatrix(t){const o=t.key,l=this._fogMatrixCacheF32;if(l.has(o))return l.get(o);const p=Ea(t,this.worldSize);return c.S(p,this._fogMatrix,p),l.set(o,new Float32Array(p)),l.get(o)}calculateCenterFromCameraLngLatAlt(t,o,l,p){return this._helper.calculateCenterFromCameraLngLatAlt(t,o,l,p)}_calculateNearFarZIfNeeded(t,o,l){if(!this._helper.autoCalculateNearFarZ)return;const p=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),w=t-p*this._helper._pixelPerMeter/Math.cos(o),O=p<0?w:t,I=Math.PI/2+this.pitchInRadians,A=c.ap(this.fov)*(Math.abs(Math.cos(c.ap(this.roll)))*this.height+Math.abs(Math.sin(c.ap(this.roll)))*this.width)/this.height*(.5+l.y/this.height),C=Math.sin(A)*O/Math.sin(c.an(Math.PI-I-A,.01,Math.PI-.01)),D=Ga(this),F=Math.atan(D/this._helper.cameraToCenterDistance),G=c.ap(.75),Z=F>G?2*F*(.5+l.y/(2*D)):G,Q=Math.sin(Z)*O/Math.sin(c.an(Math.PI-I-Z,.01,Math.PI-.01)),ie=Math.min(C,Q);this._helper._farZ=1.01*(Math.cos(Math.PI/2-o)*ie+O),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const t=this.centerOffset,o=Ut(this.worldSize,this.center),l=o.x,p=o.y;this._helper._pixelPerMeter=c.as(1,this.center.lat)*this.worldSize;const w=c.ap(Math.min(this.pitch,Bt)),O=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(w));let I;this._calculateNearFarZIfNeeded(O,w,t),I=new Float64Array(16),c.be(I,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),c.aB(this._invProjMatrix,I),I[8]=2*-t.x/this._helper._width,I[9]=2*t.y/this._helper._height,this._projectionMatrix=c.bf(I),c.Q(I,I,[1,-1,1]),c.O(I,I,[0,0,-this._helper.cameraToCenterDistance]),c.bg(I,I,-this.rollInRadians),c.bh(I,I,this.pitchInRadians),c.bg(I,I,-this.bearingInRadians),c.O(I,I,[-l,-p,0]),this._mercatorMatrix=c.Q([],I,[this.worldSize,this.worldSize,this.worldSize]),c.Q(I,I,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=c.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,I),c.O(I,I,[0,0,-this.elevation]),this._viewProjMatrix=I,this._invViewProjMatrix=c.aB([],I);const A=[0,0,-1,1];c.aH(A,A,this._invViewProjMatrix),this._cameraPosition=[A[0]/A[3],A[1]/A[3],A[2]/A[3]],this._fogMatrix=new Float64Array(16),c.be(this._fogMatrix,this.fovInRadians,this.width/this.height,O,this._helper._farZ),this._fogMatrix[8]=2*-t.x/this.width,this._fogMatrix[9]=2*t.y/this.height,c.Q(this._fogMatrix,this._fogMatrix,[1,-1,1]),c.O(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),c.bg(this._fogMatrix,this._fogMatrix,-this.rollInRadians),c.bh(this._fogMatrix,this._fogMatrix,this.pitchInRadians),c.bg(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),c.O(this._fogMatrix,this._fogMatrix,[-l,-p,0]),c.Q(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),c.O(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=c.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,I);const C=this._helper._width%2/2,D=this._helper._height%2/2,F=Math.cos(this.bearingInRadians),G=Math.sin(-this.bearingInRadians),Z=l-Math.round(l)+F*C+G*D,Q=p-Math.round(p)+F*D+G*C,ie=new Float64Array(I);if(c.O(ie,ie,[Z>.5?Z-1:Z,Q>.5?Q-1:Q,0]),this._alignedProjMatrix=ie,I=c.aB(new Float64Array(16),this._pixelMatrix),!I)throw new Error("failed to invert matrix");this._pixelMatrixInverse=I,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const t=this.screenPointToMercatorCoordinate(new c.P(0,0)),o=[t.x*this.worldSize,t.y*this.worldSize,0,1];return c.aH(o,o,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const t=c.as(1,this.center.lat)*this.worldSize;return Ne(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/t).toLngLat()}lngLatToCameraDepth(t,o){const l=c.a9.fromLngLat(t),p=[l.x*this.worldSize,l.y*this.worldSize,o,1];return c.aH(p,p,this._viewProjMatrix),p[2]/p[3]}getProjectionData(t){const{overscaledTileID:o,aligned:l,applyTerrainMatrix:p}=t,w=this._helper.getMercatorTileCoordinates(o),O=o?this.calculatePosMatrix(o,l,!0):null;let I;return I=o&&o.terrainRttPosMatrix32f&&p?o.terrainRttPosMatrix32f:O||c.bi(),{mainMatrix:I,tileMercatorCoords:w,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:I}}isLocationOccluded(t){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(t,o,l){return 1}transformLightDirection(t){return c.b1(t)}getRayDirectionFromPixel(t){throw new Error("Not implemented.")}projectTileCoordinates(t,o,l,p){const w=this.calculatePosMatrix(l);let O;p?(O=[t,o,p(t,o),1],c.aH(O,O,w)):(O=[t,o,0,1],Kn(O,O,w));const I=O[3];return{point:new c.P(O[0]/I,O[1]/I),signedDistanceFromCamera:I,isOccluded:!1}}populateCache(t){for(const o of t)this.calculatePosMatrix(o)}getMatrixForModel(t,o){const l=c.a9.fromLngLat(t,o),p=l.meterInMercatorCoordinateUnits(),w=c.bj();return c.O(w,w,[l.x,l.y,l.z]),c.bg(w,w,Math.PI),c.bh(w,w,Math.PI/2),c.Q(w,w,[-p,p,p]),w}getProjectionDataForCustomLayer(t=!0){const o=new c.a2(0,0,0,0,0),l=this.getProjectionData({overscaledTileID:o,applyGlobeMatrix:t}),p=Ea(o,this.worldSize);c.S(p,this._viewProjMatrix,p),l.tileMercatorCoords=[0,0,1,1];const w=[c.a5,c.a5,this.worldSize/this._helper.pixelsPerMeter],O=c.bk();return c.Q(O,p,w),l.fallbackMatrix=O,l.mainMatrix=O,l}getFastPathSimpleProjectionMatrix(t){return this.calculatePosMatrix(t)}}function En(){c.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function ll(g){if(g.useSlerp)if(g.k<1){const t=c.bl(g.startEulerAngles.roll,g.startEulerAngles.pitch,g.startEulerAngles.bearing),o=c.bl(g.endEulerAngles.roll,g.endEulerAngles.pitch,g.endEulerAngles.bearing),l=new Float64Array(4);c.bm(l,t,o,g.k);const p=c.bn(l);g.tr.setRoll(p.roll),g.tr.setPitch(p.pitch),g.tr.setBearing(p.bearing)}else g.tr.setRoll(g.endEulerAngles.roll),g.tr.setPitch(g.endEulerAngles.pitch),g.tr.setBearing(g.endEulerAngles.bearing);else g.tr.setRoll(c.G.number(g.startEulerAngles.roll,g.endEulerAngles.roll,g.k)),g.tr.setPitch(c.G.number(g.startEulerAngles.pitch,g.endEulerAngles.pitch,g.k)),g.tr.setBearing(c.G.number(g.startEulerAngles.bearing,g.endEulerAngles.bearing,g.k))}function Ar(g,t,o,l,p){const w=p.padding,O=Ut(p.worldSize,o.getNorthWest()),I=Ut(p.worldSize,o.getNorthEast()),A=Ut(p.worldSize,o.getSouthEast()),C=Ut(p.worldSize,o.getSouthWest()),D=c.ap(-l),F=O.rotate(D),G=I.rotate(D),Z=A.rotate(D),Q=C.rotate(D),ie=new c.P(Math.max(F.x,G.x,Q.x,Z.x),Math.max(F.y,G.y,Q.y,Z.y)),de=new c.P(Math.min(F.x,G.x,Q.x,Z.x),Math.min(F.y,G.y,Q.y,Z.y)),le=ie.sub(de),pe=(p.width-(w.left+w.right+t.left+t.right))/le.x,be=(p.height-(w.top+w.bottom+t.top+t.bottom))/le.y;if(be<0||pe<0)return void En();const ce=Math.min(c.at(p.scale*Math.min(pe,be)),g.maxZoom),ye=c.P.convert(g.offset),ke=new c.P((t.left-t.right)/2,(t.top-t.bottom)/2).rotate(c.ap(l)),me=ye.add(ke).mult(p.scale/c.aq(ce));return{center:Jt(p.worldSize,O.add(A).div(2).sub(me)),zoom:ce,bearing:l}}class Oa{get useGlobeControls(){return!1}handlePanInertia(t,o){const l=t.mag(),p=Math.abs(Ga(o));return{easingOffset:t.mult(Math.min(.75*p/l,1)),easingCenter:o.center}}handleMapControlsRollPitchBearingZoom(t,o){t.bearingDelta&&o.setBearing(o.bearing+t.bearingDelta),t.pitchDelta&&o.setPitch(o.pitch+t.pitchDelta),t.rollDelta&&o.setRoll(o.roll+t.rollDelta),t.zoomDelta&&o.setZoom(o.zoom+t.zoomDelta)}handleMapControlsPan(t,o,l){t.around.distSqr(o.centerPoint)<.01||o.setLocationAtPoint(l,t.around)}cameraForBoxAndBearing(t,o,l,p,w){return Ar(t,o,l,p,w)}handleJumpToCenterZoom(t,o){t.zoom!==(o.zoom!==void 0?+o.zoom:t.zoom)&&t.setZoom(+o.zoom),o.center!==void 0&&t.setCenter(c.V.convert(o.center))}handleEaseTo(t,o){const l=t.zoom,p=t.padding,w={roll:t.roll,pitch:t.pitch,bearing:t.bearing},O={roll:o.roll===void 0?t.roll:o.roll,pitch:o.pitch===void 0?t.pitch:o.pitch,bearing:o.bearing===void 0?t.bearing:o.bearing},I=o.zoom!==void 0,A=!t.isPaddingEqual(o.padding);let C=!1;const D=I?+o.zoom:t.zoom;let F=t.centerPoint.add(o.offsetAsPoint);const G=t.screenPointToLocation(F),{center:Z,zoom:Q}=t.applyConstrain(c.V.convert(o.center||G),D!=null?D:l);co(t,Z);const ie=Ut(t.worldSize,G),de=Ut(t.worldSize,Z).sub(ie),le=c.aq(Q-l);return C=Q!==l,{easeFunc:pe=>{if(C&&t.setZoom(c.G.number(l,Q,pe)),c.bo(w,O)||ll({startEulerAngles:w,endEulerAngles:O,tr:t,k:pe,useSlerp:w.roll!=O.roll}),A&&(t.interpolatePadding(p,o.padding,pe),F=t.centerPoint.add(o.offsetAsPoint)),o.around)t.setLocationAtPoint(o.around,o.aroundPoint);else{const be=c.aq(t.zoom-l),ce=Q>l?Math.min(2,le):Math.max(.5,le),ye=Math.pow(ce,1-pe),ke=Jt(t.worldSize,ie.add(de.mult(pe*ye)).mult(be));t.setLocationAtPoint(t.renderWorldCopies?ke.wrap():ke,F)}},isZooming:C,elevationCenter:Z}}handleFlyTo(t,o){const l=o.zoom!==void 0,p=t.zoom,w=t.applyConstrain(c.V.convert(o.center||o.locationAtOffset),l?+o.zoom:p),O=w.center,I=w.zoom;co(t,O);const A=Ut(t.worldSize,o.locationAtOffset),C=Ut(t.worldSize,O).sub(A),D=C.mag(),F=c.aq(I-p);let G;if(o.minZoom!==void 0){const Z=Math.min(+o.minZoom,p,I),Q=t.applyConstrain(O,Z).zoom;G=c.aq(Q-p)}return{easeFunc:(Z,Q,ie,de)=>{t.setZoom(Z===1?I:p+c.at(Q));const le=Z===1?O:Jt(t.worldSize,A.add(C.mult(ie)).mult(Q));t.setLocationAtPoint(t.renderWorldCopies?le.wrap():le,de)},scaleOfZoom:F,targetCenter:O,scaleOfMinZoom:G,pixelPathLength:D}}}class Ka{constructor(t,o,l){this.blendFunction=t,this.blendColor=o,this.mask=l}}Ka.Replace=[1,0],Ka.disabled=new Ka(Ka.Replace,c.bp.transparent,[!1,!1,!1,!1]),Ka.unblended=new Ka(Ka.Replace,c.bp.transparent,[!0,!0,!0,!0]),Ka.alphaBlended=new Ka([1,771],c.bp.transparent,[!0,!0,!0,!0]);const vn=2305;class ua{constructor(t,o,l){this.enable=t,this.mode=o,this.frontFace=l}}ua.disabled=new ua(!1,1029,vn),ua.backCCW=new ua(!0,1029,vn),ua.frontCCW=new ua(!0,1028,vn);class ia{constructor(t,o,l){this.func=t,this.mask=o,this.range=l}}ia.ReadOnly=!1,ia.ReadWrite=!0,ia.disabled=new ia(519,ia.ReadOnly,[0,1]);const oh=7680;class Sa{constructor(t,o,l,p,w,O){this.test=t,this.ref=o,this.mask=l,this.fail=p,this.depthFail=w,this.pass=O}}Sa.disabled=new Sa({func:519,mask:0},0,0,oh,oh,oh);const dl=new WeakMap;function Mo(g){var t;if(dl.has(g))return dl.get(g);{const o=(t=g.getParameter(g.VERSION))===null||t===void 0?void 0:t.startsWith("WebGL 2.0");return dl.set(g,o),o}}class Sr{get awaitingQuery(){return!!this._readbackQueue}constructor(t){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=t;const o=t.context,l=o.gl;this._texFormat=l.RGBA,this._texType=l.UNSIGNED_BYTE;const p=new c.aW;p.emplaceBack(-1,-1),p.emplaceBack(2,-1),p.emplaceBack(-1,2);const w=new c.aY;w.emplaceBack(0,1,2),this._fullscreenTriangle=new $a(o.createVertexBuffer(p,fo.members),o.createIndexBuffer(w),c.aX.simpleSegment(0,0,p.length,w.length)),this._resultBuffer=new Uint8Array(4),o.activeTexture.set(l.TEXTURE1);const O=l.createTexture();l.bindTexture(l.TEXTURE_2D,O),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.NEAREST),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.NEAREST),l.texImage2D(l.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=o.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(O),Mo(l)&&(this._pbo=l.createBuffer(),l.bindBuffer(l.PIXEL_PACK_BUFFER,this._pbo),l.bufferData(l.PIXEL_PACK_BUFFER,4,l.STREAM_READ),l.bindBuffer(l.PIXEL_PACK_BUFFER,null))}destroy(){const t=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),t.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(t,o){const l=this._updateCount;return this._readbackQueue?l>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():l>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(t,o),this._updateCount++,this._measuredError}_bindFramebuffer(){const t=this._cachedRenderContext.context,o=t.gl;t.activeTexture.set(o.TEXTURE1),o.bindTexture(o.TEXTURE_2D,this._fbo.colorAttachment.get()),t.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(t,o){const l=this._cachedRenderContext.context,p=l.gl;if(this._bindFramebuffer(),l.viewport.set([0,0,this._texWidth,this._texHeight]),l.clear({color:c.bp.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(l,p.TRIANGLES,ia.disabled,Sa.disabled,Ka.unblended,ua.disabled,((w,O)=>({u_input:w,u_output_expected:O}))(t,o),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Mo(p)){p.bindBuffer(p.PIXEL_PACK_BUFFER,this._pbo),p.readBuffer(p.COLOR_ATTACHMENT0),p.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),p.bindBuffer(p.PIXEL_PACK_BUFFER,null);const w=p.fenceSync(p.SYNC_GPU_COMMANDS_COMPLETE,0);p.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:w}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const t=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Mo(t)){const o=t.clientWaitSync(this._readbackQueue.sync,0,0);if(o===t.WAIT_FAILED)return c.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(o===t.TIMEOUT_EXPIRED)return;t.bindBuffer(t.PIXEL_PACK_BUFFER,this._pbo),t.getBufferSubData(t.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),t.bindBuffer(t.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),t.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Sr._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(t){let o=0;return o+=t[0]/256,o+=t[1]/65536,o+=t[2]/16777216,t[3]<127&&(o=-o),o/128}}const Pr=c.a5/128;function Ql(g,t){const o=g.granularity!==void 0?Math.max(g.granularity,1):1,l=o+(g.generateBorders?2:0),p=o+(g.extendToNorthPole||g.generateBorders?1:0)+(g.extendToSouthPole||g.generateBorders?1:0),w=l+1,O=p+1,I=g.generateBorders?-1:0,A=g.generateBorders||g.extendToNorthPole?-1:0,C=o+(g.generateBorders?1:0),D=o+(g.generateBorders||g.extendToSouthPole?1:0),F=w*O,G=l*p*6,Z=w*O>65536;if(Z&&t==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const Q=Z||t==="32bit",ie=new Int16Array(2*F);let de=0;for(let be=A;be<=D;be++)for(let ce=I;ce<=C;ce++){let ye=ce/o*c.a5;ce===-1&&(ye=-Pr),ce===o+1&&(ye=c.a5+Pr);let ke=be/o*c.a5;be===-1&&(ke=g.extendToNorthPole?c.br:-Pr),be===o+1&&(ke=g.extendToSouthPole?c.bs:c.a5+Pr),ie[de++]=ye,ie[de++]=ke}const le=Q?new Uint32Array(G):new Uint16Array(G);let pe=0;for(let be=0;be<p;be++)for(let ce=0;ce<l;ce++){const ye=ce+1+be*w,ke=ce+(be+1)*w,me=ce+1+(be+1)*w;le[pe++]=ce+be*w,le[pe++]=ke,le[pe++]=ye,le[pe++]=ye,le[pe++]=ke,le[pe++]=me}return{vertices:ie.buffer.slice(0),indices:le.buffer.slice(0),uses32bitIndices:Q}}const fl=new c.aV({fill:new c.bt(128,2),line:new c.bt(512,0),tile:new c.bt(128,32),stencil:new c.bt(128,1),circle:3});class Fo{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return Ba.projectionGlobe}get vertexShaderPreludeCode(){return Ba.projectionMercator.vertexSource}get subdivisionGranularity(){return fl}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(t){this._errorMeasurement||(this._errorMeasurement=new Sr(t));const o=c.X(this._errorQueryLatitudeDegrees),l=2*Math.atan(Math.exp(Math.PI-o*Math.PI*2))-.5*Math.PI,p=this._errorMeasurement.updateErrorLoop(o,l),w=it();p!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=p,this._errorMeasurementLastChangeTime=w);const O=Math.min(Math.max((w-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=c.bu(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,c.bv(O))}_getMeshKey(t){return`${t.granularity.toString(36)}_${t.generateBorders?"b":""}${t.extendToNorthPole?"n":""}${t.extendToSouthPole?"s":""}`}getMeshFromTileID(t,o,l,p,w){const O=(w==="stencil"?fl.stencil:fl.tile).getGranularityForZoomLevel(o.z);return this._getMesh(t,{granularity:O,generateBorders:l,extendToNorthPole:o.y===0&&p,extendToSouthPole:o.y===(1<<o.z)-1&&p})}_getMesh(t,o){const l=this._getMeshKey(o);if(l in this._tileMeshCache)return this._tileMeshCache[l];const p=(function(w,O){const I=Ql(O,"16bit"),A=c.aW.deserialize({arrayBuffer:I.vertices,length:I.vertices.byteLength/2/2}),C=c.aY.deserialize({arrayBuffer:I.indices,length:I.indices.byteLength/2/3});return new $a(w.createVertexBuffer(A,fo.members),w.createIndexBuffer(C),c.aX.simpleSegment(0,0,A.length,C.length))})(t,o);return this._tileMeshCache[l]=p,p}recalculate(t){}hasTransition(){const t=it();let o=!1;return o=o||(t-this._errorMeasurementLastChangeTime)/1e3<.7,o=o||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,o}setErrorQueryLatitudeDegrees(t){this._errorQueryLatitudeDegrees=t}}const rc=new c.t({type:new c.D(c.u.projection.type)});class Jl extends c.E{constructor(t){super(),this._transitionable=new c.x(rc,void 0),this.setProjection(t),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new c.H(0)),this._mercatorProjection=new ks,this._verticalPerspectiveProjection=new Fo}get transitionState(){const t=this.properties.get("type");if(typeof t=="string"&&t==="mercator")return 0;if(typeof t=="string"&&t==="vertical-perspective")return 1;if(t instanceof c.bw){if(t.from==="vertical-perspective"&&t.to==="mercator")return 1-t.transition;if(t.from==="mercator"&&t.to==="vertical-perspective")return t.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(t){this._mercatorProjection.updateGPUdependent(t),this._verticalPerspectiveProjection.updateGPUdependent(t)}getMeshFromTileID(t,o,l,p,w){return this.currentProjection.getMeshFromTileID(t,o,l,p,w)}setProjection(t){this._transitionable.setValue("type",(t==null?void 0:t.type)||"mercator")}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}setErrorQueryLatitudeDegrees(t){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(t),this._mercatorProjection.setErrorQueryLatitudeDegrees(t)}}function js(g){const t=Qi(g.worldSize,g.center.lat);return 2*Math.PI*t}function ii(g,t,o,l,p){const w=1/(1<<p),O=t/c.a5*w+l*w,I=c.by((g/c.a5*w+o*w)*Math.PI*2+Math.PI,2*Math.PI),A=2*Math.atan(Math.exp(Math.PI-O*Math.PI*2))-.5*Math.PI,C=Math.cos(A),D=new Float64Array(3);return D[0]=Math.sin(I)*C,D[1]=Math.sin(A),D[2]=Math.cos(I)*C,D}function bs(g){return(function(t,o){const l=Math.cos(o),p=new Float64Array(3);return p[0]=Math.sin(t)*l,p[1]=Math.sin(o),p[2]=Math.cos(t)*l,p})(g.lng*Math.PI/180,g.lat*Math.PI/180)}function Qi(g,t){return g/(2*Math.PI)/Math.cos(t*Math.PI/180)}function cl(g){const t=Math.asin(g[1])/Math.PI*180,o=Math.sqrt(g[0]*g[0]+g[2]*g[2]);if(o>1e-6){const l=g[0]/o,p=Math.acos(g[2]/o),w=(l>0?p:-p)/Math.PI*180;return new c.V(c.W(w,-180,180),t)}return new c.V(0,t)}function Nh(g){return Math.cos(g*Math.PI/180)}function Ss(g,t){const o=Nh(g),l=Nh(t);return c.at(l/o)}function uf(g,t){const o=g.rotate(t.bearingInRadians),l=t.zoom+Ss(t.center.lat,0),p=c.bu(1/Nh(t.center.lat),1/Nh(Math.min(Math.abs(t.center.lat),60)),c.bx(l,7,3,0,1)),w=360/js({worldSize:t.worldSize,center:{lat:t.center.lat}});return new c.V(t.center.lng-o.x*w*p,c.an(t.center.lat+o.y*w,-c.ao,c.ao))}function ed(g){const t=.5*g,o=Math.sin(t),l=Math.cos(t);return Math.log(o+l)-Math.log(l-o)}function td(g,t,o,l){const p=g.lat+o*l;if(Math.abs(o)>1){const w=(Math.sign(g.lat+o)!==Math.sign(g.lat)?-Math.abs(g.lat):Math.abs(g.lat))*Math.PI/180,O=Math.abs(g.lat+o)*Math.PI/180,I=ed(w+l*(O-w)),A=ed(w),C=ed(O);return new c.V(g.lng+t*((I-A)/(C-A)),p)}return new c.V(g.lng+t*l,p)}class hc{constructor(t){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=t}swapBuffers(){if(!this._hadAnyChanges)return;const t=this._cachePrevious;this._cachePrevious=this._cache,this._cache=t,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(t,o,l,p){const w=`${t.z}_${t.x}_${t.y}_${p!=null&&p.terrain?"t":""}`,O=this._cache.get(w);if(O)return O;const I=this._cachePrevious.get(w);if(I)return this._cache.set(w,I),I;const A=this._boundingVolumeFactory(t,o,l,p);return this._cache.set(w,A),this._hadAnyChanges=!0,A}}class ih{constructor(t,o,l,p){this.min=l,this.max=p,this.points=t,this.planes=o}static fromAabb(t,o){const l=[];for(let p=0;p<8;p++)l.push([1&~p?t[0]:o[0],(p>>1&1)==1?o[1]:t[1],(p>>2&1)==1?o[2]:t[2]]);return new ih(l,[[-1,0,0,o[0]],[1,0,0,-t[0]],[0,-1,0,o[1]],[0,1,0,-t[1]],[0,0,-1,o[2]],[0,0,1,-t[2]]],t,o)}static fromCenterSizeAngles(t,o,l){const p=c.bB([],l[0],l[1],l[2]),w=c.bC([],[o[0],0,0],p),O=c.bC([],[0,o[1],0],p),I=c.bC([],[0,0,o[2]],p),A=[...t],C=[...t];for(let F=0;F<8;F++)for(let G=0;G<3;G++){const Z=t[G]+w[G]*(1&~F?-1:1)+O[G]*((F>>1&1)==1?1:-1)+I[G]*((F>>2&1)==1?1:-1);A[G]=Math.min(A[G],Z),C[G]=Math.max(C[G],Z)}const D=[];for(let F=0;F<8;F++){const G=[...t];c.b0(G,G,c.a$([],w,1&~F?-1:1)),c.b0(G,G,c.a$([],O,(F>>1&1)==1?1:-1)),c.b0(G,G,c.a$([],I,(F>>2&1)==1?1:-1)),D.push(G)}return new ih(D,[[...w,-c.b5(w,D[0])],[...O,-c.b5(O,D[0])],[...I,-c.b5(I,D[0])],[-w[0],-w[1],-w[2],-c.b5(w,D[7])],[-O[0],-O[1],-O[2],-c.b5(O,D[7])],[-I[0],-I[1],-I[2],-c.b5(I,D[7])]],A,C)}intersectsFrustum(t){let o=!0;const l=this.points.length,p=this.planes.length,w=t.planes.length,O=t.points.length;for(let I=0;I<w;I++){const A=t.planes[I];let C=0;for(let D=0;D<l;D++){const F=this.points[D];A[0]*F[0]+A[1]*F[1]+A[2]*F[2]+A[3]>=0&&C++}if(C===0)return 0;C<l&&(o=!1)}if(o)return 2;for(let I=0;I<p;I++){const A=this.planes[I];let C=0;for(let D=0;D<O;D++){const F=t.points[D];A[0]*F[0]+A[1]*F[1]+A[2]*F[2]+A[3]>=0&&C++}if(C===0)return 0}return 1}intersectsPlane(t){const o=this.points.length;let l=0;for(let p=0;p<o;p++){const w=this.points[p];t[0]*w[0]+t[1]*w[1]+t[2]*w[2]+t[3]>=0&&l++}return l===o?2:l===0?0:1}}function pl(g,t,o){const l=g-t;return l<0?-l:Math.max(0,l-o)}function Ji(g,t,o,l,p){const w=g-o;let O;return O=w<0?Math.min(-w,1+w-p):w>1?Math.min(Math.max(w-p,0),1-w):0,Math.max(O,pl(t,l,p))}class er{constructor(){this._boundingVolumeCache=new hc(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(t,o,l,p){const w=1<<l.z,O=1/w,I=l.x/w,A=l.y/w;let C=2;return C=Math.min(C,Ji(t,o,I,A,O)),C=Math.min(C,Ji(t,o,I+.5,-A-O,O)),C=Math.min(C,Ji(t,o,I+.5,2-A-O,O)),C}getWrap(t,o,l){const p=1<<o.z,w=1/p,O=o.x/p,I=pl(t.x,O,w),A=pl(t.x,O-1,w),C=pl(t.x,O+1,w),D=Math.min(I,A,C);return D===C?1:D===A?-1:0}allowVariableZoom(t,o){return qa(t,o)>4}allowWorldCopies(){return!1}getTileBoundingVolume(t,o,l,p){return this._boundingVolumeCache.getTileBoundingVolume(t,o,l,p)}_computeTileBoundingVolume(t,o,l,p){var w,O;let I=0,A=0;if(p!=null&&p.terrain){const C=new c.a2(t.z,o,t.z,t.x,t.y),D=p.terrain.getMinMaxElevation(C);I=(w=D.minElevation)!==null&&w!==void 0?w:Math.min(0,l),A=(O=D.maxElevation)!==null&&O!==void 0?O:Math.max(0,l)}if(I/=c.bE,A/=c.bE,I+=1,A+=1,t.z<=0)return ih.fromAabb([-A,-A,-A],[A,A,A]);if(t.z===1)return ih.fromAabb([t.x===0?-A:0,t.y===0?0:-A,-A],[t.x===0?0:A,t.y===0?A:0,A]);{const C=[ii(0,0,t.x,t.y,t.z),ii(c.a5,0,t.x,t.y,t.z),ii(c.a5,c.a5,t.x,t.y,t.z),ii(0,c.a5,t.x,t.y,t.z)],D=[];for(const qe of C)D.push(c.a$([],qe,A));if(A!==I)for(const qe of C)D.push(c.a$([],qe,I));t.y===0&&D.push([0,1,0]),t.y===(1<<t.z)-1&&D.push([0,-1,0]);const F=[1,1,1],G=[-1,-1,-1];for(const qe of D)for(let Ve=0;Ve<3;Ve++)F[Ve]=Math.min(F[Ve],qe[Ve]),G[Ve]=Math.max(G[Ve],qe[Ve]);const Z=ii(c.a5/2,c.a5/2,t.x,t.y,t.z),Q=c.b4([],[0,1,0],Z);c.b3(Q,Q);const ie=c.b4([],Z,Q);c.b3(ie,ie);const de=c.b4([],C[2],C[1]);c.b3(de,de);const le=c.b4([],C[0],C[3]);c.b3(le,le),D.push(c.a$([],Z,A)),t.y>=(1<<t.z)/2&&D.push(c.a$([],ii(c.a5/2,0,t.x,t.y,t.z),A)),t.y<(1<<t.z)/2&&D.push(c.a$([],ii(c.a5/2,c.a5,t.x,t.y,t.z),A));const pe=ul(Z,D),be=ul(ie,D),ce=[-Z[0],-Z[1],-Z[2],pe.max],ye=[Z[0],Z[1],Z[2],-pe.min],ke=[-ie[0],-ie[1],-ie[2],be.max],me=[ie[0],ie[1],ie[2],-be.min],Ee=[...de,0],Ze=[...le,0],Ge=[];return t.y===0?Ge.push(c.bD(Ze,Ee,ce),c.bD(Ze,Ee,ye)):Ge.push(c.bD(ke,Ee,ce),c.bD(ke,Ee,ye),c.bD(ke,Ze,ce),c.bD(ke,Ze,ye)),t.y===(1<<t.z)-1?Ge.push(c.bD(Ze,Ee,ce),c.bD(Ze,Ee,ye)):Ge.push(c.bD(me,Ee,ce),c.bD(me,Ee,ye),c.bD(me,Ze,ce),c.bD(me,Ze,ye)),new ih(Ge,[ce,ye,ke,me,Ee,Ze],F,G)}}}function ul(g,t){let o=1/0,l=-1/0;for(const p of t){const w=c.b5(g,p);o=Math.min(o,w),l=Math.max(l,w)}return{min:o,max:l}}class Si{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(t){this._helper.setMinZoom(t)}setMaxZoom(t){this._helper.setMaxZoom(t)}setMinPitch(t){this._helper.setMinPitch(t)}setMaxPitch(t){this._helper.setMaxPitch(t)}setRenderWorldCopies(t){this._helper.setRenderWorldCopies(t)}setBearing(t){this._helper.setBearing(t)}setPitch(t){this._helper.setPitch(t)}setRoll(t){this._helper.setRoll(t)}setFov(t){this._helper.setFov(t)}setZoom(t){this._helper.setZoom(t)}setCenter(t){this._helper.setCenter(t)}setElevation(t){this._helper.setElevation(t)}setMinElevationForCurrentTile(t){this._helper.setMinElevationForCurrentTile(t)}setPadding(t){this._helper.setPadding(t)}interpolatePadding(t,o,l){return this._helper.interpolatePadding(t,o,l)}isPaddingEqual(t){return this._helper.isPaddingEqual(t)}resize(t,o){this._helper.resize(t,o)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(t){this._helper.setMaxBounds(t)}setConstrainOverride(t){this._helper.setConstrainOverride(t)}overrideNearFarZ(t,o){this._helper.overrideNearFarZ(t,o)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(t){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),t)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(t){}constructor(t){this._cachedClippingPlane=c.bF(),this._projectionMatrix=c.bj(),this._globeViewProjMatrix32f=c.bi(),this._globeViewProjMatrixNoCorrection=c.bj(),this._globeViewProjMatrixNoCorrectionInverted=c.bj(),this._globeProjMatrixInverted=c.bj(),this._cameraPosition=c.bz(),this._globeLatitudeErrorCorrectionRadians=0,this.defaultConstrain=(o,l)=>{const p=c.an(o.lat,-c.ao,c.ao),w=c.an(+l,this.minZoom+Ss(0,p),this.maxZoom);return{center:new c.V(o.lng,p),zoom:w}},this.applyConstrain=(o,l)=>this._helper.applyConstrain(o,l),this._helper=new po({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(o,l)=>this.defaultConstrain(o,l)},t),this._coveringTilesDetailsProvider=new er}clone(){const t=new Si;return t.apply(this,!1),t}apply(t,o,l){this._globeLatitudeErrorCorrectionRadians=l||0,this._helper.apply(t,o)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const t=c.bz();return t[0]=this._cameraPosition[0],t[1]=this._cameraPosition[1],t[2]=this._cameraPosition[2],t}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(t){const{overscaledTileID:o,applyGlobeMatrix:l}=t,p=this._helper.getMercatorTileCoordinates(o);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:p,clippingPlane:this._cachedClippingPlane,projectionTransition:l?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(t){const o=this.pitchInRadians,l=this.cameraToCenterDistance/t,p=Math.sin(o)*l,w=Math.cos(o)*l+1,O=1/Math.sqrt(p*p+w*w)*1;let I=-p,A=w;const C=Math.sqrt(I*I+A*A);I/=C,A/=C;const D=[0,I,A];c.bG(D,D,[0,0,0],-this.bearingInRadians),c.bH(D,D,[0,0,0],-1*this.center.lat*Math.PI/180),c.bI(D,D,[0,0,0],this.center.lng*Math.PI/180);const F=1/c.b7(D);return c.a$(D,D,F),[...D,-O*F]}isLocationOccluded(t){return!this.isSurfacePointVisible(bs(t))}transformLightDirection(t){const o=this._helper._center.lng*Math.PI/180,l=this._helper._center.lat*Math.PI/180,p=Math.cos(l),w=[Math.sin(o)*p,Math.sin(l),Math.cos(o)*p],O=[w[2],0,-w[0]],I=[0,0,0];c.b4(I,O,w),c.b3(O,O),c.b3(I,I);const A=[0,0,0];return c.b3(A,[O[0]*t[0]+I[0]*t[1]+w[0]*t[2],O[1]*t[0]+I[1]*t[1]+w[1]*t[2],O[2]*t[0]+I[2]*t[1]+w[2]*t[2]]),A}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(t,o,l){const p=(function(I,A,C){const D=1/(1<<C.z);return new c.a9(I/c.a5*D+C.x*D,A/c.a5*D+C.y*D)})(t,o,l.canonical),w=(O=p.y,[c.by(p.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-O*Math.PI*2))-.5*Math.PI]);var O;return this.getCircleRadiusCorrection()/Math.cos(w[1])}projectTileCoordinates(t,o,l,p){const w=l.canonical,O=ii(t,o,w.x,w.y,w.z),I=1+(p?p(t,o):0)/c.bE,A=[O[0]*I,O[1]*I,O[2]*I,1];c.aH(A,A,this._globeViewProjMatrixNoCorrection);const C=this._cachedClippingPlane,D=C[0]*O[0]+C[1]*O[1]+C[2]*O[2]+C[3]<0;return{point:new c.P(A[0]/A[3],A[1]/A[3]),signedDistanceFromCamera:A[3],isOccluded:D}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const t=Qi(this.worldSize,this.center.lat),o=c.bk(),l=c.bk();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*t),c.be(o,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const p=this.centerOffset;o[8]=2*-p.x/this._helper._width,o[9]=2*p.y/this._helper._height,this._projectionMatrix=c.bf(o),this._globeProjMatrixInverted=c.bk(),c.aB(this._globeProjMatrixInverted,o),c.O(o,o,[0,0,-this.cameraToCenterDistance]),c.bg(o,o,this.rollInRadians),c.bh(o,o,-this.pitchInRadians),c.bg(o,o,this.bearingInRadians),c.O(o,o,[0,0,-t]);const w=c.bz();w[0]=t,w[1]=t,w[2]=t,c.bh(l,o,this.center.lat*Math.PI/180),c.bJ(l,l,-this.center.lng*Math.PI/180),c.Q(l,l,w),this._globeViewProjMatrixNoCorrection=l,c.bh(o,o,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),c.bJ(o,o,-this.center.lng*Math.PI/180),c.Q(o,o,w),this._globeViewProjMatrix32f=new Float32Array(o),this._globeViewProjMatrixNoCorrectionInverted=c.bk(),c.aB(this._globeViewProjMatrixNoCorrectionInverted,l);const O=c.bz();this._cameraPosition=c.bz(),this._cameraPosition[2]=this.cameraToCenterDistance/t,c.bG(this._cameraPosition,this._cameraPosition,O,-this.rollInRadians),c.bH(this._cameraPosition,this._cameraPosition,O,this.pitchInRadians),c.bG(this._cameraPosition,this._cameraPosition,O,-this.bearingInRadians),c.b0(this._cameraPosition,this._cameraPosition,[0,0,1]),c.bH(this._cameraPosition,this._cameraPosition,O,-this.center.lat*Math.PI/180),c.bI(this._cameraPosition,this._cameraPosition,O,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(t);const I=c.bf(this._globeViewProjMatrixNoCorrectionInverted);c.Q(I,I,[1,1,-1]),this._cachedFrustum=Jn.fromInvProjectionMatrix(I,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(t){c.w("calculateFogMatrix is not supported on globe projection.");const o=c.bk();return c.ar(o),o}getVisibleUnwrappedCoordinates(t){return[new c.bc(0,t)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(t){t&&c.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(t,o){if(!this._globeViewProjMatrixNoCorrection)return 1;const l=bs(t);c.a$(l,l,1+o/c.bE);const p=c.bF();return c.aH(p,[l[0],l[1],l[2],1],this._globeViewProjMatrixNoCorrection),p[2]/p[3]}populateCache(t){}getBounds(){const t=.5*this.width,o=.5*this.height,l=[new c.P(0,0),new c.P(t,0),new c.P(this.width,0),new c.P(this.width,o),new c.P(this.width,this.height),new c.P(t,this.height),new c.P(0,this.height),new c.P(0,o)],p=[];for(const F of l)p.push(this.unprojectScreenPoint(F));let w=0,O=0,I=0,A=0;const C=this.center;for(const F of p){const G=c.bK(C.lng,F.lng),Z=c.bK(C.lat,F.lat);G<O&&(O=G),G>w&&(w=G),Z<A&&(A=Z),Z>I&&(I=Z)}const D=[C.lng+O,C.lat+A,C.lng+w,C.lat+I];return this.isSurfacePointOnScreen([0,1,0])&&(D[3]=90,D[0]=-180,D[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(D[1]=-90,D[0]=-180,D[2]=180),new vs(D)}calculateCenterFromCameraLngLatAlt(t,o,l,p){return this._helper.calculateCenterFromCameraLngLatAlt(t,o,l,p)}setLocationAtPoint(t,o){const l=bs(this.unprojectScreenPoint(o)),p=bs(t),w=c.bz();c.bL(w);const O=c.bz();c.bI(O,l,w,-this.center.lng*Math.PI/180),c.bH(O,O,w,this.center.lat*Math.PI/180);const I=p[0]*p[0]+p[2]*p[2],A=O[0]*O[0];if(I<A)return;const C=Math.sqrt(I-A),D=-C,F=c.bM(p[0],p[2],O[0],C),G=c.bM(p[0],p[2],O[0],D),Z=c.bz();c.bI(Z,p,w,-F);const Q=c.bM(Z[1],Z[2],O[1],O[2]),ie=c.bz();c.bI(ie,p,w,-G);const de=c.bM(ie[1],ie[2],O[1],O[2]),le=.5*Math.PI,pe=Q>=-le&&Q<=le,be=de>=-le&&de<=le;let ce,ye;if(pe&&be){const Ze=this.center.lng*Math.PI/180,Ge=this.center.lat*Math.PI/180;c.bN(F,Ze)+c.bN(Q,Ge)<c.bN(G,Ze)+c.bN(de,Ge)?(ce=F,ye=Q):(ce=G,ye=de)}else if(pe)ce=F,ye=Q;else{if(!be)return;ce=G,ye=de}const ke=ce/Math.PI*180,me=ye/Math.PI*180,Ee=this.center.lat;this.setCenter(new c.V(ke,c.an(me,-90,90))),this.setZoom(this.zoom+Ss(Ee,this.center.lat))}locationToScreenPoint(t,o){const l=bs(t);if(o){const p=o.getElevationForLngLatZoom(t,this._helper._tileZoom);c.a$(l,l,1+p/c.bE)}return this._projectSurfacePointToScreen(l)}_projectSurfacePointToScreen(t){const o=c.bF();return c.aH(o,[...t,1],this._globeViewProjMatrixNoCorrection),o[0]/=o[3],o[1]/=o[3],new c.P((.5*o[0]+.5)*this.width,(.5*-o[1]+.5)*this.height)}screenPointToMercatorCoordinate(t,o){if(o){const l=o.pointCoordinate(t);if(l)return l}return c.a9.fromLngLat(this.unprojectScreenPoint(t))}screenPointToLocation(t,o){var l;return(l=this.screenPointToMercatorCoordinate(t,o))===null||l===void 0?void 0:l.toLngLat()}isPointOnMapSurface(t,o){const l=this._cameraPosition,p=this.getRayDirectionFromPixel(t);return!!this.rayPlanetIntersection(l,p)}getRayDirectionFromPixel(t){const o=c.bF();o[0]=t.x/this.width*2-1,o[1]=-1*(t.y/this.height*2-1),o[2]=1,o[3]=1,c.aH(o,o,this._globeViewProjMatrixNoCorrectionInverted),o[0]/=o[3],o[1]/=o[3],o[2]/=o[3];const l=c.bz();l[0]=o[0]-this._cameraPosition[0],l[1]=o[1]-this._cameraPosition[1],l[2]=o[2]-this._cameraPosition[2];const p=c.bz();return c.b3(p,l),p}isSurfacePointVisible(t){const o=this._cachedClippingPlane;return o[0]*t[0]+o[1]*t[1]+o[2]*t[2]+o[3]>=0}isSurfacePointOnScreen(t){if(!this.isSurfacePointVisible(t))return!1;const o=c.bF();return c.aH(o,[...t,1],this._globeViewProjMatrixNoCorrection),o[0]/=o[3],o[1]/=o[3],o[2]/=o[3],o[0]>-1&&o[0]<1&&o[1]>-1&&o[1]<1&&o[2]>-1&&o[2]<1}rayPlanetIntersection(t,o){const l=c.b5(t,o),p=c.bz(),w=c.bz();c.a$(w,o,l),c.b2(p,t,w);const O=1-c.b5(p,p);if(O<0)return null;const I=c.b5(t,t)-1,A=-l+(l<0?1:-1)*Math.sqrt(O),C=I/A,D=A;return{tMin:Math.min(C,D),tMax:Math.max(C,D)}}unprojectScreenPoint(t){const o=this._cameraPosition,l=this.getRayDirectionFromPixel(t),p=this.rayPlanetIntersection(o,l);if(p){const D=c.bz();c.b0(D,o,[l[0]*p.tMin,l[1]*p.tMin,l[2]*p.tMin]);const F=c.bz();return c.b3(F,D),cl(F)}const w=this._cachedClippingPlane,O=w[0]*l[0]+w[1]*l[1]+w[2]*l[2],I=-c.bb(w,o)/O,A=c.bz();if(I>0)c.b0(A,o,[l[0]*I,l[1]*I,l[2]*I]);else{const D=c.bz();c.b0(D,o,[2*l[0],2*l[1],2*l[2]]);const F=c.bb(this._cachedClippingPlane,D);c.b2(A,D,[this._cachedClippingPlane[0]*F,this._cachedClippingPlane[1]*F,this._cachedClippingPlane[2]*F])}const C=(function(D){const F=c.bz();return F[0]=D[0]*-D[3],F[1]=D[1]*-D[3],F[2]=D[2]*-D[3],{center:F,radius:Math.sqrt(1-D[3]*D[3])}})(w);return cl((function(D,F,G){const Z=c.bz();c.b2(Z,G,D);const Q=c.bz();return c.bA(Q,D,Z,F/c.b9(Z)),Q})(C.center,C.radius,A))}getMatrixForModel(t,o){const l=c.V.convert(t),p=1/c.bE,w=c.bj();return c.bJ(w,w,l.lng/180*Math.PI),c.bh(w,w,-l.lat/180*Math.PI),c.O(w,w,[0,0,1+o/c.bE]),c.bh(w,w,.5*Math.PI),c.Q(w,w,[p,p,p]),w}getProjectionDataForCustomLayer(t=!0){const o=this.getProjectionData({overscaledTileID:new c.a2(0,0,0,0,0),applyGlobeMatrix:t});return o.tileMercatorCoords=[0,0,1,1],o}getFastPathSimpleProjectionMatrix(t){}}class Cn{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(t){this._helper.setMinZoom(t)}setMaxZoom(t){this._helper.setMaxZoom(t)}setMinPitch(t){this._helper.setMinPitch(t)}setMaxPitch(t){this._helper.setMaxPitch(t)}setRenderWorldCopies(t){this._helper.setRenderWorldCopies(t)}setBearing(t){this._helper.setBearing(t)}setPitch(t){this._helper.setPitch(t)}setRoll(t){this._helper.setRoll(t)}setFov(t){this._helper.setFov(t)}setZoom(t){this._helper.setZoom(t)}setCenter(t){this._helper.setCenter(t)}setElevation(t){this._helper.setElevation(t)}setMinElevationForCurrentTile(t){this._helper.setMinElevationForCurrentTile(t)}setPadding(t){this._helper.setPadding(t)}interpolatePadding(t,o,l){return this._helper.interpolatePadding(t,o,l)}isPaddingEqual(t){return this._helper.isPaddingEqual(t)}resize(t,o,l=!0){this._helper.resize(t,o,l)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(t){this._helper.setMaxBounds(t)}setConstrainOverride(t){this._helper.setConstrainOverride(t)}overrideNearFarZ(t,o){this._helper.overrideNearFarZ(t,o)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(t){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),t)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(t,o){this._globeness=t,this._globeLatitudeErrorCorrectionRadians=o,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(t){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this.defaultConstrain=(o,l)=>this.currentTransform.defaultConstrain(o,l),this.applyConstrain=(o,l)=>this._helper.applyConstrain(o,l),this._helper=new po({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(o,l)=>this.defaultConstrain(o,l)},t),this._globeness=1,this._mercatorTransform=new Xs,this._verticalPerspectiveTransform=new Si}clone(){const t=new Cn;return t._globeness=this._globeness,t._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,t.apply(this,!1),t}apply(t,o){this._helper.apply(t,o),this._mercatorTransform.apply(this,!1),this._verticalPerspectiveTransform.apply(this,!1,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(t){const o=this._mercatorTransform.getProjectionData(t),l=this._verticalPerspectiveTransform.getProjectionData(t);return{mainMatrix:this.isGlobeRendering?l.mainMatrix:o.mainMatrix,clippingPlane:l.clippingPlane,tileMercatorCoords:l.tileMercatorCoords,projectionTransition:t.applyGlobeMatrix?this._globeness:0,fallbackMatrix:o.fallbackMatrix}}isLocationOccluded(t){return this.currentTransform.isLocationOccluded(t)}transformLightDirection(t){return this.currentTransform.transformLightDirection(t)}getPixelScale(){return c.bu(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return c.bu(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(t,o,l){const p=this._mercatorTransform.getPitchedTextCorrection(t,o,l),w=this._verticalPerspectiveTransform.getPitchedTextCorrection(t,o,l);return c.bu(p,w,this._globeness)}projectTileCoordinates(t,o,l,p){return this.currentTransform.projectTileCoordinates(t,o,l,p)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,!1,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(t){return this.currentTransform.calculateFogMatrix(t)}getVisibleUnwrappedCoordinates(t){return this.currentTransform.getVisibleUnwrappedCoordinates(t)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(t){this._mercatorTransform.recalculateZoomAndCenter(t),this._verticalPerspectiveTransform.recalculateZoomAndCenter(t)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(t,o){return this.currentTransform.lngLatToCameraDepth(t,o)}populateCache(t){this._mercatorTransform.populateCache(t),this._verticalPerspectiveTransform.populateCache(t)}getBounds(){return this.currentTransform.getBounds()}calculateCenterFromCameraLngLatAlt(t,o,l,p){return this._helper.calculateCenterFromCameraLngLatAlt(t,o,l,p)}setLocationAtPoint(t,o){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(t,o),void this.apply(this._mercatorTransform,!1);this._verticalPerspectiveTransform.setLocationAtPoint(t,o),this.apply(this._verticalPerspectiveTransform,!1)}locationToScreenPoint(t,o){return this.currentTransform.locationToScreenPoint(t,o)}screenPointToMercatorCoordinate(t,o){return this.currentTransform.screenPointToMercatorCoordinate(t,o)}screenPointToLocation(t,o){return this.currentTransform.screenPointToLocation(t,o)}isPointOnMapSurface(t,o){return this.currentTransform.isPointOnMapSurface(t,o)}getRayDirectionFromPixel(t){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(t)}getMatrixForModel(t,o){return this.currentTransform.getMatrixForModel(t,o)}getProjectionDataForCustomLayer(t=!0){const o=this._mercatorTransform.getProjectionDataForCustomLayer(t);if(!this.isGlobeRendering)return o;const l=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(t);return l.fallbackMatrix=o.mainMatrix,l}getFastPathSimpleProjectionMatrix(t){return this.currentTransform.getFastPathSimpleProjectionMatrix(t)}}class Bs{get useGlobeControls(){return!0}handlePanInertia(t,o){const l=uf(t,o);return Math.abs(l.lng-o.center.lng)>180&&(l.lng=o.center.lng+179.5*Math.sign(l.lng-o.center.lng)),{easingCenter:l,easingOffset:new c.P(0,0)}}handleMapControlsRollPitchBearingZoom(t,o){const l=t.around,p=o.screenPointToLocation(l);t.bearingDelta&&o.setBearing(o.bearing+t.bearingDelta),t.pitchDelta&&o.setPitch(o.pitch+t.pitchDelta),t.rollDelta&&o.setRoll(o.roll+t.rollDelta);const w=o.zoom;t.zoomDelta&&o.setZoom(o.zoom+t.zoomDelta);const O=o.zoom-w;if(O===0)return;const I=c.bK(o.center.lng,p.lng),A=I/(Math.abs(I/180)+1),C=c.bK(o.center.lat,p.lat),D=o.getRayDirectionFromPixel(l),F=o.cameraPosition,G=-1*c.b5(F,D),Z=c.bz();c.b0(Z,F,[D[0]*G,D[1]*G,D[2]*G]);const Q=c.b7(Z)-1,ie=Math.exp(.5*-Math.max(Q-.3,0)),de=Qi(o.worldSize,o.center.lat)/Math.min(o.width,o.height),le=c.bx(de,.9,.5,1,.25),pe=(1-c.aq(-O))*Math.min(ie,le),be=o.center.lat,ce=o.zoom,ye=new c.V(o.center.lng+A*pe,c.an(o.center.lat+C*pe,-c.ao,c.ao));o.setLocationAtPoint(p,l);const ke=o.center,me=c.bx(Math.abs(I),45,85,0,1),Ee=c.bx(de,.75,.35,0,1),Ze=Math.pow(Math.max(me,Ee),.25),Ge=c.bK(ke.lng,ye.lng),qe=c.bK(ke.lat,ye.lat);o.setCenter(new c.V(ke.lng+Ge*Ze,ke.lat+qe*Ze).wrap()),o.setZoom(ce+Ss(be,o.center.lat))}handleMapControlsPan(t,o,l){if(!t.panDelta)return;const p=o.center.lat,w=o.zoom;o.setCenter(uf(t.panDelta,o).wrap()),o.setZoom(w+Ss(p,o.center.lat))}cameraForBoxAndBearing(t,o,l,p,w){const O=Ar(t,o,l,p,w),I=o.left/w.width*2-1,A=(w.width-o.right)/w.width*2-1,C=o.top/w.height*-2+1,D=(w.height-o.bottom)/w.height*-2+1,F=c.bK(l.getWest(),l.getEast())<0,G=F?l.getEast():l.getWest(),Z=F?l.getWest():l.getEast(),Q=Math.max(l.getNorth(),l.getSouth()),ie=Math.min(l.getNorth(),l.getSouth()),de=G+.5*c.bK(G,Z),le=Q+.5*c.bK(Q,ie),pe=w.clone();pe.setCenter(O.center),pe.setBearing(O.bearing),pe.setPitch(0),pe.setRoll(0),pe.setZoom(O.zoom);const be=pe.modelViewProjectionMatrix,ce=[bs(l.getNorthWest()),bs(l.getNorthEast()),bs(l.getSouthWest()),bs(l.getSouthEast()),bs(new c.V(Z,le)),bs(new c.V(G,le)),bs(new c.V(de,Q)),bs(new c.V(de,ie))],ye=bs(O.center);let ke=Number.POSITIVE_INFINITY;for(const me of ce)I<0&&(ke=Bs.getLesserNonNegativeNonNull(ke,Bs.solveVectorScale(me,ye,be,"x",I))),A>0&&(ke=Bs.getLesserNonNegativeNonNull(ke,Bs.solveVectorScale(me,ye,be,"x",A))),C>0&&(ke=Bs.getLesserNonNegativeNonNull(ke,Bs.solveVectorScale(me,ye,be,"y",C))),D<0&&(ke=Bs.getLesserNonNegativeNonNull(ke,Bs.solveVectorScale(me,ye,be,"y",D)));if(Number.isFinite(ke)&&ke!==0)return O.zoom=pe.zoom+c.at(ke),O;En()}handleJumpToCenterZoom(t,o){const l=t.center.lat,p=t.applyConstrain(o.center?c.V.convert(o.center):t.center,t.zoom).center;t.setCenter(p.wrap());const w=o.zoom!==void 0?+o.zoom:t.zoom+Ss(l,p.lat);t.zoom!==w&&t.setZoom(w)}handleEaseTo(t,o){const l=t.zoom,p=t.center,w=t.padding,O={roll:t.roll,pitch:t.pitch,bearing:t.bearing},I={roll:o.roll===void 0?t.roll:o.roll,pitch:o.pitch===void 0?t.pitch:o.pitch,bearing:o.bearing===void 0?t.bearing:o.bearing},A=o.zoom!==void 0,C=!t.isPaddingEqual(o.padding);let D=!1;const F=o.center?c.V.convert(o.center):p,G=t.applyConstrain(F,l).center;co(t,G);const Z=t.clone();Z.setCenter(G),Z.setZoom(A?+o.zoom:l+Ss(p.lat,F.lat)),Z.setBearing(o.bearing);const Q=new c.P(c.an(t.centerPoint.x+o.offsetAsPoint.x,0,t.width),c.an(t.centerPoint.y+o.offsetAsPoint.y,0,t.height));Z.setLocationAtPoint(G,Q);const ie=(o.offset&&o.offsetAsPoint.mag())>0?Z.center:G,de=A?+o.zoom:l+Ss(p.lat,ie.lat),le=l+Ss(p.lat,0),pe=de+Ss(ie.lat,0),be=c.bK(p.lng,ie.lng),ce=c.bK(p.lat,ie.lat),ye=c.aq(pe-le);return D=de!==l,{easeFunc:ke=>{if(c.bo(O,I)||ll({startEulerAngles:O,endEulerAngles:I,tr:t,k:ke,useSlerp:O.roll!=I.roll}),C&&t.interpolatePadding(w,o.padding,ke),o.around)c.w("Easing around a point is not supported under globe projection."),t.setLocationAtPoint(o.around,o.aroundPoint);else{const me=pe>le?Math.min(2,ye):Math.max(.5,ye),Ee=Math.pow(me,1-ke),Ze=td(p,be,ce,ke*Ee);t.setCenter(Ze.wrap())}if(D){const me=c.G.number(le,pe,ke)+Ss(0,t.center.lat);t.setZoom(me)}},isZooming:D,elevationCenter:ie}}handleFlyTo(t,o){const l=o.zoom!==void 0,p=t.center,w=t.zoom,O=t.padding,I=!t.isPaddingEqual(o.padding),A=t.applyConstrain(c.V.convert(o.center||o.locationAtOffset),w).center,C=l?+o.zoom:t.zoom+Ss(t.center.lat,A.lat),D=t.clone();D.setCenter(A),D.setZoom(C),D.setBearing(o.bearing);const F=new c.P(c.an(t.centerPoint.x+o.offsetAsPoint.x,0,t.width),c.an(t.centerPoint.y+o.offsetAsPoint.y,0,t.height));D.setLocationAtPoint(A,F);const G=D.center;co(t,G);const Z=(function(ce,ye,ke){const me=bs(ye),Ee=bs(ke),Ze=c.b5(me,Ee),Ge=Math.acos(Ze),qe=js(ce);return Ge/(2*Math.PI)*qe})(t,p,G),Q=w+Ss(p.lat,0),ie=C+Ss(G.lat,0),de=c.aq(ie-Q);let le;if(typeof o.minZoom=="number"){const ce=+o.minZoom+Ss(G.lat,0),ye=Math.min(ce,Q,ie)+Ss(0,G.lat),ke=t.applyConstrain(G,ye).zoom+Ss(G.lat,0);le=c.aq(ke-Q)}const pe=c.bK(p.lng,G.lng),be=c.bK(p.lat,G.lat);return{easeFunc:(ce,ye,ke,me)=>{const Ee=td(p,pe,be,ke);I&&t.interpolatePadding(O,o.padding,ce);const Ze=ce===1?G:Ee;t.setCenter(Ze.wrap());const Ge=Q+c.at(ye);t.setZoom(ce===1?C:Ge+Ss(0,Ze.lat))},scaleOfZoom:de,targetCenter:G,scaleOfMinZoom:le,pixelPathLength:Z}}static solveVectorScale(t,o,l,p,w){const O=p==="x"?[l[0],l[4],l[8],l[12]]:[l[1],l[5],l[9],l[13]],I=[l[3],l[7],l[11],l[15]],A=t[0]*O[0]+t[1]*O[1]+t[2]*O[2],C=t[0]*I[0]+t[1]*I[1]+t[2]*I[2],D=o[0]*O[0]+o[1]*O[1]+o[2]*O[2],F=o[0]*I[0]+o[1]*I[1]+o[2]*I[2];return D+w*C===A+w*F||I[3]*(A-D)+O[3]*(F-C)+A*F==D*C?null:(D+O[3]-w*F-w*I[3])/(D-A-w*F+w*C)}static getLesserNonNegativeNonNull(t,o){return o!==null&&o>=0&&o<t?o:t}}class rh{constructor(t){this._globe=t,this._mercatorCameraHelper=new Oa,this._verticalPerspectiveCameraHelper=new Bs}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(t,o){return this.currentHelper.handlePanInertia(t,o)}handleMapControlsRollPitchBearingZoom(t,o){return this.currentHelper.handleMapControlsRollPitchBearingZoom(t,o)}handleMapControlsPan(t,o,l){this.currentHelper.handleMapControlsPan(t,o,l)}cameraForBoxAndBearing(t,o,l,p,w){return this.currentHelper.cameraForBoxAndBearing(t,o,l,p,w)}handleJumpToCenterZoom(t,o){this.currentHelper.handleJumpToCenterZoom(t,o)}handleEaseTo(t,o){return this.currentHelper.handleEaseTo(t,o)}handleFlyTo(t,o){return this.currentHelper.handleFlyTo(t,o)}}const Gh=(g,t)=>c.B(g,t&&t.filter((o=>o.identifier!=="source.canvas"))),Er=c.bO();class Pi extends c.E{constructor(t,o={}){var l,p;super(),this._rtlPluginLoaded=()=>{for(const O in this.tileManagers){const I=this.tileManagers[O].getSource().type;I!=="vector"&&I!=="geojson"||this.tileManagers[O].reload()}},this.map=t,this.dispatcher=new xn(is(),t._getMapId()),this.dispatcher.registerMessageHandler("GG",((O,I)=>this.getGlyphs(O,I))),this.dispatcher.registerMessageHandler("GI",((O,I)=>this.getImages(O,I))),this.dispatcher.registerMessageHandler("GDA",((O,I)=>this.getDashes(O,I))),this.imageManager=new pa,this.imageManager.setEventedParent(this);const w=((l=t._container)===null||l===void 0?void 0:l.lang)||typeof document!="undefined"&&((p=document.documentElement)===null||p===void 0?void 0:p.lang)||void 0;this.glyphManager=new It(t._requestManager,o.localIdeographFontFamily,w),this.lineAtlas=new Ot(256,512),this.crossTileSymbolIndex=new fn,this._setInitialValues(),this._resetUpdates(),this.dispatcher.broadcast("SR",c.bP()),ze().on(Oe,this._rtlPluginLoaded),this.on("data",(O=>{if(O.dataType!=="source"||O.sourceDataType!=="metadata")return;const I=this.tileManagers[O.sourceId];if(!I)return;const A=I.getSource();if(A&&A.vectorLayerIds)for(const C in this._layers){const D=this._layers[C];D.source===A.id&&this._validateLayer(D)}}))}_setInitialValues(){var t;this._spritesImagesIds={},this._layers={},this._order=[],this.tileManagers={},this.zoomHistory=new c.bQ,this._availableImages=[],this._globalState={},this._serializedLayers={},this.stylesheet=null,this.light=null,this.sky=null,this.projection&&(this.projection.destroy(),delete this.projection),this._loaded=!1,this._changed=!1,this._updatedLayers={},this._updatedSources={},this._changedImages={},this._glyphsDidChange=!1,this._updatedPaintProps={},this._layerOrderChanged=!1,this.crossTileSymbolIndex=new(((t=this.crossTileSymbolIndex)===null||t===void 0?void 0:t.constructor)||Object),this.pauseablePlacement=void 0,this.placement=void 0,this.z=0}setGlobalStateProperty(t,o){var l,p,w;this._checkLoaded();const O=o===null?(w=(p=(l=this.stylesheet.state)===null||l===void 0?void 0:l[t])===null||p===void 0?void 0:p.default)!==null&&w!==void 0?w:null:o;if(c.bR(O,this._globalState[t]))return this;this._globalState[t]=O,this._applyGlobalStateChanges([t])}getGlobalState(){return this._globalState}setGlobalState(t){this._checkLoaded();const o=[];for(const l in t)!c.bR(this._globalState[l],t[l].default)&&(o.push(l),this._globalState[l]=t[l].default);this._applyGlobalStateChanges(o)}_applyGlobalStateChanges(t){if(t.length===0)return;const o=new Set,l={};for(const p of t){l[p]=this._globalState[p];for(const w in this._layers){const O=this._layers[w],I=O.getLayoutAffectingGlobalStateRefs(),A=O.getPaintAffectingGlobalStateRefs(),C=O.getVisibilityAffectingGlobalStateRefs();if(I.has(p)&&o.add(O.source),A.has(p))for(const{name:D,value:F}of A.get(p))this._updatePaintProperty(O,D,F);C!=null&&C.has(p)&&(O.recalculateVisibility(),this._updateLayer(O))}}this.dispatcher.broadcast("UGS",l);for(const p in this.tileManagers)o.has(p)&&(this._reloadSource(p),this._changed=!0)}loadURL(t,o={},l){this.fire(new c.l("dataloading",{dataType:"style"})),o.validate=typeof o.validate!="boolean"||o.validate;const p=this.map._requestManager.transformRequest(t,"Style");this._loadStyleRequest=new AbortController;const w=this._loadStyleRequest;c.j(p,this._loadStyleRequest).then((O=>{this._loadStyleRequest=null,this._load(O.data,o,l)})).catch((O=>{this._loadStyleRequest=null,O&&!w.signal.aborted&&this.fire(new c.k(O))}))}loadJSON(t,o={},l){this.fire(new c.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,ft.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,o.validate=o.validate!==!1,this._load(t,o,l)})).catch((()=>{}))}loadEmpty(){this.fire(new c.l("dataloading",{dataType:"style"})),this._load(Er,{validate:!1})}_load(t,o,l){var p,w;let O=o.transformStyle?o.transformStyle(l,t):t;if(!o.validate||!Gh(this,c.C(O))){O=Object.assign({},O),this._loaded=!0,this.stylesheet=O;for(const I in O.sources)this.addSource(I,O.sources[I],{validate:!1});O.sprite?this._loadSprite(O.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(O.glyphs),this._createLayers(),this.light=new Dt(this.stylesheet.light),this._setProjectionInternal(((p=this.stylesheet.projection)===null||p===void 0?void 0:p.type)||"mercator"),this.sky=new tt(this.stylesheet.sky),this.map.setTerrain((w=this.stylesheet.terrain)!==null&&w!==void 0?w:null),this.fire(new c.l("data",{dataType:"style"})),this.fire(new c.l("style.load"))}}_createLayers(){var t,o,l;const p=c.bS(this.stylesheet.layers);this.setGlobalState((t=this.stylesheet.state)!==null&&t!==void 0?t:null),this.dispatcher.broadcast("SL",p),this._order=p.map((w=>w.id)),this._layers={},this._serializedLayers=null;for(const w of p){const O=c.bT(w,this._globalState);if(O.setEventedParent(this,{layer:{id:w.id}}),this._layers[w.id]=O,c.bU(O)&&this.tileManagers[O.source]){const I=(l=(o=w.paint)===null||o===void 0?void 0:o["raster-fade-duration"])!==null&&l!==void 0?l:O.paint.get("raster-fade-duration");this.tileManagers[O.source].setRasterFadeDuration(I)}}}_loadSprite(t,o=!1,l=void 0){this.imageManager.setLoaded(!1);const p=new AbortController;let w;this._spriteRequest=p,(function(O,I,A,C){return c._(this,void 0,void 0,(function*(){const D=ba(O),F=A>1?"@2x":"",G={},Z={};for(const{id:Q,url:ie}of D){const de=I.transformRequest(fs(ie,F,".json"),"SpriteJSON");G[Q]=c.j(de,C);const le=I.transformRequest(fs(ie,F,".png"),"SpriteImage");Z[Q]=zt.getImage(le,C)}return yield Promise.all([...Object.values(G),...Object.values(Z)]),(function(Q,ie){return c._(this,void 0,void 0,(function*(){const de={};for(const le in Q){de[le]={};const pe=ft.getImageCanvasContext((yield ie[le]).data),be=(yield Q[le]).data;for(const ce in be){const{width:ye,height:ke,x:me,y:Ee,sdf:Ze,pixelRatio:Ge,stretchX:qe,stretchY:Ve,content:bt,textFitWidth:vt,textFitHeight:ht}=be[ce];de[le][ce]={data:null,pixelRatio:Ge,sdf:Ze,stretchX:qe,stretchY:Ve,content:bt,textFitWidth:vt,textFitHeight:ht,spriteData:{width:ye,height:ke,x:me,y:Ee,context:pe}}}}return de}))})(G,Z)}))})(t,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((O=>{if(this._spriteRequest=null,O)for(const I in O){this._spritesImagesIds[I]=[];const A=this._spritesImagesIds[I]?this._spritesImagesIds[I].filter((C=>!(C in O))):[];for(const C of A)this.imageManager.removeImage(C),this._changedImages[C]=!0;for(const C in O[I]){const D=I==="default"?C:`${I}:${C}`;this._spritesImagesIds[I].push(D),D in this.imageManager.images?this.imageManager.updateImage(D,O[I][C],!1):this.imageManager.addImage(D,O[I][C]),o&&(this._changedImages[D]=!0)}}})).catch((O=>{this._spriteRequest=null,w=O,p.signal.aborted||this.fire(new c.k(w))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),o&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.l("data",{dataType:"style"})),l&&l(w)}))}_unloadSprite(){for(const t of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(t),this._changedImages[t]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.l("data",{dataType:"style"}))}_validateLayer(t){const o=this.tileManagers[t.source];if(!o)return;const l=t.sourceLayer;if(!l)return;const p=o.getSource();(p.type==="geojson"||p.vectorLayerIds&&p.vectorLayerIds.indexOf(l)===-1)&&this.fire(new c.k(new Error(`Source layer "${l}" does not exist on source "${p.id}" as specified by style layer "${t.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const t in this.tileManagers)if(!this.tileManagers[t].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(t,o=!1){const l=this._serializedAllLayers();if(!t||t.length===0)return Object.values(o?c.bV(l):l);const p=[];for(const w of t)if(l[w]){const O=o?c.bV(l[w]):l[w];p.push(O)}return p}_serializedAllLayers(){let t=this._serializedLayers;if(t)return t;t=this._serializedLayers={};const o=Object.keys(this._layers);for(const l of o){const p=this._layers[l];p.type!=="custom"&&(t[l]=p.serialize())}return t}hasTransitions(){var t,o,l;if(!((t=this.light)===null||t===void 0)&&t.hasTransition()||!((o=this.sky)===null||o===void 0)&&o.hasTransition()||!((l=this.projection)===null||l===void 0)&&l.hasTransition())return!0;for(const p in this.tileManagers)if(this.tileManagers[p].hasTransition())return!0;for(const p in this._layers)if(this._layers[p].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(t){if(!this._loaded)return;const o=this._changed;if(o){const p=Object.keys(this._updatedLayers),w=Object.keys(this._removedLayers);(p.length||w.length)&&this._updateWorkerLayers(p,w);for(const O in this._updatedSources){const I=this._updatedSources[O];if(I==="reload")this._reloadSource(O);else{if(I!=="clear")throw new Error(`Invalid action ${I}`);this._clearSource(O)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const O in this._updatedPaintProps)this._layers[O].updateTransitions(t);this.light.updateTransitions(t),this.sky.updateTransitions(t),this._resetUpdates()}const l={};for(const p in this.tileManagers){const w=this.tileManagers[p];l[p]=w.used,w.used=!1}for(const p of this._order){const w=this._layers[p];w.recalculate(t,this._availableImages),!w.isHidden(t.zoom)&&w.source&&(this.tileManagers[w.source].used=!0)}for(const p in l){const w=this.tileManagers[p];!!l[p]!=!!w.used&&w.fire(new c.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:p}))}this.light.recalculate(t),this.sky.recalculate(t),this.projection.recalculate(t),this.z=t.zoom,o&&this.fire(new c.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const t=Object.keys(this._changedImages);if(t.length){for(const o in this.tileManagers)this.tileManagers[o].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const t in this.tileManagers)this.tileManagers[t].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(t,o){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(t,!1),removedIds:o})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(t,o={}){var l;this._checkLoaded();const p=this.serialize();if(t=o.transformStyle?o.transformStyle(p,t):t,((l=o.validate)===null||l===void 0||l)&&Gh(this,c.C(t)))return!1;(t=c.bV(t)).layers=c.bS(t.layers);const w=c.bW(p,t),O=this._getOperationsToPerform(w);if(O.unimplemented.length>0)throw new Error(`Unimplemented: ${O.unimplemented.join(", ")}.`);if(O.operations.length===0)return!1;for(const I of O.operations)I();return this.stylesheet=t,this._serializedLayers=null,this.fire(new c.l("style.load",{style:this})),!0}_getOperationsToPerform(t){const o=[],l=[];for(const p of t)switch(p.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":o.push((()=>this.addLayer.apply(this,p.args)));break;case"removeLayer":o.push((()=>this.removeLayer.apply(this,p.args)));break;case"setPaintProperty":o.push((()=>this.setPaintProperty.apply(this,p.args)));break;case"setLayoutProperty":o.push((()=>this.setLayoutProperty.apply(this,p.args)));break;case"setFilter":o.push((()=>this.setFilter.apply(this,p.args)));break;case"addSource":o.push((()=>this.addSource.apply(this,p.args)));break;case"removeSource":o.push((()=>this.removeSource.apply(this,p.args)));break;case"setLayerZoomRange":o.push((()=>this.setLayerZoomRange.apply(this,p.args)));break;case"setLight":o.push((()=>this.setLight.apply(this,p.args)));break;case"setGeoJSONSourceData":o.push((()=>this.setGeoJSONSourceData.apply(this,p.args)));break;case"setGlyphs":o.push((()=>this.setGlyphs.apply(this,p.args)));break;case"setSprite":o.push((()=>this.setSprite.apply(this,p.args)));break;case"setTerrain":o.push((()=>this.map.setTerrain.apply(this,p.args)));break;case"setSky":o.push((()=>this.setSky.apply(this,p.args)));break;case"setProjection":this.setProjection.apply(this,p.args);break;case"setGlobalState":o.push((()=>this.setGlobalState.apply(this,p.args)));break;case"setTransition":o.push((()=>{}));break;default:l.push(p.command)}return{operations:o,unimplemented:l}}addImage(t,o){if(this.getImage(t))return this.fire(new c.k(new Error(`An image named "${t}" already exists.`)));this.imageManager.addImage(t,o),this._afterImageUpdated(t)}updateImage(t,o){this.imageManager.updateImage(t,o)}getImage(t){return this.imageManager.getImage(t)}removeImage(t){if(!this.getImage(t))return this.fire(new c.k(new Error(`An image named "${t}" does not exist.`)));this.imageManager.removeImage(t),this._afterImageUpdated(t)}_afterImageUpdated(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(t,o,l={}){if(this._checkLoaded(),this.tileManagers[t]!==void 0)throw new Error(`Source "${t}" already exists.`);if(!o.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(o).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(o.type)>=0&&this._validate(c.C.source,`sources.${t}`,o,null,l))return;this.map&&this.map._collectResourceTiming&&(o.collectResourceTiming=!0);const p=this.tileManagers[t]=new ts(t,o,this.dispatcher);p.style=this,p.setEventedParent(this,(()=>({isSourceLoaded:p.loaded(),source:p.serialize(),sourceId:t}))),p.onAdd(this.map),this._changed=!0}removeSource(t){if(this._checkLoaded(),this.tileManagers[t]===void 0)throw new Error("There is no source with this ID");for(const l in this._layers)if(this._layers[l].source===t)return this.fire(new c.k(new Error(`Source "${t}" cannot be removed while layer "${l}" is using it.`)));const o=this.tileManagers[t];delete this.tileManagers[t],delete this._updatedSources[t],o.fire(new c.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:t})),o.setEventedParent(null),o.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(t,o){if(this._checkLoaded(),this.tileManagers[t]===void 0)throw new Error(`There is no source with this ID=${t}`);const l=this.tileManagers[t].getSource();if(l.type!=="geojson")throw new Error(`geojsonSource.type is ${l.type}, which is !== 'geojson`);l.setData(o),this._changed=!0}getSource(t){return this.tileManagers[t]&&this.tileManagers[t].getSource()}addLayer(t,o,l={}){this._checkLoaded();const p=t.id;if(this.getLayer(p))return void this.fire(new c.k(new Error(`Layer "${p}" already exists on this map.`)));let w;if(t.type==="custom"){if(Gh(this,c.bX(t)))return;w=c.bT(t,this._globalState)}else{if("source"in t&&typeof t.source=="object"&&(this.addSource(p,t.source),t=c.bV(t),t=c.e(t,{source:p})),this._validate(c.C.layer,`layers.${p}`,t,{arrayIndex:-1},l))return;w=c.bT(t,this._globalState),this._validateLayer(w),w.setEventedParent(this,{layer:{id:p}})}const O=o?this._order.indexOf(o):this._order.length;if(o&&O===-1)this.fire(new c.k(new Error(`Cannot add layer "${p}" before non-existing layer "${o}".`)));else{if(this._order.splice(O,0,p),this._layerOrderChanged=!0,this._layers[p]=w,this._removedLayers[p]&&w.source&&w.type!=="custom"){const I=this._removedLayers[p];delete this._removedLayers[p],I.type!==w.type?this._updatedSources[w.source]="clear":(this._updatedSources[w.source]="reload",this.tileManagers[w.source].pause())}this._updateLayer(w),w.onAdd&&w.onAdd(this.map)}}moveLayer(t,o){if(this._checkLoaded(),this._changed=!0,!this._layers[t])return void this.fire(new c.k(new Error(`The layer '${t}' does not exist in the map's style and cannot be moved.`)));if(t===o)return;const l=this._order.indexOf(t);this._order.splice(l,1);const p=o?this._order.indexOf(o):this._order.length;o&&p===-1?this.fire(new c.k(new Error(`Cannot move layer "${t}" before non-existing layer "${o}".`))):(this._order.splice(p,0,t),this._layerOrderChanged=!0)}removeLayer(t){this._checkLoaded();const o=this._layers[t];if(!o)return void this.fire(new c.k(new Error(`Cannot remove non-existing layer "${t}".`)));o.setEventedParent(null);const l=this._order.indexOf(t);this._order.splice(l,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=o,delete this._layers[t],this._serializedLayers&&delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],o.onRemove&&o.onRemove(this.map)}getLayer(t){return this._layers[t]}getLayersOrder(){return[...this._order]}hasLayer(t){return t in this._layers}setLayerZoomRange(t,o,l){this._checkLoaded();const p=this.getLayer(t);p?p.minzoom===o&&p.maxzoom===l||(o!=null&&(p.minzoom=o),l!=null&&(p.maxzoom=l),this._updateLayer(p)):this.fire(new c.k(new Error(`Cannot set the zoom range of non-existing layer "${t}".`)))}setFilter(t,o,l={}){this._checkLoaded();const p=this.getLayer(t);if(p){if(!c.bR(p.filter,o))return o==null?(p.setFilter(void 0),void this._updateLayer(p)):void(this._validate(c.C.filter,`layers.${p.id}.filter`,o,null,l)||(p.setFilter(c.bV(o)),this._updateLayer(p)))}else this.fire(new c.k(new Error(`Cannot filter non-existing layer "${t}".`)))}getFilter(t){return c.bV(this.getLayer(t).filter)}setLayoutProperty(t,o,l,p={}){this._checkLoaded();const w=this.getLayer(t);w?c.bR(w.getLayoutProperty(o),l)||(w.setLayoutProperty(o,l,p),this._updateLayer(w)):this.fire(new c.k(new Error(`Cannot style non-existing layer "${t}".`)))}getLayoutProperty(t,o){const l=this.getLayer(t);if(l)return l.getLayoutProperty(o);this.fire(new c.k(new Error(`Cannot get style of non-existing layer "${t}".`)))}setPaintProperty(t,o,l,p={}){this._checkLoaded();const w=this.getLayer(t);w?c.bR(w.getPaintProperty(o),l)||this._updatePaintProperty(w,o,l,p):this.fire(new c.k(new Error(`Cannot style non-existing layer "${t}".`)))}_updatePaintProperty(t,o,l,p={}){t.setPaintProperty(o,l,p)&&this._updateLayer(t),c.bU(t)&&o==="raster-fade-duration"&&this.tileManagers[t.source].setRasterFadeDuration(l),this._changed=!0,this._updatedPaintProps[t.id]=!0,this._serializedLayers=null}getPaintProperty(t,o){return this.getLayer(t).getPaintProperty(o)}setFeatureState(t,o){this._checkLoaded();const l=t.source,p=t.sourceLayer,w=this.tileManagers[l];if(w===void 0)return void this.fire(new c.k(new Error(`The source '${l}' does not exist in the map's style.`)));const O=w.getSource().type;O==="geojson"&&p?this.fire(new c.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):O!=="vector"||p?(t.id===void 0&&this.fire(new c.k(new Error("The feature id parameter must be provided."))),w.setFeatureState(p,t.id,o)):this.fire(new c.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(t,o){this._checkLoaded();const l=t.source,p=this.tileManagers[l];if(p===void 0)return void this.fire(new c.k(new Error(`The source '${l}' does not exist in the map's style.`)));const w=p.getSource().type,O=w==="vector"?t.sourceLayer:void 0;w!=="vector"||O?o&&typeof t.id!="string"&&typeof t.id!="number"?this.fire(new c.k(new Error("A feature id is required to remove its specific state property."))):p.removeFeatureState(O,t.id,o):this.fire(new c.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(t){this._checkLoaded();const o=t.source,l=t.sourceLayer,p=this.tileManagers[o];if(p!==void 0)return p.getSource().type!=="vector"||l?(t.id===void 0&&this.fire(new c.k(new Error("The feature id parameter must be provided."))),p.getFeatureState(l,t.id)):void this.fire(new c.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new c.k(new Error(`The source '${o}' does not exist in the map's style.`)))}getTransition(){return c.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const t=c.bY(this.tileManagers,(w=>w.serialize())),o=this._serializeByIds(this._order,!0),l=this.map.getTerrain()||void 0,p=this.stylesheet;return c.bZ({version:p.version,name:p.name,metadata:p.metadata,light:p.light,sky:p.sky,center:p.center,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch,sprite:p.sprite,glyphs:p.glyphs,transition:p.transition,projection:p.projection,sources:t,layers:o,terrain:l},(w=>w!==void 0))}_updateLayer(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&this.tileManagers[t.source].getSource().type!=="raster"&&(this._updatedSources[t.source]="reload",this.tileManagers[t.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(t){const o=O=>this._layers[O].type==="fill-extrusion",l={},p=[];for(let O=this._order.length-1;O>=0;O--){const I=this._order[O];if(o(I)){l[I]=O;for(const A of t){const C=A[I];if(C)for(const D of C)p.push(D)}}}p.sort(((O,I)=>I.intersectionZ-O.intersectionZ));const w=[];for(let O=this._order.length-1;O>=0;O--){const I=this._order[O];if(o(I))for(let A=p.length-1;A>=0;A--){const C=p[A].feature;if(l[C.layer.id]<O)break;w.push(C),p.pop()}else for(const A of t){const C=A[I];if(C)for(const D of C)w.push(D.feature)}}return w}queryRenderedFeatures(t,o,l){o&&o.filter&&this._validate(c.C.filter,"queryRenderedFeatures.filter",o.filter,null,o);const p={};if(o&&o.layers){if(!(Array.isArray(o.layers)||o.layers instanceof Set))return this.fire(new c.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const C of o.layers){const D=this._layers[C];if(!D)return this.fire(new c.k(new Error(`The layer '${C}' does not exist in the map's style and cannot be queried for features.`))),[];p[D.source]=!0}}const w=[];o.availableImages=this._availableImages;const O=this._serializedAllLayers(),I=o.layers instanceof Set?o.layers:Array.isArray(o.layers)?new Set(o.layers):null,A=Object.assign(Object.assign({},o),{layers:I,globalState:this._globalState});for(const C in this.tileManagers)o.layers&&!p[C]||w.push(kr(this.tileManagers[C],this._layers,O,t,A,l,this.map.terrain?(D,F,G)=>this.map.terrain.getElevation(D,F,G):void 0));return this.placement&&w.push((function(C,D,F,G,Z,Q,ie){const de={},le=Q.queryRenderedSymbols(G),pe=[];for(const be of Object.keys(le).map(Number))pe.push(ie[be]);pe.sort(As);for(const be of pe){const ce=be.featureIndex.lookupSymbolFeatures(le[be.bucketInstanceId],D,be.bucketIndex,be.sourceLayerIndex,{filterSpec:Z.filter,globalState:Z.globalState},Z.layers,Z.availableImages,C);for(const ye in ce){const ke=de[ye]=de[ye]||[],me=ce[ye];me.sort(((Ee,Ze)=>{const Ge=be.featureSortOrder;if(Ge){const qe=Ge.indexOf(Ee.featureIndex);return Ge.indexOf(Ze.featureIndex)-qe}return Ze.featureIndex-Ee.featureIndex}));for(const Ee of me)ke.push(Ee)}}return(function(be,ce,ye){for(const ke in be)for(const me of be[ke])Yn(me,ye[ce[ke].source]);return be})(de,C,F)})(this._layers,O,this.tileManagers,t,A,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(w)}querySourceFeatures(t,o){o!=null&&o.filter&&this._validate(c.C.filter,"querySourceFeatures.filter",o.filter,null,o);const l=this.tileManagers[t];return l?(function(p,w){const O=p.getRenderableIds().map((C=>p.getTileByID(C))),I=[],A={};for(let C=0;C<O.length;C++){const D=O[C],F=D.tileID.canonical.key;A[F]||(A[F]=!0,D.querySourceFeatures(I,w))}return I})(l,o?Object.assign(Object.assign({},o),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(t,o={}){this._checkLoaded();const l=this.light.getLight();let p=!1;for(const O in t)if(!c.bR(t[O],l[O])){p=!0;break}if(!p)return;const w={now:it(),transition:c.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t,o),this.light.updateTransitions(w)}getProjection(){var t;return(t=this.stylesheet)===null||t===void 0?void 0:t.projection}setProjection(t){if(this._checkLoaded(),this.projection){if(this.projection.name===t.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=t,this._setProjectionInternal(t.type)}getSky(){var t;return(t=this.stylesheet)===null||t===void 0?void 0:t.sky}setSky(t,o={}){this._checkLoaded();const l=this.getSky();let p=!1;if(!t&&!l)return;if(t&&!l)p=!0;else if(!t&&l)p=!0;else for(const O in t)if(!c.bR(t[O],l[O])){p=!0;break}if(!p)return;const w={now:it(),transition:c.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=t,this.sky.setSky(t,o),this.sky.updateTransitions(w)}_setProjectionInternal(t){const o=(function(l,p){const w={constrainOverride:p};if(Array.isArray(l)){const O=new Jl({type:l});return{projection:O,transform:new Cn(w),cameraHelper:new rh(O)}}switch(l){case"mercator":return{projection:new ks,transform:new Xs(w),cameraHelper:new Oa};case"globe":{const O=new Jl({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:O,transform:new Cn(w),cameraHelper:new rh(O)}}case"vertical-perspective":return{projection:new Fo,transform:new Si(w),cameraHelper:new Bs};default:return c.w(`Unknown projection name: ${l}. Falling back to mercator projection.`),{projection:new ks,transform:new Xs(w),cameraHelper:new Oa}}})(t,this.map.transformConstrain);this.projection=o.projection,this.map.migrateProjection(o.transform,o.cameraHelper);for(const l in this.tileManagers)this.tileManagers[l].reload()}_validate(t,o,l,p,w={}){return(!w||w.validate!==!1)&&Gh(this,t.call(c.C,c.e({key:o,style:this.serialize(),value:l,styleSpec:c.u},p)))}_remove(t=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),ze().off(Oe,this._rtlPluginLoaded);for(const o in this._layers)this._layers[o].setEventedParent(null);for(const o in this.tileManagers){const l=this.tileManagers[o];l.setEventedParent(null),l.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),t&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(t)}_clearSource(t){this.tileManagers[t].clearTiles()}_reloadSource(t){this.tileManagers[t].resume(),this.tileManagers[t].reload()}_updateSources(t){for(const o in this.tileManagers)this.tileManagers[o].update(t,this.map.terrain)}_generateCollisionBoxes(){for(const t in this.tileManagers)this._reloadSource(t)}_updatePlacement(t,o,l,p,w=!1){let O=!1,I=!1;const A={};for(const C of this._order){const D=this._layers[C];if(D.type!=="symbol")continue;if(!A[D.source]){const G=this.tileManagers[D.source];A[D.source]=G.getRenderableIds(!0).map((Z=>G.getTileByID(Z))).sort(((Z,Q)=>Q.tileID.overscaledZ-Z.tileID.overscaledZ||(Z.tileID.isLessThan(Q.tileID)?-1:1)))}const F=this.crossTileSymbolIndex.addLayer(D,A[D.source],t.center.lng);O=O||F}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((w=w||this._layerOrderChanged||l===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(it(),t.zoom))&&(this.pauseablePlacement=new xr(t,this.map.terrain,this._order,w,o,l,p,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,A),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(it()),I=!0),O&&this.pauseablePlacement.placement.setStale()),I||O)for(const C of this._order){const D=this._layers[C];D.type==="symbol"&&this.placement.updateLayerOpacities(D,A[D.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(it())}_releaseSymbolFadeTiles(){for(const t in this.tileManagers)this.tileManagers[t].releaseSymbolFadeTiles()}getImages(t,o){return c._(this,void 0,void 0,(function*(){const l=yield this.imageManager.getImages(o.icons);this._updateTilesForChangedImages();const p=this.tileManagers[o.source];return p&&p.setDependencies(o.tileID.key,o.type,o.icons),l}))}getGlyphs(t,o){return c._(this,void 0,void 0,(function*(){const l=yield this.glyphManager.getGlyphs(o.stacks),p=this.tileManagers[o.source];return p&&p.setDependencies(o.tileID.key,o.type,[""]),l}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(t,o={}){this._checkLoaded(),t&&this._validate(c.C.glyphs,"glyphs",t,null,o)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=t,this.glyphManager.entries={},this.glyphManager.setURL(t))}getDashes(t,o){return c._(this,void 0,void 0,(function*(){const l={};for(const[p,w]of Object.entries(o.dashes))l[p]=this.lineAtlas.getDash(w.dasharray,w.round);return l}))}addSprite(t,o,l={},p){this._checkLoaded();const w=[{id:t,url:o}],O=[...ba(this.stylesheet.sprite),...w];this._validate(c.C.sprite,"sprite",O,null,l)||(this.stylesheet.sprite=O,this._loadSprite(w,!0,p))}removeSprite(t){this._checkLoaded();const o=ba(this.stylesheet.sprite);if(o.find((l=>l.id===t))){if(this._spritesImagesIds[t])for(const l of this._spritesImagesIds[t])this.imageManager.removeImage(l),this._changedImages[l]=!0;o.splice(o.findIndex((l=>l.id===t)),1),this.stylesheet.sprite=o.length>0?o:void 0,delete this._spritesImagesIds[t],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.l("data",{dataType:"style"}))}else this.fire(new c.k(new Error(`Sprite "${t}" doesn't exists on this map.`)))}getSprite(){return ba(this.stylesheet.sprite)}setSprite(t,o={},l){this._checkLoaded(),t&&this._validate(c.C.sprite,"sprite",t,null,o)||(this.stylesheet.sprite=t,t?this._loadSprite(t,!0,l):(this._unloadSprite(),l&&l(null)))}destroy(){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null);for(const t in this.tileManagers){const o=this.tileManagers[t];o.setEventedParent(null),o.onRemove(this.map)}this.tileManagers={},this.imageManager&&(this.imageManager.setEventedParent(null),this.imageManager.destroy(),this._availableImages=[],this._spritesImagesIds={}),this.glyphManager&&this.glyphManager.destroy();for(const t in this._layers){const o=this._layers[t];o.setEventedParent(null),o.onRemove&&o.onRemove(this.map)}this._setInitialValues(),this.setEventedParent(null),this.dispatcher.unregisterMessageHandler("GG"),this.dispatcher.unregisterMessageHandler("GI"),this.dispatcher.unregisterMessageHandler("GDA"),this.dispatcher.remove(!0),this._listeners={},this._oneTimeListeners={}}}var mf=c.aU([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class ml{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(t,o,l,p,w,O,I,A,C){this.context=t;let D=this.boundPaintVertexBuffers.length!==p.length;for(let F=0;!D&&F<p.length;F++)this.boundPaintVertexBuffers[F]!==p[F]&&(D=!0);!this.vao||this.boundProgram!==o||this.boundLayoutVertexBuffer!==l||D||this.boundIndexBuffer!==w||this.boundVertexOffset!==O||this.boundDynamicVertexBuffer!==I||this.boundDynamicVertexBuffer2!==A||this.boundDynamicVertexBuffer3!==C?this.freshBind(o,l,p,w,O,I,A,C):(t.bindVertexArray.set(this.vao),I&&I.bind(),w&&w.dynamicDraw&&w.bind(),A&&A.bind(),C&&C.bind())}freshBind(t,o,l,p,w,O,I,A){const C=t.numAttributes,D=this.context,F=D.gl;this.vao&&this.destroy(),this.vao=D.createVertexArray(),D.bindVertexArray.set(this.vao),this.boundProgram=t,this.boundLayoutVertexBuffer=o,this.boundPaintVertexBuffers=l,this.boundIndexBuffer=p,this.boundVertexOffset=w,this.boundDynamicVertexBuffer=O,this.boundDynamicVertexBuffer2=I,this.boundDynamicVertexBuffer3=A,o.enableAttributes(F,t);for(const G of l)G.enableAttributes(F,t);O&&O.enableAttributes(F,t),I&&I.enableAttributes(F,t),A&&A.enableAttributes(F,t),o.bind(),o.setVertexAttribPointers(F,t,w);for(const G of l)G.bind(),G.setVertexAttribPointers(F,t,w);O&&(O.bind(),O.setVertexAttribPointers(F,t,w)),p&&p.bind(),I&&(I.bind(),I.setVertexAttribPointers(F,t,w)),A&&(A.bind(),A.setVertexAttribPointers(F,t,w)),D.currentNumAttributes=C}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const zd=(g,t,o,l,p)=>({u_texture:0,u_ele_delta:g,u_fog_matrix:t,u_fog_color:o?o.properties.get("fog-color"):c.bp.white,u_fog_ground_blend:o?o.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:p?0:o?o.calculateFogBlendOpacity(l):0,u_horizon_color:o?o.properties.get("horizon-color"):c.bp.white,u_horizon_fog_blend:o?o.properties.get("horizon-fog-blend"):1,u_is_globe_mode:p?1:0}),ri={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function mo(g){const t=[];for(let o=0;o<g.length;o++){if(g[o]===null)continue;const l=g[o].split(" ");t.push(l.pop())}return t}class hh{constructor(t,o,l,p,w,O,I,A,C=[]){const D=t.gl;this.program=D.createProgram();const F=mo(o.staticAttributes),G=l?l.getBinderAttributes():[],Z=F.concat(G),Q=Ba.prelude.staticUniforms?mo(Ba.prelude.staticUniforms):[],ie=I.staticUniforms?mo(I.staticUniforms):[],de=o.staticUniforms?mo(o.staticUniforms):[],le=l?l.getBinderUniforms():[],pe=Q.concat(ie).concat(de).concat(le),be=[];for(const Ge of pe)be.indexOf(Ge)<0&&be.push(Ge);const ce=l?l.defines():[];Mo(D)&&ce.unshift("#version 300 es"),w&&ce.push("#define OVERDRAW_INSPECTOR;"),O&&ce.push("#define TERRAIN3D;"),A&&ce.push(A),C&&ce.push(...C);let ye=ce.concat(Ba.prelude.fragmentSource,I.fragmentSource,o.fragmentSource).join(`
`),ke=ce.concat(Ba.prelude.vertexSource,I.vertexSource,o.vertexSource).join(`
`);Mo(D)||(ye=(function(Ge){return Ge.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")})(ye),ke=(function(Ge){return Ge.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")})(ke));const me=D.createShader(D.FRAGMENT_SHADER);if(D.isContextLost())return void(this.failedToCreate=!0);if(D.shaderSource(me,ye),D.compileShader(me),!D.getShaderParameter(me,D.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${D.getShaderInfoLog(me)}`);D.attachShader(this.program,me);const Ee=D.createShader(D.VERTEX_SHADER);if(D.isContextLost())return void(this.failedToCreate=!0);if(D.shaderSource(Ee,ke),D.compileShader(Ee),!D.getShaderParameter(Ee,D.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${D.getShaderInfoLog(Ee)}`);D.attachShader(this.program,Ee),this.attributes={};const Ze={};this.numAttributes=Z.length;for(let Ge=0;Ge<this.numAttributes;Ge++)Z[Ge]&&(D.bindAttribLocation(this.program,Ge,Z[Ge]),this.attributes[Z[Ge]]=Ge);if(D.linkProgram(this.program),!D.getProgramParameter(this.program,D.LINK_STATUS))throw new Error(`Program failed to link: ${D.getProgramInfoLog(this.program)}`);D.deleteShader(Ee),D.deleteShader(me);for(let Ge=0;Ge<be.length;Ge++){const qe=be[Ge];if(qe&&!Ze[qe]){const Ve=D.getUniformLocation(this.program,qe);Ve&&(Ze[qe]=Ve)}}this.fixedUniforms=p(t,Ze),this.terrainUniforms=((Ge,qe)=>({u_depth:new c.b_(Ge,qe.u_depth),u_terrain:new c.b_(Ge,qe.u_terrain),u_terrain_dim:new c.bq(Ge,qe.u_terrain_dim),u_terrain_matrix:new c.c0(Ge,qe.u_terrain_matrix),u_terrain_unpack:new c.c1(Ge,qe.u_terrain_unpack),u_terrain_exaggeration:new c.bq(Ge,qe.u_terrain_exaggeration)}))(t,Ze),this.projectionUniforms=((Ge,qe)=>({u_projection_matrix:new c.c0(Ge,qe.u_projection_matrix),u_projection_tile_mercator_coords:new c.c1(Ge,qe.u_projection_tile_mercator_coords),u_projection_clipping_plane:new c.c1(Ge,qe.u_projection_clipping_plane),u_projection_transition:new c.bq(Ge,qe.u_projection_transition),u_projection_fallback_matrix:new c.c0(Ge,qe.u_projection_fallback_matrix)}))(t,Ze),this.binderUniforms=l?l.getUniforms(t,Ze):[]}draw(t,o,l,p,w,O,I,A,C,D,F,G,Z,Q,ie,de,le,pe,be){const ce=t.gl;if(this.failedToCreate)return;if(t.program.set(this.program),t.setDepthMode(l),t.setStencilMode(p),t.setColorMode(w),t.setCullFace(O),A){t.activeTexture.set(ce.TEXTURE2),ce.bindTexture(ce.TEXTURE_2D,A.depthTexture),t.activeTexture.set(ce.TEXTURE3),ce.bindTexture(ce.TEXTURE_2D,A.texture);for(const ke in this.terrainUniforms)this.terrainUniforms[ke].set(A[ke])}if(C)for(const ke in C)this.projectionUniforms[ri[ke]].set(C[ke]);if(I)for(const ke in this.fixedUniforms)this.fixedUniforms[ke].set(I[ke]);de&&de.setUniforms(t,this.binderUniforms,Q,{zoom:ie});let ye=0;switch(o){case ce.LINES:ye=2;break;case ce.TRIANGLES:ye=3;break;case ce.LINE_STRIP:ye=1}for(const ke of Z.get()){const me=ke.vaos||(ke.vaos={});(me[D]||(me[D]=new ml)).bind(t,this,F,de?de.getPaintVertexBuffers():[],G,ke.vertexOffset,le,pe,be),ce.drawElements(o,ke.primitiveLength*ye,ce.UNSIGNED_SHORT,ke.primitiveOffset*ye*2)}}}function gf(g,t,o){const l=1/c.aN(o,1,t.transform.tileZoom),p=Math.pow(2,o.tileID.overscaledZ),w=o.tileSize*Math.pow(2,t.transform.tileZoom)/p,O=w*(o.tileID.canonical.x+o.tileID.wrap*p),I=w*o.tileID.canonical.y;return{u_image:0,u_texsize:o.imageAtlasTexture.size,u_scale:[l,g.fromScale,g.toScale],u_fade:g.t,u_pixel_coord_upper:[O>>16,I>>16],u_pixel_coord_lower:[65535&O,65535&I]}}const jo=(g,t,o,l)=>{const p=g.style.light,w=p.properties.get("position"),O=[w.x,w.y,w.z],I=c.c4();p.properties.get("anchor")==="viewport"&&c.c5(I,g.transform.bearingInRadians),c.c6(O,O,I);const A=g.transform.transformLightDirection(O),C=p.properties.get("color");return{u_lightpos:O,u_lightpos_globe:A,u_lightintensity:p.properties.get("intensity"),u_lightcolor:[C.r,C.g,C.b],u_vertical_gradient:+t,u_opacity:o,u_fill_translate:l}},ad=(g,t,o,l,p,w,O)=>c.e(jo(g,t,o,l),gf(w,g,O),{u_height_factor:-Math.pow(2,p.overscaledZ)/O.tileSize/8}),Uo=(g,t,o,l)=>c.e(gf(t,g,o),{u_fill_translate:l}),Fh=(g,t)=>({u_world:g,u_fill_translate:t}),jh=(g,t,o,l,p)=>c.e(Uo(g,t,o,p),{u_world:l}),Uh=(g,t,o,l,p)=>{const w=g.transform;let O,I,A=0;if(o.paint.get("circle-pitch-alignment")==="map"){const C=c.aN(t,1,w.zoom);O=!0,I=[C,C],A=C/(c.a5*Math.pow(2,t.tileID.overscaledZ))*2*Math.PI*p}else O=!1,I=w.pixelsToGLUnits;return{u_camera_to_center_distance:w.cameraToCenterDistance,u_scale_with_map:+(o.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+O,u_device_pixel_ratio:g.pixelRatio,u_extrude_scale:I,u_globe_extrude_scale:A,u_translate:l}},hi=g=>({u_pixel_extrude_scale:[1/g.width,1/g.height]}),Dd=g=>({u_viewport_size:[g.width,g.height]}),qo=(g,t=1)=>({u_color:g,u_overlay:0,u_overlay_scale:t}),li=(g,t,o,l)=>{const p=c.aN(g,1,t)/(c.a5*Math.pow(2,g.tileID.overscaledZ))*2*Math.PI*l;return{u_extrude_scale:c.aN(g,1,t),u_intensity:o,u_globe_extrude_scale:p}},Bd=(g,t,o,l)=>{const p=c.N();c.c7(p,0,g.width,g.height,0,0,1);const w=g.context.gl;return{u_matrix:p,u_world:[w.drawingBufferWidth,w.drawingBufferHeight],u_image:o,u_color_ramp:l,u_opacity:t.paint.get("heatmap-opacity")}},lh=(g,t,o)=>{const l=o.paint.get("hillshade-accent-color");let p;switch(o.paint.get("hillshade-method")){case"basic":p=4;break;case"combined":p=1;break;case"igor":p=2;break;case"multidirectional":p=3;break;default:p=0}const w=o.getIlluminationProperties();for(let O=0;O<w.directionRadians.length;O++)o.paint.get("hillshade-illumination-anchor")==="viewport"&&(w.directionRadians[O]+=g.transform.bearingInRadians);return{u_image:0,u_latrange:tr(0,t.tileID),u_exaggeration:o.paint.get("hillshade-exaggeration"),u_altitudes:w.altitudeRadians,u_azimuths:w.directionRadians,u_accent:l,u_method:p,u_highlights:w.highlightColor,u_shadows:w.shadowColor}},yf=(g,t)=>{const o=t.stride,l=c.N();return c.c7(l,0,c.a5,-c.a5,0,0,1),c.O(l,l,[0,-c.a5,0]),{u_matrix:l,u_image:1,u_dimension:[o,o],u_zoom:g.overscaledZ,u_unpack:t.getUnpackVector()}};function tr(g,t){const o=Math.pow(2,t.canonical.z),l=t.canonical.y;return[new c.a9(0,l/o).toLngLat().lat,new c.a9(0,(l+1)/o).toLngLat().lat]}const bf=(g,t,o=0)=>({u_image:0,u_unpack:t.getUnpackVector(),u_dimension:[t.stride,t.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:o,u_opacity:g.paint.get("color-relief-opacity")}),Ei=(g,t,o,l)=>{const p=g.transform;return{u_translation:Cr(g,t,o),u_ratio:l/c.aN(t,1,p.zoom),u_device_pixel_ratio:g.pixelRatio,u_units_to_pixels:[1/p.pixelsToGLUnits[0],1/p.pixelsToGLUnits[1]]}},wf=(g,t,o,l,p)=>c.e(Ei(g,t,o,l),{u_image:0,u_image_height:p}),di=(g,t,o,l,p)=>{const w=g.transform,O=go(t,w);return{u_translation:Cr(g,t,o),u_texsize:t.imageAtlasTexture.size,u_ratio:l/c.aN(t,1,w.zoom),u_device_pixel_ratio:g.pixelRatio,u_image:0,u_scale:[O,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]]}},Mn=(g,t,o,l,p)=>{const w=go(t,g.transform);return c.e(Ei(g,t,o,l),{u_tileratio:w,u_crossfade_from:p.fromScale,u_crossfade_to:p.toScale,u_image:0,u_mix:p.t,u_lineatlas_width:g.lineAtlas.width,u_lineatlas_height:g.lineAtlas.height})},ar=(g,t,o,l,p,w)=>{const O=go(t,g.transform);return c.e(Ei(g,t,o,l),{u_image:0,u_image_height:w,u_tileratio:O,u_crossfade_from:p.fromScale,u_crossfade_to:p.toScale,u_image_dash:1,u_mix:p.t,u_lineatlas_width:g.lineAtlas.width,u_lineatlas_height:g.lineAtlas.height})};function go(g,t){return 1/c.aN(g,1,t.tileZoom)}function Cr(g,t,o){return c.aO(g.transform,t,o.paint.get("line-translate"),o.paint.get("line-translate-anchor"))}const qh=(g,t,o,l,p)=>{return{u_tl_parent:g,u_scale_parent:t,u_buffer_scale:1,u_fade_t:o.mix,u_opacity:o.opacity*l.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:l.paint.get("raster-brightness-min"),u_brightness_high:l.paint.get("raster-brightness-max"),u_saturation_factor:(O=l.paint.get("raster-saturation"),O>0?1-1/(1.001-O):-O),u_contrast_factor:(w=l.paint.get("raster-contrast"),w>0?1/(1-w):1+w),u_spin_weights:dh(l.paint.get("raster-hue-rotate")),u_coords_top:[p[0].x,p[0].y,p[1].x,p[1].y],u_coords_bottom:[p[3].x,p[3].y,p[2].x,p[2].y]};var w,O};function dh(g){g*=Math.PI/180;const t=Math.sin(g),o=Math.cos(g);return[(2*o+1)/3,(-Math.sqrt(3)*t-o+1)/3,(Math.sqrt(3)*t-o+1)/3]}const Ci=(g,t,o,l,p,w,O,I,A,C,D,F,G)=>{const Z=O.transform;return{u_is_size_zoom_constant:+(g==="constant"||g==="source"),u_is_size_feature_constant:+(g==="constant"||g==="camera"),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:Z.cameraToCenterDistance,u_pitch:Z.pitch/360*2*Math.PI,u_rotate_symbol:+o,u_aspect_ratio:Z.width/Z.height,u_fade_change:O.options.fadeDuration?O.symbolFadeChange:1,u_label_plane_matrix:I,u_coord_matrix:A,u_is_text:+D,u_pitch_with_map:+l,u_is_along_line:p,u_is_variable_anchor:w,u_texsize:F,u_texture:0,u_translation:C,u_pitched_scale:G}},fh=(g,t,o,l,p,w,O,I,A,C,D,F,G,Z)=>{const Q=O.transform;return c.e(Ci(g,t,o,l,p,w,O,I,A,C,D,F,Z),{u_gamma_scale:l?Math.cos(Q.pitch*Math.PI/180)*Q.cameraToCenterDistance:1,u_device_pixel_ratio:O.pixelRatio,u_is_halo:1})},yo=(g,t,o,l,p,w,O,I,A,C,D,F,G)=>c.e(fh(g,t,o,l,p,w,O,I,A,C,!0,D,0,G),{u_texsize_icon:F,u_texture_icon:1}),Vh=(g,t)=>({u_opacity:g,u_color:t}),gl=(g,t,o,l,p)=>c.e((function(w,O,I,A){const C=I.imageManager.getPattern(w.from.toString()),D=I.imageManager.getPattern(w.to.toString()),{width:F,height:G}=I.imageManager.getPixelSize(),Z=Math.pow(2,A.tileID.overscaledZ),Q=A.tileSize*Math.pow(2,I.transform.tileZoom)/Z,ie=Q*(A.tileID.canonical.x+A.tileID.wrap*Z),de=Q*A.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:C.tl,u_pattern_br_a:C.br,u_pattern_tl_b:D.tl,u_pattern_br_b:D.br,u_texsize:[F,G],u_mix:O.t,u_pattern_size_a:C.displaySize,u_pattern_size_b:D.displaySize,u_scale_a:O.fromScale,u_scale_b:O.toScale,u_tile_units_to_pixels:1/c.aN(A,1,I.transform.tileZoom),u_pixel_coord_upper:[ie>>16,de>>16],u_pixel_coord_lower:[65535&ie,65535&de]}})(o,p,t,l),{u_opacity:g}),ch=(g,t)=>{},vf={fillExtrusion:(g,t)=>({u_lightpos:new c.c2(g,t.u_lightpos),u_lightpos_globe:new c.c2(g,t.u_lightpos_globe),u_lightintensity:new c.bq(g,t.u_lightintensity),u_lightcolor:new c.c2(g,t.u_lightcolor),u_vertical_gradient:new c.bq(g,t.u_vertical_gradient),u_opacity:new c.bq(g,t.u_opacity),u_fill_translate:new c.c3(g,t.u_fill_translate)}),fillExtrusionPattern:(g,t)=>({u_lightpos:new c.c2(g,t.u_lightpos),u_lightpos_globe:new c.c2(g,t.u_lightpos_globe),u_lightintensity:new c.bq(g,t.u_lightintensity),u_lightcolor:new c.c2(g,t.u_lightcolor),u_vertical_gradient:new c.bq(g,t.u_vertical_gradient),u_height_factor:new c.bq(g,t.u_height_factor),u_opacity:new c.bq(g,t.u_opacity),u_fill_translate:new c.c3(g,t.u_fill_translate),u_image:new c.b_(g,t.u_image),u_texsize:new c.c3(g,t.u_texsize),u_pixel_coord_upper:new c.c3(g,t.u_pixel_coord_upper),u_pixel_coord_lower:new c.c3(g,t.u_pixel_coord_lower),u_scale:new c.c2(g,t.u_scale),u_fade:new c.bq(g,t.u_fade)}),fill:(g,t)=>({u_fill_translate:new c.c3(g,t.u_fill_translate)}),fillPattern:(g,t)=>({u_image:new c.b_(g,t.u_image),u_texsize:new c.c3(g,t.u_texsize),u_pixel_coord_upper:new c.c3(g,t.u_pixel_coord_upper),u_pixel_coord_lower:new c.c3(g,t.u_pixel_coord_lower),u_scale:new c.c2(g,t.u_scale),u_fade:new c.bq(g,t.u_fade),u_fill_translate:new c.c3(g,t.u_fill_translate)}),fillOutline:(g,t)=>({u_world:new c.c3(g,t.u_world),u_fill_translate:new c.c3(g,t.u_fill_translate)}),fillOutlinePattern:(g,t)=>({u_world:new c.c3(g,t.u_world),u_image:new c.b_(g,t.u_image),u_texsize:new c.c3(g,t.u_texsize),u_pixel_coord_upper:new c.c3(g,t.u_pixel_coord_upper),u_pixel_coord_lower:new c.c3(g,t.u_pixel_coord_lower),u_scale:new c.c2(g,t.u_scale),u_fade:new c.bq(g,t.u_fade),u_fill_translate:new c.c3(g,t.u_fill_translate)}),circle:(g,t)=>({u_camera_to_center_distance:new c.bq(g,t.u_camera_to_center_distance),u_scale_with_map:new c.b_(g,t.u_scale_with_map),u_pitch_with_map:new c.b_(g,t.u_pitch_with_map),u_extrude_scale:new c.c3(g,t.u_extrude_scale),u_device_pixel_ratio:new c.bq(g,t.u_device_pixel_ratio),u_globe_extrude_scale:new c.bq(g,t.u_globe_extrude_scale),u_translate:new c.c3(g,t.u_translate)}),collisionBox:(g,t)=>({u_pixel_extrude_scale:new c.c3(g,t.u_pixel_extrude_scale)}),collisionCircle:(g,t)=>({u_viewport_size:new c.c3(g,t.u_viewport_size)}),debug:(g,t)=>({u_color:new c.b$(g,t.u_color),u_overlay:new c.b_(g,t.u_overlay),u_overlay_scale:new c.bq(g,t.u_overlay_scale)}),depth:ch,clippingMask:ch,heatmap:(g,t)=>({u_extrude_scale:new c.bq(g,t.u_extrude_scale),u_intensity:new c.bq(g,t.u_intensity),u_globe_extrude_scale:new c.bq(g,t.u_globe_extrude_scale)}),heatmapTexture:(g,t)=>({u_matrix:new c.c0(g,t.u_matrix),u_world:new c.c3(g,t.u_world),u_image:new c.b_(g,t.u_image),u_color_ramp:new c.b_(g,t.u_color_ramp),u_opacity:new c.bq(g,t.u_opacity)}),hillshade:(g,t)=>({u_image:new c.b_(g,t.u_image),u_latrange:new c.c3(g,t.u_latrange),u_exaggeration:new c.bq(g,t.u_exaggeration),u_altitudes:new c.c9(g,t.u_altitudes),u_azimuths:new c.c9(g,t.u_azimuths),u_accent:new c.b$(g,t.u_accent),u_method:new c.b_(g,t.u_method),u_shadows:new c.c8(g,t.u_shadows),u_highlights:new c.c8(g,t.u_highlights)}),hillshadePrepare:(g,t)=>({u_matrix:new c.c0(g,t.u_matrix),u_image:new c.b_(g,t.u_image),u_dimension:new c.c3(g,t.u_dimension),u_zoom:new c.bq(g,t.u_zoom),u_unpack:new c.c1(g,t.u_unpack)}),colorRelief:(g,t)=>({u_image:new c.b_(g,t.u_image),u_unpack:new c.c1(g,t.u_unpack),u_dimension:new c.c3(g,t.u_dimension),u_elevation_stops:new c.b_(g,t.u_elevation_stops),u_color_stops:new c.b_(g,t.u_color_stops),u_color_ramp_size:new c.b_(g,t.u_color_ramp_size),u_opacity:new c.bq(g,t.u_opacity)}),line:(g,t)=>({u_translation:new c.c3(g,t.u_translation),u_ratio:new c.bq(g,t.u_ratio),u_device_pixel_ratio:new c.bq(g,t.u_device_pixel_ratio),u_units_to_pixels:new c.c3(g,t.u_units_to_pixels)}),lineGradient:(g,t)=>({u_translation:new c.c3(g,t.u_translation),u_ratio:new c.bq(g,t.u_ratio),u_device_pixel_ratio:new c.bq(g,t.u_device_pixel_ratio),u_units_to_pixels:new c.c3(g,t.u_units_to_pixels),u_image:new c.b_(g,t.u_image),u_image_height:new c.bq(g,t.u_image_height)}),linePattern:(g,t)=>({u_translation:new c.c3(g,t.u_translation),u_texsize:new c.c3(g,t.u_texsize),u_ratio:new c.bq(g,t.u_ratio),u_device_pixel_ratio:new c.bq(g,t.u_device_pixel_ratio),u_image:new c.b_(g,t.u_image),u_units_to_pixels:new c.c3(g,t.u_units_to_pixels),u_scale:new c.c2(g,t.u_scale),u_fade:new c.bq(g,t.u_fade)}),lineSDF:(g,t)=>({u_translation:new c.c3(g,t.u_translation),u_ratio:new c.bq(g,t.u_ratio),u_device_pixel_ratio:new c.bq(g,t.u_device_pixel_ratio),u_units_to_pixels:new c.c3(g,t.u_units_to_pixels),u_image:new c.b_(g,t.u_image),u_mix:new c.bq(g,t.u_mix),u_tileratio:new c.bq(g,t.u_tileratio),u_crossfade_from:new c.bq(g,t.u_crossfade_from),u_crossfade_to:new c.bq(g,t.u_crossfade_to),u_lineatlas_width:new c.bq(g,t.u_lineatlas_width),u_lineatlas_height:new c.bq(g,t.u_lineatlas_height)}),lineGradientSDF:(g,t)=>({u_translation:new c.c3(g,t.u_translation),u_ratio:new c.bq(g,t.u_ratio),u_device_pixel_ratio:new c.bq(g,t.u_device_pixel_ratio),u_units_to_pixels:new c.c3(g,t.u_units_to_pixels),u_image:new c.b_(g,t.u_image),u_image_height:new c.bq(g,t.u_image_height),u_tileratio:new c.bq(g,t.u_tileratio),u_crossfade_from:new c.bq(g,t.u_crossfade_from),u_crossfade_to:new c.bq(g,t.u_crossfade_to),u_image_dash:new c.b_(g,t.u_image_dash),u_mix:new c.bq(g,t.u_mix),u_lineatlas_width:new c.bq(g,t.u_lineatlas_width),u_lineatlas_height:new c.bq(g,t.u_lineatlas_height)}),raster:(g,t)=>({u_tl_parent:new c.c3(g,t.u_tl_parent),u_scale_parent:new c.bq(g,t.u_scale_parent),u_buffer_scale:new c.bq(g,t.u_buffer_scale),u_fade_t:new c.bq(g,t.u_fade_t),u_opacity:new c.bq(g,t.u_opacity),u_image0:new c.b_(g,t.u_image0),u_image1:new c.b_(g,t.u_image1),u_brightness_low:new c.bq(g,t.u_brightness_low),u_brightness_high:new c.bq(g,t.u_brightness_high),u_saturation_factor:new c.bq(g,t.u_saturation_factor),u_contrast_factor:new c.bq(g,t.u_contrast_factor),u_spin_weights:new c.c2(g,t.u_spin_weights),u_coords_top:new c.c1(g,t.u_coords_top),u_coords_bottom:new c.c1(g,t.u_coords_bottom)}),symbolIcon:(g,t)=>({u_is_size_zoom_constant:new c.b_(g,t.u_is_size_zoom_constant),u_is_size_feature_constant:new c.b_(g,t.u_is_size_feature_constant),u_size_t:new c.bq(g,t.u_size_t),u_size:new c.bq(g,t.u_size),u_camera_to_center_distance:new c.bq(g,t.u_camera_to_center_distance),u_pitch:new c.bq(g,t.u_pitch),u_rotate_symbol:new c.b_(g,t.u_rotate_symbol),u_aspect_ratio:new c.bq(g,t.u_aspect_ratio),u_fade_change:new c.bq(g,t.u_fade_change),u_label_plane_matrix:new c.c0(g,t.u_label_plane_matrix),u_coord_matrix:new c.c0(g,t.u_coord_matrix),u_is_text:new c.b_(g,t.u_is_text),u_pitch_with_map:new c.b_(g,t.u_pitch_with_map),u_is_along_line:new c.b_(g,t.u_is_along_line),u_is_variable_anchor:new c.b_(g,t.u_is_variable_anchor),u_texsize:new c.c3(g,t.u_texsize),u_texture:new c.b_(g,t.u_texture),u_translation:new c.c3(g,t.u_translation),u_pitched_scale:new c.bq(g,t.u_pitched_scale)}),symbolSDF:(g,t)=>({u_is_size_zoom_constant:new c.b_(g,t.u_is_size_zoom_constant),u_is_size_feature_constant:new c.b_(g,t.u_is_size_feature_constant),u_size_t:new c.bq(g,t.u_size_t),u_size:new c.bq(g,t.u_size),u_camera_to_center_distance:new c.bq(g,t.u_camera_to_center_distance),u_pitch:new c.bq(g,t.u_pitch),u_rotate_symbol:new c.b_(g,t.u_rotate_symbol),u_aspect_ratio:new c.bq(g,t.u_aspect_ratio),u_fade_change:new c.bq(g,t.u_fade_change),u_label_plane_matrix:new c.c0(g,t.u_label_plane_matrix),u_coord_matrix:new c.c0(g,t.u_coord_matrix),u_is_text:new c.b_(g,t.u_is_text),u_pitch_with_map:new c.b_(g,t.u_pitch_with_map),u_is_along_line:new c.b_(g,t.u_is_along_line),u_is_variable_anchor:new c.b_(g,t.u_is_variable_anchor),u_texsize:new c.c3(g,t.u_texsize),u_texture:new c.b_(g,t.u_texture),u_gamma_scale:new c.bq(g,t.u_gamma_scale),u_device_pixel_ratio:new c.bq(g,t.u_device_pixel_ratio),u_is_halo:new c.b_(g,t.u_is_halo),u_translation:new c.c3(g,t.u_translation),u_pitched_scale:new c.bq(g,t.u_pitched_scale)}),symbolTextAndIcon:(g,t)=>({u_is_size_zoom_constant:new c.b_(g,t.u_is_size_zoom_constant),u_is_size_feature_constant:new c.b_(g,t.u_is_size_feature_constant),u_size_t:new c.bq(g,t.u_size_t),u_size:new c.bq(g,t.u_size),u_camera_to_center_distance:new c.bq(g,t.u_camera_to_center_distance),u_pitch:new c.bq(g,t.u_pitch),u_rotate_symbol:new c.b_(g,t.u_rotate_symbol),u_aspect_ratio:new c.bq(g,t.u_aspect_ratio),u_fade_change:new c.bq(g,t.u_fade_change),u_label_plane_matrix:new c.c0(g,t.u_label_plane_matrix),u_coord_matrix:new c.c0(g,t.u_coord_matrix),u_is_text:new c.b_(g,t.u_is_text),u_pitch_with_map:new c.b_(g,t.u_pitch_with_map),u_is_along_line:new c.b_(g,t.u_is_along_line),u_is_variable_anchor:new c.b_(g,t.u_is_variable_anchor),u_texsize:new c.c3(g,t.u_texsize),u_texsize_icon:new c.c3(g,t.u_texsize_icon),u_texture:new c.b_(g,t.u_texture),u_texture_icon:new c.b_(g,t.u_texture_icon),u_gamma_scale:new c.bq(g,t.u_gamma_scale),u_device_pixel_ratio:new c.bq(g,t.u_device_pixel_ratio),u_is_halo:new c.b_(g,t.u_is_halo),u_translation:new c.c3(g,t.u_translation),u_pitched_scale:new c.bq(g,t.u_pitched_scale)}),background:(g,t)=>({u_opacity:new c.bq(g,t.u_opacity),u_color:new c.b$(g,t.u_color)}),backgroundPattern:(g,t)=>({u_opacity:new c.bq(g,t.u_opacity),u_image:new c.b_(g,t.u_image),u_pattern_tl_a:new c.c3(g,t.u_pattern_tl_a),u_pattern_br_a:new c.c3(g,t.u_pattern_br_a),u_pattern_tl_b:new c.c3(g,t.u_pattern_tl_b),u_pattern_br_b:new c.c3(g,t.u_pattern_br_b),u_texsize:new c.c3(g,t.u_texsize),u_mix:new c.bq(g,t.u_mix),u_pattern_size_a:new c.c3(g,t.u_pattern_size_a),u_pattern_size_b:new c.c3(g,t.u_pattern_size_b),u_scale_a:new c.bq(g,t.u_scale_a),u_scale_b:new c.bq(g,t.u_scale_b),u_pixel_coord_upper:new c.c3(g,t.u_pixel_coord_upper),u_pixel_coord_lower:new c.c3(g,t.u_pixel_coord_lower),u_tile_units_to_pixels:new c.bq(g,t.u_tile_units_to_pixels)}),terrain:(g,t)=>({u_texture:new c.b_(g,t.u_texture),u_ele_delta:new c.bq(g,t.u_ele_delta),u_fog_matrix:new c.c0(g,t.u_fog_matrix),u_fog_color:new c.b$(g,t.u_fog_color),u_fog_ground_blend:new c.bq(g,t.u_fog_ground_blend),u_fog_ground_blend_opacity:new c.bq(g,t.u_fog_ground_blend_opacity),u_horizon_color:new c.b$(g,t.u_horizon_color),u_horizon_fog_blend:new c.bq(g,t.u_horizon_fog_blend),u_is_globe_mode:new c.bq(g,t.u_is_globe_mode)}),terrainDepth:(g,t)=>({u_ele_delta:new c.bq(g,t.u_ele_delta)}),terrainCoords:(g,t)=>({u_texture:new c.b_(g,t.u_texture),u_terrain_coords_id:new c.bq(g,t.u_terrain_coords_id),u_ele_delta:new c.bq(g,t.u_ele_delta)}),projectionErrorMeasurement:(g,t)=>({u_input:new c.bq(g,t.u_input),u_output_expected:new c.bq(g,t.u_output_expected)}),atmosphere:(g,t)=>({u_sun_pos:new c.c2(g,t.u_sun_pos),u_atmosphere_blend:new c.bq(g,t.u_atmosphere_blend),u_globe_position:new c.c2(g,t.u_globe_position),u_globe_radius:new c.bq(g,t.u_globe_radius),u_inv_proj_matrix:new c.c0(g,t.u_inv_proj_matrix)}),sky:(g,t)=>({u_sky_color:new c.b$(g,t.u_sky_color),u_horizon_color:new c.b$(g,t.u_horizon_color),u_horizon:new c.c3(g,t.u_horizon),u_horizon_normal:new c.c3(g,t.u_horizon_normal),u_sky_horizon_blend:new c.bq(g,t.u_sky_horizon_blend),u_sky_blend:new c.bq(g,t.u_sky_blend)})};class Mr{constructor(t,o,l){this.context=t;const p=t.gl;this.buffer=p.createBuffer(),this.dynamicDraw=!!l,this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),p.bufferData(p.ELEMENT_ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?p.DYNAMIC_DRAW:p.STATIC_DRAW),this.dynamicDraw||delete o.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(t){const o=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),o.bufferSubData(o.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ph={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class sd{constructor(t,o,l,p){this.length=o.length,this.attributes=l,this.itemSize=o.bytesPerElement,this.dynamicDraw=p,this.context=t;const w=t.gl;this.buffer=w.createBuffer(),t.bindVertexBuffer.set(this.buffer),w.bufferData(w.ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||delete o.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(t){if(t.length!==this.length)throw new Error(`Length of new data is ${t.length}, which doesn't match current length of ${this.length}`);const o=this.context.gl;this.bind(),o.bufferSubData(o.ARRAY_BUFFER,0,t.arrayBuffer)}enableAttributes(t,o){for(let l=0;l<this.attributes.length;l++){const p=o.attributes[this.attributes[l].name];p!==void 0&&t.enableVertexAttribArray(p)}}setVertexAttribPointers(t,o,l){for(let p=0;p<this.attributes.length;p++){const w=this.attributes[p],O=o.attributes[w.name];O!==void 0&&t.vertexAttribPointer(O,w.components,t[ph[w.type]],!1,this.itemSize,w.offset+this.itemSize*(l||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Ra{constructor(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(t){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class cn extends Ra{getDefault(){return c.bp.transparent}set(t){const o=this.current;(t.r!==o.r||t.g!==o.g||t.b!==o.b||t.a!==o.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class Lr extends Ra{getDefault(){return 1}set(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}class yl extends Ra{getDefault(){return 0}set(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}class uh extends Ra{getDefault(){return[!0,!0,!0,!0]}set(t){const o=this.current;(t[0]!==o[0]||t[1]!==o[1]||t[2]!==o[2]||t[3]!==o[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class mh extends Ra{getDefault(){return!0}set(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}class Wh extends Ra{getDefault(){return 255}set(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}class Zh extends Ra{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(t){const o=this.current;(t.func!==o.func||t.ref!==o.ref||t.mask!==o.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}class Ln extends Ra{getDefault(){const t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}set(t){const o=this.current;(t[0]!==o[0]||t[1]!==o[1]||t[2]!==o[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}class Rd extends Ra{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;t?o.enable(o.STENCIL_TEST):o.disable(o.STENCIL_TEST),this.current=t,this.dirty=!1}}class sr extends Ra{getDefault(){return[0,1]}set(t){const o=this.current;(t[0]!==o[0]||t[1]!==o[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}class bo extends Ra{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;t?o.enable(o.DEPTH_TEST):o.disable(o.DEPTH_TEST),this.current=t,this.dirty=!1}}class fi extends Ra{getDefault(){return this.gl.LESS}set(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}class eo extends Ra{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;t?o.enable(o.BLEND):o.disable(o.BLEND),this.current=t,this.dirty=!1}}class zn extends Ra{getDefault(){const t=this.gl;return[t.ONE,t.ZERO]}set(t){const o=this.current;(t[0]!==o[0]||t[1]!==o[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)}}class zr extends Ra{getDefault(){return c.bp.transparent}set(t){const o=this.current;(t.r!==o.r||t.g!==o.g||t.b!==o.b||t.a!==o.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class Dr extends Ra{getDefault(){return this.gl.FUNC_ADD}set(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)}}class nr extends Ra{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;t?o.enable(o.CULL_FACE):o.disable(o.CULL_FACE),this.current=t,this.dirty=!1}}class Br extends Ra{getDefault(){return this.gl.BACK}set(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}class to extends Ra{getDefault(){return this.gl.CCW}set(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}class gh extends Ra{getDefault(){return null}set(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)}}class yh extends Ra{getDefault(){return this.gl.TEXTURE0}set(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}class ha extends Ra{getDefault(){const t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}set(t){const o=this.current;(t[0]!==o[0]||t[1]!==o[1]||t[2]!==o[2]||t[3]!==o[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class nd extends Ra{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.bindFramebuffer(o.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}class wo extends Ra{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.bindRenderbuffer(o.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class bl extends Ra{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.bindTexture(o.TEXTURE_2D,t),this.current=t,this.dirty=!1}}class vo extends Ra{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.bindBuffer(o.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class Hd extends Ra{getDefault(){return null}set(t){const o=this.gl;o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class wl extends Ra{getDefault(){return null}set(t){var o;if(t===this.current&&!this.dirty)return;const l=this.gl;Mo(l)?l.bindVertexArray(t):(o=l.getExtension("OES_vertex_array_object"))===null||o===void 0||o.bindVertexArrayOES(t),this.current=t,this.dirty=!1}}class Rr extends Ra{getDefault(){return 4}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}class od extends Ra{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}class vl extends Ra{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}class Hr extends Ra{constructor(t,o){super(t),this.context=t,this.parent=o}getDefault(){return null}}class h extends Hr{setDirty(){this.dirty=!0}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}class y extends Hr{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_ATTACHMENT,o.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class _ extends Hr{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.RENDERBUFFER,t),this.current=t,this.dirty=!1}}const M="Framebuffer is not complete";class j{constructor(t,o,l,p,w){this.context=t,this.width=o,this.height=l;const O=t.gl,I=this.framebuffer=O.createFramebuffer();if(this.colorAttachment=new h(t,I),p)this.depthAttachment=w?new _(t,I):new y(t,I);else if(w)throw new Error("Stencil cannot be set without depth");if(O.checkFramebufferStatus(O.FRAMEBUFFER)!==O.FRAMEBUFFER_COMPLETE)throw new Error(M)}destroy(){const t=this.context.gl,o=this.colorAttachment.get();if(o&&t.deleteTexture(o),this.depthAttachment){const l=this.depthAttachment.get();l&&t.deleteRenderbuffer(l)}t.deleteFramebuffer(this.framebuffer)}}class te{constructor(t){var o,l;if(this.gl=t,this.clearColor=new cn(this),this.clearDepth=new Lr(this),this.clearStencil=new yl(this),this.colorMask=new uh(this),this.depthMask=new mh(this),this.stencilMask=new Wh(this),this.stencilFunc=new Zh(this),this.stencilOp=new Ln(this),this.stencilTest=new Rd(this),this.depthRange=new sr(this),this.depthTest=new bo(this),this.depthFunc=new fi(this),this.blend=new eo(this),this.blendFunc=new zn(this),this.blendColor=new zr(this),this.blendEquation=new Dr(this),this.cullFace=new nr(this),this.cullFaceSide=new Br(this),this.frontFace=new to(this),this.program=new gh(this),this.activeTexture=new yh(this),this.viewport=new ha(this),this.bindFramebuffer=new nd(this),this.bindRenderbuffer=new wo(this),this.bindTexture=new bl(this),this.bindVertexBuffer=new vo(this),this.bindElementBuffer=new Hd(this),this.bindVertexArray=new wl(this),this.pixelStoreUnpack=new Rr(this),this.pixelStoreUnpackPremultiplyAlpha=new od(this),this.pixelStoreUnpackFlipY=new vl(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),Mo(t)){this.HALF_FLOAT=t.HALF_FLOAT;const p=t.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(o=t.RGBA16F)!==null&&o!==void 0?o:p==null?void 0:p.RGBA16F_EXT,this.RGB16F=(l=t.RGB16F)!==null&&l!==void 0?l:p==null?void 0:p.RGB16F_EXT,t.getExtension("EXT_color_buffer_float")}else{t.getExtension("EXT_color_buffer_half_float"),t.getExtension("OES_texture_half_float_linear");const p=t.getExtension("OES_texture_half_float");this.HALF_FLOAT=p==null?void 0:p.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(t,o){return new Mr(this,t,o)}createVertexBuffer(t,o,l){return new sd(this,t,o,l)}createRenderbuffer(t,o,l){const p=this.gl,w=p.createRenderbuffer();return this.bindRenderbuffer.set(w),p.renderbufferStorage(p.RENDERBUFFER,t,o,l),this.bindRenderbuffer.set(null),w}createFramebuffer(t,o,l,p){return new j(this,t,o,l,p)}clear({color:t,depth:o,stencil:l}){const p=this.gl;let w=0;t&&(w|=p.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),o!==void 0&&(w|=p.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(o),this.depthMask.set(!0)),l!==void 0&&(w|=p.STENCIL_BUFFER_BIT,this.clearStencil.set(l),this.stencilMask.set(255)),p.clear(w)}setCullFace(t){t.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}setDepthMode(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}setStencilMode(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}setColorMode(t){c.bR(t.blendFunction,Ka.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)}createVertexArray(){var t;return Mo(this.gl)?this.gl.createVertexArray():(t=this.gl.getExtension("OES_vertex_array_object"))===null||t===void 0?void 0:t.createVertexArrayOES()}deleteVertexArray(t){var o;return Mo(this.gl)?this.gl.deleteVertexArray(t):(o=this.gl.getExtension("OES_vertex_array_object"))===null||o===void 0?void 0:o.deleteVertexArrayOES(t)}unbindVAO(){this.bindVertexArray.set(null)}}let we;function De(g,t,o,l,p){const w=g.context,O=g.transform,I=w.gl,A=g.useProgram("collisionBox"),C=[];let D=0,F=0;for(let le=0;le<l.length;le++){const pe=l[le],be=t.getTile(pe).getBucket(o);if(!be)continue;const ce=p?be.textCollisionBox:be.iconCollisionBox,ye=be.collisionCircleArray;ye.length>0&&(C.push({circleArray:ye,circleOffset:F,coord:pe}),D+=ye.length/4,F=D),ce&&A.draw(w,I.LINES,ia.disabled,Sa.disabled,g.colorModeForRenderPass(),ua.disabled,hi(g.transform),g.style.map.terrain&&g.style.map.terrain.getTerrainData(pe),O.getProjectionData({overscaledTileID:pe,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),o.id,ce.layoutVertexBuffer,ce.indexBuffer,ce.segments,null,g.transform.zoom,null,null,ce.collisionVertexBuffer)}if(!p||!C.length)return;const G=g.useProgram("collisionCircle"),Z=new c.ca;Z.resize(4*D),Z._trim();let Q=0;for(const le of C)for(let pe=0;pe<le.circleArray.length/4;pe++){const be=4*pe,ce=le.circleArray[be+0],ye=le.circleArray[be+1],ke=le.circleArray[be+2],me=le.circleArray[be+3];Z.emplace(Q++,ce,ye,ke,me,0),Z.emplace(Q++,ce,ye,ke,me,1),Z.emplace(Q++,ce,ye,ke,me,2),Z.emplace(Q++,ce,ye,ke,me,3)}(!we||we.length<2*D)&&(we=(function(le){const pe=2*le,be=new c.cc;be.resize(pe),be._trim();for(let ce=0;ce<pe;ce++){const ye=6*ce;be.uint16[ye+0]=4*ce+0,be.uint16[ye+1]=4*ce+1,be.uint16[ye+2]=4*ce+2,be.uint16[ye+3]=4*ce+2,be.uint16[ye+4]=4*ce+3,be.uint16[ye+5]=4*ce+0}return be})(D));const ie=w.createIndexBuffer(we,!0),de=w.createVertexBuffer(Z,c.cb.members,!0);for(const le of C){const pe=Dd(g.transform);G.draw(w,I.TRIANGLES,ia.disabled,Sa.disabled,g.colorModeForRenderPass(),ua.disabled,pe,g.style.map.terrain&&g.style.map.terrain.getTerrainData(le.coord),null,o.id,de,ie,c.aX.simpleSegment(0,2*le.circleOffset,le.circleArray.length,le.circleArray.length/2),null,g.transform.zoom,null,null,null)}de.destroy(),ie.destroy()}const $e=c.ar(new Float32Array(16));function ct(g,t,o,l,p,w){const{horizontalAlign:O,verticalAlign:I}=c.aS(g);return new c.P((-(O-.5)*t/p+l[0])*w,(-(I-.5)*o/p+l[1])*w)}function Mt(g,t,o,l,p,w){const O=t.tileAnchorPoint.add(new c.P(t.translation[0],t.translation[1]));if(t.pitchWithMap){let I=l.mult(w);o||(I=I.rotate(-p));const A=O.add(I);return oa(A.x,A.y,t.pitchedLabelPlaneMatrix,t.getElevation).point}if(o){const I=La(t.tileAnchorPoint.x+1,t.tileAnchorPoint.y,t).point.sub(g),A=Math.atan(I.y/I.x)+(I.x<0?Math.PI:0);return g.add(l.rotate(A))}return g.add(l)}function Kt(g,t,o,l,p,w,O,I,A,C,D,F){const G=g.text.placedSymbolArray,Z=g.text.dynamicLayoutVertexArray,Q=g.icon.dynamicLayoutVertexArray,ie={};Z.clear();for(let de=0;de<G.length;de++){const le=G.get(de),pe=le.hidden||!le.crossTileID||g.allowVerticalPlacement&&!le.placedOrientation?null:l[le.crossTileID];if(pe){const be=new c.P(le.anchorX,le.anchorY),ce={getElevation:F,width:p.width,height:p.height,pitchedLabelPlaneMatrix:w,pitchWithMap:o,transform:p,tileAnchorPoint:be,translation:C,unwrappedTileID:D},ye=o?Ti(be.x,be.y,ce):La(be.x,be.y,ce),ke=eh(p.cameraToCenterDistance,ye.signedDistanceFromCamera);let me=c.aA(g.textSizeData,I,le)*ke/c.aM;o&&(me*=g.tilePixelRatio/O);const{width:Ee,height:Ze,anchor:Ge,textOffset:qe,textBoxScale:Ve}=pe,bt=ct(Ge,Ee,Ze,qe,Ve,me),vt=p.getPitchedTextCorrection(be.x+C[0],be.y+C[1],D),ht=Mt(ye.point,ce,t,bt,-p.bearingInRadians,vt),Tt=g.allowVerticalPlacement&&le.placedOrientation===c.az.vertical?Math.PI/2:0;for(let la=0;la<le.numGlyphs;la++)c.aG(Z,ht,Tt);A&&le.associatedIconIndex>=0&&(ie[le.associatedIconIndex]={shiftedAnchor:ht,angle:Tt})}else Va(le.numGlyphs,Z)}if(A){Q.clear();const de=g.icon.placedSymbolArray;for(let le=0;le<de.length;le++){const pe=de.get(le);if(pe.hidden)Va(pe.numGlyphs,Q);else{const be=ie[le];if(be)for(let ce=0;ce<pe.numGlyphs;ce++)c.aG(Q,be.shiftedAnchor,be.angle);else Va(pe.numGlyphs,Q)}}g.icon.dynamicLayoutVertexBuffer.updateData(Q)}g.text.dynamicLayoutVertexBuffer.updateData(Z)}function ka(g,t,o){return o.iconsInText&&t?"symbolTextAndIcon":g?"symbolSDF":"symbolIcon"}function Ys(g,t,o,l,p,w,O,I,A,C,D,F,G){const Z=g.context,Q=Z.gl,ie=g.transform,de=I==="map",le=A==="map",pe=I!=="viewport"&&o.layout.get("symbol-placement")!=="point",be=de&&!le&&!pe,ce=!o.layout.get("symbol-sort-key").isConstant();let ye=!1;const ke=g.getDepthModeForSublayer(0,ia.ReadOnly),me=o._unevaluatedLayout.hasValue("text-variable-anchor")||o._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ee=[],Ze=ie.getCircleRadiusCorrection();for(const Ge of l){const qe=t.getTile(Ge),Ve=qe.getBucket(o);if(!Ve)continue;const bt=p?Ve.text:Ve.icon;if(!bt||!bt.segments.get().length||!bt.hasVisibleVertices)continue;const vt=bt.programConfigurations.get(o.id),ht=p||Ve.sdfIcons,Tt=p?Ve.textSizeData:Ve.iconSizeData,la=le||ie.pitch!==0,Ja=g.useProgram(ka(ht,p,Ve),vt),ws=c.ay(Tt,ie.zoom),ps=g.style.map.terrain&&g.style.map.terrain.getTerrainData(Ge);let Cs,rs,qs,Ms,Nn=[0,0],Ks=null;if(p)rs=qe.glyphAtlasTexture,qs=Q.LINEAR,Cs=qe.glyphAtlasTexture.size,Ve.iconsInText&&(Nn=qe.imageAtlasTexture.size,Ks=qe.imageAtlasTexture,Ms=la||g.options.rotating||g.options.zooming||Tt.kind==="composite"||Tt.kind==="camera"?Q.LINEAR:Q.NEAREST);else{const ss=o.layout.get("icon-size").constantOr(0)!==1||Ve.iconsNeedLinear;rs=qe.imageAtlasTexture,qs=ht||g.options.rotating||g.options.zooming||ss||la?Q.LINEAR:Q.NEAREST,Cs=qe.imageAtlasTexture.size}const Qs=c.aN(qe,1,g.transform.zoom),Gn=ho(de,g.transform,Qs),Zr=c.N();c.aB(Zr,Gn);const Xr=Xl(le,de,g.transform,Qs),pr=c.aO(ie,qe,w,O),Wo=ie.getProjectionData({overscaledTileID:Ge,applyGlobeMatrix:!G,applyTerrainMatrix:!0}),Pl=me&&Ve.hasTextData(),ud=o.layout.get("icon-text-fit")!=="none"&&Pl&&Ve.hasIconData();if(pe){const ss=g.style.map.terrain?(un,On)=>g.style.map.terrain.getElevation(Ge,un,On):null,us=o.layout.get("text-rotation-alignment")==="map";Yi(Ve,g,p,Gn,Zr,le,C,us,Ge.toUnwrapped(),ie.width,ie.height,pr,ss)}const ur=p&&me||ud,Zo=pe||ur?$e:le?Gn:g.transform.clipSpaceToPixelsMatrix,gi=ht&&o.paint.get(p?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Ni;Ni=ht?Ve.iconsInText?yo(Tt.kind,ws,be,le,pe,ur,g,Zo,Xr,pr,Cs,Nn,Ze):fh(Tt.kind,ws,be,le,pe,ur,g,Zo,Xr,pr,p,Cs,0,Ze):Ci(Tt.kind,ws,be,le,pe,ur,g,Zo,Xr,pr,p,Cs,Ze);const Gi={program:Ja,buffers:bt,uniformValues:Ni,projectionData:Wo,atlasTexture:rs,atlasTextureIcon:Ks,atlasInterpolation:qs,atlasInterpolationIcon:Ms,isSDF:ht,hasHalo:gi};if(ce&&Ve.canOverlap){ye=!0;const ss=bt.segments.get();for(const us of ss)Ee.push({segments:new c.aX([us]),sortKey:us.sortKey,state:Gi,terrainData:ps})}else Ee.push({segments:bt.segments,sortKey:0,state:Gi,terrainData:ps})}ye&&Ee.sort(((Ge,qe)=>Ge.sortKey-qe.sortKey));for(const Ge of Ee){const qe=Ge.state;if(Z.activeTexture.set(Q.TEXTURE0),qe.atlasTexture.bind(qe.atlasInterpolation,Q.CLAMP_TO_EDGE),qe.atlasTextureIcon&&(Z.activeTexture.set(Q.TEXTURE1),qe.atlasTextureIcon&&qe.atlasTextureIcon.bind(qe.atlasInterpolationIcon,Q.CLAMP_TO_EDGE)),qe.isSDF){const Ve=qe.uniformValues;qe.hasHalo&&(Ve.u_is_halo=1,Rs(qe.buffers,Ge.segments,o,g,qe.program,ke,D,F,Ve,qe.projectionData,Ge.terrainData)),Ve.u_is_halo=0}Rs(qe.buffers,Ge.segments,o,g,qe.program,ke,D,F,qe.uniformValues,qe.projectionData,Ge.terrainData)}}function Rs(g,t,o,l,p,w,O,I,A,C,D){const F=l.context;p.draw(F,F.gl.TRIANGLES,w,O,I,ua.backCCW,A,D,C,o.id,g.layoutVertexBuffer,g.indexBuffer,t,o.paint,l.transform.zoom,g.programConfigurations.get(o.id),g.dynamicLayoutVertexBuffer,g.opacityVertexBuffer)}function Oo(g,t,o,l,p){const w=g.context,O=w.gl,I=Sa.disabled,A=new Ka([O.ONE,O.ONE],c.bp.transparent,[!0,!0,!0,!0]),C=t.getBucket(o);if(!C)return;const D=l.key;let F=o.heatmapFbos.get(D);F||(F=Ha(w,t.tileSize,t.tileSize),o.heatmapFbos.set(D,F)),w.bindFramebuffer.set(F.framebuffer),w.viewport.set([0,0,t.tileSize,t.tileSize]),w.clear({color:c.bp.transparent});const G=C.programConfigurations.get(o.id),Z=g.useProgram("heatmap",G,!p),Q=g.transform.getProjectionData({overscaledTileID:t.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),ie=g.style.map.terrain.getTerrainData(l);Z.draw(w,O.TRIANGLES,ia.disabled,I,A,ua.disabled,li(t,g.transform.zoom,o.paint.get("heatmap-intensity"),1),ie,Q,o.id,C.layoutVertexBuffer,C.indexBuffer,C.segments,o.paint,g.transform.zoom,G)}function Ya(g,t,o,l,p){const w=g.context,O=w.gl,I=g.transform;w.setColorMode(g.colorModeForRenderPass());const A=Pa(w,t),C=o.key,D=t.heatmapFbos.get(C);if(!D)return;w.activeTexture.set(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,D.colorAttachment.get()),w.activeTexture.set(O.TEXTURE1),A.bind(O.LINEAR,O.CLAMP_TO_EDGE);const F=I.getProjectionData({overscaledTileID:o,applyTerrainMatrix:p,applyGlobeMatrix:!l});g.useProgram("heatmapTexture").draw(w,O.TRIANGLES,ia.disabled,Sa.disabled,g.colorModeForRenderPass(),ua.disabled,Bd(g,t,0,1),null,F,t.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments,t.paint,I.zoom),D.destroy(),t.heatmapFbos.delete(C)}function Ha(g,t,o){var l,p;const w=g.gl,O=w.createTexture();w.bindTexture(w.TEXTURE_2D,O),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_S,w.CLAMP_TO_EDGE),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_T,w.CLAMP_TO_EDGE),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,w.LINEAR),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,w.LINEAR);const I=(l=g.HALF_FLOAT)!==null&&l!==void 0?l:w.UNSIGNED_BYTE,A=(p=g.RGBA16F)!==null&&p!==void 0?p:w.RGBA;w.texImage2D(w.TEXTURE_2D,0,A,t,o,0,w.RGBA,I,null);const C=g.createFramebuffer(t,o,!1,!1);return C.colorAttachment.set(O),C}function Pa(g,t){return t.colorRampTexture||(t.colorRampTexture=new c.T(g,t.colorRamp,g.gl.RGBA)),t.colorRampTexture}function or(g,t,o,l,p,w,O,I){let A=256;if(p.stepInterpolant){const C=t.getSource().maxzoom,D=O.canonical.z===C?Math.ceil(1<<g.transform.maxZoom-O.canonical.z):1;A=c.an(c.ce(w.maxLineLength/c.a5*1024*D),256,o.maxTextureSize)}return I.gradient=c.cf({expression:p.gradientExpression(),evaluationKey:"lineProgress",resolution:A,image:I.gradient||void 0,clips:w.lineClipsArray}),I.texture?I.texture.update(I.gradient):I.texture=new c.T(o,I.gradient,l.RGBA),I.version=p.gradientVersion,I.texture}function Lo(g,t,o,l,p){g.activeTexture.set(t.TEXTURE0),o.imageAtlasTexture.bind(t.LINEAR,t.CLAMP_TO_EDGE),l.updatePaintBuffers(p)}function _s(g,t,o,l,p,w){(p||g.lineAtlas.dirty)&&(t.activeTexture.set(o.TEXTURE0),g.lineAtlas.bind(t)),l.updatePaintBuffers(w)}function ko(g,t,o,l,p,w,O){const I=w.gradients[p.id];let A=I.texture;p.gradientVersion!==I.version&&(A=or(g,t,o,l,p,w,O,I)),o.activeTexture.set(l.TEXTURE0),A.bind(p.stepInterpolant?l.NEAREST:l.LINEAR,l.CLAMP_TO_EDGE)}function ao(g,t,o,l,p,w,O,I,A){const C=w.gradients[p.id];let D=C.texture;p.gradientVersion!==C.version&&(D=or(g,t,o,l,p,w,O,C)),o.activeTexture.set(l.TEXTURE0),D.bind(p.stepInterpolant?l.NEAREST:l.LINEAR,l.CLAMP_TO_EDGE),o.activeTexture.set(l.TEXTURE1),g.lineAtlas.bind(o),I.updatePaintBuffers(A)}function Ps(g,t,o,l,p){if(!o||!l||!l.imageAtlas)return;const w=l.imageAtlas.patternPositions;let O=w[o.to.toString()],I=w[o.from.toString()];if(!O&&I&&(O=I),!I&&O&&(I=O),!O||!I){const A=p.getPaintProperty(t);O=w[A],I=w[A]}O&&I&&g.setConstantPatternPositions(O,I)}function zo(g,t,o,l,p,w,O,I){const A=g.context.gl,C="fill-pattern",D=o.paint.get(C),F=D&&D.constantOr(1),G=o.getCrossfadeParameters();let Z,Q,ie,de,le;const pe=g.transform,be=o.paint.get("fill-translate"),ce=o.paint.get("fill-translate-anchor");O?(Q=F&&!o.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Z=A.LINES):(Q=F?"fillPattern":"fill",Z=A.TRIANGLES);const ye=D.constantOr(null);for(const ke of l){const me=t.getTile(ke);if(F&&!me.patternsLoaded())continue;const Ee=me.getBucket(o);if(!Ee)continue;const Ze=Ee.programConfigurations.get(o.id),Ge=g.useProgram(Q,Ze),qe=g.style.map.terrain&&g.style.map.terrain.getTerrainData(ke);F&&(g.context.activeTexture.set(A.TEXTURE0),me.imageAtlasTexture.bind(A.LINEAR,A.CLAMP_TO_EDGE),Ze.updatePaintBuffers(G)),Ps(Ze,C,ye,me,o);const Ve=pe.getProjectionData({overscaledTileID:ke,applyGlobeMatrix:!I,applyTerrainMatrix:!0}),bt=c.aO(pe,me,be,ce);if(O){de=Ee.indexBuffer2,le=Ee.segments2;const ht=[A.drawingBufferWidth,A.drawingBufferHeight];ie=Q==="fillOutlinePattern"&&F?jh(g,G,me,ht,bt):Fh(ht,bt)}else de=Ee.indexBuffer,le=Ee.segments,ie=F?Uo(g,G,me,bt):{u_fill_translate:bt};const vt=g.stencilModeForClipping(ke);Ge.draw(g.context,Z,p,vt,w,ua.backCCW,ie,qe,Ve,o.id,Ee.layoutVertexBuffer,de,le,o.paint,g.transform.zoom,Ze)}}function Mi(g,t,o,l,p,w,O,I){const A=g.context,C=A.gl,D="fill-extrusion-pattern",F=o.paint.get(D),G=F.constantOr(1),Z=o.getCrossfadeParameters(),Q=o.paint.get("fill-extrusion-opacity"),ie=F.constantOr(null),de=g.transform;for(const le of l){const pe=t.getTile(le),be=pe.getBucket(o);if(!be)continue;const ce=g.style.map.terrain&&g.style.map.terrain.getTerrainData(le),ye=be.programConfigurations.get(o.id),ke=g.useProgram(G?"fillExtrusionPattern":"fillExtrusion",ye);G&&(g.context.activeTexture.set(C.TEXTURE0),pe.imageAtlasTexture.bind(C.LINEAR,C.CLAMP_TO_EDGE),ye.updatePaintBuffers(Z));const me=de.getProjectionData({overscaledTileID:le,applyGlobeMatrix:!I,applyTerrainMatrix:!0});Ps(ye,D,ie,pe,o);const Ee=c.aO(de,pe,o.paint.get("fill-extrusion-translate"),o.paint.get("fill-extrusion-translate-anchor")),Ze=o.paint.get("fill-extrusion-vertical-gradient"),Ge=G?ad(g,Ze,Q,Ee,le,Z,pe):jo(g,Ze,Q,Ee);ke.draw(A,A.gl.TRIANGLES,p,w,O,ua.backCCW,Ge,ce,me,o.id,be.layoutVertexBuffer,be.indexBuffer,be.segments,o.paint,g.transform.zoom,ye,g.style.map.terrain&&be.centroidVertexBuffer)}}function Li(g,t,o,l,p,w,O,I,A){var C;const D=g.style.projection,F=g.context,G=g.transform,Z=F.gl,Q=[`#define NUM_ILLUMINATION_SOURCES ${o.paint.get("hillshade-highlight-color").values.length}`],ie=g.useProgram("hillshade",null,!1,Q),de=!g.options.moving;for(const le of l){const pe=t.getTile(le),be=pe.fbo;if(!be)continue;const ce=D.getMeshFromTileID(F,le.canonical,I,!0,"raster"),ye=(C=g.style.map.terrain)===null||C===void 0?void 0:C.getTerrainData(le);F.activeTexture.set(Z.TEXTURE0),Z.bindTexture(Z.TEXTURE_2D,be.colorAttachment.get());const ke=G.getProjectionData({overscaledTileID:le,aligned:de,applyGlobeMatrix:!A,applyTerrainMatrix:!0});ie.draw(F,Z.TRIANGLES,w,p[le.overscaledZ],O,ua.backCCW,lh(g,pe,o),ye,ke,o.id,ce.vertexBuffer,ce.indexBuffer,ce.segments)}}function ir(g,t,o,l,p,w,O,I,A){var C;const D=g.style.projection,F=g.context,G=g.transform,Z=F.gl,Q=g.useProgram("colorRelief"),ie=!g.options.moving;let de=!0,le=0;for(const pe of l){const be=t.getTile(pe),ce=be.dem;if(de){const Ge=Z.getParameter(Z.MAX_TEXTURE_SIZE),{elevationTexture:qe,colorTexture:Ve}=o.getColorRampTextures(F,Ge,ce.getUnpackVector());F.activeTexture.set(Z.TEXTURE1),qe.bind(Z.NEAREST,Z.CLAMP_TO_EDGE),F.activeTexture.set(Z.TEXTURE4),Ve.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),de=!1,le=qe.size[0]}if(!ce||!ce.data)continue;const ye=ce.stride,ke=ce.getPixels();if(F.activeTexture.set(Z.TEXTURE0),F.pixelStoreUnpackPremultiplyAlpha.set(!1),be.demTexture=be.demTexture||g.getTileTexture(ye),be.demTexture){const Ge=be.demTexture;Ge.update(ke,{premultiply:!1}),Ge.bind(Z.LINEAR,Z.CLAMP_TO_EDGE)}else be.demTexture=new c.T(F,ke,Z.RGBA,{premultiply:!1}),be.demTexture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE);const me=D.getMeshFromTileID(F,pe.canonical,I,!0,"raster"),Ee=(C=g.style.map.terrain)===null||C===void 0?void 0:C.getTerrainData(pe),Ze=G.getProjectionData({overscaledTileID:pe,aligned:ie,applyGlobeMatrix:!A,applyTerrainMatrix:!0});Q.draw(F,Z.TRIANGLES,w,p[pe.overscaledZ],O,ua.backCCW,bf(o,be.dem,le),Ee,Ze,o.id,me.vertexBuffer,me.indexBuffer,me.segments)}}const ci=[new c.P(0,0),new c.P(c.a5,0),new c.P(c.a5,c.a5),new c.P(0,c.a5)];function Do(g,t,o,l,p,w,O,I,A=!1,C=!1){const D=l[l.length-1].overscaledZ,F=g.context,G=F.gl,Z=g.useProgram("raster"),Q=g.transform,ie=g.style.projection,de=g.colorModeForRenderPass(),le=!g.options.moving,pe=o.paint.get("raster-opacity"),be=o.paint.get("raster-resampling"),ce=o.paint.get("raster-fade-duration"),ye=!!g.style.map.terrain;for(const ke of l){const me=g.getDepthModeForSublayer(ke.overscaledZ-D,pe===1?ia.ReadWrite:ia.ReadOnly,G.LESS),Ee=t.getTile(ke),Ze=be==="nearest"?G.NEAREST:G.LINEAR;F.activeTexture.set(G.TEXTURE0),Ee.texture.bind(Ze,G.CLAMP_TO_EDGE,G.LINEAR_MIPMAP_NEAREST),F.activeTexture.set(G.TEXTURE1);const{parentTile:Ge,parentScaleBy:qe,parentTopLeft:Ve,fadeValues:bt}=zi(Ee,t,ce,ye);Ee.fadeOpacity=bt.tileOpacity,Ge?(Ge.fadeOpacity=bt.parentTileOpacity,Ge.texture.bind(Ze,G.CLAMP_TO_EDGE,G.LINEAR_MIPMAP_NEAREST)):Ee.texture.bind(Ze,G.CLAMP_TO_EDGE,G.LINEAR_MIPMAP_NEAREST),Ee.texture.useMipmap&&F.extTextureFilterAnisotropic&&g.transform.pitch>20&&G.texParameterf(G.TEXTURE_2D,F.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,F.extTextureFilterAnisotropicMax);const vt=g.style.map.terrain&&g.style.map.terrain.getTerrainData(ke),ht=Q.getProjectionData({overscaledTileID:ke,aligned:le,applyGlobeMatrix:!C,applyTerrainMatrix:!0}),Tt=qh(Ve,qe,bt.fadeMix,o,I),la=ie.getMeshFromTileID(F,ke.canonical,w,O,"raster");Z.draw(F,G.TRIANGLES,me,p?p[ke.overscaledZ]:Sa.disabled,de,A?ua.frontCCW:ua.backCCW,Tt,vt,ht,o.id,la.vertexBuffer,la.indexBuffer,la.segments)}}function zi(g,t,o,l){const p={parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:{tileOpacity:1,parentTileOpacity:1,fadeMix:{opacity:1,mix:0}}};if(o===0||l)return p;if(g.fadingParentID){const w=t.getLoadedTile(g.fadingParentID);if(!w)return p;const O=Math.pow(2,w.tileID.overscaledZ-g.tileID.overscaledZ),I=[g.tileID.canonical.x*O%1,g.tileID.canonical.y*O%1],A=(function(C,D,F){const G=it(),Z=(G-D.timeAdded)/F,Q=C.fadingDirection===Ue.Incoming,ie=c.an((G-C.timeAdded)/F,0,1),de=c.an(1-Z,0,1),le=Q?ie:de;return{tileOpacity:le,parentTileOpacity:Q?de:ie,fadeMix:{opacity:1,mix:1-le}}})(g,w,o);return{parentTile:w,parentScaleBy:O,parentTopLeft:I,fadeValues:A}}if(g.selfFading){const w=(function(O,I){const A=(it()-O.timeAdded)/I,C=c.an(A,0,1);return{tileOpacity:C,fadeMix:{opacity:C,mix:0}}})(g,o);return{parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:w}}return p}const bh=new c.bp(1,0,0,1),Nr=new c.bp(0,1,0,1),Of=new c.bp(0,0,1,1),kf=new c.bp(1,0,1,1),pi=new c.bp(0,1,1,1);function id(g,t,o,l){pn(g,0,t+o/2,g.transform.width,o,l)}function wh(g,t,o,l){pn(g,t-o/2,0,o,g.transform.height,l)}function pn(g,t,o,l,p,w){const O=g.context,I=O.gl;I.enable(I.SCISSOR_TEST),I.scissor(t*g.pixelRatio,o*g.pixelRatio,l*g.pixelRatio,p*g.pixelRatio),O.clear({color:w}),I.disable(I.SCISSOR_TEST)}function Nd(g,t,o){const l=g.context,p=l.gl,w=g.useProgram("debug"),O=ia.disabled,I=Sa.disabled,A=g.colorModeForRenderPass(),C="$debug",D=g.style.map.terrain&&g.style.map.terrain.getTerrainData(o);l.activeTexture.set(p.TEXTURE0);const F=t.getTileByID(o.key).latestRawTileData,G=Math.floor((F&&F.byteLength||0)/1024),Z=t.getTile(o).tileSize,Q=512/Math.min(Z,512)*(o.overscaledZ/g.transform.zoom)*.5;let ie=o.canonical.toString();o.overscaledZ!==o.canonical.z&&(ie+=` => ${o.overscaledZ}`),(function(le,pe){le.initDebugOverlayCanvas();const be=le.debugOverlayCanvas,ce=le.context.gl,ye=le.debugOverlayCanvas.getContext("2d");ye.clearRect(0,0,be.width,be.height),ye.shadowColor="white",ye.shadowBlur=2,ye.lineWidth=1.5,ye.strokeStyle="white",ye.textBaseline="top",ye.font="bold 36px Open Sans, sans-serif",ye.fillText(pe,5,5),ye.strokeText(pe,5,5),le.debugOverlayTexture.update(be),le.debugOverlayTexture.bind(ce.LINEAR,ce.CLAMP_TO_EDGE)})(g,`${ie} ${G}kB`);const de=g.transform.getProjectionData({overscaledTileID:o,applyGlobeMatrix:!0,applyTerrainMatrix:!0});w.draw(l,p.TRIANGLES,O,I,Ka.alphaBlended,ua.disabled,qo(c.bp.transparent,Q),null,de,C,g.debugBuffer,g.quadTriangleIndexBuffer,g.debugSegments),w.draw(l,p.LINE_STRIP,O,I,A,ua.disabled,qo(c.bp.red),D,de,C,g.debugBuffer,g.tileBorderIndexBuffer,g.debugSegments)}function _f(g,t,o,l){const{isRenderingGlobe:p}=l,w=g.context,O=w.gl,I=g.transform,A=g.colorModeForRenderPass(),C=g.getDepthModeFor3D(),D=g.useProgram("terrain");w.bindFramebuffer.set(null),w.viewport.set([0,0,g.width,g.height]);for(const F of o){const G=t.getTerrainMesh(F.tileID),Z=g.renderToTexture.getTexture(F),Q=t.getTerrainData(F.tileID);w.activeTexture.set(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,Z.texture);const ie=t.getMeshFrameDelta(I.zoom),de=I.calculateFogMatrix(F.tileID.toUnwrapped()),le=zd(ie,de,g.style.sky,I.pitch,p),pe=I.getProjectionData({overscaledTileID:F.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});D.draw(w,O.TRIANGLES,C,Sa.disabled,A,ua.backCCW,le,Q,pe,"terrain",G.vertexBuffer,G.indexBuffer,G.segments)}}function lc(g,t){if(!t.mesh){const o=new c.aW;o.emplaceBack(-1,-1),o.emplaceBack(1,-1),o.emplaceBack(1,1),o.emplaceBack(-1,1);const l=new c.aY;l.emplaceBack(0,1,2),l.emplaceBack(0,2,3),t.mesh=new $a(g.createVertexBuffer(o,fo.members),g.createIndexBuffer(l),c.aX.simpleSegment(0,0,o.length,l.length))}return t.mesh}class dp{constructor(t,o){this.context=new te(t),this.transform=o,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:c.ar(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=ts.maxOverzooming+ts.maxUnderzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new fn}resize(t,o,l){if(this.width=Math.floor(t*l),this.height=Math.floor(o*l),this.pixelRatio=l,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const p of this.style._order)this.style._layers[p].resize()}setup(){const t=this.context,o=new c.aW;o.emplaceBack(0,0),o.emplaceBack(c.a5,0),o.emplaceBack(0,c.a5),o.emplaceBack(c.a5,c.a5),this.tileExtentBuffer=t.createVertexBuffer(o,fo.members),this.tileExtentSegments=c.aX.simpleSegment(0,0,4,2);const l=new c.aW;l.emplaceBack(0,0),l.emplaceBack(c.a5,0),l.emplaceBack(0,c.a5),l.emplaceBack(c.a5,c.a5),this.debugBuffer=t.createVertexBuffer(l,fo.members),this.debugSegments=c.aX.simpleSegment(0,0,4,5);const p=new c.ch;p.emplaceBack(0,0,0,0),p.emplaceBack(c.a5,0,c.a5,0),p.emplaceBack(0,c.a5,0,c.a5),p.emplaceBack(c.a5,c.a5,c.a5,c.a5),this.rasterBoundsBuffer=t.createVertexBuffer(p,mf.members),this.rasterBoundsSegments=c.aX.simpleSegment(0,0,4,2);const w=new c.aW;w.emplaceBack(0,0),w.emplaceBack(c.a5,0),w.emplaceBack(0,c.a5),w.emplaceBack(c.a5,c.a5),this.rasterBoundsBufferPosOnly=t.createVertexBuffer(w,fo.members),this.rasterBoundsSegmentsPosOnly=c.aX.simpleSegment(0,0,4,5);const O=new c.aW;O.emplaceBack(0,0),O.emplaceBack(1,0),O.emplaceBack(0,1),O.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(O,fo.members),this.viewportSegments=c.aX.simpleSegment(0,0,4,2);const I=new c.ci;I.emplaceBack(0),I.emplaceBack(1),I.emplaceBack(3),I.emplaceBack(2),I.emplaceBack(0),this.tileBorderIndexBuffer=t.createIndexBuffer(I);const A=new c.aY;A.emplaceBack(1,0,2),A.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(A);const C=this.context.gl;this.stencilClearMode=new Sa({func:C.ALWAYS,mask:0},0,255,C.ZERO,C.ZERO,C.ZERO),this.tileExtentMesh=new $a(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const t=this.context,o=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const l=c.N();c.c7(l,0,this.width,this.height,0,0,1),c.Q(l,l,[o.drawingBufferWidth,o.drawingBufferHeight,0]);const p={mainMatrix:l,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:l};this.useProgram("clippingMask",null,!0).draw(t,o.TRIANGLES,ia.disabled,this.stencilClearMode,Ka.disabled,ua.disabled,null,null,p,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(t,o,l){if(this.currentStencilSource===t.source||!t.isTileClipped()||!o||!o.length)return;this.currentStencilSource=t.source,this.nextStencilID+o.length>256&&this.clearStencil();const p=this.context;p.setColorMode(Ka.disabled),p.setDepthMode(ia.disabled);const w={};for(const O of o)w[O.key]=this.nextStencilID++;this._renderTileMasks(w,o,l,!0),this._renderTileMasks(w,o,l,!1),this._tileClippingMaskIDs=w}_renderTileMasks(t,o,l,p){const w=this.context,O=w.gl,I=this.style.projection,A=this.transform,C=this.useProgram("clippingMask");for(const D of o){const F=t[D.key],G=this.style.map.terrain&&this.style.map.terrain.getTerrainData(D),Z=I.getMeshFromTileID(this.context,D.canonical,p,!0,"stencil"),Q=A.getProjectionData({overscaledTileID:D,applyGlobeMatrix:!l,applyTerrainMatrix:!0});C.draw(w,O.TRIANGLES,ia.disabled,new Sa({func:O.ALWAYS,mask:0},F,255,O.KEEP,O.KEEP,O.REPLACE),Ka.disabled,l?ua.disabled:ua.backCCW,null,G,Q,"$clipping",Z.vertexBuffer,Z.indexBuffer,Z.segments)}}_renderTilesDepthBuffer(){const t=this.context,o=t.gl,l=this.style.projection,p=this.transform,w=this.useProgram("depth"),O=this.getDepthModeFor3D(),I=Ls(p,{tileSize:p.tileSize});for(const A of I){const C=this.style.map.terrain&&this.style.map.terrain.getTerrainData(A),D=l.getMeshFromTileID(this.context,A.canonical,!0,!0,"raster"),F=p.getProjectionData({overscaledTileID:A,applyGlobeMatrix:!0,applyTerrainMatrix:!0});w.draw(t,o.TRIANGLES,O,Sa.disabled,Ka.disabled,ua.backCCW,null,C,F,"$clipping",D.vertexBuffer,D.indexBuffer,D.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const t=this.nextStencilID++,o=this.context.gl;return new Sa({func:o.NOTEQUAL,mask:255},t,255,o.KEEP,o.KEEP,o.REPLACE)}stencilModeForClipping(t){const o=this.context.gl;return new Sa({func:o.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,o.KEEP,o.KEEP,o.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(t){const o=this.context.gl,l=t.sort(((O,I)=>I.overscaledZ-O.overscaledZ)),p=l[l.length-1].overscaledZ,w=l[0].overscaledZ-p+1;if(w>1){this.currentStencilSource=void 0,this.nextStencilID+w>256&&this.clearStencil();const O={};for(let I=0;I<w;I++)O[I+p]=new Sa({func:o.GEQUAL,mask:255},I+this.nextStencilID,255,o.KEEP,o.KEEP,o.REPLACE);return this.nextStencilID+=w,[O,l]}return[{[p]:Sa.disabled},l]}stencilConfigForOverlapTwoPass(t){const o=this.context.gl,l=t.sort(((O,I)=>I.overscaledZ-O.overscaledZ)),p=l[l.length-1].overscaledZ,w=l[0].overscaledZ-p+1;if(this.clearStencil(),w>1){const O={},I={};for(let A=0;A<w;A++)O[A+p]=new Sa({func:o.GREATER,mask:255},w+1+A,255,o.KEEP,o.KEEP,o.REPLACE),I[A+p]=new Sa({func:o.GREATER,mask:255},1+A,255,o.KEEP,o.KEEP,o.REPLACE);return this.nextStencilID=2*w+1,[O,I,l]}return this.nextStencilID=3,[{[p]:new Sa({func:o.GREATER,mask:255},2,255,o.KEEP,o.KEEP,o.REPLACE)},{[p]:new Sa({func:o.GREATER,mask:255},1,255,o.KEEP,o.KEEP,o.REPLACE)},l]}colorModeForRenderPass(){const t=this.context.gl;return this._showOverdrawInspector?new Ka([t.CONSTANT_COLOR,t.ONE],new c.bp(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Ka.unblended:Ka.alphaBlended}getDepthModeForSublayer(t,o,l){if(!this.opaquePassEnabledForLayer())return ia.disabled;const p=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new ia(l||this.context.gl.LEQUAL,o,[p,p])}getDepthModeFor3D(){return new ia(this.context.gl.LEQUAL,ia.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(t,o){var l,p;this.style=t,this.options=o,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(it()),this.imageManager.beginFrame();const w=this.style._order,O=this.style.tileManagers,I={},A={},C={},D={isRenderingToTexture:!1,isRenderingGlobe:((l=t.projection)===null||l===void 0?void 0:l.transitionState)>0};for(const G in O){const Z=O[G];Z.used&&Z.prepare(this.context),I[G]=Z.getVisibleCoordinates(!1),A[G]=I[G].slice().reverse(),C[G]=Z.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let G=0;G<w.length;G++)if(this.style._layers[w[G]].is3D()){this.opaquePassCutoff=G;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const G of w){const Z=this.style._layers[G];if(!Z.hasOffscreenPass()||Z.isHidden(this.transform.zoom))continue;const Q=A[Z.source];(Z.type==="custom"||Q.length)&&this.renderLayer(this,O[Z.source],Z,Q,D)}if((p=this.style.projection)===null||p===void 0||p.updateGPUdependent({context:this.context,useProgram:G=>this.useProgram(G)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:o.showOverdrawInspector?c.bp.black:c.bp.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(G,Z){const Q=G.context,ie=Q.gl,de=((ke,me,Ee)=>{const Ze=Math.cos(me.rollInRadians),Ge=Math.sin(me.rollInRadians),qe=Ga(me),Ve=me.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:ke.properties.get("sky-color"),u_horizon_color:ke.properties.get("horizon-color"),u_horizon:[(me.width/2-qe*Ge)*Ee,(me.height/2+qe*Ze)*Ee],u_horizon_normal:[-Ge,Ze],u_sky_horizon_blend:ke.properties.get("sky-horizon-blend")*me.height/2*Ee,u_sky_blend:Ve}})(Z,G.style.map.transform,G.pixelRatio),le=new ia(ie.LEQUAL,ia.ReadWrite,[0,1]),pe=Sa.disabled,be=G.colorModeForRenderPass(),ce=G.useProgram("sky"),ye=lc(Q,Z);ce.draw(Q,ie.TRIANGLES,le,pe,be,ua.disabled,de,null,void 0,"sky",ye.vertexBuffer,ye.indexBuffer,ye.segments)})(this,this.style.sky),this._showOverdrawInspector=o.showOverdrawInspector,this.depthRangeFor3D=[0,1-(t._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=w.length-1;this.currentLayer>=0;this.currentLayer--){const G=this.style._layers[w[this.currentLayer]],Z=O[G.source],Q=I[G.source];this._renderTileClippingMasks(G,Q,!1),this.renderLayer(this,Z,G,Q,D)}this.renderPass="translucent";let F=!1;for(this.currentLayer=0;this.currentLayer<w.length;this.currentLayer++){const G=this.style._layers[w[this.currentLayer]],Z=O[G.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(G,D))continue;this.opaquePassEnabledForLayer()||F||(F=!0,D.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const Q=(G.type==="symbol"?C:A)[G.source];this._renderTileClippingMasks(G,I[G.source],!!this.renderToTexture),this.renderLayer(this,Z,G,Q,D)}if(D.isRenderingGlobe&&(function(G,Z,Q){const ie=G.context,de=ie.gl,le=G.useProgram("atmosphere"),pe=new ia(de.LEQUAL,ia.ReadOnly,[0,1]),be=G.transform,ce=(function(Ve,bt){const vt=Ve.properties.get("position"),ht=[-vt.x,-vt.y,-vt.z],Tt=c.ar(new Float64Array(16));return Ve.properties.get("anchor")==="map"&&(c.bg(Tt,Tt,bt.rollInRadians),c.bh(Tt,Tt,-bt.pitchInRadians),c.bg(Tt,Tt,bt.bearingInRadians),c.bh(Tt,Tt,bt.center.lat*Math.PI/180),c.bJ(Tt,Tt,-bt.center.lng*Math.PI/180)),c.cg(ht,ht,Tt),ht})(Q,G.transform),ye=be.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),ke=Z.properties.get("atmosphere-blend")*ye.projectionTransition;if(ke===0)return;const me=Qi(be.worldSize,be.center.lat),Ee=be.inverseProjectionMatrix,Ze=new Float64Array(4);Ze[3]=1,c.aH(Ze,Ze,be.modelViewProjectionMatrix),Ze[0]/=Ze[3],Ze[1]/=Ze[3],Ze[2]/=Ze[3],Ze[3]=1,c.aH(Ze,Ze,Ee),Ze[0]/=Ze[3],Ze[1]/=Ze[3],Ze[2]/=Ze[3],Ze[3]=1;const Ge=((Ve,bt,vt,ht,Tt)=>({u_sun_pos:Ve,u_atmosphere_blend:bt,u_globe_position:vt,u_globe_radius:ht,u_inv_proj_matrix:Tt}))(ce,ke,[Ze[0],Ze[1],Ze[2]],me,Ee),qe=lc(ie,Z);le.draw(ie,de.TRIANGLES,pe,Sa.disabled,Ka.alphaBlended,ua.disabled,Ge,null,null,"atmosphere",qe.vertexBuffer,qe.indexBuffer,qe.segments)})(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const G=(function(Z,Q){let ie=null;const de=Object.values(Z._layers).flatMap((ce=>ce.source&&!ce.isHidden(Q)?[Z.tileManagers[ce.source]]:[])),le=de.filter((ce=>ce.getSource().type==="vector")),pe=de.filter((ce=>ce.getSource().type!=="vector")),be=ce=>{(!ie||ie.getSource().maxzoom<ce.getSource().maxzoom)&&(ie=ce)};return le.forEach((ce=>be(ce))),ie||pe.forEach((ce=>be(ce))),ie})(this.style,this.transform.zoom);G&&(function(Z,Q,ie){for(let de=0;de<ie.length;de++)Nd(Z,Q,ie[de])})(this,G,G.getVisibleCoordinates())}this.options.showPadding&&(function(G){const Z=G.transform.padding;id(G,G.transform.height-(Z.top||0),3,bh),id(G,Z.bottom||0,3,Nr),wh(G,Z.left||0,3,Of),wh(G,G.transform.width-(Z.right||0),3,kf);const Q=G.transform.centerPoint;(function(ie,de,le,pe){pn(ie,de-1,le-10,2,20,pe),pn(ie,de-10,le-1,20,2,pe)})(G,Q.x,G.transform.height-Q.y,pi)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(t){if(!this.style||!this.style.map||!this.style.map.terrain)return;const o=this.terrainFacilitator.matrix,l=this.transform.modelViewProjectionMatrix;let p=this.terrainFacilitator.dirty;p||(p=t?!c.cj(o,l):!c.ck(o,l)),p||(p=this.style.map.terrain.tileManager.anyTilesAfterTime(this.terrainFacilitator.renderTime)),p&&(c.cl(o,l),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(w,O){const I=w.context,A=I.gl,C=w.transform,D=Ka.unblended,F=new ia(A.LEQUAL,ia.ReadWrite,[0,1]),G=O.tileManager.getRenderableTiles(),Z=w.useProgram("terrainDepth");I.bindFramebuffer.set(O.getFramebuffer("depth").framebuffer),I.viewport.set([0,0,w.width/devicePixelRatio,w.height/devicePixelRatio]),I.clear({color:c.bp.transparent,depth:1});for(const Q of G){const ie=O.getTerrainMesh(Q.tileID),de=O.getTerrainData(Q.tileID),le=C.getProjectionData({overscaledTileID:Q.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),pe={u_ele_delta:O.getMeshFrameDelta(C.zoom)};Z.draw(I,A.TRIANGLES,F,Sa.disabled,D,ua.backCCW,pe,de,le,"terrain",ie.vertexBuffer,ie.indexBuffer,ie.segments)}I.bindFramebuffer.set(null),I.viewport.set([0,0,w.width,w.height])})(this,this.style.map.terrain),(function(w,O){const I=w.context,A=I.gl,C=w.transform,D=Ka.unblended,F=new ia(A.LEQUAL,ia.ReadWrite,[0,1]),G=O.getCoordsTexture(),Z=O.tileManager.getRenderableTiles(),Q=w.useProgram("terrainCoords");I.bindFramebuffer.set(O.getFramebuffer("coords").framebuffer),I.viewport.set([0,0,w.width/devicePixelRatio,w.height/devicePixelRatio]),I.clear({color:c.bp.transparent,depth:1}),O.coordsIndex=[];for(const ie of Z){const de=O.getTerrainMesh(ie.tileID),le=O.getTerrainData(ie.tileID);I.activeTexture.set(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,G.texture);const pe={u_terrain_coords_id:(255-O.coordsIndex.length)/255,u_texture:0,u_ele_delta:O.getMeshFrameDelta(C.zoom)},be=C.getProjectionData({overscaledTileID:ie.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});Q.draw(I,A.TRIANGLES,F,Sa.disabled,D,ua.backCCW,pe,le,be,"terrain",de.vertexBuffer,de.indexBuffer,de.segments),O.coordsIndex.push(ie.tileID.key)}I.bindFramebuffer.set(null),I.viewport.set([0,0,w.width,w.height])})(this,this.style.map.terrain))}renderLayer(t,o,l,p,w){l.isHidden(this.transform.zoom)||(l.type==="background"||l.type==="custom"||(p||[]).length)&&(this.id=l.id,c.cm(l)?(function(O,I,A,C,D,F){if(O.renderPass!=="translucent")return;const{isRenderingToTexture:G}=F,Z=Sa.disabled,Q=O.colorModeForRenderPass();(A._unevaluatedLayout.hasValue("text-variable-anchor")||A._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(ie,de,le,pe,be,ce,ye,ke,me){const Ee=de.transform,Ze=de.style.map.terrain,Ge=be==="map",qe=ce==="map";for(const Ve of ie){const bt=pe.getTile(Ve),vt=bt.getBucket(le);if(!vt||!vt.text||!vt.text.segments.get().length)continue;const ht=c.ay(vt.textSizeData,Ee.zoom),Tt=c.aN(bt,1,de.transform.zoom),la=ho(Ge,de.transform,Tt),Ja=le.layout.get("icon-text-fit")!=="none"&&vt.hasIconData();if(ht){const ws=Math.pow(2,Ee.zoom-bt.tileID.overscaledZ),ps=Ze?(Cs,rs)=>Ze.getElevation(Ve,Cs,rs):null;Kt(vt,Ge,qe,me,Ee,la,ws,ht,Ja,c.aO(Ee,bt,ye,ke),Ve.toUnwrapped(),ps)}}})(C,O,A,I,A.layout.get("text-rotation-alignment"),A.layout.get("text-pitch-alignment"),A.paint.get("text-translate"),A.paint.get("text-translate-anchor"),D),A.paint.get("icon-opacity").constantOr(1)!==0&&Ys(O,I,A,C,!1,A.paint.get("icon-translate"),A.paint.get("icon-translate-anchor"),A.layout.get("icon-rotation-alignment"),A.layout.get("icon-pitch-alignment"),A.layout.get("icon-keep-upright"),Z,Q,G),A.paint.get("text-opacity").constantOr(1)!==0&&Ys(O,I,A,C,!0,A.paint.get("text-translate"),A.paint.get("text-translate-anchor"),A.layout.get("text-rotation-alignment"),A.layout.get("text-pitch-alignment"),A.layout.get("text-keep-upright"),Z,Q,G),I.map.showCollisionBoxes&&(De(O,I,A,C,!0),De(O,I,A,C,!1))})(t,o,l,p,this.style.placement.variableOffsets,w):c.cn(l)?(function(O,I,A,C,D){if(O.renderPass!=="translucent")return;const{isRenderingToTexture:F}=D,G=A.paint.get("circle-opacity"),Z=A.paint.get("circle-stroke-width"),Q=A.paint.get("circle-stroke-opacity"),ie=!A.layout.get("circle-sort-key").isConstant();if(G.constantOr(1)===0&&(Z.constantOr(1)===0||Q.constantOr(1)===0))return;const de=O.context,le=de.gl,pe=O.transform,be=O.getDepthModeForSublayer(0,ia.ReadOnly),ce=Sa.disabled,ye=O.colorModeForRenderPass(),ke=[],me=pe.getCircleRadiusCorrection();for(let Ee=0;Ee<C.length;Ee++){const Ze=C[Ee],Ge=I.getTile(Ze),qe=Ge.getBucket(A);if(!qe)continue;const Ve=A.paint.get("circle-translate"),bt=A.paint.get("circle-translate-anchor"),vt=c.aO(pe,Ge,Ve,bt),ht=qe.programConfigurations.get(A.id),Tt=O.useProgram("circle",ht),la=qe.layoutVertexBuffer,Ja=qe.indexBuffer,ws=O.style.map.terrain&&O.style.map.terrain.getTerrainData(Ze),ps={programConfiguration:ht,program:Tt,layoutVertexBuffer:la,indexBuffer:Ja,uniformValues:Uh(O,Ge,A,vt,me),terrainData:ws,projectionData:pe.getProjectionData({overscaledTileID:Ze,applyGlobeMatrix:!F,applyTerrainMatrix:!0})};if(ie){const Cs=qe.segments.get();for(const rs of Cs)ke.push({segments:new c.aX([rs]),sortKey:rs.sortKey,state:ps})}else ke.push({segments:qe.segments,sortKey:0,state:ps})}ie&&ke.sort(((Ee,Ze)=>Ee.sortKey-Ze.sortKey));for(const Ee of ke){const{programConfiguration:Ze,program:Ge,layoutVertexBuffer:qe,indexBuffer:Ve,uniformValues:bt,terrainData:vt,projectionData:ht}=Ee.state;Ge.draw(de,le.TRIANGLES,be,ce,ye,ua.backCCW,bt,vt,ht,A.id,qe,Ve,Ee.segments,A.paint,O.transform.zoom,Ze)}})(t,o,l,p,w):c.co(l)?(function(O,I,A,C,D){if(A.paint.get("heatmap-opacity")===0)return;const F=O.context,{isRenderingToTexture:G,isRenderingGlobe:Z}=D;if(O.style.map.terrain){for(const Q of C){const ie=I.getTile(Q);I.hasRenderableParent(Q)||(O.renderPass==="offscreen"?Oo(O,ie,A,Q,Z):O.renderPass==="translucent"&&Ya(O,A,Q,G,Z))}F.viewport.set([0,0,O.width,O.height])}else O.renderPass==="offscreen"?(function(Q,ie,de,le){const pe=Q.context,be=pe.gl,ce=Q.transform,ye=Sa.disabled,ke=new Ka([be.ONE,be.ONE],c.bp.transparent,[!0,!0,!0,!0]);(function(me,Ee,Ze){const Ge=me.gl;me.activeTexture.set(Ge.TEXTURE1),me.viewport.set([0,0,Ee.width/4,Ee.height/4]);let qe=Ze.heatmapFbos.get(c.cd);qe?(Ge.bindTexture(Ge.TEXTURE_2D,qe.colorAttachment.get()),me.bindFramebuffer.set(qe.framebuffer)):(qe=Ha(me,Ee.width/4,Ee.height/4),Ze.heatmapFbos.set(c.cd,qe))})(pe,Q,de),pe.clear({color:c.bp.transparent});for(let me=0;me<le.length;me++){const Ee=le[me];if(ie.hasRenderableParent(Ee))continue;const Ze=ie.getTile(Ee),Ge=Ze.getBucket(de);if(!Ge)continue;const qe=Ge.programConfigurations.get(de.id),Ve=Q.useProgram("heatmap",qe),bt=ce.getProjectionData({overscaledTileID:Ee,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),vt=ce.getCircleRadiusCorrection();Ve.draw(pe,be.TRIANGLES,ia.disabled,ye,ke,ua.backCCW,li(Ze,ce.zoom,de.paint.get("heatmap-intensity"),vt),null,bt,de.id,Ge.layoutVertexBuffer,Ge.indexBuffer,Ge.segments,de.paint,ce.zoom,qe)}pe.viewport.set([0,0,Q.width,Q.height])})(O,I,A,C):O.renderPass==="translucent"&&(function(Q,ie){const de=Q.context,le=de.gl;de.setColorMode(Q.colorModeForRenderPass());const pe=ie.heatmapFbos.get(c.cd);pe&&(de.activeTexture.set(le.TEXTURE0),le.bindTexture(le.TEXTURE_2D,pe.colorAttachment.get()),de.activeTexture.set(le.TEXTURE1),Pa(de,ie).bind(le.LINEAR,le.CLAMP_TO_EDGE),Q.useProgram("heatmapTexture").draw(de,le.TRIANGLES,ia.disabled,Sa.disabled,Q.colorModeForRenderPass(),ua.disabled,Bd(Q,ie,0,1),null,null,ie.id,Q.viewportBuffer,Q.quadTriangleIndexBuffer,Q.viewportSegments,ie.paint,Q.transform.zoom))})(O,A)})(t,o,l,p,w):c.cp(l)?(function(O,I,A,C,D){if(O.renderPass!=="translucent")return;const{isRenderingToTexture:F}=D,G=A.paint.get("line-opacity"),Z=A.paint.get("line-width");if(G.constantOr(1)===0||Z.constantOr(1)===0)return;const Q=O.getDepthModeForSublayer(0,ia.ReadOnly),ie=O.colorModeForRenderPass(),de=A.paint.get("line-dasharray"),le=de.constantOr(1),pe=A.paint.get("line-pattern"),be=pe.constantOr(1),ce=A.paint.get("line-gradient"),ye=A.getCrossfadeParameters();let ke;ke=be?"linePattern":le&&ce?"lineGradientSDF":le?"lineSDF":ce?"lineGradient":"line";const me=O.context,Ee=me.gl,Ze=O.transform;let Ge=!0;for(const qe of C){const Ve=I.getTile(qe);if(be&&!Ve.patternsLoaded())continue;const bt=Ve.getBucket(A);if(!bt)continue;const vt=bt.programConfigurations.get(A.id),ht=O.context.program.get(),Tt=O.useProgram(ke,vt),la=Ge||Tt.program!==ht,Ja=O.style.map.terrain&&O.style.map.terrain.getTerrainData(qe),ws=pe.constantOr(null),ps=de&&de.constantOr(null);if(ws&&Ve.imageAtlas){const Nn=Ve.imageAtlas,Ks=Nn.patternPositions[ws.to.toString()],Qs=Nn.patternPositions[ws.from.toString()];Ks&&Qs&&vt.setConstantPatternPositions(Ks,Qs)}else if(ps){const Nn=A.layout.get("line-cap")==="round",Ks=O.lineAtlas.getDash(ps.to,Nn),Qs=O.lineAtlas.getDash(ps.from,Nn);vt.setConstantDashPositions(Ks,Qs)}const Cs=Ze.getProjectionData({overscaledTileID:qe,applyGlobeMatrix:!F,applyTerrainMatrix:!0}),rs=Ze.getPixelScale();let qs;be?(qs=di(O,Ve,A,rs,ye),Lo(me,Ee,Ve,vt,ye)):le&&ce?(qs=ar(O,Ve,A,rs,ye,bt.lineClipsArray.length),ao(O,I,me,Ee,A,bt,qe,vt,ye)):le?(qs=Mn(O,Ve,A,rs,ye),_s(O,me,Ee,vt,la,ye)):ce?(qs=wf(O,Ve,A,rs,bt.lineClipsArray.length),ko(O,I,me,Ee,A,bt,qe)):qs=Ei(O,Ve,A,rs);const Ms=O.stencilModeForClipping(qe);Tt.draw(me,Ee.TRIANGLES,Q,Ms,ie,ua.disabled,qs,Ja,Cs,A.id,bt.layoutVertexBuffer,bt.indexBuffer,bt.segments,A.paint,O.transform.zoom,vt,bt.layoutVertexBuffer2),Ge=!1}})(t,o,l,p,w):c.cq(l)?(function(O,I,A,C,D){const F=A.paint.get("fill-color"),G=A.paint.get("fill-opacity");if(G.constantOr(1)===0)return;const{isRenderingToTexture:Z}=D,Q=O.colorModeForRenderPass(),ie=A.paint.get("fill-pattern"),de=O.opaquePassEnabledForLayer()&&!ie.constantOr(1)&&F.constantOr(c.bp.transparent).a===1&&G.constantOr(0)===1?"opaque":"translucent";if(O.renderPass===de){const le=O.getDepthModeForSublayer(1,O.renderPass==="opaque"?ia.ReadWrite:ia.ReadOnly);zo(O,I,A,C,le,Q,!1,Z)}if(O.renderPass==="translucent"&&A.paint.get("fill-antialias")){const le=O.getDepthModeForSublayer(A.getPaintProperty("fill-outline-color")?2:0,ia.ReadOnly);zo(O,I,A,C,le,Q,!0,Z)}})(t,o,l,p,w):c.cr(l)?(function(O,I,A,C,D){const F=A.paint.get("fill-extrusion-opacity");if(F===0)return;const{isRenderingToTexture:G}=D;if(O.renderPass==="translucent"){const Z=new ia(O.context.gl.LEQUAL,ia.ReadWrite,O.depthRangeFor3D);if(F!==1||A.paint.get("fill-extrusion-pattern").constantOr(1))Mi(O,I,A,C,Z,Sa.disabled,Ka.disabled,G),Mi(O,I,A,C,Z,O.stencilModeFor3D(),O.colorModeForRenderPass(),G);else{const Q=O.colorModeForRenderPass();Mi(O,I,A,C,Z,Sa.disabled,Q,G)}}})(t,o,l,p,w):c.cs(l)?(function(O,I,A,C,D){if(O.renderPass!=="offscreen"&&O.renderPass!=="translucent")return;const{isRenderingToTexture:F}=D,G=O.context,Z=O.style.projection.useSubdivision,Q=O.getDepthModeForSublayer(0,ia.ReadOnly),ie=O.colorModeForRenderPass();if(O.renderPass==="offscreen")(function(de,le,pe,be,ce,ye,ke){const me=de.context,Ee=me.gl;for(const Ze of pe){const Ge=le.getTile(Ze),qe=Ge.dem;if(!qe||!qe.data||!Ge.needsHillshadePrepare)continue;const Ve=qe.dim,bt=qe.stride,vt=qe.getPixels();if(me.activeTexture.set(Ee.TEXTURE1),me.pixelStoreUnpackPremultiplyAlpha.set(!1),Ge.demTexture=Ge.demTexture||de.getTileTexture(bt),Ge.demTexture){const Tt=Ge.demTexture;Tt.update(vt,{premultiply:!1}),Tt.bind(Ee.NEAREST,Ee.CLAMP_TO_EDGE)}else Ge.demTexture=new c.T(me,vt,Ee.RGBA,{premultiply:!1}),Ge.demTexture.bind(Ee.NEAREST,Ee.CLAMP_TO_EDGE);me.activeTexture.set(Ee.TEXTURE0);let ht=Ge.fbo;if(!ht){const Tt=new c.T(me,{width:Ve,height:Ve,data:null},Ee.RGBA);Tt.bind(Ee.LINEAR,Ee.CLAMP_TO_EDGE),ht=Ge.fbo=me.createFramebuffer(Ve,Ve,!0,!1),ht.colorAttachment.set(Tt.texture)}me.bindFramebuffer.set(ht.framebuffer),me.viewport.set([0,0,Ve,Ve]),de.useProgram("hillshadePrepare").draw(me,Ee.TRIANGLES,ce,ye,ke,ua.disabled,yf(Ge.tileID,qe),null,null,be.id,de.rasterBoundsBuffer,de.quadTriangleIndexBuffer,de.rasterBoundsSegments),Ge.needsHillshadePrepare=!1}})(O,I,C,A,Q,Sa.disabled,ie),G.viewport.set([0,0,O.width,O.height]);else if(O.renderPass==="translucent")if(Z){const[de,le,pe]=O.stencilConfigForOverlapTwoPass(C);Li(O,I,A,pe,de,Q,ie,!1,F),Li(O,I,A,pe,le,Q,ie,!0,F)}else{const[de,le]=O.getStencilConfigForOverlapAndUpdateStencilID(C);Li(O,I,A,le,de,Q,ie,!1,F)}})(t,o,l,p,w):c.ct(l)?(function(O,I,A,C,D){if(O.renderPass!=="translucent"||!C.length)return;const{isRenderingToTexture:F}=D,G=O.style.projection.useSubdivision,Z=O.getDepthModeForSublayer(0,ia.ReadOnly),Q=O.colorModeForRenderPass();if(G){const[ie,de,le]=O.stencilConfigForOverlapTwoPass(C);ir(O,I,A,le,ie,Z,Q,!1,F),ir(O,I,A,le,de,Z,Q,!0,F)}else{const[ie,de]=O.getStencilConfigForOverlapAndUpdateStencilID(C);ir(O,I,A,de,ie,Z,Q,!1,F)}})(t,o,l,p,w):c.bU(l)?(function(O,I,A,C,D){if(O.renderPass!=="translucent"||A.paint.get("raster-opacity")===0||!C.length)return;const{isRenderingToTexture:F}=D,G=I.getSource(),Z=O.style.projection.useSubdivision;if(G instanceof ro)Do(O,I,A,C,null,!1,!1,G.tileCoords,G.flippedWindingOrder,F);else if(Z){const[Q,ie,de]=O.stencilConfigForOverlapTwoPass(C);Do(O,I,A,de,Q,!1,!0,ci,!1,F),Do(O,I,A,de,ie,!0,!0,ci,!1,F)}else{const[Q,ie]=O.getStencilConfigForOverlapAndUpdateStencilID(C);Do(O,I,A,ie,Q,!1,!0,ci,!1,F)}})(t,o,l,p,w):c.cu(l)?(function(O,I,A,C,D){const F=A.paint.get("background-color"),G=A.paint.get("background-opacity");if(G===0)return;const{isRenderingToTexture:Z}=D,Q=O.context,ie=Q.gl,de=O.style.projection,le=O.transform,pe=le.tileSize,be=A.paint.get("background-pattern");if(O.isPatternMissing(be))return;const ce=!be&&F.a===1&&G===1&&O.opaquePassEnabledForLayer()?"opaque":"translucent";if(O.renderPass!==ce)return;const ye=Sa.disabled,ke=O.getDepthModeForSublayer(0,ce==="opaque"?ia.ReadWrite:ia.ReadOnly),me=O.colorModeForRenderPass(),Ee=O.useProgram(be?"backgroundPattern":"background"),Ze=C||Ls(le,{tileSize:pe,terrain:O.style.map.terrain});be&&(Q.activeTexture.set(ie.TEXTURE0),O.imageManager.bind(O.context));const Ge=A.getCrossfadeParameters();for(const qe of Ze){const Ve=le.getProjectionData({overscaledTileID:qe,applyGlobeMatrix:!Z,applyTerrainMatrix:!0}),bt=be?gl(G,O,be,{tileID:qe,tileSize:pe},Ge):Vh(G,F),vt=O.style.map.terrain&&O.style.map.terrain.getTerrainData(qe),ht=de.getMeshFromTileID(Q,qe.canonical,!1,!0,"raster");Ee.draw(Q,ie.TRIANGLES,ke,ye,me,ua.backCCW,bt,vt,Ve,A.id,ht.vertexBuffer,ht.indexBuffer,ht.segments)}})(t,0,l,p,w):c.cv(l)&&(function(O,I,A,C){const{isRenderingGlobe:D}=C,F=O.context,G=A.implementation,Z=O.style.projection,Q=O.transform,ie=Q.getProjectionDataForCustomLayer(D),de={farZ:Q.farZ,nearZ:Q.nearZ,fov:Q.fov*Math.PI/180,modelViewProjectionMatrix:Q.modelViewProjectionMatrix,projectionMatrix:Q.projectionMatrix,shaderData:{variantName:Z.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${Z.shaderPreludeCode.vertexSource}`,define:Z.shaderDefine},defaultProjectionData:ie},le=G.renderingMode?G.renderingMode:"2d";if(O.renderPass==="offscreen"){const pe=G.prerender;pe&&(O.setCustomLayerDefaults(),F.setColorMode(O.colorModeForRenderPass()),pe.call(G,F.gl,de),F.setDirty(),O.setBaseState())}else if(O.renderPass==="translucent"){O.setCustomLayerDefaults(),F.setColorMode(O.colorModeForRenderPass()),F.setStencilMode(Sa.disabled);const pe=le==="3d"?O.getDepthModeFor3D():O.getDepthModeForSublayer(0,ia.ReadOnly);F.setDepthMode(pe),G.render(F.gl,de),F.setDirty(),O.setBaseState(),F.bindFramebuffer.set(null)}})(t,0,l,w))}saveTileTexture(t){const o=this._tileTextures[t.size[0]];o?o.push(t):this._tileTextures[t.size[0]]=[t]}getTileTexture(t){const o=this._tileTextures[t];return o&&o.length>0?o.pop():null}isPatternMissing(t){if(!t)return!1;if(!t.from||!t.to)return!0;const o=this.imageManager.getPattern(t.from.toString()),l=this.imageManager.getPattern(t.to.toString());return!o||!l}useProgram(t,o,l=!1,p=[]){this.cache=this.cache||{};const w=!!this.style.map.terrain,O=this.style.projection,I=l?Ba.projectionMercator:O.shaderPreludeCode,A=l?Os:O.shaderDefine,C=t+(o?o.cacheKey:"")+`/${l?Pn:O.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(w?"/terrain":"")+(p?`/${p.join("/")}`:"");return this.cache[C]||(this.cache[C]=new hh(this.context,Ba[t],o,vf[t],this._showOverdrawInspector,w,I,A,p)),this.cache[C]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new c.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){var t,o;if(this._tileTextures){for(const l in this._tileTextures){const p=this._tileTextures[l];if(p)for(const w of p)w.destroy()}this._tileTextures={}}if(this.tileExtentBuffer&&this.tileExtentBuffer.destroy(),this.debugBuffer&&this.debugBuffer.destroy(),this.rasterBoundsBuffer&&this.rasterBoundsBuffer.destroy(),this.rasterBoundsBufferPosOnly&&this.rasterBoundsBufferPosOnly.destroy(),this.viewportBuffer&&this.viewportBuffer.destroy(),this.tileBorderIndexBuffer&&this.tileBorderIndexBuffer.destroy(),this.quadTriangleIndexBuffer&&this.quadTriangleIndexBuffer.destroy(),this.tileExtentMesh&&((t=this.tileExtentMesh.vertexBuffer)===null||t===void 0||t.destroy()),this.tileExtentMesh&&((o=this.tileExtentMesh.indexBuffer)===null||o===void 0||o.destroy()),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.cache){for(const l in this.cache){const p=this.cache[l];p&&p.program&&this.context.gl.deleteProgram(p.program)}this.cache={}}this.context&&this.context.setDefault()}overLimit(){const{drawingBufferWidth:t,drawingBufferHeight:o}=this.context.gl;return this.width!==t||this.height!==o}}function dc(g,t){let o,l=!1,p=null,w=null;const O=()=>{p=null,l&&(g.apply(w,o),p=setTimeout(O,t),l=!1)};return(...I)=>(l=!0,w=this,o=I,p||O(),p)}class an{constructor(t){this._getCurrentHash=()=>{const o=window.location.hash.replace("#","");if(this._hashName){let l;return o.split("&").map((p=>p.split("="))).forEach((p=>{p[0]===this._hashName&&(l=p)})),(l&&l[1]||"").split("/")}return o.split("/")},this._onHashChange=()=>{const o=this._getCurrentHash();if(!this._isValidHash(o))return!1;const l=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(o[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+o[2],+o[1]],zoom:+o[0],bearing:l,pitch:+(o[4]||0)}),!0},this._updateHashUnthrottled=()=>{const o=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,o)},this._removeHash=()=>{const o=this._getCurrentHash();if(o.length===0)return;const l=o.join("/");let p=l;p.split("&").length>0&&(p=p.split("&")[0]),this._hashName&&(p=`${this._hashName}=${l}`);let w=window.location.hash.replace(p,"");w.startsWith("#&")?w=w.slice(0,1)+w.slice(2):w==="#"&&(w="");let O=window.location.href.replace(/(#.+)?$/,w);O=O.replace("&&","&"),window.history.replaceState(window.history.state,null,O)},this._updateHash=dc(this._updateHashUnthrottled,300),this._hashName=t&&encodeURIComponent(t)}addTo(t){return this._map=t,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(t){const o=this._map.getCenter(),l=Math.round(100*this._map.getZoom())/100,p=Math.ceil((l*Math.LN2+Math.log(512/360/.5))/Math.LN10),w=Math.pow(10,p),O=Math.round(o.lng*w)/w,I=Math.round(o.lat*w)/w,A=this._map.getBearing(),C=this._map.getPitch();let D="";if(D+=t?`/${O}/${I}/${l}`:`${l}/${I}/${O}`,(A||C)&&(D+="/"+Math.round(10*A)/10),C&&(D+=`/${Math.round(C)}`),this._hashName){const F=this._hashName;let G=!1;const Z=window.location.hash.slice(1).split("&").map((Q=>{const ie=Q.split("=")[0];return ie===F?(G=!0,`${ie}=${D}`):Q})).filter((Q=>Q));return G||Z.push(`${F}=${D}`),`#${Z.join("&")}`}return`#${D}`}_isValidHash(t){if(t.length<3||t.some(isNaN))return!1;try{new c.V(+t[2],+t[1])}catch(w){return!1}const o=+t[0],l=+(t[3]||0),p=+(t[4]||0);return o>=this._map.getMinZoom()&&o<=this._map.getMaxZoom()&&l>=-180&&l<=180&&p>=this._map.getMinPitch()&&p<=this._map.getMaxPitch()}}const Gr={linearity:.3,easing:c.cw(0,0,.3,1)},rd=c.e({deceleration:2500,maxSpeed:1400},Gr),_o=c.e({deceleration:20,maxSpeed:1400},Gr),ui=c.e({deceleration:1e3,maxSpeed:360},Gr),Ol=c.e({deceleration:1e3,maxSpeed:90},Gr),Io=c.e({deceleration:1e3,maxSpeed:360},Gr);class Au{constructor(t){this._map=t,this.clear()}clear(){this._inertiaBuffer=[]}record(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:it(),settings:t})}_drainInertiaBuffer(){const t=this._inertiaBuffer,o=it();for(;t.length>0&&o-t[0].time>160;)t.shift()}_onMoveEnd(t){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const o={zoom:0,bearing:0,pitch:0,roll:0,pan:new c.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:w}of this._inertiaBuffer)o.zoom+=w.zoomDelta||0,o.bearing+=w.bearingDelta||0,o.pitch+=w.pitchDelta||0,o.roll+=w.rollDelta||0,w.panDelta&&o.pan._add(w.panDelta),w.around&&(o.around=w.around),w.pinchAround&&(o.pinchAround=w.pinchAround);const l=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,p={};if(o.pan.mag()){const w=Gd(o.pan.mag(),l,c.e({},rd,t||{})),O=o.pan.mult(w.amount/o.pan.mag()),I=this._map.cameraHelper.handlePanInertia(O,this._map.transform);p.center=I.easingCenter,p.offset=I.easingOffset,hd(p,w)}if(o.zoom){const w=Gd(o.zoom,l,_o);p.zoom=this._map.transform.zoom+w.amount,hd(p,w)}if(o.bearing){const w=Gd(o.bearing,l,ui);p.bearing=this._map.transform.bearing+c.an(w.amount,-179,179),hd(p,w)}if(o.pitch){const w=Gd(o.pitch,l,Ol);p.pitch=this._map.transform.pitch+w.amount,hd(p,w)}if(o.roll){const w=Gd(o.roll,l,Io);p.roll=this._map.transform.roll+c.an(w.amount,-179,179),hd(p,w)}if(p.zoom||p.bearing){const w=o.pinchAround===void 0?o.around:o.pinchAround;p.around=w?this._map.unproject(w):this._map.getCenter()}return this.clear(),c.e(p,{noMoveStart:!0})}}function hd(g,t){(!g.duration||g.duration<t.duration)&&(g.duration=t.duration,g.easing=t.easing)}function Gd(g,t,o){const{maxSpeed:l,linearity:p,deceleration:w}=o,O=c.an(g*p/(t/1e3),-l,l),I=Math.abs(O)/(w*p);return{easing:o.easing,duration:1e3*I,amount:O*(I/2)}}class Dn extends c.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,o,l,p={}){l=l instanceof MouseEvent?l:new MouseEvent(t,l);const w=Te.mousePos(o.getCanvas(),l),O=o.unproject(w);super(t,c.e({point:w,lngLat:O,originalEvent:l},p)),this._defaultPrevented=!1,this.target=o}}class rr extends c.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,o,l){const p=t==="touchend"?l.changedTouches:l.touches,w=Te.touchPos(o.getCanvasContainer(),p),O=w.map((A=>o.unproject(A))),I=w.reduce(((A,C,D,F)=>A.add(C.div(F.length))),new c.P(0,0));super(t,{points:w,point:I,lngLats:O,lngLat:o.unproject(I),originalEvent:l}),this._defaultPrevented=!1}}class If extends c.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,o,l){super(t,{originalEvent:l}),this._defaultPrevented=!1}}class xf{constructor(t,o){this._map=t,this._clickTolerance=o.clickTolerance}reset(){delete this._mousedownPos}wheel(t){return this._firePreventable(new If(t.type,this._map,t))}mousedown(t,o){return this._mousedownPos=o,this._firePreventable(new Dn(t.type,this._map,t))}mouseup(t){this._map.fire(new Dn(t.type,this._map,t))}click(t,o){this._mousedownPos&&this._mousedownPos.dist(o)>=this._clickTolerance||this._map.fire(new Dn(t.type,this._map,t))}dblclick(t){return this._firePreventable(new Dn(t.type,this._map,t))}mouseover(t){this._map.fire(new Dn(t.type,this._map,t))}mouseout(t){this._map.fire(new Dn(t.type,this._map,t))}touchstart(t){return this._firePreventable(new rr(t.type,this._map,t))}touchmove(t){this._map.fire(new rr(t.type,this._map,t))}touchend(t){this._map.fire(new rr(t.type,this._map,t))}touchcancel(t){this._map.fire(new rr(t.type,this._map,t))}_firePreventable(t){if(this._map.fire(t),t.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class fp{constructor(t){this._map=t}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(t){this._map.fire(new Dn(t.type,this._map,t))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Dn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(t){this._delayContextMenu?this._contextMenuEvent=t:this._ignoreContextMenu||this._map.fire(new Dn(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class hr{constructor(t){this._map=t}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(t){return this.transform.screenPointToLocation(c.P.convert(t),this._map.terrain)}}class Xh{constructor(t,o){this._map=t,this._tr=new hr(t),this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=o.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(t,o){this.isEnabled()&&t.shiftKey&&t.button===0&&(Te.disableDrag(),this._startPos=this._lastPos=o,this._active=!0)}mousemoveWindow(t,o){if(!this._active)return;const l=o;if(this._lastPos.equals(l)||!this._box&&l.dist(this._startPos)<this._clickTolerance)return;const p=this._startPos;this._lastPos=l,this._box||(this._box=Te.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",t));const w=Math.min(p.x,l.x),O=Math.max(p.x,l.x),I=Math.min(p.y,l.y),A=Math.max(p.y,l.y);Te.setTransform(this._box,`translate(${w}px,${I}px)`),this._box.style.width=O-w+"px",this._box.style.height=A-I+"px"}mouseupWindow(t,o){if(!this._active||t.button!==0)return;const l=this._startPos,p=o;if(this.reset(),Te.suppressClick(),l.x!==p.x||l.y!==p.y)return this._map.fire(new c.l("boxzoomend",{originalEvent:t})),{cameraAnimation:w=>w.fitScreenCoordinates(l,p,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",t)}keydown(t){this._active&&t.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",t))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(Te.remove(this._box),this._box=null),Te.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(t,o){return this._map.fire(new c.l(t,{originalEvent:o}))}}function Vo(g,t){if(g.length!==t.length)throw new Error(`The number of touches and points are not equal - touches ${g.length}, points ${t.length}`);const o={};for(let l=0;l<g.length;l++)o[g[l].identifier]=t[l];return o}class Rt{constructor(t){this.reset(),this.numTouches=t.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(t,o,l){(this.centroid||l.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=t.timeStamp),l.length===this.numTouches&&(this.centroid=(function(p){const w=new c.P(0,0);for(const O of p)w._add(O);return w.div(p.length)})(o),this.touches=Vo(l,o)))}touchmove(t,o,l){if(this.aborted||!this.centroid)return;const p=Vo(l,o);for(const w in this.touches){const O=p[w];(!O||O.dist(this.touches[w])>30)&&(this.aborted=!0)}}touchend(t,o,l){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),l.length===0){const p=!this.aborted&&this.centroid;if(this.reset(),p)return p}}}class Fd{constructor(t){this.singleTap=new Rt(t),this.numTaps=t.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(t,o,l){this.singleTap.touchstart(t,o,l)}touchmove(t,o,l){this.singleTap.touchmove(t,o,l)}touchend(t,o,l){const p=this.singleTap.touchend(t,o,l);if(p){const w=t.timeStamp-this.lastTime<500,O=!this.lastTap||this.lastTap.dist(p)<30;if(w&&O||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=p,this.count===this.numTaps)return this.reset(),p}}}class Tf{constructor(t){this._tr=new hr(t),this._zoomIn=new Fd({numTouches:1,numTaps:2}),this._zoomOut=new Fd({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(t,o,l){this._zoomIn.touchstart(t,o,l),this._zoomOut.touchstart(t,o,l)}touchmove(t,o,l){this._zoomIn.touchmove(t,o,l),this._zoomOut.touchmove(t,o,l)}touchend(t,o,l){const p=this._zoomIn.touchend(t,o,l),w=this._zoomOut.touchend(t,o,l),O=this._tr;return p?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:O.zoom+1,around:O.unproject(p)},{originalEvent:t})}):w?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:O.zoom-1,around:O.unproject(w)},{originalEvent:t})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Di{constructor(t){this._enabled=!!t.enable,this._moveStateManager=t.moveStateManager,this._clickTolerance=t.clickTolerance||1,this._moveFunction=t.move,this._activateOnStart=!!t.activateOnStart,t.assignEvents(this),this.reset()}reset(t){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(t)}_move(...t){const o=this._moveFunction(...t);if(o.bearingDelta||o.pitchDelta||o.rollDelta||o.around||o.panDelta)return this._active=!0,o}dragStart(t,o){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(t)&&(this._moveStateManager.startMove(t),this._lastPoint=Array.isArray(o)?o[0]:o,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(t,o){if(!this.isEnabled())return;const l=this._lastPoint;if(!l)return;if(t.preventDefault(),!this._moveStateManager.isValidMoveEvent(t))return void this.reset(t);const p=Array.isArray(o)?o[0]:o;return!this._moved&&p.dist(l)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=p,this._move(l,p))}dragEnd(t){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(t)&&(this._moved&&Te.suppressClick(),this.reset(t))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const lr=0,ld=2,Af={[lr]:1,[ld]:2};class Fr{constructor(t){this._correctEvent=t.checkCorrectEvent}startMove(t){const o=Te.mouseButton(t);this._eventButton=o}endMove(t){delete this._eventButton}isValidStartEvent(t){return this._correctEvent(t)}isValidMoveEvent(t){return!(function(o,l){const p=Af[l];return o.buttons===void 0||(o.buttons&p)!==p})(t,this._eventButton)}isValidEndEvent(t){return Te.mouseButton(t)===this._eventButton}}class kl{constructor(){this._firstTouch=void 0}_isOneFingerTouch(t){return t.targetTouches.length===1}_isSameTouchEvent(t){return t.targetTouches[0].identifier===this._firstTouch}startMove(t){this._firstTouch=t.targetTouches[0].identifier}endMove(t){delete this._firstTouch}isValidStartEvent(t){return this._isOneFingerTouch(t)}isValidMoveEvent(t){return this._isOneFingerTouch(t)&&this._isSameTouchEvent(t)}isValidEndEvent(t){return this._isOneFingerTouch(t)&&this._isSameTouchEvent(t)}}class jd{constructor(t=new Fr({checkCorrectEvent:()=>!0}),o=new kl){this.mouseMoveStateManager=t,this.oneFingerTouchMoveStateManager=o}_executeRelevantHandler(t,o,l){return t instanceof MouseEvent?o(t):typeof TouchEvent!="undefined"&&t instanceof TouchEvent?l(t):void 0}startMove(t){this._executeRelevantHandler(t,(o=>this.mouseMoveStateManager.startMove(o)),(o=>this.oneFingerTouchMoveStateManager.startMove(o)))}endMove(t){this._executeRelevantHandler(t,(o=>this.mouseMoveStateManager.endMove(o)),(o=>this.oneFingerTouchMoveStateManager.endMove(o)))}isValidStartEvent(t){return this._executeRelevantHandler(t,(o=>this.mouseMoveStateManager.isValidStartEvent(o)),(o=>this.oneFingerTouchMoveStateManager.isValidStartEvent(o)))}isValidMoveEvent(t){return this._executeRelevantHandler(t,(o=>this.mouseMoveStateManager.isValidMoveEvent(o)),(o=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(o)))}isValidEndEvent(t){return this._executeRelevantHandler(t,(o=>this.mouseMoveStateManager.isValidEndEvent(o)),(o=>this.oneFingerTouchMoveStateManager.isValidEndEvent(o)))}}const jr=g=>{g.mousedown=g.dragStart,g.mousemoveWindow=g.dragMove,g.mouseup=g.dragEnd,g.contextmenu=t=>{t.preventDefault()}};class Sf{constructor(t,o){this._clickTolerance=t.clickTolerance||1,this._map=o,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new c.P(0,0)}_shouldBePrevented(t){return t<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(t,o,l){return this._calculateTransform(t,o,l)}touchmove(t,o,l){if(this._active){if(!this._shouldBePrevented(l.length))return t.preventDefault(),this._calculateTransform(t,o,l);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",t)}}touchend(t,o,l){this._calculateTransform(t,o,l),this._active&&this._shouldBePrevented(l.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(t,o,l){l.length>0&&(this._active=!0);const p=Vo(l,o),w=new c.P(0,0),O=new c.P(0,0);let I=0;for(const C in p){const D=p[C],F=this._touches[C];F&&(w._add(D),O._add(D.sub(F)),I++,p[C]=D)}if(this._touches=p,this._shouldBePrevented(I)||!O.mag())return;const A=O.div(I);return this._sum._add(A),this._sum.mag()<this._clickTolerance?void 0:{around:w.div(I),panDelta:A}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ud{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(t,o,l){this._firstTwoTouches||l.length<2||(this._firstTwoTouches=[l[0].identifier,l[1].identifier],this._start([o[0],o[1]]))}touchmove(t,o,l){if(!this._firstTwoTouches)return;t.preventDefault();const[p,w]=this._firstTwoTouches,O=Ur(l,o,p),I=Ur(l,o,w);if(!O||!I)return;const A=this._aroundCenter?null:O.add(I).div(2);return this._move([O,I],A,t)}touchend(t,o,l){if(!this._firstTwoTouches)return;const[p,w]=this._firstTwoTouches,O=Ur(l,o,p),I=Ur(l,o,w);O&&I||(this._active&&Te.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(t){this._enabled=!0,this._aroundCenter=!!t&&t.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Ur(g,t,o){for(let l=0;l<g.length;l++)if(g[l].identifier===o)return t[l]}function fc(g,t){return Math.log(g/t)/Math.LN2}class qr extends Ud{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(t){this._startDistance=this._distance=t[0].dist(t[1])}_move(t,o){const l=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(fc(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:fc(this._distance,l),pinchAround:o}}}function Pf(g,t){return 180*g.angleWith(t)/Math.PI}class qd extends Ud{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}_move(t,o,l){const p=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Pf(this._vector,p),pinchAround:o}}_isBelowThreshold(t){this._minDiameter=Math.min(this._minDiameter,t.mag());const o=25/(Math.PI*this._minDiameter)*360,l=Pf(t,this._startVector);return Math.abs(l)<o}}function Vr(g){return Math.abs(g.y)>Math.abs(g.x)}class vh extends Ud{constructor(t){super(),this._currentTouchCount=0,this._map=t}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(t,o,l){super.touchstart(t,o,l),this._currentTouchCount=l.length}_start(t){this._lastPoints=t,Vr(t[0].sub(t[1]))&&(this._valid=!1)}_move(t,o,l){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const p=t[0].sub(this._lastPoints[0]),w=t[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(p,w,l.timeStamp),this._valid?(this._lastPoints=t,this._active=!0,{pitchDelta:(p.y+w.y)/2*-.5}):void 0}gestureBeginsVertically(t,o,l){if(this._valid!==void 0)return this._valid;const p=t.mag()>=2,w=o.mag()>=2;if(!p&&!w)return;if(!p||!w)return this._firstMove===void 0&&(this._firstMove=l),l-this._firstMove<100&&void 0;const O=t.y>0==o.y>0;return Vr(t)&&Vr(o)&&O}}const Bi={panStep:100,bearingStep:15,pitchStep:10};class as{constructor(t){this._tr=new hr(t);const o=Bi;this._panStep=o.panStep,this._bearingStep=o.bearingStep,this._pitchStep=o.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(t){if(t.altKey||t.ctrlKey||t.metaKey)return;let o=0,l=0,p=0,w=0,O=0;switch(t.keyCode){case 61:case 107:case 171:case 187:o=1;break;case 189:case 109:case 173:o=-1;break;case 37:t.shiftKey?l=-1:(t.preventDefault(),w=-1);break;case 39:t.shiftKey?l=1:(t.preventDefault(),w=1);break;case 38:t.shiftKey?p=1:(t.preventDefault(),O=-1);break;case 40:t.shiftKey?p=-1:(t.preventDefault(),O=1);break;default:return}return this._rotationDisabled&&(l=0,p=0),{cameraAnimation:I=>{const A=this._tr;I.easeTo({duration:300,easeId:"keyboardHandler",easing:cc,zoom:o?Math.round(A.zoom)+o*(t.shiftKey?2:1):A.zoom,bearing:A.bearing+l*this._bearingStep,pitch:A.pitch+p*this._pitchStep,offset:[-w*this._panStep,-O*this._panStep],center:A.center},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function cc(g){return g*(2-g)}const Oh=4.000244140625,Yh=1/450;class Vd{constructor(t,o){this._onTimeout=l=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(l)},this._map=t,this._tr=new hr(t),this._triggerRenderFrame=o,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Yh}setZoomRate(t){this._defaultZoomRate=t}setWheelZoomRate(t){this._wheelZoomRate=t}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!t&&t.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(t){return!!this._map.cooperativeGestures.isEnabled()&&!(t.ctrlKey||this._map.cooperativeGestures.isBypassed(t))}wheel(t){if(!this.isEnabled())return;if(this._shouldBePrevented(t))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",t);let o=t.deltaMode===WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY;const l=it(),p=l-(this._lastWheelEventTime||0);this._lastWheelEventTime=l,o!==0&&o%Oh==0?this._type="wheel":o!==0&&Math.abs(o)<4?this._type="trackpad":p>400?(this._type=null,this._lastValue=o,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(p*o)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,o+=this._lastValue)),t.shiftKey&&o&&(o/=4),this._type&&(this._lastWheelEvent=t,this._delta-=o,this._active||this._start(t)),t.preventDefault()}_start(t){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const o=Te.mousePos(this._map.getCanvas(),t),l=this._tr;this._aroundPoint=this._aroundCenter?l.transform.locationToScreenPoint(c.V.convert(l.center)):o,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const t=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const I=t.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=I),typeof this._targetZoom=="number"&&(this._targetZoom+=I)}if(this._delta!==0){const I=this._type==="wheel"&&Math.abs(this._delta)>Oh?this._wheelZoomRate:this._defaultZoomRate;let A=2/(1+Math.exp(-Math.abs(this._delta*I)));this._delta<0&&A!==0&&(A=1/A);const C=typeof this._targetZoom!="number"?t.scale:c.aq(this._targetZoom);this._targetZoom=t.applyConstrain(t.getCameraLngLat(),c.at(C*A)).zoom,this._type==="wheel"&&(this._startZoom=t.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const o=typeof this._targetZoom!="number"?t.zoom:this._targetZoom,l=this._startZoom,p=this._easing;let w,O=!1;if(this._type==="wheel"&&l&&p){const I=it()-this._lastWheelEventTime,A=Math.min((I+5)/200,1),C=p(A);w=c.G.number(l,o,C),A<1?this._frameId||(this._frameId=!0):O=!0}else w=o,O=!0;return this._active=!0,O&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout}),200)),this._lastExpectedZoom=w,{noInertia:!0,needsRenderFrame:!O,zoomDelta:w-t.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(t){let o=c.cy;if(this._prevEase){const l=this._prevEase,p=(it()-l.start)/l.duration,w=l.easing(p+.01)-l.easing(p),O=.27/Math.sqrt(w*w+1e-4)*.01,I=Math.sqrt(.0729-O*O);o=c.cw(O,I,.25,1)}return this._prevEase={start:it(),duration:t,easing:o},o}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Ef{constructor(t,o){this._clickZoom=t,this._tapZoom=o}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class _l{constructor(t){this._tr=new hr(t),this.reset()}reset(){this._active=!1}dblclick(t,o){return t.preventDefault(),{cameraAnimation:l=>{l.easeTo({duration:300,zoom:this._tr.zoom+(t.shiftKey?-1:1),around:this._tr.unproject(o)},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Wd{constructor(){this._tap=new Fd({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(t,o,l){if(!this._swipePoint)if(this._tapTime){const p=o[0],w=t.timeStamp-this._tapTime<500,O=this._tapPoint.dist(p)<30;w&&O?l.length>0&&(this._swipePoint=p,this._swipeTouch=l[0].identifier):this.reset()}else this._tap.touchstart(t,o,l)}touchmove(t,o,l){if(this._tapTime){if(this._swipePoint){if(l[0].identifier!==this._swipeTouch)return;const p=o[0],w=p.y-this._swipePoint.y;return this._swipePoint=p,t.preventDefault(),this._active=!0,{zoomDelta:w/128}}}else this._tap.touchmove(t,o,l)}touchend(t,o,l){if(this._tapTime)this._swipePoint&&l.length===0&&this.reset();else{const p=this._tap.touchend(t,o,l);p&&(this._tapTime=t.timeStamp,this._tapPoint=p)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class pc{constructor(t,o,l){this._el=t,this._mousePan=o,this._touchPan=l}enable(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class mi{constructor(t,o,l,p){this._pitchWithRotate=t.pitchWithRotate,this._rollEnabled=t.rollEnabled,this._mouseRotate=o,this._mousePitch=l,this._mouseRoll=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Il{constructor(t,o,l,p){this._el=t,this._touchZoom=o,this._touchRotate=l,this._tapDragZoom=p,this._rotationDisabled=!1,this._enabled=!0}enable(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Gt{constructor(t,o){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=t,this._options=o,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const t=this._map.getCanvasContainer();t.classList.add("maplibregl-cooperative-gestures"),this._container=Te.create("div","maplibregl-cooperative-gesture-screen",t);let o=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(o=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const l=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),p=document.createElement("div");p.className="maplibregl-desktop-message",p.textContent=o,this._container.appendChild(p);const w=document.createElement("div");w.className="maplibregl-mobile-message",w.textContent=l,this._container.appendChild(w),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(Te.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(t){return t[this._bypassKey]}notifyGestureBlocked(t,o){this._enabled&&(this._map.fire(new c.l("cooperativegestureprevented",{gestureType:t,originalEvent:o})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const qt=g=>g.zoom||g.drag||g.roll||g.pitch||g.rotate;class Ri extends c.l{}function dd(g){return g.panDelta&&g.panDelta.mag()||g.zoomDelta||g.bearingDelta||g.pitchDelta||g.rollDelta}class Zd{constructor(t,o){this.handleWindowEvent=p=>{this.handleEvent(p,`${p.type}Window`)},this.handleEvent=(p,w)=>{if(p.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const O=p.type==="renderFrame"?void 0:p,I={needsRenderFrame:!1},A={},C={};for(const{handlerName:G,handler:Z,allowed:Q}of this._handlers){if(!Z.isEnabled())continue;let ie;if(this._blockedByActive(C,Q,G))Z.reset();else if(Z[w||p.type]){if(c.cz(p,w||p.type)){const de=Te.mousePos(this._map.getCanvas(),p);ie=Z[w||p.type](p,de)}else if(c.cA(p,w||p.type)){const de=this._getMapTouches(p.touches),le=Te.touchPos(this._map.getCanvas(),de);ie=Z[w||p.type](p,le,de)}else c.cB(w||p.type)||(ie=Z[w||p.type](p));this.mergeHandlerResult(I,A,ie,G,O),ie&&ie.needsRenderFrame&&this._triggerRenderFrame()}(ie||Z.isActive())&&(C[G]=Z)}const D={};for(const G in this._previousActiveHandlers)C[G]||(D[G]=O);this._previousActiveHandlers=C,(Object.keys(D).length||dd(I))&&(this._changes.push([I,A,D]),this._triggerRenderFrame()),(Object.keys(C).length||dd(I))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:F}=I;F&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],F(this._map))},this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Au(t),this._bearingSnap=o.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(o);const l=this._el;this._listeners=[[l,"touchstart",{passive:!0}],[l,"touchmove",{passive:!1}],[l,"touchend",void 0],[l,"touchcancel",void 0],[l,"mousedown",void 0],[l,"mousemove",void 0],[l,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[l,"mouseover",void 0],[l,"mouseout",void 0],[l,"dblclick",void 0],[l,"click",void 0],[l,"keydown",{capture:!1}],[l,"keyup",void 0],[l,"wheel",{passive:!1}],[l,"contextmenu",void 0],[window,"blur",void 0]];for(const[p,w,O]of this._listeners)Te.addEventListener(p,w,p===document?this.handleWindowEvent:this.handleEvent,O)}destroy(){for(const[t,o,l]of this._listeners)Te.removeEventListener(t,o,t===document?this.handleWindowEvent:this.handleEvent,l)}_addDefaultHandlers(t){const o=this._map,l=o.getCanvasContainer();this._add("mapEvent",new xf(o,t));const p=o.boxZoom=new Xh(o,t);this._add("boxZoom",p),t.interactive&&t.boxZoom&&p.enable();const w=o.cooperativeGestures=new Gt(o,t.cooperativeGestures);this._add("cooperativeGestures",w),t.cooperativeGestures&&w.enable();const O=new Tf(o),I=new _l(o);o.doubleClickZoom=new Ef(I,O),this._add("tapZoom",O),this._add("clickZoom",I),t.interactive&&t.doubleClickZoom&&o.doubleClickZoom.enable();const A=new Wd;this._add("tapDragZoom",A);const C=o.touchPitch=new vh(o);this._add("touchPitch",C),t.interactive&&t.touchPitch&&o.touchPitch.enable(t.touchPitch);const D=()=>o.project(o.getCenter()),F=(function({enable:ce,clickTolerance:ye,aroundCenter:ke=!0,minPixelCenterThreshold:me=100,rotateDegreesPerPixelMoved:Ee=.8},Ze){const Ge=new Fr({checkCorrectEvent:qe=>Te.mouseButton(qe)===0&&qe.ctrlKey||Te.mouseButton(qe)===2&&!qe.ctrlKey});return new Di({clickTolerance:ye,move:(qe,Ve)=>{const bt=Ze();if(ke&&Math.abs(bt.y-qe.y)>me)return{bearingDelta:c.cx(new c.P(qe.x,Ve.y),Ve,bt)};let vt=(Ve.x-qe.x)*Ee;return ke&&Ve.y<bt.y&&(vt=-vt),{bearingDelta:vt}},moveStateManager:Ge,enable:ce,assignEvents:jr})})(t,D),G=(function({enable:ce,clickTolerance:ye,pitchDegreesPerPixelMoved:ke=-.5}){const me=new Fr({checkCorrectEvent:Ee=>Te.mouseButton(Ee)===0&&Ee.ctrlKey||Te.mouseButton(Ee)===2});return new Di({clickTolerance:ye,move:(Ee,Ze)=>({pitchDelta:(Ze.y-Ee.y)*ke}),moveStateManager:me,enable:ce,assignEvents:jr})})(t),Z=(function({enable:ce,clickTolerance:ye,rollDegreesPerPixelMoved:ke=.3},me){const Ee=new Fr({checkCorrectEvent:Ze=>Te.mouseButton(Ze)===2&&Ze.ctrlKey});return new Di({clickTolerance:ye,move:(Ze,Ge)=>{const qe=me();let Ve=(Ge.x-Ze.x)*ke;return Ge.y<qe.y&&(Ve=-Ve),{rollDelta:Ve}},moveStateManager:Ee,enable:ce,assignEvents:jr})})(t,D);o.dragRotate=new mi(t,F,G,Z),this._add("mouseRotate",F,["mousePitch"]),this._add("mousePitch",G,["mouseRotate","mouseRoll"]),this._add("mouseRoll",Z,["mousePitch"]),t.interactive&&t.dragRotate&&o.dragRotate.enable();const Q=(function({enable:ce,clickTolerance:ye}){const ke=new Fr({checkCorrectEvent:me=>Te.mouseButton(me)===0&&!me.ctrlKey});return new Di({clickTolerance:ye,move:(me,Ee)=>({around:Ee,panDelta:Ee.sub(me)}),activateOnStart:!0,moveStateManager:ke,enable:ce,assignEvents:jr})})(t),ie=new Sf(t,o);o.dragPan=new pc(l,Q,ie),this._add("mousePan",Q),this._add("touchPan",ie,["touchZoom","touchRotate"]),t.interactive&&t.dragPan&&o.dragPan.enable(t.dragPan);const de=new qd,le=new qr;o.touchZoomRotate=new Il(l,le,de,A),this._add("touchRotate",de,["touchPan","touchZoom"]),this._add("touchZoom",le,["touchPan","touchRotate"]),t.interactive&&t.touchZoomRotate&&o.touchZoomRotate.enable(t.touchZoomRotate),this._add("blockableMapEvent",new fp(o));const pe=o.scrollZoom=new Vd(o,(()=>this._triggerRenderFrame()));this._add("scrollZoom",pe,["mousePan"]),t.interactive&&t.scrollZoom&&o.scrollZoom.enable(t.scrollZoom);const be=o.keyboard=new as(o);this._add("keyboard",be),t.interactive&&t.keyboard&&o.keyboard.enable()}_add(t,o,l){this._handlers.push({handlerName:t,handler:o,allowed:l}),this._handlersById[t]=o}stop(t){if(!this._updatingCamera){for(const{handler:o}of this._handlers)o.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}}isActive(){for(const{handler:t}of this._handlers)if(t.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!qt(this._eventsInProgress)||this.isZooming()}_blockedByActive(t,o,l){for(const p in t)if(p!==l&&(!o||o.indexOf(p)<0))return!0;return!1}_getMapTouches(t){const o=[];for(const l of t)this._el.contains(l.target)&&o.push(l);return o}mergeHandlerResult(t,o,l,p,w){if(!l)return;c.e(t,l);const O={handlerName:p,originalEvent:l.originalEvent||w};l.zoomDelta!==void 0&&(o.zoom=O),l.panDelta!==void 0&&(o.drag=O),l.rollDelta!==void 0&&(o.roll=O),l.pitchDelta!==void 0&&(o.pitch=O),l.bearingDelta!==void 0&&(o.rotate=O)}_applyChanges(){const t={},o={},l={};for(const[p,w,O]of this._changes)p.panDelta&&(t.panDelta=(t.panDelta||new c.P(0,0))._add(p.panDelta)),p.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+p.zoomDelta),p.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+p.bearingDelta),p.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+p.pitchDelta),p.rollDelta&&(t.rollDelta=(t.rollDelta||0)+p.rollDelta),p.around!==void 0&&(t.around=p.around),p.pinchAround!==void 0&&(t.pinchAround=p.pinchAround),p.noInertia&&(t.noInertia=p.noInertia),c.e(o,w),c.e(l,O);this._updateMapTransform(t,o,l),this._changes=[]}_updateMapTransform(t,o,l){const p=this._map,w=p._getTransformForUpdate(),O=p.terrain;if(!(dd(t)||O&&this._terrainMovement))return this._fireEvents(o,l,!0);p._stop(!0);let{panDelta:I,zoomDelta:A,bearingDelta:C,pitchDelta:D,rollDelta:F,around:G,pinchAround:Z}=t;Z!==void 0&&(G=Z),G=G||p.transform.centerPoint,O&&!w.isPointOnMapSurface(G)&&(G=w.centerPoint);const Q={panDelta:I,zoomDelta:A,rollDelta:F,pitchDelta:D,bearingDelta:C,around:G};this._map.cameraHelper.useGlobeControls&&!w.isPointOnMapSurface(G)&&(G=w.centerPoint);const ie=G.distSqr(w.centerPoint)<.01?w.center:w.screenPointToLocation(I?G.sub(I):G);this._handleMapControls({terrain:O,tr:w,deltasForHelper:Q,preZoomAroundLoc:ie,combinedEventsInProgress:o,panDelta:I}),p._applyUpdatedTransform(w),this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(o,l,!0)}_handleMapControls({terrain:t,tr:o,deltasForHelper:l,preZoomAroundLoc:p,combinedEventsInProgress:w,panDelta:O}){const I=this._map.cameraHelper;if(I.handleMapControlsRollPitchBearingZoom(l,o),t)return I.useGlobeControls?(this._terrainMovement||!w.drag&&!w.zoom||(this._terrainMovement=!0,this._map._elevationFreeze=!0),void I.handleMapControlsPan(l,o,p)):this._terrainMovement||!w.drag&&!w.zoom?void(w.drag&&this._terrainMovement&&O?o.setCenter(o.screenPointToLocation(o.centerPoint.sub(O))):I.handleMapControlsPan(l,o,p)):(this._terrainMovement=!0,this._map._elevationFreeze=!0,void I.handleMapControlsPan(l,o,p));I.handleMapControlsPan(l,o,p)}_fireEvents(t,o,l){const p=qt(this._eventsInProgress),w=qt(t),O={};for(const F in t){const{originalEvent:G}=t[F];this._eventsInProgress[F]||(O[`${F}start`]=G),this._eventsInProgress[F]=t[F]}!p&&w&&this._fireEvent("movestart",w.originalEvent);for(const F in O)this._fireEvent(F,O[F]);w&&this._fireEvent("move",w.originalEvent);for(const F in t){const{originalEvent:G}=t[F];this._fireEvent(F,G)}const I={};let A;for(const F in this._eventsInProgress){const{handlerName:G,originalEvent:Z}=this._eventsInProgress[F];this._handlersById[G].isActive()||(delete this._eventsInProgress[F],A=o[G]||Z,I[`${F}end`]=A)}for(const F in I)this._fireEvent(F,I[F]);const C=qt(this._eventsInProgress),D=(p||w)&&!C;if(D&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const F=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&F.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(F)}if(l&&D){this._updatingCamera=!0;const F=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),G=Z=>Z!==0&&-this._bearingSnap<Z&&Z<this._bearingSnap;!F||!F.essential&&ft.prefersReducedMotion?(this._map.fire(new c.l("moveend",{originalEvent:A})),G(this._map.getBearing())&&this._map.resetNorth()):(G(F.bearing||this._map.getBearing())&&(F.bearing=0),F.freezeElevation=!0,this._map.easeTo(F,{originalEvent:A})),this._updatingCamera=!1}}_fireEvent(t,o){this._map.fire(new c.l(t,o?{originalEvent:o}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((t=>{delete this._frameId,this.handleEvent(new Ri("renderFrame",{timeStamp:t})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class sn extends c.E{constructor(t,o,l){super(),this._renderFrameCallback=()=>{const p=Math.min((it()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(p)),p<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=l.bearingSnap,this.cameraHelper=o,this.on("moveend",(()=>{delete this._requestedCameraState}))}migrateProjection(t,o){t.apply(this.transform,!0),this.transform=t,this.cameraHelper=o}getCenter(){return new c.V(this.transform.center.lng,this.transform.center.lat)}setCenter(t,o){return this.jumpTo({center:t},o)}getCenterElevation(){return this.transform.elevation}setCenterElevation(t,o){return this.jumpTo({elevation:t},o),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(t){this._centerClampedToGround=t}panBy(t,o,l){return t=c.P.convert(t).mult(-1),this.panTo(this.transform.center,c.e({offset:t},o),l)}panTo(t,o,l){return this.easeTo(c.e({center:t},o),l)}getZoom(){return this.transform.zoom}setZoom(t,o){return this.jumpTo({zoom:t},o),this}zoomTo(t,o,l){return this.easeTo(c.e({zoom:t},o),l)}zoomIn(t,o){return this.zoomTo(this.getZoom()+1,t,o),this}zoomOut(t,o){return this.zoomTo(this.getZoom()-1,t,o),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(t,o){return t!=this.transform.fov&&(this.transform.setFov(t),this.fire(new c.l("movestart",o)).fire(new c.l("move",o)).fire(new c.l("moveend",o))),this}getBearing(){return this.transform.bearing}setBearing(t,o){return this.jumpTo({bearing:t},o),this}getPadding(){return this.transform.padding}setPadding(t,o){return this.jumpTo({padding:t},o),this}rotateTo(t,o,l){return this.easeTo(c.e({bearing:t},o),l)}resetNorth(t,o){return this.rotateTo(0,c.e({duration:1e3},t),o),this}resetNorthPitch(t,o){return this.easeTo(c.e({bearing:0,pitch:0,roll:0,duration:1e3},t),o),this}snapToNorth(t,o){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,o):this}getPitch(){return this.transform.pitch}setPitch(t,o){return this.jumpTo({pitch:t},o),this}getRoll(){return this.transform.roll}setRoll(t,o){return this.jumpTo({roll:t},o),this}cameraForBounds(t,o){t=vs.convert(t).adjustAntiMeridian();const l=o&&o.bearing||0;return this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),l,o)}_cameraForBoxAndBearing(t,o,l,p){const w={top:0,bottom:0,right:0,left:0};if(typeof(p=c.e({padding:w,offset:[0,0],maxZoom:this.transform.maxZoom},p)).padding=="number"){const C=p.padding;p.padding={top:C,bottom:C,right:C,left:C}}const O=c.e(w,p.padding);p.padding=O;const I=this.transform,A=new vs(t,o);return this.cameraHelper.cameraForBoxAndBearing(p,O,A,l,I)}fitBounds(t,o,l){return this._fitInternal(this.cameraForBounds(t,o),o,l)}fitScreenCoordinates(t,o,l,p,w){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(c.P.convert(t)),this.transform.screenPointToLocation(c.P.convert(o)),l,p),p,w)}_fitInternal(t,o,l){return t?(delete(o=c.e(t,o)).padding,o.linear?this.easeTo(o,l):this.flyTo(o,l)):this}jumpTo(t,o){this.stop();const l=this._getTransformForUpdate();let p=!1,w=!1,O=!1;const I=l.zoom;this.cameraHelper.handleJumpToCenterZoom(l,t);const A=l.zoom!==I;return"elevation"in t&&l.elevation!==+t.elevation&&l.setElevation(+t.elevation),"bearing"in t&&l.bearing!==+t.bearing&&(p=!0,l.setBearing(+t.bearing)),"pitch"in t&&l.pitch!==+t.pitch&&(w=!0,l.setPitch(+t.pitch)),"roll"in t&&l.roll!==+t.roll&&(O=!0,l.setRoll(+t.roll)),t.padding==null||l.isPaddingEqual(t.padding)||l.setPadding(t.padding),this._applyUpdatedTransform(l),this.fire(new c.l("movestart",o)).fire(new c.l("move",o)),A&&this.fire(new c.l("zoomstart",o)).fire(new c.l("zoom",o)).fire(new c.l("zoomend",o)),p&&this.fire(new c.l("rotatestart",o)).fire(new c.l("rotate",o)).fire(new c.l("rotateend",o)),w&&this.fire(new c.l("pitchstart",o)).fire(new c.l("pitch",o)).fire(new c.l("pitchend",o)),O&&this.fire(new c.l("rollstart",o)).fire(new c.l("roll",o)).fire(new c.l("rollend",o)),this.fire(new c.l("moveend",o))}calculateCameraOptionsFromTo(t,o,l,p=0){const w=c.a9.fromLngLat(t,o),O=c.a9.fromLngLat(l,p),I=O.x-w.x,A=O.y-w.y,C=O.z-w.z,D=Math.hypot(I,A,C);if(D===0)throw new Error("Can't calculate camera options with same From and To");const F=Math.hypot(I,A),G=c.at(this.transform.cameraToCenterDistance/D/this.transform.tileSize),Z=180*Math.atan2(I,-A)/Math.PI;let Q=180*Math.acos(F/D)/Math.PI;return Q=C<0?90-Q:90+Q,{center:O.toLngLat(),elevation:p,zoom:G,pitch:Q,bearing:Z}}calculateCameraOptionsFromCameraLngLatAltRotation(t,o,l,p,w){const O=this.transform.calculateCenterFromCameraLngLatAlt(t,o,l,p);return{center:O.center,elevation:O.elevation,zoom:O.zoom,bearing:l,pitch:p,roll:w}}easeTo(t,o){this._stop(!1,t.easeId),((t=c.e({offset:[0,0],duration:500,easing:c.cy},t)).animate===!1||!t.essential&&ft.prefersReducedMotion)&&(t.duration=0);const l=this._getTransformForUpdate(),p=this.getBearing(),w=l.pitch,O=l.roll,I="bearing"in t?this._normalizeBearing(t.bearing,p):p,A="pitch"in t?+t.pitch:w,C="roll"in t?this._normalizeBearing(t.roll,O):O,D="padding"in t?t.padding:l.padding,F=c.P.convert(t.offset);let G,Z;t.around&&(G=c.V.convert(t.around),Z=l.locationToScreenPoint(G));const Q={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},ie=this.cameraHelper.handleEaseTo(l,{bearing:I,pitch:A,roll:C,padding:D,around:G,aroundPoint:Z,offsetAsPoint:F,offset:t.offset,zoom:t.zoom,center:t.center});return this._rotating=this._rotating||p!==I,this._pitching=this._pitching||A!==w,this._rolling=this._rolling||C!==O,this._padding=!l.isPaddingEqual(D),this._zooming=this._zooming||ie.isZooming,this._easeId=t.easeId,this._prepareEase(o,t.noMoveStart,Q),this.terrain&&this._prepareElevation(ie.elevationCenter),this._ease((de=>{ie.easeFunc(de),this.terrain&&!t.freezeElevation&&this._updateElevation(de),this._applyUpdatedTransform(l),this._fireMoveEvents(o)}),(de=>{this.terrain&&t.freezeElevation&&this._finalizeElevation(),this._afterEase(o,de)}),t),this}_prepareEase(t,o,l={}){this._moving=!0,o||l.moving||this.fire(new c.l("movestart",t)),this._zooming&&!l.zooming&&this.fire(new c.l("zoomstart",t)),this._rotating&&!l.rotating&&this.fire(new c.l("rotatestart",t)),this._pitching&&!l.pitching&&this.fire(new c.l("pitchstart",t)),this._rolling&&!l.rolling&&this.fire(new c.l("rollstart",t))}_prepareElevation(t){this._elevationCenter=t,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(t,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(t){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const o=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(t<1&&o!==this._elevationTarget){const l=this._elevationTarget-this._elevationStart;this._elevationStart+=t*(l-(o-(l*t+this._elevationStart))/(1-t)),this._elevationTarget=o}this.transform.setElevation(c.G.number(this._elevationStart,this._elevationTarget,t))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(t){if(!this.terrain&&t.elevation>=0&&t.pitch<=90)return{};const o=t.getCameraLngLat(),l=t.getCameraAltitude(),p=this.terrain?this.terrain.getElevationForLngLatZoom(o,t.zoom):0;if(l<p){const w=this.calculateCameraOptionsFromTo(o,p,t.center,t.elevation);return{pitch:w.pitch,zoom:w.zoom}}return{}}_applyUpdatedTransform(t){const o=[];if(o.push((p=>this._elevateCameraIfInsideTerrain(p))),this.transformCameraUpdate&&o.push((p=>this.transformCameraUpdate(p))),!o.length)return;const l=t.clone();for(const p of o){const w=l.clone(),{center:O,zoom:I,roll:A,pitch:C,bearing:D,elevation:F}=p(w);O&&w.setCenter(O),F!==void 0&&w.setElevation(F),I!==void 0&&w.setZoom(I),A!==void 0&&w.setRoll(A),C!==void 0&&w.setPitch(C),D!==void 0&&w.setBearing(D),l.apply(w,!1)}this.transform.apply(l,!1)}_fireMoveEvents(t){this.fire(new c.l("move",t)),this._zooming&&this.fire(new c.l("zoom",t)),this._rotating&&this.fire(new c.l("rotate",t)),this._pitching&&this.fire(new c.l("pitch",t)),this._rolling&&this.fire(new c.l("roll",t))}_afterEase(t,o){if(this._easeId&&o&&this._easeId===o)return;delete this._easeId;const l=this._zooming,p=this._rotating,w=this._pitching,O=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,l&&this.fire(new c.l("zoomend",t)),p&&this.fire(new c.l("rotateend",t)),w&&this.fire(new c.l("pitchend",t)),O&&this.fire(new c.l("rollend",t)),this.fire(new c.l("moveend",t))}flyTo(t,o){if(!t.essential&&ft.prefersReducedMotion){const Ve=c.U(t,["center","zoom","bearing","pitch","roll","elevation","padding"]);return this.jumpTo(Ve,o)}this.stop(),t=c.e({offset:[0,0],speed:1.2,curve:1.42,easing:c.cy},t);const l=this._getTransformForUpdate(),p=l.bearing,w=l.pitch,O=l.roll,I=l.padding,A="bearing"in t?this._normalizeBearing(t.bearing,p):p,C="pitch"in t?+t.pitch:w,D="roll"in t?this._normalizeBearing(t.roll,O):O,F="padding"in t?t.padding:l.padding,G=c.P.convert(t.offset);let Z=l.centerPoint.add(G);const Q=l.screenPointToLocation(Z),ie=this.cameraHelper.handleFlyTo(l,{bearing:A,pitch:C,roll:D,padding:F,locationAtOffset:Q,offsetAsPoint:G,center:t.center,minZoom:t.minZoom,zoom:t.zoom});let de=t.curve;const le=Math.max(l.width,l.height),pe=le/ie.scaleOfZoom,be=ie.pixelPathLength;typeof ie.scaleOfMinZoom=="number"&&(de=Math.sqrt(le/ie.scaleOfMinZoom/be*2));const ce=de*de;function ye(Ve){const bt=(pe*pe-le*le+(Ve?-1:1)*ce*ce*be*be)/(2*(Ve?pe:le)*ce*be);return Math.log(Math.sqrt(bt*bt+1)-bt)}function ke(Ve){return(Math.exp(Ve)-Math.exp(-Ve))/2}function me(Ve){return(Math.exp(Ve)+Math.exp(-Ve))/2}const Ee=ye(!1);let Ze=function(Ve){return me(Ee)/me(Ee+de*Ve)},Ge=function(Ve){return le*((me(Ee)*(ke(bt=Ee+de*Ve)/me(bt))-ke(Ee))/ce)/be;var bt},qe=(ye(!0)-Ee)/de;if(Math.abs(be)<2e-6||!isFinite(qe)){if(Math.abs(le-pe)<1e-6)return this.easeTo(t,o);const Ve=pe<le?-1:1;qe=Math.abs(Math.log(pe/le))/de,Ge=()=>0,Ze=bt=>Math.exp(Ve*de*bt)}return t.duration="duration"in t?+t.duration:1e3*qe/("screenSpeed"in t?+t.screenSpeed/de:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=p!==A,this._pitching=C!==w,this._rolling=D!==O,this._padding=!l.isPaddingEqual(F),this._prepareEase(o,!1),this.terrain&&this._prepareElevation(ie.targetCenter),this._ease((Ve=>{const bt=Ve*qe,vt=1/Ze(bt),ht=Ge(bt);this._rotating&&l.setBearing(c.G.number(p,A,Ve)),this._pitching&&l.setPitch(c.G.number(w,C,Ve)),this._rolling&&l.setRoll(c.G.number(O,D,Ve)),this._padding&&(l.interpolatePadding(I,F,Ve),Z=l.centerPoint.add(G)),ie.easeFunc(Ve,vt,ht,Z),this.terrain&&!t.freezeElevation&&this._updateElevation(Ve),this._applyUpdatedTransform(l),this._fireMoveEvents(o)}),(()=>{this.terrain&&t.freezeElevation&&this._finalizeElevation(),this._afterEase(o)}),t),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(t,o){var l;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const p=this._onEaseEnd;delete this._onEaseEnd,p.call(this,o)}return t||(l=this.handlers)===null||l===void 0||l.stop(!1),this}_ease(t,o,l){l.animate===!1||l.duration===0?(t(1),o()):(this._easeStart=it(),this._easeOptions=l,this._onEaseFrame=t,this._onEaseEnd=o,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(t,o){t=c.W(t,-180,180);const l=Math.abs(t-o);return Math.abs(t-360-o)<l&&(t-=360),Math.abs(t+360-o)<l&&(t+=360),t}queryTerrainElevation(t){return this.terrain?this.terrain.getElevationForLngLat(c.V.convert(t),this.transform):null}}const Us={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class $s{constructor(t=Us){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=o=>{!o||o.sourceDataType!=="metadata"&&o.sourceDataType!=="visibility"&&o.dataType!=="style"&&o.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=t}getDefaultPosition(){return"bottom-right"}onAdd(t){return this._map=t,this._compact=this.options.compact,this._container=Te.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=Te.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=Te.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){Te.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(t,o){const l=this._map._getUIString(`AttributionControl.${o}`);t.title=l,t.setAttribute("aria-label",l)}_updateAttributions(){if(!this._map.style)return;let t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map((p=>typeof p!="string"?"":p))):typeof this.options.customAttribution=="string"&&t.push(this.options.customAttribution)),this._map.style.stylesheet){const p=this._map.style.stylesheet;this.styleOwner=p.owner,this.styleId=p.id}const o=this._map.style.tileManagers;for(const p in o){const w=o[p];if(w.used||w.usedForTerrain){const O=w.getSource();O.attribution&&t.indexOf(O.attribution)<0&&t.push(O.attribution)}}t=t.filter((p=>String(p).trim())),t.sort(((p,w)=>p.length-w.length)),t=t.filter(((p,w)=>{for(let O=w+1;O<t.length;O++)if(t[O].indexOf(p)>=0)return!1;return!0}));const l=t.join(" | ");l!==this._attribHTML&&(this._attribHTML=l,t.length?(this._innerContainer.innerHTML=Te.sanitize(l),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Xd{constructor(t={}){this._updateCompact=()=>{const o=this._container.children;if(o.length){const l=o[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&l.classList.add("maplibregl-compact"):l.classList.remove("maplibregl-compact")}},this.options=t}getDefaultPosition(){return"bottom-left"}onAdd(t){this._map=t,this._compact=this.options&&this.options.compact,this._container=Te.create("div","maplibregl-ctrl");const o=Te.create("a","maplibregl-ctrl-logo");return o.target="_blank",o.rel="noopener nofollow",o.href="https://maplibre.org/",o.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),o.setAttribute("rel","noopener nofollow"),this._container.appendChild(o),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){Te.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class kh{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(t){const o=++this._id;return this._queue.push({callback:t,id:o,cancelled:!1}),o}remove(t){const o=this._currentlyRunning,l=o?this._queue.concat(o):this._queue;for(const p of l)if(p.id===t)return void(p.cancelled=!0)}run(t=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const o=this._currentlyRunning=this._queue;this._queue=[];for(const l of o)if(!l.cancelled&&(l.callback(t),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var _a=c.aU([{name:"a_pos3d",type:"Int16",components:3}]);class Qa extends c.E{constructor(t){super(),this._lastTilesetChange=it(),this.tileManager=t,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=t._source.tileSize*Ug(2,this.deltaZoom),t.usedForTerrain=!0,t.tileSize=this.tileSize}destruct(){this.tileManager.usedForTerrain=!1,this.tileManager.tileSize=null}getSource(){return this.tileManager._source}update(t,o){this.tileManager.update(t,o),this._renderableTilesKeys=[];const l={};for(const p of Ls(t,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:o,calculateTileZoom:this.tileManager._source.calculateTileZoom}))l[p.key]=!0,this._renderableTilesKeys.push(p.key),this._tiles[p.key]||(p.terrainRttPosMatrix32f=new Float64Array(16),c.c7(p.terrainRttPosMatrix32f,0,c.a5,c.a5,0,0,1),this._tiles[p.key]=new nt(p,this.tileSize),this._lastTilesetChange=it());for(const p in this._tiles)l[p]||delete this._tiles[p]}freeRtt(t){for(const o in this._tiles){const l=this._tiles[o];(!t||l.tileID.equals(t)||l.tileID.isChildOf(t)||t.isChildOf(l.tileID))&&(l.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((t=>this.getTileByID(t)))}getTileByID(t){return this._tiles[t]}getTerrainCoords(t,o){return o?this._getTerrainCoordsForTileRanges(t,o):this._getTerrainCoordsForRegularTile(t)}_getTerrainCoordsForRegularTile(t){const o={};for(const l of this._renderableTilesKeys){const p=this._tiles[l].tileID,w=t.clone(),O=c.bk();if(p.canonical.equals(t.canonical))c.c7(O,0,c.a5,c.a5,0,0,1);else if(p.canonical.isChildOf(t.canonical)){const I=p.canonical.z-t.canonical.z,A=p.canonical.x-(p.canonical.x>>I<<I),C=p.canonical.y-(p.canonical.y>>I<<I),D=c.a5>>I;c.c7(O,0,D,D,0,0,1),c.O(O,O,[-A*D,-C*D,0])}else{if(!t.canonical.isChildOf(p.canonical))continue;{const I=t.canonical.z-p.canonical.z,A=t.canonical.x-(t.canonical.x>>I<<I),C=t.canonical.y-(t.canonical.y>>I<<I),D=c.a5>>I;c.c7(O,0,c.a5,c.a5,0,0,1),c.O(O,O,[A*D,C*D,0]),c.Q(O,O,[1/Ug(2,I),1/Ug(2,I),0])}}w.terrainRttPosMatrix32f=new Float32Array(O),o[l]=w}return o}_getTerrainCoordsForTileRanges(t,o){const l={};for(const p of this._renderableTilesKeys){const w=this._tiles[p].tileID;if(!this._isWithinTileRanges(w,o))continue;const O=t.clone(),I=c.bk();if(w.canonical.z===t.canonical.z){const A=t.canonical.x-w.canonical.x+t.wrap*(1<<t.canonical.z),C=t.canonical.y-w.canonical.y;c.c7(I,0,c.a5,c.a5,0,0,1),c.O(I,I,[A*c.a5,C*c.a5,0])}else if(w.canonical.z>t.canonical.z){const A=w.canonical.z-t.canonical.z,C=w.canonical.x-(w.canonical.x>>A<<A)+t.wrap*(1<<w.canonical.z),D=w.canonical.y-(w.canonical.y>>A<<A),F=t.canonical.x-(w.canonical.x>>A),G=t.canonical.y-(w.canonical.y>>A),Z=c.a5>>A;c.c7(I,0,Z,Z,0,0,1),c.O(I,I,[-C*Z+F*c.a5,-D*Z+G*c.a5,0])}else{const A=t.canonical.z-w.canonical.z,C=t.canonical.x-(t.canonical.x>>A<<A)+t.wrap*(1<<t.canonical.z),D=t.canonical.y-(t.canonical.y>>A<<A),F=(t.canonical.x>>A)-w.canonical.x,G=(t.canonical.y>>A)-w.canonical.y,Z=c.a5<<A;c.c7(I,0,Z,Z,0,0,1),c.O(I,I,[C*c.a5+F*Z,D*c.a5+G*Z,0])}O.terrainRttPosMatrix32f=new Float32Array(I),l[p]=O}return l}getSourceTile(t,o){const l=this.tileManager._source;let p=t.overscaledZ-this.deltaZoom;if(p>l.maxzoom&&(p=l.maxzoom),p<l.minzoom)return;this._sourceTileCache[t.key]||(this._sourceTileCache[t.key]=t.scaledTo(p).key);let w=this.findTileInCaches(this._sourceTileCache[t.key]);if(!(w!=null&&w.dem)&&o)for(;p>=l.minzoom&&!(w!=null&&w.dem);)w=this.findTileInCaches(t.scaledTo(p--).key);return w}findTileInCaches(t){let o=this.tileManager.getTileByID(t);return o||(o=this.tileManager._outOfViewCache.getByKey(t),o)}anyTilesAfterTime(t=Date.now()){return this._lastTilesetChange>=t}_isWithinTileRanges(t,o){const l=o[t.canonical.z];return!!l&&(t.wrap>l.minWrap||t.wrap<l.maxWrap||t.canonical.x>=l.minTileXWrapped&&t.canonical.x<=l.maxTileXWrapped&&t.canonical.y>=l.minTileY&&t.canonical.y<=l.maxTileY)}}class va{constructor(t,o,l){this._meshCache={},this.painter=t,this.tileManager=new Qa(o),this.options=l,this.exaggeration=typeof l.exaggeration=="number"?l.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(t,o,l,p=c.a5){var w;if(!(o>=0&&o<p&&l>=0&&l<p))return 0;const O=this.getTerrainData(t),I=(w=O.tile)===null||w===void 0?void 0:w.dem;if(!I)return 0;const A=c.cC([],[o/p*c.a5,l/p*c.a5],O.u_terrain_matrix),C=[A[0]*I.dim,A[1]*I.dim],D=Math.floor(C[0]),F=Math.floor(C[1]),G=C[0]-D,Z=C[1]-F;return I.get(D,F)*(1-G)*(1-Z)+I.get(D+1,F)*G*(1-Z)+I.get(D,F+1)*(1-G)*Z+I.get(D+1,F+1)*G*Z}getElevationForLngLatZoom(t,o){if(!c.cD(o,t.wrap()))return 0;const{tileID:l,mercatorX:p,mercatorY:w}=this._getOverscaledTileIDFromLngLatZoom(t,o);return this.getElevation(l,p%c.a5,w%c.a5,c.a5)}getElevationForLngLat(t,o){const l=Ls(o,{maxzoom:this.tileManager.maxzoom,minzoom:this.tileManager.minzoom,tileSize:512,terrain:this});let p=0;for(const w of l)w.canonical.z>p&&(p=Math.min(w.canonical.z,this.tileManager.maxzoom));return this.getElevationForLngLatZoom(t,p)}getElevation(t,o,l,p=c.a5){return this.getDEMElevation(t,o,l,p)*this.exaggeration}getTerrainData(t){if(!this._emptyDemTexture){const p=this.painter.context,w=new c.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new c.T(p,w,p.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new c.T(p,new c.R({width:1,height:1}),p.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(p.gl.NEAREST,p.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=c.ar([])}const o=this.tileManager.getSourceTile(t,!0);if(o&&o.dem&&(!o.demTexture||o.needsTerrainPrepare)){const p=this.painter.context;o.demTexture=this.painter.getTileTexture(o.dem.stride),o.demTexture?o.demTexture.update(o.dem.getPixels(),{premultiply:!1}):o.demTexture=new c.T(p,o.dem.getPixels(),p.gl.RGBA,{premultiply:!1}),o.demTexture.bind(p.gl.NEAREST,p.gl.CLAMP_TO_EDGE),o.needsTerrainPrepare=!1}const l=o&&o.toString()+o.tileID.key+t.key;if(l&&!this._demMatrixCache[l]){const p=this.tileManager.getSource().maxzoom;let w=t.canonical.z-o.tileID.canonical.z;t.overscaledZ>t.canonical.z&&(t.canonical.z>=p?w=t.canonical.z-p:c.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const O=t.canonical.x-(t.canonical.x>>w<<w),I=t.canonical.y-(t.canonical.y>>w<<w),A=c.cE(new Float64Array(16),[1/(c.a5<<w),1/(c.a5<<w),0]);c.O(A,A,[O*c.a5,I*c.a5,0]),this._demMatrixCache[t.key]={matrix:A,coord:t}}return{u_depth:2,u_terrain:3,u_terrain_dim:o&&o.dem&&o.dem.dim||1,u_terrain_matrix:l?this._demMatrixCache[t.key].matrix:this._emptyDemMatrix,u_terrain_unpack:o&&o.dem&&o.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(o&&o.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:o}}getFramebuffer(t){const o=this.painter,l=o.width/devicePixelRatio,p=o.height/devicePixelRatio;return!this._fbo||this._fbo.width===l&&this._fbo.height===p||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new c.T(o.context,{width:l,height:p,data:null},o.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(o.context.gl.NEAREST,o.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new c.T(o.context,{width:l,height:p,data:null},o.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(o.context.gl.NEAREST,o.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=o.context.createFramebuffer(l,p,!0,!1),this._fbo.depthAttachment.set(o.context.createRenderbuffer(o.context.gl.DEPTH_COMPONENT16,l,p))),this._fbo.colorAttachment.set(t==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const t=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const o=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let w=0,O=0;w<this._coordsTextureSize;w++)for(let I=0;I<this._coordsTextureSize;I++,O+=4)o[O+0]=255&I,o[O+1]=255&w,o[O+2]=I>>8<<4|w>>8,o[O+3]=0;const l=new c.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(o.buffer)),p=new c.T(t,l,t.gl.RGBA,{premultiply:!1});return p.bind(t.gl.NEAREST,t.gl.CLAMP_TO_EDGE),this._coordsTexture=p,p}pointCoordinate(t){this.painter.maybeDrawDepthAndCoords(!0);const o=new Uint8Array(4),l=this.painter.context,p=l.gl,w=Math.round(t.x*this.painter.pixelRatio/devicePixelRatio),O=Math.round(t.y*this.painter.pixelRatio/devicePixelRatio),I=Math.round(this.painter.height/devicePixelRatio);l.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),p.readPixels(w,I-O-1,1,1,p.RGBA,p.UNSIGNED_BYTE,o),l.bindFramebuffer.set(null);const A=o[0]+(o[2]>>4<<8),C=o[1]+((15&o[2])<<8),D=this.coordsIndex[255-o[3]],F=D&&this.tileManager.getTileByID(D);if(!F)return null;const G=this._coordsTextureSize,Z=(1<<F.tileID.canonical.z)*G;return new c.a9((F.tileID.canonical.x*G+A)/Z+F.tileID.wrap,(F.tileID.canonical.y*G+C)/Z,this.getElevation(F.tileID,A,C,G))}depthAtPoint(t){const o=new Uint8Array(4),l=this.painter.context,p=l.gl;return l.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),p.readPixels(t.x,this.painter.height/devicePixelRatio-t.y-1,1,1,p.RGBA,p.UNSIGNED_BYTE,o),l.bindFramebuffer.set(null),(o[0]/16777216+o[1]/65536+o[2]/256+o[3])/256}getTerrainMesh(t){var o;const l=((o=this.painter.style.projection)===null||o===void 0?void 0:o.transitionState)>0,p=l&&t.canonical.y===0,w=l&&t.canonical.y===(1<<t.canonical.z)-1,O=`m_${p?"n":""}_${w?"s":""}`;if(this._meshCache[O])return this._meshCache[O];const I=this.painter.context,A=new c.cF,C=new c.aY,D=this.meshSize,F=c.a5/D,G=D*D;for(let me=0;me<=D;me++)for(let Ee=0;Ee<=D;Ee++)A.emplaceBack(Ee*F,me*F,0);for(let me=0;me<G;me+=D+1)for(let Ee=0;Ee<D;Ee++)C.emplaceBack(Ee+me,D+Ee+me+1,D+Ee+me+2),C.emplaceBack(Ee+me,D+Ee+me+2,Ee+me+1);const Z=A.length,Q=Z+(D+1),ie=(D+1)*D,de=p?c.br:0,le=p?0:1,pe=w?c.bs:c.a5,be=w?0:1;for(let me=0;me<=D;me++)A.emplaceBack(me*F,de,le);for(let me=0;me<=D;me++)A.emplaceBack(me*F,pe,be);for(let me=0;me<D;me++)C.emplaceBack(ie+me,Q+me,Q+me+1),C.emplaceBack(ie+me,Q+me+1,ie+me+1),C.emplaceBack(0+me,Z+me+1,Z+me),C.emplaceBack(0+me,0+me+1,Z+me+1);const ce=A.length,ye=ce+2*(D+1);for(const me of[0,1])for(let Ee=0;Ee<=D;Ee++)for(const Ze of[0,1])A.emplaceBack(me*c.a5,Ee*F,Ze);for(let me=0;me<2*D;me+=2)C.emplaceBack(ce+me,ce+me+1,ce+me+3),C.emplaceBack(ce+me,ce+me+3,ce+me+2),C.emplaceBack(ye+me,ye+me+3,ye+me+1),C.emplaceBack(ye+me,ye+me+2,ye+me+3);const ke=new $a(I.createVertexBuffer(A,_a.members),I.createIndexBuffer(C),c.aX.simpleSegment(0,0,A.length,C.length));return this._meshCache[O]=ke,ke}getMeshFrameDelta(t){return 2*Math.PI*c.bE/Math.pow(2,Math.max(t,0))/5}getMinTileElevationForLngLatZoom(t,o){var l;if(!c.cD(o,t.wrap()))return 0;const{tileID:p}=this._getOverscaledTileIDFromLngLatZoom(t,o);return(l=this.getMinMaxElevation(p).minElevation)!==null&&l!==void 0?l:0}getMinMaxElevation(t){const o=this.getTerrainData(t).tile,l={minElevation:null,maxElevation:null};return o&&o.dem&&(l.minElevation=o.dem.min*this.exaggeration,l.maxElevation=o.dem.max*this.exaggeration),l}_getOverscaledTileIDFromLngLatZoom(t,o){const l=c.a9.fromLngLat(t.wrap()),p=(1<<o)*c.a5,w=l.x*p,O=l.y*p,I=Math.floor(w/c.a5),A=Math.floor(O/c.a5);return{tileID:new c.a2(o,0,o,I,A),mercatorX:w,mercatorY:O}}}class Hs{constructor(t,o,l){this._context=t,this._size=o,this._tileSize=l,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const t of this._objects)t.texture.destroy(),t.fbo.destroy()}_createObject(t){const o=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),l=new c.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return l.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),o.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),o.colorAttachment.set(l.texture),{id:t,fbo:o,texture:l,stamp:-1,inUse:!1}}getObjectForId(t){return this._objects[t]}useObject(t){t.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((o=>t.id!==o)),this._recentlyUsed.push(t.id)}stampObject(t){t.stamp=++this._stamp}getOrCreateFreeObject(){for(const o of this._recentlyUsed)if(!this._objects[o].inUse)return this._objects[o];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const t=this._createObject(this._objects.length);return this._objects.push(t),t}freeObject(t){t.inUse=!1}freeAllObjects(){for(const t of this._objects)this.freeObject(t)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((t=>!t.inUse))===!1}}const Hi={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class dr{constructor(t,o){this.painter=t,this.terrain=o,this.pool=new Hs(t.context,30,o.tileManager.tileSize*o.qualityFactor)}destruct(){this.pool.destruct()}getTexture(t){return this.pool.getObjectForId(t.rtt[this._stacks.length-1].id).texture}prepareForRender(t,o){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.tileManager.getRenderableTiles(),this._renderableLayerIds=t._order.filter((l=>!t._layers[l].isHidden(o))),this._coordsAscending={};for(const l in t.tileManagers){this._coordsAscending[l]={};const p=t.tileManagers[l].getVisibleCoordinates(),w=t.tileManagers[l].getSource(),O=w instanceof ro?w.terrainTileRanges:null;for(const I of p){const A=this.terrain.tileManager.getTerrainCoords(I,O);for(const C in A)this._coordsAscending[l][C]||(this._coordsAscending[l][C]=[]),this._coordsAscending[l][C].push(A[C])}}this._coordsAscendingStr={};for(const l of t._order){const p=t._layers[l],w=p.source;if(Hi[p.type]&&!this._coordsAscendingStr[w]){this._coordsAscendingStr[w]={};for(const O in this._coordsAscending[w])this._coordsAscendingStr[w][O]=this._coordsAscending[w][O].map((I=>I.key)).sort().join()}}for(const l of this._renderableTiles)for(const p in this._coordsAscendingStr){const w=this._coordsAscendingStr[p][l.tileID.key];w&&w!==l.rttCoords[p]&&(l.rtt=[])}}renderLayer(t,o){if(t.isHidden(this.painter.transform.zoom))return!1;const l=Object.assign(Object.assign({},o),{isRenderingToTexture:!0}),p=t.type,w=this.painter,O=this._renderableLayerIds[this._renderableLayerIds.length-1]===t.id;if(Hi[p]&&(this._prevType&&Hi[this._prevType]||this._stacks.push([]),this._prevType=p,this._stacks[this._stacks.length-1].push(t.id),!O))return!0;if(Hi[this._prevType]||Hi[p]&&O){this._prevType=p;const I=this._stacks.length-1,A=this._stacks[I]||[];for(const C of this._renderableTiles){if(this.pool.isFull()&&(_f(this.painter,this.terrain,this._rttTiles,l),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(C),C.rtt[I]){const F=this.pool.getObjectForId(C.rtt[I].id);if(F.stamp===C.rtt[I].stamp){this.pool.useObject(F);continue}}const D=this.pool.getOrCreateFreeObject();this.pool.useObject(D),this.pool.stampObject(D),C.rtt[I]={id:D.id,stamp:D.stamp},w.context.bindFramebuffer.set(D.fbo.framebuffer),w.context.clear({color:c.bp.transparent,stencil:0}),w.currentStencilSource=void 0;for(let F=0;F<A.length;F++){const G=w.style._layers[A[F]],Z=G.source?this._coordsAscending[G.source][C.tileID.key]:[C.tileID];w.context.viewport.set([0,0,D.fbo.width,D.fbo.height]),w._renderTileClippingMasks(G,Z,!0),w.renderLayer(w,w.style.tileManagers[G.source],G,Z,l),G.source&&(C.rttCoords[G.source]=this._coordsAscendingStr[G.source][C.tileID.key])}}return _f(this.painter,this.terrain,this._rttTiles,l),this._rttTiles=[],this.pool.freeAllObjects(),Hi[p]}return!1}}const xl={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Tl=re,_h={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Us,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:c.c.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,transformConstrain:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,reduceMotion:void 0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0,experimentalZoomLevelsToOverscale:void 0},uc={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class Es{constructor(t,o,l=!1){this.mousedown=w=>{this.startMove(w,Te.mousePos(this.element,w)),Te.addEventListener(window,"mousemove",this.mousemove),Te.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=w=>{this.move(w,Te.mousePos(this.element,w))},this.mouseup=w=>{this._rotatePitchHandler.dragEnd(w),this.offTemp()},this.touchstart=w=>{w.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=Te.touchPos(this.element,w.targetTouches)[0],this.startMove(w,this._startPos),Te.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),Te.addEventListener(window,"touchend",this.touchend))},this.touchmove=w=>{w.targetTouches.length!==1?this.reset():(this._lastPos=Te.touchPos(this.element,w.targetTouches)[0],this.move(w,this._lastPos))},this.touchend=w=>{w.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=o;const p=new jd;this._rotatePitchHandler=new Di({clickTolerance:3,move:(w,O)=>{const I=o.getBoundingClientRect(),A=new c.P((I.bottom-I.top)/2,(I.right-I.left)/2);return{bearingDelta:c.cx(new c.P(w.x,O.y),O,A),pitchDelta:l?-.5*(O.y-w.y):void 0}},moveStateManager:p,enable:!0,assignEvents:()=>{}}),this.map=t,Te.addEventListener(o,"mousedown",this.mousedown),Te.addEventListener(o,"touchstart",this.touchstart,{passive:!1}),Te.addEventListener(o,"touchcancel",this.reset)}startMove(t,o){this._rotatePitchHandler.dragStart(t,o),Te.disableDrag()}move(t,o){const l=this.map,{bearingDelta:p,pitchDelta:w}=this._rotatePitchHandler.dragMove(t,o)||{};p&&l.setBearing(l.getBearing()+p),w&&l.setPitch(l.getPitch()+w)}off(){const t=this.element;Te.removeEventListener(t,"mousedown",this.mousedown),Te.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),Te.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),Te.removeEventListener(window,"touchend",this.touchend),Te.removeEventListener(t,"touchcancel",this.reset),this.offTemp()}offTemp(){Te.enableDrag(),Te.removeEventListener(window,"mousemove",this.mousemove),Te.removeEventListener(window,"mouseup",this.mouseup),Te.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),Te.removeEventListener(window,"touchend",this.touchend)}}let fr;function fd(g,t,o,l=!1){if(l||!o.getCoveringTilesDetailsProvider().allowWorldCopies())return g==null?void 0:g.wrap();const p=new c.V(g.lng,g.lat);if(g=new c.V(g.lng,g.lat),t){const w=new c.V(g.lng-360,g.lat),O=new c.V(g.lng+360,g.lat),I=o.locationToScreenPoint(g).distSqr(t);o.locationToScreenPoint(w).distSqr(t)<I?g=w:o.locationToScreenPoint(O).distSqr(t)<I&&(g=O)}for(;Math.abs(g.lng-o.center.lng)>180;){const w=o.locationToScreenPoint(g);if(w.x>=0&&w.y>=0&&w.x<=o.width&&w.y<=o.height)break;g.lng>o.center.lng?g.lng-=360:g.lng+=360}return g.lng!==p.lng&&o.isPointOnMapSurface(o.locationToScreenPoint(g))?g:p}const cd={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Yd(g,t,o){const l=g.classList;for(const p in cd)l.remove(`maplibregl-${o}-anchor-${p}`);l.add(`maplibregl-${o}-anchor-${t}`)}class $d extends c.E{constructor(t){if(super(),this._onKeyPress=o=>{const l=o.code,p=o.charCode||o.keyCode;l!=="Space"&&l!=="Enter"&&p!==32&&p!==13||this.togglePopup()},this._onMapClick=o=>{const l=o.originalEvent.target,p=this._element;this._popup&&(l===p||p.contains(l))&&this.togglePopup()},this._update=o=>{if(!this._map)return;const l=this._map.loaded()&&!this._map.isMoving();((o==null?void 0:o.type)==="terrain"||(o==null?void 0:o.type)==="render"&&!l)&&this._map.once("render",this._update),this._lngLat=fd(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let p="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?p=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(p=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let w="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?w="rotateX(0deg)":this._pitchAlignment==="map"&&(w=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||o&&o.type!=="moveend"||(this._pos=this._pos.round()),Te.setTransform(this._element,`${cd[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${w} ${p}`),ft.frameAsync(new AbortController).then((()=>{this._updateOpacity(o&&o.type==="moveend")})).catch((()=>{}))},this._onMove=o=>{if(!this._isDragging){const l=this._clickTolerance||this._map._clickTolerance;this._isDragging=o.point.dist(this._pointerdownPos)>=l}this._isDragging&&(this._pos=o.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new c.l("dragstart"))),this.fire(new c.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new c.l("dragend")),this._state="inactive"},this._addDragHandler=o=>{this._element.contains(o.originalEvent.target)&&(o.preventDefault(),this._positionDelta=o.point.sub(this._pos).add(this._offset),this._pointerdownPos=o.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._subpixelPositioning=t&&t.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&t.pitchAlignment!=="auto"?t.pitchAlignment:this._rotationAlignment,this.setOpacity(t==null?void 0:t.opacity,t==null?void 0:t.opacityWhenCovered),t&&t.element)this._element=t.element,this._offset=c.P.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=Te.create("div");const o=Te.createNS("http://www.w3.org/2000/svg","svg"),l=41,p=27;o.setAttributeNS(null,"display","block"),o.setAttributeNS(null,"height",`${l}px`),o.setAttributeNS(null,"width",`${p}px`),o.setAttributeNS(null,"viewBox",`0 0 ${p} ${l}`);const w=Te.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"stroke","none"),w.setAttributeNS(null,"stroke-width","1"),w.setAttributeNS(null,"fill","none"),w.setAttributeNS(null,"fill-rule","evenodd");const O=Te.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"fill-rule","nonzero");const I=Te.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"transform","translate(3.0, 29.0)"),I.setAttributeNS(null,"fill","#000000");const A=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const le of A){const pe=Te.createNS("http://www.w3.org/2000/svg","ellipse");pe.setAttributeNS(null,"opacity","0.04"),pe.setAttributeNS(null,"cx","10.5"),pe.setAttributeNS(null,"cy","5.80029008"),pe.setAttributeNS(null,"rx",le.rx),pe.setAttributeNS(null,"ry",le.ry),I.appendChild(pe)}const C=Te.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"fill",this._color);const D=Te.createNS("http://www.w3.org/2000/svg","path");D.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),C.appendChild(D);const F=Te.createNS("http://www.w3.org/2000/svg","g");F.setAttributeNS(null,"opacity","0.25"),F.setAttributeNS(null,"fill","#000000");const G=Te.createNS("http://www.w3.org/2000/svg","path");G.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),F.appendChild(G);const Z=Te.createNS("http://www.w3.org/2000/svg","g");Z.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Z.setAttributeNS(null,"fill","#FFFFFF");const Q=Te.createNS("http://www.w3.org/2000/svg","g");Q.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ie=Te.createNS("http://www.w3.org/2000/svg","circle");ie.setAttributeNS(null,"fill","#000000"),ie.setAttributeNS(null,"opacity","0.25"),ie.setAttributeNS(null,"cx","5.5"),ie.setAttributeNS(null,"cy","5.5"),ie.setAttributeNS(null,"r","5.4999962");const de=Te.createNS("http://www.w3.org/2000/svg","circle");de.setAttributeNS(null,"fill","#FFFFFF"),de.setAttributeNS(null,"cx","5.5"),de.setAttributeNS(null,"cy","5.5"),de.setAttributeNS(null,"r","5.4999962"),Q.appendChild(ie),Q.appendChild(de),O.appendChild(I),O.appendChild(C),O.appendChild(F),O.appendChild(Z),O.appendChild(Q),o.appendChild(O),o.setAttributeNS(null,"height",l*this._scale+"px"),o.setAttributeNS(null,"width",p*this._scale+"px"),this._element.appendChild(o),this._offset=c.P.convert(t&&t.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(o=>{o.preventDefault()})),this._element.addEventListener("mousedown",(o=>{o.preventDefault()})),Yd(this._element,this._anchor,"marker"),t&&t.className)for(const o of t.className.split(" "))this._element.classList.add(o);this._popup=null}addTo(t){return this.remove(),this._map=t,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",t._getUIString("Marker.Title")),this._element.hasAttribute("role")||this._element.setAttribute("role","button"),t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),t.on("terrain",this._update),t.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),Te.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=c.V.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){const p=Math.abs(13.5)/Math.SQRT2;t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[p,-1*(38.1-13.5+p)],"bottom-right":[-p,-1*(38.1-13.5+p)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=t,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(t){return this._subpixelPositioning=t,this}getPopup(){return this._popup}togglePopup(){const t=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:t?(t.isOpen()?t.remove():(t.setLngLat(this._lngLat),t.addTo(this._map)),this):this}_updateOpacity(t=!1){var o,l;const p=(o=this._map)===null||o===void 0?void 0:o.terrain,w=this._map.transform.isLocationOccluded(this._lngLat);if(!p||w){const Z=w?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==Z&&(this._element.style.opacity=Z))}if(t)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const O=this._map,I=O.terrain.depthAtPoint(this._pos),A=O.terrain.getElevationForLngLat(this._lngLat,O.transform);if(O.transform.lngLatToCameraDepth(this._lngLat,A)-I<.006)return void(this._element.style.opacity=this._opacity);const C=-this._offset.y/O.transform.pixelsPerMeter,D=Math.sin(O.getPitch()*Math.PI/180)*C,F=O.terrain.depthAtPoint(new c.P(this._pos.x,this._pos.y-this._offset.y)),G=O.transform.lngLatToCameraDepth(this._lngLat,A+D)-F>.006;!((l=this._popup)===null||l===void 0)&&l.isOpen()&&G&&this._popup.remove(),this._element.style.opacity=G?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(t){return this._offset=c.P.convert(t),this._update(),this}addClassName(t){this._element.classList.add(t)}removeClassName(t){this._element.classList.remove(t)}toggleClassName(t){return this._element.classList.toggle(t)}setDraggable(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(t){return this._rotation=t||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(t){return this._rotationAlignment=t||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(t){return this._pitchAlignment=t&&t!=="auto"?t:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(t,o){return(this._opacity===void 0||t===void 0&&o===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),t!==void 0&&(this._opacity=t),o!==void 0&&(this._opacityWhenCovered=o),this._map&&this._updateOpacity(!0),this}}const Kd={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let $h=0,Ih=!1;const so={maxWidth:100,unit:"metric"};function Ns(g,t,o){const l=o&&o.maxWidth||100,p=g._container.clientHeight/2,w=g._container.clientWidth/2,O=g.unproject([w-l/2,p]),I=g.unproject([w+l/2,p]),A=Math.round(g.project(I).x-g.project(O).x),C=Math.min(l,A,g._container.clientWidth),D=O.distanceTo(I);if(o&&o.unit==="imperial"){const F=3.2808*D;F>5280?Wr(t,C,F/5280,g._getUIString("ScaleControl.Miles")):Wr(t,C,F,g._getUIString("ScaleControl.Feet"))}else o&&o.unit==="nautical"?Wr(t,C,D/1852,g._getUIString("ScaleControl.NauticalMiles")):D>=1e3?Wr(t,C,D/1e3,g._getUIString("ScaleControl.Kilometers")):Wr(t,C,D,g._getUIString("ScaleControl.Meters"))}function Wr(g,t,o,l){const p=(function(w){const O=Math.pow(10,`${Math.floor(w)}`.length-1);let I=w/O;return I=I>=10?10:I>=5?5:I>=3?3:I>=2?2:I>=1?1:(function(A){const C=Math.pow(10,Math.ceil(-Math.log(A)/Math.LN10));return Math.round(A*C)/C})(I),O*I})(o);g.style.width=t*(p/o)+"px",g.innerHTML=`${p}&nbsp;${l}`}const Al={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0,padding:void 0},Sl=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function pd(g){if(g){if(typeof g=="number"){const t=Math.round(Math.abs(g)/Math.SQRT2);return{center:new c.P(0,0),top:new c.P(0,g),"top-left":new c.P(t,t),"top-right":new c.P(-t,t),bottom:new c.P(0,-g),"bottom-left":new c.P(t,-t),"bottom-right":new c.P(-t,-t),left:new c.P(g,0),right:new c.P(-g,0)}}if(g instanceof c.P||Array.isArray(g)){const t=c.P.convert(g);return{center:t,top:t,"top-left":t,"top-right":t,bottom:t,"bottom-left":t,"bottom-right":t,left:t,right:t}}return{center:c.P.convert(g.center||[0,0]),top:c.P.convert(g.top||[0,0]),"top-left":c.P.convert(g["top-left"]||[0,0]),"top-right":c.P.convert(g["top-right"]||[0,0]),bottom:c.P.convert(g.bottom||[0,0]),"bottom-left":c.P.convert(g["bottom-left"]||[0,0]),"bottom-right":c.P.convert(g["bottom-right"]||[0,0]),left:c.P.convert(g.left||[0,0]),right:c.P.convert(g.right||[0,0])}}return pd(new c.P(0,0))}const cr=re;E.AJAXError=c.cI,E.Event=c.l,E.Evented=c.E,E.LngLat=c.V,E.MercatorCoordinate=c.a9,E.Point=c.P,E.addProtocol=c.cJ,E.config=c.c,E.removeProtocol=c.cK,E.AttributionControl=$s,E.BoxZoomHandler=Xh,E.CanvasSource=K,E.CooperativeGesturesHandler=Gt,E.DoubleClickZoomHandler=Ef,E.DragPanHandler=pc,E.DragRotateHandler=mi,E.EdgeInsets=Qn,E.FullscreenControl=class extends c.E{constructor(g={}){super(),this._onFullscreenChange=()=>{var t;let o=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((t=o==null?void 0:o.shadowRoot)===null||t===void 0)&&t.fullscreenElement;)o=o.shadowRoot.fullscreenElement;o===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,g&&g.container&&(g.container instanceof HTMLElement?this._container=g.container:c.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(g){return this._map=g,this._container||(this._container=this._map.getContainer()),this._controlContainer=Te.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){Te.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const g=this._fullscreenButton=Te.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);Te.create("span","maplibregl-ctrl-icon",g).setAttribute("aria-hidden","true"),g.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const g=this._getTitle();this._fullscreenButton.setAttribute("aria-label",g),this._fullscreenButton.title=g}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new c.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new c.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},E.GeoJSONSource=wn,E.GeolocateControl=class extends c.E{constructor(g){super(),this._onSuccess=t=>{if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new c.l("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(t),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new c.l("geolocate",t)),this._finish()}},this._updateCamera=t=>{const o=new c.V(t.coords.longitude,t.coords.latitude),l=t.coords.accuracy,p=this._map.getBearing(),w=c.e({bearing:p},this.options.fitBoundsOptions),O=vs.fromLngLat(o,l);this._map.fitBounds(O,w,{geolocateSource:!0})},this._updateMarker=t=>{if(t){const o=new c.V(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(o).addTo(this._map),this._userLocationDotMarker.setLngLat(o).addTo(this._map),this._accuracy=t.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=t=>{if(this._map){if(t.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(t.code===3&&Ih)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new c.l("error",t)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this._geolocateButton=Te.create("button","maplibregl-ctrl-geolocate",this._container),Te.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=t=>{if(this._map){if(t===!1){c.w("Geolocation support is not available so the GeolocateControl will be disabled.");const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}else{const o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=Te.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new $d({element:this._dotElement}),this._circleElement=Te.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new $d({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(o=>{const l=(o==null?void 0:o[0])instanceof ResizeObserverEntry;o.geolocateSource||this._watchState!=="ACTIVE_LOCK"||l||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new c.l("trackuserlocationend")),this.fire(new c.l("userlocationlostfocus")))}))}},this.options=c.e({},Kd,g)}onAdd(g){return this._map=g,this._container=Te.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return c._(this,arguments,void 0,(function*(t=!1){if(fr!==void 0&&!t)return fr;if(window.navigator.permissions===void 0)return fr=!!window.navigator.geolocation,fr;try{fr=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch(o){fr=!!window.navigator.geolocation}return fr}))})().then((t=>this._finishSetupUI(t))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),Te.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,$h=0,Ih=!1}_isOutOfMapMaxBounds(g){const t=this._map.getMaxBounds(),o=g.coords;return t&&(o.longitude<t.getWest()||o.longitude>t.getEast()||o.latitude<t.getSouth()||o.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":case"BACKGROUND_ERROR":case"OFF":case void 0:break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const g=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&g))return;const t=this._map.project(g),o=this._map.unproject([t.x+100,t.y]),l=g.distanceTo(o)/100,p=2*this._accuracy/l;this._circleElement.style.width=`${p.toFixed(2)}px`,this._circleElement.style.height=`${p.toFixed(2)}px`}trigger(){if(!this._setup)return c.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new c.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":$h--,Ih=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new c.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new c.l("trackuserlocationstart")),this.fire(new c.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let g;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),$h++,$h>1?(g={maximumAge:6e5,timeout:0},Ih=!0):(g=this.options.positionOptions,Ih=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,g)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},E.GlobeControl=class{constructor(){this._toggleProjection=()=>{var g;const t=(g=this._map.getProjection())===null||g===void 0?void 0:g.type;this._map.setProjection(t!=="mercator"&&t?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var g;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((g=this._map.getProjection())===null||g===void 0?void 0:g.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(g){return this._map=g,this._container=Te.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=Te.create("button","maplibregl-ctrl-globe",this._container),Te.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){Te.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},E.Hash=an,E.ImageSource=ro,E.KeyboardHandler=as,E.LngLatBounds=vs,E.LogoControl=Xd,E.Map=class extends sn{constructor(g){var t,o;c.cG.mark(c.cH.create);const l=Object.assign(Object.assign(Object.assign({},_h),g),{canvasContextAttributes:Object.assign(Object.assign({},_h.canvasContextAttributes),g.canvasContextAttributes)});if(l.minZoom!=null&&l.maxZoom!=null&&l.minZoom>l.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(l.minPitch!=null&&l.maxPitch!=null&&l.minPitch>l.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(l.minPitch!=null&&l.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(l.maxPitch!=null&&l.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const p=new Xs,w=new Oa;if(l.minZoom!==void 0&&p.setMinZoom(l.minZoom),l.maxZoom!==void 0&&p.setMaxZoom(l.maxZoom),l.minPitch!==void 0&&p.setMinPitch(l.minPitch),l.maxPitch!==void 0&&p.setMaxPitch(l.maxPitch),l.renderWorldCopies!==void 0&&p.setRenderWorldCopies(l.renderWorldCopies),l.transformConstrain!==null&&p.setConstrainOverride(l.transformConstrain),super(p,w,{bearingSnap:l.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new kh,this._controls=[],this._mapId=c.af(),this._lostContextStyle={style:null,images:null},this._contextLost=I=>{I.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.painter.destroy();for(const A of Object.values(this.style._layers))if(A.type==="custom"&&console.warn(`Custom layer with id '${A.id}' cannot be restored after WebGL context loss. You will need to re-add it manually after context restoration.`),A._listeners)for(const[C]of Object.entries(A._listeners))console.warn(`Custom layer with id '${A.id}' had event listeners for event '${C}' which cannot be restored after WebGL context loss. You will need to re-add them manually after context restoration.`);this._lostContextStyle=this._getStyleAndImages(),this.style.destroy(),this.style=null,this.fire(new c.l("webglcontextlost",{originalEvent:I}))},this._contextRestored=I=>{this._lostContextStyle.style&&this.setStyle(this._lostContextStyle.style,{diff:!1}),this._lostContextStyle.images&&(this.style.imageManager.images=this._lostContextStyle.images),this._lostContextStyle={style:null,images:null},this._setupPainter(),this.resize(),this._update(),this._resizeInternal(),this.fire(new c.l("webglcontextrestored",{originalEvent:I}))},this._onMapScroll=I=>{if(I.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=l.interactive,this._maxTileCacheSize=l.maxTileCacheSize,this._maxTileCacheZoomLevels=l.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},l.canvasContextAttributes),this._trackResize=l.trackResize===!0,this._bearingSnap=l.bearingSnap,this._centerClampedToGround=l.centerClampedToGround,this._refreshExpiredTiles=l.refreshExpiredTiles===!0,this._fadeDuration=l.fadeDuration,this._crossSourceCollisions=l.crossSourceCollisions===!0,this._collectResourceTiming=l.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},xl),l.locale),this._clickTolerance=l.clickTolerance,this._overridePixelRatio=l.pixelRatio,this._maxCanvasSize=l.maxCanvasSize,this._zoomLevelsToOverscale=l.experimentalZoomLevelsToOverscale,this.transformCameraUpdate=l.transformCameraUpdate,this.transformConstrain=l.transformConstrain,this.cancelPendingTileRequestsWhileZooming=l.cancelPendingTileRequestsWhileZooming===!0,l.reduceMotion!==void 0&&(ft.prefersReducedMotion=l.reduceMotion),this._imageQueueHandle=zt.addThrottleControl((()=>this.isMoving())),this._requestManager=new ca(l.transformRequest),typeof l.container=="string"){if(this._container=document.getElementById(l.container),!this._container)throw new Error(`Container '${l.container}' not found.`)}else{if(!(l.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=l.container}if(l.maxBounds&&this.setMaxBounds(l.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),typeof window!="undefined"){addEventListener("online",this._onWindowOnline,!1);let I=!1;const A=dc((C=>{this._trackResize&&!this._removed&&(this.resize(C),this.redraw())}),50);this._resizeObserver=new ResizeObserver((C=>{I?A(C):I=!0})),this._resizeObserver.observe(this._container)}this.handlers=new Zd(this,l),this._hash=l.hash&&new an(typeof l.hash=="string"&&l.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:l.center,elevation:l.elevation,zoom:l.zoom,bearing:l.bearing,pitch:l.pitch,roll:l.roll}),l.bounds&&(this.resize(),this.fitBounds(l.bounds,c.e({},l.fitBoundsOptions,{duration:0}))));const O=typeof l.style=="string"||((o=(t=l.style)===null||t===void 0?void 0:t.projection)===null||o===void 0?void 0:o.type)!=="globe";this.resize(null,O),this._localIdeographFontFamily=l.localIdeographFontFamily,this._validateStyle=l.validateStyle,l.style&&this.setStyle(l.style,{localIdeographFontFamily:l.localIdeographFontFamily}),l.attributionControl&&this.addControl(new $s(typeof l.attributionControl=="boolean"?void 0:l.attributionControl)),l.maplibreLogo&&this.addControl(new Xd,l.logoPosition),this.on("style.load",(()=>{if(O||this._resizeTransform(),this.transform.unmodified){const I=c.U(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(I)}})),this.on("data",(I=>{this._update(I.dataType==="style"),this.fire(new c.l(`${I.dataType}data`,I))})),this.on("dataloading",(I=>{this.fire(new c.l(`${I.dataType}dataloading`,I))})),this.on("dataabort",(I=>{this.fire(new c.l("sourcedataabort",I))}))}_getMapId(){return this._mapId}setGlobalStateProperty(g,t){return this.style.setGlobalStateProperty(g,t),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(g,t){if(t===void 0&&(t=g.getDefaultPosition?g.getDefaultPosition():"top-right"),!g||!g.onAdd)return this.fire(new c.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const o=g.onAdd(this);this._controls.push(g);const l=this._controlPositions[t];return t.indexOf("bottom")!==-1?l.insertBefore(o,l.firstChild):l.appendChild(o),this}removeControl(g){if(!g||!g.onRemove)return this.fire(new c.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const t=this._controls.indexOf(g);return t>-1&&this._controls.splice(t,1),g.onRemove(this),this}hasControl(g){return this._controls.indexOf(g)>-1}coveringTiles(g){return Ls(this.transform,g)}calculateCameraOptionsFromTo(g,t,o,l){return l==null&&this.terrain&&(l=this.terrain.getElevationForLngLat(o,this.transform)),super.calculateCameraOptionsFromTo(g,t,o,l)}resize(g,t=!0){if(this._lostContextStyle.style!==null)return this;this._resizeInternal(t);const o=!this._moving;return o&&(this.stop(),this.fire(new c.l("movestart",g)).fire(new c.l("move",g))),this.fire(new c.l("resize",g)),o&&this.fire(new c.l("moveend",g)),this}_resizeInternal(g=!0){const[t,o]=this._containerDimensions(),l=this._getClampedPixelRatio(t,o);if(this._resizeCanvas(t,o,l),this.painter.resize(t,o,l),this.painter.overLimit()){const p=this.painter.context.gl;this._maxCanvasSize=[p.drawingBufferWidth,p.drawingBufferHeight];const w=this._getClampedPixelRatio(t,o);this._resizeCanvas(t,o,w),this.painter.resize(t,o,w)}this._resizeTransform(g)}_resizeTransform(g=!0){var t;const[o,l]=this._containerDimensions();this.transform.resize(o,l,g),(t=this._requestedCameraState)===null||t===void 0||t.resize(o,l,g)}_getClampedPixelRatio(g,t){const{0:o,1:l}=this._maxCanvasSize,p=this.getPixelRatio(),w=g*p,O=t*p;return Math.min(w>o?o/w:1,O>l?l/O:1)*p}getPixelRatio(){var g;return(g=this._overridePixelRatio)!==null&&g!==void 0?g:devicePixelRatio}setPixelRatio(g){this._overridePixelRatio=g,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(g){return this.transform.setMaxBounds(vs.convert(g)),this._update()}setMinZoom(g){if((g=g==null?-2:g)>=-2&&g<=this.transform.maxZoom){const t=this._getTransformForUpdate();return t.setMinZoom(g),this._applyUpdatedTransform(t),this._update(),this}throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(g){if((g=g==null?22:g)>=this.transform.minZoom){const t=this._getTransformForUpdate();return t.setMaxZoom(g),this._applyUpdatedTransform(t),this._update(),this}throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(g){if((g=g==null?0:g)<0)throw new Error("minPitch must be greater than or equal to 0");if(g>=0&&g<=this.transform.maxPitch)return this.transform.setMinPitch(g),this._update(),this.getPitch()<g&&this.setPitch(g),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(g){if((g=g==null?60:g)>180)throw new Error("maxPitch must be less than or equal to 180");if(g>=this.transform.minPitch)return this.transform.setMaxPitch(g),this._update(),this.getPitch()>g&&this.setPitch(g),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(g){return this.transform.setRenderWorldCopies(g),this._update()}setTransformConstrain(g){return this.transform.setConstrainOverride(g),this._update()}project(g){return this.transform.locationToScreenPoint(c.V.convert(g),this.style&&this.terrain)}unproject(g){return this.transform.screenPointToLocation(c.P.convert(g),this.terrain)}isMoving(){var g;return this._moving||((g=this.handlers)===null||g===void 0?void 0:g.isMoving())}isZooming(){var g;return this._zooming||((g=this.handlers)===null||g===void 0?void 0:g.isZooming())}isRotating(){var g;return this._rotating||((g=this.handlers)===null||g===void 0?void 0:g.isRotating())}_createDelegatedListener(g,t,o){if(g==="mouseenter"||g==="mouseover"){let l=!1;return{layers:t,listener:o,delegates:{mousemove:w=>{const O=t.filter((A=>this.getLayer(A))),I=O.length!==0?this.queryRenderedFeatures(w.point,{layers:O}):[];I.length?l||(l=!0,o.call(this,new Dn(g,this,w.originalEvent,{features:I}))):l=!1},mouseout:()=>{l=!1}}}}if(g==="mouseleave"||g==="mouseout"){let l=!1;return{layers:t,listener:o,delegates:{mousemove:O=>{const I=t.filter((A=>this.getLayer(A)));(I.length!==0?this.queryRenderedFeatures(O.point,{layers:I}):[]).length?l=!0:l&&(l=!1,o.call(this,new Dn(g,this,O.originalEvent)))},mouseout:O=>{l&&(l=!1,o.call(this,new Dn(g,this,O.originalEvent)))}}}}{const l=p=>{const w=t.filter((I=>this.getLayer(I))),O=w.length!==0?this.queryRenderedFeatures(p.point,{layers:w}):[];O.length&&(p.features=O,o.call(this,p),delete p.features)};return{layers:t,listener:o,delegates:{[g]:l}}}}_saveDelegatedListener(g,t){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[g]=this._delegatedListeners[g]||[],this._delegatedListeners[g].push(t)}_removeDelegatedListener(g,t,o){if(!this._delegatedListeners||!this._delegatedListeners[g])return;const l=this._delegatedListeners[g];for(let p=0;p<l.length;p++){const w=l[p];if(w.listener===o&&w.layers.length===t.length&&w.layers.every((O=>t.includes(O)))){for(const O in w.delegates)this.off(O,w.delegates[O]);return void l.splice(p,1)}}}on(g,t,o){if(o===void 0)return super.on(g,t);const l=typeof t=="string"?[t]:t,p=this._createDelegatedListener(g,l,o);this._saveDelegatedListener(g,p);for(const w in p.delegates)this.on(w,p.delegates[w]);return{unsubscribe:()=>{this._removeDelegatedListener(g,l,o)}}}once(g,t,o){if(o===void 0)return super.once(g,t);const l=typeof t=="string"?[t]:t,p=this._createDelegatedListener(g,l,o);for(const w in p.delegates){const O=p.delegates[w];p.delegates[w]=(...I)=>{this._removeDelegatedListener(g,l,o),O(...I)}}this._saveDelegatedListener(g,p);for(const w in p.delegates)this.once(w,p.delegates[w]);return this}off(g,t,o){return o===void 0?super.off(g,t):(this._removeDelegatedListener(g,typeof t=="string"?[t]:t,o),this)}queryRenderedFeatures(g,t){if(!this.style)return[];let o;const l=g instanceof c.P||Array.isArray(g),p=l?g:[[0,0],[this.transform.width,this.transform.height]];if(t=t||(l?{}:g)||{},p instanceof c.P||typeof p[0]=="number")o=[c.P.convert(p)];else{const w=c.P.convert(p[0]),O=c.P.convert(p[1]);o=[w,new c.P(O.x,w.y),O,new c.P(w.x,O.y),w]}return this.style.queryRenderedFeatures(o,t,this.transform)}querySourceFeatures(g,t){return this.style.querySourceFeatures(g,t)}setStyle(g,t){return(t=c.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},t)).diff!==!1&&t.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&g?(this._diffStyle(g,t),this):(this._localIdeographFontFamily=t.localIdeographFontFamily,this._updateStyle(g,t))}setTransformRequest(g){return this._requestManager.setTransformRequest(g),this}_getUIString(g){const t=this._locale[g];if(t==null)throw new Error(`Missing UI string '${g}'`);return t}_updateStyle(g,t){var o,l;if(t.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(g,t)));const p=this.style&&t.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!g)),g?(this.style=new Pi(this,t||{}),this.style.setEventedParent(this,{style:this.style}),typeof g=="string"?this.style.loadURL(g,t,p):this.style.loadJSON(g,t,p),this):((l=(o=this.style)===null||o===void 0?void 0:o.projection)===null||l===void 0||l.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Pi(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(g,t){if(typeof g=="string"){const o=this._requestManager.transformRequest(g,"Style");c.j(o,new AbortController).then((l=>{this._updateDiff(l.data,t)})).catch((l=>{l&&this.fire(new c.k(l))}))}else typeof g=="object"&&this._updateDiff(g,t)}_updateDiff(g,t){try{this.style.setState(g,t)&&this._update(!0)}catch(o){c.w(`Unable to perform style diff: ${o.message||o.error||o}.  Rebuilding the style from scratch.`),this._updateStyle(g,t)}}getStyle(){if(this.style)return this.style.serialize()}_getStyleAndImages(){return this.style?{style:this.style.serialize(),images:this.style.imageManager.cloneImages()}:{style:null,images:{}}}isStyleLoaded(){return this.style?this.style.loaded():c.w("There is no style added to the map.")}addSource(g,t){return this._lazyInitEmptyStyle(),this.style.addSource(g,t),this._update(!0)}isSourceLoaded(g){const t=this.style&&this.style.tileManagers[g];if(t!==void 0)return t.loaded();this.fire(new c.k(new Error(`There is no tile manager with ID '${g}'`)))}setTerrain(g){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),g){const t=this.style.tileManagers[g.source];if(!t)throw new Error(`cannot load terrain, because there exists no source with ID: ${g.source}`);this.terrain===null&&t.reload();for(const o in this.style._layers){const l=this.style._layers[o];l.type==="hillshade"&&l.source===g.source&&c.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),l.type==="color-relief"&&l.source===g.source&&c.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new va(this.painter,t,g),this.painter.renderToTexture=new dr(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=o=>{var l;o.dataType==="style"?this.terrain.tileManager.freeRtt():o.dataType==="source"&&o.tile&&(o.sourceId!==g.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((l=o.source)===null||l===void 0?void 0:l.type)==="image"?this.terrain.tileManager.freeRtt():this.terrain.tileManager.freeRtt(o.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.tileManager.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new c.l("terrain",{terrain:g})),this}getTerrain(){var g,t;return(t=(g=this.terrain)===null||g===void 0?void 0:g.options)!==null&&t!==void 0?t:null}areTilesLoaded(){const g=this.style&&this.style.tileManagers;for(const t of Object.values(g))if(!t.areTilesLoaded())return!1;return!0}removeSource(g){return this.style.removeSource(g),this._update(!0)}getSource(g){return this.style.getSource(g)}setSourceTileLodParams(g,t,o){if(o){const l=this.getSource(o);if(!l)throw new Error(`There is no source with ID "${o}", cannot set LOD parameters`);l.calculateTileZoom=Xa(Math.max(1,g),Math.max(1,t))}else for(const l in this.style.tileManagers)this.style.tileManagers[l].getSource().calculateTileZoom=Xa(Math.max(1,g),Math.max(1,t));return this._update(!0),this}refreshTiles(g,t){const o=this.style.tileManagers[g];if(!o)throw new Error(`There is no tile manager with ID "${g}", cannot refresh tile`);t===void 0?o.reload(!0):o.refreshTiles(t.map((l=>new c.ac(l.z,l.x,l.y))))}addImage(g,t,o={}){const{pixelRatio:l=1,sdf:p=!1,stretchX:w,stretchY:O,content:I,textFitWidth:A,textFitHeight:C}=o;if(this._lazyInitEmptyStyle(),!(t instanceof HTMLImageElement||c.b(t))){if(t.width===void 0||t.height===void 0)return this.fire(new c.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:D,height:F,data:G}=t,Z=t;return this.style.addImage(g,{data:new c.R({width:D,height:F},new Uint8Array(G)),pixelRatio:l,stretchX:w,stretchY:O,content:I,textFitWidth:A,textFitHeight:C,sdf:p,version:0,userImage:Z}),Z.onAdd&&Z.onAdd(this,g),this}}{const{width:D,height:F,data:G}=ft.getImageData(t);this.style.addImage(g,{data:new c.R({width:D,height:F},G),pixelRatio:l,stretchX:w,stretchY:O,content:I,textFitWidth:A,textFitHeight:C,sdf:p,version:0})}}updateImage(g,t){const o=this.style.getImage(g);if(!o)return this.fire(new c.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const l=t instanceof HTMLImageElement||c.b(t)?ft.getImageData(t):t,{width:p,height:w,data:O}=l;if(p===void 0||w===void 0)return this.fire(new c.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(p!==o.data.width||w!==o.data.height)return this.fire(new c.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const I=!(t instanceof HTMLImageElement||c.b(t));return o.data.replace(O,I),this.style.updateImage(g,o),this}getImage(g){return this.style.getImage(g)}hasImage(g){return g?!!this.style.getImage(g):(this.fire(new c.k(new Error("Missing required image id"))),!1)}removeImage(g){this.style.removeImage(g)}loadImage(g){return zt.getImage(this._requestManager.transformRequest(g,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(g,t){return this._lazyInitEmptyStyle(),this.style.addLayer(g,t),this._update(!0)}moveLayer(g,t){return this.style.moveLayer(g,t),this._update(!0)}removeLayer(g){return this.style.removeLayer(g),this._update(!0)}getLayer(g){return this.style.getLayer(g)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(g,t,o){return this.style.setLayerZoomRange(g,t,o),this._update(!0)}setFilter(g,t,o={}){return this.style.setFilter(g,t,o),this._update(!0)}getFilter(g){return this.style.getFilter(g)}setPaintProperty(g,t,o,l={}){return this.style.setPaintProperty(g,t,o,l),this._update(!0)}getPaintProperty(g,t){return this.style.getPaintProperty(g,t)}setLayoutProperty(g,t,o,l={}){return this.style.setLayoutProperty(g,t,o,l),this._update(!0)}getLayoutProperty(g,t){return this.style.getLayoutProperty(g,t)}setGlyphs(g,t={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(g,t),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(g,t,o={}){return this._lazyInitEmptyStyle(),this.style.addSprite(g,t,o,(l=>{l||this._update(!0)})),this}removeSprite(g){return this._lazyInitEmptyStyle(),this.style.removeSprite(g),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(g,t={}){return this._lazyInitEmptyStyle(),this.style.setSprite(g,t,(o=>{o||this._update(!0)})),this}setLight(g,t={}){return this._lazyInitEmptyStyle(),this.style.setLight(g,t),this._update(!0)}getLight(){return this.style.getLight()}setSky(g,t={}){return this._lazyInitEmptyStyle(),this.style.setSky(g,t),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(g,t){return this.style.setFeatureState(g,t),this._update()}removeFeatureState(g,t){return this.style.removeFeatureState(g,t),this._update()}getFeatureState(g){return this.style.getFeatureState(g)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let g=0,t=0;return this._container&&(g=this._container.clientWidth||400,t=this._container.clientHeight||300),[g,t]}_setupContainer(){const g=this._container;g.classList.add("maplibregl-map");const t=this._canvasContainer=Te.create("div","maplibregl-canvas-container",g);this._interactive&&t.classList.add("maplibregl-interactive"),this._canvas=Te.create("canvas","maplibregl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const o=this._containerDimensions(),l=this._getClampedPixelRatio(o[0],o[1]);this._resizeCanvas(o[0],o[1],l);const p=this._controlContainer=Te.create("div","maplibregl-control-container",g),w=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((O=>{w[O]=Te.create("div",`maplibregl-ctrl-${O} `,p)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(g,t,o){this._canvas.width=Math.floor(o*g),this._canvas.height=Math.floor(o*t),this._canvas.style.width=`${g}px`,this._canvas.style.height=`${t}px`}_setupPainter(){const g=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let t=null;this._canvas.addEventListener("webglcontextcreationerror",(l=>{t={requestedAttributes:g},l&&(t.statusMessage=l.statusMessage,t.type=l.type)}),{once:!0});let o=null;if(o=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,g):this._canvas.getContext("webgl2",g)||this._canvas.getContext("webgl",g),!o){const l="Failed to initialize WebGL";throw t?(t.message=l,new Error(JSON.stringify(t))):new Error(l)}this.painter=new dp(o,this.transform),Vt.testSupport(o)}migrateProjection(g,t){super.migrateProjection(g,t),this.painter.transform=g,this.fire(new c.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(g){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||g,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(g){return this._update(),this._renderTaskQueue.add(g)}_cancelRenderFrame(g){this._renderTaskQueue.remove(g)}_render(g){var t,o,l,p,w;const O=this._idleTriggered?this._fadeDuration:0,I=((t=this.style.projection)===null||t===void 0?void 0:t.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(g),this._removed)return;let A=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const F=this.transform.zoom,G=it();this.style.zoomHistory.update(F,G);const Z=new c.H(F,{now:G,fadeDuration:O,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Q=Z.crossFadingFactor();Q===1&&Q===this._crossFadingFactor||(A=!0,this._crossFadingFactor=Q),this.style.update(Z)}const C=((o=this.style.projection)===null||o===void 0?void 0:o.transitionState)>0!==I;(l=this.style.projection)===null||l===void 0||l.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((p=this.style.projection)===null||p===void 0?void 0:p.transitionState,(w=this.style.projection)===null||w===void 0?void 0:w.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||C)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.tileManager.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,O,this._crossSourceCollisions,C),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:O,showPadding:this.showPadding}),this.fire(new c.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,c.cG.mark(c.cH.load),this.fire(new c.l("load"))),this.style&&(this.style.hasTransitions()||A)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const D=this._sourcesDirty||this._styleDirty||this._placementDirty;return D||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new c.l("idle")),!this._loaded||this._fullyLoaded||D||(this._fullyLoaded=!0,c.cG.mark(c.cH.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var g;this._hash&&this._hash.remove();for(const o of this._controls)o.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window!="undefined"&&removeEventListener("online",this._onWindowOnline,!1),zt.removeThrottleControl(this._imageQueueHandle),(g=this._resizeObserver)===null||g===void 0||g.disconnect();const t=this.painter.context.gl.getExtension("WEBGL_lose_context");t!=null&&t.loseContext&&t.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),Te.remove(this._canvasContainer),Te.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),c.cG.clearMetrics(),this._removed=!0,this.fire(new c.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,ft.frame(this._frameRequest,(g=>{c.cG.frame(g),this._frameRequest=null;try{this._render(g)}catch(t){if(!c.Z(t)&&!(function(o){return o.message===M})(t))throw t}}),(()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(g){this._showTileBoundaries!==g&&(this._showTileBoundaries=g,this._update())}get showPadding(){return!!this._showPadding}set showPadding(g){this._showPadding!==g&&(this._showPadding=g,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(g){this._showCollisionBoxes!==g&&(this._showCollisionBoxes=g,g?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(g){this._showOverdrawInspector!==g&&(this._showOverdrawInspector=g,this._update())}get repaint(){return!!this._repaint}set repaint(g){this._repaint!==g&&(this._repaint=g,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(g){this._vertices=g,this._update()}get version(){return Tl}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(g){return this._lazyInitEmptyStyle(),this.style.setProjection(g),this._update(!0)}},E.MapMouseEvent=Dn,E.MapTouchEvent=rr,E.MapWheelEvent=If,E.Marker=$d,E.NavigationControl=class{constructor(g){this._updateZoomButtons=()=>{const t=this._map.getZoom(),o=t===this._map.getMaxZoom(),l=t===this._map.getMinZoom();this._zoomInButton.disabled=o,this._zoomOutButton.disabled=l,this._zoomInButton.setAttribute("aria-disabled",o.toString()),this._zoomOutButton.setAttribute("aria-disabled",l.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(t,o)=>{const l=this._map._getUIString(`NavigationControl.${o}`);t.title=l,t.setAttribute("aria-label",l)},this.options=c.e({},uc,g),this._container=Te.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(t=>this._map.zoomIn({},{originalEvent:t}))),Te.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(t=>this._map.zoomOut({},{originalEvent:t}))),Te.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(t=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:t}):this._map.resetNorth({},{originalEvent:t})})),this._compassIcon=Te.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(g){return this._map=g,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Es(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){Te.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(g,t){const o=Te.create("button",g,this._container);return o.type="button",o.addEventListener("click",t),o}},E.Popup=class extends c.E{constructor(g){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&Te.remove(this._content),this._container&&(Te.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new c.l("close"))),this),this._onMouseUp=t=>{this._update(t.point)},this._onMouseMove=t=>{this._update(t.point)},this._onDrag=t=>{this._update(t.point)},this._update=t=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=Te.create("div","maplibregl-popup",this._map.getContainer()),this._tip=Te.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const O of this.options.className.split(" "))this._container.classList.add(O);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=fd(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!t)return;const o=this._flatPos=this._pos=this._trackPointer&&t?t:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&t?t:this._map.transform.locationToScreenPoint(this._lngLat));let l=this.options.anchor;const p=pd(this.options.offset);if(!l){const O=this._container.offsetWidth,I=this._container.offsetHeight,A=(function(D){var F,G,Z,Q;return D?{top:(F=D.top)!==null&&F!==void 0?F:0,right:(G=D.right)!==null&&G!==void 0?G:0,bottom:(Z=D.bottom)!==null&&Z!==void 0?Z:0,left:(Q=D.left)!==null&&Q!==void 0?Q:0}:{top:0,right:0,bottom:0,left:0}})(this.options.padding);let C;C=o.y+p.bottom.y<I+A.top?["top"]:o.y>this._map.transform.height-I-A.bottom?["bottom"]:[],o.x<O/2+A.left?C.push("left"):o.x>this._map.transform.width-O/2-A.right&&C.push("right"),l=C.length===0?"bottom":C.join("-")}let w=o.add(p[l]);this.options.subpixelPositioning||(w=w.round()),Te.setTransform(this._container,`${cd[l]} translate(${w.x}px,${w.y}px)`),Yd(this._container,l,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=c.e(Object.create(Al),g)}addTo(g){return this._map&&this.remove(),this._map=g,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new c.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(g){return this._lngLat=c.V.convert(g),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(g){return this.setDOMContent(document.createTextNode(g))}setHTML(g){const t=document.createDocumentFragment(),o=document.createElement("body");let l;for(o.innerHTML=g;l=o.firstChild,l;)t.appendChild(l);return this.setDOMContent(t)}getMaxWidth(){var g;return(g=this._container)===null||g===void 0?void 0:g.style.maxWidth}setMaxWidth(g){return this.options.maxWidth=g,this._update(),this}setDOMContent(g){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=Te.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(g),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(g){return this._container&&this._container.classList.add(g),this}removeClassName(g){return this._container&&this._container.classList.remove(g),this}setOffset(g){return this.options.offset=g,this._update(),this}toggleClassName(g){if(this._container)return this._container.classList.toggle(g)}setSubpixelPositioning(g){this.options.subpixelPositioning=g}setPadding(g){this.options.padding=g,this._update()}_createCloseButton(){this.options.closeButton&&(this._closeButton=Te.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const g=this._container.querySelector(Sl);g&&g.focus()}},E.RasterDEMTileSource=Ho,E.RasterTileSource=Xi,E.ScaleControl=class{constructor(g){this._onMove=()=>{Ns(this._map,this._container,this.options)},this.setUnit=t=>{this.options.unit=t,Ns(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},so),g)}getDefaultPosition(){return"bottom-left"}onAdd(g){return this._map=g,this._container=Te.create("div","maplibregl-ctrl maplibregl-ctrl-scale",g.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){Te.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},E.ScrollZoomHandler=Vd,E.Style=Pi,E.TerrainControl=class{constructor(g){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=g}onAdd(g){return this._map=g,this._container=Te.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=Te.create("button","maplibregl-ctrl-terrain",this._container),Te.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){Te.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},E.TwoFingersTouchPitchHandler=vh,E.TwoFingersTouchRotateHandler=qd,E.TwoFingersTouchZoomHandler=qr,E.TwoFingersTouchZoomRotateHandler=Il,E.VectorTileSource=Zi,E.VideoSource=Re,E.addSourceType=(g,t)=>c._(void 0,void 0,void 0,(function*(){if(ne(g))throw new Error(`A source type called "${g}" already exists.`);((o,l)=>{$[o]=l})(g,t)})),E.clearPrewarmedResources=function(){const g=da;g&&(g.isPreloaded()&&g.numActive()===1?(g.release(St),da=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},E.createTileMesh=Ql,E.getMaxParallelImageRequests=function(){return c.c.MAX_PARALLEL_IMAGE_REQUESTS},E.getRTLTextPluginStatus=function(){return ze().getRTLTextPluginStatus()},E.getVersion=function(){return cr},E.getWorkerCount=function(){return Ct.workerCount},E.getWorkerUrl=function(){return c.c.WORKER_URL},E.importScriptInWorkers=function(g){return _i().broadcast("IS",g)},E.isTimeFrozen=function(){return kt.isFrozen()},E.now=it,E.prewarm=function(){is().acquire(St)},E.restoreNow=function(){kt.restoreNow()},E.setMaxParallelImageRequests=function(g){c.c.MAX_PARALLEL_IMAGE_REQUESTS=g},E.setNow=function(g){kt.setNow(g)},E.setRTLTextPlugin=function(g,t){return ze().setRTLTextPlugin(g,t)},E.setWorkerCount=function(g){Ct.workerCount=g},E.setWorkerUrl=function(g){c.c.WORKER_URL=g}}));var he=N;return he}))})(Gm)),Gm.exports}var t0=Nm.exports,x1;function a0(){return x1||(x1=1,(function(B,Y){(function(N,U){B.exports=U(y1(),e0())})(typeof globalThis!="undefined"?globalThis:t0||self,function(N,U){N.MaplibreGL=N.Layer.extend({options:{updateInterval:32,padding:.1,interactive:!1,pane:"tilePane"},initialize:function(J){N.setOptions(this,J),this._throttledUpdate=N.Util.throttle(this._update,this.options.updateInterval,this)},onAdd:function(J){this._container||this._initContainer();var he=this.getPaneName();J.getPane(he).appendChild(this._container),this._initGL(),this._offset=this._map.containerPointToLayerPoint([0,0]),J.options.zoomAnimation&&N.DomEvent.on(J._proxy,N.DomUtil.TRANSITION_END,this._transitionEnd,this)},onRemove:function(J){this._map._proxy&&this._map.options.zoomAnimation&&N.DomEvent.off(this._map._proxy,N.DomUtil.TRANSITION_END,this._transitionEnd,this);var he=this.getPaneName();J.getPane(he).removeChild(this._container),this._glMap.remove(),this._glMap=null},getEvents:function(){return{move:this._throttledUpdate,zoomanim:this._animateZoom,zoom:this._pinchZoom,zoomstart:this._zoomStart,zoomend:this._zoomEnd,resize:this._resize}},getAttribution:function(){if(this.options.attributionControl)return this.options.attributionControl.customAttribution;var J=this._glMap;if(J&&this.options.attributionControl!==!1){var he=J.getStyle();if(he&&he.sources)return Object.keys(he.sources).map(function(E){var c=J.getSource(E);return c&&typeof c.attribution=="string"?c.attribution.trim():null}).filter(Boolean).join(", ")}return""},getMaplibreMap:function(){return this._glMap},getCanvas:function(){return this._glMap.getCanvas()},getSize:function(){return this._map.getSize().multiplyBy(1+this.options.padding*2)},getBounds:function(){var J=this.getSize().multiplyBy(.5),he=this._map.latLngToContainerPoint(this._map.getCenter());return N.latLngBounds(this._map.containerPointToLatLng(he.subtract(J)),this._map.containerPointToLatLng(he.add(J)))},getContainer:function(){return this._container},getPaneName:function(){return this._map.getPane(this.options.pane)?this.options.pane:"tilePane"},_roundPoint:function(J){return{x:Math.round(J.x),y:Math.round(J.y)}},_initContainer:function(){var J=this._container=N.DomUtil.create("div","leaflet-gl-layer");this._resizeContainer();var he=this._map.getSize().multiplyBy(this.options.padding),E=this._map.containerPointToLayerPoint([0,0]).subtract(he);N.DomUtil.setPosition(J,this._roundPoint(E))},_resizeContainer:function(){var J=this.getSize();this._container.style.width=J.x+"px",this._container.style.height=J.y+"px"},_initGL:function(){var J=this._map.getCenter(),he=N.extend({},this.options,{container:this._container,center:[J.lng,J.lat],zoom:this._map.getZoom()-1,attributionControl:!1});this._glMap=new U.Map(he);var E=this._map,c=this.getAttribution(),re=this.getAttribution.bind(this);this._glMap.on("load",function(){E&&E.attributionControl&&(E.attributionControl.removeAttribution(c),E.attributionControl.addAttribution(re()))});var fe=Object.getPrototypeOf(this._glMap.transform),Le=Object.getOwnPropertyDescriptor(fe,"latRange");(!Le||Le.set||Le.writable)&&(this._glMap.transform.latRange=null);var Ce=Object.getOwnPropertyDescriptor(fe,"maxValidLatitude");(!Ce||Ce.set||Ce.writable)&&(this._glMap.transform.maxValidLatitude=1/0),this._glMap.transform._helper&&this._glMap.transform._helper._latRange&&(this._glMap.transform._helper._latRange=[-1/0,1/0]),this._transformGL(this._glMap),this._glMap._canvas.canvas?this._glMap._actualCanvas=this._glMap._canvas.canvas:this._glMap._actualCanvas=this._glMap._canvas;var Pe=this._glMap._actualCanvas;N.DomUtil.addClass(Pe,"leaflet-image-layer"),N.DomUtil.addClass(Pe,"leaflet-zoom-animated"),this.options.interactive&&N.DomUtil.addClass(Pe,"leaflet-interactive"),this.options.className&&N.DomUtil.addClass(Pe,this.options.className)},_update:function(J){if(this._map&&(this._offset=this._map.containerPointToLayerPoint([0,0]),!this._zooming)){var he=this._container,E=this._glMap,c=this._map.getSize().multiplyBy(this.options.padding),re=this._map.containerPointToLayerPoint([0,0]).subtract(c);N.DomUtil.setPosition(he,this._roundPoint(re)),this._transformGL(E)}},_transformGL:function(J){var he=this._map.getCenter(),E=J._getTransformForUpdate();E.setCenter?(E.setCenter(U.LngLat.convert([he.lng,he.lat])),E.setZoom(this._map.getZoom()-1),J.transform.apply(E)):(E=J.transform,E.center=U.LngLat.convert([he.lng,he.lat]),E.zoom=this._map.getZoom()-1),J._fireMoveEvents()},_pinchZoom:function(J){this._glMap.jumpTo({zoom:this._map.getZoom()-1,center:this._map.getCenter()})},_animateZoom:function(J){var he=this._map.getZoomScale(J.zoom),E=this._map.getSize().multiplyBy(this.options.padding*he),c=this.getSize()._divideBy(2),re=this._map.project(J.center,J.zoom)._subtract(c)._add(this._map._getMapPanePos().add(E))._round(),fe=this._map.project(this._map.getBounds().getNorthWest(),J.zoom)._subtract(re);N.DomUtil.setTransform(this._glMap._actualCanvas,fe.subtract(this._offset),he)},_zoomStart:function(J){this._zooming=!0},_zoomEnd:function(){var J=this._map.getZoomScale(this._map.getZoom());N.DomUtil.setTransform(this._glMap._actualCanvas,null,J),this._zooming=!1,this._update()},_transitionEnd:function(J){N.Util.requestAnimFrame(function(){var he=this._map.getZoom(),E=this._map.getCenter(),c=this._map.latLngToContainerPoint(this._map.getBounds().getNorthWest());this._resizeContainer(),N.DomUtil.setTransform(this._glMap._actualCanvas,c,1),this._glMap.once("moveend",N.Util.bind(function(){this._zoomEnd()},this)),this._glMap.jumpTo({center:E,zoom:he-1})},this)},_resize:function(J){this._transitionEnd(J)}}),N.maplibreGL=function(J){return new N.MaplibreGL(J)}})})(Nm)),Nm.exports}a0();const{BaseLayer:uy}=lp;function ic(B,Y=!1){return Y&&B.name.includes("/")?B.name.split("/")[1].trim():B.name}function T1(B){const Y=(B.placeType||"").toLowerCase();return Y.includes("river")||Y.includes("stream")?"river":B.isEthnic||Y.includes("region")||Y.includes("province")||Y.includes("people")||Y.includes("satrapy")?"region":Y.includes("water-open")||Y.includes("lake")||Y.includes("mare")?"water":Y.includes("mountain")?"mountain":"settlement"}function s0({selectedPlace:B,placesData:Y}){const N=dy();return Be.useEffect(()=>{if(B&&(Y!=null&&Y[B])){const U=Y[B];U.lat&&U.lng&&N.flyTo([U.lat,U.lng],Math.max(N.getZoom(),6),{duration:.5})}},[B,Y,N]),null}function n0({onLayerChange:B}){const Y=dy();return Be.useEffect(()=>{const N=U=>{const J=U.name.toLowerCase();J.includes("satellite")?B("satellite"):J.includes("political")?B("political"):J.includes("cawm")&&B("cawm")};return Y.on("baselayerchange",N),()=>{Y.off("baselayerchange",N)}},[Y,B]),null}function o0({dateRange:B,isActive:Y}){const N=dy();return Be.useEffect(()=>{if(!Y||!B)return;console.log("Date range for filtering:",B);const U=B.start;B.end;const J={version:8,sources:{ohm:{type:"vector",tiles:["https://vtiles.openhistoricalmap.org/maps/osm/{z}/{x}/{y}.pbf"],maxzoom:14}},layers:[{id:"boundaries-temporal",type:"line",source:"ohm","source-layer":"boundary",filter:["all",["has","start_decdate"],["has","end_decdate"],["<=",["get","start_decdate"],U],[">=",["get","end_decdate"],U]],paint:{"line-color":"#8b7355","line-width":2,"line-opacity":.8,"line-dasharray":[2,2]}}]};console.log("Creating MapLibre GL layer with style:",J);const he=ly.maplibreGL({style:J,pane:"tilePane"});return he.addTo(N),console.log("MapLibre GL layer added to map"),he._glMap&&(he._glMap.on("load",()=>{console.log("MapLibre GL style loaded successfully")}),he._glMap.on("error",E=>{console.error("MapLibre GL error:",E)})),()=>{N.removeLayer(he)}},[N,B,Y]),null}function A1({place:B,isMemory:Y,opacity:N=1,onClick:U,language:J}){const he=Be.useMemo(()=>{const c=ic(B,J==="greek").replace(/\s*\([^)]*\)\s*/g,"").trim(),re=Y?"13px":"15px",fe=Y?N*.85:1;return ly.divIcon({className:"region-label",html:`<span style="
        font-family: 'Source Sans Pro', sans-serif;
        font-size: ${re};
        font-weight: 700;
        color: rgba(101, 67, 33, ${fe});
        text-transform: uppercase;
        letter-spacing: 0.2em;
        white-space: nowrap;
        text-shadow:
          -1px -1px 0 rgba(255,255,255,0.95),
          1px -1px 0 rgba(255,255,255,0.95),
          -1px 1px 0 rgba(255,255,255,0.95),
          1px 1px 0 rgba(255,255,255,0.95),
          0 0 8px rgba(255,255,255,0.9),
          0 0 12px rgba(255,255,255,0.7);
        cursor: pointer;
        padding: 2px 4px;
      ">${c}</span>`,iconSize:[0,0],iconAnchor:[0,0]})},[B.name,Y,N,J]);return xe.jsx(_1,{position:[B.lat,B.lng],icon:he,eventHandlers:{click:()=>U(B.id)},children:xe.jsxs(Tu,{direction:"top",offset:[0,-5],opacity:.95,children:[xe.jsx("div",{className:"popup-place-name",children:ic(B,J==="greek")}),B.placeType&&xe.jsx("div",{className:"popup-place-type",children:B.placeType}),B.isEthnic&&xe.jsx("div",{className:"popup-place-type",style:{fontStyle:"italic"},children:"ethnic/people group"})]})})}function S1({place:B,isMemory:Y,opacity:N=1,onClick:U,language:J}){const he=Be.useMemo(()=>{const c=ic(B,J==="greek").replace(/\s*\([^)]*\)\s*/g,"").trim(),re=Y?"14px":"16px",fe=Y?N*.8:.95;return ly.divIcon({className:"water-label",html:`<span style="
        font-family: 'Crimson Text', Georgia, serif;
        font-size: ${re};
        font-style: italic;
        font-weight: 400;
        color: rgba(30, 64, 120, ${fe});
        letter-spacing: 0.08em;
        white-space: nowrap;
        text-shadow:
          -1px -1px 0 rgba(255,255,255,0.95),
          1px -1px 0 rgba(255,255,255,0.95),
          -1px 1px 0 rgba(255,255,255,0.95),
          1px 1px 0 rgba(255,255,255,0.95),
          0 0 10px rgba(255,255,255,0.9),
          0 0 15px rgba(255,255,255,0.8);
        cursor: pointer;
        padding: 2px 4px;
      ">${c}</span>`,iconSize:[0,0],iconAnchor:[0,0]})},[B.name,Y,N,J]);return xe.jsx(_1,{position:[B.lat,B.lng],icon:he,eventHandlers:{click:()=>U(B.id)},children:xe.jsxs(Tu,{direction:"top",offset:[0,-5],opacity:.95,children:[xe.jsx("div",{className:"popup-place-name",style:{color:"#1e4078"},children:ic(B,J==="greek")}),B.placeType&&xe.jsx("div",{className:"popup-place-type",children:B.placeType})]})})}function P1({place:B,isMemory:Y,opacity:N=1,isSelected:U,onClick:J,language:he}){const E="#2563eb",re=U?"#60a5fa":E,fe=Y?N*.6:.85;return xe.jsx(hp,{center:[B.lat,B.lng],radius:U?8:5,pathOptions:{fillColor:re,fillOpacity:fe,color:"#fff",weight:U?2:1.5,opacity:Y?N:1},eventHandlers:{click:()=>J(B.id)},children:xe.jsxs(Tu,{direction:"top",offset:[0,-5],opacity:.95,sticky:!0,children:[xe.jsx("div",{className:"popup-place-name",style:{color:E},children:ic(B,he==="greek")}),xe.jsx("div",{className:"popup-place-type",children:"river"}),Y&&B.memoryChapter&&xe.jsxs("div",{className:"popup-place-type ui-text",style:{fontSize:"0.75rem"},children:["from chapter ",B.memoryChapter]})]})})}function E1({place:B,isMemory:Y,opacity:N=1,isSelected:U,onClick:J,language:he}){const E="#78716c",c=Y?N*.6:.8;return xe.jsx(hp,{center:[B.lat,B.lng],radius:U?8:6,pathOptions:{fillColor:U?"#a8a29e":E,fillOpacity:c,color:"#fff",weight:U?2:1.5,opacity:Y?N:1},eventHandlers:{click:()=>J(B.id)},children:xe.jsxs(Tu,{direction:"top",offset:[0,-5],opacity:.95,sticky:!0,children:[xe.jsx("div",{className:"popup-place-name",children:ic(B,he==="greek")}),xe.jsx("div",{className:"popup-place-type",children:"mountain"})]})})}function C1({place:B,isMemory:Y,opacity:N=1,isSelected:U,onClick:J,memoryChapter:he,language:E}){const c="#c45a3b",re="#3a6b7c",fe="#b8973b";let Le=Y?re:c;U&&(Le=fe);const Ce=Y?N*.7:.9;return xe.jsx(hp,{center:[B.lat,B.lng],radius:U?10:7,pathOptions:{fillColor:Le,fillOpacity:Ce,color:"#fff",weight:U?3:2,opacity:Y?N:1},eventHandlers:{click:()=>J(B.id)},children:xe.jsxs(Tu,{direction:"top",offset:[0,-5],opacity:.95,sticky:!0,children:[xe.jsx("div",{className:"popup-place-name",children:ic(B,E==="greek")}),B.placeType&&xe.jsx("div",{className:"popup-place-type",children:B.placeType}),Y&&he&&xe.jsxs("div",{className:"popup-place-type ui-text",style:{fontSize:"0.75rem"},children:["from chapter ",he]})]})})}function i0({currentPlaces:B,memoryPlaces:Y,selectedPlace:N,placesData:U,onPlaceClick:J,currentChapter:he,language:E,bookInfo:c}){const[re,fe]=Be.useState("satellite"),Le=Be.useMemo(()=>{const Pe={regions:[],rivers:[],water:[],mountains:[],settlements:[]};return B.forEach(ft=>{const kt=T1(ft);kt==="region"?Pe.regions.push(ft):kt==="river"?Pe.rivers.push(ft):kt==="water"?Pe.water.push(ft):kt==="mountain"?Pe.mountains.push(ft):Pe.settlements.push(ft)}),Pe},[B]),Ce=Be.useMemo(()=>{const Pe={regions:[],rivers:[],water:[],mountains:[],settlements:[]};return Y.forEach(ft=>{const kt=T1(ft);kt==="region"?Pe.regions.push(ft):kt==="river"?Pe.rivers.push(ft):kt==="water"?Pe.water.push(ft):kt==="mountain"?Pe.mountains.push(ft):Pe.settlements.push(ft)}),Pe},[Y]);return xe.jsxs("div",{className:"map-panel",children:[xe.jsxs(fy,{center:[38,28],zoom:5,style:{height:"100%",width:"100%"},scrollWheelZoom:!0,children:[xe.jsxs(lp,{position:"topright",children:[xe.jsx(uy,{checked:!0,name:"Satellite Imagery",children:xe.jsx(oc,{attribution:" Esri",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",maxZoom:19,opacity:.7})}),xe.jsx(uy,{name:"Modern Political Map",children:xe.jsx(oc,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",maxZoom:19})}),xe.jsx(uy,{name:"CAWM Ancient World",children:xe.jsx(oc,{attribution:' <a href="https://cawm.lib.uiowa.edu/">CAWM</a> (CC BY 4.0)',url:"http://cawm.lib.uiowa.edu/tiles/{z}/{x}/{y}.png",maxZoom:11})})]}),xe.jsx(s0,{selectedPlace:N,placesData:U}),xe.jsx(n0,{onLayerChange:fe}),xe.jsx(o0,{dateRange:c==null?void 0:c.dateRange,isActive:re==="cawm"}),Ce.rivers.map(Pe=>xe.jsx(P1,{place:Pe,isMemory:!0,opacity:Pe.opacity,isSelected:N===Pe.id,onClick:J,language:E},`memory-river-${Pe.id}`)),Ce.mountains.map(Pe=>xe.jsx(E1,{place:Pe,isMemory:!0,opacity:Pe.opacity,isSelected:N===Pe.id,onClick:J,language:E},`memory-mountain-${Pe.id}`)),Ce.settlements.map(Pe=>xe.jsx(C1,{place:Pe,isMemory:!0,opacity:Pe.opacity,isSelected:N===Pe.id,onClick:J,memoryChapter:Pe.memoryChapter,language:E},`memory-settlement-${Pe.id}`)),Le.rivers.map(Pe=>xe.jsx(P1,{place:Pe,isMemory:!1,isSelected:N===Pe.id,onClick:J,language:E},`current-river-${Pe.id}`)),Le.mountains.map(Pe=>xe.jsx(E1,{place:Pe,isMemory:!1,isSelected:N===Pe.id,onClick:J,language:E},`current-mountain-${Pe.id}`)),Le.settlements.map(Pe=>xe.jsx(C1,{place:Pe,isMemory:!1,isSelected:N===Pe.id,onClick:J,language:E},`current-settlement-${Pe.id}`)),Ce.water.map(Pe=>xe.jsx(S1,{place:Pe,isMemory:!0,opacity:Pe.opacity,onClick:J,language:E},`memory-water-${Pe.id}`)),Ce.regions.map(Pe=>xe.jsx(A1,{place:Pe,isMemory:!0,opacity:Pe.opacity,onClick:J,language:E},`memory-region-${Pe.id}`)),Le.water.map(Pe=>xe.jsx(S1,{place:Pe,isMemory:!1,onClick:J,language:E},`current-water-${Pe.id}`)),Le.regions.map(Pe=>xe.jsx(A1,{place:Pe,isMemory:!1,onClick:J,language:E},`current-region-${Pe.id}`))]}),xe.jsxs("div",{className:"memory-legend",children:[xe.jsx("h4",{children:"Place Types"}),xe.jsxs("div",{className:"legend-item",children:[xe.jsx("span",{className:"legend-dot current"}),xe.jsx("span",{children:"Settlement"})]}),xe.jsxs("div",{className:"legend-item",children:[xe.jsx("span",{className:"legend-dot",style:{background:"#2563eb"}}),xe.jsx("span",{children:"River"})]}),xe.jsx("div",{className:"legend-item",children:xe.jsx("span",{style:{fontFamily:"Crimson Text, Georgia, serif",fontSize:"0.7rem",fontStyle:"italic",color:"#1e4078"},children:"Sea Name"})}),xe.jsx("div",{className:"legend-item",children:xe.jsx("span",{style:{fontFamily:"Source Sans Pro, sans-serif",fontSize:"0.6rem",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.15em",color:"#654321"},children:"REGION"})}),xe.jsxs("div",{className:"legend-item",children:[xe.jsx("span",{className:"legend-dot memory"}),xe.jsx("span",{children:"From prev. chapters"})]}),xe.jsxs("p",{style:{marginTop:"0.5rem",fontSize:"0.75rem",color:"var(--color-brown-light)"},children:["Ch. ",he,"  ",B.length," places"]})]})]})}const r0=10;function M1({booksIndex:B,placesData:Y,bookTexts:N}){var pa;const{bookId:U,chapterId:J}=o1(),he=Jg(),[E,c]=Be.useState(1),[re,fe]=Be.useState(null),[Le,Ce]=Be.useState(new Set),[Pe,ft]=Be.useState("english"),[kt,it]=Be.useState({}),Te=parseInt(U,10),Vt=(pa=B==null?void 0:B.books)==null?void 0:pa.find(Ca=>Ca.id===Te),Ft=N==null?void 0:N[Te];Be.useEffect(()=>{c(J?parseInt(J,10):1)},[J]);const mt=Be.useCallback(()=>{if(!Ft||!Y)return{current:[],memory:[]};const Ca=[],os=[],Ts=new Set,Je=new Set,It=Ft.chapters.find(gt=>gt.id===E);It&&It.places.forEach(gt=>{const jt=Y[gt.placeId];jt&&jt.lat&&jt.lng&&!Ts.has(gt.placeId)&&(Ts.add(gt.placeId),Ca.push(Or(rn({},jt),{opacity:1})))});for(let gt=1;gt<=r0;gt++){const jt=E-gt;if(jt<1)break;const Dt=Ft.chapters.find(tt=>tt.id===jt);if(!Dt)continue;const _e=1-gt*.09;Dt.places.forEach(tt=>{const Ot=Y[tt.placeId];Ot&&Ot.lat&&Ot.lng&&!Ts.has(tt.placeId)&&!Je.has(tt.placeId)&&(Je.add(tt.placeId),os.push(Or(rn({},Ot),{opacity:_e,memoryChapter:jt})))})}return{current:Ca,memory:os}},[Ft,Y,E]),Et=Ca=>{c(Ca),he(`/book/${Te}/chapter/${Ca}`,{replace:!0}),fe(null),Ce(new Set)},$t=Ca=>{fe(Ca),Ce(new Set([Ca]))},Ia=Ca=>{he(`/place/${Ca}`)},zt=()=>{const Ca=Pe==="english"?"greek":"english";ft(Ca),Ca==="greek"&&!kt[E]&&ca(Te,E)};Be.useEffect(()=>{Pe==="greek"&&!kt[E]&&ca(Te,E)},[E,Pe,kt,Te]);const ca=(Ca,os)=>np(null,null,function*(){try{const Je=`https://cts.perseids.org/api/cts/?request=GetPassage&urn=${`urn:cts:greekLit:tlg0016.tlg001.perseus-grc2:${Ca}.${os}`}`,gt=yield(yield fetch(Je)).text(),Dt=new DOMParser().parseFromString(gt,"text/xml"),_e=Dt.querySelector("passage")||Dt.querySelector("TEI");let tt="";_e&&(tt=_e.textContent.trim()),it(Ot=>Or(rn({},Ot),{[os]:tt||"Greek text not available for this chapter."}))}catch(Ts){console.error("Error fetching Greek text:",Ts),it(Je=>Or(rn({},Je),{[os]:"Error loading Greek text. Please try again."}))}});if(!Ft)return xe.jsx("div",{className:"loading",children:"Book not found..."});const{current:ba,memory:fs}=mt(),ma=Ft.chapters.find(Ca=>Ca.id===E);return xe.jsxs("div",{className:"reading-view",children:[xe.jsx(Qw,{bookData:Ft,bookInfo:Vt,currentChapter:E,currentChapterData:ma,placesData:Y,selectedPlace:re,highlightedPlaces:Le,onChapterChange:Et,onPlaceClick:$t,language:Pe,onLanguageToggle:zt,greekText:kt[E]}),xe.jsx(i0,{currentPlaces:ba,memoryPlaces:fs,selectedPlace:re,placesData:Y,onPlaceClick:Ia,currentChapter:E,language:Pe,bookInfo:Vt})]})}function h0({placesData:B,booksIndex:Y}){var re;const{placeId:N}=o1(),U=B==null?void 0:B[N],J=Be.useMemo(()=>{if(!(U!=null&&U.occurrences))return{};const fe={};return U.occurrences.forEach(Le=>{fe[Le.book]||(fe[Le.book]=[]),fe[Le.book].push(Le.chapter)}),Object.keys(fe).forEach(Le=>{fe[Le]=[...new Set(fe[Le])].sort((Ce,Pe)=>Ce-Pe)}),fe},[U]),he=Be.useMemo(()=>{if(!(U!=null&&U.occurrences)||!B)return[];const fe=new Set;U.occurrences.forEach(Ce=>{fe.add(`${Ce.book}-${Ce.chapter}`)});const Le={};return Object.values(B).forEach(Ce=>{var ft;if(Ce.id===N)return;let Pe=0;(ft=Ce.occurrences)==null||ft.forEach(kt=>{fe.has(`${kt.book}-${kt.chapter}`)&&Pe++}),Pe>0&&(Le[Ce.id]=Or(rn({},Ce),{coCount:Pe}))}),Object.values(Le).sort((Ce,Pe)=>Pe.coCount-Ce.coCount).slice(0,10)},[U,B,N]);if(!U)return xe.jsx("div",{className:"place-detail-view",children:xe.jsxs("div",{className:"place-info",children:[xe.jsx(Qr,{to:"/",className:"back-button ui-text",children:" Back to Books"}),xe.jsx("h2",{children:"Place not found"}),xe.jsxs("p",{children:['The place "',N,'" could not be found in the gazetteer.']})]})});const E=((re=U.occurrences)==null?void 0:re.length)||0,c=fe=>{var Ce;const Le=(Ce=Y==null?void 0:Y.books)==null?void 0:Ce.find(Pe=>Pe.id===fe);return(Le==null?void 0:Le.title)||`Book ${fe}`};return xe.jsxs("div",{className:"place-detail-view",children:[xe.jsxs("div",{className:"place-info",children:[xe.jsx(Qr,{to:"/",className:"back-button ui-text",children:" Back to Books"}),xe.jsx("h2",{children:U.name}),U.lat&&U.lng&&xe.jsxs("div",{className:"place-coords",children:[U.lat.toFixed(4),"N, ",U.lng.toFixed(4),"E"]}),U.placeType&&xe.jsxs("div",{className:"place-description",children:[xe.jsx("strong",{children:"Type:"})," ",U.placeType,U.isEthnic&&xe.jsx("span",{children:" (ethnic designation)"})]}),xe.jsxs("div",{className:"place-links",children:[U.pleiadesUri&&xe.jsx("a",{href:U.pleiadesUri,target:"_blank",rel:"noopener noreferrer",children:"View in Pleiades"}),U.geonamesUri&&xe.jsx("a",{href:U.geonamesUri,target:"_blank",rel:"noopener noreferrer",children:"View in GeoNames"})]}),xe.jsxs("div",{className:"occurrences-section",children:[xe.jsxs("h3",{children:[E," occurrence",E!==1?"s":""," in the Histories"]}),Object.entries(J).map(([fe,Le])=>xe.jsxs("div",{style:{marginBottom:"1rem"},children:[xe.jsx("h4",{style:{fontSize:"1rem",marginBottom:"0.5rem"},children:c(parseInt(fe))}),xe.jsx("ul",{className:"occurrence-list",children:Le.map(Ce=>xe.jsx("li",{className:"occurrence-item",children:xe.jsxs(Qr,{to:`/book/${fe}/chapter/${Ce}`,children:["Chapter ",Ce]})},`${fe}-${Ce}`))})]},fe))]}),he.length>0&&xe.jsxs("div",{className:"occurrences-section",style:{marginTop:"2rem"},children:[xe.jsx("h3",{children:"Often mentioned together with"}),xe.jsx("ul",{className:"occurrence-list",children:he.map(fe=>xe.jsxs("li",{className:"occurrence-item",children:[xe.jsx(Qr,{to:`/place/${fe.id}`,children:fe.name}),xe.jsxs("span",{className:"ui-text",style:{color:"var(--color-brown-light)",marginLeft:"0.5rem"},children:["(",fe.coCount," shared chapters)"]})]},fe.id))})]})]}),xe.jsx("div",{className:"place-detail-map",children:U.lat&&U.lng?xe.jsxs(fy,{center:[U.lat,U.lng],zoom:6,style:{height:"100%",width:"100%"},scrollWheelZoom:!0,children:[xe.jsx(oc,{attribution:" Esri  Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",maxZoom:19,opacity:.7}),he.filter(fe=>fe.lat&&fe.lng).map(fe=>{const Le=Math.max(...he.map(ft=>ft.coCount)),Ce=Math.max(1,Math.min(10,fe.coCount/Le*8)),Pe=Math.max(.3,Math.min(.8,fe.coCount/Le*.7+.1));return xe.jsx($w,{positions:[[U.lat,U.lng],[fe.lat,fe.lng]],pathOptions:{color:"#3a6b7c",weight:Ce,opacity:Pe,dashArray:"5, 10"}},`line-${fe.id}`)}),he.filter(fe=>fe.lat&&fe.lng).map(fe=>xe.jsx(hp,{center:[fe.lat,fe.lng],radius:5,pathOptions:{fillColor:"#3a6b7c",fillOpacity:.6,color:"#fff",weight:1},children:xe.jsxs(cy,{children:[xe.jsx("div",{className:"popup-place-name",children:fe.name}),xe.jsx(Qr,{to:`/place/${fe.id}`,className:"ui-text",style:{fontSize:"0.85rem"},children:"View details"})]})},fe.id)),xe.jsx(hp,{center:[U.lat,U.lng],radius:12,pathOptions:{fillColor:"#c45a3b",fillOpacity:.9,color:"#fff",weight:3},children:xe.jsxs(cy,{children:[xe.jsx("div",{className:"popup-place-name",children:U.name}),U.placeType&&xe.jsx("div",{className:"popup-place-type",children:U.placeType})]})})]}):xe.jsx("div",{className:"loading",style:{background:"var(--color-parchment)"},children:xe.jsx("p",{children:"No coordinates available for this place"})})})]})}function l0(){return xe.jsx("div",{className:"about-view",children:xe.jsxs("div",{className:"about-content",children:[xe.jsx("h2",{children:"About HestiaViz Redux"}),xe.jsxs("p",{children:["This is a reconstruction of ",xe.jsx("strong",{children:"HestiaViz"}),", originally developed as part of the HESTIA project (Herodotus Encoded Space-Text-Imaging Archive) at the Open University, UK."]}),xe.jsx("h3",{children:"The Original Project"}),xe.jsxs("p",{children:["HESTIA was a collaborative digital humanities project that explored the spatial dimensions of Herodotus's ",xe.jsx("em",{children:"Histories"}),'. The project created tools for "geo-reading"  understanding how ancient narratives construct and move through geographic space.']}),xe.jsxs("p",{children:["The original HestiaViz interface was built on ",xe.jsx("strong",{children:"GapVis"})," (Google Ancient Places Visualization), a Backbone.js application created by Nick Rabinowitz. When the Open University servers were decommissioned and Google Maps API policies changed, the original became inaccessible."]}),xe.jsx("h3",{children:"This Reconstruction"}),xe.jsx("p",{children:"HestiaViz Redux preserves the core scholarly utility of the original: the ability to read Herodotus while visualizing his geographic imagination. Key features include:"}),xe.jsxs("ul",{children:[xe.jsxs("li",{children:[xe.jsx("strong",{children:"Bidirectional linking"})," between text and map"]}),xe.jsxs("li",{children:[xe.jsx("strong",{children:"Geographic memory"}),"  showing places from previous chapters with fading opacity"]}),xe.jsxs("li",{children:[xe.jsx("strong",{children:"641 annotated places"})," linked to the Pleiades gazetteer"]}),xe.jsxs("li",{children:[xe.jsx("strong",{children:"8,077 place mentions"})," across all nine books"]})]}),xe.jsx("h3",{children:"Data Sources"}),xe.jsxs("p",{children:["Place annotations come from the original HESTIA project, preserved in"," ",xe.jsx("a",{href:"https://recogito.pelagios.org/document/tjrrsqn4dwmgep",target:"_blank",rel:"noopener noreferrer",children:"Recogito"}),". The text is A.D. Godley's translation from the"," ",xe.jsx("a",{href:"http://www.perseus.tufts.edu/hopper/text?doc=Perseus%3Atext%3A1999.01.0126",target:"_blank",rel:"noopener noreferrer",children:"Perseus Digital Library"}),". Place coordinates are linked to"," ",xe.jsx("a",{href:"https://pleiades.stoa.org/",target:"_blank",rel:"noopener noreferrer",children:"Pleiades"}),", the gazetteer of ancient places."]}),xe.jsx("h3",{children:"Links"}),xe.jsxs("ul",{className:"links-list",children:[xe.jsx("li",{children:xe.jsx("a",{href:"https://hestia.open.ac.uk/",target:"_blank",rel:"noopener noreferrer",children:"HESTIA Project (archived)"})}),xe.jsx("li",{children:xe.jsx("a",{href:"https://github.com/nrabinowitz/gapvis",target:"_blank",rel:"noopener noreferrer",children:"GapVis source code"})}),xe.jsx("li",{children:xe.jsx("a",{href:"https://pelagios.org/",target:"_blank",rel:"noopener noreferrer",children:"Pelagios Network"})}),xe.jsx("li",{children:xe.jsx("a",{href:"https://recogito.pelagios.org/",target:"_blank",rel:"noopener noreferrer",children:"Recogito annotation platform"})})]}),xe.jsxs("p",{className:"credits",children:["Original HESTIA team: Elton Barker, Stefan Bouzarovski, Christopher Pelling, Leif Isaksen.",xe.jsx("br",{}),"Redux reconstruction: 2025."]})]})})}const Fm={books:[{id:1,title:"Book 1: Clio",chapterCount:216,maxChapterId:216,placeCount:1339,dateRange:{start:-750,end:-547,description:"Lydian kings and Persian expansion"}},{id:2,title:"Book 2: Euterpe",chapterCount:182,maxChapterId:182,placeCount:905,dateRange:{start:-750,end:-525,description:"Egyptian history and customs"}},{id:3,title:"Book 3: Thalia",chapterCount:160,maxChapterId:160,placeCount:808,dateRange:{start:-529,end:-520,description:"Cambyses and rise of Darius"}},{id:4,title:"Book 4: Melpomene",chapterCount:205,maxChapterId:205,placeCount:1287,dateRange:{start:-520,end:-513,description:"Scythian expedition"}},{id:5,title:"Book 5: Terpsichore",chapterCount:125,maxChapterId:126,placeCount:1012,dateRange:{start:-499,end:-494,description:"Ionian Revolt begins"}},{id:6,title:"Book 6: Erato",chapterCount:139,maxChapterId:140,placeCount:1012,dateRange:{start:-494,end:-490,description:"End of Ionian Revolt, Marathon"}},{id:7,title:"Book 7: Polymnia",chapterCount:237,maxChapterId:239,placeCount:786,dateRange:{start:-481,end:-480,description:"Xerxes' invasion, Thermopylae"}},{id:8,title:"Book 8: Urania",chapterCount:142,maxChapterId:144,placeCount:525,dateRange:{start:-480,end:-480,description:"Battle of Salamis"}},{id:9,title:"Book 9: Calliope",chapterCount:122,maxChapterId:122,placeCount:403,dateRange:{start:-479,end:-479,description:"Battles of Plataea and Mycale"}}]},d0={places:JSON.parse('{"845":{"id":"845","name":"Atlanticus Oceanus","lat":42.97665274736841,"lng":-7.072833872807018,"pleiadesUri":"http://pleiades.stoa.org/places/845","placeType":"water-open","isEthnic":false,"occurrences":[{"book":1,"chapter":203}]},"1004":{"id":"1004","name":"(H)Adriaticum/Superum Mare","lat":42.7752864,"lng":15.885196,"pleiadesUri":"http://pleiades.stoa.org/places/1004","placeType":"water-open","isEthnic":false,"occurrences":[{"book":1,"chapter":163},{"book":4,"chapter":33}]},"1046":{"id":"1046","name":"Ionium Mare","lat":39.03244647555555,"lng":19.674861075555555,"pleiadesUri":"http://pleiades.stoa.org/places/1046","placeType":"water-open","isEthnic":false,"occurrences":[{"book":5,"chapter":50},{"book":7,"chapter":20}]},"1052":{"id":"1052","name":"Italia","lat":42.5,"lng":12.5,"pleiadesUri":"http://pleiades.stoa.org/places/1052","placeType":"region","isEthnic":false,"occurrences":[{"book":3,"chapter":138}]},"1224":{"id":"1224","name":"Pontus Euxinus","lat":43.0786852,"lng":34.7425505,"pleiadesUri":"http://pleiades.stoa.org/places/1224","placeType":"water-open","isEthnic":false,"occurrences":[{"book":1,"chapter":6},{"book":1,"chapter":72},{"book":1,"chapter":76},{"book":1,"chapter":110},{"book":2,"chapter":35},{"book":2,"chapter":35},{"book":3,"chapter":93},{"book":4,"chapter":8},{"book":4,"chapter":8},{"book":4,"chapter":11},{"book":4,"chapter":25},{"book":4,"chapter":39},{"book":4,"chapter":46},{"book":4,"chapter":46},{"book":4,"chapter":81},{"book":4,"chapter":85},{"book":4,"chapter":86},{"book":4,"chapter":86},{"book":4,"chapter":86},{"book":4,"chapter":87},{"book":4,"chapter":87},{"book":4,"chapter":87},{"book":4,"chapter":89},{"book":4,"chapter":90},{"book":4,"chapter":95},{"book":4,"chapter":99},{"book":6,"chapter":5},{"book":6,"chapter":26},{"book":6,"chapter":33}]},"1273":{"id":"1273","name":"Scythia","lat":47.5,"lng":27.5,"pleiadesUri":"http://pleiades.stoa.org/places/1273","placeType":"region","isEthnic":false,"occurrences":[{"book":2,"chapter":25},{"book":2,"chapter":103},{"book":2,"chapter":110},{"book":2,"chapter":111},{"book":2,"chapter":167},{"book":3,"chapter":134},{"book":3,"chapter":134},{"book":4,"chapter":1},{"book":4,"chapter":1},{"book":4,"chapter":1},{"book":4,"chapter":1},{"book":4,"chapter":2},{"book":4,"chapter":3},{"book":4,"chapter":3},{"book":4,"chapter":4},{"book":4,"chapter":7},{"book":4,"chapter":7},{"book":4,"chapter":8},{"book":4,"chapter":11},{"book":4,"chapter":12},{"book":4,"chapter":12},{"book":4,"chapter":14},{"book":4,"chapter":14},{"book":4,"chapter":19},{"book":4,"chapter":20},{"book":4,"chapter":20},{"book":4,"chapter":21},{"book":4,"chapter":23},{"book":4,"chapter":25},{"book":4,"chapter":28},{"book":4,"chapter":28},{"book":4,"chapter":28},{"book":4,"chapter":32},{"book":4,"chapter":33},{"book":4,"chapter":46},{"book":4,"chapter":50},{"book":4,"chapter":51},{"book":4,"chapter":52},{"book":4,"chapter":52},{"book":4,"chapter":53},{"book":4,"chapter":53},{"book":4,"chapter":55},{"book":4,"chapter":56},{"book":4,"chapter":57},{"book":4,"chapter":58},{"book":4,"chapter":59},{"book":4,"chapter":59},{"book":4,"chapter":59},{"book":4,"chapter":59},{"book":4,"chapter":59},{"book":4,"chapter":64},{"book":4,"chapter":64},{"book":4,"chapter":66},{"book":4,"chapter":67},{"book":4,"chapter":68},{"book":4,"chapter":68},{"book":4,"chapter":71},{"book":4,"chapter":71},{"book":4,"chapter":72},{"book":4,"chapter":72},{"book":4,"chapter":72},{"book":4,"chapter":73},{"book":4,"chapter":73},{"book":4,"chapter":75},{"book":4,"chapter":76},{"book":4,"chapter":76},{"book":4,"chapter":76},{"book":4,"chapter":76},{"book":4,"chapter":78},{"book":4,"chapter":78},{"book":4,"chapter":78},{"book":4,"chapter":78},{"book":4,"chapter":78},{"book":4,"chapter":79},{"book":4,"chapter":79},{"book":4,"chapter":79},{"book":4,"chapter":79},{"book":4,"chapter":79},{"book":4,"chapter":80},{"book":4,"chapter":80},{"book":4,"chapter":81},{"book":4,"chapter":81},{"book":4,"chapter":81},{"book":4,"chapter":81},{"book":4,"chapter":81},{"book":4,"chapter":81},{"book":4,"chapter":82},{"book":4,"chapter":83},{"book":4,"chapter":83},{"book":4,"chapter":92},{"book":4,"chapter":97},{"book":4,"chapter":97},{"book":4,"chapter":98},{"book":4,"chapter":99},{"book":4,"chapter":99},{"book":4,"chapter":99},{"book":4,"chapter":100},{"book":4,"chapter":101},{"book":4,"chapter":102},{"book":4,"chapter":102},{"book":4,"chapter":105},{"book":4,"chapter":105},{"book":4,"chapter":110},{"book":4,"chapter":110},{"book":4,"chapter":110},{"book":4,"chapter":111},{"book":4,"chapter":111},{"book":4,"chapter":111},{"book":4,"chapter":112},{"book":4,"chapter":113},{"book":4,"chapter":118},{"book":4,"chapter":119},{"book":4,"chapter":119},{"book":4,"chapter":120},{"book":4,"chapter":121},{"book":4,"chapter":122},{"book":4,"chapter":122},{"book":4,"chapter":122},{"book":4,"chapter":124},{"book":4,"chapter":124},{"book":4,"chapter":125},{"book":4,"chapter":125},{"book":4,"chapter":125},{"book":4,"chapter":125},{"book":4,"chapter":125},{"book":4,"chapter":125},{"book":4,"chapter":125},{"book":4,"chapter":125},{"book":4,"chapter":125},{"book":4,"chapter":126},{"book":4,"chapter":126},{"book":4,"chapter":127},{"book":4,"chapter":127},{"book":4,"chapter":128},{"book":4,"chapter":128},{"book":4,"chapter":128},{"book":4,"chapter":128},{"book":4,"chapter":128},{"book":4,"chapter":129},{"book":4,"chapter":129},{"book":4,"chapter":129},{"book":4,"chapter":129},{"book":4,"chapter":129},{"book":4,"chapter":130},{"book":4,"chapter":130},{"book":4,"chapter":132},{"book":4,"chapter":132},{"book":4,"chapter":133},{"book":4,"chapter":134},{"book":4,"chapter":134},{"book":4,"chapter":134},{"book":4,"chapter":134},{"book":4,"chapter":134},{"book":4,"chapter":134},{"book":4,"chapter":134},{"book":4,"chapter":135},{"book":4,"chapter":135},{"book":4,"chapter":136},{"book":4,"chapter":136},{"book":4,"chapter":136},{"book":4,"chapter":136},{"book":4,"chapter":137},{"book":4,"chapter":137},{"book":4,"chapter":139},{"book":4,"chapter":139},{"book":4,"chapter":139},{"book":4,"chapter":139},{"book":4,"chapter":140},{"book":4,"chapter":140},{"book":4,"chapter":140},{"book":4,"chapter":142},{"book":4,"chapter":143},{"book":5,"chapter":24},{"book":5,"chapter":27},{"book":5,"chapter":28},{"book":6,"chapter":40},{"book":6,"chapter":40},{"book":6,"chapter":40},{"book":6,"chapter":41},{"book":6,"chapter":84},{"book":6,"chapter":84},{"book":6,"chapter":84},{"book":6,"chapter":84},{"book":6,"chapter":84},{"book":6,"chapter":84},{"book":7,"chapter":10},{"book":7,"chapter":10},{"book":7,"chapter":10},{"book":7,"chapter":10},{"book":7,"chapter":10},{"book":7,"chapter":18},{"book":7,"chapter":20},{"book":7,"chapter":20},{"book":7,"chapter":52},{"book":7,"chapter":64},{"book":7,"chapter":64},{"book":7,"chapter":64}]},"1306":{"id":"1306","name":"Syria","lat":37.5,"lng":37.5,"pleiadesUri":"http://pleiades.stoa.org/places/1306","placeType":"unknown","isEthnic":false,"occurrences":[{"book":1,"chapter":6},{"book":1,"chapter":72},{"book":1,"chapter":72},{"book":1,"chapter":76},{"book":1,"chapter":76},{"book":2,"chapter":12},{"book":2,"chapter":13},{"book":2,"chapter":13},{"book":2,"chapter":14},{"book":2,"chapter":22},{"book":2,"chapter":104},{"book":2,"chapter":104},{"book":2,"chapter":106},{"book":2,"chapter":118},{"book":2,"chapter":118},{"book":2,"chapter":152},{"book":2,"chapter":152},{"book":2,"chapter":158},{"book":2,"chapter":158},{"book":2,"chapter":159},{"book":2,"chapter":160},{"book":3,"chapter":5},{"book":3,"chapter":5},{"book":3,"chapter":6},{"book":3,"chapter":6},{"book":3,"chapter":62},{"book":3,"chapter":64},{"book":3,"chapter":90},{"book":3,"chapter":91},{"book":3,"chapter":91},{"book":5,"chapter":49}]},"1332":{"id":"1332","name":"Thessalia","lat":39.6,"lng":22.2,"pleiadesUri":"http://pleiades.stoa.org/places/1332","placeType":"region","isEthnic":true,"occurrences":[{"book":1,"chapter":57},{"book":3,"chapter":96},{"book":5,"chapter":63},{"book":5,"chapter":63},{"book":5,"chapter":64},{"book":5,"chapter":64},{"book":5,"chapter":94},{"book":6,"chapter":72},{"book":6,"chapter":74},{"book":6,"chapter":127},{"book":7,"chapter":6},{"book":7,"chapter":6},{"book":7,"chapter":108},{"book":7,"chapter":128},{"book":7,"chapter":129},{"book":7,"chapter":129},{"book":7,"chapter":129},{"book":7,"chapter":129},{"book":7,"chapter":130},{"book":7,"chapter":130},{"book":7,"chapter":172},{"book":7,"chapter":172},{"book":7,"chapter":173},{"book":7,"chapter":173},{"book":7,"chapter":173},{"book":7,"chapter":173},{"book":7,"chapter":173},{"book":7,"chapter":174},{"book":7,"chapter":175},{"book":7,"chapter":182},{"book":7,"chapter":196},{"book":7,"chapter":196},{"book":7,"chapter":198},{"book":7,"chapter":208},{"book":7,"chapter":213},{"book":7,"chapter":232},{"book":9,"chapter":1},{"book":9,"chapter":1},{"book":9,"chapter":32},{"book":9,"chapter":77},{"book":9,"chapter":89},{"book":9,"chapter":89}]},"29475":{"id":"29475","name":"Arabia","lat":27.5,"lng":42.5,"pleiadesUri":"http://pleiades.stoa.org/places/29475","placeType":"region","isEthnic":false,"occurrences":[{"book":2,"chapter":12},{"book":2,"chapter":13},{"book":2,"chapter":13},{"book":2,"chapter":14},{"book":2,"chapter":16},{"book":2,"chapter":20},{"book":2,"chapter":31},{"book":2,"chapter":73},{"book":2,"chapter":75},{"book":2,"chapter":76},{"book":2,"chapter":76},{"book":2,"chapter":141},{"book":2,"chapter":141},{"book":2,"chapter":158},{"book":2,"chapter":158},{"book":3,"chapter":4},{"book":3,"chapter":5},{"book":3,"chapter":7},{"book":3,"chapter":8},{"book":3,"chapter":9},{"book":3,"chapter":9},{"book":3,"chapter":88},{"book":3,"chapter":88},{"book":3,"chapter":91},{"book":3,"chapter":97},{"book":3,"chapter":107},{"book":3,"chapter":107},{"book":3,"chapter":109},{"book":3,"chapter":109},{"book":3,"chapter":109},{"book":3,"chapter":111},{"book":3,"chapter":111},{"book":3,"chapter":111},{"book":3,"chapter":112},{"book":3,"chapter":112},{"book":4,"chapter":39}]},"29482":{"id":"29482","name":"Ari(m)aspai","lat":32.5,"lng":62.5,"pleiadesUri":"http://pleiades.stoa.org/places/29482","placeType":"unknown","isEthnic":true,"occurrences":[{"book":4,"chapter":13},{"book":4,"chapter":13},{"book":4,"chapter":13},{"book":4,"chapter":15},{"book":4,"chapter":28}]},"29492":{"id":"29492","name":"(As)Syria","lat":37.5,"lng":37.5,"pleiadesUri":"http://pleiades.stoa.org/places/29492","placeType":"region","isEthnic":true,"occurrences":[{"book":1,"chapter":1},{"book":1,"chapter":95},{"book":1,"chapter":95},{"book":1,"chapter":102},{"book":1,"chapter":102},{"book":1,"chapter":102},{"book":1,"chapter":103},{"book":1,"chapter":107},{"book":1,"chapter":131},{"book":1,"chapter":132},{"book":1,"chapter":178},{"book":1,"chapter":178},{"book":1,"chapter":184},{"book":1,"chapter":185},{"book":1,"chapter":188},{"book":1,"chapter":192},{"book":1,"chapter":193},{"book":1,"chapter":193},{"book":1,"chapter":193},{"book":1,"chapter":194},{"book":1,"chapter":196},{"book":1,"chapter":199},{"book":2,"chapter":17},{"book":2,"chapter":17},{"book":2,"chapter":31},{"book":2,"chapter":141},{"book":2,"chapter":150},{"book":3,"chapter":91},{"book":3,"chapter":155},{"book":4,"chapter":39},{"book":4,"chapter":39},{"book":4,"chapter":87},{"book":4,"chapter":87},{"book":6,"chapter":54},{"book":7,"chapter":9},{"book":7,"chapter":62},{"book":7,"chapter":63}]},"29547":{"id":"29547","name":"Drangiane/Zarangiane","lat":32.5,"lng":62.5,"pleiadesUri":"http://pleiades.stoa.org/places/29547","placeType":"region","isEthnic":true,"occurrences":[{"book":3,"chapter":93},{"book":3,"chapter":117}]},"29713":{"id":"29713","name":"Persicus Sinus/Erythr(ae)um Mare","lat":27.0000001,"lng":50.9999999,"pleiadesUri":"http://pleiades.stoa.org/places/29713","placeType":"water-open","isEthnic":false,"occurrences":[{"book":1,"chapter":203},{"book":2,"chapter":9},{"book":2,"chapter":12},{"book":2,"chapter":13},{"book":2,"chapter":102},{"book":2,"chapter":158},{"book":2,"chapter":158},{"book":2,"chapter":159},{"book":4,"chapter":39},{"book":4,"chapter":42},{"book":4,"chapter":43}]},"39274":{"id":"39274","name":"Aethiopia","lat":14.125005,"lng":38.721522,"pleiadesUri":"http://pleiades.stoa.org/places/39274","placeType":"unknown","isEthnic":false,"occurrences":[{"book":2,"chapter":12},{"book":2,"chapter":13},{"book":2,"chapter":23},{"book":2,"chapter":24},{"book":2,"chapter":29},{"book":2,"chapter":30},{"book":2,"chapter":30},{"book":2,"chapter":30},{"book":2,"chapter":30},{"book":2,"chapter":30},{"book":2,"chapter":30},{"book":2,"chapter":30},{"book":2,"chapter":31},{"book":2,"chapter":32},{"book":2,"chapter":32},{"book":2,"chapter":32},{"book":2,"chapter":43},{"book":2,"chapter":86},{"book":2,"chapter":100},{"book":2,"chapter":104},{"book":2,"chapter":104},{"book":2,"chapter":106},{"book":2,"chapter":110},{"book":2,"chapter":129},{"book":2,"chapter":134},{"book":2,"chapter":137},{"book":2,"chapter":137},{"book":2,"chapter":137},{"book":2,"chapter":138},{"book":2,"chapter":139},{"book":2,"chapter":140},{"book":2,"chapter":140},{"book":2,"chapter":141},{"book":2,"chapter":147},{"book":2,"chapter":152},{"book":2,"chapter":152},{"book":2,"chapter":161},{"book":3,"chapter":17},{"book":3,"chapter":17},{"book":3,"chapter":17},{"book":3,"chapter":19},{"book":3,"chapter":20},{"book":3,"chapter":20},{"book":3,"chapter":21},{"book":3,"chapter":21},{"book":3,"chapter":21},{"book":3,"chapter":21},{"book":3,"chapter":22},{"book":3,"chapter":22},{"book":3,"chapter":23},{"book":3,"chapter":23},{"book":3,"chapter":24},{"book":3,"chapter":25},{"book":3,"chapter":25},{"book":3,"chapter":25},{"book":3,"chapter":26},{"book":3,"chapter":30},{"book":3,"chapter":93},{"book":3,"chapter":97},{"book":3,"chapter":97},{"book":3,"chapter":97},{"book":3,"chapter":97},{"book":3,"chapter":101},{"book":3,"chapter":101},{"book":3,"chapter":114},{"book":4,"chapter":197},{"book":7,"chapter":9},{"book":7,"chapter":18},{"book":7,"chapter":69},{"book":7,"chapter":69},{"book":7,"chapter":69},{"book":7,"chapter":70},{"book":7,"chapter":70},{"book":7,"chapter":70}]},"39290":{"id":"39290","name":"Arabicus Sinus/Erythr(ae)um/Rubrum Mare","lat":19,"lng":39.5,"pleiadesUri":"http://pleiades.stoa.org/places/39290","placeType":"water-open","isEthnic":false,"occurrences":[{"book":1,"chapter":1},{"book":1,"chapter":180},{"book":1,"chapter":189},{"book":2,"chapter":12},{"book":2,"chapter":102},{"book":2,"chapter":158},{"book":2,"chapter":158},{"book":2,"chapter":158},{"book":2,"chapter":159},{"book":3,"chapter":9},{"book":3,"chapter":30},{"book":4,"chapter":38},{"book":4,"chapter":39},{"book":4,"chapter":41},{"book":4,"chapter":42},{"book":4,"chapter":42},{"book":6,"chapter":20}]},"50004":{"id":"50004","name":"India","lat":22.5,"lng":77.5,"pleiadesUri":"http://pleiades.stoa.org/places/50004","placeType":"region","isEthnic":true,"occurrences":[{"book":1,"chapter":193},{"book":3,"chapter":38},{"book":3,"chapter":38},{"book":3,"chapter":94},{"book":3,"chapter":97},{"book":3,"chapter":98},{"book":3,"chapter":98},{"book":3,"chapter":98},{"book":3,"chapter":98},{"book":3,"chapter":98},{"book":3,"chapter":98},{"book":3,"chapter":98},{"book":3,"chapter":99},{"book":3,"chapter":100},{"book":3,"chapter":101},{"book":3,"chapter":101},{"book":3,"chapter":102},{"book":3,"chapter":102},{"book":3,"chapter":102},{"book":3,"chapter":104},{"book":3,"chapter":104},{"book":3,"chapter":104},{"book":3,"chapter":104},{"book":3,"chapter":105},{"book":3,"chapter":105},{"book":3,"chapter":106},{"book":3,"chapter":106},{"book":3,"chapter":106},{"book":5,"chapter":3},{"book":7,"chapter":9},{"book":7,"chapter":64},{"book":7,"chapter":70},{"book":7,"chapter":70},{"book":7,"chapter":86}]},"59688":{"id":"59688","name":"Aparytai","lat":32.5,"lng":67.5,"pleiadesUri":"http://pleiades.stoa.org/places/59688","placeType":"people","isEthnic":true,"occurrences":[{"book":3,"chapter":91}]},"59716":{"id":"59716","name":"Astakenoi/Sattagydai","lat":37.5,"lng":67.5,"pleiadesUri":"http://pleiades.stoa.org/places/59716","placeType":"people","isEthnic":true,"occurrences":[{"book":3,"chapter":91}]},"59773":{"id":"59773","name":"Choaspes (river)","lat":29.059230300000003,"lng":70.12808435,"pleiadesUri":"http://pleiades.stoa.org/places/59773","placeType":"river","isEthnic":false,"occurrences":[{"book":1,"chapter":188},{"book":1,"chapter":189}]},"59787":{"id":"59787","name":"Daradrai/Dadikai","lat":37.5,"lng":72.5,"pleiadesUri":"http://pleiades.stoa.org/places/59787","placeType":"people","isEthnic":true,"occurrences":[{"book":3,"chapter":91}]},"59788":{"id":"59788","name":"Dargamanes? (river)","lat":37.5,"lng":67.5,"pleiadesUri":"http://pleiades.stoa.org/places/59788","placeType":"river","isEthnic":true,"occurrences":[{"book":1,"chapter":153}]},"59820":{"id":"59820","name":"Gangaridae","lat":22.5,"lng":87.5,"pleiadesUri":"http://pleiades.stoa.org/places/59820","placeType":"unknown","isEthnic":true,"occurrences":[{"book":3,"chapter":91}]},"59851":{"id":"59851","name":"Indus/Sinthos/Phison (river)","lat":29.0592303,"lng":70.12808435,"pleiadesUri":"http://pleiades.stoa.org/places/59851","placeType":"river","isEthnic":false,"occurrences":[{"book":4,"chapter":44},{"book":4,"chapter":44}]},"59853":{"id":"59853","name":"Issedones","lat":37.5,"lng":92.5,"pleiadesUri":"http://pleiades.stoa.org/places/59853","placeType":"people","isEthnic":true,"occurrences":[{"book":4,"chapter":13},{"book":4,"chapter":13},{"book":4,"chapter":13},{"book":4,"chapter":16},{"book":4,"chapter":17},{"book":4,"chapter":25},{"book":4,"chapter":26},{"book":4,"chapter":26},{"book":4,"chapter":27},{"book":4,"chapter":33}]},"59921":{"id":"59921","name":"Massagetai","lat":37.5,"lng":62.5,"pleiadesUri":"http://pleiades.stoa.org/places/59921","placeType":"people","isEthnic":false,"occurrences":[{"book":1,"chapter":202},{"book":1,"chapter":204},{"book":1,"chapter":205},{"book":1,"chapter":206},{"book":1,"chapter":206},{"book":1,"chapter":206},{"book":1,"chapter":207},{"book":1,"chapter":207},{"book":1,"chapter":207},{"book":1,"chapter":208},{"book":1,"chapter":209},{"book":1,"chapter":209},{"book":1,"chapter":211},{"book":1,"chapter":212},{"book":1,"chapter":213},{"book":1,"chapter":213},{"book":1,"chapter":214},{"book":1,"chapter":215},{"book":1,"chapter":216},{"book":3,"chapter":36},{"book":4,"chapter":11},{"book":4,"chapter":172},{"book":7,"chapter":18}]},"59962":{"id":"59962","name":"Ottorokorai/Hyperboraei","lat":32.5,"lng":77.5,"pleiadesUri":"http://pleiades.stoa.org/places/59962","placeType":"unknown","isEthnic":true,"occurrences":[{"book":4,"chapter":13},{"book":4,"chapter":13},{"book":4,"chapter":32},{"book":4,"chapter":33},{"book":4,"chapter":33},{"book":4,"chapter":33},{"book":4,"chapter":34},{"book":4,"chapter":35},{"book":4,"chapter":36},{"book":4,"chapter":36}]},"59969":{"id":"59969","name":"Oxus (river)","lat":39.556608266666665,"lng":67.18936939999999,"pleiadesUri":"http://pleiades.stoa.org/places/59969","placeType":"river","isEthnic":false,"occurrences":[{"book":1,"chapter":202},{"book":1,"chapter":202},{"book":1,"chapter":209}]},"59977":{"id":"59977","name":"Paktyike?","lat":32.5,"lng":72.5,"pleiadesUri":"http://pleiades.stoa.org/places/59977","placeType":"region","isEthnic":true,"occurrences":[{"book":3,"chapter":93},{"book":3,"chapter":102}]},"59993":{"id":"59993","name":"Peukelaotis/Kaspatyros?","lat":34.16783,"lng":71.73742,"pleiadesUri":"http://pleiades.stoa.org/places/59993","placeType":"settlement","isEthnic":false,"occurrences":[{"book":3,"chapter":102}]},"60021":{"id":"60021","name":"Sacae","lat":37.5,"lng":72.5,"pleiadesUri":"http://pleiades.stoa.org/places/60021","placeType":"people","isEthnic":true,"occurrences":[{"book":1,"chapter":154},{"book":3,"chapter":93},{"book":7,"chapter":9},{"book":7,"chapter":64},{"book":7,"chapter":64},{"book":7,"chapter":64},{"book":7,"chapter":96},{"book":7,"chapter":184}]},"60058":{"id":"60058","name":"Sogdiana","lat":39.656498,"lng":66.947223,"pleiadesUri":"http://pleiades.stoa.org/places/60058","placeType":"region","isEthnic":true,"occurrences":[{"book":3,"chapter":93}]},"148127":{"id":"148127","name":"Massalia/Massilia","lat":43.299467,"lng":5.365307,"pleiadesUri":"http://pleiades.stoa.org/places/148127","placeType":"settlement","isEthnic":false,"occurrences":[{"book":5,"chapter":9}]},"207268":{"id":"207268","name":"Margus (river)","lat":44.7183621,"lng":21.0386919,"pleiadesUri":"http://pleiades.stoa.org/places/207268","placeType":"river","isEthnic":false,"occurrences":[{"book":4,"chapter":49},{"book":4,"chapter":49}]},"207269":{"id":"207269","name":"Maris(os) (river)","lat":46.5,"lng":20.5,"pleiadesUri":"http://pleiades.stoa.org/places/207269","placeType":"river","isEthnic":false,"occurrences":[{"book":4,"chapter":49}]},"207496":{"id":"207496","name":"Tibiskos (river)","lat":45.5,"lng":21.5,"pleiadesUri":"http://pleiades.stoa.org/places/207496","placeType":"river","isEthnic":false,"occurrences":[{"book":4,"chapter":49}]},"207513":{"id":"207513","name":"Triballi","lat":43.5,"lng":22.5,"pleiadesUri":"http://pleiades.stoa.org/places/207513","placeType":"labeled feature","isEthnic":false,"occurrences":[{"book":4,"chapter":49}]},"216717":{"id":"216717","name":"Athrys/Iatros/Ieterus (river)","lat":43.062716,"lng":25.605924,"pleiadesUri":"http://pleiades.stoa.org/places/216717","placeType":"river","isEthnic":false,"occurrences":[{"book":4,"chapter":49}]},"216817":{"id":"216817","name":"Getae","lat":44.5,"lng":25.5,"pleiadesUri":"http://pleiades.stoa.org/places/216817","placeType":"people","isEthnic":true,"occurrences":[{"book":4,"chapter":93},{"book":4,"chapter":94},{"book":4,"chapter":97},{"book":4,"chapter":97},{"book":4,"chapter":119},{"book":5,"chapter":3},{"book":5,"chapter":4}]},"216830":{"id":"216830","name":"Haemus M.","lat":42.7168715,"lng":24.91728,"pleiadesUri":"http://pleiades.stoa.org/places/216830","placeType":"mountain","isEthnic":false,"occurrences":[{"book":4,"chapter":49},{"book":4,"chapter":49}]},"216837":{"id":"216837","name":"Hierasos/Gerasus/Tiarantos? (river)","lat":46.847661,"lng":20.2732883,"pleiadesUri":"http://pleiades.stoa.org/places/216837","placeType":"river","isEthnic":false,"occurrences":[{"book":4,"chapter":48},{"book":4,"chapter":49}]},"216839":{"id":"216839","name":"Histria","lat":44.5476,"lng":28.7748,"pleiadesUri":"http://pleiades.stoa.org/places/216839","placeType":"settlement,fort","isEthnic":false,"occurrences":[{"book":2,"chapter":35}]},"216891":{"id":"216891","name":"Naparis? (river)","lat":44.5,"lng":27.5,"pleiadesUri":"http://pleiades.stoa.org/places/216891","placeType":"river","isEthnic":false,"occurrences":[{"book":4,"chapter":48},{"book":4,"chapter":49}]},"216906":{"id":"216906","name":"Odrysae","lat":42.61977194999999,"lng":25.33686355,"pleiadesUri":"http://pleiades.stoa.org/places/216906","placeType":"region","isEthnic":true,"occurrences":[{"book":4,"chapter":92}]},"216908":{"id":"216908","name":"Oescus (river)","lat":42.5159742,"lng":23.5370147,"pleiadesUri":"http://pleiades.stoa.org/places/216908","placeType":"river","isEthnic":false,"occurrences":[{"book":4,"chapter":49}]},"216947":{"id":"216947","name":"Pyretos (river)","lat":47.11498303333334,"lng":15.077231233333334,"pleiadesUri":"http://pleiades.stoa.org/places/216947","placeType":"river","isEthnic":false,"occurrences":[{"book":4,"chapter":48},{"book":4,"chapter":48}]},"216976":{"id":"216976","name":"Scythia Minor","lat":44.5,"lng":28.5,"pleiadesUri":"http://pleiades.stoa.org/places/216976","placeType":"labeled feature","isEthnic":true,"occurrences":[{"book":1,"chapter":15},{"book":1,"chapter":73},{"book":1,"chapter":73},{"book":1,"chapter":73},{"book":1,"chapter":73},{"book":1,"chapter":73},{"book":1,"chapter":74},{"book":1,"chapter":103},{"book":1,"chapter":104},{"book":1,"chapter":104},{"book":1,"chapter":104},{"book":1,"chapter":105},{"book":1,"chapter":105},{"book":1,"chapter":105},{"book":1,"chapter":106},{"book":1,"chapter":106},{"book":1,"chapter":130},{"book":1,"chapter":215}]},"226506":{"id":"226506","name":"Achilleios Dromos","lat":46.5,"lng":31.5,"pleiadesUri":"http://pleiades.stoa.org/places/226506","placeType":"unknown","isEthnic":false,"occurrences":[{"book":4,"chapter":56},{"book":4,"chapter":76}]},"226511":{"id":"226511","name":"Agathyrsoi","lat":47.5,"lng":27.5,"pleiadesUri":"http://pleiades.stoa.org/places/226511","placeType":"people","isEthnic":true,"occurrences":[{"book":4,"chapter":49},{"book":4,"chapter":78},{"book":4,"chapter":101},{"book":4,"chapter":103},{"book":4,"chapter":104},{"book":4,"chapter":119},{"book":4,"chapter":125},{"book":4,"chapter":125},{"book":4,"chapter":125},{"book":4,"chapter":125},{"book":4,"chapter":126}]},"226513":{"id":"226513","name":"Alazones","lat":47.5,"lng":31.5,"pleiadesUri":"http://pleiades.stoa.org/places/226513","placeType":"unknown","isEthnic":true,"occurrences":[{"book":4,"chapter":17},{"book":4,"chapter":17},{"book":4,"chapter":52},{"book":4,"chapter":53}]},"226531":{"id":"226531","name":"Basileioi","lat":45.5,"lng":33.5,"pleiadesUri":"http://pleiades.stoa.org/places/226531","placeType":"unknown","isEthnic":true,"occurrences":[{"book":4,"chapter":20},{"book":4,"chapter":20},{"book":4,"chapter":23},{"book":4,"chapter":57},{"book":4,"chapter":58},{"book":4,"chapter":59},{"book":4,"chapter":71}]},"226544":{"id":"226544","name":"Borysthenes (river)","lat":51.80271566666667,"lng":32.013616533333334,"pleiadesUri":"http://pleiades.stoa.org/places/226544","placeType":"river","isEthnic":false,"occurrences":[{"book":4,"chapter":5},{"book":4,"chapter":18},{"book":4,"chapter":18},{"book":4,"chapter":18},{"book":4,"chapter":24},{"book":4,"chapter":48},{"book":4,"chapter":53},{"book":4,"chapter":53},{"book":4,"chapter":53},{"book":4,"chapter":55},{"book":4,"chapter":55},{"book":4,"chapter":56},{"book":4,"chapter":71},{"book":4,"chapter":79},{"book":4,"chapter":81},{"book":4,"chapter":101},{"book":4,"chapter":101}]},"226546":{"id":"226546","name":"Olbia","lat":46.69238,"lng":31.9056,"pleiadesUri":"http://pleiades.stoa.org/places/226546","placeType":"settlement,cistern,port","isEthnic":true,"occurrences":[{"book":4,"chapter":17},{"book":4,"chapter":18},{"book":4,"chapter":18},{"book":4,"chapter":54},{"book":4,"chapter":78},{"book":4,"chapter":79},{"book":4,"chapter":79}]},"226547":{"id":"226547","name":"Borysthenitai","lat":46.5,"lng":32.5,"pleiadesUri":"http://pleiades.stoa.org/places/226547","placeType":"unknown","isEthnic":true,"occurrences":[{"book":4,"chapter":79}]},"226564":{"id":"226564","name":"Chersonesos","lat":44.6109122,"lng":33.4922867,"pleiadesUri":"http://pleiades.stoa.org/places/226564","placeType":"settlement","isEthnic":false,"occurrences":[{"book":6,"chapter":33},{"book":6,"chapter":33},{"book":6,"chapter":34},{"book":6,"chapter":34},{"book":6,"chapter":36},{"book":6,"chapter":36},{"book":6,"chapter":37},{"book":6,"chapter":38},{"book":6,"chapter":39},{"book":6,"chapter":39},{"book":6,"chapter":39},{"book":6,"chapter":39},{"book":6,"chapter":40},{"book":6,"chapter":40},{"book":6,"chapter":40},{"book":6,"chapter":41},{"book":6,"chapter":103},{"book":6,"chapter":104},{"book":6,"chapter":104},{"book":6,"chapter":104},{"book":6,"chapter":140},{"book":6,"chapter":140},{"book":6,"chapter":140}]},"226574":{"id":"226574","name":"Crobyzi","lat":47.5,"lng":30.5,"pleiadesUri":"http://pleiades.stoa.org/places/226574","placeType":"people","isEthnic":false,"occurrences":[{"book":4,"chapter":49}]},"226577":{"id":"226577","name":"Danuvius/Istros/Hister (river)","lat":45.16291,"lng":29.647293,"pleiadesUri":"http://pleiades.stoa.org/places/226577","placeType":"river","isEthnic":false,"occurrences":[{"book":2,"chapter":28},{"book":2,"chapter":34},{"book":2,"chapter":34},{"book":2,"chapter":35},{"book":2,"chapter":35},{"book":2,"chapter":35},{"book":2,"chapter":35},{"book":4,"chapter":48},{"book":4,"chapter":48},{"book":4,"chapter":49},{"book":4,"chapter":49},{"book":4,"chapter":49},{"book":4,"chapter":49},{"book":4,"chapter":49},{"book":4,"chapter":50},{"book":4,"chapter":50},{"book":4,"chapter":50},{"book":4,"chapter":50},{"book":4,"chapter":51},{"book":4,"chapter":52},{"book":4,"chapter":53},{"book":4,"chapter":80},{"book":4,"chapter":89},{"book":4,"chapter":89},{"book":4,"chapter":89},{"book":4,"chapter":93},{"book":4,"chapter":97},{"book":4,"chapter":99},{"book":4,"chapter":99},{"book":4,"chapter":99},{"book":4,"chapter":101},{"book":4,"chapter":101},{"book":4,"chapter":118},{"book":4,"chapter":122},{"book":4,"chapter":128},{"book":4,"chapter":133},{"book":4,"chapter":135},{"book":4,"chapter":135},{"book":4,"chapter":136},{"book":4,"chapter":139},{"book":4,"chapter":141},{"book":5,"chapter":9},{"book":5,"chapter":9},{"book":5,"chapter":10},{"book":7,"chapter":10},{"book":7,"chapter":10}]},"226603":{"id":"226603","name":"Gerros (river)","lat":46.87699559686738,"lng":35.44448538716876,"pleiadesUri":"http://pleiades.stoa.org/places/226603","placeType":"river","isEthnic":false,"occurrences":[{"book":4,"chapter":20},{"book":4,"chapter":20},{"book":4,"chapter":48},{"book":4,"chapter":56},{"book":4,"chapter":57}]},"226623":{"id":"226623","name":"Hippolaou Akra","lat":46.570165,"lng":32.147611,"pleiadesUri":"http://pleiades.stoa.org/places/226623","placeType":"settlement","isEthnic":false,"occurrences":[{"book":4,"chapter":54}]},"226628":{"id":"226628","name":"Hylaia","lat":46.5,"lng":32.5,"pleiadesUri":"http://pleiades.stoa.org/places/226628","placeType":"unknown","isEthnic":false,"occurrences":[{"book":4,"chapter":9},{"book":4,"chapter":55},{"book":4,"chapter":56},{"book":4,"chapter":76}]},"226630":{"id":"226630","name":"Hypanis (river)","lat":47.5349319,"lng":31.3343727,"pleiadesUri":"http://pleiades.stoa.org/places/226630","placeType":"river","isEthnic":false,"occurrences":[{"book":4,"chapter":18},{"book":4,"chapter":18},{"book":4,"chapter":48},{"book":4,"chapter":52},{"book":4,"chapter":52},{"book":4,"chapter":52},{"book":4,"chapter":52},{"book":4,"chapter":53},{"book":4,"chapter":53},{"book":4,"chapter":54},{"book":4,"chapter":81},{"book":4,"chapter":81}]},"226652":{"id":"226652","name":"Karkine","lat":46.21338,"lng":33.22264,"pleiadesUri":"http://pleiades.stoa.org/places/226652","placeType":"settlement","isEthnic":false,"occurrences":[{"book":4,"chapter":56}]},"226653":{"id":"226653","name":"Karkinites/Hypakyris? (river)","lat":46.5,"lng":33.5,"pleiadesUri":"http://pleiades.stoa.org/places/226653","placeType":"river","isEthnic":false,"occurrences":[{"book":4,"chapter":48},{"book":4,"chapter":56},{"book":4,"chapter":57}]},"226658":{"id":"226658","name":"Kerkinitis?","lat":45.18737,"lng":33.37015,"pleiadesUri":"http://pleiades.stoa.org/places/226658","placeType":"settlement","isEthnic":false,"occurrences":[{"book":4,"chapter":99}]},"226712":{"id":"226712","name":"Panticapes? (river)","lat":46.5,"lng":32.5,"pleiadesUri":"http://pleiades.stoa.org/places/226712","placeType":"river","isEthnic":false,"occurrences":[{"book":4,"chapter":18},{"book":4,"chapter":19},{"book":4,"chapter":48},{"book":4,"chapter":55}]},"226778":{"id":"226778","name":"Taurike Chersonesos","lat":44.883441823333335,"lng":34.27150174333333,"pleiadesUri":"http://pleiades.stoa.org/places/226778","placeType":"peninsula,region","isEthnic":false,"occurrences":[{"book":4,"chapter":3},{"book":4,"chapter":20},{"book":4,"chapter":99},{"book":4,"chapter":99},{"book":4,"chapter":99},{"book":4,"chapter":100},{"book":4,"chapter":100},{"book":4,"chapter":100},{"book":4,"chapter":103},{"book":4,"chapter":103},{"book":4,"chapter":103},{"book":4,"chapter":104},{"book":4,"chapter":119}]},"226793":{"id":"226793","name":"Tracheia Chersonesos","lat":44.5,"lng":33.5,"pleiadesUri":"http://pleiades.stoa.org/places/226793","placeType":"unknown","isEthnic":false,"occurrences":[{"book":4,"chapter":99}]},"226799":{"id":"226799","name":"Tyras (river)","lat":46.8329732,"lng":29.613982,"pleiadesUri":"http://pleiades.stoa.org/places/226799","placeType":"river","isEthnic":false,"occurrences":[{"book":4,"chapter":12},{"book":4,"chapter":48},{"book":4,"chapter":52},{"book":4,"chapter":53},{"book":4,"chapter":83}]},"236376":{"id":"236376","name":"Boreios/Gallicus/Cantabricus Oceanus","lat":42.9389421,"lng":-2.9808908,"pleiadesUri":"http://pleiades.stoa.org/places/236376","placeType":"water-open","isEthnic":false,"occurrences":[{"book":4,"chapter":38},{"book":4,"chapter":42}]},"255978":{"id":"255978","name":"Aphrodisias/Erythea/Iunonis Ins.","lat":36.53566,"lng":-6.29914,"pleiadesUri":"http://pleiades.stoa.org/places/255978","placeType":"island","isEthnic":false,"occurrences":[{"book":4,"chapter":8}]},"256177":{"id":"256177","name":"Gadeira/Gades/Col. Augusta Gaditana","lat":36.528381,"lng":-6.294444,"pleiadesUri":"http://pleiades.stoa.org/places/256177","placeType":"arch,theatre,townhouse,settlement","isEthnic":false,"occurrences":[{"book":4,"chapter":8}]},"256198":{"id":"256198","name":"Herakleios Porthmos/Gaditanum Fretum","lat":35.971667,"lng":-5.485833,"pleiadesUri":"http://pleiades.stoa.org/places/256198","placeType":"river,water-open","isEthnic":false,"occurrences":[{"book":1,"chapter":203},{"book":4,"chapter":8},{"book":4,"chapter":43}]},"256468":{"id":"256468","name":"Tartessos","lat":36.93672,"lng":-6.4119,"pleiadesUri":"http://pleiades.stoa.org/places/256468","placeType":"unlocated,settlement,port","isEthnic":false,"occurrences":[{"book":1,"chapter":163},{"book":1,"chapter":163},{"book":1,"chapter":163},{"book":1,"chapter":163},{"book":4,"chapter":152},{"book":4,"chapter":192}]},"275614":{"id":"275614","name":"Columnae Herculis","lat":35.9358335,"lng":-5.384583,"pleiadesUri":"http://pleiades.stoa.org/places/275614","placeType":"cape","isEthnic":false,"occurrences":[{"book":4,"chapter":42},{"book":4,"chapter":43},{"book":4,"chapter":152},{"book":4,"chapter":181},{"book":4,"chapter":185},{"book":4,"chapter":196}]},"275724":{"id":"275724","name":"Soloeis/Ampelusia Pr.","lat":35.7910308,"lng":-5.9236482,"pleiadesUri":"http://pleiades.stoa.org/places/275724","placeType":"cape","isEthnic":false,"occurrences":[{"book":2,"chapter":32}]},"314921":{"id":"314921","name":"Ziqua","lat":36.857569,"lng":10.327986,"pleiadesUri":"http://pleiades.stoa.org/places/314921","placeType":"amphitheatre,cemetery,villa,theatre,port,church,settlement,circus,bath","isEthnic":true,"occurrences":[{"book":1,"chapter":166},{"book":1,"chapter":167},{"book":3,"chapter":17},{"book":3,"chapter":17},{"book":3,"chapter":19},{"book":3,"chapter":19},{"book":4,"chapter":43},{"book":4,"chapter":195},{"book":4,"chapter":196},{"book":4,"chapter":196},{"book":4,"chapter":196},{"book":5,"chapter":42},{"book":6,"chapter":17}]},"334481":{"id":"334481","name":"Aethiopia","lat":32.5,"lng":3.5,"pleiadesUri":"http://pleiades.stoa.org/places/334481","placeType":"region","isEthnic":true,"occurrences":[{"book":4,"chapter":183},{"book":4,"chapter":183}]},"334616":{"id":"334616","name":"Salinarum L./Tritonis Palus","lat":33.5,"lng":8.5,"pleiadesUri":"http://pleiades.stoa.org/places/334616","placeType":"lake","isEthnic":false,"occurrences":[{"book":4,"chapter":178},{"book":4,"chapter":179},{"book":4,"chapter":180},{"book":4,"chapter":180},{"book":4,"chapter":180},{"book":4,"chapter":186},{"book":4,"chapter":187},{"book":4,"chapter":189}]},"344381":{"id":"344381","name":"Gindanes?","lat":33.5,"lng":11.5,"pleiadesUri":"http://pleiades.stoa.org/places/344381","placeType":"labeled feature","isEthnic":true,"occurrences":[{"book":4,"chapter":176},{"book":4,"chapter":177}]},"344414":{"id":"344414","name":"Kinyps (river)","lat":32.5,"lng":14.5,"pleiadesUri":"http://pleiades.stoa.org/places/344414","placeType":"river","isEthnic":false,"occurrences":[{"book":4,"chapter":175},{"book":4,"chapter":198},{"book":4,"chapter":199},{"book":5,"chapter":42}]},"344425":{"id":"344425","name":"Lotophages","lat":33.5,"lng":10.5,"pleiadesUri":"http://pleiades.stoa.org/places/344425","placeType":"labeled feature","isEthnic":true,"occurrences":[{"book":4,"chapter":177},{"book":4,"chapter":178},{"book":4,"chapter":183}]},"344428":{"id":"344428","name":"Macae","lat":31.5,"lng":13.5,"pleiadesUri":"http://pleiades.stoa.org/places/344428","placeType":"people","isEthnic":true,"occurrences":[{"book":4,"chapter":175},{"book":4,"chapter":176},{"book":5,"chapter":42}]},"344491":{"id":"344491","name":"Syrtis Maior","lat":31.5,"lng":18,"pleiadesUri":"http://pleiades.stoa.org/places/344491","placeType":"water-open","isEthnic":false,"occurrences":[{"book":2,"chapter":32},{"book":2,"chapter":32},{"book":2,"chapter":150},{"book":4,"chapter":170},{"book":4,"chapter":173}]},"354116":{"id":"354116","name":"Garamantes","lat":27.5,"lng":13.5,"pleiadesUri":"http://pleiades.stoa.org/places/354116","placeType":"people","isEthnic":true,"occurrences":[{"book":4,"chapter":174},{"book":4,"chapter":183},{"book":4,"chapter":183},{"book":4,"chapter":183},{"book":4,"chapter":184}]},"364004":{"id":"364004","name":"Psylli","lat":30.5,"lng":17.5,"pleiadesUri":"http://pleiades.stoa.org/places/364004","placeType":"people","isEthnic":true,"occurrences":[{"book":4,"chapter":173}]},"373736":{"id":"373736","name":"Arsinoe/Taucheira","lat":32.537142,"lng":20.565847,"pleiadesUri":"http://pleiades.stoa.org/places/373736","placeType":"settlement","isEthnic":false,"occurrences":[{"book":4,"chapter":171}]},"373738":{"id":"373738","name":"Asby(s)tai","lat":32.5,"lng":21.5,"pleiadesUri":"http://pleiades.stoa.org/places/373738","placeType":"unknown","isEthnic":true,"occurrences":[{"book":4,"chapter":170},{"book":4,"chapter":171}]},"373742":{"id":"373742","name":"Augila","lat":29.127566,"lng":21.290963,"pleiadesUri":"http://pleiades.stoa.org/places/373742","placeType":"settlement","isEthnic":false,"occurrences":[{"book":4,"chapter":172},{"book":4,"chapter":183},{"book":4,"chapter":183}]},"373744":{"id":"373744","name":"Auschisai?","lat":32.5,"lng":20.5,"pleiadesUri":"http://pleiades.stoa.org/places/373744","placeType":"unknown","isEthnic":true,"occurrences":[{"book":4,"chapter":171},{"book":4,"chapter":171},{"book":4,"chapter":172}]},"373746":{"id":"373746","name":"Aziris","lat":32.683784,"lng":22.880611,"pleiadesUri":"http://pleiades.stoa.org/places/373746","placeType":"settlement","isEthnic":false,"occurrences":[{"book":4,"chapter":157},{"book":4,"chapter":158},{"book":4,"chapter":169}]},"373748":{"id":"373748","name":"Bakales?","lat":32.5,"lng":20.5,"pleiadesUri":"http://pleiades.stoa.org/places/373748","placeType":"unknown","isEthnic":true,"occurrences":[{"book":4,"chapter":171}]},"373750":{"id":"373750","name":"Barke","lat":32.498333,"lng":20.892778,"pleiadesUri":"http://pleiades.stoa.org/places/373750","placeType":"settlement","isEthnic":false,"occurrences":[{"book":3,"chapter":13},{"book":3,"chapter":91},{"book":4,"chapter":160},{"book":4,"chapter":164},{"book":4,"chapter":164},{"book":4,"chapter":165},{"book":4,"chapter":165},{"book":4,"chapter":167},{"book":4,"chapter":167},{"book":4,"chapter":171},{"book":4,"chapter":171},{"book":4,"chapter":187},{"book":4,"chapter":200},{"book":4,"chapter":200},{"book":4,"chapter":200},{"book":4,"chapter":200},{"book":4,"chapter":201},{"book":4,"chapter":201},{"book":4,"chapter":201},{"book":4,"chapter":201},{"book":4,"chapter":201},{"book":4,"chapter":202},{"book":4,"chapter":202},{"book":4,"chapter":203},{"book":4,"chapter":203},{"book":4,"chapter":204},{"book":4,"chapter":205},{"book":4,"chapter":205},{"book":4,"chapter":205}]},"373778":{"id":"373778","name":"Cyrene","lat":32.818736,"lng":21.856169,"pleiadesUri":"http://pleiades.stoa.org/places/373778","placeType":"settlement","isEthnic":false,"occurrences":[{"book":2,"chapter":32},{"book":2,"chapter":34},{"book":2,"chapter":96},{"book":2,"chapter":161},{"book":2,"chapter":181},{"book":2,"chapter":181},{"book":2,"chapter":181},{"book":2,"chapter":182},{"book":2,"chapter":182},{"book":3,"chapter":13},{"book":3,"chapter":13},{"book":3,"chapter":13},{"book":3,"chapter":91},{"book":3,"chapter":131},{"book":4,"chapter":153},{"book":4,"chapter":154},{"book":4,"chapter":154},{"book":4,"chapter":155},{"book":4,"chapter":156},{"book":4,"chapter":157},{"book":4,"chapter":159},{"book":4,"chapter":159},{"book":4,"chapter":159},{"book":4,"chapter":159},{"book":4,"chapter":159},{"book":4,"chapter":159},{"book":4,"chapter":159},{"book":4,"chapter":160},{"book":4,"chapter":160},{"book":4,"chapter":160},{"book":4,"chapter":161},{"book":4,"chapter":161},{"book":4,"chapter":161},{"book":4,"chapter":162},{"book":4,"chapter":163},{"book":4,"chapter":164},{"book":4,"chapter":164},{"book":4,"chapter":164},{"book":4,"chapter":164},{"book":4,"chapter":164},{"book":4,"chapter":165},{"book":4,"chapter":165},{"book":4,"chapter":169},{"book":4,"chapter":169},{"book":4,"chapter":170},{"book":4,"chapter":170},{"book":4,"chapter":171},{"book":4,"chapter":172},{"book":4,"chapter":186},{"book":4,"chapter":199},{"book":4,"chapter":200},{"book":4,"chapter":203},{"book":4,"chapter":203},{"book":4,"chapter":203},{"book":4,"chapter":203},{"book":4,"chapter":203}]},"373827":{"id":"373827","name":"Hesperidum Horti","lat":32.5,"lng":20.5,"pleiadesUri":"http://pleiades.stoa.org/places/373827","placeType":"unknown","isEthnic":true,"occurrences":[{"book":4,"chapter":171},{"book":4,"chapter":204}]},"373861":{"id":"373861","name":"Nasamones","lat":30.5,"lng":20.5,"pleiadesUri":"http://pleiades.stoa.org/places/373861","placeType":"people","isEthnic":true,"occurrences":[{"book":2,"chapter":32},{"book":2,"chapter":32},{"book":2,"chapter":33},{"book":2,"chapter":33},{"book":2,"chapter":34},{"book":4,"chapter":172},{"book":4,"chapter":172},{"book":4,"chapter":173},{"book":4,"chapter":174},{"book":4,"chapter":175},{"book":4,"chapter":183},{"book":4,"chapter":190}]},"383698":{"id":"383698","name":"Liguria","lat":44.22656549434755,"lng":9.235707726672372,"pleiadesUri":"http://pleiades.stoa.org/places/383698","placeType":"region","isEthnic":true,"occurrences":[{"book":5,"chapter":9}]},"393374":{"id":"393374","name":"Altinum","lat":45.5462452,"lng":12.3994439,"pleiadesUri":"http://pleiades.stoa.org/places/393374","placeType":"road,settlement","isEthnic":true,"occurrences":[{"book":5,"chapter":9}]},"413122":{"id":"413122","name":"Etruria/Tuscia","lat":42.42102874792005,"lng":11.752744124826158,"pleiadesUri":"http://pleiades.stoa.org/places/413122","placeType":"region","isEthnic":true,"occurrences":[{"book":1,"chapter":57},{"book":1,"chapter":94},{"book":1,"chapter":94},{"book":1,"chapter":163},{"book":1,"chapter":166},{"book":1,"chapter":167},{"book":1,"chapter":167},{"book":6,"chapter":18},{"book":6,"chapter":22}]},"413360":{"id":"413360","name":"Umbria","lat":42.89702754450271,"lng":12.576828209802876,"pleiadesUri":"http://pleiades.stoa.org/places/413360","placeType":"region","isEthnic":true,"occurrences":[{"book":4,"chapter":50}]},"422859":{"id":"422859","name":"Caere","lat":42.007707,"lng":12.10541,"pleiadesUri":"http://pleiades.stoa.org/places/422859","placeType":"cemetery,architecturalcomplex,tomb,sanctuary,settlement","isEthnic":true,"occurrences":[{"book":1,"chapter":167},{"book":1,"chapter":167},{"book":1,"chapter":167},{"book":1,"chapter":167}]},"442509":{"id":"442509","name":"Brundisium/Brentesion","lat":40.641136,"lng":17.946867,"pleiadesUri":"http://pleiades.stoa.org/places/442509","placeType":"settlement,port","isEthnic":false,"occurrences":[{"book":4,"chapter":100}]},"442518":{"id":"442518","name":"Calabria","lat":40.75,"lng":17.75,"pleiadesUri":"http://pleiades.stoa.org/places/442518","placeType":"region","isEthnic":false,"occurrences":[{"book":4,"chapter":99},{"book":4,"chapter":99}]},"442658":{"id":"442658","name":"Metapontum","lat":40.383868,"lng":16.824063,"pleiadesUri":"http://pleiades.stoa.org/places/442658","placeType":"theatre,settlement","isEthnic":true,"occurrences":[{"book":4,"chapter":15},{"book":4,"chapter":15},{"book":4,"chapter":15},{"book":4,"chapter":15}]},"442733":{"id":"442733","name":"Poseidonia/Paestum","lat":40.421378,"lng":15.005102,"pleiadesUri":"http://pleiades.stoa.org/places/442733","placeType":"settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":168}]},"442763":{"id":"442763","name":"Sallentinum/Iapygia","lat":39.796261,"lng":18.368275,"pleiadesUri":"http://pleiades.stoa.org/places/442763","placeType":"cape","isEthnic":false,"occurrences":[{"book":3,"chapter":138}]},"442810":{"id":"442810","name":"Taras/Tarentum/Neptunia","lat":40.476034,"lng":17.228553,"pleiadesUri":"http://pleiades.stoa.org/places/442810","placeType":"settlement,temple-2","isEthnic":false,"occurrences":[{"book":1,"chapter":24},{"book":1,"chapter":24},{"book":3,"chapter":136},{"book":3,"chapter":136},{"book":3,"chapter":137},{"book":3,"chapter":138},{"book":3,"chapter":138},{"book":3,"chapter":138},{"book":3,"chapter":138},{"book":3,"chapter":138},{"book":4,"chapter":100}]},"452315":{"id":"452315","name":"Crathis/Crater (river)","lat":39.3801999,"lng":16.2544973,"pleiadesUri":"http://pleiades.stoa.org/places/452315","placeType":"river","isEthnic":false,"occurrences":[{"book":5,"chapter":45},{"book":5,"chapter":45}]},"452317":{"id":"452317","name":"Croto(n)","lat":39.028864,"lng":17.205128,"pleiadesUri":"http://pleiades.stoa.org/places/452317","placeType":"city-wall,sanctuary,settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":57},{"book":1,"chapter":57},{"book":3,"chapter":125},{"book":3,"chapter":129},{"book":3,"chapter":131},{"book":3,"chapter":131},{"book":3,"chapter":131},{"book":3,"chapter":131},{"book":3,"chapter":136},{"book":3,"chapter":137},{"book":3,"chapter":137},{"book":3,"chapter":137},{"book":3,"chapter":137},{"book":3,"chapter":138},{"book":5,"chapter":44},{"book":5,"chapter":44},{"book":5,"chapter":44},{"book":5,"chapter":44},{"book":5,"chapter":44},{"book":5,"chapter":45},{"book":5,"chapter":47},{"book":5,"chapter":47},{"book":6,"chapter":21}]},"452346":{"id":"452346","name":"Italia","lat":38.25,"lng":16.25,"pleiadesUri":"http://pleiades.stoa.org/places/452346","placeType":"region","isEthnic":false,"occurrences":[{"book":3,"chapter":136},{"book":4,"chapter":15},{"book":4,"chapter":15},{"book":5,"chapter":44}]},"452361":{"id":"452361","name":"Laos/Lavinium?","lat":39.766,"lng":15.83176,"pleiadesUri":"http://pleiades.stoa.org/places/452361","placeType":"settlement","isEthnic":false,"occurrences":[{"book":6,"chapter":21}]},"452369":{"id":"452369","name":"Lokroi Epizephyrioi","lat":38.20782,"lng":16.23715,"pleiadesUri":"http://pleiades.stoa.org/places/452369","placeType":"stoa,townhouse,theatre,sanctuary,settlement","isEthnic":true,"occurrences":[{"book":6,"chapter":23}]},"452395":{"id":"452395","name":"Oenotri","lat":40.42064875,"lng":15.00532475,"pleiadesUri":"http://pleiades.stoa.org/places/452395","placeType":"people","isEthnic":true,"occurrences":[{"book":1,"chapter":167}]},"452416":{"id":"452416","name":"Area sacra Griso-Laboccetta, Reggio di Calabria","lat":38.111146,"lng":15.649244,"pleiadesUri":"http://pleiades.stoa.org/places/452416","placeType":"sanctuary,settlement,architecturalcomplex","isEthnic":false,"occurrences":[{"book":1,"chapter":167},{"book":1,"chapter":167},{"book":6,"chapter":23}]},"452452":{"id":"452452","name":"Skidros","lat":40.07228,"lng":15.61987,"pleiadesUri":"http://pleiades.stoa.org/places/452452","placeType":"villa,settlement","isEthnic":false,"occurrences":[{"book":6,"chapter":21}]},"452457":{"id":"452457","name":"Sybaris/Thurii/Copia","lat":39.71705745,"lng":16.4927745,"pleiadesUri":"http://pleiades.stoa.org/places/452457","placeType":"theatre,settlement,port","isEthnic":true,"occurrences":[{"book":5,"chapter":44},{"book":5,"chapter":44},{"book":5,"chapter":44},{"book":5,"chapter":44},{"book":5,"chapter":44},{"book":5,"chapter":45},{"book":5,"chapter":45},{"book":5,"chapter":47},{"book":6,"chapter":21},{"book":6,"chapter":21},{"book":6,"chapter":127},{"book":6,"chapter":127}]},"452488":{"id":"452488","name":"Veleia","lat":40.160423,"lng":15.15732,"pleiadesUri":"http://pleiades.stoa.org/places/452488","placeType":"settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":167},{"book":5,"chapter":44}]},"462202":{"id":"462202","name":"Eryx M.","lat":38.03528,"lng":12.5919,"pleiadesUri":"http://pleiades.stoa.org/places/462202","placeType":"settlement,mountain","isEthnic":false,"occurrences":[{"book":5,"chapter":43},{"book":5,"chapter":45}]},"462214":{"id":"462214","name":"Bitalemi","lat":37.062775,"lng":14.258433,"pleiadesUri":"http://pleiades.stoa.org/places/462214","placeType":"sanctuary,settlement","isEthnic":false,"occurrences":[{"book":6,"chapter":23}]},"462237":{"id":"462237","name":"Heraclea Minoa","lat":40.21973,"lng":16.67048,"pleiadesUri":"http://pleiades.stoa.org/places/462237","placeType":"theatre,settlement","isEthnic":false,"occurrences":[{"book":5,"chapter":43},{"book":5,"chapter":46}]},"462244":{"id":"462244","name":"Himera","lat":37.96884,"lng":13.82184,"pleiadesUri":"http://pleiades.stoa.org/places/462244","placeType":"temple,settlement,plaza","isEthnic":false,"occurrences":[{"book":6,"chapter":24}]},"462267":{"id":"462267","name":"Kale Akte","lat":38.024241,"lng":14.440957,"pleiadesUri":"http://pleiades.stoa.org/places/462267","placeType":"settlement-modern,settlement,station","isEthnic":false,"occurrences":[{"book":6,"chapter":22},{"book":6,"chapter":22},{"book":6,"chapter":23}]},"462487":{"id":"462487","name":"Segesta/Egesta","lat":37.939199,"lng":12.839871,"pleiadesUri":"http://pleiades.stoa.org/places/462487","placeType":"settlement","isEthnic":true,"occurrences":[{"book":5,"chapter":46},{"book":5,"chapter":47}]},"462489":{"id":"462489","name":"Selinus","lat":37.58406,"lng":12.8249,"pleiadesUri":"http://pleiades.stoa.org/places/462489","placeType":"settlement","isEthnic":false,"occurrences":[{"book":5,"chapter":46},{"book":5,"chapter":46},{"book":5,"chapter":46}]},"462492":{"id":"462492","name":"Sicilia (island)","lat":37.53667611952188,"lng":14.08648464579389,"pleiadesUri":"http://pleiades.stoa.org/places/462492","placeType":"island","isEthnic":false,"occurrences":[{"book":1,"chapter":24},{"book":5,"chapter":43},{"book":5,"chapter":46},{"book":6,"chapter":17},{"book":6,"chapter":22},{"book":6,"chapter":22},{"book":6,"chapter":23},{"book":6,"chapter":23},{"book":6,"chapter":24},{"book":6,"chapter":24}]},"462503":{"id":"462503","name":"Syracusae/Syrakousai","lat":37.05963,"lng":15.29382,"pleiadesUri":"http://pleiades.stoa.org/places/462503","placeType":"settlement","isEthnic":false,"occurrences":[{"book":3,"chapter":125}]},"462538":{"id":"462538","name":"Zancle/Messana","lat":38.1923323,"lng":15.5555232,"pleiadesUri":"http://pleiades.stoa.org/places/462538","placeType":"settlement","isEthnic":false,"occurrences":[{"book":6,"chapter":22},{"book":6,"chapter":23},{"book":6,"chapter":23},{"book":6,"chapter":23},{"book":6,"chapter":23},{"book":6,"chapter":23},{"book":6,"chapter":23},{"book":6,"chapter":23},{"book":6,"chapter":23},{"book":6,"chapter":24},{"book":6,"chapter":24}]},"472014":{"id":"472014","name":"Sardinia (island)","lat":40.06802462263924,"lng":8.895951166868167,"pleiadesUri":"http://pleiades.stoa.org/places/472014","placeType":"island","isEthnic":true,"occurrences":[{"book":2,"chapter":106},{"book":5,"chapter":106},{"book":5,"chapter":124},{"book":6,"chapter":2}]},"472048":{"id":"472048","name":"Alalie/Aleria","lat":42.10268,"lng":9.509064,"pleiadesUri":"http://pleiades.stoa.org/places/472048","placeType":"amphitheatre,settlement,port","isEthnic":false,"occurrences":[{"book":1,"chapter":165},{"book":1,"chapter":167}]},"472063":{"id":"472063","name":"Corsica/Kyrnos (island)","lat":42.103331615555554,"lng":9.200077440000001,"pleiadesUri":"http://pleiades.stoa.org/places/472063","placeType":"island","isEthnic":false,"occurrences":[{"book":1,"chapter":165},{"book":1,"chapter":165},{"book":1,"chapter":166},{"book":1,"chapter":167},{"book":1,"chapter":168}]},"472127":{"id":"472127","name":"Sardoum Mare","lat":40.5,"lng":8.5,"pleiadesUri":"http://pleiades.stoa.org/places/472127","placeType":"water-open","isEthnic":false,"occurrences":[{"book":1,"chapter":166}]},"481704":{"id":"481704","name":"Agrianes","lat":42.5,"lng":22.5,"pleiadesUri":"http://pleiades.stoa.org/places/481704","placeType":"unknown","isEthnic":true,"occurrences":[{"book":5,"chapter":16}]},"481774":{"id":"481774","name":"Brygai","lat":41.5,"lng":21.5,"pleiadesUri":"http://pleiades.stoa.org/places/481774","placeType":"unknown","isEthnic":true,"occurrences":[{"book":6,"chapter":45},{"book":6,"chapter":45}]},"481829":{"id":"481829","name":"Encheleioi","lat":41.5,"lng":20.5,"pleiadesUri":"http://pleiades.stoa.org/places/481829","placeType":"unknown","isEthnic":true,"occurrences":[{"book":5,"chapter":61}]},"481866":{"id":"481866","name":"Illyrii","lat":41.5,"lng":19.5,"pleiadesUri":"http://pleiades.stoa.org/places/481866","placeType":"unknown","isEthnic":true,"occurrences":[{"book":4,"chapter":49}]},"481955":{"id":"481955","name":"Pelion","lat":40.641298,"lng":20.959876,"pleiadesUri":"http://pleiades.stoa.org/places/481955","placeType":"settlement","isEthnic":false,"occurrences":[{"book":4,"chapter":179}]},"491529":{"id":"491529","name":"Asseros","lat":40.821019,"lng":23.031507,"pleiadesUri":"http://pleiades.stoa.org/places/491529","placeType":"settlement","isEthnic":true,"occurrences":[{"book":1,"chapter":19}]},"491561":{"id":"491561","name":"Chalcidice","lat":39.9832624,"lng":23.6437183,"pleiadesUri":"http://pleiades.stoa.org/places/491561","placeType":"unknown","isEthnic":true,"occurrences":[{"book":8,"chapter":1},{"book":8,"chapter":46},{"book":8,"chapter":128}]},"491572":{"id":"491572","name":"Dion","lat":40.177012,"lng":22.491299,"pleiadesUri":"http://pleiades.stoa.org/places/491572","placeType":"theatre,sanctuary,settlement","isEthnic":false,"occurrences":[{"book":7,"chapter":22},{"book":7,"chapter":111}]},"491582":{"id":"491582","name":"Dysoron M.","lat":41.1241606,"lng":23.1397204,"pleiadesUri":"http://pleiades.stoa.org/places/491582","placeType":"mountain","isEthnic":false,"occurrences":[{"book":5,"chapter":18}]},"491600":{"id":"491600","name":"Gephyra","lat":40.73211,"lng":22.69361,"pleiadesUri":"http://pleiades.stoa.org/places/491600","placeType":"station","isEthnic":true,"occurrences":[{"book":5,"chapter":55},{"book":5,"chapter":61}]},"491643":{"id":"491643","name":"Krestonia","lat":40.75,"lng":22.75,"pleiadesUri":"http://pleiades.stoa.org/places/491643","placeType":"unknown","isEthnic":true,"occurrences":[{"book":5,"chapter":4},{"book":5,"chapter":5}]},"491656":{"id":"491656","name":"Macedonia","lat":41.25,"lng":21.75,"pleiadesUri":"http://pleiades.stoa.org/places/491656","placeType":"unknown","isEthnic":false,"occurrences":[{"book":5,"chapter":17},{"book":5,"chapter":17},{"book":5,"chapter":18},{"book":5,"chapter":18},{"book":5,"chapter":20},{"book":5,"chapter":20},{"book":5,"chapter":21},{"book":5,"chapter":21},{"book":5,"chapter":94},{"book":6,"chapter":44},{"book":6,"chapter":44},{"book":6,"chapter":45},{"book":7,"chapter":9},{"book":7,"chapter":9},{"book":7,"chapter":25},{"book":7,"chapter":73},{"book":7,"chapter":73},{"book":7,"chapter":127},{"book":7,"chapter":128},{"book":7,"chapter":131},{"book":7,"chapter":173},{"book":7,"chapter":173},{"book":7,"chapter":173},{"book":7,"chapter":173},{"book":7,"chapter":185},{"book":8,"chapter":34},{"book":8,"chapter":43},{"book":8,"chapter":115},{"book":8,"chapter":122},{"book":8,"chapter":126},{"book":8,"chapter":127},{"book":8,"chapter":136},{"book":8,"chapter":137},{"book":8,"chapter":137},{"book":8,"chapter":138},{"book":8,"chapter":138},{"book":8,"chapter":139},{"book":8,"chapter":142}]},"491677":{"id":"491677","name":"Olympus/Hadrianopolis","lat":40.0862269,"lng":22.3584897,"pleiadesUri":"http://pleiades.stoa.org/places/491677","placeType":"mountain,settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":56}]},"491680":{"id":"491680","name":"Paionia","lat":41.75,"lng":21.75,"pleiadesUri":"http://pleiades.stoa.org/places/491680","placeType":"unknown","isEthnic":true,"occurrences":[{"book":4,"chapter":34},{"book":4,"chapter":49},{"book":5,"chapter":1},{"book":5,"chapter":1},{"book":5,"chapter":1},{"book":5,"chapter":1},{"book":5,"chapter":1},{"book":5,"chapter":2},{"book":5,"chapter":12},{"book":5,"chapter":12},{"book":5,"chapter":13},{"book":5,"chapter":13},{"book":5,"chapter":13},{"book":5,"chapter":14},{"book":5,"chapter":15},{"book":5,"chapter":15},{"book":5,"chapter":15},{"book":5,"chapter":15},{"book":5,"chapter":15},{"book":5,"chapter":15},{"book":5,"chapter":15},{"book":5,"chapter":17},{"book":5,"chapter":17},{"book":5,"chapter":23},{"book":5,"chapter":23},{"book":5,"chapter":62},{"book":5,"chapter":98},{"book":5,"chapter":98},{"book":5,"chapter":98},{"book":5,"chapter":98},{"book":5,"chapter":98},{"book":5,"chapter":98},{"book":5,"chapter":98},{"book":5,"chapter":98}]},"491696":{"id":"491696","name":"Pieria","lat":40.13002811595563,"lng":22.424792491340284,"pleiadesUri":"http://pleiades.stoa.org/places/491696","placeType":"region,people","isEthnic":false,"occurrences":[{"book":4,"chapter":195}]},"491701":{"id":"491701","name":"Poteidaia/Kassandreia","lat":40.1937,"lng":23.3278,"pleiadesUri":"http://pleiades.stoa.org/places/491701","placeType":"settlement","isEthnic":true,"occurrences":[{"book":5,"chapter":1}]},"491715":{"id":"491715","name":"Sane","lat":40.07254,"lng":23.33484,"pleiadesUri":"http://pleiades.stoa.org/places/491715","placeType":"settlement","isEthnic":false,"occurrences":[{"book":7,"chapter":22},{"book":7,"chapter":22},{"book":7,"chapter":23},{"book":7,"chapter":59},{"book":7,"chapter":123}]},"501323":{"id":"501323","name":"Abdera","lat":40.93119,"lng":24.97363,"pleiadesUri":"http://pleiades.stoa.org/places/501323","placeType":"settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":168},{"book":1,"chapter":169},{"book":6,"chapter":46},{"book":6,"chapter":48}]},"501325":{"id":"501325","name":"Abydos","lat":40.19406,"lng":26.41122,"pleiadesUri":"http://pleiades.stoa.org/places/501325","placeType":"settlement","isEthnic":false,"occurrences":[{"book":4,"chapter":138},{"book":5,"chapter":117},{"book":6,"chapter":26}]},"501337":{"id":"501337","name":"Ainos","lat":40.7241,"lng":26.0806,"pleiadesUri":"http://pleiades.stoa.org/places/501337","placeType":"settlement","isEthnic":false,"occurrences":[{"book":4,"chapter":91}]},"501338":{"id":"501338","name":"Ainyra","lat":40.683333,"lng":24.65,"pleiadesUri":"http://pleiades.stoa.org/places/501338","placeType":"region","isEthnic":false,"occurrences":[{"book":6,"chapter":47}]},"501339":{"id":"501339","name":"Akanthos","lat":40.39427,"lng":23.88504,"pleiadesUri":"http://pleiades.stoa.org/places/501339","placeType":"settlement","isEthnic":false,"occurrences":[{"book":6,"chapter":44},{"book":7,"chapter":22},{"book":7,"chapter":115},{"book":7,"chapter":116},{"book":7,"chapter":117},{"book":7,"chapter":121},{"book":7,"chapter":121},{"book":7,"chapter":124}]},"501343":{"id":"501343","name":"Akrothooi","lat":40.183833,"lng":24.34933,"pleiadesUri":"http://pleiades.stoa.org/places/501343","placeType":"settlement","isEthnic":false,"occurrences":[{"book":7,"chapter":22}]},"501356":{"id":"501356","name":"Apsinthis","lat":40.75,"lng":26.25,"pleiadesUri":"http://pleiades.stoa.org/places/501356","placeType":"unknown","isEthnic":true,"occurrences":[{"book":6,"chapter":34},{"book":6,"chapter":36},{"book":6,"chapter":37}]},"501365":{"id":"501365","name":"Athos/Akte (peninsula)","lat":40.24683418181819,"lng":24.295147727272727,"pleiadesUri":"http://pleiades.stoa.org/places/501365","placeType":"peninsula","isEthnic":false,"occurrences":[{"book":6,"chapter":44},{"book":6,"chapter":44},{"book":6,"chapter":44},{"book":6,"chapter":45},{"book":6,"chapter":95},{"book":7,"chapter":22},{"book":7,"chapter":22},{"book":7,"chapter":22},{"book":7,"chapter":22},{"book":7,"chapter":22},{"book":7,"chapter":22},{"book":7,"chapter":36},{"book":7,"chapter":122},{"book":7,"chapter":189}]},"501386":{"id":"501386","name":"Chersonesus","lat":40.33333,"lng":26.5,"pleiadesUri":"http://pleiades.stoa.org/places/501386","placeType":"peninsula","isEthnic":true,"occurrences":[{"book":4,"chapter":137},{"book":4,"chapter":143},{"book":7,"chapter":22},{"book":7,"chapter":33},{"book":7,"chapter":58}]},"501393":{"id":"501393","name":"Dardanos","lat":40.071124,"lng":26.385172,"pleiadesUri":"http://pleiades.stoa.org/places/501393","placeType":"settlement","isEthnic":false,"occurrences":[{"book":5,"chapter":117}]},"501402":{"id":"501402","name":"Doriskos","lat":40.873623,"lng":26.164008,"pleiadesUri":"http://pleiades.stoa.org/places/501402","placeType":"settlement","isEthnic":false,"occurrences":[{"book":5,"chapter":98}]},"501409":{"id":"501409","name":"Edones","lat":40.785833,"lng":23.848889,"pleiadesUri":"http://pleiades.stoa.org/places/501409","placeType":"people","isEthnic":true,"occurrences":[{"book":5,"chapter":11},{"book":5,"chapter":124}]},"501411":{"id":"501411","name":"Elaious","lat":40.051661,"lng":26.220385,"pleiadesUri":"http://pleiades.stoa.org/places/501411","placeType":"settlement","isEthnic":false,"occurrences":[{"book":7,"chapter":22},{"book":7,"chapter":33}]},"501432":{"id":"501432","name":"Hebros (river)","lat":40.738634,"lng":26.029778,"pleiadesUri":"http://pleiades.stoa.org/places/501432","placeType":"river","isEthnic":false,"occurrences":[{"book":4,"chapter":91}]},"501434":{"id":"501434","name":"Hellespontus","lat":40.2,"lng":26.4,"pleiadesUri":"http://pleiades.stoa.org/places/501434","placeType":"water-open","isEthnic":true,"occurrences":[{"book":3,"chapter":90},{"book":4,"chapter":39},{"book":4,"chapter":76},{"book":4,"chapter":86},{"book":4,"chapter":86},{"book":4,"chapter":86},{"book":4,"chapter":89},{"book":4,"chapter":95},{"book":4,"chapter":137},{"book":4,"chapter":138},{"book":4,"chapter":144},{"book":4,"chapter":145},{"book":5,"chapter":1},{"book":5,"chapter":11},{"book":5,"chapter":13},{"book":5,"chapter":14},{"book":5,"chapter":23},{"book":5,"chapter":33},{"book":5,"chapter":91},{"book":5,"chapter":103},{"book":5,"chapter":117},{"book":5,"chapter":122},{"book":6,"chapter":26},{"book":6,"chapter":33},{"book":6,"chapter":33},{"book":6,"chapter":43},{"book":6,"chapter":43},{"book":6,"chapter":43},{"book":6,"chapter":95},{"book":6,"chapter":140},{"book":7,"chapter":6},{"book":7,"chapter":8},{"book":7,"chapter":10},{"book":7,"chapter":10},{"book":7,"chapter":33},{"book":7,"chapter":33},{"book":7,"chapter":35},{"book":7,"chapter":35},{"book":7,"chapter":35},{"book":7,"chapter":36},{"book":7,"chapter":44},{"book":7,"chapter":54},{"book":7,"chapter":54},{"book":7,"chapter":56},{"book":7,"chapter":56},{"book":7,"chapter":57},{"book":7,"chapter":78},{"book":7,"chapter":95},{"book":7,"chapter":106},{"book":7,"chapter":106},{"book":7,"chapter":137},{"book":7,"chapter":147},{"book":7,"chapter":157},{"book":7,"chapter":163},{"book":7,"chapter":188},{"book":9,"chapter":4},{"book":9,"chapter":67},{"book":9,"chapter":98},{"book":9,"chapter":102}]},"501439":{"id":"501439","name":"Imbros (island)","lat":40.233058,"lng":25.903047,"pleiadesUri":"http://pleiades.stoa.org/places/501439","placeType":"island,settlement-modern,settlement","isEthnic":false,"occurrences":[{"book":5,"chapter":26},{"book":6,"chapter":41},{"book":6,"chapter":42},{"book":6,"chapter":104}]},"501458":{"id":"501458","name":"Kardia/Lysimacheia","lat":38.546722,"lng":21.338432,"pleiadesUri":"http://pleiades.stoa.org/places/501458","placeType":"settlement","isEthnic":false,"occurrences":[{"book":6,"chapter":34},{"book":6,"chapter":36},{"book":6,"chapter":41}]},"501469":{"id":"501469","name":"Kleonai","lat":40.214176,"lng":24.233651,"pleiadesUri":"http://pleiades.stoa.org/places/501469","placeType":"settlement","isEthnic":false,"occurrences":[{"book":7,"chapter":22}]},"501473":{"id":"501473","name":"Koinyra","lat":40.6711405,"lng":24.761705,"pleiadesUri":"http://pleiades.stoa.org/places/501473","placeType":"settlement","isEthnic":false,"occurrences":[{"book":6,"chapter":47}]},"501513":{"id":"501513","name":"Melas Kolpos","lat":40.55,"lng":26.46,"pleiadesUri":"http://pleiades.stoa.org/places/501513","placeType":"water-open","isEthnic":false,"occurrences":[{"book":6,"chapter":41}]},"501516":{"id":"501516","name":"Mesambria","lat":40.86333,"lng":25.63855,"pleiadesUri":"http://pleiades.stoa.org/places/501516","placeType":"settlement","isEthnic":false,"occurrences":[{"book":4,"chapter":93},{"book":6,"chapter":33}]},"501520":{"id":"501520","name":"Myrkinos","lat":40.901252,"lng":23.819776,"pleiadesUri":"http://pleiades.stoa.org/places/501520","placeType":"settlement","isEthnic":false,"occurrences":[{"book":5,"chapter":11},{"book":5,"chapter":23},{"book":5,"chapter":24},{"book":5,"chapter":124},{"book":5,"chapter":126}]},"501535":{"id":"501535","name":"Olophyxos","lat":40.330422,"lng":24.190639,"pleiadesUri":"http://pleiades.stoa.org/places/501535","placeType":"settlement","isEthnic":false,"occurrences":[{"book":7,"chapter":22}]},"501539":{"id":"501539","name":"Orbelos M.","lat":41.3770418,"lng":23.6206555,"pleiadesUri":"http://pleiades.stoa.org/places/501539","placeType":"mountain","isEthnic":false,"occurrences":[{"book":5,"chapter":16}]},"501544":{"id":"501544","name":"Paisos","lat":40.400225,"lng":26.787097,"pleiadesUri":"http://pleiades.stoa.org/places/501544","placeType":"settlement","isEthnic":false,"occurrences":[{"book":5,"chapter":117},{"book":5,"chapter":117}]},"501546":{"id":"501546","name":"Paktye","lat":40.485384,"lng":26.780688,"pleiadesUri":"http://pleiades.stoa.org/places/501546","placeType":"settlement","isEthnic":false,"occurrences":[{"book":6,"chapter":36}]},"501551":{"id":"501551","name":"Pangaion M.","lat":40.9147201,"lng":24.09166,"pleiadesUri":"http://pleiades.stoa.org/places/501551","placeType":"mountain","isEthnic":false,"occurrences":[{"book":5,"chapter":16}]},"501556":{"id":"501556","name":"Perkote","lat":40.273913,"lng":26.588806,"pleiadesUri":"http://pleiades.stoa.org/places/501556","placeType":"settlement","isEthnic":false,"occurrences":[{"book":5,"chapter":117}]},"501570":{"id":"501570","name":"Pityoussa/Lampsacus","lat":40.34869,"lng":26.68998,"pleiadesUri":"http://pleiades.stoa.org/places/501570","placeType":"settlement","isEthnic":false,"occurrences":[{"book":4,"chapter":138},{"book":5,"chapter":117},{"book":6,"chapter":37},{"book":6,"chapter":37},{"book":6,"chapter":37},{"book":6,"chapter":37},{"book":6,"chapter":37},{"book":6,"chapter":38},{"book":6,"chapter":38}]},"501579":{"id":"501579","name":"Prasias L.","lat":40.75,"lng":23.75,"pleiadesUri":"http://pleiades.stoa.org/places/501579","placeType":"lake","isEthnic":false,"occurrences":[{"book":5,"chapter":15},{"book":5,"chapter":16},{"book":5,"chapter":17}]},"501596":{"id":"501596","name":"Samothrace (island)","lat":40.5009431,"lng":25.5302283,"pleiadesUri":"http://pleiades.stoa.org/places/501596","placeType":"island,sanctuary,settlement,temple-2","isEthnic":false,"occurrences":[{"book":6,"chapter":47}]},"501597":{"id":"501597","name":"Samothrace (island)","lat":40.5009431,"lng":25.5302283,"pleiadesUri":"http://pleiades.stoa.org/places/501597","placeType":"island,sanctuary,settlement,temple-2","isEthnic":true,"occurrences":[{"book":2,"chapter":52},{"book":2,"chapter":52},{"book":2,"chapter":52},{"book":2,"chapter":52}]},"501609":{"id":"501609","name":"Sestos","lat":40.21343,"lng":26.38916,"pleiadesUri":"http://pleiades.stoa.org/places/501609","placeType":"settlement","isEthnic":false,"occurrences":[{"book":4,"chapter":143}]},"501614":{"id":"501614","name":"Siriopaiones","lat":41.25,"lng":23.75,"pleiadesUri":"http://pleiades.stoa.org/places/501614","placeType":"unknown","isEthnic":true,"occurrences":[{"book":5,"chapter":15}]},"501629":{"id":"501629","name":"Strymon (river)","lat":40.785833,"lng":23.848889,"pleiadesUri":"http://pleiades.stoa.org/places/501629","placeType":"river","isEthnic":false,"occurrences":[{"book":1,"chapter":64},{"book":5,"chapter":1},{"book":5,"chapter":13},{"book":5,"chapter":23},{"book":5,"chapter":98},{"book":7,"chapter":24},{"book":7,"chapter":25},{"book":7,"chapter":75},{"book":7,"chapter":75},{"book":7,"chapter":107},{"book":7,"chapter":113},{"book":7,"chapter":113},{"book":7,"chapter":113},{"book":7,"chapter":114},{"book":7,"chapter":115}]},"501635":{"id":"501635","name":"Thasos (island)","lat":40.78201,"lng":24.717535,"pleiadesUri":"http://pleiades.stoa.org/places/501635","placeType":"island,settlement","isEthnic":true,"occurrences":[{"book":2,"chapter":45},{"book":2,"chapter":45},{"book":6,"chapter":28},{"book":6,"chapter":28},{"book":6,"chapter":28},{"book":6,"chapter":44},{"book":6,"chapter":44},{"book":6,"chapter":46},{"book":6,"chapter":46},{"book":6,"chapter":46},{"book":6,"chapter":46},{"book":6,"chapter":47},{"book":6,"chapter":47},{"book":6,"chapter":47},{"book":6,"chapter":47}]},"501643":{"id":"501643","name":"Thyssos","lat":40.288017,"lng":24.158674,"pleiadesUri":"http://pleiades.stoa.org/places/501643","placeType":"settlement","isEthnic":false,"occurrences":[{"book":7,"chapter":22}]},"501646":{"id":"501646","name":"Torone","lat":39.9770534,"lng":23.9008123,"pleiadesUri":"http://pleiades.stoa.org/places/501646","placeType":"settlement","isEthnic":false,"occurrences":[{"book":7,"chapter":22},{"book":7,"chapter":122},{"book":7,"chapter":122}]},"511142":{"id":"511142","name":"Agrianes/Erginos (river)","lat":41.25,"lng":27.25,"pleiadesUri":"http://pleiades.stoa.org/places/511142","placeType":"river","isEthnic":false,"occurrences":[{"book":4,"chapter":91}]},"511158":{"id":"511158","name":"Artace","lat":40.402952,"lng":27.796268,"pleiadesUri":"http://pleiades.stoa.org/places/511158","placeType":"settlement","isEthnic":false,"occurrences":[{"book":6,"chapter":33}]},"511189":{"id":"511189","name":"Bithynia (region)","lat":41.01972391666666,"lng":31.501635083333333,"pleiadesUri":"http://pleiades.stoa.org/places/511189","placeType":"region","isEthnic":true,"occurrences":[{"book":1,"chapter":28}]},"511218":{"id":"511218","name":"Cyzicus","lat":40.389806,"lng":27.874127,"pleiadesUri":"http://pleiades.stoa.org/places/511218","placeType":"settlement","isEthnic":false,"occurrences":[{"book":4,"chapter":14},{"book":4,"chapter":14},{"book":4,"chapter":14},{"book":4,"chapter":76},{"book":4,"chapter":76},{"book":4,"chapter":76},{"book":4,"chapter":138},{"book":6,"chapter":33},{"book":6,"chapter":33}]},"511225":{"id":"511225","name":"Daskyleion","lat":40.13271,"lng":28.05065,"pleiadesUri":"http://pleiades.stoa.org/places/511225","placeType":"settlement","isEthnic":false,"occurrences":[{"book":3,"chapter":120},{"book":3,"chapter":126},{"book":6,"chapter":34}]},"511271":{"id":"511271","name":"Heraion (Teichos)","lat":41.023945,"lng":27.742027,"pleiadesUri":"http://pleiades.stoa.org/places/511271","placeType":"settlement","isEthnic":false,"occurrences":[{"book":4,"chapter":90}]},"511291":{"id":"511291","name":"Kios/Askanios (river)","lat":40.25,"lng":29.25,"pleiadesUri":"http://pleiades.stoa.org/places/511291","placeType":"river","isEthnic":false,"occurrences":[{"book":5,"chapter":122}]},"511294":{"id":"511294","name":"Kontadesdos (river)","lat":41.75,"lng":27.25,"pleiadesUri":"http://pleiades.stoa.org/places/511294","placeType":"river","isEthnic":false,"occurrences":[{"book":4,"chapter":91}]},"511328":{"id":"511328","name":"Mysia","lat":40.25,"lng":27.75,"pleiadesUri":"http://pleiades.stoa.org/places/511328","placeType":"labeled feature","isEthnic":false,"occurrences":[{"book":5,"chapter":122}]},"511343":{"id":"511343","name":"Olympus (mountain)","lat":40.0710098,"lng":29.2215753,"pleiadesUri":"http://pleiades.stoa.org/places/511343","placeType":"mountain","isEthnic":false,"occurrences":[{"book":1,"chapter":36},{"book":1,"chapter":43}]},"511354":{"id":"511354","name":"Parium/Col. Gemella Iulia *Hadriana","lat":40.4259096,"lng":27.0670163,"pleiadesUri":"http://pleiades.stoa.org/places/511354","placeType":"settlement,port","isEthnic":false,"occurrences":[{"book":4,"chapter":138},{"book":5,"chapter":117}]},"511357":{"id":"511357","name":"Perinthus/Heraclea","lat":40.97089,"lng":27.95454,"pleiadesUri":"http://pleiades.stoa.org/places/511357","placeType":"settlement","isEthnic":false,"occurrences":[{"book":4,"chapter":90},{"book":5,"chapter":1},{"book":5,"chapter":1},{"book":5,"chapter":1},{"book":5,"chapter":1},{"book":5,"chapter":1},{"book":5,"chapter":1},{"book":5,"chapter":2},{"book":5,"chapter":2},{"book":6,"chapter":33}]},"511366":{"id":"511366","name":"Plakia","lat":40.397648,"lng":28.27741,"pleiadesUri":"http://pleiades.stoa.org/places/511366","placeType":"settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":57},{"book":1,"chapter":57}]},"511378":{"id":"511378","name":"Proconnesus","lat":40.591686,"lng":27.55568,"pleiadesUri":"http://pleiades.stoa.org/places/511378","placeType":"settlement","isEthnic":false,"occurrences":[{"book":4,"chapter":13},{"book":4,"chapter":14},{"book":4,"chapter":14},{"book":4,"chapter":15},{"book":4,"chapter":15},{"book":4,"chapter":15},{"book":4,"chapter":138},{"book":6,"chapter":33}]},"511381":{"id":"511381","name":"Propontis","lat":40.6666672,"lng":28.2499999,"pleiadesUri":"http://pleiades.stoa.org/places/511381","placeType":"water-open","isEthnic":false,"occurrences":[{"book":4,"chapter":85},{"book":4,"chapter":85},{"book":5,"chapter":122},{"book":5,"chapter":122}]},"511405":{"id":"511405","name":"Salmydessos","lat":41.75,"lng":28.25,"pleiadesUri":"http://pleiades.stoa.org/places/511405","placeType":"settlement-modern,settlement","isEthnic":false,"occurrences":[{"book":4,"chapter":93}]},"511414":{"id":"511414","name":"Sely(m)bria/Eudoxiopolis","lat":41.080158,"lng":28.26828999999998,"pleiadesUri":"http://pleiades.stoa.org/places/511414","placeType":"settlement","isEthnic":false,"occurrences":[{"book":6,"chapter":33}]},"511419":{"id":"511419","name":"Skylake","lat":40.387037,"lng":28.388808,"pleiadesUri":"http://pleiades.stoa.org/places/511419","placeType":"settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":57}]},"511432":{"id":"511432","name":"Tearos (river)","lat":41.75,"lng":27.75,"pleiadesUri":"http://pleiades.stoa.org/places/511432","placeType":"river","isEthnic":false,"occurrences":[{"book":4,"chapter":90},{"book":4,"chapter":90},{"book":4,"chapter":91},{"book":4,"chapter":91}]},"511443":{"id":"511443","name":"Thynias","lat":41.884086,"lng":27.985781,"pleiadesUri":"http://pleiades.stoa.org/places/511443","placeType":"settlement","isEthnic":true,"occurrences":[{"book":1,"chapter":28}]},"511446":{"id":"511446","name":"Thynias/Apollonia/Daphnousia Ins.","lat":41.21588,"lng":30.26009,"pleiadesUri":"http://pleiades.stoa.org/places/511446","placeType":"island","isEthnic":false,"occurrences":[{"book":4,"chapter":90},{"book":4,"chapter":93}]},"520977":{"id":"520977","name":"Bosphorus","lat":41.119444,"lng":29.075278,"pleiadesUri":"http://pleiades.stoa.org/places/520977","placeType":"water-open","isEthnic":false,"occurrences":[{"book":4,"chapter":83},{"book":4,"chapter":85},{"book":4,"chapter":85},{"book":4,"chapter":85},{"book":4,"chapter":86},{"book":4,"chapter":87},{"book":4,"chapter":88},{"book":4,"chapter":88},{"book":4,"chapter":88},{"book":4,"chapter":90},{"book":4,"chapter":100},{"book":4,"chapter":118},{"book":7,"chapter":10},{"book":7,"chapter":20}]},"520985":{"id":"520985","name":"Constantinopolis","lat":41.012379,"lng":28.975926,"pleiadesUri":"http://pleiades.stoa.org/places/520985","placeType":"settlement,urban","isEthnic":true,"occurrences":[{"book":4,"chapter":87},{"book":4,"chapter":88},{"book":4,"chapter":88},{"book":4,"chapter":138},{"book":4,"chapter":144},{"book":4,"chapter":144},{"book":5,"chapter":26},{"book":5,"chapter":103},{"book":6,"chapter":5},{"book":6,"chapter":26},{"book":6,"chapter":33},{"book":6,"chapter":33}]},"520988":{"id":"520988","name":"Chalcedon","lat":40.983393,"lng":29.025789,"pleiadesUri":"http://pleiades.stoa.org/places/520988","placeType":"settlement,port","isEthnic":false,"occurrences":[{"book":4,"chapter":85},{"book":4,"chapter":144},{"book":4,"chapter":144},{"book":5,"chapter":26},{"book":6,"chapter":33}]},"521160":{"id":"521160","name":"Symplegades/Kyaneai (islands)","lat":41.23498,"lng":29.11443,"pleiadesUri":"http://pleiades.stoa.org/places/521160","placeType":"island,archipelago","isEthnic":false,"occurrences":[{"book":4,"chapter":85},{"book":4,"chapter":89}]},"530767":{"id":"530767","name":"Acarnania","lat":38.672287499999996,"lng":21.317874500000002,"pleiadesUri":"http://pleiades.stoa.org/places/530767","placeType":"region","isEthnic":true,"occurrences":[{"book":1,"chapter":62},{"book":2,"chapter":12}]},"530768":{"id":"530768","name":"Achelous (river)","lat":38.3388321,"lng":21.1067111,"pleiadesUri":"http://pleiades.stoa.org/places/530768","placeType":"river","isEthnic":false,"occurrences":[{"book":2,"chapter":12}]},"530834":{"id":"530834","name":"Corcyra","lat":39.60733,"lng":19.92178,"pleiadesUri":"http://pleiades.stoa.org/places/530834","placeType":"settlement","isEthnic":false,"occurrences":[{"book":3,"chapter":48},{"book":3,"chapter":48},{"book":3,"chapter":48},{"book":3,"chapter":49},{"book":3,"chapter":49},{"book":3,"chapter":49},{"book":3,"chapter":52},{"book":3,"chapter":52},{"book":3,"chapter":53},{"book":3,"chapter":53},{"book":3,"chapter":53},{"book":3,"chapter":53},{"book":3,"chapter":53}]},"530835":{"id":"530835","name":"Corcyra (island)","lat":39.666667,"lng":19.75,"pleiadesUri":"http://pleiades.stoa.org/places/530835","placeType":"island","isEthnic":true,"occurrences":[{"book":2,"chapter":181}]},"530843":{"id":"530843","name":"Dodona","lat":39.54648,"lng":20.78784,"pleiadesUri":"http://pleiades.stoa.org/places/530843","placeType":"theatre,settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":46},{"book":2,"chapter":52},{"book":2,"chapter":53},{"book":2,"chapter":53},{"book":2,"chapter":54},{"book":2,"chapter":56},{"book":2,"chapter":56},{"book":2,"chapter":56},{"book":2,"chapter":56},{"book":2,"chapter":56},{"book":2,"chapter":58},{"book":2,"chapter":59},{"book":4,"chapter":33},{"book":4,"chapter":33}]},"530849":{"id":"530849","name":"Dryopis","lat":39.25,"lng":20.75,"pleiadesUri":"http://pleiades.stoa.org/places/530849","placeType":"unknown","isEthnic":false,"occurrences":[{"book":1,"chapter":56},{"book":1,"chapter":57},{"book":1,"chapter":146}]},"530852":{"id":"530852","name":"Echinades (islands)","lat":38.25,"lng":21.25,"pleiadesUri":"http://pleiades.stoa.org/places/530852","placeType":"archipelago","isEthnic":false,"occurrences":[{"book":2,"chapter":12}]},"531003":{"id":"531003","name":"Molossis","lat":39.271716,"lng":20.924639999999997,"pleiadesUri":"http://pleiades.stoa.org/places/531003","placeType":"unknown","isEthnic":true,"occurrences":[{"book":1,"chapter":146}]},"531117":{"id":"531117","name":"Thesprotia","lat":39.75,"lng":20.25,"pleiadesUri":"http://pleiades.stoa.org/places/531117","placeType":"people","isEthnic":false,"occurrences":[{"book":5,"chapter":92}]},"531154":{"id":"531154","name":"Zacynthus","lat":37.787178,"lng":20.892091,"pleiadesUri":"http://pleiades.stoa.org/places/531154","placeType":"settlement","isEthnic":false,"occurrences":[{"book":4,"chapter":195}]},"531155":{"id":"531155","name":"Zacynthus (island)","lat":37.77,"lng":20.76,"pleiadesUri":"http://pleiades.stoa.org/places/531155","placeType":"island","isEthnic":true,"occurrences":[{"book":3,"chapter":59},{"book":6,"chapter":70},{"book":6,"chapter":70}]},"540582":{"id":"540582","name":"Abai","lat":38.58006,"lng":22.9154,"pleiadesUri":"http://pleiades.stoa.org/places/540582","placeType":"settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":46}]},"540583":{"id":"540583","name":"Abantes","lat":38.75,"lng":23.75,"pleiadesUri":"http://pleiades.stoa.org/places/540583","placeType":"unknown","isEthnic":false,"occurrences":[{"book":1,"chapter":146}]},"540605":{"id":"540605","name":"Aigilia? (island)","lat":38.1771519,"lng":24.1749085,"pleiadesUri":"http://pleiades.stoa.org/places/540605","placeType":"island","isEthnic":false,"occurrences":[{"book":6,"chapter":101},{"book":6,"chapter":107}]},"540628":{"id":"540628","name":"Delphinion","lat":38.291099,"lng":23.846116,"pleiadesUri":"http://pleiades.stoa.org/places/540628","placeType":"temple-2,spring,port,sanctuary,settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":46},{"book":1,"chapter":49},{"book":1,"chapter":52},{"book":1,"chapter":92}]},"540667":{"id":"540667","name":"Artemision","lat":39.017832,"lng":23.220954,"pleiadesUri":"http://pleiades.stoa.org/places/540667","placeType":"temple","isEthnic":false,"occurrences":[{"book":8,"chapter":2},{"book":8,"chapter":4},{"book":8,"chapter":5},{"book":8,"chapter":6},{"book":8,"chapter":8},{"book":8,"chapter":11},{"book":8,"chapter":15},{"book":8,"chapter":16},{"book":8,"chapter":21},{"book":8,"chapter":22},{"book":8,"chapter":23},{"book":8,"chapter":40},{"book":8,"chapter":42},{"book":8,"chapter":43},{"book":8,"chapter":44},{"book":8,"chapter":45},{"book":8,"chapter":46},{"book":8,"chapter":66},{"book":8,"chapter":76},{"book":8,"chapter":82}]},"540672":{"id":"540672","name":"Asopos (river)","lat":38.300198333333334,"lng":23.581173000000003,"pleiadesUri":"http://pleiades.stoa.org/places/540672","placeType":"river","isEthnic":false,"occurrences":[{"book":6,"chapter":108}]},"540689":{"id":"540689","name":"Boeotia","lat":38.34668803333333,"lng":23.184677533333332,"pleiadesUri":"http://pleiades.stoa.org/places/540689","placeType":"region","isEthnic":false,"occurrences":[{"book":1,"chapter":92},{"book":1,"chapter":195},{"book":2,"chapter":50},{"book":5,"chapter":57},{"book":5,"chapter":57},{"book":5,"chapter":59},{"book":5,"chapter":61},{"book":5,"chapter":67},{"book":5,"chapter":74},{"book":5,"chapter":75},{"book":5,"chapter":77},{"book":5,"chapter":77},{"book":5,"chapter":77},{"book":5,"chapter":77},{"book":5,"chapter":77},{"book":5,"chapter":81},{"book":5,"chapter":89},{"book":5,"chapter":91},{"book":6,"chapter":34},{"book":6,"chapter":108},{"book":6,"chapter":108},{"book":6,"chapter":108},{"book":6,"chapter":108},{"book":8,"chapter":34},{"book":8,"chapter":34},{"book":8,"chapter":35},{"book":8,"chapter":38},{"book":8,"chapter":40},{"book":8,"chapter":44},{"book":8,"chapter":50},{"book":8,"chapter":66},{"book":8,"chapter":113},{"book":8,"chapter":144},{"book":9,"chapter":2},{"book":9,"chapter":6},{"book":9,"chapter":6},{"book":9,"chapter":7},{"book":9,"chapter":7},{"book":9,"chapter":15},{"book":9,"chapter":17},{"book":9,"chapter":19},{"book":9,"chapter":24},{"book":9,"chapter":87},{"book":9,"chapter":100}]},"540703":{"id":"540703","name":"Chalcis","lat":38.464,"lng":23.602,"pleiadesUri":"http://pleiades.stoa.org/places/540703","placeType":"settlement","isEthnic":true,"occurrences":[{"book":5,"chapter":74},{"book":5,"chapter":75},{"book":5,"chapter":77},{"book":5,"chapter":77},{"book":5,"chapter":77},{"book":5,"chapter":77},{"book":5,"chapter":77},{"book":5,"chapter":77},{"book":5,"chapter":91},{"book":5,"chapter":99},{"book":5,"chapter":99},{"book":6,"chapter":100},{"book":6,"chapter":118}]},"540717":{"id":"540717","name":"Coronea","lat":38.392613,"lng":22.956902,"pleiadesUri":"http://pleiades.stoa.org/places/540717","placeType":"settlement","isEthnic":false,"occurrences":[{"book":5,"chapter":79}]},"540726":{"id":"540726","name":"Delphi","lat":38.482289,"lng":22.501169,"pleiadesUri":"http://pleiades.stoa.org/places/540726","placeType":"sanctuary,settlement","isEthnic":true,"occurrences":[{"book":1,"chapter":13},{"book":1,"chapter":13},{"book":1,"chapter":13},{"book":1,"chapter":14},{"book":1,"chapter":14},{"book":1,"chapter":14},{"book":1,"chapter":19},{"book":1,"chapter":19},{"book":1,"chapter":19},{"book":1,"chapter":20},{"book":1,"chapter":21},{"book":1,"chapter":25},{"book":1,"chapter":25},{"book":1,"chapter":32},{"book":1,"chapter":46},{"book":1,"chapter":47},{"book":1,"chapter":47},{"book":1,"chapter":48},{"book":1,"chapter":48},{"book":1,"chapter":48},{"book":1,"chapter":49},{"book":1,"chapter":50},{"book":1,"chapter":50},{"book":1,"chapter":51},{"book":1,"chapter":51},{"book":1,"chapter":51},{"book":1,"chapter":51},{"book":1,"chapter":52},{"book":1,"chapter":54},{"book":1,"chapter":54},{"book":1,"chapter":54},{"book":1,"chapter":55},{"book":1,"chapter":55},{"book":1,"chapter":55},{"book":1,"chapter":65},{"book":1,"chapter":65},{"book":1,"chapter":66},{"book":1,"chapter":67},{"book":1,"chapter":67},{"book":1,"chapter":67},{"book":1,"chapter":85},{"book":1,"chapter":85},{"book":1,"chapter":90},{"book":1,"chapter":92},{"book":1,"chapter":92},{"book":1,"chapter":92},{"book":1,"chapter":167},{"book":1,"chapter":167},{"book":1,"chapter":168},{"book":1,"chapter":174},{"book":2,"chapter":135},{"book":2,"chapter":135},{"book":2,"chapter":135},{"book":2,"chapter":180},{"book":2,"chapter":180},{"book":3,"chapter":57},{"book":4,"chapter":15},{"book":4,"chapter":150},{"book":4,"chapter":151},{"book":4,"chapter":155},{"book":4,"chapter":155},{"book":4,"chapter":156},{"book":4,"chapter":157},{"book":4,"chapter":161},{"book":4,"chapter":162},{"book":4,"chapter":163},{"book":4,"chapter":164},{"book":4,"chapter":179},{"book":5,"chapter":42},{"book":5,"chapter":43},{"book":5,"chapter":62},{"book":5,"chapter":63},{"book":5,"chapter":67},{"book":5,"chapter":72},{"book":5,"chapter":79},{"book":5,"chapter":82},{"book":5,"chapter":89},{"book":5,"chapter":92},{"book":5,"chapter":92},{"book":6,"chapter":19},{"book":6,"chapter":27},{"book":6,"chapter":34},{"book":6,"chapter":35},{"book":6,"chapter":52},{"book":6,"chapter":57},{"book":6,"chapter":66},{"book":6,"chapter":66},{"book":6,"chapter":66},{"book":6,"chapter":70},{"book":6,"chapter":76},{"book":6,"chapter":86},{"book":6,"chapter":125},{"book":6,"chapter":135},{"book":6,"chapter":139},{"book":7,"chapter":111},{"book":7,"chapter":132},{"book":7,"chapter":139},{"book":7,"chapter":140},{"book":7,"chapter":141},{"book":7,"chapter":142},{"book":7,"chapter":148},{"book":7,"chapter":163},{"book":7,"chapter":165},{"book":7,"chapter":169},{"book":7,"chapter":178},{"book":7,"chapter":178},{"book":7,"chapter":178},{"book":7,"chapter":239},{"book":8,"chapter":27},{"book":8,"chapter":27},{"book":8,"chapter":35},{"book":8,"chapter":35},{"book":8,"chapter":36},{"book":8,"chapter":36},{"book":8,"chapter":36},{"book":8,"chapter":37},{"book":8,"chapter":38},{"book":8,"chapter":39},{"book":8,"chapter":82},{"book":8,"chapter":114},{"book":8,"chapter":121},{"book":8,"chapter":122}]},"540775":{"id":"540775","name":"Euboea (island)","lat":38.53,"lng":23.87,"pleiadesUri":"http://pleiades.stoa.org/places/540775","placeType":"island","isEthnic":false,"occurrences":[{"book":1,"chapter":146},{"book":3,"chapter":89},{"book":3,"chapter":89},{"book":3,"chapter":95},{"book":3,"chapter":95},{"book":3,"chapter":95},{"book":4,"chapter":33},{"book":5,"chapter":31},{"book":5,"chapter":77},{"book":6,"chapter":100},{"book":6,"chapter":127},{"book":8,"chapter":6},{"book":8,"chapter":7},{"book":8,"chapter":9},{"book":8,"chapter":13},{"book":8,"chapter":13},{"book":8,"chapter":14},{"book":8,"chapter":14},{"book":8,"chapter":68},{"book":8,"chapter":69},{"book":8,"chapter":86}]},"540783":{"id":"540783","name":"Euripos","lat":38.46276,"lng":23.58944,"pleiadesUri":"http://pleiades.stoa.org/places/540783","placeType":"bridge,settlement,water-open","isEthnic":false,"occurrences":[{"book":5,"chapter":77}]},"540817":{"id":"540817","name":"Histiaia/Hestiaia","lat":38.93759,"lng":23.06593,"pleiadesUri":"http://pleiades.stoa.org/places/540817","placeType":"settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":56},{"book":1,"chapter":56}]},"540831":{"id":"540831","name":"Pagai","lat":37.974359,"lng":23.362766,"pleiadesUri":"http://pleiades.stoa.org/places/540831","placeType":"unlocated,port,fort,church,settlement","isEthnic":false,"occurrences":[{"book":5,"chapter":74},{"book":6,"chapter":108}]},"540844":{"id":"540844","name":"Thebai/Thebae","lat":38.318092,"lng":23.255096,"pleiadesUri":"http://pleiades.stoa.org/places/540844","placeType":"sanctuary,settlement","isEthnic":true,"occurrences":[{"book":2,"chapter":52}]},"540905":{"id":"540905","name":"Larissa","lat":39.64147,"lng":22.41474,"pleiadesUri":"http://pleiades.stoa.org/places/540905","placeType":"settlement","isEthnic":false,"occurrences":[{"book":9,"chapter":1},{"book":9,"chapter":58}]},"540916":{"id":"540916","name":"Limnaion","lat":39.51028,"lng":22.08803,"pleiadesUri":"http://pleiades.stoa.org/places/540916","placeType":"settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":18}]},"540929":{"id":"540929","name":"Maliacus Sinus","lat":38.8678937,"lng":22.6337672,"pleiadesUri":"http://pleiades.stoa.org/places/540929","placeType":"water-open","isEthnic":false,"occurrences":[{"book":4,"chapter":33}]},"540987":{"id":"540987","name":"Orchomenos/Orchomenus","lat":38.495082,"lng":22.959486,"pleiadesUri":"http://pleiades.stoa.org/places/540987","placeType":"settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":146}]},"540993":{"id":"540993","name":"Ossa (mountain range)","lat":39.7957751,"lng":22.6851958,"pleiadesUri":"http://pleiades.stoa.org/places/540993","placeType":"mountain","isEthnic":false,"occurrences":[{"book":1,"chapter":56}]},"541022":{"id":"541022","name":"Peneios (river)","lat":39.75,"lng":21.75,"pleiadesUri":"http://pleiades.stoa.org/places/541022","placeType":"river","isEthnic":false,"occurrences":[{"book":7,"chapter":20},{"book":7,"chapter":128},{"book":7,"chapter":128},{"book":7,"chapter":128},{"book":7,"chapter":129},{"book":7,"chapter":129},{"book":7,"chapter":129},{"book":7,"chapter":130},{"book":7,"chapter":173},{"book":7,"chapter":182}]},"541048":{"id":"541048","name":"Phocis","lat":38.25,"lng":22.25,"pleiadesUri":"http://pleiades.stoa.org/places/541048","placeType":"unknown","isEthnic":false,"occurrences":[{"book":1,"chapter":46},{"book":1,"chapter":146},{"book":6,"chapter":34}]},"541052":{"id":"541052","name":"Phthiotis","lat":38.8678937,"lng":22.6337672,"pleiadesUri":"http://pleiades.stoa.org/places/541052","placeType":"unknown","isEthnic":false,"occurrences":[{"book":1,"chapter":56}]},"541062":{"id":"541062","name":"Pindus M.","lat":40.0891647,"lng":20.9247272,"pleiadesUri":"http://pleiades.stoa.org/places/541062","placeType":"mountain","isEthnic":false,"occurrences":[{"book":1,"chapter":56}]},"541063":{"id":"541063","name":"Plataea","lat":38.221019,"lng":23.273866,"pleiadesUri":"http://pleiades.stoa.org/places/541063","placeType":"settlement","isEthnic":true,"occurrences":[{"book":6,"chapter":108},{"book":6,"chapter":108},{"book":6,"chapter":108},{"book":6,"chapter":108},{"book":6,"chapter":108},{"book":6,"chapter":108},{"book":6,"chapter":108},{"book":6,"chapter":108},{"book":6,"chapter":108},{"book":6,"chapter":111},{"book":6,"chapter":111},{"book":6,"chapter":113},{"book":8,"chapter":1},{"book":8,"chapter":44},{"book":8,"chapter":44},{"book":8,"chapter":66},{"book":9,"chapter":7},{"book":9,"chapter":15},{"book":9,"chapter":17},{"book":9,"chapter":25},{"book":9,"chapter":25},{"book":9,"chapter":28},{"book":9,"chapter":30},{"book":9,"chapter":31},{"book":9,"chapter":31},{"book":9,"chapter":35},{"book":9,"chapter":36},{"book":9,"chapter":38},{"book":9,"chapter":39},{"book":9,"chapter":51},{"book":9,"chapter":52},{"book":9,"chapter":61},{"book":9,"chapter":65},{"book":9,"chapter":72},{"book":9,"chapter":72},{"book":9,"chapter":76},{"book":9,"chapter":78},{"book":9,"chapter":81},{"book":9,"chapter":83},{"book":9,"chapter":83},{"book":9,"chapter":85},{"book":9,"chapter":85},{"book":9,"chapter":86},{"book":9,"chapter":86},{"book":9,"chapter":89},{"book":9,"chapter":89},{"book":9,"chapter":89},{"book":9,"chapter":90},{"book":9,"chapter":101},{"book":9,"chapter":101},{"book":9,"chapter":101}]},"541117":{"id":"541117","name":"Styra","lat":38.1455,"lng":24.2607,"pleiadesUri":"http://pleiades.stoa.org/places/541117","placeType":"settlement,port","isEthnic":true,"occurrences":[{"book":6,"chapter":107}]},"541121":{"id":"541121","name":"Tamynai","lat":38.499419,"lng":24.104151,"pleiadesUri":"http://pleiades.stoa.org/places/541121","placeType":"settlement","isEthnic":false,"occurrences":[{"book":6,"chapter":101}]},"541138":{"id":"541138","name":"Thebai/Thebae","lat":38.318092,"lng":23.255096,"pleiadesUri":"http://pleiades.stoa.org/places/541138","placeType":"sanctuary,settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":53},{"book":1,"chapter":61},{"book":1,"chapter":92},{"book":2,"chapter":11},{"book":2,"chapter":11},{"book":2,"chapter":57},{"book":5,"chapter":59},{"book":5,"chapter":67},{"book":5,"chapter":67},{"book":5,"chapter":79},{"book":5,"chapter":79},{"book":5,"chapter":79},{"book":5,"chapter":81},{"book":5,"chapter":81},{"book":5,"chapter":89},{"book":6,"chapter":87},{"book":6,"chapter":108},{"book":6,"chapter":108},{"book":6,"chapter":108},{"book":6,"chapter":108},{"book":6,"chapter":118},{"book":9,"chapter":2},{"book":9,"chapter":2},{"book":9,"chapter":15},{"book":9,"chapter":16},{"book":9,"chapter":31},{"book":9,"chapter":40},{"book":9,"chapter":41},{"book":9,"chapter":67},{"book":9,"chapter":86},{"book":9,"chapter":87},{"book":9,"chapter":87},{"book":9,"chapter":88},{"book":9,"chapter":88}]},"541140":{"id":"541140","name":"Anthela","lat":38.796511,"lng":22.538294,"pleiadesUri":"http://pleiades.stoa.org/places/541140","placeType":"shrine,pass,fort","isEthnic":false,"occurrences":[{"book":7,"chapter":175},{"book":7,"chapter":175},{"book":7,"chapter":175},{"book":7,"chapter":176},{"book":7,"chapter":176},{"book":7,"chapter":177},{"book":7,"chapter":184},{"book":7,"chapter":186},{"book":7,"chapter":200},{"book":7,"chapter":200},{"book":7,"chapter":200},{"book":7,"chapter":205},{"book":7,"chapter":205},{"book":7,"chapter":207},{"book":7,"chapter":213},{"book":7,"chapter":219},{"book":7,"chapter":233},{"book":7,"chapter":234}]},"541141":{"id":"541141","name":"Thespiai","lat":38.293384,"lng":23.154521,"pleiadesUri":"http://pleiades.stoa.org/places/541141","placeType":"settlement","isEthnic":false,"occurrences":[{"book":5,"chapter":79}]},"550401":{"id":"550401","name":"Achilleion","lat":39.91516,"lng":26.15099,"pleiadesUri":"http://pleiades.stoa.org/places/550401","placeType":"settlement","isEthnic":false,"occurrences":[{"book":5,"chapter":94}]},"550406":{"id":"550406","name":"Aeolis","lat":38.846442875,"lng":26.950801749999997,"pleiadesUri":"http://pleiades.stoa.org/places/550406","placeType":"region","isEthnic":true,"occurrences":[{"book":1,"chapter":6},{"book":1,"chapter":29},{"book":1,"chapter":141},{"book":1,"chapter":141},{"book":1,"chapter":150},{"book":1,"chapter":150},{"book":1,"chapter":150},{"book":1,"chapter":150},{"book":1,"chapter":152},{"book":1,"chapter":158},{"book":1,"chapter":171},{"book":2,"chapter":1},{"book":2,"chapter":178},{"book":3,"chapter":1},{"book":3,"chapter":89},{"book":4,"chapter":89},{"book":4,"chapter":139},{"book":5,"chapter":94},{"book":5,"chapter":122},{"book":5,"chapter":123},{"book":6,"chapter":8},{"book":6,"chapter":28},{"book":6,"chapter":98},{"book":7,"chapter":9},{"book":7,"chapter":95}]},"550428":{"id":"550428","name":"Alyattes","lat":38.57236,"lng":28.04514,"pleiadesUri":"http://pleiades.stoa.org/places/550428","placeType":"tumulus","isEthnic":false,"occurrences":[{"book":1,"chapter":93},{"book":1,"chapter":93},{"book":1,"chapter":93}]},"550433":{"id":"550433","name":"Antandros","lat":39.57209,"lng":26.7949,"pleiadesUri":"http://pleiades.stoa.org/places/550433","placeType":"settlement","isEthnic":false,"occurrences":[{"book":5,"chapter":26}]},"550455":{"id":"550455","name":"Arisba","lat":39.2393,"lng":26.2272,"pleiadesUri":"http://pleiades.stoa.org/places/550455","placeType":"settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":151}]},"550463":{"id":"550463","name":"Assos/Apollonia","lat":39.490601,"lng":26.337061,"pleiadesUri":"http://pleiades.stoa.org/places/550463","placeType":"settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":19},{"book":1,"chapter":22}]},"550469":{"id":"550469","name":"Atarneus","lat":39.09127,"lng":26.92073,"pleiadesUri":"http://pleiades.stoa.org/places/550469","placeType":"settlement","isEthnic":false,"occurrences":[{"book":6,"chapter":4},{"book":6,"chapter":28},{"book":6,"chapter":29}]},"550491":{"id":"550491","name":"Caicus (river)","lat":38.9471678,"lng":27.0057354,"pleiadesUri":"http://pleiades.stoa.org/places/550491","placeType":"river","isEthnic":false,"occurrences":[{"book":5,"chapter":100},{"book":6,"chapter":28}]},"550496":{"id":"550496","name":"Chios","lat":38.37641,"lng":26.1342335,"pleiadesUri":"http://pleiades.stoa.org/places/550496","placeType":"settlement","isEthnic":true,"occurrences":[{"book":1,"chapter":18},{"book":1,"chapter":18},{"book":1,"chapter":25},{"book":1,"chapter":142},{"book":1,"chapter":160},{"book":1,"chapter":161},{"book":1,"chapter":165},{"book":1,"chapter":165},{"book":2,"chapter":178}]},"550497":{"id":"550497","name":"Chios (island)","lat":38.414,"lng":26.053,"pleiadesUri":"http://pleiades.stoa.org/places/550497","placeType":"island","isEthnic":false,"occurrences":[{"book":1,"chapter":142},{"book":1,"chapter":160},{"book":1,"chapter":165},{"book":2,"chapter":136},{"book":4,"chapter":138},{"book":5,"chapter":33},{"book":5,"chapter":34},{"book":5,"chapter":98},{"book":5,"chapter":98},{"book":5,"chapter":98},{"book":5,"chapter":98},{"book":5,"chapter":98},{"book":6,"chapter":2},{"book":6,"chapter":2},{"book":6,"chapter":5},{"book":6,"chapter":5},{"book":6,"chapter":5},{"book":6,"chapter":8},{"book":6,"chapter":15},{"book":6,"chapter":16},{"book":6,"chapter":16},{"book":6,"chapter":16},{"book":6,"chapter":16},{"book":6,"chapter":17},{"book":6,"chapter":26},{"book":6,"chapter":26},{"book":6,"chapter":26},{"book":6,"chapter":27},{"book":6,"chapter":27},{"book":6,"chapter":27},{"book":6,"chapter":31}]},"550506":{"id":"550506","name":"Cumae/Kyme (Campanian)","lat":38.75953,"lng":26.936283,"pleiadesUri":"http://pleiades.stoa.org/places/550506","placeType":"temple-2,port,sanctuary,tunnel,aqueduct,settlement,cistern","isEthnic":false,"occurrences":[{"book":1,"chapter":149},{"book":1,"chapter":157},{"book":1,"chapter":157},{"book":1,"chapter":157},{"book":1,"chapter":158},{"book":1,"chapter":158},{"book":1,"chapter":159},{"book":1,"chapter":159},{"book":1,"chapter":160},{"book":1,"chapter":160},{"book":4,"chapter":139},{"book":5,"chapter":37},{"book":5,"chapter":38},{"book":5,"chapter":124}]},"550535":{"id":"550535","name":"Erythrai","lat":38.38122,"lng":26.48103,"pleiadesUri":"http://pleiades.stoa.org/places/550535","placeType":"settlement,port","isEthnic":false,"occurrences":[{"book":1,"chapter":19},{"book":1,"chapter":142},{"book":1,"chapter":142},{"book":6,"chapter":8}]},"550547":{"id":"550547","name":"Gergis","lat":39.898491,"lng":26.609255,"pleiadesUri":"http://pleiades.stoa.org/places/550547","placeType":"settlement","isEthnic":true,"occurrences":[{"book":5,"chapter":13},{"book":7,"chapter":20},{"book":7,"chapter":75}]},"550548":{"id":"550548","name":"Gergitha?","lat":39.19355,"lng":27.67097,"pleiadesUri":"http://pleiades.stoa.org/places/550548","placeType":"settlement","isEthnic":true,"occurrences":[{"book":5,"chapter":122}]},"550555":{"id":"550555","name":"Gryneion","lat":38.874665,"lng":27.069173,"pleiadesUri":"http://pleiades.stoa.org/places/550555","placeType":"settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":149}]},"550556":{"id":"550556","name":"Gygaia/Koloe/Talaimenis L.","lat":38.614377,"lng":27.983474,"pleiadesUri":"http://pleiades.stoa.org/places/550556","placeType":"lake","isEthnic":false,"occurrences":[{"book":1,"chapter":94}]},"550567":{"id":"550567","name":"Hekatonnesoi (islands)","lat":39.32644,"lng":26.53922,"pleiadesUri":"http://pleiades.stoa.org/places/550567","placeType":"island,archipelago","isEthnic":false,"occurrences":[{"book":1,"chapter":151}]},"550575":{"id":"550575","name":"Hermus (river)","lat":38.5178164,"lng":28.1112899,"pleiadesUri":"http://pleiades.stoa.org/places/550575","placeType":"river","isEthnic":false,"occurrences":[{"book":1,"chapter":56},{"book":1,"chapter":80},{"book":5,"chapter":101}]},"550584":{"id":"550584","name":"Hyllos? (river)","lat":38.75,"lng":28.25,"pleiadesUri":"http://pleiades.stoa.org/places/550584","placeType":"river","isEthnic":false,"occurrences":[{"book":1,"chapter":80}]},"550595":{"id":"550595","name":"Ilium/Troia","lat":39.9577,"lng":26.23873,"pleiadesUri":"http://pleiades.stoa.org/places/550595","placeType":"settlement","isEthnic":true,"occurrences":[{"book":1,"chapter":3},{"book":1,"chapter":5},{"book":2,"chapter":11},{"book":2,"chapter":118},{"book":2,"chapter":118},{"book":2,"chapter":118},{"book":2,"chapter":119},{"book":2,"chapter":119},{"book":2,"chapter":119},{"book":2,"chapter":120},{"book":2,"chapter":120},{"book":2,"chapter":121},{"book":2,"chapter":121},{"book":5,"chapter":13},{"book":5,"chapter":94},{"book":5,"chapter":122},{"book":5,"chapter":122},{"book":7,"chapter":20},{"book":7,"chapter":20},{"book":7,"chapter":91},{"book":7,"chapter":171},{"book":7,"chapter":171}]},"550597":{"id":"550597","name":"Ionia (region)","lat":38.258572855555556,"lng":27.36601213333333,"pleiadesUri":"http://pleiades.stoa.org/places/550597","placeType":"region","isEthnic":true,"occurrences":[{"book":1,"chapter":6},{"book":1,"chapter":6},{"book":1,"chapter":18},{"book":1,"chapter":26},{"book":1,"chapter":26},{"book":1,"chapter":56},{"book":1,"chapter":56},{"book":1,"chapter":92},{"book":1,"chapter":92},{"book":1,"chapter":140},{"book":1,"chapter":142},{"book":1,"chapter":142},{"book":1,"chapter":143},{"book":1,"chapter":146},{"book":1,"chapter":149},{"book":1,"chapter":149},{"book":1,"chapter":149},{"book":1,"chapter":149},{"book":1,"chapter":150},{"book":1,"chapter":151},{"book":1,"chapter":152},{"book":1,"chapter":152},{"book":1,"chapter":158},{"book":1,"chapter":162},{"book":1,"chapter":163},{"book":1,"chapter":163},{"book":1,"chapter":169},{"book":1,"chapter":169},{"book":1,"chapter":169},{"book":1,"chapter":170},{"book":1,"chapter":170},{"book":1,"chapter":170},{"book":1,"chapter":170},{"book":1,"chapter":170},{"book":1,"chapter":170},{"book":1,"chapter":170},{"book":1,"chapter":171},{"book":1,"chapter":171},{"book":1,"chapter":171},{"book":1,"chapter":171},{"book":1,"chapter":174},{"book":2,"chapter":1},{"book":2,"chapter":15},{"book":2,"chapter":17},{"book":2,"chapter":17},{"book":2,"chapter":17},{"book":2,"chapter":70},{"book":2,"chapter":106},{"book":2,"chapter":152},{"book":2,"chapter":153},{"book":2,"chapter":154},{"book":2,"chapter":154},{"book":2,"chapter":155},{"book":2,"chapter":163},{"book":2,"chapter":178},{"book":3,"chapter":1},{"book":3,"chapter":39},{"book":3,"chapter":89},{"book":3,"chapter":122},{"book":3,"chapter":127},{"book":4,"chapter":35},{"book":4,"chapter":89},{"book":4,"chapter":89},{"book":4,"chapter":95},{"book":4,"chapter":97},{"book":4,"chapter":97},{"book":4,"chapter":98},{"book":4,"chapter":98},{"book":4,"chapter":128},{"book":4,"chapter":133},{"book":4,"chapter":133},{"book":4,"chapter":134},{"book":4,"chapter":135},{"book":4,"chapter":136},{"book":4,"chapter":136},{"book":4,"chapter":137},{"book":4,"chapter":137},{"book":4,"chapter":138},{"book":4,"chapter":140},{"book":4,"chapter":141},{"book":4,"chapter":142},{"book":4,"chapter":143},{"book":5,"chapter":28},{"book":5,"chapter":28},{"book":5,"chapter":30},{"book":5,"chapter":31},{"book":5,"chapter":33},{"book":5,"chapter":37},{"book":5,"chapter":49},{"book":5,"chapter":49},{"book":5,"chapter":49},{"book":5,"chapter":58},{"book":5,"chapter":58},{"book":5,"chapter":59},{"book":5,"chapter":65},{"book":5,"chapter":69},{"book":5,"chapter":86},{"book":5,"chapter":88},{"book":5,"chapter":97},{"book":5,"chapter":98},{"book":5,"chapter":98},{"book":5,"chapter":100},{"book":5,"chapter":101},{"book":5,"chapter":102},{"book":5,"chapter":102},{"book":5,"chapter":102},{"book":5,"chapter":103},{"book":5,"chapter":103},{"book":5,"chapter":104},{"book":5,"chapter":105},{"book":5,"chapter":105},{"book":5,"chapter":106},{"book":5,"chapter":106},{"book":5,"chapter":106},{"book":5,"chapter":106},{"book":5,"chapter":106},{"book":5,"chapter":108},{"book":5,"chapter":108},{"book":5,"chapter":108},{"book":5,"chapter":109},{"book":5,"chapter":109},{"book":5,"chapter":109},{"book":5,"chapter":109},{"book":5,"chapter":109},{"book":5,"chapter":110},{"book":5,"chapter":112},{"book":5,"chapter":115},{"book":5,"chapter":115},{"book":5,"chapter":116},{"book":5,"chapter":117},{"book":5,"chapter":122},{"book":5,"chapter":123},{"book":5,"chapter":124},{"book":5,"chapter":124},{"book":6,"chapter":1},{"book":6,"chapter":1},{"book":6,"chapter":2},{"book":6,"chapter":3},{"book":6,"chapter":3},{"book":6,"chapter":3},{"book":6,"chapter":3},{"book":6,"chapter":4},{"book":6,"chapter":7},{"book":6,"chapter":7},{"book":6,"chapter":8},{"book":6,"chapter":9},{"book":6,"chapter":9},{"book":6,"chapter":9},{"book":6,"chapter":9},{"book":6,"chapter":10},{"book":6,"chapter":10},{"book":6,"chapter":11},{"book":6,"chapter":11},{"book":6,"chapter":12},{"book":6,"chapter":12},{"book":6,"chapter":12},{"book":6,"chapter":13},{"book":6,"chapter":13},{"book":6,"chapter":13},{"book":6,"chapter":13},{"book":6,"chapter":14},{"book":6,"chapter":14},{"book":6,"chapter":14},{"book":6,"chapter":15},{"book":6,"chapter":17},{"book":6,"chapter":17},{"book":6,"chapter":18},{"book":6,"chapter":22},{"book":6,"chapter":22},{"book":6,"chapter":22},{"book":6,"chapter":22},{"book":6,"chapter":26},{"book":6,"chapter":28},{"book":6,"chapter":28},{"book":6,"chapter":31},{"book":6,"chapter":32},{"book":6,"chapter":32},{"book":6,"chapter":33},{"book":6,"chapter":41},{"book":6,"chapter":42},{"book":6,"chapter":42},{"book":6,"chapter":42},{"book":6,"chapter":43},{"book":6,"chapter":43},{"book":6,"chapter":86},{"book":6,"chapter":86},{"book":6,"chapter":86},{"book":6,"chapter":95},{"book":6,"chapter":98},{"book":6,"chapter":127},{"book":6,"chapter":127},{"book":7,"chapter":9},{"book":7,"chapter":9},{"book":7,"chapter":10},{"book":7,"chapter":51},{"book":7,"chapter":51},{"book":7,"chapter":52},{"book":7,"chapter":94},{"book":7,"chapter":94},{"book":7,"chapter":94},{"book":7,"chapter":95},{"book":7,"chapter":95},{"book":7,"chapter":191}]},"550631":{"id":"550631","name":"Kaukasa?","lat":38.49195,"lng":25.923724,"pleiadesUri":"http://pleiades.stoa.org/places/550631","placeType":"settlement","isEthnic":false,"occurrences":[{"book":5,"chapter":33}]},"550650":{"id":"550650","name":"Klazomenai (earlier)","lat":38.37322,"lng":26.78715,"pleiadesUri":"http://pleiades.stoa.org/places/550650","placeType":"settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":142},{"book":1,"chapter":169},{"book":2,"chapter":178},{"book":5,"chapter":124}]},"550651":{"id":"550651","name":"Klazomenai (later)","lat":38.364677125,"lng":26.774159524999998,"pleiadesUri":"http://pleiades.stoa.org/places/550651","placeType":"settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":16}]},"550678":{"id":"550678","name":"Lamponia","lat":39.538105,"lng":26.421229,"pleiadesUri":"http://pleiades.stoa.org/places/550678","placeType":"settlement","isEthnic":false,"occurrences":[{"book":5,"chapter":26}]},"550693":{"id":"550693","name":"Lemnos (island)","lat":39.916667,"lng":25.25,"pleiadesUri":"http://pleiades.stoa.org/places/550693","placeType":"island","isEthnic":false,"occurrences":[{"book":4,"chapter":145},{"book":4,"chapter":145},{"book":4,"chapter":146},{"book":5,"chapter":26},{"book":5,"chapter":27},{"book":5,"chapter":27},{"book":7,"chapter":6}]},"550696":{"id":"550696","name":"Lesbos (island)","lat":39.20874,"lng":26.10052,"pleiadesUri":"http://pleiades.stoa.org/places/550696","placeType":"island","isEthnic":true,"occurrences":[{"book":1,"chapter":23},{"book":1,"chapter":24},{"book":1,"chapter":151},{"book":1,"chapter":151},{"book":1,"chapter":151},{"book":1,"chapter":160},{"book":1,"chapter":160},{"book":1,"chapter":202},{"book":3,"chapter":39},{"book":4,"chapter":61},{"book":4,"chapter":98},{"book":5,"chapter":26},{"book":5,"chapter":98},{"book":5,"chapter":98},{"book":6,"chapter":5},{"book":6,"chapter":8},{"book":6,"chapter":8},{"book":6,"chapter":14},{"book":6,"chapter":26},{"book":6,"chapter":26},{"book":6,"chapter":27},{"book":6,"chapter":28},{"book":6,"chapter":31}]},"550701":{"id":"550701","name":"Lydia/Maionia","lat":38.624771249999995,"lng":27.9632845,"pleiadesUri":"http://pleiades.stoa.org/places/550701","placeType":"region","isEthnic":true,"occurrences":[{"book":1,"chapter":6},{"book":1,"chapter":7},{"book":1,"chapter":7},{"book":1,"chapter":17},{"book":1,"chapter":19},{"book":1,"chapter":22},{"book":1,"chapter":25},{"book":1,"chapter":34},{"book":1,"chapter":50},{"book":1,"chapter":55},{"book":1,"chapter":71},{"book":1,"chapter":72},{"book":1,"chapter":79},{"book":1,"chapter":79},{"book":1,"chapter":80},{"book":1,"chapter":85},{"book":1,"chapter":89},{"book":1,"chapter":94},{"book":1,"chapter":153},{"book":1,"chapter":159},{"book":1,"chapter":207},{"book":2,"chapter":167},{"book":3,"chapter":36},{"book":3,"chapter":36},{"book":3,"chapter":90},{"book":3,"chapter":122},{"book":3,"chapter":127},{"book":5,"chapter":12},{"book":5,"chapter":12},{"book":5,"chapter":36},{"book":5,"chapter":49},{"book":5,"chapter":49},{"book":5,"chapter":52},{"book":5,"chapter":101},{"book":5,"chapter":102},{"book":6,"chapter":32},{"book":6,"chapter":37},{"book":6,"chapter":125},{"book":6,"chapter":125}]},"550710":{"id":"550710","name":"Maionia/Mysia","lat":38.75,"lng":28.25,"pleiadesUri":"http://pleiades.stoa.org/places/550710","placeType":"labeled feature","isEthnic":true,"occurrences":[{"book":1,"chapter":28},{"book":1,"chapter":36},{"book":1,"chapter":36},{"book":1,"chapter":37},{"book":1,"chapter":37},{"book":1,"chapter":171},{"book":6,"chapter":28},{"book":7,"chapter":20},{"book":7,"chapter":74},{"book":7,"chapter":74},{"book":7,"chapter":75}]},"550714":{"id":"550714","name":"Malene","lat":39.200303,"lng":26.804206,"pleiadesUri":"http://pleiades.stoa.org/places/550714","placeType":"settlement","isEthnic":false,"occurrences":[{"book":6,"chapter":29}]},"550738":{"id":"550738","name":"Methymna","lat":39.05495,"lng":26.489422,"pleiadesUri":"http://pleiades.stoa.org/places/550738","placeType":"settlement,aqueduct","isEthnic":false,"occurrences":[{"book":1,"chapter":23},{"book":1,"chapter":151}]},"550742":{"id":"550742","name":"Miletos?","lat":39.528399,"lng":26.974176,"pleiadesUri":"http://pleiades.stoa.org/places/550742","placeType":"settlement","isEthnic":false,"occurrences":[{"book":6,"chapter":5},{"book":6,"chapter":6},{"book":6,"chapter":7},{"book":6,"chapter":9},{"book":6,"chapter":19},{"book":6,"chapter":21},{"book":6,"chapter":25},{"book":6,"chapter":86}]},"550756":{"id":"550756","name":"Myrina/Sebastopolis","lat":38.840097,"lng":26.985537,"pleiadesUri":"http://pleiades.stoa.org/places/550756","placeType":"settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":149}]},"550759":{"id":"550759","name":"Mysia","lat":39.13112815791898,"lng":27.184419878077563,"pleiadesUri":"http://pleiades.stoa.org/places/550759","placeType":"labeled feature","isEthnic":false,"occurrences":[{"book":1,"chapter":160},{"book":3,"chapter":90}]},"550763":{"id":"550763","name":"Methymna","lat":39.05495,"lng":26.489422,"pleiadesUri":"http://pleiades.stoa.org/places/550763","placeType":"settlement,aqueduct","isEthnic":false,"occurrences":[{"book":1,"chapter":27},{"book":1,"chapter":160},{"book":1,"chapter":160},{"book":1,"chapter":160},{"book":2,"chapter":135},{"book":2,"chapter":136},{"book":2,"chapter":178},{"book":3,"chapter":13},{"book":3,"chapter":14},{"book":4,"chapter":97},{"book":5,"chapter":11},{"book":5,"chapter":38},{"book":5,"chapter":94},{"book":5,"chapter":94},{"book":5,"chapter":94},{"book":5,"chapter":95},{"book":6,"chapter":5},{"book":6,"chapter":6}]},"550781":{"id":"550781","name":"Oinous(s)ai (islands)","lat":38.49869,"lng":26.26478,"pleiadesUri":"http://pleiades.stoa.org/places/550781","placeType":"island,archipelago","isEthnic":false,"occurrences":[{"book":1,"chapter":165},{"book":1,"chapter":166}]},"550794":{"id":"550794","name":"Pactolus (river)","lat":38.4803822,"lng":28.0627776,"pleiadesUri":"http://pleiades.stoa.org/places/550794","placeType":"river","isEthnic":false,"occurrences":[{"book":5,"chapter":101},{"book":5,"chapter":101}]},"550823":{"id":"550823","name":"Phocaea","lat":38.6684,"lng":26.75261,"pleiadesUri":"http://pleiades.stoa.org/places/550823","placeType":"settlement-modern,settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":80},{"book":1,"chapter":142},{"book":1,"chapter":152},{"book":1,"chapter":152},{"book":1,"chapter":163},{"book":1,"chapter":163},{"book":1,"chapter":163},{"book":1,"chapter":164},{"book":1,"chapter":164},{"book":1,"chapter":164},{"book":1,"chapter":164},{"book":1,"chapter":165},{"book":1,"chapter":165},{"book":1,"chapter":165},{"book":1,"chapter":165},{"book":1,"chapter":165},{"book":1,"chapter":166},{"book":1,"chapter":166},{"book":1,"chapter":166},{"book":1,"chapter":167},{"book":1,"chapter":167},{"book":1,"chapter":167},{"book":1,"chapter":168},{"book":1,"chapter":168},{"book":2,"chapter":106},{"book":2,"chapter":178},{"book":4,"chapter":138},{"book":6,"chapter":8},{"book":6,"chapter":11},{"book":6,"chapter":12},{"book":6,"chapter":17},{"book":6,"chapter":17}]},"550826":{"id":"550826","name":"Phrikonis","lat":38.7248785,"lng":26.986314750000002,"pleiadesUri":"http://pleiades.stoa.org/places/550826","placeType":"region","isEthnic":false,"occurrences":[{"book":1,"chapter":149}]},"550833":{"id":"550833","name":"Pitane","lat":38.934089,"lng":26.934063,"pleiadesUri":"http://pleiades.stoa.org/places/550833","placeType":"settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":149}]},"550838":{"id":"550838","name":"*Polichna","lat":38.429149,"lng":26.57715,"pleiadesUri":"http://pleiades.stoa.org/places/550838","placeType":"settlement","isEthnic":false,"occurrences":[{"book":6,"chapter":27}]},"550867":{"id":"550867","name":"Sardis/Hyde?","lat":38.488333,"lng":28.040278,"pleiadesUri":"http://pleiades.stoa.org/places/550867","placeType":"settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":7},{"book":1,"chapter":7},{"book":1,"chapter":15},{"book":1,"chapter":16},{"book":1,"chapter":19},{"book":1,"chapter":22},{"book":1,"chapter":22},{"book":1,"chapter":27},{"book":1,"chapter":27},{"book":1,"chapter":29},{"book":1,"chapter":30},{"book":1,"chapter":35},{"book":1,"chapter":44},{"book":1,"chapter":47},{"book":1,"chapter":48},{"book":1,"chapter":69},{"book":1,"chapter":70},{"book":1,"chapter":70},{"book":1,"chapter":70},{"book":1,"chapter":73},{"book":1,"chapter":77},{"book":1,"chapter":77},{"book":1,"chapter":77},{"book":1,"chapter":78},{"book":1,"chapter":78},{"book":1,"chapter":78},{"book":1,"chapter":79},{"book":1,"chapter":80},{"book":1,"chapter":81},{"book":1,"chapter":83},{"book":1,"chapter":84},{"book":1,"chapter":84},{"book":1,"chapter":84},{"book":1,"chapter":85},{"book":1,"chapter":86},{"book":1,"chapter":91},{"book":1,"chapter":91},{"book":1,"chapter":91},{"book":1,"chapter":152},{"book":1,"chapter":153},{"book":1,"chapter":154},{"book":1,"chapter":154},{"book":1,"chapter":155},{"book":1,"chapter":155},{"book":1,"chapter":155},{"book":1,"chapter":157},{"book":1,"chapter":157},{"book":2,"chapter":106},{"book":3,"chapter":5},{"book":3,"chapter":48},{"book":3,"chapter":49},{"book":3,"chapter":120},{"book":3,"chapter":126},{"book":3,"chapter":128},{"book":3,"chapter":128},{"book":3,"chapter":129},{"book":5,"chapter":11},{"book":5,"chapter":11},{"book":5,"chapter":12},{"book":5,"chapter":13},{"book":5,"chapter":23},{"book":5,"chapter":23},{"book":5,"chapter":24},{"book":5,"chapter":25},{"book":5,"chapter":31},{"book":5,"chapter":53},{"book":5,"chapter":53},{"book":5,"chapter":54},{"book":5,"chapter":54},{"book":5,"chapter":73},{"book":5,"chapter":73},{"book":5,"chapter":73},{"book":5,"chapter":96},{"book":5,"chapter":99},{"book":5,"chapter":100},{"book":5,"chapter":101},{"book":5,"chapter":102},{"book":5,"chapter":102},{"book":5,"chapter":104},{"book":5,"chapter":105},{"book":5,"chapter":106},{"book":5,"chapter":108},{"book":5,"chapter":116},{"book":5,"chapter":122},{"book":5,"chapter":123},{"book":6,"chapter":1},{"book":6,"chapter":1},{"book":6,"chapter":4},{"book":6,"chapter":5},{"book":6,"chapter":30},{"book":6,"chapter":30},{"book":6,"chapter":42},{"book":6,"chapter":101},{"book":6,"chapter":125},{"book":6,"chapter":125},{"book":7,"chapter":1},{"book":7,"chapter":6},{"book":7,"chapter":8},{"book":7,"chapter":11},{"book":7,"chapter":26},{"book":7,"chapter":31},{"book":7,"chapter":31},{"book":7,"chapter":37},{"book":7,"chapter":40},{"book":7,"chapter":43},{"book":7,"chapter":88},{"book":7,"chapter":145},{"book":7,"chapter":146}]},"550871":{"id":"550871","name":"Scamander (river)","lat":39.75,"lng":26.25,"pleiadesUri":"http://pleiades.stoa.org/places/550871","placeType":"river","isEthnic":false,"occurrences":[{"book":5,"chapter":65}]},"550877":{"id":"550877","name":"Sigeion","lat":39.98975,"lng":26.18372,"pleiadesUri":"http://pleiades.stoa.org/places/550877","placeType":"settlement","isEthnic":false,"occurrences":[{"book":4,"chapter":39},{"book":5,"chapter":65},{"book":5,"chapter":91},{"book":5,"chapter":94},{"book":5,"chapter":94},{"book":5,"chapter":95},{"book":5,"chapter":96}]},"550893":{"id":"550893","name":"Smyrna/Eurydikeia","lat":38.41905,"lng":27.1383,"pleiadesUri":"http://pleiades.stoa.org/places/550893","placeType":"settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":15},{"book":1,"chapter":16},{"book":1,"chapter":94},{"book":1,"chapter":144},{"book":1,"chapter":149},{"book":1,"chapter":150},{"book":1,"chapter":150},{"book":1,"chapter":151},{"book":2,"chapter":106}]},"550908":{"id":"550908","name":"Temnos","lat":38.6719,"lng":27.197,"pleiadesUri":"http://pleiades.stoa.org/places/550908","placeType":"settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":149}]},"550911":{"id":"550911","name":"Tenedos","lat":39.8278355,"lng":26.0497905,"pleiadesUri":"http://pleiades.stoa.org/places/550911","placeType":"settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":151},{"book":1,"chapter":151}]},"550912":{"id":"550912","name":"Tenedos (island)","lat":39.816667,"lng":26.05,"pleiadesUri":"http://pleiades.stoa.org/places/550912","placeType":"island","isEthnic":false,"occurrences":[{"book":6,"chapter":31},{"book":6,"chapter":41}]},"550913":{"id":"550913","name":"Teos","lat":38.177262,"lng":26.785014,"pleiadesUri":"http://pleiades.stoa.org/places/550913","placeType":"settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":142},{"book":1,"chapter":168},{"book":1,"chapter":169},{"book":1,"chapter":171},{"book":2,"chapter":178},{"book":3,"chapter":121},{"book":6,"chapter":8}]},"550916":{"id":"550916","name":"Teuthrania","lat":39.035223,"lng":27.054771,"pleiadesUri":"http://pleiades.stoa.org/places/550916","placeType":"settlement","isEthnic":false,"occurrences":[{"book":2,"chapter":11}]},"550937":{"id":"550937","name":"Tmolus M.","lat":38.3233025,"lng":28.101929,"pleiadesUri":"http://pleiades.stoa.org/places/550937","placeType":"mountain","isEthnic":false,"occurrences":[{"book":1,"chapter":84},{"book":1,"chapter":93},{"book":5,"chapter":100},{"book":5,"chapter":101},{"book":5,"chapter":101}]},"550944":{"id":"550944","name":"Troas","lat":39.82696158473712,"lng":26.341361553099542,"pleiadesUri":"http://pleiades.stoa.org/places/550944","placeType":"region","isEthnic":false,"occurrences":[{"book":4,"chapter":39},{"book":5,"chapter":26},{"book":5,"chapter":123}]},"560221":{"id":"560221","name":"Aegaeum Mare","lat":37.42245628773585,"lng":25.8829628235849,"pleiadesUri":"http://pleiades.stoa.org/places/560221","placeType":"water-open","isEthnic":false,"occurrences":[{"book":2,"chapter":97},{"book":2,"chapter":113},{"book":4,"chapter":86},{"book":5,"chapter":15},{"book":5,"chapter":51},{"book":5,"chapter":54},{"book":5,"chapter":98},{"book":5,"chapter":101},{"book":5,"chapter":108}]},"560353":{"id":"560353","name":"Cyclades Islands","lat":37.0415464153846,"lng":25.139512376923083,"pleiadesUri":"http://pleiades.stoa.org/places/560353","placeType":"island,archipelago","isEthnic":false,"occurrences":[{"book":5,"chapter":31}]},"560720":{"id":"560720","name":"Platea? (island)","lat":35.8634532,"lng":26.2322965,"pleiadesUri":"http://pleiades.stoa.org/places/560720","placeType":"island","isEthnic":false,"occurrences":[{"book":4,"chapter":151},{"book":4,"chapter":151},{"book":4,"chapter":152},{"book":4,"chapter":154},{"book":4,"chapter":157},{"book":4,"chapter":169},{"book":4,"chapter":169}]},"570028":{"id":"570028","name":"Achaea/Achaia (region)","lat":38.102121472776034,"lng":22.224585911364017,"pleiadesUri":"http://pleiades.stoa.org/places/570028","placeType":"region","isEthnic":true,"occurrences":[{"book":1,"chapter":145},{"book":1,"chapter":145},{"book":1,"chapter":146}]},"570030":{"id":"570030","name":"Acheron (river)","lat":37.75,"lng":21.75,"pleiadesUri":"http://pleiades.stoa.org/places/570030","placeType":"river","isEthnic":false,"occurrences":[{"book":5,"chapter":92}]},"570040":{"id":"570040","name":"Aigai","lat":38.1478,"lng":22.3484,"pleiadesUri":"http://pleiades.stoa.org/places/570040","placeType":"settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":145}]},"570043":{"id":"570043","name":"Aigeira","lat":38.12855,"lng":22.3782,"pleiadesUri":"http://pleiades.stoa.org/places/570043","placeType":"settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":145}]},"570049":{"id":"570049","name":"Aigion","lat":38.252707,"lng":22.081952,"pleiadesUri":"http://pleiades.stoa.org/places/570049","placeType":"settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":145}]},"570102":{"id":"570102","name":"Arcadia","lat":37.567419268449626,"lng":22.165323097346306,"pleiadesUri":"http://pleiades.stoa.org/places/570102","placeType":"region","isEthnic":true,"occurrences":[{"book":1,"chapter":56},{"book":1,"chapter":56},{"book":1,"chapter":57},{"book":1,"chapter":57},{"book":1,"chapter":57},{"book":1,"chapter":57},{"book":1,"chapter":57},{"book":1,"chapter":57},{"book":1,"chapter":57},{"book":1,"chapter":58},{"book":1,"chapter":58},{"book":1,"chapter":59},{"book":1,"chapter":66},{"book":1,"chapter":66},{"book":1,"chapter":66},{"book":1,"chapter":66},{"book":1,"chapter":66},{"book":1,"chapter":67},{"book":1,"chapter":146},{"book":2,"chapter":51},{"book":2,"chapter":51},{"book":2,"chapter":52},{"book":2,"chapter":52},{"book":2,"chapter":52},{"book":2,"chapter":52},{"book":2,"chapter":52},{"book":2,"chapter":52},{"book":2,"chapter":53},{"book":2,"chapter":54},{"book":2,"chapter":172},{"book":4,"chapter":145},{"book":4,"chapter":145},{"book":4,"chapter":161},{"book":5,"chapter":27},{"book":5,"chapter":49},{"book":6,"chapter":74},{"book":6,"chapter":74},{"book":6,"chapter":74},{"book":6,"chapter":74},{"book":6,"chapter":75},{"book":6,"chapter":83},{"book":6,"chapter":127},{"book":6,"chapter":127}]},"570104":{"id":"570104","name":"Argolis","lat":37.6566371145232,"lng":22.92059272180843,"pleiadesUri":"http://pleiades.stoa.org/places/570104","placeType":"region","isEthnic":false,"occurrences":[{"book":6,"chapter":92}]},"570106":{"id":"570106","name":"Argos","lat":37.631561,"lng":22.719464,"pleiadesUri":"http://pleiades.stoa.org/places/570106","placeType":"settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":1},{"book":1,"chapter":1},{"book":1,"chapter":2},{"book":1,"chapter":5},{"book":1,"chapter":31},{"book":1,"chapter":31},{"book":1,"chapter":31},{"book":1,"chapter":31},{"book":1,"chapter":31},{"book":1,"chapter":61},{"book":1,"chapter":82},{"book":1,"chapter":82},{"book":1,"chapter":82},{"book":1,"chapter":82},{"book":1,"chapter":82},{"book":1,"chapter":82},{"book":1,"chapter":82},{"book":1,"chapter":82},{"book":1,"chapter":82},{"book":1,"chapter":82},{"book":1,"chapter":82},{"book":1,"chapter":82},{"book":1,"chapter":82},{"book":2,"chapter":171},{"book":3,"chapter":131},{"book":3,"chapter":134},{"book":4,"chapter":152},{"book":5,"chapter":22},{"book":5,"chapter":49},{"book":5,"chapter":57},{"book":5,"chapter":61},{"book":5,"chapter":67},{"book":5,"chapter":67},{"book":5,"chapter":67},{"book":5,"chapter":67},{"book":5,"chapter":68},{"book":5,"chapter":86},{"book":5,"chapter":86},{"book":5,"chapter":86},{"book":5,"chapter":86},{"book":5,"chapter":88},{"book":5,"chapter":89},{"book":5,"chapter":94},{"book":5,"chapter":113},{"book":6,"chapter":19},{"book":6,"chapter":19},{"book":6,"chapter":19},{"book":6,"chapter":75},{"book":6,"chapter":75},{"book":6,"chapter":76},{"book":6,"chapter":76},{"book":6,"chapter":76},{"book":6,"chapter":76},{"book":6,"chapter":77},{"book":6,"chapter":77},{"book":6,"chapter":77},{"book":6,"chapter":77},{"book":6,"chapter":77},{"book":6,"chapter":77},{"book":6,"chapter":78},{"book":6,"chapter":78},{"book":6,"chapter":78},{"book":6,"chapter":78},{"book":6,"chapter":79},{"book":6,"chapter":79},{"book":6,"chapter":80},{"book":6,"chapter":80},{"book":6,"chapter":82},{"book":6,"chapter":82},{"book":6,"chapter":83},{"book":6,"chapter":83},{"book":6,"chapter":84},{"book":6,"chapter":84},{"book":6,"chapter":92},{"book":6,"chapter":92},{"book":6,"chapter":92},{"book":6,"chapter":92},{"book":6,"chapter":127}]},"570122":{"id":"570122","name":"Asea","lat":37.405,"lng":22.283,"pleiadesUri":"http://pleiades.stoa.org/places/570122","placeType":"settlement","isEthnic":false,"occurrences":[{"book":6,"chapter":117},{"book":6,"chapter":119}]},"570166":{"id":"570166","name":"Boura","lat":38.142006,"lng":22.231166,"pleiadesUri":"http://pleiades.stoa.org/places/570166","placeType":"settlement-modern,settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":145}]},"570182":{"id":"570182","name":"Akrokorinthos","lat":37.906045,"lng":22.878721,"pleiadesUri":"http://pleiades.stoa.org/places/570182","placeType":"sanctuary,settlement,fort","isEthnic":true,"occurrences":[{"book":1,"chapter":14},{"book":1,"chapter":14},{"book":1,"chapter":23},{"book":1,"chapter":23},{"book":1,"chapter":24},{"book":1,"chapter":24},{"book":1,"chapter":24},{"book":1,"chapter":24},{"book":1,"chapter":24},{"book":1,"chapter":24},{"book":1,"chapter":24},{"book":1,"chapter":50},{"book":1,"chapter":51},{"book":2,"chapter":168},{"book":3,"chapter":47},{"book":3,"chapter":48},{"book":3,"chapter":48},{"book":3,"chapter":48},{"book":3,"chapter":49},{"book":3,"chapter":49},{"book":3,"chapter":50},{"book":3,"chapter":52},{"book":3,"chapter":53},{"book":3,"chapter":53},{"book":3,"chapter":53},{"book":3,"chapter":134},{"book":4,"chapter":162},{"book":4,"chapter":180},{"book":5,"chapter":75},{"book":5,"chapter":75},{"book":5,"chapter":86},{"book":5,"chapter":92},{"book":5,"chapter":92},{"book":5,"chapter":92},{"book":5,"chapter":92},{"book":5,"chapter":92},{"book":5,"chapter":92},{"book":5,"chapter":92},{"book":5,"chapter":92},{"book":5,"chapter":92},{"book":5,"chapter":92},{"book":5,"chapter":92},{"book":5,"chapter":92},{"book":5,"chapter":92},{"book":5,"chapter":92},{"book":5,"chapter":92},{"book":5,"chapter":92},{"book":5,"chapter":93},{"book":5,"chapter":93},{"book":5,"chapter":93},{"book":6,"chapter":89},{"book":6,"chapter":89},{"book":6,"chapter":108},{"book":6,"chapter":108},{"book":6,"chapter":108},{"book":7,"chapter":137},{"book":7,"chapter":154},{"book":7,"chapter":196},{"book":7,"chapter":202},{"book":8,"chapter":1},{"book":8,"chapter":21},{"book":8,"chapter":43},{"book":8,"chapter":61},{"book":8,"chapter":72},{"book":8,"chapter":79},{"book":8,"chapter":94},{"book":8,"chapter":94},{"book":8,"chapter":94},{"book":9,"chapter":28},{"book":9,"chapter":69},{"book":9,"chapter":95},{"book":9,"chapter":102}]},"570186":{"id":"570186","name":"Kythera","lat":36.26229,"lng":22.97822,"pleiadesUri":"http://pleiades.stoa.org/places/570186","placeType":"island,settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":82}]},"570205":{"id":"570205","name":"Dyme","lat":38.144625,"lng":21.551425,"pleiadesUri":"http://pleiades.stoa.org/places/570205","placeType":"settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":145}]},"570220":{"id":"570220","name":"Elis","lat":37.89131,"lng":21.37493,"pleiadesUri":"http://pleiades.stoa.org/places/570220","placeType":"theatre,settlement","isEthnic":true,"occurrences":[{"book":2,"chapter":160},{"book":2,"chapter":160},{"book":2,"chapter":160},{"book":2,"chapter":160},{"book":2,"chapter":160},{"book":2,"chapter":160},{"book":2,"chapter":161},{"book":2,"chapter":161},{"book":3,"chapter":132},{"book":4,"chapter":30},{"book":4,"chapter":30},{"book":4,"chapter":149},{"book":5,"chapter":45},{"book":6,"chapter":70},{"book":6,"chapter":70},{"book":6,"chapter":127}]},"570221":{"id":"570221","name":"Elis","lat":37.75,"lng":21.25,"pleiadesUri":"http://pleiades.stoa.org/places/570221","placeType":"region","isEthnic":false,"occurrences":[{"book":2,"chapter":160},{"book":2,"chapter":160}]},"570226":{"id":"570226","name":"Ep(e)ion","lat":37.56585,"lng":21.784671,"pleiadesUri":"http://pleiades.stoa.org/places/570226","placeType":"settlement","isEthnic":false,"occurrences":[{"book":4,"chapter":148}]},"570228":{"id":"570228","name":"Epidauros","lat":37.596111,"lng":23.079167,"pleiadesUri":"http://pleiades.stoa.org/places/570228","placeType":"theatre,sanctuary,settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":146},{"book":3,"chapter":50},{"book":3,"chapter":52},{"book":5,"chapter":82},{"book":5,"chapter":82},{"book":5,"chapter":82},{"book":5,"chapter":82},{"book":5,"chapter":82},{"book":5,"chapter":83},{"book":5,"chapter":83},{"book":5,"chapter":83},{"book":5,"chapter":83},{"book":5,"chapter":83},{"book":5,"chapter":84},{"book":5,"chapter":84},{"book":5,"chapter":86}]},"570233":{"id":"570233","name":"Erasinos (river)","lat":37.75,"lng":22.75,"pleiadesUri":"http://pleiades.stoa.org/places/570233","placeType":"river","isEthnic":false,"occurrences":[{"book":6,"chapter":76},{"book":6,"chapter":76},{"book":6,"chapter":76}]},"570281":{"id":"570281","name":"Helike","lat":38.22257,"lng":22.14015,"pleiadesUri":"http://pleiades.stoa.org/places/570281","placeType":"settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":145}]},"570299":{"id":"570299","name":"Hydroussa/Hydrea (island)","lat":37.32924,"lng":23.46048,"pleiadesUri":"http://pleiades.stoa.org/places/570299","placeType":"island","isEthnic":false,"occurrences":[{"book":3,"chapter":59}]},"570336":{"id":"570336","name":"Karystos","lat":38.0165,"lng":24.4204,"pleiadesUri":"http://pleiades.stoa.org/places/570336","placeType":"settlement","isEthnic":false,"occurrences":[{"book":4,"chapter":33},{"book":4,"chapter":33},{"book":6,"chapter":99},{"book":6,"chapter":99},{"book":6,"chapter":99}]},"570343":{"id":"570343","name":"Kaukones","lat":37.25,"lng":21.75,"pleiadesUri":"http://pleiades.stoa.org/places/570343","placeType":"unknown","isEthnic":true,"occurrences":[{"book":1,"chapter":147},{"book":4,"chapter":148}]},"570348":{"id":"570348","name":"Keos (island)","lat":37.6217,"lng":24.35666,"pleiadesUri":"http://pleiades.stoa.org/places/570348","placeType":"island","isEthnic":false,"occurrences":[{"book":4,"chapter":36},{"book":5,"chapter":102}]},"570381":{"id":"570381","name":"Krathis (river)","lat":38.25,"lng":22.25,"pleiadesUri":"http://pleiades.stoa.org/places/570381","placeType":"river","isEthnic":false,"occurrences":[{"book":1,"chapter":145}]},"570406":{"id":"570406","name":"Lacedaemon/Laconia","lat":37.07624042080912,"lng":22.46082645177671,"pleiadesUri":"http://pleiades.stoa.org/places/570406","placeType":"region","isEthnic":true,"occurrences":[{"book":1,"chapter":4},{"book":1,"chapter":51},{"book":1,"chapter":51},{"book":1,"chapter":51},{"book":1,"chapter":56},{"book":1,"chapter":59},{"book":1,"chapter":65},{"book":1,"chapter":66},{"book":1,"chapter":67},{"book":1,"chapter":67},{"book":1,"chapter":68},{"book":1,"chapter":68},{"book":1,"chapter":69},{"book":1,"chapter":69},{"book":1,"chapter":70},{"book":1,"chapter":70},{"book":1,"chapter":82},{"book":1,"chapter":82},{"book":1,"chapter":82},{"book":1,"chapter":82},{"book":1,"chapter":82},{"book":1,"chapter":82},{"book":1,"chapter":152},{"book":1,"chapter":152},{"book":1,"chapter":153},{"book":1,"chapter":153},{"book":1,"chapter":153},{"book":1,"chapter":174},{"book":2,"chapter":81},{"book":2,"chapter":168},{"book":3,"chapter":39},{"book":3,"chapter":44},{"book":3,"chapter":45},{"book":3,"chapter":45},{"book":3,"chapter":46},{"book":3,"chapter":47},{"book":3,"chapter":47},{"book":3,"chapter":53},{"book":3,"chapter":54},{"book":3,"chapter":54},{"book":3,"chapter":54},{"book":3,"chapter":55},{"book":3,"chapter":56},{"book":3,"chapter":56},{"book":3,"chapter":134},{"book":3,"chapter":148},{"book":3,"chapter":148},{"book":4,"chapter":77},{"book":4,"chapter":145},{"book":4,"chapter":145},{"book":4,"chapter":145},{"book":4,"chapter":145},{"book":4,"chapter":145},{"book":4,"chapter":146},{"book":4,"chapter":146},{"book":4,"chapter":146},{"book":4,"chapter":147},{"book":4,"chapter":147},{"book":4,"chapter":148},{"book":4,"chapter":148},{"book":4,"chapter":148},{"book":4,"chapter":150},{"book":4,"chapter":179},{"book":5,"chapter":32},{"book":5,"chapter":38},{"book":5,"chapter":42},{"book":5,"chapter":48},{"book":5,"chapter":49},{"book":5,"chapter":50},{"book":5,"chapter":54},{"book":5,"chapter":63},{"book":5,"chapter":63},{"book":5,"chapter":63},{"book":5,"chapter":64},{"book":5,"chapter":65},{"book":5,"chapter":65},{"book":5,"chapter":72},{"book":5,"chapter":72},{"book":5,"chapter":72},{"book":5,"chapter":73},{"book":5,"chapter":75},{"book":5,"chapter":75},{"book":5,"chapter":90},{"book":5,"chapter":90},{"book":5,"chapter":90},{"book":5,"chapter":91},{"book":5,"chapter":92},{"book":5,"chapter":92},{"book":5,"chapter":92},{"book":5,"chapter":93},{"book":5,"chapter":96},{"book":5,"chapter":97},{"book":5,"chapter":97},{"book":6,"chapter":52},{"book":6,"chapter":52},{"book":6,"chapter":52},{"book":6,"chapter":52},{"book":6,"chapter":52},{"book":6,"chapter":52},{"book":6,"chapter":52},{"book":6,"chapter":53},{"book":6,"chapter":56},{"book":6,"chapter":57},{"book":6,"chapter":58},{"book":6,"chapter":58},{"book":6,"chapter":58},{"book":6,"chapter":58},{"book":6,"chapter":59},{"book":6,"chapter":60},{"book":6,"chapter":70},{"book":6,"chapter":70},{"book":6,"chapter":70},{"book":6,"chapter":72},{"book":6,"chapter":75},{"book":6,"chapter":77},{"book":6,"chapter":77},{"book":6,"chapter":78},{"book":6,"chapter":78},{"book":6,"chapter":85},{"book":6,"chapter":86},{"book":6,"chapter":86},{"book":6,"chapter":92},{"book":6,"chapter":103},{"book":6,"chapter":106},{"book":6,"chapter":108},{"book":6,"chapter":108},{"book":6,"chapter":108},{"book":6,"chapter":120},{"book":6,"chapter":122},{"book":6,"chapter":129},{"book":7,"chapter":3},{"book":7,"chapter":10},{"book":7,"chapter":32},{"book":7,"chapter":102},{"book":7,"chapter":104},{"book":7,"chapter":134},{"book":7,"chapter":134},{"book":7,"chapter":134},{"book":7,"chapter":135},{"book":7,"chapter":136},{"book":7,"chapter":136},{"book":7,"chapter":137},{"book":7,"chapter":137},{"book":7,"chapter":137},{"book":7,"chapter":148},{"book":7,"chapter":148},{"book":7,"chapter":149},{"book":7,"chapter":149},{"book":7,"chapter":150},{"book":7,"chapter":152},{"book":7,"chapter":153},{"book":7,"chapter":157},{"book":7,"chapter":159},{"book":7,"chapter":161},{"book":7,"chapter":161},{"book":7,"chapter":163},{"book":7,"chapter":165},{"book":7,"chapter":168},{"book":7,"chapter":173},{"book":7,"chapter":204},{"book":7,"chapter":208},{"book":7,"chapter":208},{"book":7,"chapter":209},{"book":7,"chapter":209},{"book":7,"chapter":211},{"book":7,"chapter":211},{"book":7,"chapter":213},{"book":7,"chapter":213},{"book":7,"chapter":218},{"book":7,"chapter":220},{"book":7,"chapter":220},{"book":7,"chapter":222},{"book":7,"chapter":225},{"book":7,"chapter":226},{"book":7,"chapter":227},{"book":7,"chapter":227},{"book":7,"chapter":228},{"book":7,"chapter":231},{"book":7,"chapter":234},{"book":7,"chapter":234},{"book":7,"chapter":234},{"book":7,"chapter":234},{"book":7,"chapter":235},{"book":7,"chapter":236},{"book":7,"chapter":238},{"book":7,"chapter":239},{"book":7,"chapter":239},{"book":7,"chapter":239},{"book":7,"chapter":239},{"book":7,"chapter":239},{"book":8,"chapter":1},{"book":8,"chapter":3},{"book":8,"chapter":25},{"book":8,"chapter":43},{"book":8,"chapter":48},{"book":8,"chapter":65},{"book":8,"chapter":72},{"book":8,"chapter":85},{"book":8,"chapter":114},{"book":8,"chapter":114},{"book":8,"chapter":124},{"book":8,"chapter":124},{"book":8,"chapter":125},{"book":8,"chapter":125},{"book":8,"chapter":125},{"book":8,"chapter":132},{"book":8,"chapter":141},{"book":8,"chapter":141},{"book":8,"chapter":141},{"book":8,"chapter":142},{"book":8,"chapter":142},{"book":8,"chapter":142},{"book":8,"chapter":144},{"book":9,"chapter":6},{"book":9,"chapter":6},{"book":9,"chapter":7},{"book":9,"chapter":7},{"book":9,"chapter":8},{"book":9,"chapter":9},{"book":9,"chapter":11},{"book":9,"chapter":14},{"book":9,"chapter":19},{"book":9,"chapter":19},{"book":9,"chapter":28},{"book":9,"chapter":31},{"book":9,"chapter":31},{"book":9,"chapter":31},{"book":9,"chapter":33},{"book":9,"chapter":33},{"book":9,"chapter":37},{"book":9,"chapter":37},{"book":9,"chapter":38},{"book":9,"chapter":47},{"book":9,"chapter":48},{"book":9,"chapter":49},{"book":9,"chapter":53},{"book":9,"chapter":54},{"book":9,"chapter":54},{"book":9,"chapter":55},{"book":9,"chapter":55},{"book":9,"chapter":56},{"book":9,"chapter":56},{"book":9,"chapter":56},{"book":9,"chapter":58},{"book":9,"chapter":60},{"book":9,"chapter":61},{"book":9,"chapter":61},{"book":9,"chapter":61},{"book":9,"chapter":61},{"book":9,"chapter":62},{"book":9,"chapter":63},{"book":9,"chapter":65},{"book":9,"chapter":70},{"book":9,"chapter":70},{"book":9,"chapter":70},{"book":9,"chapter":71},{"book":9,"chapter":71},{"book":9,"chapter":72},{"book":9,"chapter":74},{"book":9,"chapter":76},{"book":9,"chapter":77},{"book":9,"chapter":85},{"book":9,"chapter":85},{"book":9,"chapter":102},{"book":9,"chapter":102},{"book":9,"chapter":102},{"book":9,"chapter":103}]},"570423":{"id":"570423","name":"Lepreon","lat":37.439599,"lng":21.724777,"pleiadesUri":"http://pleiades.stoa.org/places/570423","placeType":"settlement","isEthnic":false,"occurrences":[{"book":4,"chapter":148}]},"570453":{"id":"570453","name":"Makistos","lat":37.6047,"lng":21.6758,"pleiadesUri":"http://pleiades.stoa.org/places/570453","placeType":"settlement","isEthnic":false,"occurrences":[{"book":4,"chapter":148}]},"570454":{"id":"570454","name":"Malea","lat":37.327556,"lng":22.168781,"pleiadesUri":"http://pleiades.stoa.org/places/570454","placeType":"settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":82}]},"570455":{"id":"570455","name":"Malea Pr.","lat":36.43603,"lng":23.19975,"pleiadesUri":"http://pleiades.stoa.org/places/570455","placeType":"cape","isEthnic":false,"occurrences":[{"book":4,"chapter":179}]},"570459":{"id":"570459","name":"Mantineia/Antigoneia","lat":37.618138,"lng":22.393259,"pleiadesUri":"http://pleiades.stoa.org/places/570459","placeType":"settlement","isEthnic":false,"occurrences":[{"book":4,"chapter":161},{"book":4,"chapter":161}]},"570468":{"id":"570468","name":"Megara","lat":37.2038,"lng":15.18273,"pleiadesUri":"http://pleiades.stoa.org/places/570468","placeType":"region,settlement","isEthnic":true,"occurrences":[{"book":1,"chapter":59},{"book":3,"chapter":60},{"book":5,"chapter":76},{"book":8,"chapter":1},{"book":8,"chapter":45},{"book":8,"chapter":75}]},"570480":{"id":"570480","name":"Messenia","lat":37.06945533333334,"lng":21.9323415,"pleiadesUri":"http://pleiades.stoa.org/places/570480","placeType":"region","isEthnic":false,"occurrences":[{"book":3,"chapter":47},{"book":5,"chapter":49},{"book":6,"chapter":52},{"book":6,"chapter":52}]},"570501":{"id":"570501","name":"Nauplia","lat":37.565,"lng":22.796,"pleiadesUri":"http://pleiades.stoa.org/places/570501","placeType":"settlement","isEthnic":false,"occurrences":[{"book":6,"chapter":77}]},"570508":{"id":"570508","name":"Pagai","lat":37.974359,"lng":23.362766,"pleiadesUri":"http://pleiades.stoa.org/places/570508","placeType":"unlocated,port,fort,church,settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":59}]},"570510":{"id":"570510","name":"Nonakris","lat":38.014421,"lng":22.241203,"pleiadesUri":"http://pleiades.stoa.org/places/570510","placeType":"settlement","isEthnic":false,"occurrences":[{"book":6,"chapter":74},{"book":6,"chapter":74}]},"570528":{"id":"570528","name":"Olenos","lat":38.153707,"lng":21.640599,"pleiadesUri":"http://pleiades.stoa.org/places/570528","placeType":"settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":145}]},"570531":{"id":"570531","name":"Olympia","lat":37.637849,"lng":21.630126,"pleiadesUri":"http://pleiades.stoa.org/places/570531","placeType":"palaistra,sanctuary,temple-2","isEthnic":false,"occurrences":[{"book":1,"chapter":59},{"book":2,"chapter":160},{"book":5,"chapter":22},{"book":5,"chapter":47},{"book":5,"chapter":71},{"book":6,"chapter":36},{"book":6,"chapter":70},{"book":6,"chapter":103},{"book":6,"chapter":103},{"book":6,"chapter":103},{"book":6,"chapter":103},{"book":6,"chapter":122},{"book":6,"chapter":126},{"book":6,"chapter":126},{"book":6,"chapter":127}]},"570566":{"id":"570566","name":"Parthenion M.","lat":37.48611,"lng":22.54788,"pleiadesUri":"http://pleiades.stoa.org/places/570566","placeType":"mountain","isEthnic":false,"occurrences":[{"book":6,"chapter":105}]},"570567":{"id":"570567","name":"Patra(e)","lat":38.243265,"lng":21.738518,"pleiadesUri":"http://pleiades.stoa.org/places/570567","placeType":"settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":145}]},"570572":{"id":"570572","name":"Peiros (river)","lat":38.25,"lng":21.75,"pleiadesUri":"http://pleiades.stoa.org/places/570572","placeType":"river","isEthnic":false,"occurrences":[{"book":1,"chapter":145}]},"570576":{"id":"570576","name":"Pellene","lat":38.0446,"lng":22.5384,"pleiadesUri":"http://pleiades.stoa.org/places/570576","placeType":"settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":145}]},"570577":{"id":"570577","name":"Peloponnesus/Peloponnesos/Peloponnese","lat":37.25289777692308,"lng":22.312752688461543,"pleiadesUri":"http://pleiades.stoa.org/places/570577","placeType":"peninsula,region","isEthnic":false,"occurrences":[{"book":1,"chapter":57},{"book":1,"chapter":61},{"book":1,"chapter":69},{"book":1,"chapter":145},{"book":2,"chapter":171},{"book":2,"chapter":172},{"book":3,"chapter":56},{"book":3,"chapter":59},{"book":4,"chapter":77},{"book":4,"chapter":161},{"book":4,"chapter":179},{"book":5,"chapter":43},{"book":5,"chapter":74},{"book":5,"chapter":76},{"book":6,"chapter":79},{"book":6,"chapter":86},{"book":6,"chapter":127},{"book":6,"chapter":127},{"book":6,"chapter":127},{"book":8,"chapter":31},{"book":8,"chapter":40},{"book":8,"chapter":40},{"book":8,"chapter":43},{"book":8,"chapter":44},{"book":8,"chapter":44},{"book":8,"chapter":49},{"book":8,"chapter":50},{"book":8,"chapter":50},{"book":8,"chapter":57},{"book":8,"chapter":60},{"book":8,"chapter":60},{"book":8,"chapter":60},{"book":8,"chapter":65},{"book":8,"chapter":68},{"book":8,"chapter":68},{"book":8,"chapter":70},{"book":8,"chapter":71},{"book":8,"chapter":71},{"book":8,"chapter":72},{"book":8,"chapter":73},{"book":8,"chapter":73},{"book":8,"chapter":74},{"book":8,"chapter":74},{"book":8,"chapter":75},{"book":8,"chapter":79},{"book":8,"chapter":79},{"book":8,"chapter":100},{"book":8,"chapter":101},{"book":8,"chapter":113},{"book":8,"chapter":141},{"book":9,"chapter":6},{"book":9,"chapter":6},{"book":9,"chapter":8},{"book":9,"chapter":19},{"book":9,"chapter":26},{"book":9,"chapter":26},{"book":9,"chapter":26},{"book":9,"chapter":26},{"book":9,"chapter":26},{"book":9,"chapter":73},{"book":9,"chapter":106},{"book":9,"chapter":106},{"book":9,"chapter":106},{"book":9,"chapter":114}]},"570590":{"id":"570590","name":"Phara(i)","lat":38.093144,"lng":21.717095,"pleiadesUri":"http://pleiades.stoa.org/places/570590","placeType":"settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":145}]},"570595":{"id":"570595","name":"Pheneos","lat":37.91045,"lng":22.30692,"pleiadesUri":"http://pleiades.stoa.org/places/570595","placeType":"settlement","isEthnic":false,"occurrences":[{"book":6,"chapter":75}]},"570598":{"id":"570598","name":"Phigaleia","lat":37.3963,"lng":21.8391,"pleiadesUri":"http://pleiades.stoa.org/places/570598","placeType":"settlement","isEthnic":false,"occurrences":[{"book":6,"chapter":83}]},"570609":{"id":"570609","name":"Phrixa(i)","lat":37.635009,"lng":21.71145,"pleiadesUri":"http://pleiades.stoa.org/places/570609","placeType":"settlement","isEthnic":false,"occurrences":[{"book":4,"chapter":148}]},"570612":{"id":"570612","name":"Pisa","lat":37.639535,"lng":21.653041,"pleiadesUri":"http://pleiades.stoa.org/places/570612","placeType":"settlement","isEthnic":false,"occurrences":[{"book":2,"chapter":8},{"book":2,"chapter":8}]},"570640":{"id":"570640","name":"Pylos/Koryphasion","lat":36.91198,"lng":21.69583,"pleiadesUri":"http://pleiades.stoa.org/places/570640","placeType":"settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":147}]},"570641":{"id":"570641","name":"Pyrgoi","lat":37.411551,"lng":21.691539,"pleiadesUri":"http://pleiades.stoa.org/places/570641","placeType":"settlement","isEthnic":false,"occurrences":[{"book":4,"chapter":148}]},"570647":{"id":"570647","name":"Rhypes","lat":38.2198,"lng":22.01219,"pleiadesUri":"http://pleiades.stoa.org/places/570647","placeType":"settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":145}]},"570668":{"id":"570668","name":"Sicyon/Demetrias","lat":37.98336,"lng":22.71135,"pleiadesUri":"http://pleiades.stoa.org/places/570668","placeType":"settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":145},{"book":5,"chapter":67},{"book":5,"chapter":67},{"book":5,"chapter":67},{"book":5,"chapter":67},{"book":5,"chapter":67},{"book":5,"chapter":67},{"book":5,"chapter":68},{"book":5,"chapter":68},{"book":5,"chapter":68},{"book":5,"chapter":69},{"book":6,"chapter":92},{"book":6,"chapter":92},{"book":6,"chapter":126},{"book":6,"chapter":126},{"book":6,"chapter":129},{"book":6,"chapter":131}]},"570685":{"id":"570685","name":"Sparta","lat":37.08149,"lng":22.42454,"pleiadesUri":"http://pleiades.stoa.org/places/570685","placeType":"theatre,temple,settlement,temple-2","isEthnic":true,"occurrences":[{"book":1,"chapter":6},{"book":1,"chapter":65},{"book":1,"chapter":65},{"book":1,"chapter":65},{"book":1,"chapter":65},{"book":1,"chapter":65},{"book":1,"chapter":65},{"book":1,"chapter":67},{"book":1,"chapter":67},{"book":1,"chapter":67},{"book":1,"chapter":68},{"book":1,"chapter":68},{"book":1,"chapter":68},{"book":1,"chapter":68},{"book":1,"chapter":69},{"book":1,"chapter":69},{"book":1,"chapter":69},{"book":1,"chapter":69},{"book":1,"chapter":70},{"book":1,"chapter":70},{"book":1,"chapter":77},{"book":1,"chapter":77},{"book":1,"chapter":82},{"book":1,"chapter":82},{"book":1,"chapter":82},{"book":1,"chapter":83},{"book":1,"chapter":142},{"book":1,"chapter":152},{"book":1,"chapter":152},{"book":1,"chapter":153},{"book":2,"chapter":113},{"book":2,"chapter":118},{"book":3,"chapter":46},{"book":3,"chapter":46},{"book":3,"chapter":46},{"book":3,"chapter":148},{"book":3,"chapter":148},{"book":3,"chapter":148},{"book":4,"chapter":146},{"book":4,"chapter":147},{"book":4,"chapter":149},{"book":5,"chapter":39},{"book":5,"chapter":39},{"book":5,"chapter":40},{"book":5,"chapter":41},{"book":5,"chapter":41},{"book":5,"chapter":42},{"book":5,"chapter":46},{"book":5,"chapter":48},{"book":5,"chapter":49},{"book":5,"chapter":50},{"book":5,"chapter":50},{"book":5,"chapter":50},{"book":5,"chapter":51},{"book":5,"chapter":55},{"book":5,"chapter":63},{"book":5,"chapter":65},{"book":5,"chapter":74},{"book":5,"chapter":75},{"book":5,"chapter":75},{"book":5,"chapter":76},{"book":5,"chapter":90},{"book":5,"chapter":91},{"book":5,"chapter":92},{"book":5,"chapter":97},{"book":5,"chapter":97},{"book":6,"chapter":49},{"book":6,"chapter":50},{"book":6,"chapter":50},{"book":6,"chapter":51},{"book":6,"chapter":51},{"book":6,"chapter":52},{"book":6,"chapter":56},{"book":6,"chapter":56},{"book":6,"chapter":58},{"book":6,"chapter":58},{"book":6,"chapter":58},{"book":6,"chapter":59},{"book":6,"chapter":61},{"book":6,"chapter":61},{"book":6,"chapter":61},{"book":6,"chapter":61},{"book":6,"chapter":63},{"book":6,"chapter":63},{"book":6,"chapter":65},{"book":6,"chapter":65},{"book":6,"chapter":66},{"book":6,"chapter":67},{"book":6,"chapter":67},{"book":6,"chapter":68},{"book":6,"chapter":71},{"book":6,"chapter":71},{"book":6,"chapter":71},{"book":6,"chapter":72},{"book":6,"chapter":72},{"book":6,"chapter":74},{"book":6,"chapter":74},{"book":6,"chapter":75},{"book":6,"chapter":75},{"book":6,"chapter":76},{"book":6,"chapter":77},{"book":6,"chapter":81},{"book":6,"chapter":82},{"book":6,"chapter":82},{"book":6,"chapter":84},{"book":6,"chapter":84},{"book":6,"chapter":84},{"book":6,"chapter":84},{"book":6,"chapter":84},{"book":6,"chapter":85},{"book":6,"chapter":85},{"book":6,"chapter":85},{"book":6,"chapter":85},{"book":6,"chapter":86},{"book":6,"chapter":86},{"book":6,"chapter":86},{"book":6,"chapter":86},{"book":6,"chapter":86},{"book":6,"chapter":105},{"book":6,"chapter":106},{"book":6,"chapter":120},{"book":7,"chapter":3},{"book":7,"chapter":3},{"book":7,"chapter":104},{"book":7,"chapter":133},{"book":7,"chapter":134},{"book":7,"chapter":134},{"book":7,"chapter":134},{"book":7,"chapter":134},{"book":7,"chapter":134},{"book":7,"chapter":134},{"book":7,"chapter":134},{"book":7,"chapter":135},{"book":7,"chapter":136},{"book":7,"chapter":137},{"book":7,"chapter":137},{"book":7,"chapter":149},{"book":7,"chapter":149},{"book":7,"chapter":149},{"book":7,"chapter":149},{"book":7,"chapter":159},{"book":7,"chapter":160},{"book":7,"chapter":169},{"book":7,"chapter":202},{"book":7,"chapter":205},{"book":7,"chapter":205},{"book":7,"chapter":205},{"book":7,"chapter":205},{"book":7,"chapter":209},{"book":7,"chapter":211},{"book":7,"chapter":220},{"book":7,"chapter":220},{"book":7,"chapter":220},{"book":7,"chapter":220},{"book":7,"chapter":220},{"book":7,"chapter":224},{"book":7,"chapter":226},{"book":7,"chapter":228},{"book":7,"chapter":228},{"book":7,"chapter":228},{"book":7,"chapter":229},{"book":7,"chapter":229},{"book":7,"chapter":229},{"book":7,"chapter":229},{"book":7,"chapter":230},{"book":7,"chapter":231},{"book":7,"chapter":233},{"book":7,"chapter":234},{"book":7,"chapter":235},{"book":8,"chapter":2},{"book":8,"chapter":114},{"book":8,"chapter":125},{"book":8,"chapter":125},{"book":9,"chapter":10},{"book":9,"chapter":11},{"book":9,"chapter":12},{"book":9,"chapter":12},{"book":9,"chapter":19},{"book":9,"chapter":28},{"book":9,"chapter":28},{"book":9,"chapter":29},{"book":9,"chapter":29},{"book":9,"chapter":33},{"book":9,"chapter":33},{"book":9,"chapter":34},{"book":9,"chapter":35},{"book":9,"chapter":35},{"book":9,"chapter":35},{"book":9,"chapter":36},{"book":9,"chapter":37},{"book":9,"chapter":46},{"book":9,"chapter":47},{"book":9,"chapter":53},{"book":9,"chapter":54},{"book":9,"chapter":61},{"book":9,"chapter":63},{"book":9,"chapter":64},{"book":9,"chapter":64},{"book":9,"chapter":70},{"book":9,"chapter":71},{"book":9,"chapter":73},{"book":9,"chapter":76},{"book":9,"chapter":78},{"book":9,"chapter":79},{"book":9,"chapter":85}]},"570698":{"id":"570698","name":"Styx (river)","lat":38.25,"lng":22.25,"pleiadesUri":"http://pleiades.stoa.org/places/570698","placeType":"river","isEthnic":false,"occurrences":[{"book":6,"chapter":74},{"book":6,"chapter":74}]},"570702":{"id":"570702","name":"Tainaron (settlement)","lat":36.401551,"lng":22.4866293,"pleiadesUri":"http://pleiades.stoa.org/places/570702","placeType":"settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":23},{"book":1,"chapter":24}]},"570703":{"id":"570703","name":"Tainaron Pr.","lat":36.3856534,"lng":22.4831905,"pleiadesUri":"http://pleiades.stoa.org/places/570703","placeType":"cape","isEthnic":false,"occurrences":[{"book":1,"chapter":24}]},"570706":{"id":"570706","name":"Taygetos M.","lat":36.9528148,"lng":22.3503405,"pleiadesUri":"http://pleiades.stoa.org/places/570706","placeType":"mountain","isEthnic":false,"occurrences":[{"book":4,"chapter":145},{"book":4,"chapter":147},{"book":4,"chapter":148}]},"570707":{"id":"570707","name":"Tegea","lat":37.464,"lng":22.429,"pleiadesUri":"http://pleiades.stoa.org/places/570707","placeType":"theatre,church,settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":65},{"book":1,"chapter":65},{"book":1,"chapter":66},{"book":1,"chapter":66},{"book":1,"chapter":66},{"book":1,"chapter":66},{"book":1,"chapter":67},{"book":1,"chapter":67},{"book":1,"chapter":67},{"book":1,"chapter":67},{"book":1,"chapter":67},{"book":1,"chapter":68},{"book":1,"chapter":68},{"book":1,"chapter":68},{"book":1,"chapter":68},{"book":6,"chapter":73},{"book":6,"chapter":105}]},"570723":{"id":"570723","name":"Therapne","lat":37.066091,"lng":22.454127,"pleiadesUri":"http://pleiades.stoa.org/places/570723","placeType":"settlement","isEthnic":false,"occurrences":[{"book":6,"chapter":61}]},"570736":{"id":"570736","name":"Thyrea(tis)","lat":37.25,"lng":22.75,"pleiadesUri":"http://pleiades.stoa.org/places/570736","placeType":"region","isEthnic":false,"occurrences":[{"book":1,"chapter":82},{"book":1,"chapter":82},{"book":1,"chapter":83},{"book":6,"chapter":76}]},"570740":{"id":"570740","name":"Tiryns","lat":37.59918,"lng":22.80004,"pleiadesUri":"http://pleiades.stoa.org/places/570740","placeType":"settlement","isEthnic":false,"occurrences":[{"book":6,"chapter":77},{"book":6,"chapter":77},{"book":6,"chapter":83}]},"570755":{"id":"570755","name":"Trit(a)ia","lat":37.959,"lng":21.687,"pleiadesUri":"http://pleiades.stoa.org/places/570755","placeType":"settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":145}]},"570756":{"id":"570756","name":"Troizen","lat":37.50303,"lng":23.34845,"pleiadesUri":"http://pleiades.stoa.org/places/570756","placeType":"settlement","isEthnic":false,"occurrences":[{"book":3,"chapter":59}]},"579844":{"id":"579844","name":"Temple of Aphaia on Aegina","lat":37.74991,"lng":23.42372,"pleiadesUri":"http://pleiades.stoa.org/places/579844","placeType":"island,settlement,temple-2","isEthnic":true,"occurrences":[{"book":2,"chapter":178},{"book":3,"chapter":59},{"book":3,"chapter":59},{"book":3,"chapter":59},{"book":3,"chapter":131},{"book":5,"chapter":80},{"book":5,"chapter":80},{"book":5,"chapter":80},{"book":5,"chapter":80},{"book":5,"chapter":81},{"book":5,"chapter":81},{"book":5,"chapter":82},{"book":5,"chapter":83},{"book":5,"chapter":84},{"book":5,"chapter":84},{"book":5,"chapter":84},{"book":5,"chapter":85},{"book":5,"chapter":86},{"book":5,"chapter":86},{"book":5,"chapter":86},{"book":5,"chapter":86},{"book":5,"chapter":86},{"book":5,"chapter":86},{"book":5,"chapter":86},{"book":5,"chapter":88},{"book":5,"chapter":89},{"book":5,"chapter":89},{"book":5,"chapter":89},{"book":5,"chapter":89},{"book":5,"chapter":89},{"book":5,"chapter":89},{"book":5,"chapter":90},{"book":6,"chapter":35},{"book":6,"chapter":49},{"book":6,"chapter":49},{"book":6,"chapter":50},{"book":6,"chapter":50},{"book":6,"chapter":50},{"book":6,"chapter":50},{"book":6,"chapter":50},{"book":6,"chapter":61},{"book":6,"chapter":61},{"book":6,"chapter":61},{"book":6,"chapter":65},{"book":6,"chapter":65},{"book":6,"chapter":73},{"book":6,"chapter":73},{"book":6,"chapter":73},{"book":6,"chapter":73},{"book":6,"chapter":74},{"book":6,"chapter":85},{"book":6,"chapter":85},{"book":6,"chapter":85},{"book":6,"chapter":85},{"book":6,"chapter":85},{"book":6,"chapter":85},{"book":6,"chapter":86},{"book":6,"chapter":87},{"book":6,"chapter":87},{"book":6,"chapter":88},{"book":6,"chapter":88},{"book":6,"chapter":88},{"book":6,"chapter":88},{"book":6,"chapter":88},{"book":6,"chapter":88},{"book":6,"chapter":89},{"book":6,"chapter":89},{"book":6,"chapter":90},{"book":6,"chapter":90},{"book":6,"chapter":91},{"book":6,"chapter":91},{"book":6,"chapter":92},{"book":6,"chapter":92},{"book":6,"chapter":92},{"book":6,"chapter":92},{"book":6,"chapter":92},{"book":6,"chapter":93},{"book":6,"chapter":94},{"book":8,"chapter":1},{"book":8,"chapter":46},{"book":8,"chapter":46},{"book":8,"chapter":46},{"book":8,"chapter":74},{"book":8,"chapter":84},{"book":8,"chapter":86},{"book":8,"chapter":91},{"book":8,"chapter":91},{"book":8,"chapter":92},{"book":8,"chapter":92},{"book":8,"chapter":93},{"book":8,"chapter":122},{"book":8,"chapter":122}]},"579853":{"id":"579853","name":"Temple of Aphaia on Aegina","lat":37.74991,"lng":23.42372,"pleiadesUri":"http://pleiades.stoa.org/places/579853","placeType":"island,settlement,temple-2","isEthnic":false,"occurrences":[{"book":3,"chapter":59},{"book":3,"chapter":59},{"book":3,"chapter":131},{"book":4,"chapter":152},{"book":6,"chapter":89}]},"579858":{"id":"579858","name":"Alopeke","lat":37.95,"lng":23.749997,"pleiadesUri":"http://pleiades.stoa.org/places/579858","placeType":"settlement","isEthnic":false,"occurrences":[{"book":5,"chapter":63}]},"579866":{"id":"579866","name":"Anaphlystos","lat":37.7273205,"lng":23.9508185,"pleiadesUri":"http://pleiades.stoa.org/places/579866","placeType":"settlement","isEthnic":false,"occurrences":[{"book":4,"chapter":99}]},"579873":{"id":"579873","name":"Pagai","lat":37.974359,"lng":23.362766,"pleiadesUri":"http://pleiades.stoa.org/places/579873","placeType":"unlocated,port,fort,church,settlement","isEthnic":false,"occurrences":[{"book":6,"chapter":109}]},"579879":{"id":"579879","name":"Artemis Brauronia, T.","lat":37.926189,"lng":23.9937505,"pleiadesUri":"http://pleiades.stoa.org/places/579879","placeType":"sanctuary,temple-2","isEthnic":false,"occurrences":[{"book":4,"chapter":145}]},"579885":{"id":"579885","name":"Athenae","lat":37.971687,"lng":23.726464,"pleiadesUri":"http://pleiades.stoa.org/places/579885","placeType":"settlement","isEthnic":true,"occurrences":[{"book":1,"chapter":29},{"book":1,"chapter":29},{"book":1,"chapter":29},{"book":1,"chapter":30},{"book":1,"chapter":30},{"book":1,"chapter":30},{"book":1,"chapter":30},{"book":1,"chapter":32},{"book":1,"chapter":56},{"book":1,"chapter":57},{"book":1,"chapter":59},{"book":1,"chapter":59},{"book":1,"chapter":59},{"book":1,"chapter":59},{"book":1,"chapter":60},{"book":1,"chapter":60},{"book":1,"chapter":60},{"book":1,"chapter":62},{"book":1,"chapter":62},{"book":1,"chapter":63},{"book":1,"chapter":64},{"book":1,"chapter":64},{"book":1,"chapter":64},{"book":1,"chapter":64},{"book":1,"chapter":64},{"book":1,"chapter":64},{"book":1,"chapter":65},{"book":1,"chapter":86},{"book":1,"chapter":98},{"book":1,"chapter":143},{"book":1,"chapter":143},{"book":1,"chapter":146},{"book":1,"chapter":147},{"book":1,"chapter":173},{"book":2,"chapter":8},{"book":2,"chapter":51},{"book":2,"chapter":52},{"book":2,"chapter":52},{"book":2,"chapter":52},{"book":2,"chapter":177},{"book":3,"chapter":131},{"book":3,"chapter":160},{"book":3,"chapter":160},{"book":4,"chapter":137},{"book":4,"chapter":145},{"book":5,"chapter":55},{"book":5,"chapter":55},{"book":5,"chapter":57},{"book":5,"chapter":57},{"book":5,"chapter":61},{"book":5,"chapter":61},{"book":5,"chapter":61},{"book":5,"chapter":62},{"book":5,"chapter":62},{"book":5,"chapter":62},{"book":5,"chapter":62},{"book":5,"chapter":62},{"book":5,"chapter":63},{"book":5,"chapter":63},{"book":5,"chapter":64},{"book":5,"chapter":64},{"book":5,"chapter":65},{"book":5,"chapter":65},{"book":5,"chapter":65},{"book":5,"chapter":65},{"book":5,"chapter":65},{"book":5,"chapter":66},{"book":5,"chapter":66},{"book":5,"chapter":69},{"book":5,"chapter":69},{"book":5,"chapter":70},{"book":5,"chapter":70},{"book":5,"chapter":71},{"book":5,"chapter":71},{"book":5,"chapter":71},{"book":5,"chapter":72},{"book":5,"chapter":72},{"book":5,"chapter":72},{"book":5,"chapter":72},{"book":5,"chapter":73},{"book":5,"chapter":73},{"book":5,"chapter":74},{"book":5,"chapter":74},{"book":5,"chapter":74},{"book":5,"chapter":76},{"book":5,"chapter":77},{"book":5,"chapter":77},{"book":5,"chapter":77},{"book":5,"chapter":77},{"book":5,"chapter":77},{"book":5,"chapter":78},{"book":5,"chapter":78},{"book":5,"chapter":79},{"book":5,"chapter":79},{"book":5,"chapter":81},{"book":5,"chapter":81},{"book":5,"chapter":81},{"book":5,"chapter":81},{"book":5,"chapter":82},{"book":5,"chapter":82},{"book":5,"chapter":82},{"book":5,"chapter":82},{"book":5,"chapter":82},{"book":5,"chapter":83},{"book":5,"chapter":84},{"book":5,"chapter":84},{"book":5,"chapter":84},{"book":5,"chapter":85},{"book":5,"chapter":85},{"book":5,"chapter":86},{"book":5,"chapter":86},{"book":5,"chapter":86},{"book":5,"chapter":86},{"book":5,"chapter":86},{"book":5,"chapter":86},{"book":5,"chapter":86},{"book":5,"chapter":86},{"book":5,"chapter":86},{"book":5,"chapter":86},{"book":5,"chapter":86},{"book":5,"chapter":86},{"book":5,"chapter":86},{"book":5,"chapter":86},{"book":5,"chapter":89},{"book":5,"chapter":89},{"book":5,"chapter":89},{"book":5,"chapter":89},{"book":5,"chapter":90},{"book":5,"chapter":90},{"book":5,"chapter":90},{"book":5,"chapter":91},{"book":5,"chapter":91},{"book":5,"chapter":91},{"book":5,"chapter":91},{"book":5,"chapter":93},{"book":5,"chapter":94},{"book":5,"chapter":94},{"book":5,"chapter":95},{"book":5,"chapter":95},{"book":5,"chapter":95},{"book":5,"chapter":96},{"book":5,"chapter":96},{"book":5,"chapter":96},{"book":5,"chapter":96},{"book":5,"chapter":96},{"book":5,"chapter":96},{"book":5,"chapter":97},{"book":5,"chapter":97},{"book":5,"chapter":97},{"book":5,"chapter":97},{"book":5,"chapter":97},{"book":5,"chapter":97},{"book":5,"chapter":99},{"book":5,"chapter":99},{"book":5,"chapter":103},{"book":5,"chapter":103},{"book":5,"chapter":105},{"book":5,"chapter":105},{"book":5,"chapter":105},{"book":5,"chapter":106},{"book":5,"chapter":113},{"book":6,"chapter":21},{"book":6,"chapter":21},{"book":6,"chapter":35},{"book":6,"chapter":35},{"book":6,"chapter":35},{"book":6,"chapter":35},{"book":6,"chapter":36},{"book":6,"chapter":39},{"book":6,"chapter":41},{"book":6,"chapter":42},{"book":6,"chapter":44},{"book":6,"chapter":49},{"book":6,"chapter":49},{"book":6,"chapter":49},{"book":6,"chapter":50},{"book":6,"chapter":73},{"book":6,"chapter":75},{"book":6,"chapter":85},{"book":6,"chapter":85},{"book":6,"chapter":85},{"book":6,"chapter":86},{"book":6,"chapter":86},{"book":6,"chapter":86},{"book":6,"chapter":86},{"book":6,"chapter":86},{"book":6,"chapter":87},{"book":6,"chapter":87},{"book":6,"chapter":87},{"book":6,"chapter":87},{"book":6,"chapter":87},{"book":6,"chapter":88},{"book":6,"chapter":88},{"book":6,"chapter":88},{"book":6,"chapter":89},{"book":6,"chapter":89},{"book":6,"chapter":89},{"book":6,"chapter":89},{"book":6,"chapter":90},{"book":6,"chapter":90},{"book":6,"chapter":92},{"book":6,"chapter":92},{"book":6,"chapter":93},{"book":6,"chapter":93},{"book":6,"chapter":94},{"book":6,"chapter":94},{"book":6,"chapter":94},{"book":6,"chapter":94},{"book":6,"chapter":94},{"book":6,"chapter":99},{"book":6,"chapter":100},{"book":6,"chapter":100},{"book":6,"chapter":100},{"book":6,"chapter":100},{"book":6,"chapter":100},{"book":6,"chapter":102},{"book":6,"chapter":103},{"book":6,"chapter":103},{"book":6,"chapter":103},{"book":6,"chapter":104},{"book":6,"chapter":105},{"book":6,"chapter":105},{"book":6,"chapter":105},{"book":6,"chapter":105},{"book":6,"chapter":105},{"book":6,"chapter":105},{"book":6,"chapter":106},{"book":6,"chapter":106},{"book":6,"chapter":106},{"book":6,"chapter":107},{"book":6,"chapter":108},{"book":6,"chapter":108},{"book":6,"chapter":108},{"book":6,"chapter":108},{"book":6,"chapter":108},{"book":6,"chapter":108},{"book":6,"chapter":108},{"book":6,"chapter":108},{"book":6,"chapter":108},{"book":6,"chapter":108},{"book":6,"chapter":109},{"book":6,"chapter":109},{"book":6,"chapter":109},{"book":6,"chapter":109},{"book":6,"chapter":109},{"book":6,"chapter":109},{"book":6,"chapter":109},{"book":6,"chapter":111},{"book":6,"chapter":111},{"book":6,"chapter":111},{"book":6,"chapter":111},{"book":6,"chapter":111},{"book":6,"chapter":111},{"book":6,"chapter":112},{"book":6,"chapter":112},{"book":6,"chapter":112},{"book":6,"chapter":113},{"book":6,"chapter":113},{"book":6,"chapter":115},{"book":6,"chapter":115},{"book":6,"chapter":115},{"book":6,"chapter":116},{"book":6,"chapter":116},{"book":6,"chapter":117},{"book":6,"chapter":117},{"book":6,"chapter":121},{"book":6,"chapter":121},{"book":6,"chapter":121},{"book":6,"chapter":122},{"book":6,"chapter":124},{"book":6,"chapter":124},{"book":6,"chapter":127},{"book":6,"chapter":130},{"book":6,"chapter":131},{"book":6,"chapter":132},{"book":6,"chapter":132},{"book":6,"chapter":135},{"book":6,"chapter":136},{"book":6,"chapter":136},{"book":6,"chapter":136},{"book":6,"chapter":137},{"book":6,"chapter":137},{"book":6,"chapter":137},{"book":6,"chapter":137},{"book":6,"chapter":137},{"book":6,"chapter":137},{"book":6,"chapter":137},{"book":6,"chapter":138},{"book":6,"chapter":138},{"book":6,"chapter":138},{"book":6,"chapter":138},{"book":6,"chapter":138},{"book":6,"chapter":139},{"book":6,"chapter":139},{"book":6,"chapter":139},{"book":6,"chapter":140},{"book":7,"chapter":1},{"book":7,"chapter":2},{"book":7,"chapter":5},{"book":7,"chapter":5},{"book":7,"chapter":5},{"book":7,"chapter":6},{"book":7,"chapter":6},{"book":7,"chapter":8},{"book":7,"chapter":8},{"book":7,"chapter":8},{"book":7,"chapter":9},{"book":7,"chapter":10},{"book":7,"chapter":10},{"book":7,"chapter":11},{"book":7,"chapter":32},{"book":7,"chapter":33},{"book":7,"chapter":51},{"book":7,"chapter":62},{"book":7,"chapter":90},{"book":7,"chapter":92},{"book":7,"chapter":95},{"book":7,"chapter":107},{"book":7,"chapter":133},{"book":7,"chapter":133},{"book":7,"chapter":137},{"book":7,"chapter":137},{"book":7,"chapter":138},{"book":7,"chapter":139},{"book":7,"chapter":139},{"book":7,"chapter":139},{"book":7,"chapter":139},{"book":7,"chapter":140},{"book":7,"chapter":140},{"book":7,"chapter":141},{"book":7,"chapter":141},{"book":7,"chapter":142},{"book":7,"chapter":142},{"book":7,"chapter":143},{"book":7,"chapter":143},{"book":7,"chapter":143},{"book":7,"chapter":143},{"book":7,"chapter":144},{"book":7,"chapter":144},{"book":7,"chapter":144},{"book":7,"chapter":144},{"book":7,"chapter":145},{"book":7,"chapter":145},{"book":7,"chapter":151},{"book":7,"chapter":157},{"book":7,"chapter":161},{"book":7,"chapter":161},{"book":7,"chapter":161},{"book":7,"chapter":162},{"book":7,"chapter":168},{"book":7,"chapter":173},{"book":7,"chapter":182},{"book":7,"chapter":182},{"book":7,"chapter":183},{"book":7,"chapter":189},{"book":7,"chapter":189},{"book":7,"chapter":189},{"book":7,"chapter":189},{"book":7,"chapter":203},{"book":8,"chapter":1},{"book":8,"chapter":1},{"book":8,"chapter":1},{"book":8,"chapter":3},{"book":8,"chapter":3},{"book":8,"chapter":3},{"book":8,"chapter":4},{"book":8,"chapter":6},{"book":8,"chapter":10},{"book":8,"chapter":11},{"book":8,"chapter":11},{"book":8,"chapter":17},{"book":8,"chapter":17},{"book":8,"chapter":18},{"book":8,"chapter":21},{"book":8,"chapter":22},{"book":8,"chapter":22},{"book":8,"chapter":34},{"book":8,"chapter":40},{"book":8,"chapter":40},{"book":8,"chapter":40},{"book":8,"chapter":41},{"book":8,"chapter":41},{"book":8,"chapter":41},{"book":8,"chapter":41},{"book":8,"chapter":42},{"book":8,"chapter":44},{"book":8,"chapter":44},{"book":8,"chapter":44},{"book":8,"chapter":44},{"book":8,"chapter":44},{"book":8,"chapter":46},{"book":8,"chapter":46},{"book":8,"chapter":48},{"book":8,"chapter":50},{"book":8,"chapter":50},{"book":8,"chapter":51},{"book":8,"chapter":51},{"book":8,"chapter":52},{"book":8,"chapter":52},{"book":8,"chapter":53},{"book":8,"chapter":54},{"book":8,"chapter":54},{"book":8,"chapter":55},{"book":8,"chapter":55},{"book":8,"chapter":55},{"book":8,"chapter":56},{"book":8,"chapter":57},{"book":8,"chapter":61},{"book":8,"chapter":61},{"book":8,"chapter":63},{"book":8,"chapter":63},{"book":8,"chapter":65},{"book":8,"chapter":65},{"book":8,"chapter":65},{"book":8,"chapter":65},{"book":8,"chapter":65},{"book":8,"chapter":66},{"book":8,"chapter":66},{"book":8,"chapter":67},{"book":8,"chapter":68},{"book":8,"chapter":68},{"book":8,"chapter":70},{"book":8,"chapter":74},{"book":8,"chapter":75},{"book":8,"chapter":77},{"book":8,"chapter":79},{"book":8,"chapter":79},{"book":8,"chapter":84},{"book":8,"chapter":84},{"book":8,"chapter":85},{"book":8,"chapter":86},{"book":8,"chapter":91},{"book":8,"chapter":92},{"book":8,"chapter":93},{"book":8,"chapter":93},{"book":8,"chapter":93},{"book":8,"chapter":93},{"book":8,"chapter":94},{"book":8,"chapter":94},{"book":8,"chapter":95},{"book":8,"chapter":96},{"book":8,"chapter":99},{"book":8,"chapter":100},{"book":8,"chapter":103},{"book":8,"chapter":106},{"book":8,"chapter":109},{"book":8,"chapter":110},{"book":8,"chapter":110},{"book":8,"chapter":110},{"book":8,"chapter":110},{"book":8,"chapter":111},{"book":8,"chapter":111},{"book":8,"chapter":112},{"book":8,"chapter":118},{"book":8,"chapter":120},{"book":8,"chapter":125},{"book":8,"chapter":125},{"book":8,"chapter":126},{"book":8,"chapter":132},{"book":8,"chapter":136},{"book":8,"chapter":136},{"book":8,"chapter":136},{"book":8,"chapter":137},{"book":8,"chapter":139},{"book":8,"chapter":139},{"book":8,"chapter":139},{"book":8,"chapter":139},{"book":8,"chapter":141},{"book":8,"chapter":141},{"book":8,"chapter":141},{"book":8,"chapter":141},{"book":8,"chapter":141},{"book":8,"chapter":142},{"book":8,"chapter":143},{"book":8,"chapter":143},{"book":8,"chapter":143},{"book":8,"chapter":144},{"book":8,"chapter":144},{"book":8,"chapter":144},{"book":8,"chapter":144},{"book":8,"chapter":144},{"book":9,"chapter":1},{"book":9,"chapter":1},{"book":9,"chapter":3},{"book":9,"chapter":3},{"book":9,"chapter":4},{"book":9,"chapter":4},{"book":9,"chapter":4},{"book":9,"chapter":5},{"book":9,"chapter":6},{"book":9,"chapter":6},{"book":9,"chapter":6},{"book":9,"chapter":6},{"book":9,"chapter":7},{"book":9,"chapter":7},{"book":9,"chapter":7},{"book":9,"chapter":8},{"book":9,"chapter":8},{"book":9,"chapter":8},{"book":9,"chapter":9},{"book":9,"chapter":9},{"book":9,"chapter":9},{"book":9,"chapter":11},{"book":9,"chapter":12},{"book":9,"chapter":13},{"book":9,"chapter":13},{"book":9,"chapter":17},{"book":9,"chapter":19},{"book":9,"chapter":21},{"book":9,"chapter":21},{"book":9,"chapter":22},{"book":9,"chapter":23},{"book":9,"chapter":26},{"book":9,"chapter":26},{"book":9,"chapter":26},{"book":9,"chapter":27},{"book":9,"chapter":28},{"book":9,"chapter":28},{"book":9,"chapter":28},{"book":9,"chapter":28},{"book":9,"chapter":31},{"book":9,"chapter":32},{"book":9,"chapter":32},{"book":9,"chapter":35},{"book":9,"chapter":39},{"book":9,"chapter":45},{"book":9,"chapter":46},{"book":9,"chapter":46},{"book":9,"chapter":48},{"book":9,"chapter":54},{"book":9,"chapter":55},{"book":9,"chapter":55},{"book":9,"chapter":56},{"book":9,"chapter":56},{"book":9,"chapter":57},{"book":9,"chapter":59},{"book":9,"chapter":60},{"book":9,"chapter":60},{"book":9,"chapter":60},{"book":9,"chapter":61},{"book":9,"chapter":67},{"book":9,"chapter":67},{"book":9,"chapter":70},{"book":9,"chapter":70},{"book":9,"chapter":70},{"book":9,"chapter":70},{"book":9,"chapter":71},{"book":9,"chapter":71},{"book":9,"chapter":73},{"book":9,"chapter":73},{"book":9,"chapter":73},{"book":9,"chapter":75},{"book":9,"chapter":75},{"book":9,"chapter":85},{"book":9,"chapter":99},{"book":9,"chapter":102},{"book":9,"chapter":102},{"book":9,"chapter":102},{"book":9,"chapter":105},{"book":9,"chapter":106},{"book":9,"chapter":106},{"book":9,"chapter":106},{"book":9,"chapter":108},{"book":9,"chapter":114},{"book":9,"chapter":115},{"book":9,"chapter":116},{"book":9,"chapter":117},{"book":9,"chapter":117},{"book":9,"chapter":119},{"book":9,"chapter":119},{"book":9,"chapter":120}]},"579888":{"id":"579888","name":"Attica","lat":38.051998833333336,"lng":23.818991099999998,"pleiadesUri":"http://pleiades.stoa.org/places/579888","placeType":"region","isEthnic":true,"occurrences":[{"book":1,"chapter":57},{"book":1,"chapter":59},{"book":1,"chapter":62},{"book":1,"chapter":192},{"book":1,"chapter":192},{"book":3,"chapter":134},{"book":4,"chapter":99},{"book":4,"chapter":99},{"book":4,"chapter":99},{"book":4,"chapter":99},{"book":5,"chapter":64},{"book":5,"chapter":64},{"book":5,"chapter":65},{"book":5,"chapter":74},{"book":5,"chapter":74},{"book":5,"chapter":76},{"book":5,"chapter":81},{"book":5,"chapter":85},{"book":5,"chapter":86},{"book":5,"chapter":88},{"book":5,"chapter":89},{"book":6,"chapter":73},{"book":6,"chapter":102},{"book":6,"chapter":102},{"book":6,"chapter":120},{"book":6,"chapter":137},{"book":6,"chapter":138},{"book":6,"chapter":140},{"book":6,"chapter":140},{"book":7,"chapter":10},{"book":7,"chapter":137},{"book":7,"chapter":143},{"book":9,"chapter":3},{"book":9,"chapter":4},{"book":9,"chapter":6},{"book":9,"chapter":6},{"book":9,"chapter":7},{"book":9,"chapter":8},{"book":9,"chapter":12},{"book":9,"chapter":13},{"book":9,"chapter":13},{"book":9,"chapter":27},{"book":9,"chapter":73},{"book":9,"chapter":99}]},"579920":{"id":"579920","name":"Eleusis","lat":38.041096,"lng":23.538311,"pleiadesUri":"http://pleiades.stoa.org/places/579920","placeType":"sanctuary,settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":30},{"book":5,"chapter":74},{"book":5,"chapter":74},{"book":5,"chapter":75},{"book":5,"chapter":76},{"book":6,"chapter":64},{"book":6,"chapter":75}]},"579925":{"id":"579925","name":"Eretria","lat":39.290562,"lng":22.607216,"pleiadesUri":"http://pleiades.stoa.org/places/579925","placeType":"settlement,temple-2","isEthnic":false,"occurrences":[{"book":1,"chapter":61},{"book":1,"chapter":62},{"book":5,"chapter":57},{"book":5,"chapter":99},{"book":5,"chapter":99},{"book":5,"chapter":99},{"book":5,"chapter":102},{"book":6,"chapter":44},{"book":6,"chapter":94},{"book":6,"chapter":94},{"book":6,"chapter":98},{"book":6,"chapter":99},{"book":6,"chapter":100},{"book":6,"chapter":100},{"book":6,"chapter":100},{"book":6,"chapter":101},{"book":6,"chapter":101},{"book":6,"chapter":101},{"book":6,"chapter":102},{"book":6,"chapter":102},{"book":6,"chapter":102},{"book":6,"chapter":106},{"book":6,"chapter":115},{"book":6,"chapter":119},{"book":6,"chapter":119},{"book":6,"chapter":119},{"book":6,"chapter":120},{"book":6,"chapter":127}]},"579946":{"id":"579946","name":"Heleon","lat":38.355639,"lng":23.479833,"pleiadesUri":"http://pleiades.stoa.org/places/579946","placeType":"settlement","isEthnic":false,"occurrences":[{"book":5,"chapter":43}]},"580002":{"id":"580002","name":"Kynosoura Pr.","lat":37.94394,"lng":23.55943,"pleiadesUri":"http://pleiades.stoa.org/places/580002","placeType":"cape","isEthnic":false,"occurrences":[{"book":5,"chapter":64}]},"580011":{"id":"580011","name":"Pagai","lat":37.974359,"lng":23.362766,"pleiadesUri":"http://pleiades.stoa.org/places/580011","placeType":"unlocated,port,fort,church,settlement","isEthnic":false,"occurrences":[{"book":5,"chapter":62}]},"580021":{"id":"580021","name":"Marathon","lat":38.1465515,"lng":23.970146,"pleiadesUri":"http://pleiades.stoa.org/places/580021","placeType":"settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":62},{"book":1,"chapter":62},{"book":1,"chapter":62},{"book":1,"chapter":62},{"book":6,"chapter":102},{"book":6,"chapter":103},{"book":6,"chapter":107},{"book":6,"chapter":107},{"book":6,"chapter":109},{"book":6,"chapter":111},{"book":6,"chapter":113},{"book":6,"chapter":116},{"book":6,"chapter":132},{"book":6,"chapter":133},{"book":7,"chapter":1},{"book":7,"chapter":74}]},"580039":{"id":"580039","name":"Oinoe","lat":38.156,"lng":23.952,"pleiadesUri":"http://pleiades.stoa.org/places/580039","placeType":"settlement,fort","isEthnic":false,"occurrences":[{"book":5,"chapter":74}]},"580044":{"id":"580044","name":"Delphinion","lat":38.291099,"lng":23.846116,"pleiadesUri":"http://pleiades.stoa.org/places/580044","placeType":"temple-2,spring,port,sanctuary,settlement","isEthnic":false,"occurrences":[{"book":6,"chapter":101}]},"580047":{"id":"580047","name":"Paiania Kathyperthen","lat":37.974635,"lng":23.844008,"pleiadesUri":"http://pleiades.stoa.org/places/580047","placeType":"settlement","isEthnic":true,"occurrences":[{"book":1,"chapter":60}]},"580072":{"id":"580072","name":"Phaleron","lat":37.9373,"lng":23.7062,"pleiadesUri":"http://pleiades.stoa.org/places/580072","placeType":"settlement","isEthnic":false,"occurrences":[{"book":5,"chapter":63},{"book":5,"chapter":63},{"book":5,"chapter":81},{"book":5,"chapter":86},{"book":6,"chapter":116}]},"580100":{"id":"580100","name":"Salamis","lat":37.947768,"lng":23.5314735,"pleiadesUri":"http://pleiades.stoa.org/places/580100","placeType":"settlement","isEthnic":false,"occurrences":[{"book":9,"chapter":4},{"book":9,"chapter":5},{"book":9,"chapter":5}]},"580101":{"id":"580101","name":"Salamis (island)","lat":37.93,"lng":23.51,"pleiadesUri":"http://pleiades.stoa.org/places/580101","placeType":"island","isEthnic":false,"occurrences":[{"book":8,"chapter":12},{"book":8,"chapter":40},{"book":8,"chapter":40},{"book":8,"chapter":41},{"book":8,"chapter":41},{"book":8,"chapter":41},{"book":8,"chapter":42},{"book":8,"chapter":44},{"book":8,"chapter":46},{"book":8,"chapter":49},{"book":8,"chapter":49},{"book":8,"chapter":51},{"book":8,"chapter":56},{"book":8,"chapter":57},{"book":8,"chapter":60},{"book":8,"chapter":60},{"book":8,"chapter":60},{"book":8,"chapter":60},{"book":8,"chapter":64},{"book":8,"chapter":65},{"book":8,"chapter":65},{"book":8,"chapter":65},{"book":8,"chapter":70},{"book":8,"chapter":70},{"book":8,"chapter":74},{"book":8,"chapter":76},{"book":8,"chapter":76},{"book":8,"chapter":76},{"book":8,"chapter":78},{"book":8,"chapter":82},{"book":8,"chapter":86},{"book":8,"chapter":89},{"book":8,"chapter":90},{"book":8,"chapter":94},{"book":8,"chapter":95},{"book":8,"chapter":95},{"book":8,"chapter":96},{"book":8,"chapter":97},{"book":8,"chapter":121},{"book":8,"chapter":121},{"book":8,"chapter":122},{"book":8,"chapter":124},{"book":8,"chapter":126},{"book":8,"chapter":130},{"book":8,"chapter":130},{"book":9,"chapter":3},{"book":9,"chapter":6},{"book":9,"chapter":6},{"book":9,"chapter":19}]},"580107":{"id":"580107","name":"Athena, T.","lat":37.683423,"lng":24.0359195,"pleiadesUri":"http://pleiades.stoa.org/places/580107","placeType":"sanctuary,settlement,temple-2","isEthnic":false,"occurrences":[{"book":4,"chapter":99},{"book":4,"chapter":99}]},"580114":{"id":"580114","name":"Tanagra","lat":38.309371,"lng":23.587064,"pleiadesUri":"http://pleiades.stoa.org/places/580114","placeType":"settlement","isEthnic":false,"occurrences":[{"book":5,"chapter":57},{"book":5,"chapter":79}]},"580119":{"id":"580119","name":"Mine of Laureion","lat":37.73787,"lng":24.053634,"pleiadesUri":"http://pleiades.stoa.org/places/580119","placeType":"production,theatre,settlement,mine","isEthnic":false,"occurrences":[{"book":4,"chapter":99}]},"589693":{"id":"589693","name":"Andros (settlement)","lat":37.8528,"lng":24.86222,"pleiadesUri":"http://pleiades.stoa.org/places/589693","placeType":"island,settlement-modern,settlement","isEthnic":false,"occurrences":[{"book":4,"chapter":33},{"book":5,"chapter":31}]},"589748":{"id":"589748","name":"Creta (island)","lat":35.21984439173344,"lng":24.995769971494504,"pleiadesUri":"http://pleiades.stoa.org/places/589748","placeType":"island","isEthnic":true,"occurrences":[{"book":1,"chapter":2},{"book":1,"chapter":65},{"book":1,"chapter":171},{"book":1,"chapter":172},{"book":1,"chapter":173},{"book":1,"chapter":173},{"book":1,"chapter":173},{"book":1,"chapter":173},{"book":3,"chapter":44},{"book":3,"chapter":59},{"book":3,"chapter":59},{"book":4,"chapter":46},{"book":4,"chapter":46},{"book":4,"chapter":151},{"book":4,"chapter":151},{"book":4,"chapter":154},{"book":4,"chapter":161}]},"589815":{"id":"589815","name":"Kamiros","lat":36.41451,"lng":28.15629,"pleiadesUri":"http://pleiades.stoa.org/places/589815","placeType":"island,settlement,temple-2,stadion","isEthnic":false,"occurrences":[{"book":1,"chapter":144},{"book":1,"chapter":144}]},"589824":{"id":"589824","name":"Itanos","lat":35.263286,"lng":26.263095,"pleiadesUri":"http://pleiades.stoa.org/places/589824","placeType":"settlement","isEthnic":false,"occurrences":[{"book":4,"chapter":151}]},"589836":{"id":"589836","name":"Kamiros","lat":36.41451,"lng":28.15629,"pleiadesUri":"http://pleiades.stoa.org/places/589836","placeType":"island,settlement,temple-2,stadion","isEthnic":false,"occurrences":[{"book":1,"chapter":144}]},"589872":{"id":"589872","name":"Knosos/Col. Iulia Nobilis Cnosos","lat":35.297847,"lng":25.163106,"pleiadesUri":"http://pleiades.stoa.org/places/589872","placeType":"settlement,architecturalcomplex","isEthnic":false,"occurrences":[{"book":3,"chapter":122}]},"589886":{"id":"589886","name":"Kydonia","lat":35.517333,"lng":24.019611,"pleiadesUri":"http://pleiades.stoa.org/places/589886","placeType":"settlement","isEthnic":false,"occurrences":[{"book":3,"chapter":44},{"book":3,"chapter":59},{"book":3,"chapter":59}]},"589913":{"id":"589913","name":"Kamiros","lat":36.41451,"lng":28.15629,"pleiadesUri":"http://pleiades.stoa.org/places/589913","placeType":"island,settlement,temple-2,stadion","isEthnic":false,"occurrences":[{"book":2,"chapter":182},{"book":2,"chapter":182},{"book":2,"chapter":182},{"book":3,"chapter":47}]},"590030":{"id":"590030","name":"Kamiros","lat":36.41451,"lng":28.15629,"pleiadesUri":"http://pleiades.stoa.org/places/590030","placeType":"island,settlement,temple-2,stadion","isEthnic":false,"occurrences":[{"book":2,"chapter":178}]},"590031":{"id":"590031","name":"Kamiros","lat":36.41451,"lng":28.15629,"pleiadesUri":"http://pleiades.stoa.org/places/590031","placeType":"island,settlement,temple-2,stadion","isEthnic":false,"occurrences":[{"book":1,"chapter":174}]},"590049":{"id":"590049","name":"Siphnos (island)","lat":36.9678,"lng":24.70109,"pleiadesUri":"http://pleiades.stoa.org/places/590049","placeType":"island","isEthnic":false,"occurrences":[{"book":3,"chapter":57},{"book":3,"chapter":57},{"book":3,"chapter":57},{"book":3,"chapter":57},{"book":3,"chapter":58},{"book":3,"chapter":58},{"book":3,"chapter":58},{"book":3,"chapter":58},{"book":3,"chapter":58}]},"590074":{"id":"590074","name":"Tenos (island)","lat":37.577564,"lng":25.167742,"pleiadesUri":"http://pleiades.stoa.org/places/590074","placeType":"island,settlement,temple-2","isEthnic":false,"occurrences":[{"book":4,"chapter":33},{"book":4,"chapter":33},{"book":6,"chapter":97}]},"590095":{"id":"590095","name":"(W)Axos","lat":35.30718,"lng":24.84414,"pleiadesUri":"http://pleiades.stoa.org/places/590095","placeType":"settlement","isEthnic":false,"occurrences":[{"book":4,"chapter":154},{"book":4,"chapter":154}]},"599561":{"id":"599561","name":"Bubasius Sinus","lat":36.75,"lng":28.25,"pleiadesUri":"http://pleiades.stoa.org/places/599561","placeType":"water-open","isEthnic":false,"occurrences":[{"book":1,"chapter":174}]},"599575":{"id":"599575","name":"Cnidus","lat":36.686188,"lng":27.37404,"pleiadesUri":"http://pleiades.stoa.org/places/599575","placeType":"settlement","isEthnic":true,"occurrences":[{"book":1,"chapter":174},{"book":1,"chapter":174},{"book":1,"chapter":174},{"book":1,"chapter":174},{"book":1,"chapter":174},{"book":1,"chapter":175},{"book":3,"chapter":138},{"book":3,"chapter":138},{"book":3,"chapter":138},{"book":4,"chapter":164},{"book":4,"chapter":164}]},"599576":{"id":"599576","name":"Cnidus","lat":36.686188,"lng":27.37404,"pleiadesUri":"http://pleiades.stoa.org/places/599576","placeType":"settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":144},{"book":2,"chapter":178}]},"599577":{"id":"599577","name":"Colophon","lat":38.115556,"lng":27.142222,"pleiadesUri":"http://pleiades.stoa.org/places/599577","placeType":"settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":15},{"book":1,"chapter":16},{"book":1,"chapter":142},{"book":1,"chapter":148},{"book":1,"chapter":150},{"book":1,"chapter":150}]},"599578":{"id":"599578","name":"Colophon/Colophon ad Mare/Notion","lat":37.99162,"lng":27.1973,"pleiadesUri":"http://pleiades.stoa.org/places/599578","placeType":"settlement,port","isEthnic":false,"occurrences":[{"book":1,"chapter":149}]},"599581":{"id":"599581","name":"Kos/Cos (island)","lat":36.844,"lng":27.17,"pleiadesUri":"http://pleiades.stoa.org/places/599581","placeType":"island","isEthnic":false,"occurrences":[{"book":1,"chapter":144}]},"599588":{"id":"599588","name":"Sanctuary of Apollo on Delos","lat":37.397274,"lng":25.268194,"pleiadesUri":"http://pleiades.stoa.org/places/599588","placeType":"architecturalcomplex,sanctuary,monument,island,settlement,plaza","isEthnic":false,"occurrences":[{"book":1,"chapter":64},{"book":1,"chapter":64},{"book":2,"chapter":171},{"book":4,"chapter":33},{"book":4,"chapter":33},{"book":4,"chapter":33},{"book":4,"chapter":33},{"book":4,"chapter":33},{"book":4,"chapter":34},{"book":4,"chapter":34},{"book":4,"chapter":34},{"book":4,"chapter":35},{"book":4,"chapter":35},{"book":4,"chapter":35},{"book":4,"chapter":35},{"book":4,"chapter":35},{"book":4,"chapter":35},{"book":4,"chapter":36},{"book":6,"chapter":97},{"book":6,"chapter":97},{"book":6,"chapter":97},{"book":6,"chapter":97},{"book":6,"chapter":97},{"book":6,"chapter":98},{"book":6,"chapter":98},{"book":6,"chapter":98},{"book":6,"chapter":98},{"book":6,"chapter":98},{"book":6,"chapter":99},{"book":6,"chapter":118},{"book":6,"chapter":118},{"book":6,"chapter":118},{"book":6,"chapter":118}]},"599593":{"id":"599593","name":"Didyma/Branchidai/Ioustinianopolis","lat":37.384829,"lng":27.256115,"pleiadesUri":"http://pleiades.stoa.org/places/599593","placeType":"sanctuary,temple-2","isEthnic":false,"occurrences":[{"book":1,"chapter":46},{"book":1,"chapter":92},{"book":1,"chapter":157},{"book":1,"chapter":158},{"book":1,"chapter":159},{"book":5,"chapter":36},{"book":6,"chapter":19},{"book":6,"chapter":19}]},"599612":{"id":"599612","name":"Ephesus/Arsinoe(ia)","lat":37.941944,"lng":27.339722,"pleiadesUri":"http://pleiades.stoa.org/places/599612","placeType":"theatre,settlement,temple-2,architecturalcomplex","isEthnic":true,"occurrences":[{"book":1,"chapter":26},{"book":1,"chapter":92},{"book":1,"chapter":142},{"book":1,"chapter":147},{"book":2,"chapter":11},{"book":2,"chapter":106},{"book":2,"chapter":148},{"book":5,"chapter":54},{"book":5,"chapter":54},{"book":5,"chapter":100},{"book":5,"chapter":100},{"book":5,"chapter":100},{"book":5,"chapter":102},{"book":6,"chapter":16},{"book":6,"chapter":16},{"book":6,"chapter":84}]},"599636":{"id":"599636","name":"Halicarnassus/Halikarnassos","lat":37.037864,"lng":27.424112,"pleiadesUri":"http://pleiades.stoa.org/places/599636","placeType":"settlement,tomb,architecturalcomplex,port","isEthnic":false,"occurrences":[{"book":1,"chapter":1},{"book":1,"chapter":144},{"book":1,"chapter":145},{"book":1,"chapter":145},{"book":1,"chapter":175},{"book":2,"chapter":178},{"book":3,"chapter":4},{"book":3,"chapter":7}]},"599665":{"id":"599665","name":"Idrias","lat":37.25,"lng":28.25,"pleiadesUri":"http://pleiades.stoa.org/places/599665","placeType":"labeled feature","isEthnic":false,"occurrences":[{"book":5,"chapter":118}]},"599668":{"id":"599668","name":"Ikarion Mare","lat":37.5,"lng":26.333333,"pleiadesUri":"http://pleiades.stoa.org/places/599668","placeType":"water-open","isEthnic":false,"occurrences":[{"book":6,"chapter":95},{"book":6,"chapter":96}]},"599694":{"id":"599694","name":"Karyanda (Neapolis)","lat":37.1263,"lng":27.378,"pleiadesUri":"http://pleiades.stoa.org/places/599694","placeType":"settlement","isEthnic":false,"occurrences":[{"book":4,"chapter":44}]},"599706":{"id":"599706","name":"Kerameios/Doridis Sinus","lat":36.9358039,"lng":27.8785015,"pleiadesUri":"http://pleiades.stoa.org/places/599706","placeType":"water-open","isEthnic":false,"occurrences":[{"book":1,"chapter":174}]},"599716":{"id":"599716","name":"Kindye","lat":37.191684,"lng":27.650052,"pleiadesUri":"http://pleiades.stoa.org/places/599716","placeType":"settlement","isEthnic":false,"occurrences":[{"book":5,"chapter":118}]},"599725":{"id":"599725","name":"Kores(s)os/Tracheia M.","lat":37.95479,"lng":27.3683,"pleiadesUri":"http://pleiades.stoa.org/places/599725","placeType":"mountain","isEthnic":false,"occurrences":[{"book":5,"chapter":100}]},"599745":{"id":"599745","name":"Labraunda","lat":37.418971,"lng":27.819967,"pleiadesUri":"http://pleiades.stoa.org/places/599745","placeType":"sanctuary,church,settlement","isEthnic":false,"occurrences":[{"book":5,"chapter":119}]},"599746":{"id":"599746","name":"Lade (island)","lat":37.75,"lng":27.25,"pleiadesUri":"http://pleiades.stoa.org/places/599746","placeType":"island","isEthnic":false,"occurrences":[{"book":6,"chapter":7},{"book":6,"chapter":7},{"book":6,"chapter":11}]},"599754":{"id":"599754","name":"Lebedos/Ptolemais","lat":38.077883,"lng":26.964722,"pleiadesUri":"http://pleiades.stoa.org/places/599754","placeType":"settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":142}]},"599764":{"id":"599764","name":"Leros","lat":37.17743,"lng":26.83383,"pleiadesUri":"http://pleiades.stoa.org/places/599764","placeType":"island,settlement","isEthnic":false,"occurrences":[{"book":5,"chapter":125}]},"599768":{"id":"599768","name":"Lide M.","lat":37.07435,"lng":27.50331,"pleiadesUri":"http://pleiades.stoa.org/places/599768","placeType":"mountain","isEthnic":false,"occurrences":[{"book":1,"chapter":176}]},"599777":{"id":"599777","name":"Maeander (river)","lat":37.6220196,"lng":27.4713446,"pleiadesUri":"http://pleiades.stoa.org/places/599777","placeType":"river","isEthnic":false,"occurrences":[{"book":1,"chapter":18},{"book":1,"chapter":162},{"book":2,"chapter":11},{"book":2,"chapter":29},{"book":3,"chapter":122},{"book":5,"chapter":118},{"book":5,"chapter":118},{"book":5,"chapter":118},{"book":5,"chapter":119}]},"599778":{"id":"599778","name":"Magnesia ad Sipylum","lat":37.8507,"lng":27.52785,"pleiadesUri":"http://pleiades.stoa.org/places/599778","placeType":"settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":162},{"book":3,"chapter":89},{"book":3,"chapter":122},{"book":3,"chapter":125}]},"599789":{"id":"599789","name":"Marsyas (river)","lat":37.75,"lng":27.75,"pleiadesUri":"http://pleiades.stoa.org/places/599789","placeType":"river","isEthnic":false,"occurrences":[{"book":5,"chapter":118}]},"599799":{"id":"599799","name":"Miletus","lat":37.5292362,"lng":27.2774885,"pleiadesUri":"http://pleiades.stoa.org/places/599799","placeType":"theatre,settlement,port","isEthnic":false,"occurrences":[{"book":1,"chapter":15},{"book":1,"chapter":15},{"book":1,"chapter":17},{"book":1,"chapter":17},{"book":1,"chapter":17},{"book":1,"chapter":17},{"book":1,"chapter":17},{"book":1,"chapter":18},{"book":1,"chapter":18},{"book":1,"chapter":18},{"book":1,"chapter":18},{"book":1,"chapter":20},{"book":1,"chapter":20},{"book":1,"chapter":20},{"book":1,"chapter":21},{"book":1,"chapter":21},{"book":1,"chapter":21},{"book":1,"chapter":21},{"book":1,"chapter":21},{"book":1,"chapter":22},{"book":1,"chapter":22},{"book":1,"chapter":23},{"book":1,"chapter":25},{"book":1,"chapter":74},{"book":1,"chapter":75},{"book":1,"chapter":92},{"book":1,"chapter":141},{"book":1,"chapter":142},{"book":1,"chapter":143},{"book":1,"chapter":147},{"book":1,"chapter":158},{"book":1,"chapter":169},{"book":1,"chapter":169},{"book":1,"chapter":170},{"book":2,"chapter":35},{"book":2,"chapter":160},{"book":2,"chapter":179},{"book":3,"chapter":39},{"book":4,"chapter":78},{"book":4,"chapter":137},{"book":4,"chapter":137},{"book":4,"chapter":139},{"book":4,"chapter":141},{"book":5,"chapter":11},{"book":5,"chapter":11},{"book":5,"chapter":23},{"book":5,"chapter":24},{"book":5,"chapter":28},{"book":5,"chapter":28},{"book":5,"chapter":28},{"book":5,"chapter":29},{"book":5,"chapter":29},{"book":5,"chapter":29},{"book":5,"chapter":29},{"book":5,"chapter":30},{"book":5,"chapter":30},{"book":5,"chapter":30},{"book":5,"chapter":30},{"book":5,"chapter":30},{"book":5,"chapter":32},{"book":5,"chapter":33},{"book":5,"chapter":35},{"book":5,"chapter":35},{"book":5,"chapter":35},{"book":5,"chapter":35},{"book":5,"chapter":36},{"book":5,"chapter":37},{"book":5,"chapter":37},{"book":5,"chapter":38},{"book":5,"chapter":49},{"book":5,"chapter":49},{"book":5,"chapter":50},{"book":5,"chapter":54},{"book":5,"chapter":65},{"book":5,"chapter":92},{"book":5,"chapter":97},{"book":5,"chapter":97},{"book":5,"chapter":98},{"book":5,"chapter":98},{"book":5,"chapter":99},{"book":5,"chapter":99},{"book":5,"chapter":99},{"book":5,"chapter":99},{"book":5,"chapter":99},{"book":5,"chapter":105},{"book":5,"chapter":106},{"book":5,"chapter":106},{"book":5,"chapter":106},{"book":5,"chapter":106},{"book":5,"chapter":120},{"book":5,"chapter":121},{"book":5,"chapter":124},{"book":5,"chapter":124},{"book":5,"chapter":126},{"book":5,"chapter":126},{"book":5,"chapter":126},{"book":6,"chapter":1},{"book":6,"chapter":5},{"book":6,"chapter":5},{"book":6,"chapter":5},{"book":6,"chapter":6},{"book":6,"chapter":7},{"book":6,"chapter":7},{"book":6,"chapter":8},{"book":6,"chapter":8},{"book":6,"chapter":9},{"book":6,"chapter":9},{"book":6,"chapter":9},{"book":6,"chapter":11},{"book":6,"chapter":13},{"book":6,"chapter":18},{"book":6,"chapter":19},{"book":6,"chapter":19},{"book":6,"chapter":19},{"book":6,"chapter":19},{"book":6,"chapter":20},{"book":6,"chapter":20},{"book":6,"chapter":21},{"book":6,"chapter":21},{"book":6,"chapter":21},{"book":6,"chapter":22},{"book":6,"chapter":22},{"book":6,"chapter":22},{"book":6,"chapter":25},{"book":6,"chapter":26},{"book":6,"chapter":26},{"book":6,"chapter":28},{"book":6,"chapter":30},{"book":6,"chapter":31},{"book":6,"chapter":46},{"book":6,"chapter":77},{"book":6,"chapter":86},{"book":6,"chapter":86},{"book":6,"chapter":86},{"book":6,"chapter":86},{"book":7,"chapter":8},{"book":7,"chapter":10}]},"599805":{"id":"599805","name":"Mycale M.","lat":37.66144,"lng":27.12558,"pleiadesUri":"http://pleiades.stoa.org/places/599805","placeType":"mountain","isEthnic":false,"occurrences":[{"book":1,"chapter":148},{"book":1,"chapter":148},{"book":6,"chapter":16}]},"599809":{"id":"599809","name":"Mylasa","lat":37.316871,"lng":27.789697,"pleiadesUri":"http://pleiades.stoa.org/places/599809","placeType":"settlement","isEthnic":false,"occurrences":[{"book":5,"chapter":122}]},"599810":{"id":"599810","name":"Mylasa","lat":37.25,"lng":27.75,"pleiadesUri":"http://pleiades.stoa.org/places/599810","placeType":"labeled feature","isEthnic":false,"occurrences":[{"book":1,"chapter":171}]},"599811":{"id":"599811","name":"Myndos","lat":37.05332,"lng":27.23432,"pleiadesUri":"http://pleiades.stoa.org/places/599811","placeType":"settlement","isEthnic":false,"occurrences":[{"book":5,"chapter":33},{"book":5,"chapter":33}]},"599813":{"id":"599813","name":"Myous","lat":37.59716,"lng":27.42788,"pleiadesUri":"http://pleiades.stoa.org/places/599813","placeType":"settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":142},{"book":6,"chapter":8},{"book":6,"chapter":8}]},"599821":{"id":"599821","name":"Naxos","lat":37.10595,"lng":25.37699,"pleiadesUri":"http://pleiades.stoa.org/places/599821","placeType":"settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":61},{"book":1,"chapter":64},{"book":1,"chapter":64}]},"599822":{"id":"599822","name":"Naxos (island)","lat":37.127,"lng":25.52001,"pleiadesUri":"http://pleiades.stoa.org/places/599822","placeType":"island","isEthnic":false,"occurrences":[{"book":5,"chapter":28},{"book":5,"chapter":28},{"book":5,"chapter":30},{"book":5,"chapter":30},{"book":5,"chapter":30},{"book":5,"chapter":30},{"book":5,"chapter":30},{"book":5,"chapter":30},{"book":5,"chapter":30},{"book":5,"chapter":30},{"book":5,"chapter":31},{"book":5,"chapter":31},{"book":5,"chapter":33},{"book":5,"chapter":33},{"book":5,"chapter":33},{"book":5,"chapter":33},{"book":5,"chapter":33},{"book":5,"chapter":34},{"book":5,"chapter":34},{"book":5,"chapter":34},{"book":5,"chapter":34},{"book":5,"chapter":36},{"book":5,"chapter":37},{"book":6,"chapter":95},{"book":6,"chapter":96},{"book":6,"chapter":96},{"book":6,"chapter":96}]},"599839":{"id":"599839","name":"Orthosia","lat":37.824122,"lng":28.228037,"pleiadesUri":"http://pleiades.stoa.org/places/599839","placeType":"settlement","isEthnic":true,"occurrences":[{"book":4,"chapter":87}]},"599855":{"id":"599855","name":"Panionion","lat":37.703924,"lng":27.329993,"pleiadesUri":"http://pleiades.stoa.org/places/599855","placeType":"sanctuary","isEthnic":false,"occurrences":[{"book":1,"chapter":141},{"book":1,"chapter":142},{"book":1,"chapter":143},{"book":1,"chapter":148},{"book":1,"chapter":170},{"book":6,"chapter":7}]},"599868":{"id":"599868","name":"Paros (island)","lat":37.03613,"lng":25.19093,"pleiadesUri":"http://pleiades.stoa.org/places/599868","placeType":"island","isEthnic":false,"occurrences":[{"book":1,"chapter":12},{"book":3,"chapter":57},{"book":5,"chapter":28},{"book":5,"chapter":29},{"book":5,"chapter":30},{"book":5,"chapter":31},{"book":5,"chapter":63}]},"599873":{"id":"599873","name":"Pedasa","lat":37.06804,"lng":27.42178,"pleiadesUri":"http://pleiades.stoa.org/places/599873","placeType":"settlement","isEthnic":true,"occurrences":[{"book":1,"chapter":175},{"book":1,"chapter":176},{"book":5,"chapter":121},{"book":6,"chapter":21}]},"599905":{"id":"599905","name":"Priene/Lince?","lat":37.66,"lng":27.298333,"pleiadesUri":"http://pleiades.stoa.org/places/599905","placeType":"theatre,settlement,temple-2","isEthnic":false,"occurrences":[{"book":1,"chapter":15},{"book":1,"chapter":27},{"book":1,"chapter":142},{"book":1,"chapter":162},{"book":1,"chapter":170},{"book":1,"chapter":170},{"book":6,"chapter":8}]},"599919":{"id":"599919","name":"Rheneia (island)","lat":37.41735,"lng":25.22434,"pleiadesUri":"http://pleiades.stoa.org/places/599919","placeType":"island","isEthnic":false,"occurrences":[{"book":6,"chapter":97}]},"599925":{"id":"599925","name":"Samos","lat":37.73,"lng":26.84,"pleiadesUri":"http://pleiades.stoa.org/places/599925","placeType":"island,sanctuary,settlement,temple-2","isEthnic":true,"occurrences":[{"book":1,"chapter":70},{"book":1,"chapter":70},{"book":1,"chapter":71},{"book":1,"chapter":142},{"book":3,"chapter":39},{"book":3,"chapter":39},{"book":3,"chapter":39},{"book":3,"chapter":39},{"book":3,"chapter":40},{"book":3,"chapter":41},{"book":3,"chapter":43},{"book":3,"chapter":44},{"book":3,"chapter":44},{"book":3,"chapter":45}]},"599926":{"id":"599926","name":"Samos","lat":37.73,"lng":26.84,"pleiadesUri":"http://pleiades.stoa.org/places/599926","placeType":"island,sanctuary,settlement,temple-2","isEthnic":false,"occurrences":[{"book":1,"chapter":51},{"book":1,"chapter":70},{"book":1,"chapter":70},{"book":1,"chapter":142},{"book":1,"chapter":148},{"book":2,"chapter":135},{"book":2,"chapter":135},{"book":2,"chapter":148},{"book":2,"chapter":168},{"book":2,"chapter":179},{"book":2,"chapter":182},{"book":2,"chapter":182},{"book":3,"chapter":26},{"book":3,"chapter":44},{"book":3,"chapter":45},{"book":3,"chapter":45},{"book":3,"chapter":45},{"book":3,"chapter":45},{"book":3,"chapter":45},{"book":3,"chapter":45},{"book":3,"chapter":46},{"book":3,"chapter":47},{"book":3,"chapter":47},{"book":3,"chapter":47},{"book":3,"chapter":47},{"book":3,"chapter":48},{"book":3,"chapter":48},{"book":3,"chapter":48},{"book":3,"chapter":48},{"book":3,"chapter":48},{"book":3,"chapter":48},{"book":3,"chapter":49},{"book":3,"chapter":49},{"book":3,"chapter":54},{"book":3,"chapter":54},{"book":3,"chapter":55},{"book":3,"chapter":55},{"book":3,"chapter":55},{"book":3,"chapter":55},{"book":3,"chapter":55},{"book":3,"chapter":55},{"book":3,"chapter":56},{"book":3,"chapter":57},{"book":3,"chapter":58},{"book":3,"chapter":58},{"book":3,"chapter":58},{"book":3,"chapter":58},{"book":3,"chapter":58},{"book":3,"chapter":59},{"book":3,"chapter":59},{"book":3,"chapter":59},{"book":3,"chapter":59},{"book":3,"chapter":60},{"book":3,"chapter":60},{"book":3,"chapter":60},{"book":3,"chapter":60},{"book":3,"chapter":60},{"book":3,"chapter":120},{"book":3,"chapter":120},{"book":3,"chapter":121},{"book":3,"chapter":122},{"book":3,"chapter":125},{"book":3,"chapter":125},{"book":3,"chapter":128},{"book":3,"chapter":131},{"book":3,"chapter":139},{"book":3,"chapter":139},{"book":3,"chapter":140},{"book":3,"chapter":142},{"book":3,"chapter":142},{"book":3,"chapter":143},{"book":3,"chapter":144},{"book":3,"chapter":146},{"book":3,"chapter":146},{"book":3,"chapter":146},{"book":3,"chapter":146},{"book":3,"chapter":147},{"book":3,"chapter":148},{"book":3,"chapter":148},{"book":3,"chapter":149},{"book":3,"chapter":150},{"book":4,"chapter":44},{"book":4,"chapter":44},{"book":4,"chapter":87},{"book":4,"chapter":88},{"book":4,"chapter":89},{"book":4,"chapter":95},{"book":4,"chapter":138},{"book":4,"chapter":152},{"book":4,"chapter":152},{"book":4,"chapter":152},{"book":4,"chapter":152},{"book":4,"chapter":153},{"book":4,"chapter":162},{"book":4,"chapter":163},{"book":4,"chapter":164},{"book":5,"chapter":27},{"book":5,"chapter":112},{"book":6,"chapter":8},{"book":6,"chapter":13},{"book":6,"chapter":13},{"book":6,"chapter":14},{"book":6,"chapter":14},{"book":6,"chapter":14},{"book":6,"chapter":14},{"book":6,"chapter":22},{"book":6,"chapter":22},{"book":6,"chapter":23},{"book":6,"chapter":23},{"book":6,"chapter":23},{"book":6,"chapter":23},{"book":6,"chapter":23},{"book":6,"chapter":23},{"book":6,"chapter":24},{"book":6,"chapter":24},{"book":6,"chapter":25},{"book":6,"chapter":25},{"book":6,"chapter":95}]},"599943":{"id":"599943","name":"Sounion Pr.","lat":37.15168,"lng":25.28064,"pleiadesUri":"http://pleiades.stoa.org/places/599943","placeType":"cape","isEthnic":false,"occurrences":[{"book":6,"chapter":87},{"book":6,"chapter":90},{"book":6,"chapter":115}]},"599950":{"id":"599950","name":"Syme","lat":36.61839,"lng":27.843425,"pleiadesUri":"http://pleiades.stoa.org/places/599950","placeType":"settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":174}]},"599973":{"id":"599973","name":"Thera (island)","lat":36.36399,"lng":25.478129,"pleiadesUri":"http://pleiades.stoa.org/places/599973","placeType":"island,settlement","isEthnic":false,"occurrences":[{"book":4,"chapter":147},{"book":4,"chapter":147},{"book":4,"chapter":149},{"book":4,"chapter":150},{"book":4,"chapter":150},{"book":4,"chapter":150},{"book":4,"chapter":150},{"book":4,"chapter":150},{"book":4,"chapter":151},{"book":4,"chapter":151},{"book":4,"chapter":152},{"book":4,"chapter":153},{"book":4,"chapter":153},{"book":4,"chapter":153},{"book":4,"chapter":153},{"book":4,"chapter":154},{"book":4,"chapter":154},{"book":4,"chapter":154},{"book":4,"chapter":155},{"book":4,"chapter":155},{"book":4,"chapter":156},{"book":4,"chapter":156},{"book":4,"chapter":156},{"book":4,"chapter":156},{"book":4,"chapter":161},{"book":4,"chapter":164},{"book":5,"chapter":42}]},"599988":{"id":"599988","name":"Triopion","lat":36.684805,"lng":27.493021,"pleiadesUri":"http://pleiades.stoa.org/places/599988","placeType":"settlement","isEthnic":true,"occurrences":[{"book":1,"chapter":144},{"book":1,"chapter":144},{"book":1,"chapter":174}]},"599989":{"id":"599989","name":"Triopion Pr.","lat":36.6849,"lng":27.36846,"pleiadesUri":"http://pleiades.stoa.org/places/599989","placeType":"cape","isEthnic":false,"occurrences":[{"book":4,"chapter":39}]},"609361":{"id":"609361","name":"Dindymos M.","lat":38.75,"lng":29.75,"pleiadesUri":"http://pleiades.stoa.org/places/609361","placeType":"mountain","isEthnic":false,"occurrences":[{"book":1,"chapter":80}]},"609502":{"id":"609502","name":"Phrygia","lat":38.75,"lng":29.75,"pleiadesUri":"http://pleiades.stoa.org/places/609502","placeType":"region","isEthnic":true,"occurrences":[{"book":1,"chapter":28},{"book":1,"chapter":35},{"book":1,"chapter":35},{"book":1,"chapter":41},{"book":1,"chapter":72},{"book":2,"chapter":2},{"book":2,"chapter":2},{"book":2,"chapter":2},{"book":3,"chapter":90},{"book":3,"chapter":127},{"book":5,"chapter":49},{"book":5,"chapter":52},{"book":5,"chapter":52},{"book":5,"chapter":98},{"book":5,"chapter":98},{"book":7,"chapter":8},{"book":7,"chapter":11},{"book":7,"chapter":26},{"book":7,"chapter":30},{"book":7,"chapter":72},{"book":7,"chapter":73},{"book":7,"chapter":73},{"book":7,"chapter":73}]},"614635":{"id":"614635","name":"Conium/Conni/Demetrioupolis/Konna/Kone","lat":38.947498,"lng":30.05891,"pleiadesUri":"http://pleiades.stoa.org/places/614635","placeType":"unlocated","isEthnic":false,"occurrences":[{"book":5,"chapter":63}]},"628949":{"id":"628949","name":"Cappadocia","lat":39.25,"lng":35.75,"pleiadesUri":"http://pleiades.stoa.org/places/628949","placeType":"labeled feature","isEthnic":false,"occurrences":[{"book":1,"chapter":73},{"book":1,"chapter":76}]},"628957":{"id":"628957","name":"Cilicia","lat":38.25,"lng":35.75,"pleiadesUri":"http://pleiades.stoa.org/places/628957","placeType":"unknown","isEthnic":false,"occurrences":[{"book":1,"chapter":72},{"book":3,"chapter":90},{"book":3,"chapter":90},{"book":5,"chapter":52},{"book":5,"chapter":52},{"book":5,"chapter":108},{"book":5,"chapter":118},{"book":6,"chapter":43},{"book":6,"chapter":95}]},"638796":{"id":"638796","name":"Caunus","lat":36.825909,"lng":28.621536,"pleiadesUri":"http://pleiades.stoa.org/places/638796","placeType":"settlement","isEthnic":true,"occurrences":[{"book":1,"chapter":171},{"book":1,"chapter":172},{"book":1,"chapter":172},{"book":1,"chapter":177},{"book":5,"chapter":103}]},"638881":{"id":"638881","name":"Kabalis","lat":36.75,"lng":29.75,"pleiadesUri":"http://pleiades.stoa.org/places/638881","placeType":"region","isEthnic":true,"occurrences":[{"book":3,"chapter":90}]},"638891":{"id":"638891","name":"Kalynda","lat":36.750652,"lng":28.835859,"pleiadesUri":"http://pleiades.stoa.org/places/638891","placeType":"settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":173}]},"638965":{"id":"638965","name":"Lycia","lat":36.513688333333334,"lng":29.129618500000003,"pleiadesUri":"http://pleiades.stoa.org/places/638965","placeType":"region","isEthnic":true,"occurrences":[{"book":1,"chapter":28},{"book":1,"chapter":147},{"book":1,"chapter":171},{"book":1,"chapter":173},{"book":1,"chapter":173},{"book":1,"chapter":173},{"book":1,"chapter":173},{"book":1,"chapter":176},{"book":1,"chapter":176},{"book":1,"chapter":177},{"book":1,"chapter":183},{"book":3,"chapter":90},{"book":4,"chapter":35},{"book":4,"chapter":35},{"book":4,"chapter":46}]},"638996":{"id":"638996","name":"Milyas","lat":36.75,"lng":29.75,"pleiadesUri":"http://pleiades.stoa.org/places/638996","placeType":"region","isEthnic":true,"occurrences":[{"book":1,"chapter":173},{"book":1,"chapter":173},{"book":1,"chapter":173},{"book":3,"chapter":90}]},"639034":{"id":"639034","name":"Pamphylia","lat":36.990721,"lng":30.98638,"pleiadesUri":"http://pleiades.stoa.org/places/639034","placeType":"region","isEthnic":true,"occurrences":[{"book":1,"chapter":29}]},"639041":{"id":"639041","name":"Patara M.","lat":36.25418,"lng":29.35379,"pleiadesUri":"http://pleiades.stoa.org/places/639041","placeType":"mountain","isEthnic":false,"occurrences":[{"book":1,"chapter":183}]},"639051":{"id":"639051","name":"Phaselis","lat":36.524579,"lng":30.551573,"pleiadesUri":"http://pleiades.stoa.org/places/639051","placeType":"settlement","isEthnic":false,"occurrences":[{"book":2,"chapter":178}]},"639114":{"id":"639114","name":"*Solyma?","lat":36.524766,"lng":30.454074,"pleiadesUri":"http://pleiades.stoa.org/places/639114","placeType":"settlement","isEthnic":true,"occurrences":[{"book":1,"chapter":173}]},"639137":{"id":"639137","name":"Telmessos","lat":36.620899,"lng":29.105772,"pleiadesUri":"http://pleiades.stoa.org/places/639137","placeType":"theatre,settlement-modern,settlement","isEthnic":true,"occurrences":[{"book":1,"chapter":78},{"book":1,"chapter":78},{"book":1,"chapter":78},{"book":1,"chapter":78},{"book":1,"chapter":84}]},"639166":{"id":"639166","name":"Xanthos","lat":36.355934,"lng":29.31836,"pleiadesUri":"http://pleiades.stoa.org/places/639166","placeType":"theatre,settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":176},{"book":1,"chapter":176},{"book":1,"chapter":177}]},"639167":{"id":"639167","name":"Xanthos/Sirbis (river)","lat":36.3090579,"lng":29.3042606,"pleiadesUri":"http://pleiades.stoa.org/places/639167","placeType":"river","isEthnic":false,"occurrences":[{"book":1,"chapter":176}]},"648554":{"id":"648554","name":"Aleion Pedion","lat":36.75,"lng":35.25,"pleiadesUri":"http://pleiades.stoa.org/places/648554","placeType":"plain","isEthnic":false,"occurrences":[{"book":6,"chapter":95}]},"658440":{"id":"658440","name":"Cilicia","lat":36.25,"lng":33.25,"pleiadesUri":"http://pleiades.stoa.org/places/658440","placeType":"region","isEthnic":true,"occurrences":[{"book":1,"chapter":28},{"book":1,"chapter":74},{"book":2,"chapter":17},{"book":2,"chapter":17},{"book":2,"chapter":35},{"book":3,"chapter":91},{"book":5,"chapter":49},{"book":5,"chapter":49},{"book":5,"chapter":52},{"book":5,"chapter":118},{"book":6,"chapter":7}]},"658472":{"id":"658472","name":"Gephyra","lat":36.249652,"lng":36.352594,"pleiadesUri":"http://pleiades.stoa.org/places/658472","placeType":"settlement","isEthnic":true,"occurrences":[{"book":5,"chapter":57},{"book":5,"chapter":57},{"book":5,"chapter":58},{"book":5,"chapter":62}]},"668306":{"id":"668306","name":"Marathos","lat":34.838764,"lng":35.907067,"pleiadesUri":"http://pleiades.stoa.org/places/668306","placeType":"settlement","isEthnic":false,"occurrences":[{"book":6,"chapter":117},{"book":6,"chapter":120},{"book":6,"chapter":136}]},"668310":{"id":"668310","name":"Marsyas? (river)","lat":35.25,"lng":36.25,"pleiadesUri":"http://pleiades.stoa.org/places/668310","placeType":"river","isEthnic":false,"occurrences":[{"book":5,"chapter":119}]},"668340":{"id":"668340","name":"Posideion","lat":35.84991,"lng":35.82466,"pleiadesUri":"http://pleiades.stoa.org/places/668340","placeType":"settlement","isEthnic":false,"occurrences":[{"book":3,"chapter":91}]},"678334":{"id":"678334","name":"Phoenice","lat":33.25,"lng":35.25,"pleiadesUri":"http://pleiades.stoa.org/places/678334","placeType":"region","isEthnic":true,"occurrences":[{"book":1,"chapter":1},{"book":1,"chapter":1},{"book":1,"chapter":1},{"book":1,"chapter":2},{"book":1,"chapter":5},{"book":1,"chapter":5},{"book":1,"chapter":5},{"book":1,"chapter":105},{"book":1,"chapter":143},{"book":1,"chapter":170},{"book":2,"chapter":32},{"book":2,"chapter":44},{"book":2,"chapter":45},{"book":2,"chapter":50},{"book":2,"chapter":55},{"book":2,"chapter":57},{"book":2,"chapter":57},{"book":2,"chapter":79},{"book":2,"chapter":104},{"book":2,"chapter":105},{"book":2,"chapter":112},{"book":2,"chapter":116},{"book":2,"chapter":118},{"book":3,"chapter":19},{"book":3,"chapter":19},{"book":3,"chapter":19},{"book":3,"chapter":37},{"book":3,"chapter":37},{"book":3,"chapter":107},{"book":3,"chapter":111},{"book":4,"chapter":39},{"book":4,"chapter":40},{"book":4,"chapter":40},{"book":4,"chapter":42},{"book":4,"chapter":42},{"book":4,"chapter":45},{"book":4,"chapter":46},{"book":4,"chapter":147},{"book":4,"chapter":148},{"book":4,"chapter":198},{"book":5,"chapter":46},{"book":5,"chapter":57},{"book":5,"chapter":57},{"book":5,"chapter":58},{"book":5,"chapter":58},{"book":5,"chapter":58},{"book":5,"chapter":58},{"book":5,"chapter":59},{"book":5,"chapter":61},{"book":5,"chapter":108},{"book":5,"chapter":109},{"book":5,"chapter":109},{"book":5,"chapter":109},{"book":5,"chapter":112},{"book":6,"chapter":3},{"book":6,"chapter":3},{"book":6,"chapter":6},{"book":6,"chapter":14},{"book":6,"chapter":17},{"book":6,"chapter":25},{"book":6,"chapter":28},{"book":6,"chapter":33},{"book":6,"chapter":33},{"book":6,"chapter":33},{"book":6,"chapter":34},{"book":6,"chapter":41},{"book":6,"chapter":41},{"book":6,"chapter":41},{"book":6,"chapter":41},{"book":6,"chapter":41},{"book":6,"chapter":47},{"book":6,"chapter":47},{"book":6,"chapter":47},{"book":6,"chapter":104},{"book":6,"chapter":118},{"book":7,"chapter":23},{"book":7,"chapter":23},{"book":7,"chapter":24},{"book":7,"chapter":34},{"book":7,"chapter":44},{"book":7,"chapter":89},{"book":7,"chapter":89},{"book":7,"chapter":96},{"book":7,"chapter":165},{"book":7,"chapter":167}]},"678393":{"id":"678393","name":"Sidon/Col. Aurelia Pia","lat":33.560243,"lng":35.371208,"pleiadesUri":"http://pleiades.stoa.org/places/678393","placeType":"settlement","isEthnic":false,"occurrences":[{"book":3,"chapter":136}]},"678437":{"id":"678437","name":"Tyrus/Col. Septimia Severa","lat":33.268071,"lng":35.209358,"pleiadesUri":"http://pleiades.stoa.org/places/678437","placeType":"circus,settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":2},{"book":2,"chapter":44},{"book":2,"chapter":45},{"book":2,"chapter":45},{"book":2,"chapter":50},{"book":2,"chapter":112},{"book":2,"chapter":161}]},"687843":{"id":"687843","name":"Azotos Paralios","lat":31.77961,"lng":34.6215,"pleiadesUri":"http://pleiades.stoa.org/places/687843","placeType":"settlement","isEthnic":false,"occurrences":[{"book":2,"chapter":158},{"book":2,"chapter":158}]},"687872":{"id":"687872","name":"Casius Mons","lat":31.2116,"lng":33.0779,"pleiadesUri":"http://pleiades.stoa.org/places/687872","placeType":"mountain","isEthnic":false,"occurrences":[{"book":2,"chapter":8},{"book":2,"chapter":158},{"book":3,"chapter":5},{"book":3,"chapter":5}]},"687902":{"id":"687902","name":"Gaza","lat":31.503959,"lng":34.46203,"pleiadesUri":"http://pleiades.stoa.org/places/687902","placeType":"settlement,port","isEthnic":false,"occurrences":[{"book":2,"chapter":160},{"book":3,"chapter":5},{"book":3,"chapter":5}]},"688025":{"id":"688025","name":"Serbonitis L.","lat":31.25,"lng":33.25,"pleiadesUri":"http://pleiades.stoa.org/places/688025","placeType":"lake","isEthnic":false,"occurrences":[{"book":2,"chapter":8},{"book":3,"chapter":5},{"book":3,"chapter":5},{"book":3,"chapter":5}]},"707462":{"id":"707462","name":"Amathous","lat":34.712174,"lng":33.1438299,"pleiadesUri":"http://pleiades.stoa.org/places/707462","placeType":"settlement,cemetery,port","isEthnic":false,"occurrences":[{"book":5,"chapter":104},{"book":5,"chapter":104},{"book":5,"chapter":105},{"book":5,"chapter":108},{"book":5,"chapter":114},{"book":5,"chapter":114},{"book":5,"chapter":114},{"book":5,"chapter":115}]},"707498":{"id":"707498","name":"Cyprus (island)","lat":35.040883529816504,"lng":33.27533716422018,"pleiadesUri":"http://pleiades.stoa.org/places/707498","placeType":"island","isEthnic":false,"occurrences":[{"book":1,"chapter":105},{"book":1,"chapter":200},{"book":2,"chapter":79},{"book":2,"chapter":182},{"book":3,"chapter":19},{"book":3,"chapter":91},{"book":4,"chapter":162},{"book":4,"chapter":164},{"book":5,"chapter":10},{"book":5,"chapter":31},{"book":5,"chapter":49},{"book":5,"chapter":104},{"book":5,"chapter":104},{"book":5,"chapter":108},{"book":5,"chapter":108},{"book":5,"chapter":109},{"book":5,"chapter":109},{"book":5,"chapter":109},{"book":5,"chapter":109},{"book":5,"chapter":109},{"book":5,"chapter":110},{"book":5,"chapter":110},{"book":5,"chapter":113},{"book":5,"chapter":113},{"book":5,"chapter":113},{"book":5,"chapter":115},{"book":5,"chapter":115},{"book":5,"chapter":115},{"book":5,"chapter":116},{"book":6,"chapter":6}]},"707549":{"id":"707549","name":"Kourion","lat":34.6642,"lng":32.8877,"pleiadesUri":"http://pleiades.stoa.org/places/707549","placeType":"theatre,settlement","isEthnic":false,"occurrences":[{"book":5,"chapter":113}]},"707617":{"id":"707617","name":"Salamis/Konstantia","lat":35.17926,"lng":33.90294,"pleiadesUri":"http://pleiades.stoa.org/places/707617","placeType":"settlement","isEthnic":false,"occurrences":[{"book":4,"chapter":162},{"book":4,"chapter":162},{"book":5,"chapter":104},{"book":5,"chapter":104},{"book":5,"chapter":104},{"book":5,"chapter":108},{"book":5,"chapter":108},{"book":5,"chapter":110},{"book":5,"chapter":110},{"book":5,"chapter":113},{"book":5,"chapter":115},{"book":5,"chapter":115},{"book":8,"chapter":11}]},"707624":{"id":"707624","name":"Soloi/Pompeiopolis","lat":35.1406719,"lng":32.8125385,"pleiadesUri":"http://pleiades.stoa.org/places/707624","placeType":"theatre,settlement","isEthnic":true,"occurrences":[{"book":5,"chapter":110},{"book":5,"chapter":113}]},"716502":{"id":"716502","name":"Adyrmachidai","lat":31.5,"lng":26.5,"pleiadesUri":"http://pleiades.stoa.org/places/716502","placeType":"labeled feature","isEthnic":true,"occurrences":[{"book":4,"chapter":168},{"book":4,"chapter":169}]},"716520":{"id":"716520","name":"Ammon","lat":29.20514,"lng":25.54359,"pleiadesUri":"http://pleiades.stoa.org/places/716520","placeType":"oasis,settlement,temple-2","isEthnic":false,"occurrences":[{"book":1,"chapter":46},{"book":2,"chapter":19},{"book":2,"chapter":19},{"book":2,"chapter":32},{"book":2,"chapter":32},{"book":2,"chapter":34},{"book":2,"chapter":43},{"book":2,"chapter":43},{"book":2,"chapter":56},{"book":2,"chapter":155},{"book":3,"chapter":17},{"book":3,"chapter":17},{"book":3,"chapter":25},{"book":3,"chapter":26},{"book":3,"chapter":26},{"book":3,"chapter":26},{"book":3,"chapter":26},{"book":3,"chapter":26},{"book":4,"chapter":181},{"book":4,"chapter":182},{"book":4,"chapter":182}]},"716526":{"id":"716526","name":"Apis","lat":31.38983,"lng":27.06176,"pleiadesUri":"http://pleiades.stoa.org/places/716526","placeType":"settlement","isEthnic":false,"occurrences":[{"book":2,"chapter":19}]},"716540":{"id":"716540","name":"Catabathmus Maior/Plynos Limen/Tetrapyrgia","lat":31.552706,"lng":25.152644,"pleiadesUri":"http://pleiades.stoa.org/places/716540","placeType":"settlement,port","isEthnic":false,"occurrences":[{"book":4,"chapter":169}]},"716563":{"id":"716563","name":"Giligamai","lat":32.5,"lng":23.5,"pleiadesUri":"http://pleiades.stoa.org/places/716563","placeType":"people","isEthnic":true,"occurrences":[{"book":4,"chapter":169},{"book":4,"chapter":170}]},"716588":{"id":"716588","name":"Libya","lat":31.5,"lng":26.5,"pleiadesUri":"http://pleiades.stoa.org/places/716588","placeType":"region","isEthnic":false,"occurrences":[{"book":2,"chapter":14},{"book":2,"chapter":17},{"book":2,"chapter":17},{"book":2,"chapter":17},{"book":2,"chapter":18},{"book":2,"chapter":19},{"book":2,"chapter":20},{"book":2,"chapter":28},{"book":2,"chapter":29},{"book":2,"chapter":32},{"book":2,"chapter":32},{"book":2,"chapter":32},{"book":2,"chapter":32},{"book":2,"chapter":32},{"book":2,"chapter":51},{"book":2,"chapter":51},{"book":2,"chapter":55},{"book":2,"chapter":56},{"book":2,"chapter":56},{"book":2,"chapter":57},{"book":2,"chapter":77},{"book":2,"chapter":92},{"book":2,"chapter":99},{"book":2,"chapter":150},{"book":2,"chapter":161},{"book":3,"chapter":12},{"book":3,"chapter":13},{"book":3,"chapter":13},{"book":3,"chapter":13},{"book":3,"chapter":17},{"book":3,"chapter":91},{"book":3,"chapter":96},{"book":3,"chapter":115},{"book":4,"chapter":30},{"book":4,"chapter":42},{"book":4,"chapter":43},{"book":4,"chapter":43},{"book":4,"chapter":43},{"book":4,"chapter":43},{"book":4,"chapter":45},{"book":4,"chapter":45},{"book":4,"chapter":151},{"book":4,"chapter":151},{"book":4,"chapter":151},{"book":4,"chapter":155},{"book":4,"chapter":155},{"book":4,"chapter":155},{"book":4,"chapter":156},{"book":4,"chapter":156},{"book":4,"chapter":157},{"book":4,"chapter":157},{"book":4,"chapter":158},{"book":4,"chapter":159},{"book":4,"chapter":159},{"book":4,"chapter":160},{"book":4,"chapter":160},{"book":4,"chapter":160},{"book":4,"chapter":160},{"book":4,"chapter":160},{"book":4,"chapter":161},{"book":4,"chapter":167},{"book":4,"chapter":168},{"book":4,"chapter":168},{"book":4,"chapter":168},{"book":4,"chapter":171},{"book":4,"chapter":173},{"book":4,"chapter":180},{"book":4,"chapter":181},{"book":4,"chapter":181},{"book":4,"chapter":185},{"book":4,"chapter":186},{"book":4,"chapter":187},{"book":4,"chapter":187},{"book":4,"chapter":187},{"book":4,"chapter":187},{"book":4,"chapter":188},{"book":4,"chapter":189},{"book":4,"chapter":189},{"book":4,"chapter":189},{"book":4,"chapter":189},{"book":4,"chapter":189},{"book":4,"chapter":190},{"book":4,"chapter":191},{"book":4,"chapter":191},{"book":4,"chapter":191},{"book":4,"chapter":191},{"book":4,"chapter":191},{"book":4,"chapter":192},{"book":4,"chapter":196},{"book":4,"chapter":197},{"book":4,"chapter":197},{"book":4,"chapter":198},{"book":4,"chapter":198},{"book":4,"chapter":203},{"book":5,"chapter":42},{"book":5,"chapter":42},{"book":5,"chapter":42},{"book":5,"chapter":44},{"book":7,"chapter":7},{"book":7,"chapter":70},{"book":7,"chapter":86},{"book":7,"chapter":165},{"book":7,"chapter":184}]},"716599":{"id":"716599","name":"Menelaos","lat":31.967385,"lng":24.892773,"pleiadesUri":"http://pleiades.stoa.org/places/716599","placeType":"settlement","isEthnic":false,"occurrences":[{"book":4,"chapter":169}]},"727067":{"id":"727067","name":"Aegyptium Mare","lat":31.15802,"lng":32.68554,"pleiadesUri":"http://pleiades.stoa.org/places/727067","placeType":"water-open","isEthnic":false,"occurrences":[{"book":2,"chapter":113}]},"727073":{"id":"727073","name":"Anthylla","lat":31.16413,"lng":30.20803,"pleiadesUri":"http://pleiades.stoa.org/places/727073","placeType":"settlement","isEthnic":false,"occurrences":[{"book":2,"chapter":98},{"book":2,"chapter":98}]},"727076":{"id":"727076","name":"Archandropolis","lat":31.02814,"lng":30.39934,"pleiadesUri":"http://pleiades.stoa.org/places/727076","placeType":"settlement","isEthnic":false,"occurrences":[{"book":2,"chapter":98},{"book":2,"chapter":99}]},"727078":{"id":"727078","name":"Athribis","lat":30.47056,"lng":31.18806,"pleiadesUri":"http://pleiades.stoa.org/places/727078","placeType":"settlement","isEthnic":false,"occurrences":[{"book":2,"chapter":166}]},"727085":{"id":"727085","name":"Bolbitine","lat":31.44957,"lng":30.39142,"pleiadesUri":"http://pleiades.stoa.org/places/727085","placeType":"settlement","isEthnic":false,"occurrences":[{"book":2,"chapter":19}]},"727088":{"id":"727088","name":"Boubastis","lat":30.56826,"lng":31.51591,"pleiadesUri":"http://pleiades.stoa.org/places/727088","placeType":"settlement","isEthnic":false,"occurrences":[{"book":2,"chapter":60},{"book":2,"chapter":60},{"book":2,"chapter":61},{"book":2,"chapter":61},{"book":2,"chapter":68},{"book":2,"chapter":138},{"book":2,"chapter":138},{"book":2,"chapter":138},{"book":2,"chapter":154},{"book":2,"chapter":157},{"book":2,"chapter":158},{"book":2,"chapter":166},{"book":2,"chapter":167}]},"727094":{"id":"727094","name":"Bouto","lat":31.19556,"lng":30.74222,"pleiadesUri":"http://pleiades.stoa.org/places/727094","placeType":"settlement","isEthnic":false,"occurrences":[{"book":3,"chapter":64}]},"727095":{"id":"727095","name":"Bouto","lat":30.87763,"lng":31.95395,"pleiadesUri":"http://pleiades.stoa.org/places/727095","placeType":"labeled feature","isEthnic":false,"occurrences":[{"book":2,"chapter":60},{"book":2,"chapter":63},{"book":2,"chapter":68},{"book":2,"chapter":75},{"book":2,"chapter":85},{"book":2,"chapter":111},{"book":2,"chapter":133},{"book":2,"chapter":152},{"book":2,"chapter":155},{"book":2,"chapter":155},{"book":2,"chapter":156},{"book":2,"chapter":156}]},"727097":{"id":"727097","name":"Canopus","lat":31.320896,"lng":30.063645,"pleiadesUri":"http://pleiades.stoa.org/places/727097","placeType":"settlement","isEthnic":false,"occurrences":[{"book":2,"chapter":16},{"book":2,"chapter":98}]},"727103":{"id":"727103","name":"Daphnai","lat":30.85806,"lng":32.17917,"pleiadesUri":"http://pleiades.stoa.org/places/727103","placeType":"settlement","isEthnic":false,"occurrences":[{"book":2,"chapter":30},{"book":2,"chapter":31},{"book":2,"chapter":107}]},"727117":{"id":"727117","name":"Heliopolis","lat":30.129369,"lng":31.305179,"pleiadesUri":"http://pleiades.stoa.org/places/727117","placeType":"settlement","isEthnic":false,"occurrences":[{"book":2,"chapter":3},{"book":2,"chapter":3},{"book":2,"chapter":8},{"book":2,"chapter":8},{"book":2,"chapter":9},{"book":2,"chapter":9},{"book":2,"chapter":10},{"book":2,"chapter":10},{"book":2,"chapter":60},{"book":2,"chapter":63},{"book":2,"chapter":73}]},"727124":{"id":"727124","name":"Heroonpolis","lat":30.55278,"lng":32.09944,"pleiadesUri":"http://pleiades.stoa.org/places/727124","placeType":"settlement","isEthnic":false,"occurrences":[{"book":2,"chapter":158}]},"727137":{"id":"727137","name":"Kanobikon Stoma","lat":19.211408766666665,"lng":30.567329633333333,"pleiadesUri":"http://pleiades.stoa.org/places/727137","placeType":"mouth","isEthnic":false,"occurrences":[{"book":2,"chapter":18},{"book":2,"chapter":179}]},"727138":{"id":"727138","name":"Kanobikos (river)","lat":31.13965,"lng":30.192032,"pleiadesUri":"http://pleiades.stoa.org/places/727138","placeType":"settlement,river","isEthnic":false,"occurrences":[{"book":2,"chapter":19}]},"727142":{"id":"727142","name":"Kerkasoros","lat":30.09313,"lng":31.2187,"pleiadesUri":"http://pleiades.stoa.org/places/727142","placeType":"settlement","isEthnic":false,"occurrences":[{"book":2,"chapter":16},{"book":2,"chapter":18},{"book":2,"chapter":98}]},"727152":{"id":"727152","name":"Magdolos","lat":30.97269,"lng":32.44456,"pleiadesUri":"http://pleiades.stoa.org/places/727152","placeType":"settlement","isEthnic":false,"occurrences":[{"book":2,"chapter":159}]},"727156":{"id":"727156","name":"Mendes","lat":30.95833,"lng":31.51667,"pleiadesUri":"http://pleiades.stoa.org/places/727156","placeType":"settlement","isEthnic":false,"occurrences":[{"book":2,"chapter":42},{"book":2,"chapter":46},{"book":2,"chapter":47},{"book":2,"chapter":47},{"book":2,"chapter":166}]},"727157":{"id":"727157","name":"Mendesion Stoma","lat":19.211408766666665,"lng":30.567329633333333,"pleiadesUri":"http://pleiades.stoa.org/places/727157","placeType":"mouth","isEthnic":false,"occurrences":[{"book":2,"chapter":19}]},"727159":{"id":"727159","name":"Mendesios Nomos","lat":31.25,"lng":31.75,"pleiadesUri":"http://pleiades.stoa.org/places/727159","placeType":"province","isEthnic":false,"occurrences":[{"book":2,"chapter":42},{"book":2,"chapter":47}]},"727165":{"id":"727165","name":"Momemphis","lat":30.79506,"lng":30.6005,"pleiadesUri":"http://pleiades.stoa.org/places/727165","placeType":"settlement","isEthnic":false,"occurrences":[{"book":2,"chapter":164},{"book":2,"chapter":169}]},"727168":{"id":"727168","name":"Natho","lat":30.71762,"lng":31.26477,"pleiadesUri":"http://pleiades.stoa.org/places/727168","placeType":"settlement","isEthnic":false,"occurrences":[{"book":2,"chapter":166}]},"727169":{"id":"727169","name":"Naucratis","lat":30.89722,"lng":30.5925,"pleiadesUri":"http://pleiades.stoa.org/places/727169","placeType":"settlement","isEthnic":false,"occurrences":[{"book":2,"chapter":98},{"book":2,"chapter":98},{"book":2,"chapter":136},{"book":2,"chapter":178},{"book":2,"chapter":179},{"book":2,"chapter":180},{"book":2,"chapter":180}]},"727172":{"id":"727172","name":"Nilus (river)","lat":19.211408766666665,"lng":30.567329633333333,"pleiadesUri":"http://pleiades.stoa.org/places/727172","placeType":"river","isEthnic":false,"occurrences":[{"book":2,"chapter":11},{"book":2,"chapter":11},{"book":2,"chapter":11},{"book":2,"chapter":13},{"book":2,"chapter":14},{"book":2,"chapter":16},{"book":2,"chapter":17},{"book":2,"chapter":17},{"book":2,"chapter":18},{"book":2,"chapter":18},{"book":2,"chapter":18},{"book":2,"chapter":20},{"book":2,"chapter":20},{"book":2,"chapter":20},{"book":2,"chapter":22},{"book":2,"chapter":22},{"book":2,"chapter":22},{"book":2,"chapter":22},{"book":2,"chapter":22},{"book":2,"chapter":23},{"book":2,"chapter":25},{"book":2,"chapter":25},{"book":2,"chapter":26},{"book":2,"chapter":27},{"book":2,"chapter":28},{"book":2,"chapter":29},{"book":2,"chapter":29},{"book":2,"chapter":29},{"book":2,"chapter":30},{"book":2,"chapter":30},{"book":2,"chapter":30},{"book":2,"chapter":32},{"book":2,"chapter":32},{"book":2,"chapter":34},{"book":2,"chapter":34},{"book":2,"chapter":35},{"book":2,"chapter":35},{"book":2,"chapter":35},{"book":2,"chapter":73},{"book":2,"chapter":91},{"book":2,"chapter":93},{"book":2,"chapter":94},{"book":2,"chapter":97},{"book":2,"chapter":99},{"book":2,"chapter":99},{"book":2,"chapter":100},{"book":2,"chapter":109},{"book":2,"chapter":111},{"book":2,"chapter":113},{"book":2,"chapter":124},{"book":2,"chapter":125},{"book":2,"chapter":128},{"book":2,"chapter":138},{"book":2,"chapter":150},{"book":2,"chapter":151},{"book":2,"chapter":154},{"book":2,"chapter":154},{"book":2,"chapter":155},{"book":2,"chapter":158},{"book":2,"chapter":179},{"book":3,"chapter":10},{"book":4,"chapter":40},{"book":4,"chapter":42},{"book":4,"chapter":45},{"book":4,"chapter":50},{"book":4,"chapter":53},{"book":4,"chapter":53}]},"727180":{"id":"727180","name":"Onouphis Kato","lat":30.87394,"lng":30.93444,"pleiadesUri":"http://pleiades.stoa.org/places/727180","placeType":"settlement","isEthnic":false,"occurrences":[{"book":2,"chapter":166}]},"727185":{"id":"727185","name":"Papremis","lat":30.7765,"lng":30.52701,"pleiadesUri":"http://pleiades.stoa.org/places/727185","placeType":"labeled feature","isEthnic":false,"occurrences":[{"book":2,"chapter":60},{"book":2,"chapter":63},{"book":2,"chapter":73},{"book":2,"chapter":165},{"book":3,"chapter":12}]},"727191":{"id":"727191","name":"Pelousiakon Stoma","lat":31.062,"lng":32.5824,"pleiadesUri":"http://pleiades.stoa.org/places/727191","placeType":"mouth","isEthnic":false,"occurrences":[{"book":3,"chapter":10}]},"727192":{"id":"727192","name":"Pelusium","lat":31.042265,"lng":32.540631,"pleiadesUri":"http://pleiades.stoa.org/places/727192","placeType":"theatre,settlement,fort,port","isEthnic":false,"occurrences":[{"book":2,"chapter":16},{"book":2,"chapter":16},{"book":2,"chapter":18},{"book":2,"chapter":30},{"book":2,"chapter":107},{"book":2,"chapter":141},{"book":2,"chapter":154}]},"727193":{"id":"727193","name":"Perseos Skope","lat":31.46119,"lng":30.41677,"pleiadesUri":"http://pleiades.stoa.org/places/727193","placeType":"station","isEthnic":false,"occurrences":[{"book":2,"chapter":16}]},"727196":{"id":"727196","name":"Pharbaithos","lat":30.73874,"lng":31.61491,"pleiadesUri":"http://pleiades.stoa.org/places/727196","placeType":"settlement","isEthnic":false,"occurrences":[{"book":2,"chapter":166}]},"727206":{"id":"727206","name":"Prosopites Nomos","lat":30.25,"lng":30.75,"pleiadesUri":"http://pleiades.stoa.org/places/727206","placeType":"province","isEthnic":false,"occurrences":[{"book":2,"chapter":42},{"book":2,"chapter":42},{"book":2,"chapter":165}]},"727217":{"id":"727217","name":"Sais","lat":30.96716,"lng":30.7695,"pleiadesUri":"http://pleiades.stoa.org/places/727217","placeType":"settlement","isEthnic":false,"occurrences":[{"book":2,"chapter":29},{"book":2,"chapter":60},{"book":2,"chapter":63},{"book":2,"chapter":63},{"book":2,"chapter":131},{"book":2,"chapter":131},{"book":2,"chapter":152},{"book":2,"chapter":163},{"book":2,"chapter":165},{"book":2,"chapter":169},{"book":2,"chapter":169},{"book":2,"chapter":170},{"book":2,"chapter":172},{"book":2,"chapter":175},{"book":2,"chapter":175},{"book":2,"chapter":176},{"book":3,"chapter":16}]},"727224":{"id":"727224","name":"Sebennytikon Stoma","lat":19.211408766666665,"lng":30.567329633333333,"pleiadesUri":"http://pleiades.stoa.org/places/727224","placeType":"mouth","isEthnic":false,"occurrences":[{"book":2,"chapter":19},{"book":2,"chapter":19}]},"727225":{"id":"727225","name":"Sebennytikos (river)","lat":31,"lng":31.25,"pleiadesUri":"http://pleiades.stoa.org/places/727225","placeType":"settlement,river","isEthnic":false,"occurrences":[{"book":2,"chapter":155}]},"727227":{"id":"727227","name":"Sebennytos","lat":30.962841,"lng":31.239569,"pleiadesUri":"http://pleiades.stoa.org/places/727227","placeType":"settlement","isEthnic":false,"occurrences":[{"book":2,"chapter":166}]},"727249":{"id":"727249","name":"Thmouis","lat":30.93889,"lng":31.51667,"pleiadesUri":"http://pleiades.stoa.org/places/727249","placeType":"settlement","isEthnic":false,"occurrences":[{"book":2,"chapter":166}]},"736891":{"id":"736891","name":"Arabikon Oros","lat":28.75,"lng":31.25,"pleiadesUri":"http://pleiades.stoa.org/places/736891","placeType":"mountain","isEthnic":false,"occurrences":[{"book":2,"chapter":124}]},"736954":{"id":"736954","name":"Libykon Oros","lat":28.75,"lng":30.25,"pleiadesUri":"http://pleiades.stoa.org/places/736954","placeType":"mountain","isEthnic":false,"occurrences":[{"book":2,"chapter":32},{"book":2,"chapter":124}]},"736963":{"id":"736963","name":"Memphis","lat":29.849667,"lng":31.254278,"pleiadesUri":"http://pleiades.stoa.org/places/736963","placeType":"settlement,urban","isEthnic":false,"occurrences":[{"book":2,"chapter":2},{"book":2,"chapter":3},{"book":2,"chapter":3},{"book":2,"chapter":9},{"book":2,"chapter":11},{"book":2,"chapter":13},{"book":2,"chapter":14},{"book":2,"chapter":15},{"book":2,"chapter":98},{"book":2,"chapter":99},{"book":2,"chapter":99},{"book":2,"chapter":99},{"book":2,"chapter":100},{"book":2,"chapter":100},{"book":2,"chapter":112},{"book":2,"chapter":112},{"book":2,"chapter":114},{"book":2,"chapter":115},{"book":2,"chapter":120},{"book":2,"chapter":150},{"book":2,"chapter":154},{"book":2,"chapter":154},{"book":2,"chapter":158},{"book":2,"chapter":175},{"book":2,"chapter":176},{"book":2,"chapter":177},{"book":2,"chapter":177},{"book":3,"chapter":6},{"book":3,"chapter":6},{"book":3,"chapter":13},{"book":3,"chapter":13},{"book":3,"chapter":14},{"book":3,"chapter":14},{"book":3,"chapter":16},{"book":3,"chapter":25},{"book":3,"chapter":27},{"book":3,"chapter":27},{"book":3,"chapter":27},{"book":3,"chapter":37},{"book":3,"chapter":91},{"book":3,"chapter":139}]},"736967":{"id":"736967","name":"Moeris L.","lat":29.453611,"lng":30.580833,"pleiadesUri":"http://pleiades.stoa.org/places/736967","placeType":"lake","isEthnic":false,"occurrences":[{"book":2,"chapter":6},{"book":2,"chapter":14},{"book":2,"chapter":69},{"book":2,"chapter":148},{"book":2,"chapter":149},{"book":3,"chapter":91}]},"737069":{"id":"737069","name":"Tanis","lat":29.3698,"lng":31.0427,"pleiadesUri":"http://pleiades.stoa.org/places/737069","placeType":"settlement","isEthnic":false,"occurrences":[{"book":2,"chapter":166}]},"756537":{"id":"756537","name":"Arabia","lat":27.25,"lng":31.75,"pleiadesUri":"http://pleiades.stoa.org/places/756537","placeType":"unknown","isEthnic":false,"occurrences":[{"book":2,"chapter":9},{"book":2,"chapter":10}]},"756543":{"id":"756543","name":"Bousiris","lat":27.87313,"lng":30.72205,"pleiadesUri":"http://pleiades.stoa.org/places/756543","placeType":"unknown","isEthnic":false,"occurrences":[{"book":2,"chapter":60},{"book":2,"chapter":62},{"book":2,"chapter":165}]},"756613":{"id":"756613","name":"Panopolis/Schmin","lat":26.565878,"lng":31.746075,"pleiadesUri":"http://pleiades.stoa.org/places/756613","placeType":"settlement","isEthnic":false,"occurrences":[{"book":2,"chapter":91},{"book":2,"chapter":91},{"book":2,"chapter":92},{"book":2,"chapter":92},{"book":2,"chapter":92},{"book":2,"chapter":156},{"book":2,"chapter":165}]},"776210":{"id":"776210","name":"Oasis Magna/Thebaidos","lat":25.596754764260208,"lng":30.73046277641199,"pleiadesUri":"http://pleiades.stoa.org/places/776210","placeType":"oasis","isEthnic":false,"occurrences":[{"book":3,"chapter":26},{"book":3,"chapter":26},{"book":3,"chapter":26}]},"786017":{"id":"786017","name":"Diospolis Magna/Thebai","lat":25.70247,"lng":32.65285,"pleiadesUri":"http://pleiades.stoa.org/places/786017","placeType":"settlement,temple-2","isEthnic":false,"occurrences":[{"book":2,"chapter":3},{"book":2,"chapter":17},{"book":2,"chapter":29},{"book":2,"chapter":42},{"book":2,"chapter":42},{"book":2,"chapter":42},{"book":2,"chapter":43},{"book":2,"chapter":55},{"book":2,"chapter":69},{"book":2,"chapter":75},{"book":2,"chapter":91},{"book":2,"chapter":166},{"book":3,"chapter":10},{"book":3,"chapter":10},{"book":3,"chapter":11},{"book":3,"chapter":25},{"book":3,"chapter":25},{"book":3,"chapter":25},{"book":3,"chapter":26},{"book":3,"chapter":26},{"book":4,"chapter":181},{"book":4,"chapter":181},{"book":4,"chapter":181},{"book":4,"chapter":181}]},"786021":{"id":"786021","name":"Elephantine","lat":24.08292,"lng":32.89066,"pleiadesUri":"http://pleiades.stoa.org/places/786021","placeType":"settlement","isEthnic":false,"occurrences":[{"book":2,"chapter":11},{"book":2,"chapter":18},{"book":2,"chapter":20},{"book":2,"chapter":29},{"book":2,"chapter":29},{"book":2,"chapter":29},{"book":2,"chapter":30},{"book":2,"chapter":30},{"book":2,"chapter":30},{"book":2,"chapter":31},{"book":2,"chapter":32},{"book":2,"chapter":70},{"book":2,"chapter":175},{"book":2,"chapter":175},{"book":3,"chapter":19},{"book":3,"chapter":20}]},"786055":{"id":"786055","name":"Krokodilopolis/Terkythis","lat":25.58589,"lng":32.45905,"pleiadesUri":"http://pleiades.stoa.org/places/786055","placeType":"settlement","isEthnic":false,"occurrences":[{"book":2,"chapter":148}]},"786123":{"id":"786123","name":"Elephantine","lat":24.08292,"lng":32.89066,"pleiadesUri":"http://pleiades.stoa.org/places/786123","placeType":"settlement","isEthnic":false,"occurrences":[{"book":2,"chapter":29}]},"786131":{"id":"786131","name":"Thebais","lat":26.25,"lng":32.75,"pleiadesUri":"http://pleiades.stoa.org/places/786131","placeType":"region","isEthnic":false,"occurrences":[{"book":1,"chapter":182},{"book":2,"chapter":10},{"book":2,"chapter":55},{"book":2,"chapter":55},{"book":2,"chapter":56},{"book":2,"chapter":59},{"book":2,"chapter":143}]},"795866":{"id":"795866","name":"Tachompso","lat":23.05605,"lng":32.69747,"pleiadesUri":"http://pleiades.stoa.org/places/795866","placeType":"settlement","isEthnic":false,"occurrences":[{"book":2,"chapter":30}]},"805630":{"id":"805630","name":"Meroe","lat":16.94,"lng":33.75,"pleiadesUri":"http://pleiades.stoa.org/places/805630","placeType":"settlement","isEthnic":false,"occurrences":[{"book":2,"chapter":30}]},"825307":{"id":"825307","name":"Kremnoi","lat":46.672101,"lng":35.841144,"pleiadesUri":"http://pleiades.stoa.org/places/825307","placeType":"settlement","isEthnic":false,"occurrences":[{"book":4,"chapter":20},{"book":4,"chapter":110}]},"825316":{"id":"825316","name":"Lykos? (river)","lat":47.5,"lng":37.5,"pleiadesUri":"http://pleiades.stoa.org/places/825316","placeType":"river","isEthnic":false,"occurrences":[{"book":4,"chapter":77},{"book":4,"chapter":124}]},"825318":{"id":"825318","name":"Maeotis","lat":45.814417000000006,"lng":35.862586,"pleiadesUri":"http://pleiades.stoa.org/places/825318","placeType":"water-open","isEthnic":false,"occurrences":[{"book":1,"chapter":104},{"book":4,"chapter":3},{"book":4,"chapter":20},{"book":4,"chapter":21},{"book":4,"chapter":45},{"book":4,"chapter":58},{"book":4,"chapter":87},{"book":4,"chapter":100},{"book":4,"chapter":101},{"book":4,"chapter":110},{"book":4,"chapter":116},{"book":4,"chapter":120},{"book":4,"chapter":124},{"book":4,"chapter":124},{"book":4,"chapter":133}]},"825371":{"id":"825371","name":"Sarmatia","lat":45.5,"lng":39.5,"pleiadesUri":"http://pleiades.stoa.org/places/825371","placeType":"unknown","isEthnic":true,"occurrences":[{"book":4,"chapter":21},{"book":4,"chapter":58},{"book":4,"chapter":103},{"book":4,"chapter":110},{"book":4,"chapter":117},{"book":4,"chapter":117},{"book":4,"chapter":119},{"book":4,"chapter":120},{"book":4,"chapter":123},{"book":4,"chapter":128},{"book":4,"chapter":136}]},"825398":{"id":"825398","name":"Tanais (river)","lat":47.5437096,"lng":40.7291755,"pleiadesUri":"http://pleiades.stoa.org/places/825398","placeType":"river","isEthnic":false,"occurrences":[{"book":4,"chapter":20},{"book":4,"chapter":21},{"book":4,"chapter":45},{"book":4,"chapter":48},{"book":4,"chapter":58},{"book":4,"chapter":58},{"book":4,"chapter":100},{"book":4,"chapter":116},{"book":4,"chapter":116},{"book":4,"chapter":120},{"book":4,"chapter":122},{"book":4,"chapter":124}]},"845013":{"id":"845013","name":"Mariandynoi","lat":41.091651424999995,"lng":31.603681575,"pleiadesUri":"http://pleiades.stoa.org/places/845013","placeType":"people","isEthnic":true,"occurrences":[{"book":1,"chapter":28},{"book":3,"chapter":90}]},"845034":{"id":"845034","name":"Paphlagonia (region)","lat":41.44846296666666,"lng":33.23855021666667,"pleiadesUri":"http://pleiades.stoa.org/places/845034","placeType":"region","isEthnic":true,"occurrences":[{"book":1,"chapter":28},{"book":1,"chapter":72},{"book":3,"chapter":90}]},"845036":{"id":"845036","name":"Parthenios (river)","lat":41.5,"lng":32.5,"pleiadesUri":"http://pleiades.stoa.org/places/845036","placeType":"river","isEthnic":false,"occurrences":[{"book":2,"chapter":104}]},"854675":{"id":"854675","name":"Cimmerius Bosp(h)orus","lat":45.35,"lng":36.65,"pleiadesUri":"http://pleiades.stoa.org/places/854675","placeType":"water-open","isEthnic":false,"occurrences":[{"book":4,"chapter":12},{"book":4,"chapter":28}]},"854696":{"id":"854696","name":"Kimmerikon","lat":45.0437458,"lng":36.2317044,"pleiadesUri":"http://pleiades.stoa.org/places/854696","placeType":"settlement","isEthnic":true,"occurrences":[{"book":4,"chapter":1},{"book":4,"chapter":11},{"book":4,"chapter":11},{"book":4,"chapter":11},{"book":4,"chapter":11},{"book":4,"chapter":12},{"book":4,"chapter":12},{"book":4,"chapter":12},{"book":4,"chapter":12},{"book":4,"chapter":12},{"book":4,"chapter":13},{"book":4,"chapter":45},{"book":4,"chapter":100}]},"854735":{"id":"854735","name":"Sindike","lat":45.25,"lng":36.75,"pleiadesUri":"http://pleiades.stoa.org/places/854735","placeType":"region","isEthnic":true,"occurrences":[{"book":4,"chapter":28},{"book":4,"chapter":86}]},"857014":{"id":"857014","name":"Aia/Nesos","lat":42.5,"lng":42.5,"pleiadesUri":"http://pleiades.stoa.org/places/857014","placeType":"unknown","isEthnic":false,"occurrences":[{"book":1,"chapter":2}]},"857083":{"id":"857083","name":"Chalybes","lat":41.5,"lng":36.5,"pleiadesUri":"http://pleiades.stoa.org/places/857083","placeType":"people","isEthnic":true,"occurrences":[{"book":1,"chapter":28}]},"857148":{"id":"857148","name":"Halys (river)","lat":41.6767598,"lng":35.9295291,"pleiadesUri":"http://pleiades.stoa.org/places/857148","placeType":"settlement,river","isEthnic":false,"occurrences":[{"book":1,"chapter":6},{"book":1,"chapter":28},{"book":1,"chapter":72},{"book":1,"chapter":72},{"book":1,"chapter":75},{"book":1,"chapter":103},{"book":1,"chapter":130},{"book":5,"chapter":52},{"book":5,"chapter":102}]},"857224":{"id":"857224","name":"Makrones/Machelones","lat":40.5,"lng":39.5,"pleiadesUri":"http://pleiades.stoa.org/places/857224","placeType":"region","isEthnic":true,"occurrences":[{"book":2,"chapter":104},{"book":3,"chapter":94}]},"857239":{"id":"857239","name":"Mossynoeci","lat":40.5,"lng":37.5,"pleiadesUri":"http://pleiades.stoa.org/places/857239","placeType":"people","isEthnic":true,"occurrences":[{"book":3,"chapter":94}]},"857276":{"id":"857276","name":"Phasis (river)","lat":42.1237505,"lng":42.2161531,"pleiadesUri":"http://pleiades.stoa.org/places/857276","placeType":"river","isEthnic":false,"occurrences":[{"book":2,"chapter":104},{"book":2,"chapter":104},{"book":4,"chapter":38},{"book":4,"chapter":38},{"book":4,"chapter":45},{"book":4,"chapter":86},{"book":6,"chapter":84}]},"857294":{"id":"857294","name":"Pteria","lat":41.321531,"lng":35.108768,"pleiadesUri":"http://pleiades.stoa.org/places/857294","placeType":"settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":76},{"book":1,"chapter":76},{"book":1,"chapter":76},{"book":1,"chapter":79}]},"857321":{"id":"857321","name":"Sinope","lat":42.0206,"lng":35.14885,"pleiadesUri":"http://pleiades.stoa.org/places/857321","placeType":"settlement,port","isEthnic":false,"occurrences":[{"book":1,"chapter":76},{"book":2,"chapter":35},{"book":2,"chapter":35},{"book":4,"chapter":12}]},"857350":{"id":"857350","name":"Themiskyra","lat":41.215176,"lng":36.967737,"pleiadesUri":"http://pleiades.stoa.org/places/857350","placeType":"settlement","isEthnic":false,"occurrences":[{"book":4,"chapter":86}]},"857352":{"id":"857352","name":"Thermodon (river)","lat":41.1939559,"lng":36.9424975,"pleiadesUri":"http://pleiades.stoa.org/places/857352","placeType":"river","isEthnic":false,"occurrences":[{"book":2,"chapter":104},{"book":4,"chapter":86},{"book":4,"chapter":110}]},"857356":{"id":"857356","name":"Tibareni","lat":40.5,"lng":37.5,"pleiadesUri":"http://pleiades.stoa.org/places/857356","placeType":"people","isEthnic":true,"occurrences":[{"book":3,"chapter":94}]},"863766":{"id":"863766","name":"Caucasus (mountain range)","lat":43.3525468,"lng":42.4378759,"pleiadesUri":"http://pleiades.stoa.org/places/863766","placeType":"mountain","isEthnic":false,"occurrences":[{"book":1,"chapter":104},{"book":1,"chapter":203},{"book":1,"chapter":203},{"book":1,"chapter":204},{"book":3,"chapter":97},{"book":3,"chapter":97},{"book":4,"chapter":13}]},"863770":{"id":"863770","name":"Colchis/Lazike","lat":42.5,"lng":42.5,"pleiadesUri":"http://pleiades.stoa.org/places/863770","placeType":"region","isEthnic":true,"occurrences":[{"book":1,"chapter":2},{"book":1,"chapter":104},{"book":1,"chapter":104},{"book":2,"chapter":104},{"book":2,"chapter":104},{"book":2,"chapter":104},{"book":2,"chapter":104},{"book":2,"chapter":104},{"book":2,"chapter":104},{"book":2,"chapter":105},{"book":2,"chapter":106},{"book":3,"chapter":97},{"book":4,"chapter":38},{"book":4,"chapter":40}]},"863847":{"id":"863847","name":"Moschoi","lat":41.5,"lng":42.5,"pleiadesUri":"http://pleiades.stoa.org/places/863847","placeType":"people","isEthnic":true,"occurrences":[{"book":3,"chapter":94}]},"863867":{"id":"863867","name":"Phasis/Rheon (river)","lat":42.5,"lng":42.5,"pleiadesUri":"http://pleiades.stoa.org/places/863867","placeType":"river","isEthnic":false,"occurrences":[{"book":1,"chapter":2},{"book":1,"chapter":104}]},"874314":{"id":"874314","name":"Alarodioi","lat":38.5,"lng":42.5,"pleiadesUri":"http://pleiades.stoa.org/places/874314","placeType":"people","isEthnic":true,"occurrences":[{"book":3,"chapter":94}]},"874334":{"id":"874334","name":"Arabia","lat":37.5,"lng":39.5,"pleiadesUri":"http://pleiades.stoa.org/places/874334","placeType":"unknown","isEthnic":true,"occurrences":[{"book":1,"chapter":131},{"book":1,"chapter":132}]},"874350":{"id":"874350","name":"Armenia","lat":39.5,"lng":40.5,"pleiadesUri":"http://pleiades.stoa.org/places/874350","placeType":"region","isEthnic":true,"occurrences":[{"book":5,"chapter":49},{"book":5,"chapter":49},{"book":5,"chapter":52}]},"874432":{"id":"874432","name":"Colchis","lat":38.52585,"lng":39.228819,"pleiadesUri":"http://pleiades.stoa.org/places/874432","placeType":"settlement","isEthnic":true,"occurrences":[{"book":1,"chapter":2},{"book":1,"chapter":3}]},"874545":{"id":"874545","name":"Kentrites/Tigris/Zirmas","lat":37.8488001,"lng":41.97437876666667,"pleiadesUri":"http://pleiades.stoa.org/places/874545","placeType":"settlement,river","isEthnic":false,"occurrences":[{"book":5,"chapter":52}]},"874588":{"id":"874588","name":"Marde/Margdis","lat":37.312236,"lng":40.735111,"pleiadesUri":"http://pleiades.stoa.org/places/874588","placeType":"fort","isEthnic":true,"occurrences":[{"book":1,"chapter":84},{"book":1,"chapter":84}]},"874621":{"id":"874621","name":"Nineveh/Ninos","lat":36.34773,"lng":43.1609,"pleiadesUri":"http://pleiades.stoa.org/places/874621","placeType":"settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":102},{"book":1,"chapter":103},{"book":1,"chapter":106},{"book":1,"chapter":178},{"book":1,"chapter":185},{"book":1,"chapter":193},{"book":2,"chapter":150},{"book":2,"chapter":150},{"book":2,"chapter":151}]},"874622":{"id":"874622","name":"Niphates M.","lat":38.5,"lng":42.5,"pleiadesUri":"http://pleiades.stoa.org/places/874622","placeType":"mountain","isEthnic":false,"occurrences":[{"book":1,"chapter":72}]},"884118":{"id":"884118","name":"Araxes (river)","lat":38.5,"lng":46.5,"pleiadesUri":"http://pleiades.stoa.org/places/884118","placeType":"river","isEthnic":false,"occurrences":[{"book":1,"chapter":202},{"book":1,"chapter":202},{"book":1,"chapter":206},{"book":1,"chapter":211},{"book":1,"chapter":211},{"book":1,"chapter":211},{"book":1,"chapter":216},{"book":4,"chapter":11},{"book":4,"chapter":41}]},"884130":{"id":"884130","name":"Caspium/Hyrcanium Mare","lat":42.6759567125,"lng":49.98680535,"pleiadesUri":"http://pleiades.stoa.org/places/884130","placeType":"lake,water-open","isEthnic":false,"occurrences":[{"book":1,"chapter":203},{"book":1,"chapter":203},{"book":1,"chapter":204}]},"884179":{"id":"884179","name":"Matiane","lat":36.5,"lng":46.5,"pleiadesUri":"http://pleiades.stoa.org/places/884179","placeType":"region","isEthnic":true,"occurrences":[{"book":1,"chapter":72},{"book":1,"chapter":189},{"book":1,"chapter":202},{"book":3,"chapter":94},{"book":5,"chapter":49},{"book":5,"chapter":52},{"book":5,"chapter":52}]},"893951":{"id":"893951","name":"Babylon","lat":32.53617,"lng":44.42082,"pleiadesUri":"http://pleiades.stoa.org/places/893951","placeType":"settlement,urban","isEthnic":true,"occurrences":[{"book":1,"chapter":74},{"book":1,"chapter":77},{"book":1,"chapter":93},{"book":1,"chapter":107},{"book":1,"chapter":153},{"book":1,"chapter":178},{"book":1,"chapter":178},{"book":1,"chapter":179},{"book":1,"chapter":180},{"book":1,"chapter":182},{"book":1,"chapter":183},{"book":1,"chapter":184},{"book":1,"chapter":185},{"book":1,"chapter":185},{"book":1,"chapter":185},{"book":1,"chapter":186},{"book":1,"chapter":187},{"book":1,"chapter":189},{"book":1,"chapter":189},{"book":1,"chapter":190},{"book":1,"chapter":190},{"book":1,"chapter":191},{"book":1,"chapter":191},{"book":1,"chapter":192},{"book":1,"chapter":192},{"book":1,"chapter":192},{"book":1,"chapter":193},{"book":1,"chapter":193},{"book":1,"chapter":194},{"book":1,"chapter":194},{"book":1,"chapter":195},{"book":1,"chapter":197},{"book":1,"chapter":198},{"book":1,"chapter":199},{"book":1,"chapter":200},{"book":2,"chapter":100},{"book":3,"chapter":89},{"book":3,"chapter":89},{"book":3,"chapter":91},{"book":3,"chapter":94},{"book":3,"chapter":150},{"book":3,"chapter":151},{"book":3,"chapter":151},{"book":3,"chapter":151},{"book":3,"chapter":152},{"book":3,"chapter":152},{"book":3,"chapter":153},{"book":3,"chapter":153},{"book":3,"chapter":154},{"book":3,"chapter":154},{"book":3,"chapter":154},{"book":3,"chapter":155},{"book":3,"chapter":155},{"book":3,"chapter":156},{"book":3,"chapter":156},{"book":3,"chapter":157},{"book":3,"chapter":157},{"book":3,"chapter":157},{"book":3,"chapter":157},{"book":3,"chapter":157},{"book":3,"chapter":157},{"book":3,"chapter":158},{"book":3,"chapter":159},{"book":3,"chapter":159},{"book":3,"chapter":159},{"book":3,"chapter":159},{"book":3,"chapter":159},{"book":3,"chapter":160},{"book":3,"chapter":160},{"book":4,"chapter":1},{"book":4,"chapter":198}]},"894056":{"id":"894056","name":"Opis","lat":33.18405,"lng":44.70127,"pleiadesUri":"http://pleiades.stoa.org/places/894056","placeType":"settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":189}]},"897717":{"id":"897717","name":"Arderikka","lat":31.5,"lng":44.5,"pleiadesUri":"http://pleiades.stoa.org/places/897717","placeType":"unlocated","isEthnic":false,"occurrences":[{"book":1,"chapter":185}]},"903021":{"id":"903021","name":"Ecbatana/Hagmatana/Achmeta/Epiphaneia/Ahmadan","lat":34.80523,"lng":48.51696,"pleiadesUri":"http://pleiades.stoa.org/places/903021","placeType":"settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":98},{"book":1,"chapter":110},{"book":1,"chapter":153},{"book":3,"chapter":62},{"book":3,"chapter":64},{"book":3,"chapter":64},{"book":3,"chapter":64},{"book":3,"chapter":64},{"book":3,"chapter":92}]},"903080":{"id":"903080","name":"Media/Mad(aya)","lat":34.5,"lng":46.5,"pleiadesUri":"http://pleiades.stoa.org/places/903080","placeType":"region","isEthnic":true,"occurrences":[{"book":1,"chapter":16},{"book":1,"chapter":55},{"book":1,"chapter":56},{"book":1,"chapter":72},{"book":1,"chapter":72},{"book":1,"chapter":73},{"book":1,"chapter":73},{"book":1,"chapter":74},{"book":1,"chapter":74},{"book":1,"chapter":80},{"book":1,"chapter":91},{"book":1,"chapter":91},{"book":1,"chapter":91},{"book":1,"chapter":95},{"book":1,"chapter":96},{"book":1,"chapter":96},{"book":1,"chapter":96},{"book":1,"chapter":96},{"book":1,"chapter":96},{"book":1,"chapter":97},{"book":1,"chapter":98},{"book":1,"chapter":98},{"book":1,"chapter":98},{"book":1,"chapter":98},{"book":1,"chapter":101},{"book":1,"chapter":101},{"book":1,"chapter":102},{"book":1,"chapter":102},{"book":1,"chapter":104},{"book":1,"chapter":104},{"book":1,"chapter":104},{"book":1,"chapter":104},{"book":1,"chapter":106},{"book":1,"chapter":106},{"book":1,"chapter":107},{"book":1,"chapter":108},{"book":1,"chapter":108},{"book":1,"chapter":110},{"book":1,"chapter":110},{"book":1,"chapter":110},{"book":1,"chapter":114},{"book":1,"chapter":120},{"book":1,"chapter":123},{"book":1,"chapter":123},{"book":1,"chapter":124},{"book":1,"chapter":124},{"book":1,"chapter":125},{"book":1,"chapter":126},{"book":1,"chapter":127},{"book":1,"chapter":127},{"book":1,"chapter":127},{"book":1,"chapter":128},{"book":1,"chapter":128},{"book":1,"chapter":129},{"book":1,"chapter":129},{"book":1,"chapter":129},{"book":1,"chapter":129},{"book":1,"chapter":130},{"book":1,"chapter":130},{"book":1,"chapter":130},{"book":1,"chapter":134},{"book":1,"chapter":134},{"book":1,"chapter":135},{"book":1,"chapter":156},{"book":1,"chapter":157},{"book":1,"chapter":162},{"book":1,"chapter":162},{"book":1,"chapter":163},{"book":1,"chapter":185},{"book":1,"chapter":186},{"book":1,"chapter":186},{"book":1,"chapter":206},{"book":3,"chapter":62},{"book":3,"chapter":64},{"book":3,"chapter":65},{"book":3,"chapter":73},{"book":3,"chapter":84},{"book":3,"chapter":92},{"book":3,"chapter":106},{"book":3,"chapter":126},{"book":3,"chapter":136},{"book":4,"chapter":1},{"book":4,"chapter":1},{"book":4,"chapter":1},{"book":4,"chapter":3},{"book":4,"chapter":5},{"book":4,"chapter":12},{"book":4,"chapter":13},{"book":4,"chapter":38},{"book":4,"chapter":38},{"book":4,"chapter":40},{"book":4,"chapter":166},{"book":4,"chapter":197},{"book":5,"chapter":9},{"book":5,"chapter":9},{"book":5,"chapter":104},{"book":5,"chapter":104},{"book":5,"chapter":110},{"book":6,"chapter":9},{"book":6,"chapter":22},{"book":6,"chapter":22},{"book":6,"chapter":25},{"book":6,"chapter":67},{"book":6,"chapter":84},{"book":6,"chapter":94},{"book":6,"chapter":109},{"book":6,"chapter":111},{"book":6,"chapter":112},{"book":6,"chapter":113},{"book":6,"chapter":120},{"book":7,"chapter":8},{"book":7,"chapter":20},{"book":7,"chapter":40},{"book":7,"chapter":61},{"book":7,"chapter":62},{"book":7,"chapter":62},{"book":7,"chapter":62},{"book":7,"chapter":64},{"book":7,"chapter":65},{"book":7,"chapter":67},{"book":7,"chapter":80},{"book":7,"chapter":85},{"book":7,"chapter":96},{"book":7,"chapter":116},{"book":7,"chapter":135},{"book":7,"chapter":136},{"book":7,"chapter":184},{"book":7,"chapter":208},{"book":7,"chapter":210},{"book":7,"chapter":210},{"book":7,"chapter":211},{"book":7,"chapter":211},{"book":7,"chapter":226},{"book":7,"chapter":226},{"book":7,"chapter":226},{"book":7,"chapter":228},{"book":7,"chapter":239}]},"912816":{"id":"912816","name":"Babylonia","lat":32.5,"lng":44.5,"pleiadesUri":"http://pleiades.stoa.org/places/912816","placeType":"region,province","isEthnic":false,"occurrences":[{"book":1,"chapter":193}]},"912849":{"id":"912849","name":"Euphrates (river)","lat":34.74942377777777,"lng":40.93640094444444,"pleiadesUri":"http://pleiades.stoa.org/places/912849","placeType":"river","isEthnic":false,"occurrences":[{"book":1,"chapter":180},{"book":1,"chapter":180},{"book":1,"chapter":185},{"book":1,"chapter":185},{"book":1,"chapter":185},{"book":1,"chapter":187},{"book":1,"chapter":191},{"book":1,"chapter":191},{"book":1,"chapter":193},{"book":5,"chapter":52}]},"912935":{"id":"912935","name":"Shaur/Choaspes?/Eulaeus?/Uknu? (river)","lat":33.0958458,"lng":47.5259884,"pleiadesUri":"http://pleiades.stoa.org/places/912935","placeType":"river","isEthnic":false,"occurrences":[{"book":5,"chapter":49},{"book":5,"chapter":52}]},"912936":{"id":"912936","name":"Susa/Seleucia ad Eulaeum","lat":32.19202,"lng":48.24854,"pleiadesUri":"http://pleiades.stoa.org/places/912936","placeType":"settlement","isEthnic":false,"occurrences":[{"book":1,"chapter":188},{"book":3,"chapter":30},{"book":3,"chapter":64},{"book":3,"chapter":65},{"book":3,"chapter":70},{"book":3,"chapter":91},{"book":3,"chapter":129},{"book":3,"chapter":132},{"book":3,"chapter":140},{"book":4,"chapter":84},{"book":4,"chapter":85},{"book":5,"chapter":24},{"book":5,"chapter":25},{"book":5,"chapter":30},{"book":5,"chapter":30},{"book":5,"chapter":32},{"book":5,"chapter":35},{"book":5,"chapter":35},{"book":5,"chapter":49},{"book":5,"chapter":53},{"book":5,"chapter":53},{"book":5,"chapter":53},{"book":5,"chapter":54},{"book":5,"chapter":54},{"book":5,"chapter":107},{"book":6,"chapter":1},{"book":6,"chapter":20},{"book":6,"chapter":30},{"book":7,"chapter":3},{"book":7,"chapter":6},{"book":7,"chapter":6},{"book":7,"chapter":52},{"book":7,"chapter":135},{"book":7,"chapter":136},{"book":7,"chapter":151},{"book":7,"chapter":151},{"book":7,"chapter":152},{"book":7,"chapter":239}]},"912964":{"id":"912964","name":"Tigris/Diglitus (river)","lat":34.52908255,"lng":44.79467829666667,"pleiadesUri":"http://pleiades.stoa.org/places/912964","placeType":"river","isEthnic":false,"occurrences":[{"book":1,"chapter":189},{"book":1,"chapter":193},{"book":2,"chapter":150},{"book":6,"chapter":20}]},"922693":{"id":"922693","name":"Pasargadae/Batrakatash","lat":30.1985,"lng":53.17334,"pleiadesUri":"http://pleiades.stoa.org/places/922693","placeType":"architecturalcomplex,tomb,fort,settlement,hill","isEthnic":true,"occurrences":[{"book":1,"chapter":125},{"book":1,"chapter":125},{"book":4,"chapter":167}]},"932472":{"id":"932472","name":"Mykoi/Macae","lat":25.8,"lng":56.2,"pleiadesUri":"http://pleiades.stoa.org/places/932472","placeType":"people","isEthnic":true,"occurrences":[{"book":3,"chapter":93}]},"942333":{"id":"942333","name":"Varkana/Hyrcania/Gurgan","lat":37.1,"lng":56.3,"pleiadesUri":"http://pleiades.stoa.org/places/942333","placeType":"region","isEthnic":true,"occurrences":[{"book":3,"chapter":117}]},"952076":{"id":"952076","name":"Daoi/Dahae","lat":38.5,"lng":56.5,"pleiadesUri":"http://pleiades.stoa.org/places/952076","placeType":"unknown","isEthnic":true,"occurrences":[{"book":1,"chapter":126}]},"952097":{"id":"952097","name":"Parthyene/Parthia","lat":38.5,"lng":57.5,"pleiadesUri":"http://pleiades.stoa.org/places/952097","placeType":"region","isEthnic":true,"occurrences":[{"book":3,"chapter":93},{"book":3,"chapter":117}]},"961881":{"id":"961881","name":"Ar(e)ia","lat":34.5,"lng":61.5,"pleiadesUri":"http://pleiades.stoa.org/places/961881","placeType":"region,satrapy","isEthnic":true,"occurrences":[{"book":3,"chapter":93}]},"961886":{"id":"961886","name":"Bactra/Zariaspa","lat":36.767444,"lng":66.901245,"pleiadesUri":"http://pleiades.stoa.org/places/961886","placeType":"settlement","isEthnic":false,"occurrences":[{"book":6,"chapter":9}]},"971705":{"id":"971705","name":"Bactria","lat":37.5,"lng":67.5,"pleiadesUri":"http://pleiades.stoa.org/places/971705","placeType":"region","isEthnic":true,"occurrences":[{"book":3,"chapter":92},{"book":3,"chapter":102},{"book":4,"chapter":204},{"book":4,"chapter":205}]},"981502":{"id":"981502","name":"Achaia (province)","lat":37.5,"lng":22.5,"pleiadesUri":"http://pleiades.stoa.org/places/981502","placeType":"province","isEthnic":true,"occurrences":[{"book":2,"chapter":99},{"book":5,"chapter":62},{"book":5,"chapter":72}]},"981503":{"id":"981503","name":"Ancient Egypt (region)","lat":19.211408766666665,"lng":30.567329633333333,"pleiadesUri":"http://pleiades.stoa.org/places/981503","placeType":"region","isEthnic":true,"occurrences":[{"book":1,"chapter":1},{"book":1,"chapter":2},{"book":1,"chapter":30},{"book":1,"chapter":77},{"book":1,"chapter":77},{"book":1,"chapter":105},{"book":1,"chapter":135},{"book":1,"chapter":154},{"book":1,"chapter":182},{"book":1,"chapter":182},{"book":2,"chapter":2},{"book":2,"chapter":2},{"book":2,"chapter":3},{"book":2,"chapter":4},{"book":2,"chapter":5},{"book":2,"chapter":5},{"book":2,"chapter":6},{"book":2,"chapter":6},{"book":2,"chapter":7},{"book":2,"chapter":7},{"book":2,"chapter":8},{"book":2,"chapter":10},{"book":2,"chapter":10},{"book":2,"chapter":11},{"book":2,"chapter":11},{"book":2,"chapter":13},{"book":2,"chapter":14},{"book":2,"chapter":15},{"book":2,"chapter":15},{"book":2,"chapter":15},{"book":2,"chapter":15},{"book":2,"chapter":16},{"book":2,"chapter":16},{"book":2,"chapter":17},{"book":2,"chapter":17},{"book":2,"chapter":17},{"book":2,"chapter":18},{"book":2,"chapter":18},{"book":2,"chapter":19},{"book":2,"chapter":19},{"book":2,"chapter":19},{"book":2,"chapter":20},{"book":2,"chapter":21},{"book":2,"chapter":29},{"book":2,"chapter":29},{"book":2,"chapter":30},{"book":2,"chapter":30},{"book":2,"chapter":31},{"book":2,"chapter":32},{"book":2,"chapter":32},{"book":2,"chapter":36},{"book":2,"chapter":36},{"book":2,"chapter":37},{"book":2,"chapter":37},{"book":2,"chapter":37},{"book":2,"chapter":37},{"book":2,"chapter":37},{"book":2,"chapter":37},{"book":2,"chapter":38},{"book":2,"chapter":40},{"book":2,"chapter":41},{"book":2,"chapter":41},{"book":2,"chapter":41},{"book":2,"chapter":41},{"book":2,"chapter":42},{"book":2,"chapter":43},{"book":2,"chapter":43},{"book":2,"chapter":43},{"book":2,"chapter":43},{"book":2,"chapter":43},{"book":2,"chapter":44},{"book":2,"chapter":44},{"book":2,"chapter":44},{"book":2,"chapter":44},{"book":2,"chapter":44},{"book":2,"chapter":44},{"book":2,"chapter":46},{"book":2,"chapter":46},{"book":2,"chapter":46},{"book":2,"chapter":47},{"book":2,"chapter":47},{"book":2,"chapter":47},{"book":2,"chapter":47},{"book":2,"chapter":47},{"book":2,"chapter":47},{"book":2,"chapter":48},{"book":2,"chapter":49},{"book":2,"chapter":50},{"book":2,"chapter":51},{"book":2,"chapter":51},{"book":2,"chapter":51},{"book":2,"chapter":51},{"book":2,"chapter":55},{"book":2,"chapter":59},{"book":2,"chapter":59},{"book":2,"chapter":60},{"book":2,"chapter":60},{"book":2,"chapter":63},{"book":2,"chapter":63},{"book":2,"chapter":64},{"book":2,"chapter":65},{"book":2,"chapter":65},{"book":2,"chapter":65},{"book":2,"chapter":67},{"book":2,"chapter":68},{"book":2,"chapter":69},{"book":2,"chapter":70},{"book":2,"chapter":73},{"book":2,"chapter":73},{"book":2,"chapter":75},{"book":2,"chapter":76},{"book":2,"chapter":76},{"book":2,"chapter":77},{"book":2,"chapter":77},{"book":2,"chapter":79},{"book":2,"chapter":80},{"book":2,"chapter":80},{"book":2,"chapter":80},{"book":2,"chapter":81},{"book":2,"chapter":81},{"book":2,"chapter":82},{"book":2,"chapter":83},{"book":2,"chapter":87},{"book":2,"chapter":91},{"book":2,"chapter":91},{"book":2,"chapter":91},{"book":2,"chapter":91},{"book":2,"chapter":92},{"book":2,"chapter":92},{"book":2,"chapter":92},{"book":2,"chapter":92},{"book":2,"chapter":92},{"book":2,"chapter":94},{"book":2,"chapter":99},{"book":2,"chapter":99},{"book":2,"chapter":99},{"book":2,"chapter":100},{"book":2,"chapter":100},{"book":2,"chapter":100},{"book":2,"chapter":100},{"book":2,"chapter":101},{"book":2,"chapter":103},{"book":2,"chapter":104},{"book":2,"chapter":104},{"book":2,"chapter":104},{"book":2,"chapter":104},{"book":2,"chapter":104},{"book":2,"chapter":104},{"book":2,"chapter":104},{"book":2,"chapter":104},{"book":2,"chapter":105},{"book":2,"chapter":105},{"book":2,"chapter":105},{"book":2,"chapter":106},{"book":2,"chapter":106},{"book":2,"chapter":106},{"book":2,"chapter":106},{"book":2,"chapter":106},{"book":2,"chapter":107},{"book":2,"chapter":107},{"book":2,"chapter":108},{"book":2,"chapter":109},{"book":2,"chapter":109},{"book":2,"chapter":110},{"book":2,"chapter":110},{"book":2,"chapter":113},{"book":2,"chapter":118},{"book":2,"chapter":119},{"book":2,"chapter":120},{"book":2,"chapter":120},{"book":2,"chapter":120},{"book":2,"chapter":121},{"book":2,"chapter":122},{"book":2,"chapter":122},{"book":2,"chapter":123},{"book":2,"chapter":123},{"book":2,"chapter":124},{"book":2,"chapter":124},{"book":2,"chapter":124},{"book":2,"chapter":126},{"book":2,"chapter":127},{"book":2,"chapter":133},{"book":2,"chapter":136},{"book":2,"chapter":137},{"book":2,"chapter":137},{"book":2,"chapter":138},{"book":2,"chapter":140},{"book":2,"chapter":141},{"book":2,"chapter":141},{"book":2,"chapter":141},{"book":2,"chapter":141},{"book":2,"chapter":141},{"book":2,"chapter":141},{"book":2,"chapter":142},{"book":2,"chapter":142},{"book":2,"chapter":143},{"book":2,"chapter":143},{"book":2,"chapter":145},{"book":2,"chapter":145},{"book":2,"chapter":147},{"book":2,"chapter":147},{"book":2,"chapter":147},{"book":2,"chapter":147},{"book":2,"chapter":148},{"book":2,"chapter":148},{"book":2,"chapter":151},{"book":2,"chapter":151},{"book":2,"chapter":152},{"book":2,"chapter":152},{"book":2,"chapter":152},{"book":2,"chapter":152},{"book":2,"chapter":153},{"book":2,"chapter":154},{"book":2,"chapter":154},{"book":2,"chapter":154},{"book":2,"chapter":154},{"book":2,"chapter":155},{"book":2,"chapter":155},{"book":2,"chapter":156},{"book":2,"chapter":156},{"book":2,"chapter":156},{"book":2,"chapter":158},{"book":2,"chapter":159},{"book":2,"chapter":159},{"book":2,"chapter":160},{"book":2,"chapter":160},{"book":2,"chapter":160},{"book":2,"chapter":160},{"book":2,"chapter":160},{"book":2,"chapter":160},{"book":2,"chapter":161},{"book":2,"chapter":161},{"book":2,"chapter":161},{"book":2,"chapter":162},{"book":2,"chapter":162},{"book":2,"chapter":162},{"book":2,"chapter":162},{"book":2,"chapter":162},{"book":2,"chapter":163},{"book":2,"chapter":163},{"book":2,"chapter":164},{"book":2,"chapter":164},{"book":2,"chapter":165},{"book":2,"chapter":167},{"book":2,"chapter":168},{"book":2,"chapter":168},{"book":2,"chapter":168},{"book":2,"chapter":169},{"book":2,"chapter":169},{"book":2,"chapter":171},{"book":2,"chapter":171},{"book":2,"chapter":172},{"book":2,"chapter":172},{"book":2,"chapter":172},{"book":2,"chapter":172},{"book":2,"chapter":173},{"book":2,"chapter":177},{"book":2,"chapter":178},{"book":2,"chapter":182},{"book":3,"chapter":1},{"book":3,"chapter":1},{"book":3,"chapter":1},{"book":3,"chapter":1},{"book":3,"chapter":1},{"book":3,"chapter":1},{"book":3,"chapter":2},{"book":3,"chapter":2},{"book":3,"chapter":2},{"book":3,"chapter":3},{"book":3,"chapter":4},{"book":3,"chapter":4},{"book":3,"chapter":4},{"book":3,"chapter":4},{"book":3,"chapter":5},{"book":3,"chapter":6},{"book":3,"chapter":6},{"book":3,"chapter":10},{"book":3,"chapter":10},{"book":3,"chapter":10},{"book":3,"chapter":11},{"book":3,"chapter":11},{"book":3,"chapter":11},{"book":3,"chapter":11},{"book":3,"chapter":12},{"book":3,"chapter":12},{"book":3,"chapter":12},{"book":3,"chapter":12},{"book":3,"chapter":12},{"book":3,"chapter":13},{"book":3,"chapter":13},{"book":3,"chapter":13},{"book":3,"chapter":13},{"book":3,"chapter":14},{"book":3,"chapter":14},{"book":3,"chapter":14},{"book":3,"chapter":14},{"book":3,"chapter":14},{"book":3,"chapter":14},{"book":3,"chapter":14},{"book":3,"chapter":15},{"book":3,"chapter":16},{"book":3,"chapter":16},{"book":3,"chapter":16},{"book":3,"chapter":16},{"book":3,"chapter":24},{"book":3,"chapter":27},{"book":3,"chapter":27},{"book":3,"chapter":27},{"book":3,"chapter":27},{"book":3,"chapter":28},{"book":3,"chapter":28},{"book":3,"chapter":29},{"book":3,"chapter":29},{"book":3,"chapter":29},{"book":3,"chapter":30},{"book":3,"chapter":30},{"book":3,"chapter":31},{"book":3,"chapter":32},{"book":3,"chapter":34},{"book":3,"chapter":39},{"book":3,"chapter":39},{"book":3,"chapter":42},{"book":3,"chapter":44},{"book":3,"chapter":44},{"book":3,"chapter":45},{"book":3,"chapter":45},{"book":3,"chapter":45},{"book":3,"chapter":47},{"book":3,"chapter":61},{"book":3,"chapter":61},{"book":3,"chapter":62},{"book":3,"chapter":63},{"book":3,"chapter":64},{"book":3,"chapter":65},{"book":3,"chapter":88},{"book":3,"chapter":91},{"book":3,"chapter":91},{"book":3,"chapter":91},{"book":3,"chapter":97},{"book":3,"chapter":107},{"book":3,"chapter":126},{"book":3,"chapter":129},{"book":3,"chapter":130},{"book":3,"chapter":132},{"book":3,"chapter":139},{"book":3,"chapter":140},{"book":3,"chapter":160},{"book":4,"chapter":42},{"book":4,"chapter":42},{"book":4,"chapter":43},{"book":4,"chapter":43},{"book":4,"chapter":45},{"book":4,"chapter":45},{"book":4,"chapter":53},{"book":4,"chapter":141},{"book":4,"chapter":141},{"book":4,"chapter":152},{"book":4,"chapter":159},{"book":4,"chapter":159},{"book":4,"chapter":159},{"book":4,"chapter":159},{"book":4,"chapter":160},{"book":4,"chapter":165},{"book":4,"chapter":166},{"book":4,"chapter":167},{"book":4,"chapter":168},{"book":4,"chapter":169},{"book":4,"chapter":180},{"book":4,"chapter":180},{"book":4,"chapter":186},{"book":4,"chapter":186},{"book":4,"chapter":204},{"book":6,"chapter":7},{"book":6,"chapter":54},{"book":6,"chapter":55},{"book":6,"chapter":55},{"book":6,"chapter":60},{"book":7,"chapter":1},{"book":7,"chapter":2},{"book":7,"chapter":4},{"book":7,"chapter":4},{"book":7,"chapter":5},{"book":7,"chapter":5},{"book":7,"chapter":7},{"book":7,"chapter":7},{"book":7,"chapter":8},{"book":7,"chapter":19},{"book":7,"chapter":25},{"book":7,"chapter":34},{"book":7,"chapter":63},{"book":7,"chapter":69},{"book":7,"chapter":69},{"book":7,"chapter":89},{"book":7,"chapter":89},{"book":7,"chapter":91},{"book":7,"chapter":97}]},"981506":{"id":"981506","name":"Arabia","lat":27.5,"lng":32.5,"pleiadesUri":"http://pleiades.stoa.org/places/981506","placeType":"province","isEthnic":false,"occurrences":[{"book":1,"chapter":199},{"book":3,"chapter":9},{"book":3,"chapter":106},{"book":3,"chapter":109},{"book":3,"chapter":113}]},"981507":{"id":"981507","name":"Armenia","lat":37.5,"lng":42.5,"pleiadesUri":"http://pleiades.stoa.org/places/981507","placeType":"province","isEthnic":false,"occurrences":[{"book":1,"chapter":180},{"book":1,"chapter":194},{"book":1,"chapter":194},{"book":1,"chapter":195},{"book":3,"chapter":93},{"book":5,"chapter":52},{"book":5,"chapter":52},{"book":5,"chapter":52}]},"981526":{"id":"981526","name":"Hellespontus","lat":40.346685,"lng":26.699162,"pleiadesUri":"http://pleiades.stoa.org/places/981526","placeType":"province","isEthnic":false,"occurrences":[{"book":1,"chapter":57},{"book":5,"chapter":103},{"book":5,"chapter":118},{"book":5,"chapter":122}]},"981542":{"id":"981542","name":"Paphlagonia","lat":42.5,"lng":32.5,"pleiadesUri":"http://pleiades.stoa.org/places/981542","placeType":"province","isEthnic":false,"occurrences":[{"book":1,"chapter":6}]},"981543":{"id":"981543","name":"Phrygia","lat":37.5,"lng":32.5,"pleiadesUri":"http://pleiades.stoa.org/places/981543","placeType":"province","isEthnic":false,"occurrences":[{"book":1,"chapter":14},{"book":1,"chapter":35}]},"981550":{"id":"981550","name":"Syria (Roman imperial province)","lat":37.5,"lng":37.5,"pleiadesUri":"http://pleiades.stoa.org/places/981550","placeType":"province","isEthnic":false,"occurrences":[{"book":1,"chapter":105}]},"991370":{"id":"991370","name":"Rhodope","lat":42.5,"lng":22.5,"pleiadesUri":"http://pleiades.stoa.org/places/991370","placeType":"province","isEthnic":false,"occurrences":[{"book":4,"chapter":49}]},"991375":{"id":"991375","name":"Libya Superior","lat":28.91884175132798,"lng":22.08409203276879,"pleiadesUri":"http://pleiades.stoa.org/places/991375","placeType":"province","isEthnic":false,"occurrences":[{"book":2,"chapter":10},{"book":2,"chapter":13},{"book":2,"chapter":16},{"book":2,"chapter":17},{"book":2,"chapter":18},{"book":2,"chapter":19},{"book":2,"chapter":22},{"book":2,"chapter":23},{"book":2,"chapter":24},{"book":2,"chapter":25},{"book":2,"chapter":25},{"book":2,"chapter":28},{"book":2,"chapter":31},{"book":2,"chapter":32},{"book":2,"chapter":34},{"book":2,"chapter":35},{"book":2,"chapter":35},{"book":2,"chapter":55},{"book":2,"chapter":56},{"book":2,"chapter":57},{"book":2,"chapter":65},{"book":2,"chapter":120},{"book":4,"chapter":41},{"book":4,"chapter":42},{"book":4,"chapter":42},{"book":4,"chapter":42},{"book":4,"chapter":42},{"book":4,"chapter":43},{"book":4,"chapter":43},{"book":4,"chapter":45},{"book":4,"chapter":45},{"book":4,"chapter":145},{"book":4,"chapter":150},{"book":4,"chapter":151},{"book":4,"chapter":153},{"book":4,"chapter":155},{"book":4,"chapter":155},{"book":4,"chapter":155},{"book":4,"chapter":156},{"book":4,"chapter":157},{"book":4,"chapter":157},{"book":4,"chapter":159},{"book":4,"chapter":160},{"book":4,"chapter":167},{"book":4,"chapter":176},{"book":4,"chapter":179},{"book":4,"chapter":185},{"book":4,"chapter":192},{"book":4,"chapter":194},{"book":4,"chapter":196},{"book":4,"chapter":198},{"book":4,"chapter":198},{"book":4,"chapter":199},{"book":4,"chapter":204}]},"991379":{"id":"991379","name":"Scythia","lat":42.5,"lng":27.5,"pleiadesUri":"http://pleiades.stoa.org/places/991379","placeType":"province","isEthnic":false,"occurrences":[{"book":4,"chapter":1},{"book":4,"chapter":1},{"book":4,"chapter":2},{"book":4,"chapter":3},{"book":4,"chapter":4},{"book":4,"chapter":5},{"book":4,"chapter":7},{"book":4,"chapter":8},{"book":4,"chapter":11},{"book":4,"chapter":11},{"book":4,"chapter":11},{"book":4,"chapter":12},{"book":4,"chapter":12},{"book":4,"chapter":13},{"book":4,"chapter":17},{"book":4,"chapter":18},{"book":4,"chapter":19},{"book":4,"chapter":20},{"book":4,"chapter":23},{"book":4,"chapter":23},{"book":4,"chapter":24},{"book":4,"chapter":27},{"book":4,"chapter":28},{"book":4,"chapter":31},{"book":4,"chapter":32},{"book":4,"chapter":48},{"book":4,"chapter":49},{"book":4,"chapter":52},{"book":4,"chapter":53},{"book":4,"chapter":61},{"book":4,"chapter":64},{"book":4,"chapter":70},{"book":4,"chapter":75},{"book":4,"chapter":76},{"book":4,"chapter":76},{"book":4,"chapter":77},{"book":4,"chapter":78},{"book":4,"chapter":78},{"book":4,"chapter":99},{"book":4,"chapter":99},{"book":4,"chapter":99},{"book":4,"chapter":101},{"book":4,"chapter":101},{"book":4,"chapter":105},{"book":4,"chapter":107},{"book":4,"chapter":108},{"book":4,"chapter":109},{"book":4,"chapter":117},{"book":4,"chapter":118},{"book":4,"chapter":123},{"book":4,"chapter":125},{"book":4,"chapter":126},{"book":4,"chapter":127},{"book":4,"chapter":128},{"book":4,"chapter":131},{"book":4,"chapter":139}]},"991381":{"id":"991381","name":"Caria","lat":37.213163833551015,"lng":28.088996902733474,"pleiadesUri":"http://pleiades.stoa.org/places/991381","placeType":"province","isEthnic":true,"occurrences":[{"book":1,"chapter":29},{"book":1,"chapter":92},{"book":1,"chapter":142},{"book":1,"chapter":146},{"book":1,"chapter":171},{"book":1,"chapter":171},{"book":1,"chapter":171},{"book":1,"chapter":171},{"book":1,"chapter":171},{"book":1,"chapter":171},{"book":1,"chapter":171},{"book":1,"chapter":171},{"book":1,"chapter":172},{"book":1,"chapter":172},{"book":1,"chapter":172},{"book":1,"chapter":172},{"book":1,"chapter":172},{"book":1,"chapter":173},{"book":1,"chapter":174},{"book":1,"chapter":176},{"book":2,"chapter":62},{"book":2,"chapter":152},{"book":2,"chapter":153},{"book":2,"chapter":154},{"book":2,"chapter":154},{"book":2,"chapter":155},{"book":2,"chapter":163},{"book":3,"chapter":11},{"book":3,"chapter":89},{"book":5,"chapter":66},{"book":5,"chapter":66},{"book":5,"chapter":88},{"book":5,"chapter":103},{"book":5,"chapter":111},{"book":5,"chapter":112},{"book":5,"chapter":117},{"book":5,"chapter":118},{"book":5,"chapter":118},{"book":5,"chapter":118},{"book":5,"chapter":118},{"book":5,"chapter":119},{"book":5,"chapter":119},{"book":5,"chapter":119},{"book":5,"chapter":119},{"book":5,"chapter":120},{"book":5,"chapter":121},{"book":5,"chapter":122},{"book":6,"chapter":21},{"book":6,"chapter":25}]},"991385":{"id":"991385","name":"Lydia (province)","lat":37.5,"lng":27.5,"pleiadesUri":"http://pleiades.stoa.org/places/991385","placeType":"province","isEthnic":true,"occurrences":[{"book":1,"chapter":10},{"book":1,"chapter":11},{"book":1,"chapter":13},{"book":1,"chapter":13},{"book":1,"chapter":13},{"book":1,"chapter":18},{"book":1,"chapter":22},{"book":1,"chapter":27},{"book":1,"chapter":27},{"book":1,"chapter":28},{"book":1,"chapter":29},{"book":1,"chapter":35},{"book":1,"chapter":36},{"book":1,"chapter":45},{"book":1,"chapter":47},{"book":1,"chapter":47},{"book":1,"chapter":47},{"book":1,"chapter":48},{"book":1,"chapter":49},{"book":1,"chapter":53},{"book":1,"chapter":53},{"book":1,"chapter":53},{"book":1,"chapter":54},{"book":1,"chapter":69},{"book":1,"chapter":69},{"book":1,"chapter":71},{"book":1,"chapter":71},{"book":1,"chapter":72},{"book":1,"chapter":74},{"book":1,"chapter":74},{"book":1,"chapter":79},{"book":1,"chapter":79},{"book":1,"chapter":80},{"book":1,"chapter":80},{"book":1,"chapter":80},{"book":1,"chapter":80},{"book":1,"chapter":83},{"book":1,"chapter":84},{"book":1,"chapter":86},{"book":1,"chapter":87},{"book":1,"chapter":88},{"book":1,"chapter":90},{"book":1,"chapter":91},{"book":1,"chapter":91},{"book":1,"chapter":92},{"book":1,"chapter":93},{"book":1,"chapter":93},{"book":1,"chapter":93},{"book":1,"chapter":93},{"book":1,"chapter":94},{"book":1,"chapter":94},{"book":1,"chapter":94},{"book":1,"chapter":94},{"book":1,"chapter":94},{"book":1,"chapter":94},{"book":1,"chapter":103},{"book":1,"chapter":141},{"book":1,"chapter":141},{"book":1,"chapter":142},{"book":1,"chapter":153},{"book":1,"chapter":154},{"book":1,"chapter":155},{"book":1,"chapter":155},{"book":1,"chapter":155},{"book":1,"chapter":155},{"book":1,"chapter":156},{"book":1,"chapter":156},{"book":1,"chapter":156},{"book":1,"chapter":157},{"book":1,"chapter":157},{"book":1,"chapter":171}]},"991388":{"id":"991388","name":"Libya Inferior","lat":32.5,"lng":27.5,"pleiadesUri":"http://pleiades.stoa.org/places/991388","placeType":"province","isEthnic":false,"occurrences":[{"book":1,"chapter":46}]},"991402":{"id":"991402","name":"Cappadocia","lat":37.5,"lng":37.5,"pleiadesUri":"http://pleiades.stoa.org/places/991402","placeType":"province","isEthnic":false,"occurrences":[{"book":1,"chapter":71},{"book":1,"chapter":72},{"book":1,"chapter":72},{"book":5,"chapter":49},{"book":5,"chapter":52}]},"991410":{"id":"991410","name":"Phoenice","lat":32.5,"lng":37.5,"pleiadesUri":"http://pleiades.stoa.org/places/991410","placeType":"province","isEthnic":false,"occurrences":[{"book":3,"chapter":5},{"book":3,"chapter":6},{"book":3,"chapter":91},{"book":3,"chapter":136}]},"992073":{"id":"992073","name":"Italia (Diocese)","lat":43.55087092641273,"lng":11.953951787557699,"pleiadesUri":"http://pleiades.stoa.org/places/992073","placeType":"province","isEthnic":false,"occurrences":[{"book":1,"chapter":24},{"book":1,"chapter":24},{"book":1,"chapter":145}]},"1001889":{"id":"1001889","name":"Thrake","lat":42.5,"lng":27.5,"pleiadesUri":"http://pleiades.stoa.org/places/1001889","placeType":"province","isEthnic":true,"occurrences":[{"book":2,"chapter":103},{"book":2,"chapter":135},{"book":2,"chapter":167},{"book":3,"chapter":90},{"book":4,"chapter":34},{"book":4,"chapter":49},{"book":4,"chapter":75},{"book":4,"chapter":80},{"book":4,"chapter":80},{"book":4,"chapter":90},{"book":4,"chapter":93},{"book":4,"chapter":94},{"book":4,"chapter":95},{"book":4,"chapter":95},{"book":4,"chapter":95},{"book":4,"chapter":95},{"book":4,"chapter":95},{"book":4,"chapter":96},{"book":4,"chapter":99},{"book":4,"chapter":105},{"book":4,"chapter":118},{"book":4,"chapter":119},{"book":4,"chapter":143},{"book":5,"chapter":2},{"book":5,"chapter":2},{"book":5,"chapter":3},{"book":5,"chapter":3},{"book":5,"chapter":4},{"book":5,"chapter":6},{"book":5,"chapter":9},{"book":5,"chapter":10},{"book":5,"chapter":14},{"book":5,"chapter":15},{"book":5,"chapter":23},{"book":5,"chapter":24},{"book":5,"chapter":126},{"book":5,"chapter":126},{"book":5,"chapter":126},{"book":6,"chapter":33},{"book":6,"chapter":34},{"book":6,"chapter":40},{"book":6,"chapter":41},{"book":6,"chapter":45},{"book":6,"chapter":95},{"book":7,"chapter":10},{"book":7,"chapter":20},{"book":7,"chapter":74},{"book":7,"chapter":75},{"book":7,"chapter":111},{"book":7,"chapter":115},{"book":7,"chapter":185}]},"1001893":{"id":"1001893","name":"Makedonia I","lat":42.5,"lng":22.5,"pleiadesUri":"http://pleiades.stoa.org/places/1001893","placeType":"province","isEthnic":true,"occurrences":[{"book":1,"chapter":56}]},"1001896":{"id":"1001896","name":"Hellas","lat":37.5,"lng":22.5,"pleiadesUri":"http://pleiades.stoa.org/places/1001896","placeType":"province","isEthnic":false,"occurrences":[{"book":1,"chapter":1},{"book":1,"chapter":1},{"book":1,"chapter":2},{"book":1,"chapter":2},{"book":1,"chapter":2},{"book":1,"chapter":2},{"book":1,"chapter":2},{"book":1,"chapter":3},{"book":1,"chapter":3},{"book":1,"chapter":3},{"book":1,"chapter":4},{"book":1,"chapter":4},{"book":1,"chapter":4},{"book":1,"chapter":4},{"book":1,"chapter":5},{"book":1,"chapter":5},{"book":1,"chapter":6},{"book":1,"chapter":6},{"book":1,"chapter":7},{"book":1,"chapter":26},{"book":1,"chapter":27},{"book":1,"chapter":27},{"book":1,"chapter":29},{"book":1,"chapter":35},{"book":1,"chapter":54},{"book":1,"chapter":56},{"book":1,"chapter":60},{"book":1,"chapter":69},{"book":1,"chapter":70},{"book":1,"chapter":72},{"book":1,"chapter":74},{"book":1,"chapter":75},{"book":1,"chapter":90},{"book":1,"chapter":92},{"book":1,"chapter":94},{"book":1,"chapter":94},{"book":1,"chapter":131},{"book":1,"chapter":133},{"book":1,"chapter":133},{"book":1,"chapter":135},{"book":1,"chapter":149},{"book":1,"chapter":153},{"book":1,"chapter":153},{"book":1,"chapter":163},{"book":1,"chapter":170},{"book":1,"chapter":171},{"book":1,"chapter":174},{"book":1,"chapter":193},{"book":1,"chapter":202},{"book":1,"chapter":203},{"book":1,"chapter":216},{"book":4,"chapter":76}]},"1001913":{"id":"1001913","name":"Pamphylia","lat":37.5,"lng":32.5,"pleiadesUri":"http://pleiades.stoa.org/places/1001913","placeType":"province","isEthnic":true,"occurrences":[{"book":3,"chapter":90}]},"1001940":{"id":"1001940","name":"Palaistine II","lat":32.5,"lng":37.5,"pleiadesUri":"http://pleiades.stoa.org/places/1001940","placeType":"province","isEthnic":false,"occurrences":[{"book":2,"chapter":104},{"book":2,"chapter":106},{"book":3,"chapter":5},{"book":3,"chapter":91}]},"1001943":{"id":"1001943","name":"Aigyptos","lat":32.5,"lng":32.5,"pleiadesUri":"http://pleiades.stoa.org/places/1001943","placeType":"province","isEthnic":false,"occurrences":[{"book":4,"chapter":40},{"book":4,"chapter":42},{"book":4,"chapter":42},{"book":4,"chapter":43},{"book":4,"chapter":43},{"book":4,"chapter":47},{"book":4,"chapter":152},{"book":4,"chapter":159},{"book":4,"chapter":165},{"book":4,"chapter":166},{"book":4,"chapter":168},{"book":4,"chapter":181},{"book":4,"chapter":186},{"book":4,"chapter":200},{"book":4,"chapter":203},{"book":4,"chapter":204},{"book":4,"chapter":205}]},"149334673":{"id":"149334673","name":"Fortunatae Insulae (Canary Islands)","lat":28.098333500000003,"lng":-16.09,"pleiadesUri":"http://pleiades.stoa.org/places/149334673","placeType":"archipelago","isEthnic":false,"occurrences":[{"book":3,"chapter":26}]},"211425281":{"id":"211425281","name":"Kanopische Mndung","lat":31.25,"lng":29.75,"pleiadesUri":"http://pleiades.stoa.org/places/211425281","placeType":"settlement","isEthnic":false,"occurrences":[{"book":2,"chapter":113}]},"324369908":{"id":"324369908","name":"Lake Stymphalia","lat":37.8502198,"lng":22.4677283,"pleiadesUri":"http://pleiades.stoa.org/places/324369908","placeType":"lake","isEthnic":false,"occurrences":[{"book":6,"chapter":76}]},"638356144":{"id":"638356144","name":"Acropolis of Athens","lat":37.971421,"lng":23.726166,"pleiadesUri":"http://pleiades.stoa.org/places/638356144","placeType":"acropolis,architecturalcomplex","isEthnic":false,"occurrences":[{"book":1,"chapter":59},{"book":6,"chapter":105}]},"735295266":{"id":"735295266","name":"Ionian League","lat":38.140913690748434,"lng":26.819866254641568,"pleiadesUri":"http://pleiades.stoa.org/places/735295266","placeType":"region","isEthnic":true,"occurrences":[{"book":1,"chapter":28},{"book":1,"chapter":29},{"book":1,"chapter":74},{"book":1,"chapter":76},{"book":1,"chapter":76},{"book":1,"chapter":141},{"book":1,"chapter":141},{"book":1,"chapter":141},{"book":1,"chapter":141},{"book":1,"chapter":142},{"book":1,"chapter":142},{"book":1,"chapter":142},{"book":1,"chapter":143},{"book":1,"chapter":143},{"book":1,"chapter":143},{"book":1,"chapter":144},{"book":1,"chapter":145},{"book":1,"chapter":145},{"book":1,"chapter":145},{"book":1,"chapter":146},{"book":1,"chapter":146},{"book":1,"chapter":146},{"book":1,"chapter":146},{"book":1,"chapter":146},{"book":1,"chapter":147},{"book":1,"chapter":147},{"book":1,"chapter":147},{"book":1,"chapter":148},{"book":1,"chapter":148},{"book":1,"chapter":148},{"book":1,"chapter":148},{"book":1,"chapter":149},{"book":1,"chapter":150},{"book":1,"chapter":152},{"book":1,"chapter":152},{"book":1,"chapter":152},{"book":1,"chapter":152},{"book":1,"chapter":153},{"book":1,"chapter":153},{"book":1,"chapter":154},{"book":1,"chapter":168}]},"808255902":{"id":"808255902","name":"Santorini Archipelago","lat":36.4,"lng":25.4,"pleiadesUri":"http://pleiades.stoa.org/places/808255902","placeType":"archipelago","isEthnic":false,"occurrences":[{"book":4,"chapter":147},{"book":4,"chapter":148},{"book":4,"chapter":148},{"book":4,"chapter":149}]},"geonames-130758":{"id":"geonames-130758","name":"Iran","lat":32.56323656290414,"lng":54.30402578784763,"pleiadesUri":null,"placeType":"","isEthnic":true,"occurrences":[{"book":1,"chapter":1},{"book":1,"chapter":1},{"book":1,"chapter":2},{"book":1,"chapter":4},{"book":1,"chapter":4},{"book":1,"chapter":4},{"book":1,"chapter":5},{"book":1,"chapter":5},{"book":1,"chapter":5},{"book":1,"chapter":46},{"book":1,"chapter":46},{"book":1,"chapter":47},{"book":1,"chapter":53},{"book":1,"chapter":53},{"book":1,"chapter":53},{"book":1,"chapter":71},{"book":1,"chapter":71},{"book":1,"chapter":71},{"book":1,"chapter":72},{"book":1,"chapter":72},{"book":1,"chapter":75},{"book":1,"chapter":75},{"book":1,"chapter":77},{"book":1,"chapter":77},{"book":1,"chapter":80},{"book":1,"chapter":81},{"book":1,"chapter":84},{"book":1,"chapter":85},{"book":1,"chapter":85},{"book":1,"chapter":86},{"book":1,"chapter":86},{"book":1,"chapter":88},{"book":1,"chapter":89},{"book":1,"chapter":90},{"book":1,"chapter":90},{"book":1,"chapter":91},{"book":1,"chapter":91},{"book":1,"chapter":95},{"book":1,"chapter":95},{"book":1,"chapter":95},{"book":1,"chapter":102},{"book":1,"chapter":107},{"book":1,"chapter":108},{"book":1,"chapter":120},{"book":1,"chapter":120},{"book":1,"chapter":121},{"book":1,"chapter":121},{"book":1,"chapter":123},{"book":1,"chapter":123},{"book":1,"chapter":123},{"book":1,"chapter":124},{"book":1,"chapter":125},{"book":1,"chapter":125},{"book":1,"chapter":125},{"book":1,"chapter":125},{"book":1,"chapter":125},{"book":1,"chapter":125},{"book":1,"chapter":125},{"book":1,"chapter":125},{"book":1,"chapter":126},{"book":1,"chapter":126},{"book":1,"chapter":126},{"book":1,"chapter":126},{"book":1,"chapter":126},{"book":1,"chapter":127},{"book":1,"chapter":127},{"book":1,"chapter":128},{"book":1,"chapter":129},{"book":1,"chapter":130},{"book":1,"chapter":130},{"book":1,"chapter":130},{"book":1,"chapter":131},{"book":1,"chapter":132},{"book":1,"chapter":132},{"book":1,"chapter":132},{"book":1,"chapter":133},{"book":1,"chapter":133},{"book":1,"chapter":135},{"book":1,"chapter":135},{"book":1,"chapter":136},{"book":1,"chapter":137},{"book":1,"chapter":138},{"book":1,"chapter":139},{"book":1,"chapter":140},{"book":1,"chapter":140},{"book":1,"chapter":140},{"book":1,"chapter":141},{"book":1,"chapter":143},{"book":1,"chapter":143},{"book":1,"chapter":149},{"book":1,"chapter":153},{"book":1,"chapter":153},{"book":1,"chapter":156},{"book":1,"chapter":157},{"book":1,"chapter":158},{"book":1,"chapter":159},{"book":1,"chapter":159},{"book":1,"chapter":159},{"book":1,"chapter":160},{"book":1,"chapter":165},{"book":1,"chapter":165},{"book":1,"chapter":191},{"book":1,"chapter":191},{"book":1,"chapter":191},{"book":1,"chapter":192},{"book":1,"chapter":192},{"book":1,"chapter":207},{"book":1,"chapter":207},{"book":1,"chapter":209},{"book":1,"chapter":209},{"book":1,"chapter":210},{"book":1,"chapter":210},{"book":1,"chapter":211},{"book":1,"chapter":211},{"book":1,"chapter":211},{"book":1,"chapter":212},{"book":1,"chapter":212},{"book":1,"chapter":214},{"book":1,"chapter":214},{"book":2,"chapter":31},{"book":2,"chapter":31},{"book":2,"chapter":99},{"book":2,"chapter":99},{"book":2,"chapter":110},{"book":2,"chapter":158},{"book":2,"chapter":167},{"book":3,"chapter":1},{"book":3,"chapter":1},{"book":3,"chapter":2},{"book":3,"chapter":2},{"book":3,"chapter":3},{"book":3,"chapter":4},{"book":3,"chapter":7},{"book":3,"chapter":11},{"book":3,"chapter":12},{"book":3,"chapter":12},{"book":3,"chapter":12},{"book":3,"chapter":12},{"book":3,"chapter":13},{"book":3,"chapter":14},{"book":3,"chapter":15},{"book":3,"chapter":15},{"book":3,"chapter":16},{"book":3,"chapter":16},{"book":3,"chapter":16},{"book":3,"chapter":19},{"book":3,"chapter":19},{"book":3,"chapter":19},{"book":3,"chapter":21},{"book":3,"chapter":21},{"book":3,"chapter":21},{"book":3,"chapter":21},{"book":3,"chapter":22},{"book":3,"chapter":22},{"book":3,"chapter":26},{"book":3,"chapter":30},{"book":3,"chapter":30},{"book":3,"chapter":30},{"book":3,"chapter":30},{"book":3,"chapter":30},{"book":3,"chapter":30},{"book":3,"chapter":31},{"book":3,"chapter":31},{"book":3,"chapter":31},{"book":3,"chapter":31},{"book":3,"chapter":34},{"book":3,"chapter":34},{"book":3,"chapter":34},{"book":3,"chapter":34},{"book":3,"chapter":34},{"book":3,"chapter":34},{"book":3,"chapter":35},{"book":3,"chapter":35},{"book":3,"chapter":35},{"book":3,"chapter":35},{"book":3,"chapter":36},{"book":3,"chapter":37},{"book":3,"chapter":63},{"book":3,"chapter":65},{"book":3,"chapter":65},{"book":3,"chapter":65},{"book":3,"chapter":65},{"book":3,"chapter":65},{"book":3,"chapter":66},{"book":3,"chapter":66},{"book":3,"chapter":67},{"book":3,"chapter":68},{"book":3,"chapter":68},{"book":3,"chapter":69},{"book":3,"chapter":69},{"book":3,"chapter":69},{"book":3,"chapter":70},{"book":3,"chapter":70},{"book":3,"chapter":70},{"book":3,"chapter":73},{"book":3,"chapter":73},{"book":3,"chapter":74},{"book":3,"chapter":74},{"book":3,"chapter":74},{"book":3,"chapter":74},{"book":3,"chapter":74},{"book":3,"chapter":75},{"book":3,"chapter":75},{"book":3,"chapter":75},{"book":3,"chapter":75},{"book":3,"chapter":77},{"book":3,"chapter":79},{"book":3,"chapter":79},{"book":3,"chapter":79},{"book":3,"chapter":80},{"book":3,"chapter":81},{"book":3,"chapter":83},{"book":3,"chapter":83},{"book":3,"chapter":83},{"book":3,"chapter":83},{"book":3,"chapter":84},{"book":3,"chapter":87},{"book":3,"chapter":88},{"book":3,"chapter":88},{"book":3,"chapter":88},{"book":3,"chapter":88},{"book":3,"chapter":88},{"book":3,"chapter":89},{"book":3,"chapter":91},{"book":3,"chapter":97},{"book":3,"chapter":97},{"book":3,"chapter":97},{"book":3,"chapter":97},{"book":3,"chapter":101},{"book":3,"chapter":102},{"book":3,"chapter":105},{"book":3,"chapter":105},{"book":3,"chapter":117},{"book":3,"chapter":117},{"book":3,"chapter":117},{"book":3,"chapter":120},{"book":3,"chapter":120},{"book":3,"chapter":126},{"book":3,"chapter":126},{"book":3,"chapter":127},{"book":3,"chapter":127},{"book":3,"chapter":127},{"book":3,"chapter":127},{"book":3,"chapter":127},{"book":3,"chapter":128},{"book":3,"chapter":128},{"book":3,"chapter":128},{"book":3,"chapter":134},{"book":3,"chapter":134},{"book":3,"chapter":134},{"book":3,"chapter":134},{"book":3,"chapter":135},{"book":3,"chapter":135},{"book":3,"chapter":136},{"book":3,"chapter":136},{"book":3,"chapter":137},{"book":3,"chapter":137},{"book":3,"chapter":137},{"book":3,"chapter":137},{"book":3,"chapter":137},{"book":3,"chapter":137},{"book":3,"chapter":138},{"book":3,"chapter":138},{"book":3,"chapter":144},{"book":3,"chapter":144},{"book":3,"chapter":145},{"book":3,"chapter":145},{"book":3,"chapter":145},{"book":3,"chapter":146},{"book":3,"chapter":146},{"book":3,"chapter":146},{"book":3,"chapter":146},{"book":3,"chapter":146},{"book":3,"chapter":147},{"book":3,"chapter":147},{"book":3,"chapter":147},{"book":3,"chapter":149},{"book":3,"chapter":149},{"book":3,"chapter":151},{"book":3,"chapter":154},{"book":3,"chapter":155},{"book":3,"chapter":155},{"book":3,"chapter":155},{"book":3,"chapter":156},{"book":3,"chapter":157},{"book":3,"chapter":158},{"book":3,"chapter":160},{"book":3,"chapter":160},{"book":3,"chapter":160},{"book":3,"chapter":160},{"book":4,"chapter":37},{"book":4,"chapter":39},{"book":4,"chapter":39},{"book":4,"chapter":40},{"book":4,"chapter":40},{"book":4,"chapter":40},{"book":4,"chapter":84},{"book":4,"chapter":92},{"book":4,"chapter":97},{"book":4,"chapter":118},{"book":4,"chapter":118},{"book":4,"chapter":118},{"book":4,"chapter":119},{"book":4,"chapter":119},{"book":4,"chapter":119},{"book":4,"chapter":119},{"book":4,"chapter":120},{"book":4,"chapter":120},{"book":4,"chapter":120},{"book":4,"chapter":120},{"book":4,"chapter":120},{"book":4,"chapter":122},{"book":4,"chapter":122},{"book":4,"chapter":122},{"book":4,"chapter":123},{"book":4,"chapter":123},{"book":4,"chapter":123},{"book":4,"chapter":124},{"book":4,"chapter":125},{"book":4,"chapter":125},{"book":4,"chapter":125},{"book":4,"chapter":126},{"book":4,"chapter":127},{"book":4,"chapter":128},{"book":4,"chapter":128},{"book":4,"chapter":128},{"book":4,"chapter":129},{"book":4,"chapter":129},{"book":4,"chapter":130},{"book":4,"chapter":130},{"book":4,"chapter":131},{"book":4,"chapter":131},{"book":4,"chapter":132},{"book":4,"chapter":132},{"book":4,"chapter":132},{"book":4,"chapter":133},{"book":4,"chapter":134},{"book":4,"chapter":136},{"book":4,"chapter":136},{"book":4,"chapter":136},{"book":4,"chapter":136},{"book":4,"chapter":136},{"book":4,"chapter":140},{"book":4,"chapter":140},{"book":4,"chapter":140},{"book":4,"chapter":140},{"book":4,"chapter":142},{"book":4,"chapter":142},{"book":4,"chapter":143},{"book":4,"chapter":143},{"book":4,"chapter":144},{"book":4,"chapter":145},{"book":4,"chapter":200},{"book":4,"chapter":200},{"book":4,"chapter":200},{"book":4,"chapter":201},{"book":4,"chapter":201},{"book":4,"chapter":201},{"book":4,"chapter":202},{"book":4,"chapter":202},{"book":4,"chapter":203},{"book":4,"chapter":203},{"book":4,"chapter":203},{"book":4,"chapter":204},{"book":5,"chapter":1},{"book":5,"chapter":2},{"book":5,"chapter":11},{"book":5,"chapter":12},{"book":5,"chapter":15},{"book":5,"chapter":15},{"book":5,"chapter":15},{"book":5,"chapter":15},{"book":5,"chapter":17},{"book":5,"chapter":18},{"book":5,"chapter":18},{"book":5,"chapter":18},{"book":5,"chapter":18},{"book":5,"chapter":18},{"book":5,"chapter":18},{"book":5,"chapter":18},{"book":5,"chapter":19},{"book":5,"chapter":20},{"book":5,"chapter":20},{"book":5,"chapter":20},{"book":5,"chapter":20},{"book":5,"chapter":20},{"book":5,"chapter":21},{"book":5,"chapter":21},{"book":5,"chapter":22},{"book":5,"chapter":27},{"book":5,"chapter":32},{"book":5,"chapter":32},{"book":5,"chapter":33},{"book":5,"chapter":34},{"book":5,"chapter":73},{"book":5,"chapter":73},{"book":5,"chapter":77},{"book":5,"chapter":96},{"book":5,"chapter":97},{"book":5,"chapter":97},{"book":5,"chapter":97},{"book":5,"chapter":98},{"book":5,"chapter":98},{"book":5,"chapter":101},{"book":5,"chapter":102},{"book":5,"chapter":102},{"book":5,"chapter":102},{"book":5,"chapter":108},{"book":5,"chapter":108},{"book":5,"chapter":108},{"book":5,"chapter":109},{"book":5,"chapter":109},{"book":5,"chapter":109},{"book":5,"chapter":110},{"book":5,"chapter":110},{"book":5,"chapter":111},{"book":5,"chapter":113},{"book":5,"chapter":113},{"book":5,"chapter":115},{"book":5,"chapter":116},{"book":5,"chapter":117},{"book":5,"chapter":118},{"book":5,"chapter":118},{"book":5,"chapter":119},{"book":5,"chapter":119},{"book":5,"chapter":120},{"book":5,"chapter":120},{"book":5,"chapter":121},{"book":5,"chapter":121},{"book":5,"chapter":122},{"book":6,"chapter":4},{"book":6,"chapter":4},{"book":6,"chapter":5},{"book":6,"chapter":6},{"book":6,"chapter":7},{"book":6,"chapter":9},{"book":6,"chapter":10},{"book":6,"chapter":11},{"book":6,"chapter":13},{"book":6,"chapter":18},{"book":6,"chapter":19},{"book":6,"chapter":20},{"book":6,"chapter":21},{"book":6,"chapter":24},{"book":6,"chapter":25},{"book":6,"chapter":25},{"book":6,"chapter":28},{"book":6,"chapter":29},{"book":6,"chapter":29},{"book":6,"chapter":29},{"book":6,"chapter":29},{"book":6,"chapter":31},{"book":6,"chapter":31},{"book":6,"chapter":32},{"book":6,"chapter":33},{"book":6,"chapter":33},{"book":6,"chapter":41},{"book":6,"chapter":41},{"book":6,"chapter":42},{"book":6,"chapter":42},{"book":6,"chapter":43},{"book":6,"chapter":43},{"book":6,"chapter":44},{"book":6,"chapter":45},{"book":6,"chapter":49},{"book":6,"chapter":54},{"book":6,"chapter":54},{"book":6,"chapter":59},{"book":6,"chapter":59},{"book":6,"chapter":94},{"book":6,"chapter":96},{"book":6,"chapter":96},{"book":6,"chapter":98},{"book":6,"chapter":99},{"book":6,"chapter":100},{"book":6,"chapter":100},{"book":6,"chapter":101},{"book":6,"chapter":101},{"book":6,"chapter":102},{"book":6,"chapter":112},{"book":6,"chapter":113},{"book":6,"chapter":113},{"book":6,"chapter":114},{"book":6,"chapter":116},{"book":6,"chapter":119},{"book":6,"chapter":121},{"book":6,"chapter":132},{"book":6,"chapter":133},{"book":6,"chapter":133},{"book":7,"chapter":1},{"book":7,"chapter":2},{"book":7,"chapter":3},{"book":7,"chapter":3},{"book":7,"chapter":5},{"book":7,"chapter":5},{"book":7,"chapter":6},{"book":7,"chapter":6},{"book":7,"chapter":8},{"book":7,"chapter":8},{"book":7,"chapter":8},{"book":7,"chapter":8},{"book":7,"chapter":8},{"book":7,"chapter":8},{"book":7,"chapter":9},{"book":7,"chapter":9},{"book":7,"chapter":10},{"book":7,"chapter":10},{"book":7,"chapter":10},{"book":7,"chapter":10},{"book":7,"chapter":11},{"book":7,"chapter":12},{"book":7,"chapter":12},{"book":7,"chapter":13},{"book":7,"chapter":13},{"book":7,"chapter":13},{"book":7,"chapter":14},{"book":7,"chapter":16},{"book":7,"chapter":16},{"book":7,"chapter":18},{"book":7,"chapter":18},{"book":7,"chapter":19},{"book":7,"chapter":22},{"book":7,"chapter":22},{"book":7,"chapter":27},{"book":7,"chapter":29},{"book":7,"chapter":33},{"book":7,"chapter":40},{"book":7,"chapter":40},{"book":7,"chapter":41},{"book":7,"chapter":41},{"book":7,"chapter":41},{"book":7,"chapter":41},{"book":7,"chapter":50},{"book":7,"chapter":51},{"book":7,"chapter":52},{"book":7,"chapter":53},{"book":7,"chapter":53},{"book":7,"chapter":53},{"book":7,"chapter":53},{"book":7,"chapter":54},{"book":7,"chapter":55},{"book":7,"chapter":56},{"book":7,"chapter":59},{"book":7,"chapter":61},{"book":7,"chapter":61},{"book":7,"chapter":61},{"book":7,"chapter":62},{"book":7,"chapter":62},{"book":7,"chapter":62},{"book":7,"chapter":62},{"book":7,"chapter":64},{"book":7,"chapter":72},{"book":7,"chapter":83},{"book":7,"chapter":83},{"book":7,"chapter":84},{"book":7,"chapter":85},{"book":7,"chapter":85},{"book":7,"chapter":85},{"book":7,"chapter":96},{"book":7,"chapter":96},{"book":7,"chapter":103},{"book":7,"chapter":103},{"book":7,"chapter":106},{"book":7,"chapter":107},{"book":7,"chapter":107},{"book":7,"chapter":114},{"book":7,"chapter":114},{"book":7,"chapter":117},{"book":7,"chapter":132},{"book":7,"chapter":135},{"book":7,"chapter":138},{"book":7,"chapter":139},{"book":7,"chapter":139},{"book":7,"chapter":139},{"book":7,"chapter":145},{"book":7,"chapter":147},{"book":7,"chapter":148},{"book":7,"chapter":148},{"book":7,"chapter":149},{"book":7,"chapter":152},{"book":7,"chapter":157},{"book":7,"chapter":157},{"book":7,"chapter":163},{"book":7,"chapter":166},{"book":7,"chapter":168},{"book":7,"chapter":168},{"book":7,"chapter":172},{"book":7,"chapter":172},{"book":7,"chapter":172},{"book":7,"chapter":174},{"book":7,"chapter":177},{"book":7,"chapter":181},{"book":7,"chapter":184},{"book":7,"chapter":188},{"book":7,"chapter":190},{"book":7,"chapter":194},{"book":7,"chapter":202},{"book":7,"chapter":207},{"book":7,"chapter":211},{"book":7,"chapter":211},{"book":7,"chapter":211},{"book":7,"chapter":212},{"book":7,"chapter":214},{"book":7,"chapter":217},{"book":7,"chapter":218},{"book":7,"chapter":218},{"book":7,"chapter":218},{"book":7,"chapter":218},{"book":7,"chapter":219},{"book":7,"chapter":220},{"book":7,"chapter":224},{"book":7,"chapter":224},{"book":7,"chapter":225},{"book":7,"chapter":229},{"book":7,"chapter":233},{"book":7,"chapter":236},{"book":7,"chapter":238},{"book":8,"chapter":3},{"book":8,"chapter":8},{"book":8,"chapter":11},{"book":8,"chapter":13},{"book":8,"chapter":15},{"book":8,"chapter":25},{"book":8,"chapter":26},{"book":8,"chapter":26},{"book":8,"chapter":30},{"book":8,"chapter":30},{"book":8,"chapter":30},{"book":8,"chapter":31},{"book":8,"chapter":34},{"book":8,"chapter":35},{"book":8,"chapter":46},{"book":8,"chapter":52},{"book":8,"chapter":53},{"book":8,"chapter":53},{"book":8,"chapter":67},{"book":8,"chapter":76},{"book":8,"chapter":76},{"book":8,"chapter":76},{"book":8,"chapter":85},{"book":8,"chapter":86},{"book":8,"chapter":89},{"book":8,"chapter":90},{"book":8,"chapter":92},{"book":8,"chapter":92},{"book":8,"chapter":96},{"book":8,"chapter":98},{"book":8,"chapter":99},{"book":8,"chapter":100},{"book":8,"chapter":100},{"book":8,"chapter":100},{"book":8,"chapter":100},{"book":8,"chapter":100},{"book":8,"chapter":101},{"book":8,"chapter":101},{"book":8,"chapter":101},{"book":8,"chapter":106},{"book":8,"chapter":108},{"book":8,"chapter":108},{"book":8,"chapter":109},{"book":8,"chapter":109},{"book":8,"chapter":112},{"book":8,"chapter":113},{"book":8,"chapter":113},{"book":8,"chapter":113},{"book":8,"chapter":113},{"book":8,"chapter":116},{"book":8,"chapter":117},{"book":8,"chapter":118},{"book":8,"chapter":118},{"book":8,"chapter":119},{"book":8,"chapter":119},{"book":8,"chapter":119},{"book":8,"chapter":119},{"book":8,"chapter":126},{"book":8,"chapter":126},{"book":8,"chapter":129},{"book":8,"chapter":129},{"book":8,"chapter":130},{"book":8,"chapter":130},{"book":8,"chapter":136},{"book":8,"chapter":136},{"book":8,"chapter":136},{"book":8,"chapter":141},{"book":8,"chapter":141},{"book":8,"chapter":144},{"book":9,"chapter":6},{"book":9,"chapter":7},{"book":9,"chapter":7},{"book":9,"chapter":7},{"book":9,"chapter":8},{"book":9,"chapter":9},{"book":9,"chapter":9},{"book":9,"chapter":10},{"book":9,"chapter":11},{"book":9,"chapter":15},{"book":9,"chapter":15},{"book":9,"chapter":16},{"book":9,"chapter":16},{"book":9,"chapter":16},{"book":9,"chapter":16},{"book":9,"chapter":16},{"book":9,"chapter":16},{"book":9,"chapter":16},{"book":9,"chapter":16},{"book":9,"chapter":16},{"book":9,"chapter":17},{"book":9,"chapter":17},{"book":9,"chapter":17},{"book":9,"chapter":17},{"book":9,"chapter":20},{"book":9,"chapter":21},{"book":9,"chapter":27},{"book":9,"chapter":31},{"book":9,"chapter":31},{"book":9,"chapter":31},{"book":9,"chapter":31},{"book":9,"chapter":31},{"book":9,"chapter":33},{"book":9,"chapter":38},{"book":9,"chapter":39},{"book":9,"chapter":40},{"book":9,"chapter":40},{"book":9,"chapter":41},{"book":9,"chapter":42},{"book":9,"chapter":42},{"book":9,"chapter":42},{"book":9,"chapter":42},{"book":9,"chapter":43},{"book":9,"chapter":43},{"book":9,"chapter":44},{"book":9,"chapter":46},{"book":9,"chapter":46},{"book":9,"chapter":46},{"book":9,"chapter":47},{"book":9,"chapter":48},{"book":9,"chapter":51},{"book":9,"chapter":51},{"book":9,"chapter":57},{"book":9,"chapter":58},{"book":9,"chapter":59},{"book":9,"chapter":59},{"book":9,"chapter":59},{"book":9,"chapter":61},{"book":9,"chapter":62},{"book":9,"chapter":62},{"book":9,"chapter":62},{"book":9,"chapter":63},{"book":9,"chapter":63},{"book":9,"chapter":64},{"book":9,"chapter":65},{"book":9,"chapter":65},{"book":9,"chapter":66},{"book":9,"chapter":66},{"book":9,"chapter":67},{"book":9,"chapter":67},{"book":9,"chapter":68},{"book":9,"chapter":68},{"book":9,"chapter":70},{"book":9,"chapter":71},{"book":9,"chapter":76},{"book":9,"chapter":76},{"book":9,"chapter":76},{"book":9,"chapter":81},{"book":9,"chapter":86},{"book":9,"chapter":87},{"book":9,"chapter":90},{"book":9,"chapter":90},{"book":9,"chapter":90},{"book":9,"chapter":90},{"book":9,"chapter":90},{"book":9,"chapter":96},{"book":9,"chapter":96},{"book":9,"chapter":98},{"book":9,"chapter":99},{"book":9,"chapter":99},{"book":9,"chapter":101},{"book":9,"chapter":102},{"book":9,"chapter":102},{"book":9,"chapter":102},{"book":9,"chapter":102},{"book":9,"chapter":103},{"book":9,"chapter":104},{"book":9,"chapter":104},{"book":9,"chapter":104},{"book":9,"chapter":104},{"book":9,"chapter":105},{"book":9,"chapter":106},{"book":9,"chapter":106},{"book":9,"chapter":107},{"book":9,"chapter":110},{"book":9,"chapter":110},{"book":9,"chapter":115},{"book":9,"chapter":115},{"book":9,"chapter":116},{"book":9,"chapter":116},{"book":9,"chapter":118},{"book":9,"chapter":122},{"book":9,"chapter":122},{"book":9,"chapter":122}]},"geonames-735731":{"id":"geonames-735731","name":"Kimmria","lat":41.14788,"lng":24.93869,"pleiadesUri":null,"placeType":"","isEthnic":true,"occurrences":[{"book":1,"chapter":15},{"book":1,"chapter":16},{"book":1,"chapter":103}]},"hestia-clazomenians":{"id":"hestia-clazomenians","name":"Klazomenai (earlier)","lat":38.37322,"lng":26.78715,"pleiadesUri":null,"placeType":"settlement","isEthnic":true,"occurrences":[{"book":1,"chapter":51}]},"geonames-256866":{"id":"geonames-256866","name":"Mytilene","lat":39.10772,"lng":26.55529,"pleiadesUri":null,"placeType":"","isEthnic":false,"occurrences":[{"book":1,"chapter":160},{"book":5,"chapter":12},{"book":5,"chapter":37},{"book":5,"chapter":95}]},"hestia-cataracts":{"id":"hestia-cataracts","name":"Cataracta Quarta","lat":17.677,"lng":33.97,"pleiadesUri":null,"placeType":"rapid","isEthnic":false,"occurrences":[{"book":2,"chapter":18},{"book":2,"chapter":18}]},"hestia-pyrene":{"id":"hestia-pyrene","name":"Heuneburg","lat":48.094722,"lng":9.411944,"pleiadesUri":null,"placeType":"settlement","isEthnic":false,"occurrences":[{"book":2,"chapter":34}]},"geonames-255638":{"id":"geonames-255638","name":"Pelasga","lat":38.94813,"lng":22.8398,"pleiadesUri":null,"placeType":"","isEthnic":false,"occurrences":[{"book":2,"chapter":57}]},"geonames-390903":{"id":"geonames-390903","name":"Greece","lat":39.04697922405934,"lng":22.97947876378841,"pleiadesUri":null,"placeType":"","isEthnic":true,"occurrences":[{"book":2,"chapter":91},{"book":2,"chapter":92},{"book":2,"chapter":92},{"book":2,"chapter":135},{"book":2,"chapter":136},{"book":3,"chapter":6},{"book":3,"chapter":11},{"book":3,"chapter":25},{"book":3,"chapter":25},{"book":3,"chapter":26},{"book":3,"chapter":27},{"book":3,"chapter":32},{"book":3,"chapter":32},{"book":3,"chapter":38},{"book":3,"chapter":38},{"book":3,"chapter":60},{"book":3,"chapter":80},{"book":3,"chapter":102},{"book":3,"chapter":103},{"book":3,"chapter":104},{"book":3,"chapter":106},{"book":3,"chapter":107},{"book":3,"chapter":115},{"book":3,"chapter":122},{"book":3,"chapter":122},{"book":3,"chapter":125},{"book":3,"chapter":130},{"book":3,"chapter":130},{"book":3,"chapter":131},{"book":3,"chapter":132},{"book":3,"chapter":132},{"book":3,"chapter":134},{"book":3,"chapter":134},{"book":3,"chapter":134},{"book":3,"chapter":135},{"book":3,"chapter":135},{"book":3,"chapter":136},{"book":3,"chapter":137},{"book":3,"chapter":138},{"book":3,"chapter":138},{"book":3,"chapter":139},{"book":3,"chapter":139},{"book":3,"chapter":140},{"book":3,"chapter":140},{"book":4,"chapter":7},{"book":4,"chapter":8},{"book":4,"chapter":8},{"book":4,"chapter":8},{"book":4,"chapter":11},{"book":4,"chapter":12},{"book":4,"chapter":13},{"book":4,"chapter":15},{"book":4,"chapter":17},{"book":4,"chapter":18},{"book":4,"chapter":24},{"book":4,"chapter":26},{"book":4,"chapter":33},{"book":4,"chapter":45},{"book":4,"chapter":46},{"book":4,"chapter":48},{"book":4,"chapter":52},{"book":4,"chapter":53},{"book":4,"chapter":53},{"book":4,"chapter":75},{"book":4,"chapter":76},{"book":4,"chapter":77},{"book":4,"chapter":77},{"book":4,"chapter":78},{"book":4,"chapter":78},{"book":4,"chapter":78},{"book":4,"chapter":78},{"book":4,"chapter":78},{"book":4,"chapter":78},{"book":4,"chapter":78},{"book":4,"chapter":78},{"book":4,"chapter":79},{"book":4,"chapter":85},{"book":4,"chapter":87},{"book":4,"chapter":95},{"book":4,"chapter":95},{"book":4,"chapter":95},{"book":4,"chapter":96},{"book":4,"chapter":103},{"book":4,"chapter":105},{"book":4,"chapter":108},{"book":4,"chapter":108},{"book":4,"chapter":108},{"book":4,"chapter":109},{"book":4,"chapter":109},{"book":4,"chapter":110},{"book":4,"chapter":143},{"book":4,"chapter":152},{"book":4,"chapter":155},{"book":4,"chapter":158},{"book":4,"chapter":158},{"book":4,"chapter":158},{"book":4,"chapter":158},{"book":4,"chapter":159},{"book":4,"chapter":159},{"book":4,"chapter":159},{"book":4,"chapter":179},{"book":4,"chapter":180},{"book":4,"chapter":180},{"book":4,"chapter":180},{"book":4,"chapter":189},{"book":4,"chapter":189},{"book":4,"chapter":190},{"book":4,"chapter":190},{"book":4,"chapter":198},{"book":4,"chapter":203},{"book":5,"chapter":20},{"book":5,"chapter":22},{"book":5,"chapter":22},{"book":5,"chapter":22},{"book":5,"chapter":22},{"book":5,"chapter":23},{"book":5,"chapter":23},{"book":5,"chapter":24},{"book":5,"chapter":28},{"book":5,"chapter":32},{"book":5,"chapter":47},{"book":5,"chapter":49},{"book":5,"chapter":49},{"book":5,"chapter":58},{"book":5,"chapter":58},{"book":5,"chapter":58},{"book":5,"chapter":58},{"book":5,"chapter":88},{"book":5,"chapter":92},{"book":5,"chapter":93},{"book":5,"chapter":94},{"book":5,"chapter":97},{"book":5,"chapter":102},{"book":6,"chapter":9},{"book":6,"chapter":18},{"book":6,"chapter":24},{"book":6,"chapter":29},{"book":6,"chapter":29},{"book":6,"chapter":29},{"book":6,"chapter":43},{"book":6,"chapter":44},{"book":6,"chapter":48},{"book":6,"chapter":48},{"book":6,"chapter":48},{"book":6,"chapter":49},{"book":6,"chapter":50},{"book":6,"chapter":53},{"book":6,"chapter":53},{"book":6,"chapter":53},{"book":6,"chapter":53},{"book":6,"chapter":53},{"book":6,"chapter":53},{"book":6,"chapter":54},{"book":6,"chapter":54},{"book":6,"chapter":55},{"book":6,"chapter":61},{"book":6,"chapter":75},{"book":6,"chapter":86},{"book":6,"chapter":86},{"book":6,"chapter":94},{"book":6,"chapter":98},{"book":6,"chapter":98},{"book":6,"chapter":98},{"book":6,"chapter":106},{"book":6,"chapter":106},{"book":6,"chapter":109},{"book":6,"chapter":109},{"book":6,"chapter":112},{"book":6,"chapter":113},{"book":6,"chapter":122},{"book":6,"chapter":126},{"book":6,"chapter":126},{"book":6,"chapter":126},{"book":6,"chapter":126},{"book":6,"chapter":127},{"book":6,"chapter":127},{"book":6,"chapter":131},{"book":6,"chapter":134},{"book":6,"chapter":137},{"book":6,"chapter":139},{"book":7,"chapter":1},{"book":7,"chapter":1},{"book":7,"chapter":5},{"book":7,"chapter":6},{"book":7,"chapter":6},{"book":7,"chapter":7},{"book":7,"chapter":9},{"book":7,"chapter":9},{"book":7,"chapter":9},{"book":7,"chapter":9},{"book":7,"chapter":10},{"book":7,"chapter":10},{"book":7,"chapter":10},{"book":7,"chapter":10},{"book":7,"chapter":10},{"book":7,"chapter":11},{"book":7,"chapter":11},{"book":7,"chapter":11},{"book":7,"chapter":12},{"book":7,"chapter":12},{"book":7,"chapter":13},{"book":7,"chapter":15},{"book":7,"chapter":16},{"book":7,"chapter":17},{"book":7,"chapter":18},{"book":7,"chapter":21},{"book":7,"chapter":22},{"book":7,"chapter":25},{"book":7,"chapter":28},{"book":7,"chapter":37},{"book":7,"chapter":37},{"book":7,"chapter":48},{"book":7,"chapter":61},{"book":7,"chapter":63},{"book":7,"chapter":74},{"book":7,"chapter":89},{"book":7,"chapter":90},{"book":7,"chapter":91},{"book":7,"chapter":93},{"book":7,"chapter":93},{"book":7,"chapter":94},{"book":7,"chapter":94},{"book":7,"chapter":95},{"book":7,"chapter":95},{"book":7,"chapter":95},{"book":7,"chapter":95},{"book":7,"chapter":99},{"book":7,"chapter":101},{"book":7,"chapter":101},{"book":7,"chapter":101},{"book":7,"chapter":101},{"book":7,"chapter":101},{"book":7,"chapter":102},{"book":7,"chapter":102},{"book":7,"chapter":102},{"book":7,"chapter":102},{"book":7,"chapter":103},{"book":7,"chapter":103},{"book":7,"chapter":103},{"book":7,"chapter":103},{"book":7,"chapter":104},{"book":7,"chapter":106},{"book":7,"chapter":107},{"book":7,"chapter":109},{"book":7,"chapter":110},{"book":7,"chapter":115},{"book":7,"chapter":115},{"book":7,"chapter":118},{"book":7,"chapter":122},{"book":7,"chapter":130},{"book":7,"chapter":132},{"book":7,"chapter":132},{"book":7,"chapter":133},{"book":7,"chapter":138},{"book":7,"chapter":138},{"book":7,"chapter":139},{"book":7,"chapter":139},{"book":7,"chapter":139},{"book":7,"chapter":139},{"book":7,"chapter":139},{"book":7,"chapter":144},{"book":7,"chapter":144},{"book":7,"chapter":145},{"book":7,"chapter":145},{"book":7,"chapter":145},{"book":7,"chapter":145},{"book":7,"chapter":146},{"book":7,"chapter":147},{"book":7,"chapter":147},{"book":7,"chapter":148},{"book":7,"chapter":148},{"book":7,"chapter":149},{"book":7,"chapter":150},{"book":7,"chapter":150},{"book":7,"chapter":151},{"book":7,"chapter":157},{"book":7,"chapter":157},{"book":7,"chapter":157},{"book":7,"chapter":157},{"book":7,"chapter":157},{"book":7,"chapter":157},{"book":7,"chapter":157},{"book":7,"chapter":158},{"book":7,"chapter":158},{"book":7,"chapter":161},{"book":7,"chapter":161},{"book":7,"chapter":161},{"book":7,"chapter":162},{"book":7,"chapter":162},{"book":7,"chapter":163},{"book":7,"chapter":163},{"book":7,"chapter":163},{"book":7,"chapter":164},{"book":7,"chapter":165},{"book":7,"chapter":166},{"book":7,"chapter":166},{"book":7,"chapter":167},{"book":7,"chapter":168},{"book":7,"chapter":168},{"book":7,"chapter":168},{"book":7,"chapter":168},{"book":7,"chapter":168},{"book":7,"chapter":168},{"book":7,"chapter":169},{"book":7,"chapter":169},{"book":7,"chapter":170},{"book":7,"chapter":170},{"book":7,"chapter":171},{"book":7,"chapter":171},{"book":7,"chapter":172},{"book":7,"chapter":172},{"book":7,"chapter":172},{"book":7,"chapter":173},{"book":7,"chapter":173},{"book":7,"chapter":173},{"book":7,"chapter":173},{"book":7,"chapter":175},{"book":7,"chapter":175},{"book":7,"chapter":176},{"book":7,"chapter":176},{"book":7,"chapter":176},{"book":7,"chapter":177},{"book":7,"chapter":178},{"book":7,"chapter":178},{"book":7,"chapter":178},{"book":7,"chapter":179},{"book":7,"chapter":180},{"book":7,"chapter":183},{"book":7,"chapter":185},{"book":7,"chapter":194},{"book":7,"chapter":194},{"book":7,"chapter":194},{"book":7,"chapter":195},{"book":7,"chapter":196},{"book":7,"chapter":209},{"book":7,"chapter":234},{"book":7,"chapter":235},{"book":7,"chapter":236},{"book":7,"chapter":239},{"book":7,"chapter":239},{"book":8,"chapter":1},{"book":8,"chapter":3},{"book":8,"chapter":3},{"book":8,"chapter":4},{"book":8,"chapter":4},{"book":8,"chapter":5},{"book":8,"chapter":6},{"book":8,"chapter":6},{"book":8,"chapter":6},{"book":8,"chapter":7},{"book":8,"chapter":7},{"book":8,"chapter":8},{"book":8,"chapter":8},{"book":8,"chapter":9},{"book":8,"chapter":10},{"book":8,"chapter":10},{"book":8,"chapter":10},{"book":8,"chapter":10},{"book":8,"chapter":10},{"book":8,"chapter":11},{"book":8,"chapter":11},{"book":8,"chapter":11},{"book":8,"chapter":11},{"book":8,"chapter":14},{"book":8,"chapter":15},{"book":8,"chapter":15},{"book":8,"chapter":15},{"book":8,"chapter":16},{"book":8,"chapter":16},{"book":8,"chapter":17},{"book":8,"chapter":18},{"book":8,"chapter":18},{"book":8,"chapter":18},{"book":8,"chapter":18},{"book":8,"chapter":21},{"book":8,"chapter":21},{"book":8,"chapter":21},{"book":8,"chapter":22},{"book":8,"chapter":22},{"book":8,"chapter":23},{"book":8,"chapter":25},{"book":8,"chapter":25},{"book":8,"chapter":26},{"book":8,"chapter":26},{"book":8,"chapter":29},{"book":8,"chapter":31},{"book":8,"chapter":40},{"book":8,"chapter":42},{"book":8,"chapter":44},{"book":8,"chapter":44},{"book":8,"chapter":46},{"book":8,"chapter":47},{"book":8,"chapter":56},{"book":8,"chapter":57},{"book":8,"chapter":60},{"book":8,"chapter":60},{"book":8,"chapter":62},{"book":8,"chapter":62},{"book":8,"chapter":65},{"book":8,"chapter":67},{"book":8,"chapter":68},{"book":8,"chapter":68},{"book":8,"chapter":70},{"book":8,"chapter":72},{"book":8,"chapter":72},{"book":8,"chapter":75},{"book":8,"chapter":75},{"book":8,"chapter":75},{"book":8,"chapter":76},{"book":8,"chapter":77},{"book":8,"chapter":80},{"book":8,"chapter":81},{"book":8,"chapter":82},{"book":8,"chapter":83},{"book":8,"chapter":84},{"book":8,"chapter":84},{"book":8,"chapter":84},{"book":8,"chapter":85},{"book":8,"chapter":86},{"book":8,"chapter":87},{"book":8,"chapter":87},{"book":8,"chapter":89},{"book":8,"chapter":93},{"book":8,"chapter":94},{"book":8,"chapter":94},{"book":8,"chapter":95},{"book":8,"chapter":96},{"book":8,"chapter":96},{"book":8,"chapter":97},{"book":8,"chapter":97},{"book":8,"chapter":100},{"book":8,"chapter":100},{"book":8,"chapter":100},{"book":8,"chapter":100},{"book":8,"chapter":100},{"book":8,"chapter":100},{"book":8,"chapter":101},{"book":8,"chapter":102},{"book":8,"chapter":102},{"book":8,"chapter":108},{"book":8,"chapter":108},{"book":8,"chapter":108},{"book":8,"chapter":109},{"book":8,"chapter":109},{"book":8,"chapter":110},{"book":8,"chapter":111},{"book":8,"chapter":114},{"book":8,"chapter":115},{"book":8,"chapter":116},{"book":8,"chapter":121},{"book":8,"chapter":122},{"book":8,"chapter":122},{"book":8,"chapter":123},{"book":8,"chapter":124},{"book":8,"chapter":124},{"book":8,"chapter":124},{"book":8,"chapter":130},{"book":8,"chapter":130},{"book":8,"chapter":131},{"book":8,"chapter":132},{"book":8,"chapter":132},{"book":8,"chapter":132},{"book":8,"chapter":133},{"book":8,"chapter":136},{"book":8,"chapter":139},{"book":8,"chapter":142},{"book":8,"chapter":142},{"book":8,"chapter":142},{"book":8,"chapter":144},{"book":8,"chapter":144}]},"geonames-268064":{"id":"geonames-268064","name":"Sidon","lat":33.55993,"lng":35.37564,"pleiadesUri":null,"placeType":"","isEthnic":false,"occurrences":[{"book":2,"chapter":116},{"book":2,"chapter":117},{"book":2,"chapter":117},{"book":2,"chapter":118},{"book":2,"chapter":161}]},"hestia-mares":{"id":"hestia-mares","name":"Kfar-Mares","lat":36.1206,"lng":36.56717,"pleiadesUri":null,"placeType":"","isEthnic":true,"occurrences":[{"book":3,"chapter":94}]},"geonames-675471":{"id":"geonames-675471","name":"Istria","lat":44.56667,"lng":28.71667,"pleiadesUri":null,"placeType":"","isEthnic":false,"occurrences":[{"book":4,"chapter":78}]},"hestia-atlas":{"id":"hestia-atlas","name":"Caprarienses? M.","lat":32.91174,"lng":-0.46744,"pleiadesUri":null,"placeType":"mountain","isEthnic":false,"occurrences":[{"book":4,"chapter":184}]},"hestia-sacred-way":{"id":"hestia-sacred-way","name":"Lakiadai","lat":37.993384,"lng":23.699604,"pleiadesUri":null,"placeType":"settlement","isEthnic":false,"occurrences":[{"book":6,"chapter":34}]},"geonames-3219021":{"id":"geonames-3219021","name":"Dese","lat":45.52962,"lng":12.30363,"pleiadesUri":null,"placeType":"","isEthnic":false,"occurrences":[{"book":6,"chapter":118},{"book":6,"chapter":119}]},"hestia-susa":{"id":"hestia-susa","name":"Mogros/Nigrus (river)","lat":42.04357,"lng":41.81359,"pleiadesUri":null,"placeType":"river","isEthnic":false,"occurrences":[{"book":6,"chapter":119},{"book":6,"chapter":119}]},"hestia-sardis":{"id":"hestia-sardis","name":"Sardis/Hyde?","lat":38.488333,"lng":28.040278,"pleiadesUri":null,"placeType":"settlement","isEthnic":false,"occurrences":[{"book":9,"chapter":3},{"book":9,"chapter":107},{"book":9,"chapter":108},{"book":9,"chapter":108},{"book":9,"chapter":108}]}}')},L1={1:{id:1,title:"Book 1: Clio",chapters:JSON.parse(`[{"id":1,"text":"This is the display of the inquiry of Herodotus of Halicarnassus, so that things done by man not be forgotten in time, and that great and marvelous deeds, some displayed by the Hellenes, some by the barbarians, not lose their glory, including among others what was the cause of their waging war on each other.The Persian learned men say that the Phoenicians were the cause of the dispute. These (they say) came to our seas from the sea which is called Red,1 and having settled in the country which they still occupy, at once began to make long voyages. Among other places to which they carried Egyptian and Assyrian merchandise, they came to Argos, [2] which was at that time preeminent in every way among the people of what is now called Hellas. The Phoenicians came to Argos, and set out their cargo. [3] On the fifth or sixth day after their arrival, when their wares were almost all sold, many women came to the shore and among them especially the daughter of the king, whose name was Io (according to Persians and Greeks alike), the daughter of Inachus. [4] As these stood about the stern of the ship bargaining for the wares they liked, the Phoenicians incited one another to set upon them. Most of the women escaped: Io and others were seized and thrown into the ship, which then sailed away for Egypt.","places":[{"placeId":"599636","name":"Halicarnassus","startOffset":51,"endOffset":64},{"placeId":"geonames-130758","name":"Persian","startOffset":313,"endOffset":320},{"placeId":"678334","name":"Phoenicians","startOffset":346,"endOffset":357},{"placeId":"39290","name":"Red","startOffset":452,"endOffset":455},{"placeId":"981503","name":"Egyptian","startOffset":594,"endOffset":602},{"placeId":"29492","name":"Assyrian","startOffset":607,"endOffset":615},{"placeId":"570106","name":"Argos","startOffset":642,"endOffset":647},{"placeId":"1001896","name":"Hellas","startOffset":739,"endOffset":745},{"placeId":"678334","name":"Phoenicians","startOffset":751,"endOffset":762},{"placeId":"570106","name":"Argos","startOffset":771,"endOffset":776},{"placeId":"geonames-130758","name":"Persians","startOffset":1006,"endOffset":1014},{"placeId":"1001896","name":"Greeks","startOffset":1019,"endOffset":1025},{"placeId":"678334","name":"Phoenicians","startOffset":1147,"endOffset":1158},{"placeId":"981503","name":"Egypt","startOffset":1303,"endOffset":1308}]},{"id":2,"text":"In this way, the Persians say (and not as the Greeks), was how Io came to Egypt, and this, according to them, was the first wrong that was done. Next, according to their story, some Greeks (they cannot say who) landed at Tyre in Phoenicia and carried off the king's daughter Europa. These Greeks must, I suppose, have been Cretans. So far, then, the account between them was balanced. But after this (they say), it was the Greeks who were guilty of the second wrong. [2] They sailed in a long ship to Aea, a city of the Colchians, and to the river Phasis:2 and when they had done the business for which they came, they carried off the king's daughter Medea. [3] When the Colchian king sent a herald to demand reparation for the robbery and restitution of his daughter, the Greeks replied that, as they had been refused reparation for the abduction of the Argive Io, they would not make any to the Colchians.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":17,"endOffset":25},{"placeId":"1001896","name":"Greeks","startOffset":46,"endOffset":52},{"placeId":"766","name":"Egypt","startOffset":74,"endOffset":79},{"placeId":"1001896","name":"Greeks","startOffset":182,"endOffset":188},{"placeId":"678437","name":"Tyre","startOffset":221,"endOffset":225},{"placeId":"678334","name":"Phoenicia","startOffset":229,"endOffset":238},{"placeId":"1001896","name":"Greeks","startOffset":289,"endOffset":295},{"placeId":"589748","name":"Cretans","startOffset":323,"endOffset":330},{"placeId":"1001896","name":"Greeks","startOffset":423,"endOffset":429},{"placeId":"857014","name":"Aea","startOffset":501,"endOffset":504},{"placeId":"874432","name":"Colchians","startOffset":520,"endOffset":529},{"placeId":"863867","name":"Phasis","startOffset":548,"endOffset":554},{"placeId":"863770","name":"Colchian king","startOffset":671,"endOffset":684},{"placeId":"1001896","name":"Greeks","startOffset":773,"endOffset":779},{"placeId":"570106","name":"Argive Io","startOffset":855,"endOffset":864},{"placeId":"874432","name":"Colchians","startOffset":897,"endOffset":906}]},{"id":3,"text":"Then (they say), in the second generation after this, Alexandrus, son of Priam, who had heard this tale, decided to get himself a wife from Hellas by capture; for he was confident that he would not suffer punishment. [2] So he carried off Helen. The Greeks first resolved to send messengers demanding that Helen be restored and atonement made for the seizure; but when this proposal was made, the Trojans pleaded the seizure of Medea, and reminded the Greeks that they asked reparation from others, yet made none themselves, nor gave up the booty when asked.","places":[{"placeId":"1001896","name":"Hellas","startOffset":140,"endOffset":146},{"placeId":"1001896","name":"Greeks","startOffset":250,"endOffset":256},{"placeId":"550595","name":"Trojans","startOffset":397,"endOffset":404},{"placeId":"1001896","name":"Greeks","startOffset":452,"endOffset":458}]},{"id":4,"text":"So far it was a matter of mere seizure on both sides. But after this (the Persians say), the Greeks were very much to blame; for they invaded Asia before the Persians attacked Europe. [2] We think, they say, that it is unjust to carry women off. But to be anxious to avenge rape is foolish: wise men take no notice of such things. For plainly the women would never have been carried away, had they not wanted it themselves. [3] We of Asia did not deign to notice the seizure of our women; but the Greeks, for the sake of a Lacedaemonian woman, recruited a great armada, came to Asia, and destroyed the power of Priam. [4] Ever since then we have regarded Greeks as our enemies. For the Persians claim Asia for their own, and the foreign peoples that inhabit it; Europe and the Greek people they consider to be separate from them.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":74,"endOffset":82},{"placeId":"1001896","name":"Greeks","startOffset":93,"endOffset":99},{"placeId":"geonames-130758","name":"Persians","startOffset":158,"endOffset":166},{"placeId":"1001896","name":"Greeks","startOffset":500,"endOffset":506},{"placeId":"570406","name":"Lacedaemonian woman","startOffset":526,"endOffset":545},{"placeId":"1001896","name":"Greeks","startOffset":658,"endOffset":664},{"placeId":"geonames-130758","name":"Persians","startOffset":690,"endOffset":698},{"placeId":"1001896","name":"Greek people","startOffset":781,"endOffset":793}]},{"id":5,"text":"Such is the Persian account; in their opinion, it was the taking of Troy which began their hatred of the Greeks. [2] But the Phoenicians do not tell the same story about Io as the Persians. They say that they did not carry her off to Egypt by force. She had intercourse in Argos with the captain of the ship. Then, finding herself pregnant, she was ashamed to have her parents know it, and so, lest they discover her condition, she sailed away with the Phoenicians of her own accord. [3]These are the stories of the Persians and the Phoenicians. For my part, I shall not say that this or that story is true, but I shall identify the one who I myself know did the Greeks unjust deeds, and thus proceed with my history, and speak of small and great cities of men alike. [4] For many states that were once great have now become small; and those that were great in my time were small before. Knowing therefore that human prosperity never continues in the same place, I shall mention both alike.","places":[{"placeId":"geonames-130758","name":"Persian","startOffset":12,"endOffset":19},{"placeId":"550595","name":"Troy","startOffset":68,"endOffset":72},{"placeId":"1001896","name":"Greeks","startOffset":105,"endOffset":111},{"placeId":"678334","name":"Phoenicians","startOffset":125,"endOffset":136},{"placeId":"geonames-130758","name":"Persians","startOffset":180,"endOffset":188},{"placeId":"766","name":"Egypt","startOffset":234,"endOffset":239},{"placeId":"570106","name":"Argos","startOffset":273,"endOffset":278},{"placeId":"678334","name":"Phoenicians","startOffset":453,"endOffset":464},{"placeId":"geonames-130758","name":"Persians","startOffset":516,"endOffset":524},{"placeId":"678334","name":"Phoenicians","startOffset":533,"endOffset":544},{"placeId":"1001896","name":"Greeks","startOffset":663,"endOffset":669}]},{"id":6,"text":"Croesus was a Lydian by birth, son of Alyattes, and sovereign of all the nations west of the river Halys, which flows from the south between Syria and Paphlagonia and empties into the sea called Euxine. [2] This Croesus was the first foreigner whom we know who subjugated some Greeks and took tribute from them, and won the friendship of others: the former being the Ionians, the Aeolians, and the Dorians of Asia, and the latter the Lacedaemonians. [3] Before the reign of Croesus, all Greeks were free: for the Cimmerian host which invaded Ionia before his time did not subjugate the cities, but raided and robbed them.","places":[{"placeId":"550701","name":"Lydian","startOffset":14,"endOffset":20},{"placeId":"857148","name":"Halys","startOffset":99,"endOffset":104},{"placeId":"1306","name":"Syria","startOffset":141,"endOffset":146},{"placeId":"981542","name":"Paphlagonia","startOffset":151,"endOffset":162},{"placeId":"1224","name":"Euxine","startOffset":195,"endOffset":201},{"placeId":"1001896","name":"Greeks","startOffset":277,"endOffset":283},{"placeId":"550597","name":"Ionians","startOffset":367,"endOffset":374},{"placeId":"550406","name":"Aeolians","startOffset":380,"endOffset":388},{"placeId":"570685","name":"the Lacedaemonians","startOffset":430,"endOffset":448},{"placeId":"1001896","name":"Greeks","startOffset":487,"endOffset":493},{"placeId":"550597","name":"Ionia","startOffset":542,"endOffset":547}]},{"id":7,"text":"Now the sovereign power that belonged to the descendants of Heracles3 fell to the family of Croesus, called the Mermnadae, in the following way. [2] Candaules, whom the Greeks call Myrsilus, was the ruler of Sardis; he was descended from Alcaeus, son of Heracles; Agron son of Ninus, son of Belus, son of Alcaeus, was the first Heraclid king of Sardis and Candaules son of Myrsus was the last. [3] The kings of this country before Agron were descendants of Lydus, son of Atys, from whom this whole Lydian district got its name; before that it was called the land of the Meii. [4] The Heraclidae, descendants of Heracles and a female slave of Iardanus, received the sovereignty from these and held it, because of an oracle; and they ruled for twenty-two generations, or five hundred and five years, son succeeding father, down to Candaules son of Myrsus.","places":[{"placeId":"1001896","name":"Greeks","startOffset":169,"endOffset":175},{"placeId":"550867","name":"Sardis","startOffset":208,"endOffset":214},{"placeId":"550867","name":"Sardis","startOffset":345,"endOffset":351},{"placeId":"550701","name":"Lydian district","startOffset":498,"endOffset":513},{"placeId":"550701","name":"land of the Meii","startOffset":558,"endOffset":574}]},{"id":8,"text":"This Candaules, then, fell in love with his own wife, so much so that he believed her to be by far the most beautiful woman in the world; and believing this, he praised her beauty beyond measure to Gyges son of Dascylus, who was his favorite among his bodyguard; for it was to Gyges that he entrusted all his most important secrets. [2] After a little while, Candaules, doomed to misfortune, spoke to Gyges thus: Gyges, I do not think that you believe what I say about the beauty of my wife; men trust their ears less than their eyes: so you must see her naked. Gyges protested loudly at this. [3] Master, he said, what an unsound suggestion, that I should see my mistress naked! When a woman's clothes come off, she dispenses with her modesty, too. [4] Men have long ago made wise rules from which one ought to learn; one of these is that one should mind one's own business. As for me, I believe that your queen is the most beautiful of all women, and I ask you not to ask of me what is lawless.","places":[]},{"id":9,"text":"Speaking thus, Gyges resisted: for he was afraid that some evil would come of it for him. But this was Candaules' answer: Courage, Gyges! Do not be afraid of me, that I say this to test you, or of my wife, that you will have any harm from her. I will arrange it so that she shall never know that you have seen her. [2] I will bring you into the chamber where she and I lie and conceal you behind the open door; and after I have entered, my wife too will come to bed. There is a chair standing near the entrance of the room: on this she will lay each article of her clothing as she takes it off, and you will be able to look upon her at your leisure. [3] Then, when she moves from the chair to the bed, turning her back on you, be careful she does not see you going out through the doorway.","places":[]},{"id":10,"text":"As Gyges could not escape, he consented. Candaules, when he judged it to be time for bed, brought Gyges into the chamber; his wife followed presently, and when she had come in and was laying aside her garments, Gyges saw her; [2] when she turned her back upon him to go to bed, he slipped from the room. The woman glimpsed him as he went out, and perceived what her husband had done. But though shamed, she did not cry out or let it be seen that she had perceived anything, for she meant to punish Candaules; [3] since among the Lydians and most of the foreign peoples it is felt as a great shame that even a man be seen naked.","places":[{"placeId":"991385","name":"Lydians","startOffset":529,"endOffset":536}]},{"id":11,"text":"For the present she made no sign and kept quiet. But as soon as it was day, she prepared those of her household whom she saw were most faithful to her, and called Gyges. He, supposing that she knew nothing of what had been done, answered the summons; for he was used to attending the queen whenever she summoned him. [2] When Gyges came, the lady addressed him thus: Now, Gyges, you have two ways before you; decide which you will follow. You must either kill Candaules and take me and the throne of Lydia for your own, or be killed yourself now without more ado; that will prevent you from obeying all Candaules' commands in the future and seeing what you should not see. [3] One of you must die: either he, the contriver of this plot, or you, who have outraged all custom by looking on me uncovered. Gyges stood awhile astonished at this; presently, he begged her not to compel him to such a choice. [4] But when he could not deter her, and saw that dire necessity was truly upon him either to kill his master or himself be killed by others, he chose his own life. Then he asked: Since you force me against my will to kill my master, I would like to know how we are to lay our hands on him. [5] She replied, You shall come at him from the same place where he made you view me naked: attack him in his sleep.","places":[{"placeId":"991385","name":"Lydia","startOffset":501,"endOffset":506}]},{"id":12,"text":"When they had prepared this plot, and night had fallen, Gyges followed the woman into the chamber (for Gyges was not released, nor was there any means of deliverance, but either he or Candaules must die). She gave him a dagger and hid him behind the same door; [2] and presently he stole out and killed Candaules as he slept. Thus he made himself master of the king's wife and sovereignty. He is mentioned in the iambic verses of Archilochus of Parus who lived about the same time.","places":[]},{"id":13,"text":"So he took possession of the sovereign power and was confirmed in it by the Delphic oracle. For when the Lydians took exception to what was done to Candaules, and took up arms, the faction of Gyges came to an agreement with the rest of the people that if the oracle should ordain him king of the Lydians, then he would reign; but if not, then he would return the kingship to the Heraclidae. [2] The oracle did so ordain, and Gyges thus became king. However, the Pythian priestess declared that the Heraclidae would have vengeance on Gyges' posterity in the fifth generation; an utterance to which the Lydians and their kings paid no regard until it was fulfilled.","places":[{"placeId":"540726","name":"Delphic oracle","startOffset":76,"endOffset":90},{"placeId":"991385","name":"Lydians","startOffset":105,"endOffset":112},{"placeId":"991385","name":"Lydians","startOffset":296,"endOffset":303},{"placeId":"540726","name":"oracle","startOffset":399,"endOffset":405},{"placeId":"540726","name":"Pythian priestess","startOffset":462,"endOffset":479},{"placeId":"991385","name":"Lydians","startOffset":601,"endOffset":608}]},{"id":14,"text":"Thus the Mermnadae robbed the Heraclidae of the sovereignty and took it for themselves. Having gotten it, Gyges sent many offerings to Delphi: there are very many silver offerings of his there; and besides the silver, he dedicated a hoard of gold, among which six golden bowls are the offerings especially worthy of mention. [2] These weigh thirty talents4 and stand in the treasury5 of the Corinthians; although in truth it is not the treasury of the Corinthian people but of Cypselus son of Eetion. This Gyges then was the first foreigner whom we know who placed offerings at Delphi after the king of Phrygia, Midas son of Gordias. [3] For Midas too made an offering: namely, the royal seat on which he sat to give judgment, and a marvellous seat it is. It is set in the same place as the bowls of Gyges. This gold and the silver offered by Gyges is called by the Delphians Gygian after its dedicator.","places":[{"placeId":"540726","name":"Delphi","startOffset":135,"endOffset":141},{"placeId":"570182","name":"Corinthian","startOffset":391,"endOffset":401},{"placeId":"570182","name":"Corinthian","startOffset":452,"endOffset":462},{"placeId":"540726","name":"Delphi","startOffset":578,"endOffset":584},{"placeId":"981543","name":"Phrygia","startOffset":603,"endOffset":610},{"placeId":"540726","name":"Delphians","startOffset":866,"endOffset":875}]},{"id":15,"text":"As soon as Gyges came to the throne, he too, like others, led an army into the lands of Miletus and Smyrna; and he took the city of Colophon. But as he did nothing else great in his reign of thirty-eight years, I shall say no more of him, and shall speak instead of Ardys son of Gyges, who succeeded him. He took Priene and invaded the country of Miletus; and it was while he was monarch of Sardis that the Cimmerians, driven from their homes by the nomad Scythians, came into Asia, and took Sardis, all but the acropolis.","places":[{"placeId":"599799","name":"Miletus","startOffset":88,"endOffset":95},{"placeId":"550893","name":"Smyrna","startOffset":100,"endOffset":106},{"placeId":"599577","name":"Colophon","startOffset":132,"endOffset":140},{"placeId":"599905","name":"Priene","startOffset":313,"endOffset":319},{"placeId":"599799","name":"Miletus","startOffset":347,"endOffset":354},{"placeId":"550867","name":"Sardis","startOffset":391,"endOffset":397},{"placeId":"geonames-735731","name":"Cimmerians","startOffset":407,"endOffset":417},{"placeId":"216976","name":"Scythians","startOffset":456,"endOffset":465},{"placeId":"550867","name":"Sardis","startOffset":492,"endOffset":498}]},{"id":16,"text":"Ardys reigned for forty-nine years and was succeeded by his son Sadyattes, who reigned for twelve years; and after Sadyattes came Alyattes, [2] who waged war against Deioces' descendant Cyaxares and the Medes, drove the Cimmerians out of Asia, took Smyrna (which was a colony from Colophon), and invaded the lands of Clazomenae. But he did not return from these as he wished, but with great disaster. Of other deeds done by him in his reign, these were the most notable:","places":[{"placeId":"903080","name":"Medes","startOffset":203,"endOffset":208},{"placeId":"geonames-735731","name":"Cimmerians","startOffset":220,"endOffset":230},{"placeId":"550893","name":"Smyrna","startOffset":249,"endOffset":255},{"placeId":"599577","name":"Colophon","startOffset":281,"endOffset":289},{"placeId":"550651","name":"Clazomenae","startOffset":317,"endOffset":327}]},{"id":17,"text":"He continued the war against the Milesians which his father had begun. This was how he attacked and beseiged Miletus: he sent his army, marching to the sound of pipes and harps and bass and treble flutes, to invade when the crops in the land were ripe; [2] and whenever he came to the Milesian territory, he neither demolished nor burnt nor tore the doors off the country dwellings, but let them stand unharmed; but he destroyed the trees and the crops of the land, and so returned to where he came from; [3] for as the Milesians had command of the sea, it was of no use for his army to besiege their city. The reason that the Lydian did not destroy the houses was this: that the Milesians might have homes from which to plant and cultivate their land, and that there might be the fruit of their toil for his invading army to lay waste.","places":[{"placeId":"599799","name":"Milesians","startOffset":33,"endOffset":42},{"placeId":"599799","name":"Miletus","startOffset":109,"endOffset":116},{"placeId":"599799","name":"Milesian territory","startOffset":285,"endOffset":303},{"placeId":"599799","name":"Milesians","startOffset":520,"endOffset":529},{"placeId":"550701","name":"Lydian","startOffset":627,"endOffset":633},{"placeId":"599799","name":"Milesians","startOffset":680,"endOffset":689}]},{"id":18,"text":"He waged war in this way for eleven years, and in these years two great disasters overtook the Milesians, one at the battle of Limeneion in their own territory, and the other in the valley of the Maeander. [2] For six of these eleven years Sadyattes son of Ardys was still ruler of Lydia, and it was he who invaded the lands of Miletus, for it was he who had begun the war; for the following five the war was waged by Sadyattes' son Alyattes, who, as I have indicated before, inherited the war from his father and carried it on vigorously. [3] None of the Ionians helped to lighten this war for the Milesians, except the Chians: these lent their aid in return for a similar service done for them; for the Milesians had previously helped the Chians in their war against the Erythraeans.","places":[{"placeId":"599799","name":"Milesians","startOffset":95,"endOffset":104},{"placeId":"540916","name":"Limeneion","startOffset":127,"endOffset":136},{"placeId":"599777","name":"Maeander","startOffset":196,"endOffset":204},{"placeId":"991385","name":"Lydia","startOffset":282,"endOffset":287},{"placeId":"599799","name":"Miletus","startOffset":328,"endOffset":335},{"placeId":"550597","name":"Ionians","startOffset":556,"endOffset":563},{"placeId":"599799","name":"Milesians","startOffset":599,"endOffset":608},{"placeId":"550496","name":"Chians","startOffset":621,"endOffset":627},{"placeId":"599799","name":"Milesians","startOffset":705,"endOffset":714},{"placeId":"550496","name":"Chians","startOffset":741,"endOffset":747},{"placeId":"550535","name":"Erythrae","startOffset":773,"endOffset":781}]},{"id":19,"text":"In the twelfth year, when the Lydian army was burning the crops, the fire set in the crops, blown by a strong wind, caught the temple of Athena called Athena of Assesos,6 and the temple burned to the ground. [2] For the present no notice was taken of this. But after the army had returned to Sardis, Alyattes fell ill; and, as his sickness lasted longer than it should, he sent to Delphi to inquire of the oracle, either at someone's urging or by his own wish to question the god about his sickness. [3] But when the messengers came to Delphi, the Pythian priestess would not answer them before they restored the temple of Athena at Assesos in the Milesian territory, which they had burnt.","places":[{"placeId":"550701","name":"Lydian army","startOffset":30,"endOffset":41},{"placeId":"491529","name":"Athena of Assesos","startOffset":151,"endOffset":168},{"placeId":"550867","name":"Sardis","startOffset":292,"endOffset":298},{"placeId":"540726","name":"Delphi","startOffset":381,"endOffset":387},{"placeId":"540726","name":"Delphi","startOffset":536,"endOffset":542},{"placeId":"540726","name":"Pythian priestess","startOffset":548,"endOffset":565},{"placeId":"550463","name":"Assesos","startOffset":633,"endOffset":640},{"placeId":"599799","name":"Milesian territory","startOffset":648,"endOffset":666}]},{"id":20,"text":"I know this much to be so because the Delphians told me. The Milesians add that Periander son of Cypselus, a close friend of the Thrasybulus who then was sovereign of Miletus, learned what reply the oracle had given to Alyattes, and sent a messenger to tell Thrasybulus so that his friend, forewarned, could make his plans accordingly.","places":[{"placeId":"540726","name":"Delphians","startOffset":38,"endOffset":47},{"placeId":"599799","name":"Milesians","startOffset":61,"endOffset":70},{"placeId":"599799","name":"Miletus","startOffset":167,"endOffset":174}]},{"id":21,"text":"The Milesians say it happened so. Then, when the Delphic reply was brought to Alyattes, he promptly sent a herald to Miletus, offering to make a truce with Thrasybulus and the Milesians during his rebuilding of the temple. So the envoy went to Miletus. But Thrasybulus, forewarned of the whole matter, and knowing what Alyattes meant to do, devised the following plan: [2] he brought together into the marketplace all the food in the city, from private stores and his own, and told the men of Miletus all to drink and celebrate together when he gave the word.","places":[{"placeId":"599799","name":"Milesians","startOffset":4,"endOffset":13},{"placeId":"540726","name":"Delphic","startOffset":49,"endOffset":56},{"placeId":"599799","name":"Miletus","startOffset":117,"endOffset":124},{"placeId":"599799","name":"Milesians","startOffset":176,"endOffset":185},{"placeId":"599799","name":"Miletus","startOffset":244,"endOffset":251},{"placeId":"599799","name":"Miletus","startOffset":493,"endOffset":500}]},{"id":22,"text":"Thrasybulus did this so that when the herald from Sardis saw a great heap of food piled up, and the citizens celebrating, he would bring word of it to Alyattes: [2] and so it happened. The herald saw all this, gave Thrasybulus the message he had been instructed by the Lydian to deliver, and returned to Sardis; and this, as I learn, was the sole reason for the reconciliation. [3] For Alyattes had supposed that there was great scarcity in Miletus and that the people were reduced to the last extremity of misery; but now on his herald's return from the town he heard an account contrary to his expectations; [4] so presently the Lydians and Milesians ended the war and agreed to be friends and allies, and Alyattes built not one but two temples of Athena at Assesos, and recovered from his illness. That is the story of Alyattes' war against Thrasybulus and the Milesians.","places":[{"placeId":"550867","name":"Sardis","startOffset":50,"endOffset":56},{"placeId":"550701","name":"Lydian","startOffset":269,"endOffset":275},{"placeId":"550867","name":"Sardis","startOffset":304,"endOffset":310},{"placeId":"599799","name":"Miletus","startOffset":441,"endOffset":448},{"placeId":"991385","name":"Lydians","startOffset":631,"endOffset":638},{"placeId":"599799","name":"Milesians","startOffset":643,"endOffset":652},{"placeId":"550463","name":"Assesos","startOffset":760,"endOffset":767},{"placeId":"599799","name":"Milesians","startOffset":864,"endOffset":873}]},{"id":23,"text":"Periander, who disclosed the oracle's answer to Thrasybulus, was the son of Cypselus, and sovereign of Corinth. The Corinthians say (and the Lesbians agree) that the most marvellous thing that happened to him in his life was the landing on Taenarus of Arion of Methymna, brought there by a dolphin. This Arion was a lyre-player second to none in that age; he was the first man whom we know to compose and name the dithyramb7 which he afterwards taught at Corinth.","places":[{"placeId":"570182","name":"Corinth","startOffset":103,"endOffset":110},{"placeId":"570182","name":"The Corinthians","startOffset":112,"endOffset":127},{"placeId":"550696","name":"Lesbians","startOffset":141,"endOffset":149},{"placeId":"570702","name":"Taenarus","startOffset":240,"endOffset":248},{"placeId":"550738","name":"Methymna","startOffset":261,"endOffset":269},{"placeId":"570182","name":"Corinth","startOffset":455,"endOffset":462}]},{"id":24,"text":"They say that this Arion, who spent most of his time with Periander, wished to sail to Italy and Sicily, and that after he had made a lot of money there he wanted to come back to Corinth. [2] Trusting none more than the Corinthians, he hired a Corinthian vessel to carry him from Tarentum.8 But when they were out at sea, the crew plotted to take Arion's money and cast him overboard. Discovering this, he earnestly entreated them, asking for his life and offering them his money. [3] But the crew would not listen to him, and told him either to kill himself and so receive burial on land or else to jump into the sea at once. [4] Abandoned to this extremity, Arion asked that, since they had made up their minds, they would let him stand on the half-deck in all his regalia and sing; and he promised that after he had sung he would do himself in. [5] The men, pleased at the thought of hearing the best singer in the world, drew away toward the waist of the vessel from the stern. Arion, putting on all his regalia and taking his lyre, stood up on the half-deck and sang the Stirring Song,9 and when the song was finished he threw himself into the sea, as he was with all his regalia. [6] So the crew sailed away to Corinth; but a dolphin (so the story goes) took Arion on his back and bore him to Taenarus. Landing there, he went to Corinth in his regalia, and when he arrived, he related all that had happened. [7] Periander, skeptical, kept him in confinement, letting him go nowhere, and waited for the sailors. When they arrived, they were summoned and asked what news they brought of Arion. While they were saying that he was safe in Italy and that they had left him flourishing at Tarentum, Arion appeared before them, just as he was when he jumped from the ship; astonished, they could no longer deny what was proved against them. [8] This is what the Corinthians and Lesbians say, and there is a little bronze memorial of Arion on Taenarus, the figure of a man riding upon a dolphin.","places":[{"placeId":"992073","name":"Italy","startOffset":87,"endOffset":92},{"placeId":"462492","name":"Sicily","startOffset":97,"endOffset":103},{"placeId":"570182","name":"Corinth","startOffset":179,"endOffset":186},{"placeId":"570182","name":"Corinthians","startOffset":220,"endOffset":231},{"placeId":"570182","name":"Corinthian","startOffset":244,"endOffset":254},{"placeId":"442810","name":"Tarentum","startOffset":280,"endOffset":288},{"placeId":"570182","name":"Corinth","startOffset":1219,"endOffset":1226},{"placeId":"570702","name":"Taenarus","startOffset":1301,"endOffset":1309},{"placeId":"570182","name":"Corinth","startOffset":1337,"endOffset":1344},{"placeId":"992073","name":"Italy","startOffset":1643,"endOffset":1648},{"placeId":"442810","name":"Tarentum","startOffset":1691,"endOffset":1699},{"placeId":"570182","name":"Corinthians","startOffset":1863,"endOffset":1874},{"placeId":"550696","name":"Lesbians","startOffset":1879,"endOffset":1887},{"placeId":"570703","name":"Taenarus","startOffset":1943,"endOffset":1951}]},{"id":25,"text":"Alyattes the Lydian, his war with the Milesians finished, died after a reign of fifty-seven years. [2] He was the second of his family to make an offering to Delphi (after recovering from his illness) of a great silver bowl on a stand of welded iron. Among all the offerings at Delphi, this is the most worth seeing, and is the work of Glaucus the Chian, the only one of all men who discovered how to weld iron.","places":[{"placeId":"550701","name":"Lydian","startOffset":13,"endOffset":19},{"placeId":"599799","name":"Milesians","startOffset":38,"endOffset":47},{"placeId":"540726","name":"Delphi","startOffset":158,"endOffset":164},{"placeId":"540726","name":"Delphi","startOffset":278,"endOffset":284},{"placeId":"550496","name":"Glaucus the Chian","startOffset":336,"endOffset":353}]},{"id":26,"text":"After the death of Alyattes, his son Croesus, then thirty-five years of age, came to the throne10. The first Greeks whom he attacked were the Ephesians. [2] These, besieged by him, dedicated their city to Artemis; they did this by attaching a rope to the city wall from the temple of the goddess, which stood seven stades away from the ancient city which was then besieged. [3] These were the first whom Croesus attacked; afterwards he made war on the Ionian and Aeolian cities in turn, upon different pretexts: he found graver charges where he could, but sometimes alleged very petty grounds of offense.","places":[{"placeId":"1001896","name":"Greeks","startOffset":109,"endOffset":115},{"placeId":"599612","name":"Ephesians","startOffset":142,"endOffset":151},{"placeId":"550597","name":"Ionian","startOffset":452,"endOffset":458},{"placeId":"550597","name":"Aeolian","startOffset":463,"endOffset":470}]},{"id":27,"text":"Then, when he had subjugated all the Asiatic Greeks of the mainland and made them tributary to him, he planned to build ships and attack the islanders; [2] but when his preparations for shipbuilding were underway, either Bias of Priene or Pittacus of Mytilene (the story is told of both) came to Sardis and, asked by Croesus for news about Hellas, put an end to the shipbuilding by giving the following answer: [3] O King, the islanders are buying ten thousand horse, intending to march to Sardis against you. Croesus, thinking that he spoke the truth, said: Would that the gods would put this in the heads of the islanders, to come on horseback against the sons of the Lydians! Then the other answered and said: [4] O King, you appear to me earnestly to wish to catch the islanders riding horses on the mainland, a natural wish. And what else do you suppose the islanders wished, as soon as they heard that you were building ships to attack them, than to catch Lydians on the seas, so as to be revenged on you for the Greeks who dwell on the mainland, whom you enslaved? [5] Croesus was quite pleased with this conclusion, for he thought the man spoke reasonably and, heeding him, stopped building ships. Thus he made friends with the Ionians inhabiting the islands.","places":[{"placeId":"599905","name":"Priene","startOffset":229,"endOffset":235},{"placeId":"550763","name":"Mytilene","startOffset":251,"endOffset":259},{"placeId":"550867","name":"Sardis","startOffset":296,"endOffset":302},{"placeId":"1001896","name":"Hellas","startOffset":340,"endOffset":346},{"placeId":"550867","name":"Sardis","startOffset":491,"endOffset":497},{"placeId":"991385","name":"Lydians","startOffset":673,"endOffset":680},{"placeId":"991385","name":"Lydians","startOffset":967,"endOffset":974},{"placeId":"1001896","name":"Greeks","startOffset":1024,"endOffset":1030},{"placeId":"735295266","name":"Ionians","startOffset":1242,"endOffset":1249}]},{"id":28,"text":"As time went on, Croesus subjugated almost all the nations west of the Halys; for except the Cilicians and Lycians, all the rest Croesus held subject under him. These were the Lydians, Phrygians, Mysians, Mariandynians, Chalybes, Paphlagonians, the Thracian Thynians and Bithynians, Carians, Ionians, Dorians, Aeolians, and Pamphylians;","places":[{"placeId":"857148","name":"Halys","startOffset":71,"endOffset":76},{"placeId":"658440","name":"Cilicians","startOffset":93,"endOffset":102},{"placeId":"638965","name":"Lycians","startOffset":107,"endOffset":114},{"placeId":"991385","name":"Lydians","startOffset":176,"endOffset":183},{"placeId":"609502","name":"Phrygians","startOffset":185,"endOffset":194},{"placeId":"550710","name":"Mysians","startOffset":196,"endOffset":203},{"placeId":"845013","name":"Mariandynians","startOffset":205,"endOffset":218},{"placeId":"857083","name":"Chalybes","startOffset":220,"endOffset":228},{"placeId":"845034","name":"Paphlagonians","startOffset":230,"endOffset":243},{"placeId":"511443","name":"Thracian Thynians","startOffset":249,"endOffset":266},{"placeId":"511189","name":"Bithynians","startOffset":271,"endOffset":281},{"placeId":"991381","name":"Carians","startOffset":283,"endOffset":290},{"placeId":"735295266","name":"Ionians","startOffset":292,"endOffset":299},{"placeId":"550406","name":"Aeolians","startOffset":310,"endOffset":318},{"placeId":"639034","name":"Pamphylians","startOffset":324,"endOffset":335}]},{"id":29,"text":"and after these were subdued and subject to Croesus in addition to the Lydians, all the sages from Hellas who were living at that time, coming in different ways, came to Sardis, which was at the height of its property; and among them came Solon the Athenian, who, after making laws for the Athenians at their request, went abroad for ten years, sailing forth to see the world, he said. This he did so as not to be compelled to repeal any of the laws he had made, [2] since the Athenians themselves could not do that, for they were bound by solemn oaths to abide for ten years by whatever laws Solon should make.","places":[{"placeId":"991385","name":"Lydians","startOffset":71,"endOffset":78},{"placeId":"1001896","name":"Hellas","startOffset":99,"endOffset":105},{"placeId":"550867","name":"Sardis","startOffset":170,"endOffset":176},{"placeId":"579885","name":"Athenian","startOffset":249,"endOffset":257},{"placeId":"579885","name":"Athenians","startOffset":290,"endOffset":299},{"placeId":"579885","name":"Athenians","startOffset":477,"endOffset":486}]},{"id":30,"text":"So for that reason, and to see the world, Solon went to visit Amasis in Egypt and then to Croesus in Sardis. When he got there, Croesus entertained him in the palace, and on the third or fourth day Croesus told his attendants to show Solon around his treasures, and they pointed out all those things that were great and blest. [2] After Solon had seen everything and had thought about it, Croesus found the opportunity to say, My Athenian guest, we have heard a lot about you because of your wisdom and of your wanderings, how as one who loves learning you have traveled much of the world for the sake of seeing it, so now I desire to ask you who is the most fortunate man you have seen. [3] Croesus asked this question believing that he was the most fortunate of men, but Solon, offering no flattery but keeping to the truth, said, O King, it is Tellus the Athenian. [4] Croesus was amazed at what he had said and replied sharply, In what way do you judge Tellus to be the most fortunate? Solon said, Tellus was from a prosperous city, and his children were good and noble. He saw children born to them all, and all of these survived. His life was prosperous by our standards, and his death was most glorious: [5] when the Athenians were fighting their neighbors in Eleusis, he came to help, routed the enemy, and died very finely. The Athenians buried him at public expense on the spot where he fell and gave him much honor.","places":[{"placeId":"981503","name":"Egypt","startOffset":72,"endOffset":77},{"placeId":"550867","name":"Sardis","startOffset":101,"endOffset":107},{"placeId":"579885","name":"Athenian guest","startOffset":431,"endOffset":445},{"placeId":"579885","name":"Athenian","startOffset":861,"endOffset":869},{"placeId":"579885","name":"Athenians","startOffset":1231,"endOffset":1240},{"placeId":"579920","name":"Eleusis","startOffset":1274,"endOffset":1281},{"placeId":"579885","name":"Athenians","startOffset":1344,"endOffset":1353}]},{"id":31,"text":"When Solon had provoked him by saying that the affairs of Tellus were so fortunate, Croesus asked who he thought was next, fully expecting to win second prize. Solon answered, Cleobis and Biton. [2] They were of Argive stock, had enough to live on, and on top of this had great bodily strength. Both had won prizes in the athletic contests, and this story is told about them: there was a festival of Hera in Argos, and their mother absolutely had to be conveyed to the temple by a team of oxen. But their oxen had not come back from the fields in time, so the youths took the yoke upon their own shoulders under constraint of time. They drew the wagon, with their mother riding atop it, traveling five miles until they arrived at the temple. [3] When they had done this and had been seen by the entire gathering, their lives came to an excellent end, and in their case the god made clear that for human beings it is a better thing to die than to live. The Argive men stood around the youths and congratulated them on their strength; the Argive women congratulated their mother for having borne such children. [4] She was overjoyed at the feat and at the praise, so she stood before the image and prayed that the goddess might grant the best thing for man to her children Cleobis and Biton, who had given great honor to the goddess. [5] After this prayer they sacrificed and feasted. The youths then lay down in the temple and went to sleep and never rose again; death held them there. The Argives made and dedicated at Delphi statues of them as being the best of men.","places":[{"placeId":"570106","name":"Argive stock","startOffset":213,"endOffset":225},{"placeId":"570106","name":"Argos","startOffset":409,"endOffset":414},{"placeId":"570106","name":"Argive men","startOffset":957,"endOffset":967},{"placeId":"570106","name":"Argive women","startOffset":1038,"endOffset":1050},{"placeId":"570106","name":"Argives","startOffset":1490,"endOffset":1497},{"placeId":"540726","name":"Delphi","startOffset":1520,"endOffset":1526}]},{"id":32,"text":"Thus Solon granted second place in happiness to these men. Croesus was vexed and said, My Athenian guest, do you so much despise our happiness that you do not even make us worth as much as common men? Solon replied, Croesus, you ask me about human affairs, and I know that the divine is entirely grudging and troublesome to us. [2] In a long span of time it is possible to see many things that you do not want to, and to suffer them, too. I set the limit of a man's life at seventy years; [3] these seventy years have twenty-five thousand, two hundred days, leaving out the intercalary month.11 But if you make every other year longer by one month, so that the seasons agree opportunely, then there are thirty-five intercalary months during the seventy years, and from these months there are one thousand fifty days. [4] Out of all these days in the seventy years, all twenty-six thousand, two hundred and fifty of them, not one brings anything at all like another. So, Croesus, man is entirely chance. [5] To me you seem to be very rich and to be king of many people, but I cannot answer your question before I learn that you ended your life well. The very rich man is not more fortunate than the man who has only his daily needs, unless he chances to end his life with all well. Many very rich men are unfortunate, many of moderate means are lucky. [6] The man who is very rich but unfortunate surpasses the lucky man in only two ways, while the lucky surpasses the rich but unfortunate in many. The rich man is more capable of fulfilling his appetites and of bearing a great disaster that falls upon him, and it is in these ways that he surpasses the other. The lucky man is not so able to support disaster or appetite as is the rich man, but his luck keeps these things away from him, and he is free from deformity and disease, has no experience of evils, and has fine children and good looks. [7] If besides all this he ends his life well, then he is the one whom you seek, the one worthy to be called fortunate. But refrain from calling him fortunate before he dies; call him lucky. [8] It is impossible for one who is only human to obtain all these things at the same time, just as no land is self-sufficient in what it produces. Each country has one thing but lacks another; whichever has the most is the best. Just so no human being is self-sufficient; each person has one thing but lacks another. [9] Whoever passes through life with the most and then dies agreeably is the one who, in my opinion, O King, deserves to bear this name. It is necessary to see how the end of every affair turns out, for the god promises fortune to many people and then utterly ruins them.","places":[{"placeId":"579885","name":"Athenian guest","startOffset":91,"endOffset":105}]},{"id":33,"text":"By saying this, Solon did not at all please Croesus, who sent him away without regard for him, but thinking him a great fool, because he ignored the present good and told him to look to the end of every affair.","places":[]},{"id":34,"text":"But after Solon's departure divine retribution fell heavily on Croesus; as I guess, because he supposed himself to be blessed beyond all other men. Directly, as he slept, he had a dream, which showed him the truth of the evil things which were going to happen concerning his son. [2] He had two sons, one of whom was ruined, for he was mute, but the other, whose name was Atys, was by far the best in every way of all of his peers. The dream showed this Atys to Croesus, how he would lose him struck and killed by a spear of iron. [3] So Croesus, after he awoke and considered, being frightened by the dream, brought in a wife for his son, and although Atys was accustomed to command the Lydian armies, Croesus now would not send him out on any such enterprise, while he took the javelins and spears and all such things that men use for war from the men's apartments and piled them in his store room,12 lest one should fall on his son from where it hung.","places":[{"placeId":"550701","name":"Lydian armies","startOffset":688,"endOffset":701}]},{"id":35,"text":"Now while Croesus was occupied with the marriage of his son, a Phrygian of the royal house came to Sardis, in great distress and with unclean hands. This man came to Croesus' house, and asked to be purified according to the custom of the country; so Croesus purified him ( [2] the Lydians have the same manner of purification as the Greeks), and when he had done everything customary, he asked the Phrygian where he came from and who he was: [3] Friend, he said, who are you, and from what place in Phrygia do you come as my suppliant? And what man or woman have you killed? O King, the man answered, I am the son of Gordias the son of Midas, and my name is Adrastus; I killed my brother accidentally, and I come here banished by my father and deprived of all. [4] Croesus answered, All of your family are my friends, and you have come to friends, where you shall lack nothing, staying in my house. As for your misfortune, bear it as lightly as possible and you will gain most.","places":[{"placeId":"609502","name":"Phrygian of the royal house","startOffset":63,"endOffset":90},{"placeId":"550867","name":"Sardis","startOffset":99,"endOffset":105},{"placeId":"991385","name":"Lydians","startOffset":281,"endOffset":288},{"placeId":"1001896","name":"Greeks","startOffset":333,"endOffset":339},{"placeId":"609502","name":"Phrygian","startOffset":398,"endOffset":406},{"placeId":"981543","name":"Phrygia","startOffset":502,"endOffset":509}]},{"id":36,"text":"So Adrastus lived in Croesus' house. About this same time a great monster of a boar appeared on the Mysian Olympus, who would come off that mountain and ravage the fields of the Mysians. The Mysians had gone up against him often; but they never did him any harm but were hurt by him themselves. [2] At last they sent messengers to Croesus, with this message: O King, a great monster of a boar has appeared in the land, who is destroying our fields; for all our attempts, we cannot kill him; so now we ask you to send your son and chosen young men and dogs with us, so that we may drive him out of the country. [3] Such was their request, but Croesus remembered the prophecy of his dream and answered them thus: Do not mention my son again: I will not send him with you. He is newly married, and that is his present concern. But I will send chosen Lydians, and all the huntsmen, and I will tell those who go to be as eager as possible to help you to drive the beast out of the country.","places":[{"placeId":"511343","name":"Mysian Olympus","startOffset":100,"endOffset":114},{"placeId":"550710","name":"Mysians","startOffset":178,"endOffset":185},{"placeId":"550710","name":"Mysians","startOffset":191,"endOffset":198},{"placeId":"991385","name":"Lydians","startOffset":850,"endOffset":857}]},{"id":37,"text":"This was his answer, and the Mysians were satisfied with it. But the son of Croesus now entered, having heard what the Mysians had asked for; and when Croesus refused to send his son with them, the young man said, [2] Father, it was once thought very fine and noble for us to go to war and the chase and win renown; but now you have barred me from both of these, although you have seen neither cowardice nor lack of spirit in me. With what face can I now show myself whenever I go to and from the market-place? [3] What will the men of the city think of me, and what my newly wedded wife? With what kind of man will she think that she lives? So either let me go to the hunt, or show me by reasoning that what you are doing is best for me.","places":[{"placeId":"550710","name":"Mysians","startOffset":29,"endOffset":36},{"placeId":"550710","name":"Mysians","startOffset":119,"endOffset":126}]},{"id":38,"text":"My son, answered Croesus, I do this not because I have seen cowardice or anything unseemly in you, but the vision of a dream stood over me in my sleep, and told me that you would be short-lived, for you would be killed by a spear of iron. [2] It is because of that vision that I hurried your marriage and do not send you on any enterprise that I have in hand, but keep guard over you, so that perhaps I may rob death of you during my lifetime. You are my only son: for that other, since he is ruined, he doesn't exist for me.","places":[]},{"id":39,"text":"Father, the youth replied, no one can blame you for keeping guard over me, when you have seen such a vision; but it is my right to show you what you do not perceive, and why you mistake the meaning of the dream. [2] You say that the dream told you that I should be killed by a spear of iron? But has a boar hands? Has it that iron spear which you dread? Had the dream said I should be killed by a tusk or some other thing proper to a boar, you would be right in acting as you act; but no, it was to be by a spear. Therefore, since it is not against men that we are to fight, let me go.","places":[]},{"id":40,"text":"Croesus answered, My son, your judgment concerning the dream has somewhat reassured me; and being reassured by you, I change my thinking and permit you to go to the chase.","places":[]},{"id":41,"text":"Having said this, Croesus sent for Adrastus the Phrygian and when he came addressed him thus: Adrastus, when you were struck by ugly misfortune, for which I do not blame you, it was I who cleansed you, and received and still keep you in my house, defraying all your keep. [2] Now then, as you owe me a return of good service for the good which I have done you, I ask that you watch over my son as he goes out to the chase. See that no thieving criminals meet you on the way, to do you harm. [3] Besides, it is only right that you too should go where you can win renown by your deeds. That is fitting for your father's son; and you are strong enough besides.","places":[{"placeId":"609502","name":"Adrastus the Phrygian","startOffset":35,"endOffset":56}]},{"id":42,"text":"O King, Adrastus answered, I would not otherwise have gone into such an arena. One so unfortunate as I should not associate with the prosperous among his peers; nor have I the wish so to do, and for many reasons I would have held back. [2] But now, since you urge it and I must please you (since I owe you a return of good service), I am ready to do this; and as for your son, in so far as I can protect him, look for him to come back unharmed.","places":[]},{"id":43,"text":"So when Adrastus had answered Croesus thus, they went out provided with chosen young men and dogs. When they came to Mount Olympus, they hunted for the beast and, finding him, formed a circle and threw their spears at him: [2] then the guest called Adrastus, the man who had been cleansed of the deed of blood, missed the boar with his spear and hit the son of Croesus. [3] So Atys was struck by the spear and fulfilled the prophecy of the dream. One ran to tell Croesus what had happened, and coming to Sardis told the king of the fight and the fate of his son.","places":[{"placeId":"511343","name":"Mount Olympus","startOffset":117,"endOffset":130},{"placeId":"550867","name":"Sardis","startOffset":504,"endOffset":510}]},{"id":44,"text":"Distraught by the death of his son, Croesus cried out the more vehemently because the killer was one whom he himself had cleansed of blood, [2] and in his great and terrible grief at this mischance he called on Zeus by three namesZeus the Purifier, Zeus of the Hearth, Zeus of Comrades: the first, because he wanted the god to know what evil his guest had done him; the second, because he had received the guest into his house and thus unwittingly entertained the murderer of his son; and the third, because he had found his worst enemy in the man whom he had sent as a protector.","places":[]},{"id":45,"text":"Soon the Lydians came, bearing the corpse, with the murderer following after. He then came and stood before the body and gave himself up to Croesus, holding out his hands and telling him to kill him over the corpse, mentioning his former misfortune, and that on top of that he had destroyed the one who purified him, and that he was not fit to live. [2] On hearing this, Croesus took pity on Adrastus, though his own sorrow was so great, and said to him, Friend, I have from you the entire penalty, since you sentence yourself to death. But it is not you that I hold the cause of this evil, except in so far as you were the unwilling doer of it, but one of the gods, the same one who told me long ago what was to be. [3] So Croesus buried his own son in such manner as was fitting. But Adrastus, son of Gordias who was son of Midas, this Adrastus, the destroyer of his own brother and of the man who purified him, when the tomb was undisturbed by the presence of men, killed himself there by the sepulcher, seeing clearly now that he was the most heavily afflicted of all whom he knew.","places":[{"placeId":"991385","name":"Lydians","startOffset":9,"endOffset":16}]},{"id":46,"text":"After the loss of his son, Croesus remained in deep sorrow for two years. After this time, the destruction by Cyrus son of Cambyses of the sovereignty of Astyages son of Cyaxares, and the growth of the power of the Persians, distracted Croesus from his mourning; and he determined, if he could, to forestall the increase of the Persian power before they became great. [2] Having thus determined, he at once made inquiries of the Greek and Libyan oracles, sending messengers separately to Delphi, to Abae in Phocia, and to Dodona, while others were despatched to Amphiaraus and Trophonius,13 and others to Branchidae in the Milesian country. [3] These are the Greek oracles to which Croesus sent for divination: and he told others to go inquire of Ammon in Libya. His intent in sending was to test the knowledge of the oracles, so that, if they were found to know the truth, he might send again and ask if he should undertake an expedition against the Persians.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":215,"endOffset":223},{"placeId":"geonames-130758","name":"Persian","startOffset":328,"endOffset":335},{"placeId":"540726","name":"Delphi","startOffset":488,"endOffset":494},{"placeId":"540582","name":"Abae","startOffset":499,"endOffset":503},{"placeId":"541048","name":"Phocia","startOffset":507,"endOffset":513},{"placeId":"530843","name":"Dodona","startOffset":522,"endOffset":528},{"placeId":"540628","name":"Amphiaraus","startOffset":562,"endOffset":572},{"placeId":"741482","name":"Trophonius","startOffset":577,"endOffset":587},{"placeId":"599593","name":"Branchidae","startOffset":605,"endOffset":615},{"placeId":"716520","name":"Ammon","startOffset":747,"endOffset":752},{"placeId":"991388","name":"Libya","startOffset":756,"endOffset":761},{"placeId":"geonames-130758","name":"Persians","startOffset":951,"endOffset":959}]},{"id":47,"text":"And when he sent to test these shrines he gave the Lydians these instructions: they were to keep track of the time from the day they left Sardis, and on the hundredth day inquire of the oracles what Croesus, king of Lydia, son of Alyattes, was doing then; then they were to write down whatever the oracles answered and bring the reports back to him. [2] Now none relate what answer was given by the rest of the oracles. But at Delphi, no sooner had the Lydians entered the hall to inquire of the god and asked the question with which they were entrusted, than the Pythian priestess uttered the following hexameter verses: [3] I know the number of the grains of sand and the extent of the sea, And understand the mute and hear the voiceless. The smell has come to my senses of a strong-shelled tortoise Boiling in a cauldron together with a lamb's flesh, Under which is bronze and over which is bronze. ","places":[{"placeId":"991385","name":"Lydians","startOffset":51,"endOffset":58},{"placeId":"550867","name":"Sardis","startOffset":138,"endOffset":144},{"placeId":"991385","name":"Lydia","startOffset":216,"endOffset":221},{"placeId":"540726","name":"Delphi","startOffset":427,"endOffset":433},{"placeId":"991385","name":"Lydians","startOffset":453,"endOffset":460},{"placeId":"540726","name":"Pythian priestess","startOffset":564,"endOffset":581}]},{"id":48,"text":"Having written down this inspired utterance of the Pythian priestess, the Lydians went back to Sardis. When the others as well who had been sent to various places came bringing their oracles, Croesus then unfolded and examined all the writings. Some of them in no way satisfied him. But when he read the Delphian message, he acknowledged it with worship and welcome, considering Delphi as the only true place of divination, because it had discovered what he himself had done. [2] For after sending his envoys to the oracles, he had thought up something which no conjecture could discover, and carried it out on the appointed day: namely, he had cut up a tortoise and a lamb, and then boiled them in a cauldron of bronze covered with a lid of the same.","places":[{"placeId":"540726","name":"Pythian priestess","startOffset":51,"endOffset":68},{"placeId":"991385","name":"Lydians","startOffset":74,"endOffset":81},{"placeId":"550867","name":"Sardis","startOffset":95,"endOffset":101},{"placeId":"540726","name":"Delphian message","startOffset":304,"endOffset":320},{"placeId":"540726","name":"Delphi","startOffset":379,"endOffset":385}]},{"id":49,"text":"Such, then, was the answer from Delphi delivered to Croesus. As to the reply which the Lydians received from the oracle of Amphiaraus when they had followed the due custom of the temple, I cannot say what it was, for nothing is recorded of it, except that Croesus believed that from this oracle too he had obtained a true answer.","places":[{"placeId":"540726","name":"Delphi","startOffset":32,"endOffset":38},{"placeId":"991385","name":"Lydians","startOffset":87,"endOffset":94},{"placeId":"540628","name":"Amphiaraus","startOffset":123,"endOffset":133}]},{"id":50,"text":"After this, he tried to win the favor of the Delphian god with great sacrifices. He offered up three thousand beasts from all the kinds fit for sacrifice, and on a great pyre burnt couches covered with gold and silver, golden goblets, and purple cloaks and tunics; by these means he hoped the better to win the aid of the god, to whom he also commanded that every Lydian sacrifice what he could. [2] When the sacrifice was over, he melted down a vast store of gold and made ingots of it, the longer sides of which were of six and the shorter of three palms' length, and the height was one palm. There were a hundred and seventeen of these. Four of them were of refined gold, each weighing two talents and a half; the rest were of gold with silver alloy, each of two talents' weight. [3] He also had a figure of a lion made of refined gold, weighing ten talents. When the temple of Delphi was burnt, this lion fell from the ingots which were the base on which it stood; and now it is in the treasury of the Corinthians, but weighs only six talents and a half, for the fire melted away three and a half talents.","places":[{"placeId":"540726","name":"Delphian god","startOffset":45,"endOffset":57},{"placeId":"550701","name":"Lydian","startOffset":364,"endOffset":370},{"placeId":"540726","name":"Delphi","startOffset":881,"endOffset":887},{"placeId":"570182","name":"Corinthians","startOffset":1006,"endOffset":1017}]},{"id":51,"text":"When these offerings were ready, Croesus sent them to Delphi, with other gifts besides: namely, two very large bowls, one of gold and one of silver. The golden bowl stood to the right, the silver to the left of the temple entrance. [2] These too were removed about the time of the temple's burning, and now the golden bowl, which weighs eight and a half talents and twelve minae,14 is in the treasury of the Clazomenians, and the silver bowl at the corner of the forecourt of the temple. This bowl holds six hundred nine-gallon measures: for the Delphians use it for a mixing-bowl at the feast of the Divine Appearance.15 [3] It is said by the Delphians to be the work of Theodorus of Samos, and I agree with them, for it seems to me to be of no common workmanship. Moreover, Croesus sent four silver casks, which stand in the treasury of the Corinthians, and dedicated two sprinkling-vessels, one of gold, one of silver. The golden vessel bears the inscription Given by the Lacedaemonians, who claim it as their offering. But they are wrong, [4] for this, too, is Croesus' gift. The inscription was made by a certain Delphian, whose name I know but do not mention, out of his desire to please the Lacedaemonians. The figure of a boy, through whose hand the water runs, is indeed a Lacedaemonian gift; but they did not give either of the sprinkling-vessels. [5] Along with these Croesus sent, besides many other offerings of no great distinction, certain round basins of silver, and a female figure five feet high, which the Delphians assert to be the statue of the woman who was Croesus' baker. Moreover, he dedicated his own wife's necklaces and girdles.","places":[{"placeId":"540726","name":"Delphi","startOffset":54,"endOffset":60},{"placeId":"hestia-clazomenians","name":"Clazomenians","startOffset":408,"endOffset":420},{"placeId":"540726","name":"Delphians","startOffset":546,"endOffset":555},{"placeId":"540726","name":"Delphians","startOffset":644,"endOffset":653},{"placeId":"599926","name":"Samos","startOffset":685,"endOffset":690},{"placeId":"570182","name":"Corinthians","startOffset":843,"endOffset":854},{"placeId":"570406","name":"Lacedaemonians","startOffset":976,"endOffset":990},{"placeId":"570406","name":"Lacedaemonians","startOffset":1200,"endOffset":1214},{"placeId":"570406","name":"Lacedaemonian gift","startOffset":1284,"endOffset":1302},{"placeId":"540726","name":"Delphians","startOffset":1527,"endOffset":1536}]},{"id":52,"text":"Such were the gifts which he sent to Delphi. To Amphiaraus, of whose courage and fate he had heard, he dedicated a shield made entirely of gold and a spear all of solid gold, point and shaft alike. Both of these were until my time at Thebes, in the Theban temple of Ismenian Apollo.","places":[{"placeId":"540726","name":"Delphi","startOffset":37,"endOffset":43},{"placeId":"540628","name":"Amphiaraus","startOffset":48,"endOffset":58},{"placeId":"541138","name":"Thebes","startOffset":234,"endOffset":240}]},{"id":53,"text":"The Lydians who were to bring these gifts to the temples were instructed by Croesus to inquire of the oracles whether he was to send an army against the Persians and whether he was to add an army of allies. [2] When the Lydians came to the places where they were sent, they presented the offerings, and inquired of the oracles, in these words: Croesus, king of Lydia and other nations, believing that here are the only true places of divination among men, endows you with such gifts as your wisdom deserves. And now he asks you whether he is to send an army against the Persians, and whether he is to add an army of allies. [3] Such was their inquiry; and the judgment given to Croesus by each of the two oracles was the same: namely, that if he should send an army against the Persians he would destroy a great empire. And they advised him to discover the mightiest of the Greeks and make them his friends.","places":[{"placeId":"991385","name":"Lydians","startOffset":4,"endOffset":11},{"placeId":"geonames-130758","name":"Persians","startOffset":153,"endOffset":161},{"placeId":"991385","name":"Lydians","startOffset":220,"endOffset":227},{"placeId":"991385","name":"Lydia","startOffset":362,"endOffset":367},{"placeId":"geonames-130758","name":"Persians","startOffset":571,"endOffset":579},{"placeId":"geonames-130758","name":"Persian","startOffset":780,"endOffset":787},{"placeId":"1001896","name":"Greeks","startOffset":876,"endOffset":882}]},{"id":54,"text":"When the divine answers had been brought back and Croesus learned of them, he was very pleased with the oracles. So, altogether expecting that he would destroy the kingdom of Cyrus, he sent once again to Pytho and endowed the Delphians, whose number he had learned, with two gold staters16 apiece. [2] The Delphians, in return, gave Croesus and all Lydians the right of first consulting the oracle, exemption from all charges, the chief seats at festivals, and perpetual right of Delphian citizenship to whoever should wish it.","places":[{"placeId":"540726","name":"Pytho","startOffset":204,"endOffset":209},{"placeId":"540726","name":"Delphians","startOffset":226,"endOffset":235},{"placeId":"540726","name":"Delphians","startOffset":306,"endOffset":315},{"placeId":"991385","name":"Lydians","startOffset":349,"endOffset":356},{"placeId":"540726","name":"Delphian citizenship","startOffset":480,"endOffset":500}]},{"id":55,"text":"After his gifts to the Delphians, Croesus made a third inquiry of the oracle, for he wanted to use it to the full, having received true answers from it; and the question which he asked was whether his sovereignty would be of long duration. To this the Pythian priestess answered as follows: [2] When the Medes have a mule as king, Just then, tender-footed Lydian, by the stone-strewn Hermus Flee and do not stay, and do not be ashamed to be a coward. ","places":[{"placeId":"540726","name":"Delphians","startOffset":23,"endOffset":32},{"placeId":"540726","name":"Pythian priestess","startOffset":252,"endOffset":269},{"placeId":"903080","name":"Medes","startOffset":306,"endOffset":311},{"placeId":"550701","name":"Lydian","startOffset":358,"endOffset":364},{"placeId":"550575","name":"Hermus","startOffset":386,"endOffset":392}]},{"id":56,"text":"When he heard these verses, Croesus was pleased with them above all, for he thought that a mule would never be king of the Medes instead of a man, and therefore that he and his posterity would never lose his empire. Then he sought very carefully to discover who the mightiest of the Greeks were, whom he should make his friends. [2] He found by inquiry that the chief peoples were the Lacedaemonians among those of Doric, and the Athenians among those of Ionic stock. These races, Ionian and Dorian, were the foremost in ancient time, the first a Pelasgian and the second a Hellenic people. The Pelasgian race has never yet left its home; the Hellenic has wandered often and far. [3] For in the days of king Deucalion17 it inhabited the land of Phthia, then the country called Histiaean, under Ossa and Olympus, in the time of Dorus son of Hellen; driven from this Histiaean country by the Cadmeans, it settled about Pindus in the territory called Macedonian; from there again it migrated to Dryopia, and at last came from Dryopia into the Peloponnese, where it took the name of Dorian.18","places":[{"placeId":"903080","name":"Medes","startOffset":123,"endOffset":128},{"placeId":"1001896","name":"Greeks","startOffset":283,"endOffset":289},{"placeId":"570406","name":"Lacedaemonians","startOffset":385,"endOffset":399},{"placeId":"579885","name":"Athenians","startOffset":430,"endOffset":439},{"placeId":"550597","name":"Ionic stock","startOffset":455,"endOffset":466},{"placeId":"550597","name":"Ionian","startOffset":481,"endOffset":487},{"placeId":"570102","name":"Pelasgian","startOffset":547,"endOffset":556},{"placeId":"570102","name":"Pelasgian race","startOffset":595,"endOffset":609},{"placeId":"541052","name":"Phthia","startOffset":745,"endOffset":751},{"placeId":"540817","name":"Histiaean","startOffset":777,"endOffset":786},{"placeId":"540993","name":"Ossa","startOffset":794,"endOffset":798},{"placeId":"491677","name":"Olympus","startOffset":803,"endOffset":810},{"placeId":"540817","name":"Histiaean","startOffset":865,"endOffset":874},{"placeId":"541062","name":"Pindus","startOffset":917,"endOffset":923},{"placeId":"1001893","name":"Macedonian","startOffset":948,"endOffset":958},{"placeId":"530849","name":"Dryopia","startOffset":992,"endOffset":999},{"placeId":"530849","name":"Dryopia","startOffset":1023,"endOffset":1030},{"placeId":"570577","name":"Peloponnese","startOffset":1040,"endOffset":1051}]},{"id":57,"text":"What language the Pelasgians spoke I cannot say definitely. But if one may judge by those that still remain of the Pelasgians who live above the Tyrrheni19 in the city of Crestonwho were once neighbors of the people now called Dorians, and at that time inhabited the country which now is called Thessalian [2] and of the Pelasgians who inhabited Placia and Scylace on the Hellespont, who came to live among the Athenians, and by other towns too which were once Pelasgian and afterwards took a different name: if, as I said, one may judge by these, the Pelasgians spoke a language which was not Greek. [3] If, then, all the Pelasgian stock spoke so, then the Attic nation, being of Pelasgian blood, must have changed its language too at the time when it became part of the Hellenes. For the people of Creston and Placia have a language of their own in common, which is not the language of their neighbors; and it is plain that they still preserve the manner of speech which they brought with them in their migration into the places where they live.","places":[{"placeId":"570102","name":"Pelasgians","startOffset":18,"endOffset":28},{"placeId":"570102","name":"Pelasgians","startOffset":115,"endOffset":125},{"placeId":"413122","name":"Tyrrheni","startOffset":145,"endOffset":153},{"placeId":"452317","name":"Creston","startOffset":171,"endOffset":178},{"placeId":"1332","name":"Thessalian","startOffset":296,"endOffset":306},{"placeId":"570102","name":"Pelasgians","startOffset":323,"endOffset":333},{"placeId":"511366","name":"Placia","startOffset":348,"endOffset":354},{"placeId":"511419","name":"Scylace","startOffset":359,"endOffset":366},{"placeId":"981526","name":"Hellespont","startOffset":374,"endOffset":384},{"placeId":"579885","name":"Athenians","startOffset":413,"endOffset":422},{"placeId":"570102","name":"Pelasgian","startOffset":463,"endOffset":472},{"placeId":"570102","name":"Pelasgians","startOffset":554,"endOffset":564},{"placeId":"570102","name":"Pelasgian stock","startOffset":625,"endOffset":640},{"placeId":"579888","name":"Attic nation","startOffset":660,"endOffset":672},{"placeId":"570102","name":"Pelasgian blood","startOffset":683,"endOffset":698},{"placeId":"452317","name":"Creston","startOffset":802,"endOffset":809},{"placeId":"511366","name":"Placia","startOffset":814,"endOffset":820}]},{"id":58,"text":"But the Hellenic stock, it seems clear to me, has always had the same language since its beginning; yet being, when separated from the Pelasgians, few in number, they have grown from a small beginning to comprise a multitude of nations, chiefly because the Pelasgians and many other foreign peoples united themselves with them. Before that, I think, the Pelasgic stock nowhere increased much in number while it was of foreign speech.","places":[{"placeId":"570102","name":"Pelasgians","startOffset":135,"endOffset":145},{"placeId":"570102","name":"Pelasgians","startOffset":257,"endOffset":267},{"placeId":"570102","name":"Pelasgic stock","startOffset":354,"endOffset":368}]},{"id":59,"text":"Now of these two peoples, Croesus learned that the Attic was held in subjection and divided into factions by Pisistratus, son of Hippocrates, who at that time was sovereign over the Athenians. This Hippocrates was still a private man when a great marvel happened to him when he was at Olympia to see the games: when he had offered the sacrifice, the vessels, standing there full of meat and water, boiled without fire until they boiled over. [2] Chilon the Lacedaemonian, who happened to be there and who saw this marvel, advised Hippocrates not to take to his house a wife who could bear children, but if he had one already, then to send her away, and if he had a son, to disown him. [3] Hippocrates refused to follow the advice of Chilon; and afterward there was born to him this Pisistratus, who, when there was a feud between the Athenians of the coast under Megacles son of Alcmeon and the Athenians of the plain under Lycurgus son of Aristolaides, raised up a third faction, as he coveted the sovereign power. He collected partisans and pretended to champion the uplanders, and the following was his plan. [4] Wounding himself and his mules, he drove his wagon into the marketplace, with a story that he had escaped from his enemies, who would have killed him (so he said) as he was driving into the country. So he implored the people to give him a guard: and indeed he had won a reputation in his command of the army against the Megarians, when he had taken Nisaea and performed other great exploits. [5] Taken in, the Athenian people gave him a guard of chosen citizens, whom Pisistratus made clubmen instead of spearmen: for the retinue that followed him carried wooden clubs. [6] These rose with Pisistratus and took the Acropolis; and Pisistratus ruled the Athenians, disturbing in no way the order of offices nor changing the laws, but governing the city according to its established constitution and arranging all things fairly and well.","places":[{"placeId":"579888","name":"Attic","startOffset":51,"endOffset":56},{"placeId":"579885","name":"Athenians","startOffset":182,"endOffset":191},{"placeId":"570531","name":"Olympia","startOffset":285,"endOffset":292},{"placeId":"570406","name":"Lacedaemonian","startOffset":457,"endOffset":470},{"placeId":"579885","name":"Athenians","startOffset":834,"endOffset":843},{"placeId":"579885","name":"Athenians","startOffset":895,"endOffset":904},{"placeId":"570468","name":"Megarians","startOffset":1436,"endOffset":1445},{"placeId":"570508","name":"Nisaea","startOffset":1465,"endOffset":1471},{"placeId":"638356144","name":"Acropolis","startOffset":1731,"endOffset":1740},{"placeId":"579885","name":"Athenians","startOffset":1768,"endOffset":1777}]},{"id":60,"text":"But after a short time the partisans of Megacles and of Lycurgus made common cause and drove him out. In this way Pisistratus first got Athens and, as he had a sovereignty that was not yet firmly rooted, lost it. Presently his enemies who together had driven him out began to feud once more. [2] Then Megacles, harassed by factional strife, sent a message to Pisistratus offering him his daughter to marry and the sovereign power besides. [3] When this offer was accepted by Pisistratus, who agreed on these terms with Megacles, they devised a plan to bring Pisistratus back which, to my mind, was so exceptionally foolish that it is strange (since from old times the Hellenic stock has always been distinguished from foreign by its greater cleverness and its freedom from silly foolishness) that these men should devise such a plan to deceive Athenians, said to be the subtlest of the Greeks. [4] There was in the Paeanian deme20 a woman called Phya, three fingers short of six feet, four inches in height, and otherwise, too, well-formed. This woman they equipped in full armor and put in a chariot, giving her all the paraphernalia to make the most impressive spectacle, and so drove into the city; heralds ran before them, and when they came into town proclaimed as they were instructed: [5] Athenians, give a hearty welcome to Pisistratus, whom Athena herself honors above all men and is bringing back to her own acropolis. So the heralds went about proclaiming this; and immediately the report spread in the demes that Athena was bringing Pisistratus back, and the townsfolk, believing that the woman was the goddess herself, worshipped this human creature and welcomed Pisistratus.","places":[{"placeId":"579885","name":"Athens","startOffset":136,"endOffset":142},{"placeId":"579885","name":"Athenians","startOffset":844,"endOffset":853},{"placeId":"1001896","name":"Greeks","startOffset":886,"endOffset":892},{"placeId":"580047","name":"Paeanian deme","startOffset":915,"endOffset":928},{"placeId":"579885","name":"Athenians","startOffset":1297,"endOffset":1306}]},{"id":61,"text":"Having got back his sovereignty in the manner which I have described, Pisistratus married Megacles' daughter according to his agreement with Megacles. But as he already had young sons, and as the Alcmeonid family were said to be under a curse, he had no wish that his newly-wedded wife bear him children, and therefore had unusual intercourse with her. [2] At first the woman hid the fact: presently she told her mother (whether interrogated or not, I do not know) and the mother told her husband. Megacles was very angry to be dishonored by Pisistratus; and in his anger he patched up his quarrel with the other faction. Pisistratus, learning what was going on, went alone away from the country altogether, and came to Eretria where he deliberated with his sons. [3] The opinion of Hippias prevailing, that they should recover the sovereignty, they set out collecting contributions from all the cities that owed them anything. Many of these gave great amounts, the Thebans more than any, [4] and in course of time, not to make a long story, everything was ready for their return: for they brought Argive mercenaries from the Peloponnese, and there joined them on his own initiative a man of Naxos called Lygdamis, who was most keen in their cause and brought them money and men.","places":[{"placeId":"579925","name":"Eretria","startOffset":720,"endOffset":727},{"placeId":"541138","name":"Thebans","startOffset":966,"endOffset":973},{"placeId":"570106","name":"Argive mercenaries","startOffset":1098,"endOffset":1116},{"placeId":"570577","name":"Peloponnese","startOffset":1126,"endOffset":1137},{"placeId":"599821","name":"Naxos","startOffset":1192,"endOffset":1197}]},{"id":62,"text":"So after ten years they set out from Eretria and returned home. The first place in Attica which they took and held was Marathon: and while encamped there they were joined by their partisans from the city, and by others who flocked to them from the countrydemesmen who loved the rule of one more than freedom. These, then, assembled; [2] but the Athenians in the city, who while Pisistratus was collecting money and afterwards when he had taken Marathon took no notice of it, did now, and when they learned that he was marching from Marathon against Athens, they set out to attack him. [3] They came out with all their force to meet the returning exiles. Pisistratus' men encountered the enemy when they had reached the temple of Pallenian Athena in their march from Marathon towards the city, and encamped face to face with them. [4] There (by the providence of heaven) Pisistratus met Amphilytus the Acarnanian, a diviner, who came to him and prophesied as follows in hexameter verses: The cast is made, the net spread, The tunny-fish shall flash in the moonlit night. ","places":[{"placeId":"579925","name":"Eretria","startOffset":37,"endOffset":44},{"placeId":"579888","name":"Attica","startOffset":83,"endOffset":89},{"placeId":"580021","name":"Marathon","startOffset":119,"endOffset":127},{"placeId":"579885","name":"Athenians","startOffset":346,"endOffset":355},{"placeId":"580021","name":"Marathon","startOffset":445,"endOffset":453},{"placeId":"580021","name":"Marathon","startOffset":533,"endOffset":541},{"placeId":"579885","name":"Athens","startOffset":550,"endOffset":556},{"placeId":"580021","name":"Marathon","startOffset":767,"endOffset":775},{"placeId":"530767","name":"Acarnanian","startOffset":902,"endOffset":912}]},{"id":63,"text":"So Amphilytus spoke, being inspired; Pisistratus understood him and, saying that he accepted the prophecy, led his army against the enemy. The Athenians of the city had by this time had breakfast, and after breakfast some were dicing and some were sleeping: they were attacked by Pisistratus' men and put to flight. [2] So they fled, and Pisistratus devised a very subtle plan to keep them scattered and prevent them assembling again: he had his sons mount and ride forward: they overtook the fugitives and spoke to them as they were instructed by Pisistratus, telling them to take heart and each to depart to his home.","places":[{"placeId":"579885","name":"Athenians","startOffset":143,"endOffset":152}]},{"id":64,"text":"The Athenians did, and by this means Pisistratus gained Athens for the third time, rooting his sovereignty in a strong guard and revenue collected both from Athens and from the district of the river Strymon, and he took hostage the sons of the Athenians who remained and did not leave the city at once, and placed these in Naxos. [2] (He had conquered Naxos too and put Lygdamis in charge.) And besides this, he purified the island of Delos as a result of oracles, and this is how he did it: he removed all the dead that were buried in ground within sight of the temple and conveyed them to another part of Delos. [3] So Pisistratus was sovereign of Athens: and as for the Athenians, some had fallen in the battle, and some, with the Alcmeonids, were exiles from their native land.","places":[{"placeId":"579885","name":"Athenians","startOffset":4,"endOffset":13},{"placeId":"579885","name":"Athens","startOffset":56,"endOffset":62},{"placeId":"579885","name":"Athens","startOffset":157,"endOffset":163},{"placeId":"501629","name":"Strymon","startOffset":199,"endOffset":206},{"placeId":"579885","name":"Athenians","startOffset":244,"endOffset":253},{"placeId":"599821","name":"Naxos","startOffset":323,"endOffset":328},{"placeId":"599821","name":"Naxos","startOffset":352,"endOffset":357},{"placeId":"599588","name":"Delos","startOffset":435,"endOffset":440},{"placeId":"599588","name":"Delos","startOffset":607,"endOffset":612},{"placeId":"579885","name":"Athens","startOffset":650,"endOffset":656},{"placeId":"579885","name":"Athenians","startOffset":673,"endOffset":682}]},{"id":65,"text":"So Croesus learned that at that time such problems were oppressing the Athenians, but that the Lacedaemonians had escaped from the great evils and had mastered the Tegeans in war. In the kingship of Leon and Hegesicles at Sparta, the Lacedaemonians were successful in all their other wars but met disaster only against the Tegeans. [2] Before this they had been the worst-governed of nearly all the Hellenes and had had no dealings with strangers, but they changed to good government in this way: Lycurgus, a man of reputation among the Spartans, went to the oracle at Delphi. As soon as he entered the hall, the priestess said in hexameter: [3] You have come to my rich temple, Lycurgus, A man dear to Zeus and to all who have Olympian homes. I am in doubt whether to pronounce you man or god, But I think rather you are a god, Lycurgus.  [4] Some say that the Pythia also declared to him the constitution that now exists at Sparta, but the Lacedaemonians themselves say that Lycurgus brought it from Crete when he was guardian of his nephew Leobetes, the Spartan king. [5] Once he became guardian, he changed all the laws and took care that no one transgressed the new ones. Lycurgus afterwards established their affairs of war: the sworn divisions, the bands of thirty, the common meals; also the ephors and the council of elders.","places":[{"placeId":"579885","name":"Athenians","startOffset":71,"endOffset":80},{"placeId":"570685","name":"the Lacedaemonians","startOffset":91,"endOffset":109},{"placeId":"570707","name":"Tegea","startOffset":164,"endOffset":169},{"placeId":"570685","name":"Sparta","startOffset":222,"endOffset":228},{"placeId":"570685","name":"the Lacedaemonians","startOffset":230,"endOffset":248},{"placeId":"570707","name":"Tegea","startOffset":323,"endOffset":328},{"placeId":"570685","name":"Spartans","startOffset":537,"endOffset":545},{"placeId":"540726","name":"Delphi","startOffset":569,"endOffset":575},{"placeId":"540726","name":"Pythia","startOffset":864,"endOffset":870},{"placeId":"570685","name":"Sparta","startOffset":928,"endOffset":934},{"placeId":"570406","name":"Lacedaemonians","startOffset":944,"endOffset":958},{"placeId":"589748","name":"Crete","startOffset":1004,"endOffset":1009},{"placeId":"570685","name":"Spartan king","startOffset":1059,"endOffset":1071}]},{"id":66,"text":"Thus they changed their bad laws to good ones, and when Lycurgus died they built him a temple and now worship him greatly. Since they had good land and many men, they immediately flourished and prospered. They were not content to live in peace, but, confident that they were stronger than the Arcadians, asked the oracle at Delphi about gaining all the Arcadian land. [2] She replied in hexameter: You ask me for Arcadia? You ask too much; I grant it not. There are many men in Arcadia, eaters of acorns, Who will hinder you. But I grudge you not. I will give you Tegea to beat with your feet in dancing, And its fair plain to measure with a rope.  [3] When the Lacedaemonians heard the oracle reported, they left the other Arcadians alone and marched on Tegea carrying chains, relying on the deceptive oracle. They were confident they would enslave the Tegeans, but they were defeated in battle. [4] Those taken alive were bound in the very chains they had brought with them, and they measured the Tegean plain with a rope21 by working the fields. The chains in which they were bound were still preserved in my day, hanging up at the temple of Athena Alea.","places":[{"placeId":"570102","name":"Arcadians","startOffset":293,"endOffset":302},{"placeId":"540726","name":"Delphi","startOffset":324,"endOffset":330},{"placeId":"570102","name":"Arcadian land","startOffset":353,"endOffset":366},{"placeId":"570102","name":"Arcadia","startOffset":414,"endOffset":421},{"placeId":"570102","name":"Arcadia","startOffset":479,"endOffset":486},{"placeId":"570707","name":"Tegea","startOffset":565,"endOffset":570},{"placeId":"570406","name":"Lacedaemonians","startOffset":664,"endOffset":678},{"placeId":"570102","name":"Arcadians","startOffset":726,"endOffset":735},{"placeId":"570707","name":"Tegea","startOffset":757,"endOffset":762},{"placeId":"570707","name":"Tegeans","startOffset":856,"endOffset":863},{"placeId":"570707","name":"Tegean plain","startOffset":1001,"endOffset":1013}]},{"id":67,"text":"In the previous war the Lacedaemonians continually fought unsuccessfully against the Tegeans, but in the time of Croesus and the kingship of Anaxandrides and Ariston in Lacedaemon the Spartans had gained the upper hand. This is how: [2] when they kept being defeated by the Tegeans, they sent ambassadors to Delphi to ask which god they should propitiate to prevail against the Tegeans in war. The Pythia responded that they should bring back the bones of Orestes, son of Agamemnon. [3] When they were unable to discover Orestes' tomb, they sent once more to the god22 to ask where he was buried. The Pythia responded in hexameter to the messengers: [4] There is a place Tegea in the smooth plain of Arcadia, Where two winds blow under strong compulsion. Blow lies upon blow, woe upon woe. There the life-giving earth covers the son of Agamemnon. Bring him back, and you shall be lord of Tegea.  [5] When the Lacedaemonians heard this, they were no closer to discovery, though they looked everywhere. Finally it was found by Lichas, who was one of the Spartans who are called doers of good deeds.. These men are those citizens who retire from the knights, the five oldest each year. They have to spend the year in which they retire from the knights being sent here and there by the Spartan state, never resting in their efforts.","places":[{"placeId":"570685","name":"the Lacedaemonians","startOffset":20,"endOffset":38},{"placeId":"570707","name":"Tegea","startOffset":85,"endOffset":90},{"placeId":"570406","name":"Lacedaemon","startOffset":169,"endOffset":179},{"placeId":"570685","name":"Spartans","startOffset":184,"endOffset":192},{"placeId":"570707","name":"Tegeans","startOffset":274,"endOffset":281},{"placeId":"540726","name":"Delphi","startOffset":308,"endOffset":314},{"placeId":"570707","name":"Tegeans","startOffset":378,"endOffset":385},{"placeId":"540726","name":"Pythia","startOffset":398,"endOffset":404},{"placeId":"540726","name":"Pythia","startOffset":601,"endOffset":607},{"placeId":"570707","name":"Tegea","startOffset":672,"endOffset":677},{"placeId":"570102","name":"Arcadia","startOffset":701,"endOffset":708},{"placeId":"570707","name":"Tegea","startOffset":889,"endOffset":894},{"placeId":"570406","name":"Lacedaemonians","startOffset":911,"endOffset":925},{"placeId":"570685","name":"Spartans","startOffset":1054,"endOffset":1062},{"placeId":"570685","name":"Spartan state","startOffset":1286,"endOffset":1299}]},{"id":68,"text":"It was Lichas, one of these men, who found the tomb in Tegea by a combination of luck and skill. At that time there was free access to Tegea, so he went into a blacksmith's shop and watched iron being forged, standing there in amazement at what he saw done. [2] The smith perceived that he was amazed, so he stopped what he was doing and said, My Laconian guest, if you had seen what I saw, then you would really be amazed, since you marvel so at ironworking. [3] I wanted to dig a well in the courtyard here, and in my digging I hit upon a coffin twelve feet long. I could not believe that there had ever been men taller than now, so I opened it and saw that the corpse was just as long as the coffin. I measured it and then reburied it. So the smith told what he had seen, and Lichas thought about what was said and reckoned that this was Orestes, according to the oracle. [4] In the smith's two bellows he found the winds, hammer and anvil were blow upon blow, and the forging of iron was woe upon woe, since he figured that iron was discovered as an evil for the human race. [5] After reasoning this out, he went back to Sparta and told the Lacedaemonians everything. They made a pretence of bringing a charge against him and banishing him. Coming to Tegea, he explained his misfortune to the smith and tried to rent the courtyard, but the smith did not want to lease it. [6] Finally he persuaded him and set up residence there. He dug up the grave and collected the bones, then hurried off to Sparta with them. Ever since then the Spartans were far superior to the Tegeans whenever they met each other in battle. By the time of Croesus' inquiry, the Spartans had subdued most of the Peloponnese.","places":[{"placeId":"570707","name":"Tegea","startOffset":55,"endOffset":60},{"placeId":"570707","name":"Tegea","startOffset":135,"endOffset":140},{"placeId":"570406","name":"Laconian guest","startOffset":348,"endOffset":362},{"placeId":"570685","name":"Sparta","startOffset":1127,"endOffset":1133},{"placeId":"570406","name":"Lacedaemonians","startOffset":1147,"endOffset":1161},{"placeId":"570707","name":"Tegea","startOffset":1257,"endOffset":1262},{"placeId":"570685","name":"Sparta","startOffset":1500,"endOffset":1506},{"placeId":"570685","name":"Spartans","startOffset":1538,"endOffset":1546},{"placeId":"570707","name":"Tegeans","startOffset":1572,"endOffset":1579},{"placeId":"570685","name":"Spartans","startOffset":1657,"endOffset":1665},{"placeId":"570577","name":"Peloponnese","startOffset":1690,"endOffset":1701}]},{"id":69,"text":"Croesus, then, aware of all this, sent messengers to Sparta with gifts to ask for an alliance, having instructed them what to say. They came and said: [2] Croesus, King of Lydia and other nations, has sent us with this message: Lacedaemonians, the god has declared that I should make the Greek my friend; now, therefore, since I learn that you are the leaders of Hellas, I invite you, as the oracle bids; I would like to be your friend and ally, without deceit or guile. [3] Croesus proposed this through his messengers; and the Lacedaemonians, who had already heard of the oracle given to Croesus, welcomed the coming of the Lydians and swore to be his friends and allies; and indeed they were obliged by certain benefits which they had received before from the king. [4] For the Lacedaemonians had sent to Sardis to buy gold, intending to use it for the statue of Apollo which now stands on Thornax23 in Laconia; and Croesus, when they offered to buy it, made them a free gift of it.","places":[{"placeId":"570685","name":"Sparta","startOffset":53,"endOffset":59},{"placeId":"991385","name":"Lydia","startOffset":173,"endOffset":178},{"placeId":"570406","name":"Lacedaemonians","startOffset":230,"endOffset":244},{"placeId":"1001896","name":"Hellas","startOffset":365,"endOffset":371},{"placeId":"570685","name":"the Lacedaemonians","startOffset":529,"endOffset":547},{"placeId":"991385","name":"Lydians","startOffset":630,"endOffset":637},{"placeId":"570685","name":"the Lacedaemonians","startOffset":781,"endOffset":799},{"placeId":"550867","name":"Sardis","startOffset":812,"endOffset":818},{"placeId":"573556","name":"Thornax","startOffset":897,"endOffset":904},{"placeId":"570406","name":"Laconia","startOffset":910,"endOffset":917}]},{"id":70,"text":"For this reason, and because he had chosen them as his friends before all the other Greeks, the Lacedaemonians accepted the alliance. So they declared themselves ready to serve him when he should require, and moreover they made a bowl of bronze, engraved around the rim outside with figures, and large enough to hold twenty-seven hundred gallons, and brought it with the intention of making a gift in return to Croesus. [2] This bowl never reached Sardis, for which two reasons are given: the Lacedaemonians say that when the bowl was near Samos on its way to Sardis, the Samians descended upon them in warships and carried it off; [3] but the Samians themselves say that the Lacedaemonians who were bringing the bowl, coming too late, and learning that Sardis and Croesus were taken, sold it in Samos to certain private men, who set it up in the the temple of Hera. And it may be that the sellers of the bowl, when they returned to Sparta, said that they had been robbed of it by the Samians. Such are the tales about the bowl.","places":[{"placeId":"1001896","name":"Greeks","startOffset":84,"endOffset":90},{"placeId":"570406","name":"Lacedaemonians","startOffset":96,"endOffset":110},{"placeId":"550867","name":"Sardis","startOffset":448,"endOffset":454},{"placeId":"570406","name":"Lacedaemonians","startOffset":493,"endOffset":507},{"placeId":"599926","name":"Samos","startOffset":540,"endOffset":545},{"placeId":"550867","name":"Sardis","startOffset":560,"endOffset":566},{"placeId":"599925","name":"Samians","startOffset":572,"endOffset":579},{"placeId":"599925","name":"Samians","startOffset":644,"endOffset":651},{"placeId":"570685","name":"the Lacedaemonians","startOffset":672,"endOffset":690},{"placeId":"550867","name":"Sardis","startOffset":754,"endOffset":760},{"placeId":"599926","name":"Samos","startOffset":796,"endOffset":801},{"placeId":"570685","name":"Sparta","startOffset":933,"endOffset":939},{"placeId":"599925","name":"Samians","startOffset":985,"endOffset":992}]},{"id":71,"text":"Croesus, mistaking the meaning of the oracle, invaded Cappadocia, expecting to destroy Cyrus and the Persian power. [2] But while he was preparing to march against the Persians, a certain Lydian, who was already held to be a wise man, and who, from the advice which he now gave, won a great name among the Lydians, advised him as follows (his name was Sandanis): O King, you are getting ready to march against men who wear trousers of leather and whose complete wardrobe is of leather, and who eat not what they like but what they have; for their land is stony. [3] Further, they do not use wine, but drink water, have no figs to eat, or anything else that is good. Now if you conquer them, of what will you deprive them, since they have nothing? But if on the other hand you are conquered, then look how many good things you will lose; for once they have tasted of our blessings they will cling so tightly to them that nothing will pry them away. [4] For myself, then, I thank the gods that they do not put it in the heads of the Persians to march against the Lydians. Sandanis spoke thus but he did not persuade Croesus. Indeed, before they conquered the Lydians, the Persians had no luxury and no comforts.","places":[{"placeId":"991402","name":"Cappadocia","startOffset":54,"endOffset":64},{"placeId":"geonames-130758","name":"Persian","startOffset":101,"endOffset":108},{"placeId":"geonames-130758","name":"Persians","startOffset":168,"endOffset":176},{"placeId":"550701","name":"Lydian","startOffset":188,"endOffset":194},{"placeId":"991385","name":"Lydians","startOffset":306,"endOffset":313},{"placeId":"geonames-130758","name":"Persian","startOffset":1032,"endOffset":1039},{"placeId":"991385","name":"Lydians","startOffset":1062,"endOffset":1069},{"placeId":"991385","name":"Lydians","startOffset":1159,"endOffset":1166},{"placeId":"geonames-130758","name":"Persian","startOffset":1172,"endOffset":1179}]},{"id":72,"text":"Now the Cappadocians are called by the Greeks Syrians, and these Syrians before the Persian rule were subjects of the Medes, and, at this time, of Cyrus. [2] For the boundary of the Median and Lydian empires was the river Halys, which flows from the Armenian mountains first through Cilicia and afterwards between the Matieni on the right and the Phrygians on the other hand; then, passing these and still flowing north, it separates the Cappadocian Syrians on the right from the Paphlagonians on the left. [3] Thus the Halys river cuts off nearly the whole of the lower part of Asia from the Cyprian to the Euxine sea. Here is the narrowest neck of all this land; the length of the journey across for a man traveling unencumbered is five days.24","places":[{"placeId":"991402","name":"Cappadocians","startOffset":8,"endOffset":20},{"placeId":"1001896","name":"Greeks","startOffset":39,"endOffset":45},{"placeId":"1306","name":"Syrians","startOffset":46,"endOffset":53},{"placeId":"1306","name":"Syrians","startOffset":65,"endOffset":72},{"placeId":"geonames-130758","name":"Persian","startOffset":84,"endOffset":91},{"placeId":"903080","name":"Medes","startOffset":118,"endOffset":123},{"placeId":"903080","name":"Median","startOffset":182,"endOffset":188},{"placeId":"550701","name":"Lydian","startOffset":193,"endOffset":199},{"placeId":"857148","name":"Halys","startOffset":222,"endOffset":227},{"placeId":"874622","name":"Armenian mountains","startOffset":250,"endOffset":268},{"placeId":"628957","name":"Cilicia","startOffset":283,"endOffset":290},{"placeId":"884179","name":"Matieni","startOffset":318,"endOffset":325},{"placeId":"609502","name":"Phrygians","startOffset":347,"endOffset":356},{"placeId":"991402","name":"Cappadocian Syrians","startOffset":438,"endOffset":457},{"placeId":"845034","name":"Paphlagonians","startOffset":480,"endOffset":493},{"placeId":"857148","name":"Halys","startOffset":520,"endOffset":525},{"placeId":"1224","name":"Euxine sea","startOffset":608,"endOffset":618}]},{"id":73,"text":"The reasons for Croesus' expedition against Cappadocia were these: he desired to gain territory in addition to his own, and (these were the chief causes) he trusted the oracle and wished to avenge Astyages on Cyrus; for Cyrus, son of Cambyses, had conquered Astyages and held him in subjection. [2] Now Astyages, son of Cyaxares and the king of Media, was Croesus' brother-in-law: and this is how he came to be so. [3] A tribe of wandering Scythians separated itself from the rest, and escaped into Median territory. This was then ruled by Cyaxares, son of Phraortes, son of Deioces. Cyaxares at first treated the Scythians kindly, as suppliants for his mercy; and, as he had a high regard for them, he entrusted boys to their tutelage to be taught their language and the skill of archery. [4] As time went on, it happened that the Scythians, who were accustomed to go hunting and always to bring something back, once had taken nothing, and when they returned empty-handed, Cyaxares treated them very roughly and contemptuously (being, as appears from this, prone to anger). [5] The Scythians, feeling themselves wronged by the treatment they had from Cyaxares, planned to take one of the boys who were their pupils and cut him in pieces; then, dressing the flesh as they were accustomed to dress the animals which they killed, to bring and give it to Cyaxares as if it were the spoils of the hunt; and after that, to make their way with all speed to Alyattes son of Sadyattes at Sardis. All this they did. [6] Cyaxares and the guests who ate with him dined on the boy's flesh, and the Scythians, having done as they planned, fled to Alyattes for protection.","places":[{"placeId":"628949","name":"Cappadocia","startOffset":44,"endOffset":54},{"placeId":"903080","name":"Media","startOffset":345,"endOffset":350},{"placeId":"216976","name":"Scythians","startOffset":440,"endOffset":449},{"placeId":"903080","name":"Media","startOffset":499,"endOffset":504},{"placeId":"216976","name":"Scythians","startOffset":614,"endOffset":623},{"placeId":"216976","name":"Scythians","startOffset":832,"endOffset":841},{"placeId":"216976","name":"Scythians","startOffset":1083,"endOffset":1092},{"placeId":"550867","name":"Sardis","startOffset":1480,"endOffset":1486},{"placeId":"216976","name":"Scythians","startOffset":1586,"endOffset":1595}]},{"id":74,"text":"After this, since Alyattes would not give up the Scythians to Cyaxares at his demand, there was war between the Lydians and the Medes for five years; each won many victories over the other, and once they fought a battle by night. [2] They were still warring with equal success, when it happened, at an encounter which occurred in the sixth year, that during the battle the day was suddenly turned to night. Thales of Miletus had foretold this loss of daylight to the Ionians, fixing it within the year in which the change did indeed happen.25 [3] So when the Lydians and Medes saw the day turned to night, they stopped fighting, and both were the more eager to make peace. Those who reconciled them were Syennesis the Cilician and Labynetus the Babylonian; [4] they brought it about that there should be a sworn agreement and a compact of marriage between them: they judged that Alyattes should give his daughter Aryenis to Astyages, son of Cyaxares; for without strong constraint agreements will not keep their force. [6] These nations make sworn compacts as do the Greeks; and besides, when they cut the skin of their arms, they lick each other's blood.","places":[{"placeId":"216976","name":"Scythians","startOffset":49,"endOffset":58},{"placeId":"991385","name":"Lydians","startOffset":112,"endOffset":119},{"placeId":"903080","name":"Medes","startOffset":128,"endOffset":133},{"placeId":"599799","name":"Miletus","startOffset":417,"endOffset":424},{"placeId":"735295266","name":"Ionians","startOffset":467,"endOffset":474},{"placeId":"991385","name":"Lydians","startOffset":559,"endOffset":566},{"placeId":"903080","name":"Medes","startOffset":571,"endOffset":576},{"placeId":"658440","name":"Cilician","startOffset":718,"endOffset":726},{"placeId":"893951","name":"Babylonian","startOffset":745,"endOffset":755},{"placeId":"1001896","name":"Greeks","startOffset":1067,"endOffset":1073}]},{"id":75,"text":"Cyrus had subjugated this Astyages, then, Cyrus' own mother's father, for the reason which I shall presently disclose. [2] Having this reason to quarrel with Cyrus, Croesus sent to ask the oracles if he should march against the Persians; and when a deceptive answer came he thought it to be favorable to him, and so led his army into the Persian territory. [3] When he came to the river Halys, he transported his army across itby the bridges which were there then, as I maintain; but the general belief of the Greeks is that Thales of Miletus got the army across. [4] The story is that, as Croesus did not know how his army could pass the river (as the aforesaid bridges did not yet exist then), Thales, who was in the encampment, made the river, which flowed on the left of the army, also flow on the right, in the following way. [5] Starting from a point on the river upstream from the camp, he dug a deep semi-circular trench, so that the stream, turned from its ancient course, would flow in the trench to the rear of the camp and, passing it, would issue into its former bed, with the result that as soon as the river was thus divided into two, both channels could be forded. [6] Some even say that the ancient channel dried up altogether. But I do not believe this; for in that case, how did they pass the river when they were returning?","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":228,"endOffset":236},{"placeId":"geonames-130758","name":"Persian territory","startOffset":338,"endOffset":355},{"placeId":"857148","name":"Halys","startOffset":387,"endOffset":392},{"placeId":"1001896","name":"Greeks","startOffset":511,"endOffset":517},{"placeId":"599799","name":"Miletus","startOffset":536,"endOffset":543}]},{"id":76,"text":"Passing over with his army, Croesus then came to the part of Cappadocia called Pteria (it is the strongest part of this country and lies on the line of the city of Sinope on the Euxine sea), where he encamped and devastated the farms of the Syrians; [2] and he took and enslaved the city of the Pterians, and took all the places around it also, and drove the Syrians from their homes, though they had done him no harm. Cyrus, mustering his army, advanced to oppose Croesus, gathering to him all those who lived along the way. [3] But before beginning his march, he sent heralds to the Ionians to try to draw them away from Croesus. The Ionians would not be prevailed on; but when Cyrus arrived and encamped face to face with Croesus, there in the Pterian country the armies had a trial of strength. [4] The fighting was fierce, many on both sides fell, and at nightfall they disengaged with neither side victorious. The two sides contended thus.","places":[{"placeId":"628949","name":"Cappadocia","startOffset":61,"endOffset":71},{"placeId":"857294","name":"Pteria","startOffset":79,"endOffset":85},{"placeId":"857321","name":"Sinope","startOffset":164,"endOffset":170},{"placeId":"1224","name":"Euxine","startOffset":178,"endOffset":184},{"placeId":"1306","name":"Syrians","startOffset":241,"endOffset":248},{"placeId":"857294","name":"Pterians","startOffset":295,"endOffset":303},{"placeId":"1306","name":"Syrians","startOffset":359,"endOffset":366},{"placeId":"735295266","name":"Ionians","startOffset":585,"endOffset":592},{"placeId":"735295266","name":"Ionians","startOffset":636,"endOffset":643},{"placeId":"857294","name":"Pterian country","startOffset":747,"endOffset":762}]},{"id":77,"text":"Croesus was not content with the size of his force, for his army that had engaged was far smaller than that of Cyrus; therefore, when on the day after the battle Cyrus did not try attacking again, he marched away to Sardis, intending to summon the Egyptians in accordance with their treaty [2] (for before making an alliance with the Lacedaemonians he had made one also with Amasis king of Egypt), and to send for the Babylonians also (for with these too he had made an alliance, Labynetus at this time being their sovereign), [3] and to summon the Lacedaemonians to join him at a fixed time. He had in mind to muster all these forces and assemble his own army, then to wait until the winter was over and march against the Persians at the beginning of spring. [4] With such an intention, as soon as he returned to Sardis, he sent heralds to all his allies, summoning them to assemble at Sardis in five months' time; and as for the soldiers whom he had with him, who had fought with the Persians, all of them who were mercenaries he discharged, never thinking that after a contest so equal Cyrus would march against Sardis.","places":[{"placeId":"550867","name":"Sardis","startOffset":216,"endOffset":222},{"placeId":"981503","name":"Egyptians","startOffset":248,"endOffset":257},{"placeId":"570685","name":"the Lacedaemonians","startOffset":330,"endOffset":348},{"placeId":"981503","name":"Egypt","startOffset":390,"endOffset":395},{"placeId":"893951","name":"Babylonians","startOffset":418,"endOffset":429},{"placeId":"570685","name":"the Lacedaemonians","startOffset":545,"endOffset":563},{"placeId":"geonames-130758","name":"Persians","startOffset":723,"endOffset":731},{"placeId":"550867","name":"Sardis","startOffset":814,"endOffset":820},{"placeId":"550867","name":"Sardis","startOffset":887,"endOffset":893},{"placeId":"geonames-130758","name":"Persians","startOffset":986,"endOffset":994},{"placeId":"550867","name":"Sardis","startOffset":1115,"endOffset":1121}]},{"id":78,"text":"This was how Croesus reasoned. Meanwhile, snakes began to swarm in the outer part of the city; and when they appeared the horses, leaving their accustomed pasture, devoured them. When Croesus saw this he thought it a portent, and so it was. [2] He at once sent to the homes of the Telmessian interpreters,26 to inquire concerning it; but though his messengers came and learned from the Telmessians what the portent meant, they could not bring back word to Croesus, for he was a prisoner before they could make their voyage back to Sardis. [3] Nonetheless, this was the judgment of the Telmessians: that Croesus must expect a foreign army to attack his country, and that when it came, it would subjugate the inhabitants of the land: for the snake, they said, was the offspring of the land, but the horse was an enemy and a foreigner. This was the answer which the Telmessians gave Croesus, knowing as yet nothing of the fate of Sardis and of the king himself; but when they gave it, Croesus was already taken.","places":[{"placeId":"639137","name":"Telmessian interpreters","startOffset":281,"endOffset":304},{"placeId":"639137","name":"Telmessians","startOffset":386,"endOffset":397},{"placeId":"550867","name":"Sardis","startOffset":531,"endOffset":537},{"placeId":"639137","name":"Telmessians","startOffset":585,"endOffset":596},{"placeId":"639137","name":"Telmessians","startOffset":863,"endOffset":874},{"placeId":"550867","name":"Sardis","startOffset":927,"endOffset":933}]},{"id":79,"text":"When Croesus marched away after the battle in the Pterian country, Cyrus, learning that Croesus had gone intending to disband his army, deliberated and perceived that it would be opportune for him to march quickly against Sardis, before the power of the Lydians could be assembled again. [2] This he decided, and this he did immediately; he marched his army into Lydia and so came himself to bring the news of it to Croesus. All had turned out contrary to Croesus' expectation, and he was in a great quandary; nevertheless, he led out the Lydians to battle. [3] Now at this time there was no nation in Asia more valiant or warlike than the Lydian. It was their custom to fight on horseback, carrying long spears, and they were skillful at managing horses.","places":[{"placeId":"857294","name":"Pterian","startOffset":50,"endOffset":57},{"placeId":"550867","name":"Sardis","startOffset":222,"endOffset":228},{"placeId":"991385","name":"Lydians","startOffset":254,"endOffset":261},{"placeId":"550701","name":"Lydia","startOffset":363,"endOffset":368},{"placeId":"991385","name":"Lydians","startOffset":539,"endOffset":546},{"placeId":"550701","name":"Lydian","startOffset":640,"endOffset":646}]},{"id":80,"text":"So the armies met in the plain, wide and bare, that is before the city of Sardis: the Hyllus and other rivers flow across it and run violently together into the greatest of them, which is called Hermus (this flows from the mountain sacred to the Mother Dindymene27 and empties into the sea near the city of Phocaea). [2] When Cyrus saw the Lydians maneuvering their battle-lines here, he was afraid of their cavalry, and therefore at the urging of one Harpagus, a Mede, he did as I shall describe. Assembling all the camels that followed his army bearing food and baggage, he took off their burdens and mounted men upon them equipped like cavalrymen; having equipped them, he ordered them to advance before his army against Croesus' cavalry; he directed the infantry to follow the camels, and placed all his cavalry behind the infantry. [3] When they were all in order, he commanded them to kill all the other Lydians who came in their way, and spare none, but not to kill Croesus himself, even if he should defend himself against capture. [4] Such was his command. The reason for his posting the camels to face the cavalry was this: horses fear camels and can endure neither the sight nor the smell of them; this then was the intention of his maneuver, that Croesus' cavalry, on which the Lydian relied to distinguish himself, might be of no use. [5] So when battle was joined, as soon as the horses smelled and saw the camels they turned to flight, and all Croesus' hope was lost. [6] Nevertheless the Lydians were no cowards; when they saw what was happening, they leaped from their horses and fought the Persians on foot. Many of both armies fell; at length the Lydians were routed and driven within their city wall, where they were besieged by the Persians.","places":[{"placeId":"550867","name":"Sardis","startOffset":74,"endOffset":80},{"placeId":"550584","name":"Hyllus","startOffset":86,"endOffset":92},{"placeId":"550575","name":"Hermus","startOffset":195,"endOffset":201},{"placeId":"609361","name":"Mother Dindymene","startOffset":246,"endOffset":262},{"placeId":"550823","name":"Phocaea","startOffset":307,"endOffset":314},{"placeId":"991385","name":"Lydians","startOffset":340,"endOffset":347},{"placeId":"903080","name":"Mede","startOffset":464,"endOffset":468},{"placeId":"991385","name":"Lydians","startOffset":910,"endOffset":917},{"placeId":"550701","name":"Lydian","startOffset":1290,"endOffset":1296},{"placeId":"991385","name":"Lydians","startOffset":1504,"endOffset":1511},{"placeId":"geonames-130758","name":"Persians","startOffset":1608,"endOffset":1616},{"placeId":"991385","name":"Lydians","startOffset":1666,"endOffset":1673},{"placeId":"geonames-130758","name":"Persians","startOffset":1753,"endOffset":1761}]},{"id":81,"text":"So then they were besieged. But Croesus, supposing that the siege would last a long time, again sent messengers from the city to his allies; whereas the former envoys had been sent to summon them to muster at Sardis in five months' time, these were to announce that Croesus was besieged and to plead for help as quickly as possible.","places":[{"placeId":"550867","name":"Sardis","startOffset":209,"endOffset":215}]},{"id":82,"text":"So he sent to the Lacedaemonians as well as to the rest of the allies. Now at this very time the Spartans themselves were feuding with the Argives over the country called Thyrea; [2] for this was a part of the Argive territory which the Lacedaemonians had cut off and occupied. (All the land towards the west, as far as Malea, belonged then to the Argives, and not only the mainland, but the island of Cythera and the other islands.) [3] The Argives came out to save their territory from being cut off, then after debate the two armies agreed that three hundred of each side should fight, and whichever party won would possess the land. The rest of each army was to go away to its own country and not be present at the battle, since, if the armies remained on the field, the men of either party might render assistance to their comrades if they saw them losing. [4] Having agreed, the armies drew off, and picked men of each side remained and fought. Neither could gain advantage in the battle; at last, only three out of the six hundred were left, Alcenor and Chromios of the Argives, Othryades of the Lacedaemonians: these three were left alive at nightfall. [5] Then the two Argives, believing themselves victors, ran to Argos; but Othryades the Lacedaemonian, after stripping the Argive dead and taking the arms to his camp, waited at his position. On the second day both armies came to learn the issue. [6] For a while both claimed the victory, the Argives arguing that more of their men had survived, the Lacedaemonians showing that the Argives had fled, while their man had stood his ground and stripped the enemy dead. [7] At last from arguing they fell to fighting; many of both sides fell, but the Lacedaemonians gained the victory. The Argives, who before had worn their hair long by fixed custom, shaved their heads ever after and made a law, with a curse added to it, that no Argive grow his hair, and no Argive woman wear gold, until they recovered Thyreae; [8] and the Lacedaemonians made a contrary law, that they wear their hair long ever after; for until now they had not worn it so. Othryades, the lone survivor of the three hundred, was ashamed, it is said, to return to Sparta after all the men of his company had been killed, and killed himself on the spot at Thyreae.","places":[{"placeId":"570685","name":"the Lacedaemonians","startOffset":14,"endOffset":32},{"placeId":"570685","name":"Spartans","startOffset":97,"endOffset":105},{"placeId":"570106","name":"Argives","startOffset":139,"endOffset":146},{"placeId":"570736","name":"Thyrea","startOffset":171,"endOffset":177},{"placeId":"570106","name":"Argive territory","startOffset":210,"endOffset":226},{"placeId":"570406","name":"Lacedaemonians","startOffset":237,"endOffset":251},{"placeId":"570454","name":"Malea","startOffset":320,"endOffset":325},{"placeId":"570106","name":"Argives","startOffset":348,"endOffset":355},{"placeId":"570186","name":"Cythera","startOffset":402,"endOffset":409},{"placeId":"570106","name":"Argives","startOffset":442,"endOffset":449},{"placeId":"570106","name":"Argives","startOffset":1077,"endOffset":1084},{"placeId":"570406","name":"Lacedaemonians","startOffset":1103,"endOffset":1117},{"placeId":"570106","name":"Argives","startOffset":1178,"endOffset":1185},{"placeId":"570106","name":"Argos","startOffset":1224,"endOffset":1229},{"placeId":"570406","name":"Lacedaemonian","startOffset":1249,"endOffset":1262},{"placeId":"570106","name":"Argive dead","startOffset":1284,"endOffset":1295},{"placeId":"570106","name":"Argives","startOffset":1454,"endOffset":1461},{"placeId":"570406","name":"Lacedaemonians","startOffset":1511,"endOffset":1525},{"placeId":"570106","name":"Argives","startOffset":1543,"endOffset":1550},{"placeId":"570406","name":"Lacedaemonians","startOffset":1708,"endOffset":1722},{"placeId":"570106","name":"Argives","startOffset":1747,"endOffset":1754},{"placeId":"570106","name":"Argive","startOffset":1889,"endOffset":1895},{"placeId":"570106","name":"Argive woman","startOffset":1918,"endOffset":1930},{"placeId":"570736","name":"Thyreae","startOffset":1963,"endOffset":1970},{"placeId":"570406","name":"Lacedaemonians","startOffset":1984,"endOffset":1998},{"placeId":"570685","name":"Sparta","startOffset":2191,"endOffset":2197},{"placeId":"570736","name":"Thyreae","startOffset":2282,"endOffset":2289}]},{"id":83,"text":"The Sardian herald came after this had happened to the Spartans to ask for their help for Croesus, now besieged; nonetheless, when they heard the herald, they prepared to send help; but when they were already equipped and their ships ready, a second message came that the fortification of the Lydians was taken and Croesus a prisoner. Then, though very sorry indeed, they ceased their efforts.","places":[{"placeId":"550867","name":"Sardian herald","startOffset":4,"endOffset":18},{"placeId":"570685","name":"Spartans","startOffset":55,"endOffset":63},{"placeId":"991385","name":"Lydians","startOffset":293,"endOffset":300}]},{"id":84,"text":"This is how Sardis was taken. When Croesus had been besieged for fourteen days, Cyrus sent horsemen around in his army to promise to reward whoever first mounted the wall. [2] After this the army made an assault, but with no success. Then, when all the others were stopped, a certain Mardian28 called Hyroeades attempted to mount by a part of the acropolis where no guard had been set, since no one feared that it could be taken by an attack made here. [3] For here the height on which the acropolis stood is sheer and unlikely to be assaulted; this was the only place where Meles the former king of Sardis had not carried the lion which his concubine had borne him, the Telmessians having declared that if this lion were carried around the walls, Sardis could never be taken. Meles then carried the lion around the rest of the wall of the acropolis where it could be assaulted, but neglected this place, because the height was sheer and defied attack. It is on the side of the city which faces towards Tmolus. [4] The day before, then, Hyroeades, this Mardian, had seen one of the Lydians come down by this part of the acropolis after a helmet that had fallen down, and fetch it; he took note of this and considered it. [5] And now he climbed up himself, and other Persians after him. Many ascended, and thus Sardis was taken and all the city sacked.","places":[{"placeId":"550867","name":"Sardis","startOffset":12,"endOffset":18},{"placeId":"874588","name":"Mardian","startOffset":284,"endOffset":291},{"placeId":"550867","name":"Sardis","startOffset":600,"endOffset":606},{"placeId":"639137","name":"Telmessians","startOffset":671,"endOffset":682},{"placeId":"550867","name":"Sardis","startOffset":748,"endOffset":754},{"placeId":"550937","name":"Tmolus","startOffset":1003,"endOffset":1009},{"placeId":"874588","name":"Mardian","startOffset":1053,"endOffset":1060},{"placeId":"991385","name":"Lydians","startOffset":1082,"endOffset":1089},{"placeId":"geonames-130758","name":"Persians","startOffset":1266,"endOffset":1274},{"placeId":"550867","name":"Sardis","startOffset":1310,"endOffset":1316}]},{"id":85,"text":"I will now relate what happened to Croesus himself. He had a son, whom I have already mentioned, fine in other respects, but mute. Now in his days of prosperity past Croesus had done all that he could for his son; and besides resorting to other devices he had sent to Delphi to inquire of the oracle concerning him. [2] The Pythian priestess answered him thus: Lydian, king of many, greatly foolish Croesus, Wish not to hear in the palace the voice often prayed for Of your son speaking. It were better for you that he remain mute as before; For on an unlucky day shall he first speak.  [3] So at the taking of the fortification a certain Persian, not knowing who Croesus was, came at him meaning to kill him. Croesus saw him coming, but because of the imminent disaster he was past caring, and it made no difference to him whether he were struck and killed. [4] But this mute son, when he saw the Persian coming on, in fear and distress broke into speech and cried, Man, do not kill Croesus! This was the first word he uttered, and after that for all the rest of his life he had power of speech.","places":[{"placeId":"540726","name":"Delphi","startOffset":268,"endOffset":274},{"placeId":"540726","name":"Pythian priestess","startOffset":324,"endOffset":341},{"placeId":"550701","name":"Lydian","startOffset":363,"endOffset":369},{"placeId":"geonames-130758","name":"Persian","startOffset":643,"endOffset":650},{"placeId":"geonames-130758","name":"Persian","startOffset":902,"endOffset":909}]},{"id":86,"text":"The Persians gained Sardis and took Croesus prisoner. Croesus had ruled fourteen years and been besieged fourteen days. Fulfilling the oracle, he had destroyed his own great empire. The Persians took him and brought him to Cyrus, [2] who erected a pyre and mounted Croesus atop it, bound in chains, with twice seven sons of the Lydians beside him. Cyrus may have intended to sacrifice him as a victory-offering to some god, or he may have wished to fulfill a vow, or perhaps he had heard that Croesus was pious and put him atop the pyre to find out if some divinity would deliver him from being burned alive. [3] So Cyrus did this. As Croesus stood on the pyre, even though he was in such a wretched position it occurred to him that Solon had spoken with god's help when he had said that no one among the living is fortunate. When this occurred to him, he heaved a deep sigh and groaned aloud after long silence, calling out three times the name Solon. [4] Cyrus heard and ordered the interpreters to ask Croesus who he was invoking. They approached and asked, but Croesus kept quiet at their questioning, until finally they forced him and he said, I would prefer to great wealth his coming into discourse with all despots. Since what he said was unintelligible, they again asked what he had said, [5] persistently harassing him. He explained that first Solon the Athenian had come and seen all his fortune and spoken as if he despised it. Now everything had turned out for him as Solon had said, speaking no more of him than of every human being, especially those who think themselves fortunate. While Croesus was relating all this, the pyre had been lit and the edges were on fire. [6] When Cyrus heard from the interpreters what Croesus said, he relented and considered that he, a human being, was burning alive another human being, one his equal in good fortune. In addition, he feared retribution, reflecting how there is nothing stable in human affairs. He ordered that the blazing fire be extinguished as quickly as possible, and that Croesus and those with him be taken down, but despite their efforts they could not master the fire.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":4,"endOffset":12},{"placeId":"550867","name":"Sardis","startOffset":20,"endOffset":26},{"placeId":"geonames-130758","name":"Persians","startOffset":186,"endOffset":194},{"placeId":"991385","name":"Lydians","startOffset":328,"endOffset":335},{"placeId":"579885","name":"Athenian","startOffset":1368,"endOffset":1376}]},{"id":87,"text":"Then the Lydians say that Croesus understood Cyrus' change of heart, and when he saw everyone trying to extinguish the fire but unable to check it, he invoked Apollo, crying out that if Apollo had ever been given any pleasing gift by him, let him offer help and deliver him from the present evil. [2] Thus he in tears invoked the god, and suddenly out of a clear and windless sky clouds gathered, a storm broke, and it rained violently, extinguishing the pyre. Thus Cyrus perceived that Croesus was dear to god and a good man. He had him brought down from the pyre and asked, [3] Croesus, what man persuaded you to wage war against my land and become my enemy instead of my friend? He replied, O King, I acted thus for your good fortune, but for my own ill fortune. The god of the Hellenes is responsible for these things, inciting me to wage war. [4] No one is so foolish as to choose war over peace. In peace sons bury their fathers, in war fathers bury their sons. But I suppose it was dear to the divinity that this be so.","places":[{"placeId":"991385","name":"Lydians","startOffset":9,"endOffset":16}]},{"id":88,"text":"Croesus said this, and Cyrus freed him and made him sit near and was very considerate to him, and both he and all that were with him were astonished when they looked at Croesus. He for his part was silent, deep in thought. [2] Presently he turned and said (for he saw the Persians sacking the city of the Lydians), O King, am I to say to you what is in my mind now, or keep silent? When Cyrus urged him to speak up boldly, Croesus asked, [3] The multitude there, what is it at which they are so busily engaged? They are plundering your city, said Cyrus, and carrying off your possessions. No, Croesus answered, not my city, and not my possessions; for I no longer have any share of all this; it is your wealth that they are pillaging.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":272,"endOffset":280},{"placeId":"991385","name":"Lydians","startOffset":305,"endOffset":312}]},{"id":89,"text":"Cyrus thought about what Croesus had said and, telling the rest to withdraw, asked Croesus what fault he saw in what was being done. Since the gods have made me your slave, replied the Lydian, it is right that if I have any further insight I should point it out to you. [2] The Persians being by nature violent men are poor; so if you let them seize and hold great possessions, you may expect that he who has got most will revolt against you. Therefore do this, if you like what I say. [3] Have men of your guard watch all the gates; let them take the spoil from those who are carrying it out, and say that it must be paid as a tithe to Zeus. Thus you shall not be hated by them for taking their wealth by force, and they, recognizing that you act justly, will give up the spoil willingly.","places":[{"placeId":"550701","name":"Lydian","startOffset":187,"endOffset":193},{"placeId":"geonames-130758","name":"Persians","startOffset":281,"endOffset":289}]},{"id":90,"text":"When Cyrus heard this, he was exceedingly pleased, for he believed the advice good; and praising him greatly, and telling his guard to act as Croesus had advised, he said: Croesus, now that you, a king, are determined to act and to speak with integrity, ask me directly for whatever favor you like. [2] Master, said Croesus, you will most gratify me if you will let me send these chains of mine to that god of the Greeks whom I especially honored and to ask him if it is his way to deceive those who serve him well. When Cyrus asked him what grudge against the god led him to make this request, [3] Croesus repeated to him the story of all his own aspirations, and the answers of the oracles, and more particularly his offerings, and how the oracle had encouraged him to attack the Persians; and so saying he once more insistently pled that he be allowed to reproach the god for this. At this Cyrus smiled, and replied, This I will grant you, Croesus, and whatever other favor you may ever ask me. [4] When Croesus heard this, he sent Lydians to Delphi, telling them to lay his chains on the doorstep of the temple, and to ask the god if he were not ashamed to have persuaded Croesus to attack the Persians, telling him that he would destroy Cyrus' power; of which power (they were to say, showing the chains) these were the first-fruits. They should ask this; and further, if it were the way of the Greek gods to be ungrateful.","places":[{"placeId":"1001896","name":"Greeks","startOffset":419,"endOffset":425},{"placeId":"geonames-130758","name":"Persians","startOffset":788,"endOffset":796},{"placeId":"991385","name":"Lydians","startOffset":1043,"endOffset":1050},{"placeId":"540726","name":"Delphi","startOffset":1054,"endOffset":1060},{"placeId":"geonames-130758","name":"Persians","startOffset":1206,"endOffset":1214}]},{"id":91,"text":"When the Lydians came, and spoke as they had been instructed, the priestess (it is said) made the following reply. No one may escape his lot, not even a god. Croesus has paid for the sin of his ancestor of the fifth generation before, who was led by the guile of a woman to kill his master, though he was one of the guard of the Heraclidae, and who took to himself the royal state of that master, to which he had no right. [2] And it was the wish of Loxias that the evil lot of Sardis fall in the lifetime of Croesus' sons, not in his own; but he could not deflect the Fates. [3] Yet as far as they gave in, he did accomplish his wish and favor Croesus: for he delayed the taking of Sardis for three years. And let Croesus know this: that although he is now taken, it is by so many years later than the destined hour. And further, Loxias saved Croesus from burning. [4] But as to the oracle that was given to him, Croesus is wrong to complain concerning it. For Loxias declared to him that if he led an army against the Persians, he would destroy a great empire. Therefore he ought, if he had wanted to plan well, to have sent and asked whether the god spoke of Croesus' or of Cyrus' empire. But he did not understood what was spoken, or make further inquiry: for which now let him blame himself. [5] When he asked that last question of the oracle and Loxias gave him that answer concerning the mule, even that Croesus did not understand. For that mule was in fact Cyrus, who was the son of two parents not of the same people, of whom the mother was better and the father inferior: [6] for she was a Mede and the daughter of Astyages king of the Medes; but he was a Persian and a subject of the Medes and although in all respects her inferior he married this lady of his. This was the answer of the priestess to the Lydians. They carried it to Sardis and told Croesus, and when he heard it, he confessed that the sin was not the god's, but his. And this is the story of Croesus' rule, and of the first overthrow of Ionia.","places":[{"placeId":"991385","name":"Lydians","startOffset":9,"endOffset":16},{"placeId":"550867","name":"Sardis","startOffset":479,"endOffset":485},{"placeId":"550867","name":"Sardis","startOffset":684,"endOffset":690},{"placeId":"geonames-130758","name":"Persians","startOffset":1021,"endOffset":1029},{"placeId":"903080","name":"Mede","startOffset":1601,"endOffset":1605},{"placeId":"903080","name":"Medes","startOffset":1647,"endOffset":1652},{"placeId":"geonames-130758","name":"Persian","startOffset":1667,"endOffset":1674},{"placeId":"903080","name":"Medes","startOffset":1696,"endOffset":1701},{"placeId":"991385","name":"Lydians","startOffset":1818,"endOffset":1825},{"placeId":"550867","name":"Sardis","startOffset":1846,"endOffset":1852},{"placeId":"550597","name":"Ionia","startOffset":2017,"endOffset":2022}]},{"id":92,"text":"There are many offerings of Croesus' in Hellas, and not only those of which I have spoken. There is a golden tripod at Thebes in Boeotia, which he dedicated to Apollo of Ismenus; at Ephesus29 there are the oxen of gold and the greater part of the pillars; and in the temple of Proneia at Delphi, a golden shield.30 All these survived to my lifetime; but other of the offerings were destroyed. [2] And the offerings of Croesus at Branchidae of the Milesians, as I learn by inquiry, are equal in weight and like those at Delphi. Those which he dedicated at Delphi and the shrine of Amphiaraus were his own, the first-fruits of the wealth inherited from his father; the rest came from the estate of an enemy who had headed a faction against Croesus before he became king, and conspired to win the throne of Lydia for Pantaleon. [3] This Pantaleon was a son of Alyattes, and half-brother of Croesus: Croesus was Alyattes' son by a Carian and Pantaleon by an Ionian mother. [4] So when Croesus gained the sovereignty by his father's gift, he put the man who had conspired against him to death by drawing him across a carding-comb, and first confiscated his estate, then dedicated it as and where I have said. This is all that I shall say of Croesus' offerings.","places":[{"placeId":"1001896","name":"Hellas","startOffset":40,"endOffset":46},{"placeId":"541138","name":"Thebes","startOffset":119,"endOffset":125},{"placeId":"540689","name":"Boeotia","startOffset":129,"endOffset":136},{"placeId":"599612","name":"Ephesus","startOffset":182,"endOffset":189},{"placeId":"540726","name":"Delphi","startOffset":288,"endOffset":294},{"placeId":"599593","name":"Branchidae","startOffset":429,"endOffset":439},{"placeId":"599799","name":"Milesians","startOffset":447,"endOffset":456},{"placeId":"540726","name":"Delphi","startOffset":519,"endOffset":525},{"placeId":"540726","name":"Delphi","startOffset":555,"endOffset":561},{"placeId":"540628","name":"Amphiaraus","startOffset":580,"endOffset":590},{"placeId":"991385","name":"Lydia","startOffset":804,"endOffset":809},{"placeId":"991381","name":"Carian","startOffset":927,"endOffset":933},{"placeId":"550597","name":"Ionian mother","startOffset":954,"endOffset":967}]},{"id":93,"text":"There are not many marvellous things in Lydia to record, in comparison with other countries, except the gold dust that comes down from Tmolus. [2] But there is one building to be seen there which is much the greatest of all, except those of Egypt and Babylon. In Lydia is the tomb of Alyattes, the father of Croesus, the base of which is made of great stones and the rest of it of mounded earth. It was built by the men of the market and the craftsmen and the prostitutes. [3] There survived until my time five corner-stones set on the top of the tomb, and in these was cut the record of the work done by each group: and measurement showed that the prostitutes' share of the work was the greatest. [4] All the daughters of the common people of Lydia ply the trade of prostitutes, to collect dowries, until they can get themselves husbands; and they themselves offer themselves in marriage. [5] Now this tomb has a circumference of thirteen hundred and ninety yards, and its breadth is above four hundred and forty yards; and there is a great lake hard by the tomb, which, the Lydians say, is fed by ever-flowing springs; it is called the Gygaean lake. Such then is this tomb.","places":[{"placeId":"991385","name":"Lydia","startOffset":40,"endOffset":45},{"placeId":"550937","name":"Tmolus","startOffset":135,"endOffset":141},{"placeId":"766","name":"Egypt","startOffset":241,"endOffset":246},{"placeId":"893951","name":"Babylon","startOffset":251,"endOffset":258},{"placeId":"991385","name":"Lydia","startOffset":263,"endOffset":268},{"placeId":"550428","name":"tomb of Alyattes","startOffset":276,"endOffset":292},{"placeId":"991385","name":"Lydia","startOffset":744,"endOffset":749},{"placeId":"550428","name":"tomb","startOffset":903,"endOffset":907},{"placeId":"550428","name":"tomb","startOffset":1059,"endOffset":1063},{"placeId":"991385","name":"Lydians","startOffset":1076,"endOffset":1083},{"placeId":"550556","name":"Gygaean lake","startOffset":1138,"endOffset":1150}]},{"id":94,"text":"The customs of the Lydians are like those of the Greeks, except that they make prostitutes of their female children. They were the first men whom we know who coined and used gold and silver currency; and they were the first to sell by retail. [2] And, according to what they themselves say, the games now in use among them and the Greeks were invented by the Lydians: these, they say, were invented among them at the time when they colonized Tyrrhenia. This is their story: [3] In the reign of Atys son of Manes there was great scarcity of food in all Lydia. For a while the Lydians bore this with what patience they could; presently, when the famine did not abate, they looked for remedies, and different plans were devised by different men. Then it was that they invented the games of dice and knuckle-bones and ball and all other forms of game except dice, which the Lydians do not claim to have discovered. [4] Then, using their discovery to lighten the famine, every other day they would play for the whole day, so that they would not have to look for food, and the next day they quit their play and ate. This was their way of life for eighteen years. [5] But the famine did not cease to trouble them, and instead afflicted them even more. At last their king divided the people into two groups, and made them draw lots, so that the one group should remain and the other leave the country; he himself was to be the head of those who drew the lot to remain there, and his son, whose name was Tyrrhenus, of those who departed. [6] Then the one group, having drawn the lot, left the country and came down to Smyrna and built ships, in which they loaded all their goods that could be transported aboard ship, and sailed away to seek a livelihood and a country; until at last, after sojourning with one people after another, they came to the Ombrici,31 where they founded cities and have lived ever since. [7] They no longer called themselves Lydians, but Tyrrhenians, after the name of the king's son who had led them there.The Lydians, then, were enslaved by the Persians.","places":[{"placeId":"991385","name":"Lydians","startOffset":19,"endOffset":26},{"placeId":"1001896","name":"Greeks","startOffset":49,"endOffset":55},{"placeId":"1001896","name":"Greeks","startOffset":331,"endOffset":337},{"placeId":"991385","name":"Lydians","startOffset":359,"endOffset":366},{"placeId":"413122","name":"Tyrrhenia","startOffset":442,"endOffset":451},{"placeId":"550701","name":"Lydia","startOffset":552,"endOffset":557},{"placeId":"991385","name":"Lydians","startOffset":575,"endOffset":582},{"placeId":"991385","name":"Lydians","startOffset":870,"endOffset":877},{"placeId":"550893","name":"Smyrna","startOffset":1609,"endOffset":1615},{"placeId":"991385","name":"Lydians","startOffset":1942,"endOffset":1949},{"placeId":"413122","name":"Tyrrhenians","startOffset":1955,"endOffset":1966},{"placeId":"991385","name":"Lydians","startOffset":2028,"endOffset":2035},{"placeId":"geonames-130758","name":"Persians","startOffset":2064,"endOffset":2072}]},{"id":95,"text":"But the next business of my history is to inquire who this Cyrus was who took down the power of Croesus, and how the Persians came to be the rulers of Asia. I mean then to be guided in what I write by some of the Persians who desire not to magnify the story of Cyrus but to tell the truth, though there are no less than three other accounts of Cyrus which I could give. [2]After the Assyrians had ruled Upper Asia for five hundred and twenty years,32 the Medes were the first who began to revolt from them. These, it would seem, proved their bravery in fighting for freedom against the Assyrians; they cast off their slavery and won freedom. Afterwards, the other subject nations, too, did the same as the Medes.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":117,"endOffset":125},{"placeId":"geonames-130758","name":"Persians","startOffset":213,"endOffset":221},{"placeId":"29492","name":"Assyrians","startOffset":383,"endOffset":392},{"placeId":"903080","name":"Medes","startOffset":455,"endOffset":460},{"placeId":"29492","name":"Assyrians","startOffset":586,"endOffset":595},{"placeId":"903080","name":"Medes","startOffset":706,"endOffset":711}]},{"id":96,"text":"All of those on the mainland were now free men; but they came to be ruled by monarchs again, as I will now relate. There was among the Medes a clever man called Deioces: he was the son of Phraortes. [2] Deioces was infatuated with sovereignty, and so he set about gaining it. Already a notable man in his own town (one of the many towns into which Media was divided), he began to profess and practice justice more constantly and zealously than ever, and he did this even though there was much lawlessness throughout the land of Media, and though he knew that injustice is always the enemy of justice. Then the Medes of the same town, seeing his behavior, chose him to be their judge, and he (for he coveted sovereign power) was honest and just. [3] By acting so, he won no small praise from his fellow townsmen, to such an extent that when the men of the other towns learned that Deioces alone gave fair judgments (having before suffered from unjust decisions), they came often and gladly to plead before Deioces; and at last they would submit to no arbitration but his.","places":[{"placeId":"903080","name":"Medes","startOffset":135,"endOffset":140},{"placeId":"903080","name":"Media","startOffset":348,"endOffset":353},{"placeId":"903080","name":"Media","startOffset":528,"endOffset":533},{"placeId":"903080","name":"Medes","startOffset":610,"endOffset":615}]},{"id":97,"text":"The number of those who came grew ever greater, for they heard that each case turned out in accord with the truth. Then Deioces, seeing that everything now depended on him, would not sit in his former seat of judgment, and said he would give no more decisions; for it was of no advantage to him (he said) to leave his own business and spend all day judging the cases of his neighbors. [2] This caused robbery and lawlessness to increase greatly in the towns; and, gathering together, the Medes conferred about their present affairs, and said (here, as I suppose, the main speakers were Deioces' friends), [3] Since we cannot go on living in the present way in the land, come, let us set up a king over us; in this way the land will be well governed, and we ourselves shall attend to our business and not be routed by lawlessness. With such words they persuaded themselves to be ruled by a king.","places":[{"placeId":"903080","name":"Medes","startOffset":488,"endOffset":493}]},{"id":98,"text":"The question was at once propounded: Whom should they make king? Then every man was loud in putting Deioces forward and praising Deioces, until they agreed that he should be their king. [2] He ordered them to build him houses worthy of his royal power, and strengthen him with a bodyguard. The Medes did so. They built him a big and strong house wherever in the land he indicated to them, and let him choose a bodyguard out of all the Medes. [3] And having obtained power, he forced the Medes to build him one city and to fortify and care for this more strongly than all the rest. The Medes did this for him, too. So he built the big and strong walls, one standing inside the next in circles, which are now called Ecbatana.33 [4] This fortress is so designed that each circle of walls is higher than the next outer circle by no more than the height of its battlements; to which plan the site itself, on a hill in the plain, contributes somewhat, but chiefly it was accomplished by skill. [5] There are seven circles in all; within the innermost circle are the palace and the treasuries; and the longest wall is about the length of the wall that surrounds the city of Athens.34 The battlements of the first circle are white, of the second black, of the third circle purple, of the fourth blue, and of the fifth orange: [6] thus the battlements of five circles are painted with colors; and the battlements of the last two circles are coated, the one with silver and the other with gold.","places":[{"placeId":"903080","name":"Medes","startOffset":294,"endOffset":299},{"placeId":"903080","name":"Medes","startOffset":435,"endOffset":440},{"placeId":"903080","name":"Medes","startOffset":487,"endOffset":492},{"placeId":"903080","name":"Medes","startOffset":585,"endOffset":590},{"placeId":"903021","name":"Ecbatana","startOffset":714,"endOffset":722},{"placeId":"579885","name":"Athens","startOffset":1167,"endOffset":1173}]},{"id":99,"text":"Deioces built these walls for himself and around his own quarters, and he ordered the people to dwell outside the wall. And when it was all built, Deioces was first to establish the rule that no one should come into the presence of the king, but everything should be done by means of messengers; that the king should be seen by no one; and moreover that it should be a disgrace for anyone to laugh or to spit in his presence. [2] He was careful to hedge himself with all this so that the men of his own age (who had been brought up with him and were as nobly born as he and his equals in courage), instead of seeing him and being upset and perhaps moved to plot against him, might by reason of not seeing him believe him to be different.35","places":[]},{"id":100,"text":"When he had made these arrangements and strengthened himself with sovereign power, he was a hard man in the protection of justice. They would write down their pleas and send them in to him; then he would pass judgment on what was brought to him and send his decisions out. [2] This was his manner of deciding cases at law, and he had other arrangements too; for when he heard that a man was doing violence he would send for him and punish him as each offense deserved: and he had spies and eavesdroppers everywhere in his domain.","places":[]},{"id":101,"text":"Deioces, then, united the Median nation by itself and ruled it. The Median tribes are these: the Busae, the Paretaceni, the Struchates, the Arizanti, the Budii, the Magi. Their tribes are this many.","places":[{"placeId":"903080","name":"Median nation","startOffset":26,"endOffset":39},{"placeId":"903080","name":"Median tribes","startOffset":68,"endOffset":81}]},{"id":102,"text":"Deioces had a son, Phraortes, who inherited the throne when Deioces died after a reign of fifty-three years.36 Having inherited it, he was not content to rule the Medes alone: marching against the Persians, he attacked them first, and they were the first whom he made subject to the Medes. [2] Then, with these two strong nations at his back, he subjugated one nation of Asia after another, until he marched against the Assyrians; that is, against those of the Assyrians who held Ninus. These had formerly been rulers of all; but now their allies had deserted them and they were left alone, though well-off themselves. Marching against these Assyrians, then, Phraortes and most of his army perished, after he had reigned twenty-two years.","places":[{"placeId":"903080","name":"Medes","startOffset":163,"endOffset":168},{"placeId":"geonames-130758","name":"Persians","startOffset":197,"endOffset":205},{"placeId":"903080","name":"Medes","startOffset":283,"endOffset":288},{"placeId":"29492","name":"Assyrians","startOffset":420,"endOffset":429},{"placeId":"29492","name":"Assyrians","startOffset":461,"endOffset":470},{"placeId":"874621","name":"Ninus","startOffset":480,"endOffset":485},{"placeId":"29492","name":"Assyrians","startOffset":642,"endOffset":651}]},{"id":103,"text":"At his death he was succeeded by his son Cyaxares. He is said to have been a much greater soldier than his ancestors: it was he who first organized the men of Asia in companies and posted each arm apart, the spearmen and archers and cavalry: before this they were all mingled together in confusion. [2] This was the king who fought against the Lydians when the day was turned to night in the battle, and who united under his dominion all of Asia that is beyond the river Halys. Collecting all his subjects, he marched against Ninus, wanting to avenge his father and to destroy the city. [3] He defeated the Assyrians in battle; but while he was besieging their city, a great army of Scythians came down upon him, led by their king Madyes son of Protothyes. They had invaded Asia after they had driven the Cimmerians out of Europe: pursuing them in their flight, the Scythians came to the Median country.37","places":[{"placeId":"991385","name":"Lydians","startOffset":344,"endOffset":351},{"placeId":"857148","name":"Halys","startOffset":471,"endOffset":476},{"placeId":"874621","name":"Ninus","startOffset":526,"endOffset":531},{"placeId":"29492","name":"Assyrians","startOffset":607,"endOffset":616},{"placeId":"216976","name":"Scythians","startOffset":683,"endOffset":692},{"placeId":"geonames-735731","name":"Cimmerians","startOffset":805,"endOffset":815},{"placeId":"216976","name":"Scythians","startOffset":866,"endOffset":875},{"placeId":"903080","name":"Median country","startOffset":888,"endOffset":902}]},{"id":104,"text":"It is a thirty days' journey for an unencumbered man from the Maeetian lake38 to the river Phasis and the land of the Colchi; from the Colchi it is an easy matter to cross into Media: there is only one nation between, the Saspires; to pass these is to be in Media. [2] Nevertheless, it was not by this way that the Scythians entered; they turned aside and came by the upper and much longer way, keeping the Caucasian mountains on their right. There, the Medes met the Scythians, who defeated them in battle, deprived them of their rule, and made themselves masters of all Asia.","places":[{"placeId":"825318","name":"Maeetian lake","startOffset":62,"endOffset":75},{"placeId":"863867","name":"Phasis","startOffset":91,"endOffset":97},{"placeId":"863770","name":"Colchi","startOffset":118,"endOffset":124},{"placeId":"863770","name":"Colchi","startOffset":135,"endOffset":141},{"placeId":"903080","name":"Media","startOffset":177,"endOffset":182},{"placeId":"903080","name":"Media","startOffset":258,"endOffset":263},{"placeId":"216976","name":"Scythians","startOffset":315,"endOffset":324},{"placeId":"863766","name":"Caucasian mountains","startOffset":407,"endOffset":426},{"placeId":"903080","name":"Medes","startOffset":454,"endOffset":459},{"placeId":"216976","name":"Scythians","startOffset":468,"endOffset":477}]},{"id":105,"text":"From there they marched against Egypt: and when they were in the part of Syria called Palestine, Psammetichus king of Egypt met them and persuaded them with gifts and prayers to come no further. [2] So they turned back, and when they came on their way to the city of Ascalon in Syria, most of the Scythians passed by and did no harm, but a few remained behind and plundered the temple of Heavenly Aphrodite.39 [3] This temple, I discover from making inquiry, is the oldest of all the temples of the goddess, for the temple in Cyprus was founded from it, as the Cyprians themselves say; and the temple on Cythera was founded by Phoenicians from this same land of Syria. [4] But the Scythians who pillaged the temple, and all their descendants after them, were afflicted by the goddess with the female sickness: and so the Scythians say that they are afflicted as a consequence of this and also that those who visit Scythian territory see among them the condition of those whom the Scythians call Hermaphrodites.40","places":[{"placeId":"981503","name":"Egypt","startOffset":32,"endOffset":37},{"placeId":"981550","name":"Syria","startOffset":73,"endOffset":78},{"placeId":"216976","name":"Scythians","startOffset":297,"endOffset":306},{"placeId":"707498","name":"Cyprus","startOffset":526,"endOffset":532},{"placeId":"678334","name":"Phoenicians","startOffset":627,"endOffset":638},{"placeId":"216976","name":"Scythians","startOffset":681,"endOffset":690},{"placeId":"216976","name":"Scythians","startOffset":823,"endOffset":832},{"placeId":"216976","name":"Scythians","startOffset":982,"endOffset":991}]},{"id":106,"text":"The Scythians, then, ruled Asia for twenty-eight years: and the whole land was ruined because of their violence and their pride, for, besides exacting from each the tribute which was assessed, they rode about the land carrying off everyone's possessions. [2] Most of them were entertained and made drunk and then slain by Cyaxares and the Medes: so thus the Medes took back their empire and all that they had formerly possessed; and they took Ninus (how, I will describe in a later part of my history), and brought all Assyria except the province of Babylon under their rule.","places":[{"placeId":"216976","name":"Scythians","startOffset":4,"endOffset":13},{"placeId":"903080","name":"Medes","startOffset":339,"endOffset":344},{"placeId":"903080","name":"Medes","startOffset":358,"endOffset":363},{"placeId":"874621","name":"Ninus","startOffset":443,"endOffset":448},{"placeId":"29492","name":"Assyria","startOffset":519,"endOffset":526},{"placeId":"893951","name":"Babylon","startOffset":550,"endOffset":557}]},{"id":107,"text":"Afterwards, Cyaxares died after a reign of forty years (among which I count the years of the Scythian domination) and his son Astyages inherited the sovereignty.Astyages had a daughter, whom he called Mandane: he dreamed that she urinated so much that she filled his city and flooded all of Asia. He communicated this vision to those of the Magi who interpreted dreams, and when he heard what they told him he was terrified; [2] and presently, when Mandane was of marriageable age, he feared the vision too much to give her to any Mede worthy to marry into his family, but married her to a Persian called Cambyses, a man whom he knew to be wellborn and of a quiet temper: for Astyages held Cambyses to be much lower than a Mede of middle rank.","places":[{"placeId":"903080","name":"Mede","startOffset":531,"endOffset":535},{"placeId":"geonames-130758","name":"Persian","startOffset":590,"endOffset":597},{"placeId":"903080","name":"Mede","startOffset":723,"endOffset":727}]},{"id":108,"text":"But during the first year that Mandane was married to Cambyses, Astyages saw a second vision. He dreamed that a vine grew out of the genitals of this daughter, and that the vine covered the whole of Asia. [2] Having seen this vision, and communicated it to the interpreters of dreams, he sent to the Persians for his daughter, who was about to give birth, and when she arrived kept her guarded, meaning to kill whatever child she bore: for the interpreters declared that the meaning of his dream was that his daughter's offspring would rule in his place. [3] Anxious to prevent this, Astyages, when Cyrus was born, summoned Harpagus, a man of his household who was his most faithful servant among the Medes and was administrator of all that was his, and he said: [4] Harpagus, whatever business I turn over to you, do not mishandle it, and do not leave me out of account and, giving others preference, trip over your own feet afterwards. Take the child that Mandane bore, and carry him to your house, and kill him; and then bury him however you like. [5] O King, Harpagus answered, never yet have you noticed anything displeasing in your man; and I shall be careful in the future, too, not to err in what concerns you. If it is your will that this be done, then my concern ought to be to attend to it scrupulously.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":300,"endOffset":308},{"placeId":"903080","name":"Medes","startOffset":701,"endOffset":706}]},{"id":109,"text":"Harpagus answered thus. The child was then given to him, consigned to its death, and he went to his house weeping. When he came in, he told his wife the entire speech uttered by Astyages. [2] Now, then, she said to him, what do you propose to do? Not to obey Astyages' instructions, he answered, not even if he should lose his mind and be more frantic than he is now: I will not lend myself to his plan or be an accessory to such a murder. [3] There are many reasons why I will not kill him: because the child is related to me, and because Astyages is old and has no male children. [4] Now if the sovereignty passes to this daughter of his after his death, whose son he is now killing by means of me, what is left for me but the gravest of all dangers? For the sake of my safety this child has to die; but one of Astyages' own people has to be the murderer and not one of mine.","places":[]},{"id":110,"text":"So saying, he sent a messenger at once to one of Astyages' cowherds, who he knew pastured his herds in the likeliest spots and where the mountains were most infested with wild beasts. The man's name was Mitradates, and his wife was a slave like him; her name was in the Greek language Cyno, in the Median Spako: for spax is the Median word for dog. [2] The foothills of the mountains where this cowherd pastured his cattle are north of Ecbatana, towards the Euxine sea; for the rest of Media is everywhere a level plain, but here, on the side of the Saspires,41 the land is very high and mountainous and covered with woods. [3] So when the cowherd came in haste at the summons, Harpagus said: Astyages wants you to take this child and leave it in the most desolate part of the mountains so that it will perish as quickly as possible. And he wants me to tell you that if you do not kill it, but preserve it somehow, you will undergo the most harrowing death; and I am ordered to see it exposed.","places":[{"placeId":"903080","name":"Median","startOffset":298,"endOffset":304},{"placeId":"903080","name":"Median","startOffset":330,"endOffset":336},{"placeId":"903021","name":"Ecbatana","startOffset":438,"endOffset":446},{"placeId":"1224","name":"Euxine","startOffset":460,"endOffset":466},{"placeId":"903080","name":"Media","startOffset":488,"endOffset":493}]},{"id":111,"text":"Hearing this, the cowherd took the child and went back the same way and came to his dwelling. Now as it happened his wife too had been on the verge of delivering every day, and as the divinity would have it, she did in fact give birth while the cowherd was away in the city. Each of them was anxious for the other, the husband being afraid about his wife's labor, and the wife because she did not know why Harpagus had so unexpectedly sent for her husband. [2] So when he returned and stood before her, she was startled by the unexpected sight and asked him before he could speak why Harpagus had so insistently summoned him. Wife, he said, when I came to the city, I saw and heard what I ought never to have seen, and what ought never to have happened to our masters. Harpagus' whole house was full of weeping; astonished, I went in; [3] and immediately I saw a child lying there struggling and crying, adorned in gold and embroidered clothing. And when Harpagus saw me, he told me to take the child in haste and bring it away and leave it where the mountains are the most infested with wild beasts. It was Astyages, he said, who enjoined this on me, and Harpagus threatened me grievously if I did not do it. [4] So I took him and brought him away, supposing him to be the child of one of the servants; for I could never have guessed whose he was. But I was amazed at seeing him adorned with gold and clothing, and at hearing, too, the evident sound of weeping in the house of Harpagus. [5] Very soon on the way I learned the whole story from the servant who brought me out of the city and gave the child into my custody: namely, that it was the son of Mandane the king's daughter and Cambyses the son of Cyrus, and that Astyages gave the command to kill him. And now, here he is.","places":[]},{"id":112,"text":"And as he said this the cowherd uncovered it and showed it. But when the woman saw how fine and fair the child was, she began to cry and laid hold of the man's knees and begged him by no means to expose him. But the husband said he could not do otherwise; for, he said, spies would be coming from Harpagus to see what was done, and he would have to die a terrible death if he did not obey. [2] Being unable to move her husband, the woman then said: Since I cannot convince you not to expose it, then, if a child has to be seen exposed, do this: I too have borne a child, but I bore it dead. [3] Take this one and put it out, but the child of the daughter of Astyages let us raise as if it were our own; this way, you won't be caught disobeying our masters, and we will not have plotted badly. For the dead child will have royal burial, and the living will not lose his life.","places":[]},{"id":113,"text":"Thinking that his wife advised him excellently in his present strait, the cowherd immediately did as she said. He gave his wife the child whom he had brought to kill, and his own dead child he put into the chest in which he carried the other, [2] and dressed it with all the other child's finery and left it out in the most desolate part of the mountains. Then on the third day after leaving the child out, the cowherd left one of his herdsmen to watch it and went to the city, where he went to Harpagus' house and said he was ready to show the child's dead body. [3] Harpagus sent the most trusted of his bodyguard, and these saw for him and buried the cowherd's child. So it was buried: and the cowherd's wife kept and raised the boy who was afterwards named Cyrus; but she did not give him that name, but another.","places":[]},{"id":114,"text":"Now when the boy was ten years old, the truth about him was revealed in some such way as this. He was playing in the village where these herdsmen's quarters were, playing in the road with others of his age. The boys while playing chose to be their king this one who was supposed to be the son of the cowherd. [2] Then he assigned some of them to the building of houses, some to be his bodyguard, one doubtless to be the King's Eye; to another he gave the right of bringing him messages; to each he gave his proper work. [3] Now one of these boys playing with him was the son of Artembares, a notable Mede; when he did not perform his assignment from Cyrus, Cyrus told the other boys to seize him, and when they did so he handled the boy very roughly and whipped him. [4] As soon as he was let go, very upset about the indignity he had suffered, he went down to his father in the city and complained of what he had received at the hands of the son of Astyages' cowherdnot calling him Cyrus, for that name had not yet been given. [5] Artembares, going just as angry as he was to Astyages and bringing his son along, announced that an impropriety had been committed, saying, O King, by your slave, the son of a cowherd, we have been outraged thus: and with that he bared his son's shoulders.","places":[{"placeId":"903080","name":"Mede","startOffset":600,"endOffset":604}]},{"id":115,"text":"When Astyages heard and saw, he was ready to avenge the boy in view of Artembares' rank: so he sent for the cowherd and his son. When they were both present, Astyages said, fixing his eyes on Cyrus, [2] Is it you, then, the child of one such as this, who have dared to lay hands on the son of the greatest of my courtiers? Cyrus answered, Master, what I did to him I did with justice. The boys of the village, of whom he was one, chose me while playing to be their king, for they thought me the most fit for this. [3] The other boys then did as assigned: but this one was disobedient and cared nothing for me, for which he got what he deserved. Now, if I deserve punishment for this, here I am to take it.","places":[]},{"id":116,"text":"While the boy spoke, it seemed to Astyages that he recognized him; the character of his face was like his own, he thought, and his manner of answering was freer than customary: and the date of the exposure seemed to agree with the boy's age. [2] Astonished at this, he sat a while silent; but when at last with difficulty he could collect his wits, he said (for he wanted to be rid of Artembares and question the cowherd with no one present), I shall act in such a way, Artembares, that you and your son shall have no cause of complaint. [3] So he sent Artembares away, and the attendants led Cyrus inside at Astyages' bidding. When the cowherd was left quite alone, Astyages asked him where he had got the boy and who had been the giver. [4] The cowherd answered that Cyrus was his own son and that the mother was still with him. Astyages said that he was not well advised if he wished to find himself in a desperate situation, and as he said this made a sign to the spearbearers to seize him. [5] Then, under stress of necessity, the cowherd disclosed to him the whole story, telling everything exactly as it had happened from the beginning, and at the end fell to entreaty and urged the king to pardon him.","places":[]},{"id":117,"text":"When the cowherd had disclosed the true story, Astyages took less interest in him, but he was very angry with Harpagus and had the guards summon him. [2] Harpagus came, and Astyages asked him Harpagus, how did you kill the boy, my daughter's son, whom I gave you? Harpagus, when he saw the cowherd was there, did not take the way of falsehood, lest he be caught and confuted: [3] O King, he said, when I took the boy, I thought and considered how to do what you wanted and not be held a murderer by your daughter or by you even though I was blameless toward you. [4] So I did this: I summoned this cowherd here, and gave the child to him, telling him that it was you who gave the command to kill it. And that was the truth; for such was your command. But I gave the child with the instructions that the cowherd was to lay it on a desolate mountainside and wait there and watch until it was dead; and I threatened all sorts of things if he did not accomplish this. [5] Then, when he had done what he was told, and the child was dead, I sent the most trusted of my eunuchs and had the body viewed and buried. This, O king, is the story, and such was the end of the boy.","places":[]},{"id":118,"text":"Harpagus told the story straight, while Astyages, hiding the anger that he felt against him for what had been done, first repeated the story again to Harpagus exactly as he had heard it from the cowherd, then, after repeating it, ended by saying that the boy was alive and that the matter had turned out well. [2] For, he said, I was greatly afflicted by what had been done to this boy, and it weighed heavily on me that I was estranged from my daughter. Now, then, in this good turn of fortune, send your own son to this boy newly come, and (since I am about to sacrifice for the boy's safety to the gods to whom this honor is due) come here to dine with me.","places":[]},{"id":119,"text":"When Harpagus heard this, he bowed and went to his home, very pleased to find that his offense had turned out for the best and that he was invited to dinner in honor of this fortunate day. [2] Coming in, he told his only son, a boy of about thirteen years of age, to go to Astyages' palace and do whatever the king commanded, and in his great joy he told his wife everything that had happened. [3] But when Harpagus' son came, Astyages cut his throat and tore him limb from limb, roasted some of the flesh and boiled some, and kept it ready after he had prepared it. [4] So when the hour for dinner came and the rest of the guests and Harpagus were present, Astyages and the others were served dishes of lamb's meat, but Harpagus that of his own son, all but the head and hands and feet, which lay apart covered up in a wicker basket. [5] And when Harpagus seemed to have eaten his fill, Astyages asked him, Did you like your meal, Harpagus? Exceedingly, Harpagus answered. Then those whose job it was brought him the head of his son and hands and feet concealed in the basket, and they stood before Harpagus and told him to open and take what he liked. [6] Harpagus did; he opened and saw what was left of his son: he saw this, but mastered himself and did not lose his composure. Astyages asked him, Do you know what beast's meat you have eaten? [7] I know, he said, and all that the king does is pleasing. With that answer he took the remains of the meat and went home. There he meant, I suppose, after collecting everything, to bury it.","places":[]},{"id":120,"text":"Thus Astyages punished Harpagus. But, to help him to decide about Cyrus, he summoned the same Magi who had interpreted his dream as I have said: and when they came, Astyages asked them how they had interpreted his dream. They answered as before, and said that the boy must have been made king had he lived and not died first. [2] Then Astyages said, The boy is safe and alive, and when he was living in the country the boys of his village made him king, and he duly did all that is done by true kings: for he assigned to each individually the roles of bodyguards and sentinels and messengers and everything else, and so ruled. And what do you think is the significance of this? [3] If the boy is alive, said the Magi, and has been made king without premeditation, then be confident on this score and keep an untroubled heart: he will not be made king a second time. Even in our prophecies, it is often but a small thing that has been foretold and the consequences of dreams come to nothing in the end. [4] I too, Magi, said Astyages, am very much of your opinion: that the dream came true when the boy was called king, and that I have no more to fear from him. Nevertheless consider well and advise me what will be safest both for my house and for you. [5] The Magi said, O King, we too are very anxious that your sovereignty prosper: for otherwise, it passes from your nation to this boy who is a Persian, and so we Medes are enslaved and held of no account by the Persians, as we are of another blood, but while you, our countryman, are established king, we have our share of power, and great honor is shown us by you. [6] Thus, then, we ought by all means to watch out for you and for your sovereignty. And if at the present time we saw any danger we would declare everything to you: but now the dream has had a trifling conclusion, and we ourselves are confident and advise you to be so also. As for this boy, send him out of your sight to the Persians and to his parents.","places":[{"placeId":"geonames-130758","name":"Persian","startOffset":1409,"endOffset":1416},{"placeId":"903080","name":"Medes","startOffset":1428,"endOffset":1433},{"placeId":"geonames-130758","name":"Persian","startOffset":1477,"endOffset":1484},{"placeId":"geonames-130758","name":"Persians","startOffset":1959,"endOffset":1967}]},{"id":121,"text":"Hearing this, Astyages was glad, and calling Cyrus, said, My boy, I did you wrong because of a vision I had in a dream, that meant nothing, but by your own destiny you still live; now therefore, go to the Persians, and good luck go with you; I will send guides with you. When you get there you will find a father and mother unlike the cowherd, Mitradates, and his wife.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":206,"endOffset":214}]},{"id":122,"text":"After saying this, Astyages sent Cyrus away. When he returned to Cambyses' house, his parents received him there, and learning who he was they welcomed him enthusiastically, for they had supposed that long ago he had been killed, and they asked him how his life had been saved. [2] Then he told them, and said that until now he had known nothing but been very deceived, but that on the way he had heard the whole story of his misfortune; for he had thought, he said, that Astyages' cowherd was his father, but in his journey from the city his escort had told him the whole story. [3] And he had been raised, he said, by the cowherd's wife, and he was full of her praises, and in his tale he was constantly speaking of Cyno. Hearing this name, his parents circulated a story that Cyrus was suckled by a dog when exposed, thinking in this way to make the story of his salvation seem more marvellous to the Persians.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":904,"endOffset":912}]},{"id":123,"text":"This then was the beginning of that legend. But as Cyrus grew up to be the manliest and best loved of his peers, Harpagus courted him and sent him gifts, wishing to be avenged on Astyages; for he saw no hope for a private man like himself of punishing Astyages, but as he saw Cyrus growing up, he tried to make him an ally, for he likened Cyrus' misfortune to his own. [2] Even before this the following had been done by him: since Astyages was harsh toward the Medes, he associated with each of the chief Medes and persuaded them to make Cyrus their leader and depose Astyages. [3] So much being ready and done, Harpagus wanted to reveal his intent to Cyrus, who then lived among the Persians. But the roads were guarded, and he had no plan for sending a message but this: [4] he carefully slit the belly of a hare, and then leaving it as it was without further harm he put into it a paper on which he wrote what he thought best. Then he sewed up the hare's belly, and sent it to Persia by the most trusted of his servants, giving him nets to carry as if he were a huntsman. The messenger was instructed to give Cyrus the hare and tell him by word of mouth to cut it open with his own hands, with no one else present.","places":[{"placeId":"903080","name":"Medes","startOffset":462,"endOffset":467},{"placeId":"903080","name":"Medes","startOffset":506,"endOffset":511},{"placeId":"geonames-130758","name":"Persians","startOffset":685,"endOffset":693},{"placeId":"geonames-130758","name":"Persia","startOffset":981,"endOffset":987}]},{"id":124,"text":"All this was done. Cyrus took the hare and slit it and read the paper which was in it; the writing was as follows: Son of Cambyses, since the gods watch over you (otherwise you would not have prospered so) avenge yourself now on Astyages, your murderer; [2] for thanks to his intention you are dead, while thanks to the gods, and me, you live. I expect that long ago you heard the story of what was done concerning you and how Astyages treated me because I did not kill you but gave you to the cowherd. If, then, you will listen to me, you shall rule all the country which is now ruled by Astyages. Persuade the Persians to rebel, and lead their army against the Medes; [3] then you have your wish, whether I am appointed to command the army against you or some other notable man among the Medes: for they will of themselves revolt from Astyages and join you and try to pull him down. Seeing then that all is ready here, do as I say and do it quickly.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":613,"endOffset":621},{"placeId":"903080","name":"Medes","startOffset":664,"endOffset":669},{"placeId":"903080","name":"Medes","startOffset":791,"endOffset":796}]},{"id":125,"text":"When Cyrus read this, he deliberated as to what was the shrewdest way to persuade the Persians to revolt; and what he thought to be most effective, he did: [2] writing what he liked on a paper, he assembled the Persians, and then unfolded the paper and declared that in it Astyages appointed him leader of the Persian armies. Now, he said in his speech, I command you, men of Persia, to come, each provided with a sickle. This is what Cyrus said. [3] Now there are many tribes in Persia: those of them that Cyrus assembled and persuaded to revolt from the Medes were the Pasargadae, the Maraphii, and the Maspii. On these all the other Persians depend. The chief tribe is that of the Pasargadae; to them belongs the clan of the Achaemenidae, the royal house of Persia. [4] The other Persian tribes are the Panthialaei, the Derusiaei, and the Germanii, all tillers of the soil, and the Dai, the Mardi, the Dropici, the Sagartii, all wandering herdsmen.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":86,"endOffset":94},{"placeId":"geonames-130758","name":"Persians","startOffset":211,"endOffset":219},{"placeId":"geonames-130758","name":"Persian","startOffset":310,"endOffset":317},{"placeId":"geonames-130758","name":"Persia","startOffset":379,"endOffset":385},{"placeId":"geonames-130758","name":"Persia","startOffset":484,"endOffset":490},{"placeId":"903080","name":"Medes","startOffset":560,"endOffset":565},{"placeId":"922693","name":"Pasargadae","startOffset":575,"endOffset":585},{"placeId":"930213","name":"Maraphii","startOffset":591,"endOffset":599},{"placeId":"930217","name":"Maspii","startOffset":609,"endOffset":615},{"placeId":"geonames-130758","name":"Persians","startOffset":640,"endOffset":648},{"placeId":"922693","name":"Pasargadae","startOffset":688,"endOffset":698},{"placeId":"geonames-130758","name":"Persia","startOffset":765,"endOffset":771},{"placeId":"geonames-130758","name":"Persian","startOffset":787,"endOffset":794},{"placeId":"930229","name":"Panthialaei","startOffset":810,"endOffset":821},{"placeId":"930182","name":"Derusiaei","startOffset":827,"endOffset":836},{"placeId":"930190","name":"Germanii","startOffset":846,"endOffset":854},{"placeId":"952076","name":"Dai","startOffset":889,"endOffset":892},{"placeId":"828287","name":"Mardi","startOffset":898,"endOffset":903},{"placeId":"930184","name":"Dropici","startOffset":909,"endOffset":916}]},{"id":126,"text":"So when they all came with sickles as ordered, Cyrus commanded them to reclaim in one day a thorny tract of Persia, of two and one quarter or two and one half miles each way in extent. [2] The Persians accomplished the task appointed; Cyrus then commanded them to wash themselves and come the next day; meanwhile, collecting his father's goats and sheep and oxen in one place, he slaughtered and prepared them as a feast for the Persian host, providing also wine and all the foods that were most suitable. [3] When the Persians came on the next day he had them sit and feast in a meadow. After dinner he asked them which they liked more: their task of yesterday or their present pastime. [4] They answered that the difference was great: all yesterday they had had nothing but evil, to-day nothing but good. Then, taking up their word, Cyrus laid bare his whole purpose, and said: [5] This is your situation, men of Persia: obey me and you shall have these good things and ten thousand others besides with no toil and slavery; but if you will not obey me, you will have labors unnumbered like your toil of yesterday. [6] Now, then, do as I tell you, and win your freedom. For I think that I myself was born by a divine chance to undertake this work; and I hold you fully as good men as the Medes in war and in everything else. All this is true; therefore revolt from Astyages quickly now!","places":[{"placeId":"geonames-130758","name":"Persia,","startOffset":108,"endOffset":115},{"placeId":"geonames-130758","name":"Persians","startOffset":193,"endOffset":201},{"placeId":"geonames-130758","name":"Persian host","startOffset":429,"endOffset":441},{"placeId":"geonames-130758","name":"Persians","startOffset":519,"endOffset":527},{"placeId":"geonames-130758","name":"Persia","startOffset":916,"endOffset":922},{"placeId":"903080","name":"Medes","startOffset":1290,"endOffset":1295}]},{"id":127,"text":"The Persians had long been discontent that the Medes ruled them, and now having got a champion they were glad to win their freedom. But when Astyages heard that Cyrus was about this business, he sent a messenger to summon him; [2] Cyrus told the messenger to take back word that Astyages would see him sooner than he liked. Hearing this, Astyages armed all his Medes, and was distracted by Providence so that he forgot what he had done to Harpagus, and appointed him to command the army. [3] So when the Medes marched out and engaged with the Persians, those who were not in on the plan fought, while others deserted to the enemy, and most were deliberate cowards and ran.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":4,"endOffset":12},{"placeId":"903080","name":"Medes","startOffset":47,"endOffset":52},{"placeId":"903080","name":"Medes","startOffset":361,"endOffset":366},{"placeId":"903080","name":"Medes","startOffset":504,"endOffset":509},{"placeId":"geonames-130758","name":"Persians","startOffset":543,"endOffset":551}]},{"id":128,"text":"Thus the Median army was shamefully scattered. As soon as Astyages heard, he sent a threatening message to Cyrus: Nevertheless, Cyrus shall not rejoice; [2] and with that he took the Magi who interpreted dreams, who had persuaded him to let Cyrus go free, and impaled them; then he armed the Medes who were left in the city, the very young and very old men. [3] Leading these out, and engaging the Persians, he was beaten: Astyages himself was taken prisoner, and lost the Median army which he led.","places":[{"placeId":"903080","name":"Media","startOffset":9,"endOffset":14},{"placeId":"903080","name":"Medes","startOffset":294,"endOffset":299},{"placeId":"geonames-130758","name":"Persians","startOffset":400,"endOffset":408},{"placeId":"903080","name":"Median army","startOffset":475,"endOffset":486}]},{"id":129,"text":"When Astyages was a captive, Harpagus came and exulted over him and taunted him, and besides much other bitter mockery he recalled his banquet, when Astyages had fed Harpagus his son's flesh, and asked Astyages what it was like to be a slave after having been a king. [2] Fixing his gaze on Harpagus, Astyages asked, Do you imagine that this, which Cyrus has done, is your work? It was I, said the other, who wrote the letter; the accomplishment of the work is rightly mine. [3] Then, said Astyages, you stand confessed the most foolish and most unjust man on earth; most foolish, in giving another the throne which you might have had for yourself, if the present business is indeed your doing; most unjust, in enslaving the Medes because of that banquet. [4] For if in any event another and not you had to possess the royal power, then in justice some Mede should have had it, not a Persian: but now you have made the Medes, who did you no harm, slaves instead of masters and the Persians, who were the slaves, are now the masters of the Medes.","places":[{"placeId":"903080","name":"Medes","startOffset":734,"endOffset":739},{"placeId":"903080","name":"Mede","startOffset":862,"endOffset":866},{"placeId":"geonames-130758","name":"Persian","startOffset":893,"endOffset":900},{"placeId":"903080","name":"Medes","startOffset":928,"endOffset":933},{"placeId":"geonames-130758","name":"Persians","startOffset":990,"endOffset":998},{"placeId":"903080","name":"Medes","startOffset":1048,"endOffset":1053}]},{"id":130,"text":"Thus Astyages was deposed from his sovereignty after a reign of thirty-five years: and the Medes had to bow down before the Persians because of Astyages' cruelty. They had ruled all Asia beyond the Halys for one hundred and twenty-eight years,42 from which must be subtracted the time when the Scythians held sway. [2] At a later time they repented of what they now did, and rebelled against Darius43 ; but they were defeated in battle and brought back into subjection. But now, in Astyages' time, Cyrus and the Persians rose in revolt against the Medes, and from this time ruled Asia. [3] As for Astyages, Cyrus did him no further harm, and kept him in his own house until Astyages died.This is the story of the birth and upbringing of Cyrus, and of how he became king; and afterwards, as I have already related, he subjugated Croesus in punishment for the unprovoked wrong done him; and after this victory he became sovereign of all Asia.","places":[{"placeId":"903080","name":"Medes","startOffset":91,"endOffset":96},{"placeId":"geonames-130758","name":"Persian","startOffset":124,"endOffset":131},{"placeId":"857148","name":"Halys","startOffset":198,"endOffset":203},{"placeId":"216976","name":"Scythians","startOffset":294,"endOffset":303},{"placeId":"geonames-130758","name":"Persians","startOffset":512,"endOffset":520},{"placeId":"903080","name":"Medes","startOffset":548,"endOffset":553}]},{"id":131,"text":"As to the customs of the Persians, I know them to be these. It is not their custom to make and set up statues and temples and altars, but those who do such things they think foolish, because, I suppose, they have never believed the gods to be like men, as the Greeks do; [2] but they call the whole circuit of heaven Zeus, and to him they sacrifice on the highest peaks of the mountains; they sacrifice also to the sun and moon and earth and fire and water and winds. [3] From the beginning, these are the only gods to whom they have ever sacrificed; they learned later to sacrifice to the heavenly44 Aphrodite from the Assyrians and Arabians. She is called by the Assyrians Mylitta, by the Arabians Alilat, by the Persians Mitra.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":25,"endOffset":33},{"placeId":"1001896","name":"Greeks","startOffset":260,"endOffset":266},{"placeId":"29492","name":"Assyrians","startOffset":622,"endOffset":631},{"placeId":"874334","name":"Arabians","startOffset":636,"endOffset":644},{"placeId":"29492","name":"Assyrians","startOffset":667,"endOffset":676},{"placeId":"874334","name":"Arabians","startOffset":693,"endOffset":701},{"placeId":"geonames-130758","name":"Persians","startOffset":717,"endOffset":725}]},{"id":132,"text":"And this is their method of sacrifice to the aforesaid gods: when about to sacrifice, they do not build altars or kindle fire, employ libations, or music, or fillets, or barley meal: when a man wishes to sacrifice to one of the gods, he leads a beast to an open space and then, wearing a wreath on his tiara, of myrtle usually, calls on the god. [2] To pray for blessings for himself alone is not lawful for the sacrificer; rather, he prays that the king and all the Persians be well; for he reckons himself among them. He then cuts the victim limb from limb into portions, and, after boiling the flesh, spreads the softest grass, trefoil usually, and places all of it on this. [3] When he has so arranged it, a Magus comes near and chants over it the song of the birth of the gods, as the Persian tradition relates it; for no sacrifice can be offered without a Magus. Then after a little while the sacrificer carries away the flesh and uses it as he pleases.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":467,"endOffset":475},{"placeId":"geonames-130758","name":"Persian","startOffset":790,"endOffset":797}]},{"id":133,"text":"The day which every man values most is his own birthday. On this day, he thinks it right to serve a more abundant meal than on other days: oxen or horses or camels or asses, roasted whole in ovens, are set before the rich; the poorer serve the lesser kinds of cattle. [2] Their courses are few, the dainties that follow many, and not all served together. This is why the Persians say of Greeks that they rise from table still hungry, because not much dessert is set before them: were this too given to Greeks (the Persians say) they would never stop eating. [3] They are very partial to wine. No one may vomit or urinate in another's presence: this is prohibited among them. Moreover, it is their custom to deliberate about the gravest matters when they are drunk; [4] and what they approve in their deliberations is proposed to them the next day, when they are sober, by the master of the house where they deliberate; and if, being sober, they still approve it, they act on it, but if not, they drop it. And if they have deliberated about a matter when sober, they decide upon it when they are drunk.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":371,"endOffset":379},{"placeId":"1001896","name":"Greeks","startOffset":387,"endOffset":393},{"placeId":"1001896","name":"Greeks","startOffset":502,"endOffset":508},{"placeId":"geonames-130758","name":"Persians","startOffset":514,"endOffset":522}]},{"id":134,"text":"When one man meets another on the road, it is easy to see if the two are equals; for, if they are, they kiss each other on the lips without speaking; if the difference in rank is small, the cheek is kissed; if it is great, the humbler bows and does obeisance to the other. [2] They honor most of all those who live nearest them, next those who are next nearest, and so going ever onwards they assign honor by this rule: those who dwell farthest off they hold least honorable of all; for they think that they are themselves in all regards by far the best of all men, that the rest have only a proportionate claim to merit, until those who live farthest away have least merit of all. [3] Under the rule of the Medes, one tribe would even govern another; the Medes held sway over all alike and especially over those who lived nearest to them; these ruled their neighbors, and the neighbors in turn those who came next to them, on the same scheme by which the Persians assign honor; for the nation kept advancing its rule and dominion.45","places":[{"placeId":"903080","name":"Medes","startOffset":708,"endOffset":713},{"placeId":"903080","name":"Medes","startOffset":756,"endOffset":761},{"placeId":"geonames-130758","name":"Persians","startOffset":956,"endOffset":964}]},{"id":135,"text":"But the Persians more than all men welcome foreign customs. They wear the Median dress, thinking it more beautiful than their own, and the Egyptian cuirass in war. Their luxurious practices are of all kinds, and all borrowed: the Greeks taught them pederasty. Every Persian marries many lawful wives, and keeps still more concubines.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":8,"endOffset":16},{"placeId":"903080","name":"Median dress","startOffset":74,"endOffset":86},{"placeId":"981503","name":"Egyptian cuirass","startOffset":139,"endOffset":155},{"placeId":"1001896","name":"Greeks","startOffset":230,"endOffset":236},{"placeId":"geonames-130758","name":"Persian","startOffset":266,"endOffset":273}]},{"id":136,"text":"After valor in battle it is accounted noble to father the greatest number of sons: the king sends gifts yearly to him who gets most. Strength, they believe, is in numbers. [2] They educate their boys from five to twenty years old, and teach them only three things: riding and archery and honesty. A boy is not seen by his father before he is five years old, but lives with the women: the point of this is that, if the boy should die in the interval of his rearing, the father would suffer no grief.","places":[]},{"id":137,"text":"This is a law which I praise; and it is a praiseworthy law, too, which does not allow the king himself to slay any one for a single offense, or any other Persian to do incurable harm to one of his servants for one offense. Not until an accounting shows that the offender's wrongful acts are more and greater than his services may a man give rein to his anger. [2] They say that no one has ever yet killed his father or mother; when such a thing has been done, it always turns out on inquest that the doer is shown to be a changeling or the fruit of adultery; for it is not to be believed (say they) that a son should kill his true parent.","places":[{"placeId":"geonames-130758","name":"Persian","startOffset":154,"endOffset":161}]},{"id":138,"text":"Furthermore, of what they may not do, they may not speak, either. They hold lying to be the most disgraceful thing of all and next to that debt; for which they have many other reasons, but this in particular: it is inevitable (so they say) that the debtor also speak some falsehood. The citizen who has leprosy or the white sickness may not come into town or mingle with other Persians. They say that he is so afflicted because he has sinned in some way against the sun. [2] Every stranger who gets such a disease, many drive out of the country; and they do the same to white doves, for the reason given. Rivers they especially revere; they will neither urinate nor spit nor wash their hands in them, nor let anyone else do so.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":377,"endOffset":385}]},{"id":139,"text":"There is another thing that always happens among them; we have noted it although the Persians have not: their names, which agree with the nature of their persons and their nobility, all end in the same letter, that which the Dorians call san, and the Ionians sigma; you will find, if you search, that not some but all Persian names alike end in this letter.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":85,"endOffset":93},{"placeId":"550597","name":"Ionians","startOffset":251,"endOffset":258},{"placeId":"geonames-130758","name":"Persian","startOffset":318,"endOffset":325}]},{"id":140,"text":"So much I can say of them from my own certain knowledge. But there are other matters concerning the dead which are secretly and obscurely told: how the dead bodies of Persians are not buried before they have been mangled by birds or dogs. [2] That this is the way of the Magi, I know for certain; for they do not conceal the practice. But this is certain, that before the Persians bury the body in earth they embalm it in wax. These Magi are as unlike the priests of Egypt as they are unlike all other men: [3] for the priests consider it sacrilege to kill anything that lives, except what they sacrifice; but the Magi kill with their own hands every creature, except dogs and men; they kill all alike, ants and snakes, creeping and flying things, and take great pride in it. Leaving this custom to be such as it has been from the first,46 I return now to my former story.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":167,"endOffset":175},{"placeId":"geonames-130758","name":"Persians","startOffset":372,"endOffset":380},{"placeId":"766","name":"Egypt","startOffset":467,"endOffset":472}]},{"id":141,"text":"As soon as the Lydians had been subjugated by the Persians, the Ionians and Aeolians sent messengers to Cyrus, offering to be his subjects on the same terms as those which they had under Croesus. After hearing what they proposed, Cyrus told them a story. Once, he said, there was a flute-player who saw fish in the sea and played upon his flute, thinking that they would come out on to the land. [2] Disappointed of his hope, he cast a net and gathered it in and took out a great multitude of fish; and seeing them leaping, You had best, he said, stop your dancing now; you would not come out and dance before, when I played to you. [3] The reason why Cyrus told the story to the Ionians and Aeolians was that the Ionians, who were ready to obey him when the victory was won, had before refused when he sent a message asking them to revolt from Croesus. [4] So he answered them in anger. But when the message came to the Ionians in their cities, they fortified themselves with walls, and assembled in the Panionion,47 all except the Milesians, with whom alone Cyrus made a treaty on the same terms as that which they had with the Lydians. The rest of the Ionians resolved to send envoys in the name of them all to Sparta, to ask help for the Ionians.","places":[{"placeId":"991385","name":"Lydians","startOffset":15,"endOffset":22},{"placeId":"geonames-130758","name":"Persians","startOffset":50,"endOffset":58},{"placeId":"735295266","name":"Ionians","startOffset":64,"endOffset":71},{"placeId":"550406","name":"Aeolians","startOffset":76,"endOffset":84},{"placeId":"735295266","name":"Ionians","startOffset":684,"endOffset":691},{"placeId":"550406","name":"Aeolians","startOffset":696,"endOffset":704},{"placeId":"735295266","name":"Ionians","startOffset":718,"endOffset":725},{"placeId":"735295266","name":"Ionians","startOffset":925,"endOffset":932},{"placeId":"599855","name":"Panionion","startOffset":1009,"endOffset":1018},{"placeId":"599799","name":"Milesians","startOffset":1037,"endOffset":1046},{"placeId":"991385","name":"Lydians","startOffset":1134,"endOffset":1141},{"placeId":"735295266","name":"Ionians","startOffset":1159,"endOffset":1166},{"placeId":"570685","name":"Sparta","startOffset":1218,"endOffset":1224},{"placeId":"735295266","name":"Ionians","startOffset":1246,"endOffset":1253}]},{"id":142,"text":"Now these Ionians possessed the Panionion, and of all men whom we know, they happened to found their cities in places with the loveliest of climate and seasons. [2] For neither to the north of them nor to the south does the land effect the same thing as in Ionia [nor to the east nor to the west], affected here by the cold and wet, there by the heat and drought. [3] They do not all have the same speech but four different dialects. Miletus lies farthest south among them, and next to it come Myus and Priene; these are settlements in Caria, and they have a common language; Ephesus, Colophon, Lebedos, Teos, Clazomenae, Phocaea, all of them in Lydia, [4] have a language in common which is wholly different from the speech of the three former cities. There are yet three Ionian cities, two of them situated on the islands of Samos and Chios, and one, Erythrae, on the mainland; the Chians and Erythraeans speak alike, but the Samians have a language which is their own and no one else's. It is thus seen that there are four modes of speech.","places":[{"placeId":"735295266","name":"Ionians","startOffset":10,"endOffset":17},{"placeId":"599855","name":"Panionion","startOffset":32,"endOffset":41},{"placeId":"550597","name":"Ionia","startOffset":257,"endOffset":262},{"placeId":"599799","name":"Miletus","startOffset":434,"endOffset":441},{"placeId":"599813","name":"Myus","startOffset":494,"endOffset":498},{"placeId":"599905","name":"Priene","startOffset":503,"endOffset":509},{"placeId":"991381","name":"Caria","startOffset":536,"endOffset":541},{"placeId":"599612","name":"Ephesus","startOffset":576,"endOffset":583},{"placeId":"599577","name":"Colophon","startOffset":585,"endOffset":593},{"placeId":"599754","name":"Lebedos","startOffset":595,"endOffset":602},{"placeId":"550913","name":"Teos","startOffset":604,"endOffset":608},{"placeId":"550650","name":"Clazomenae","startOffset":610,"endOffset":620},{"placeId":"550823","name":"Phocaea","startOffset":622,"endOffset":629},{"placeId":"991385","name":"Lydia","startOffset":646,"endOffset":651},{"placeId":"550597","name":"Ionian cities","startOffset":773,"endOffset":786},{"placeId":"599926","name":"Samos","startOffset":827,"endOffset":832},{"placeId":"550497","name":"Chios","startOffset":837,"endOffset":842},{"placeId":"550535","name":"Erythrae","startOffset":853,"endOffset":861},{"placeId":"550496","name":"Chians","startOffset":884,"endOffset":890},{"placeId":"550535","name":"Erythraeans","startOffset":895,"endOffset":906},{"placeId":"599925","name":"Samians","startOffset":928,"endOffset":935}]},{"id":143,"text":"Among these Ionians, the Milesians were safe from the danger (for they had made a treaty), and the islanders among them had nothing to fear: for the Phoenicians were not yet subjects of the Persians, nor were the Persians themselves mariners. [2] But those of Asia were cut off from the rest of the Ionians only in the way that I shall show. The whole Hellenic stock was then small, and the last of all its branches and the least regarded was the Ionian; for it had no considerable city except Athens. [3] Now the Athenians and the rest would not be called Ionians, but spurned the name; even now the greater number of them seem to me to be ashamed of it; but the twelve cities aforesaid gloried in this name, and founded a holy place for themselves which they called the Panionion, and agreed among themselves to allow no other Ionians to use it (nor in fact did any except the men of Smyrna ask to be admitted);","places":[{"placeId":"735295266","name":"Ionians","startOffset":12,"endOffset":19},{"placeId":"599799","name":"Milesians","startOffset":25,"endOffset":34},{"placeId":"678334","name":"Phoenicians","startOffset":149,"endOffset":160},{"placeId":"geonames-130758","name":"Persian","startOffset":190,"endOffset":197},{"placeId":"geonames-130758","name":"Persian","startOffset":213,"endOffset":220},{"placeId":"735295266","name":"Ionians","startOffset":299,"endOffset":306},{"placeId":"550597","name":"Ionian","startOffset":447,"endOffset":453},{"placeId":"579885","name":"Athens","startOffset":494,"endOffset":500},{"placeId":"579885","name":"Athenians","startOffset":514,"endOffset":523},{"placeId":"735295266","name":"Ionians","startOffset":557,"endOffset":564},{"placeId":"599855","name":"Panionion","startOffset":772,"endOffset":781},{"placeId":"735295266","name":"Ionians","startOffset":829,"endOffset":836},{"placeId":"550893","name":"Smyrna","startOffset":886,"endOffset":892}]},{"id":144,"text":"just as the Dorians of what is now the country of the Five Citiesformerly the country of the Six Citiesforbid admitting any of the neighboring Dorians to the Triopian temple, and even barred from using it those of their own group who had broken the temple law. [2] For long ago, in the games in honor of Triopian Apollo, they offered certain bronze tripods to the victors; and those who won these were not to carry them away from the temple but dedicate them there to the god. [3] Now when a man of Halicarnassus called Agasicles won, he disregarded this law, and, carrying the tripod away, nailed it to the wall of his own house. For this offense the five citiesLindus, Ialysus, Camirus, Cos, and Cnidusforbade the sixth cityHalicarnassusto share in the use of the temple. Such was the penalty imposed on the Halicarnassians.","places":[{"placeId":"599988","name":"Triopian temple","startOffset":164,"endOffset":179},{"placeId":"599988","name":"Triopian Apollo","startOffset":310,"endOffset":325},{"placeId":"599636","name":"Halicarnassus","startOffset":505,"endOffset":518},{"placeId":"589815","name":"Lindus","startOffset":670,"endOffset":676},{"placeId":"589815","name":"Ialysus","startOffset":678,"endOffset":685},{"placeId":"589836","name":"Camirus","startOffset":687,"endOffset":694},{"placeId":"599581","name":"Cos","startOffset":696,"endOffset":699},{"placeId":"599576","name":"Cnidus","startOffset":705,"endOffset":711},{"placeId":"599636","name":"Halicarnassus","startOffset":735,"endOffset":748},{"placeId":"599636","name":"Halicarnassians","startOffset":820,"endOffset":835}]},{"id":145,"text":"As for the Ionians, the reason why they made twelve cities and would admit no more was in my judgment this: there were twelve divisions of them when they dwelt in the Peloponnese, just as there are twelve divisions of the Achaeans who drove the Ionians outPellene nearest to Sicyon; then Aegira and Aegae, where is the never-failing river Crathis, from which the river in Italy took its name; Bura and Helice, where the Ionians fled when they were worsted in battle by the Achaeans; Aegion; Rhype; Patrae; Phareae; and Olenus, where is the great river Pirus; Dyme and Tritaeae, the only inland city of all thesethese were the twelve divisions of the Ionians, as they are now of the Achaeans.","places":[{"placeId":"735295266","name":"Ionians","startOffset":11,"endOffset":18},{"placeId":"570577","name":"Peloponnese","startOffset":167,"endOffset":178},{"placeId":"570028","name":"Achaeans","startOffset":222,"endOffset":230},{"placeId":"735295266","name":"Ionians","startOffset":245,"endOffset":252},{"placeId":"570576","name":"Pellene","startOffset":257,"endOffset":264},{"placeId":"570668","name":"Sicyon","startOffset":276,"endOffset":282},{"placeId":"570043","name":"Aegira","startOffset":289,"endOffset":295},{"placeId":"570040","name":"Aegae","startOffset":300,"endOffset":305},{"placeId":"570381","name":"Crathis","startOffset":340,"endOffset":347},{"placeId":"992073","name":"Italy","startOffset":373,"endOffset":378},{"placeId":"570166","name":"Bura","startOffset":394,"endOffset":398},{"placeId":"570281","name":"Helice","startOffset":403,"endOffset":409},{"placeId":"735295266","name":"Ionians","startOffset":421,"endOffset":428},{"placeId":"570028","name":"Achaeans","startOffset":474,"endOffset":482},{"placeId":"570049","name":"Aegion","startOffset":484,"endOffset":490},{"placeId":"570647","name":"Rhype","startOffset":492,"endOffset":497},{"placeId":"570567","name":"Patrae","startOffset":499,"endOffset":505},{"placeId":"570590","name":"Phareae","startOffset":507,"endOffset":514},{"placeId":"570528","name":"Olenus","startOffset":520,"endOffset":526},{"placeId":"570572","name":"Pirus","startOffset":553,"endOffset":558},{"placeId":"570205","name":"Dyme","startOffset":560,"endOffset":564},{"placeId":"570755","name":"Tritaeae","startOffset":569,"endOffset":577},{"placeId":"735295266","name":"Ionians","startOffset":652,"endOffset":659},{"placeId":"570028","name":"Achaeans","startOffset":684,"endOffset":692}]},{"id":146,"text":"For this reason, and for no other, the Ionians too made twelve cities; for it would be foolishness to say that these are more truly Ionian or better born than the other Ionians; since not the least part of them are Abantes from Euboea, who are not Ionians even in name, and there are mingled with them Minyans of Orchomenus, Cadmeans, Dryopians, Phocian renegades from their nation, Molossians, Pelasgian Arcadians, Dorians of Epidaurus, and many other tribes; [2] and as for those who came from the very town-hall of Athens and think they are the best born of the Ionians, these did not bring wives with them to their settlements, but married Carian women whose parents they had put to death. [3] For this slaughter, these women made a custom and bound themselves by oath (and enjoined it on their daughters) that no one would sit at table with her husband or call him by his name, because the men had married them after slaying their fathers and husbands and sons. This happened at Miletus.","places":[{"placeId":"735295266","name":"Ionians","startOffset":39,"endOffset":46},{"placeId":"550597","name":"Ionian","startOffset":132,"endOffset":138},{"placeId":"735295266","name":"Ionians","startOffset":169,"endOffset":176},{"placeId":"540583","name":"Abantes","startOffset":215,"endOffset":222},{"placeId":"540775","name":"Euboea","startOffset":228,"endOffset":234},{"placeId":"735295266","name":"Ionians","startOffset":248,"endOffset":255},{"placeId":"540987","name":"Orchomenus","startOffset":313,"endOffset":323},{"placeId":"530849","name":"Dryopians","startOffset":335,"endOffset":344},{"placeId":"541048","name":"Phocian","startOffset":346,"endOffset":353},{"placeId":"531003","name":"Molossians","startOffset":383,"endOffset":393},{"placeId":"570102","name":"Pelasgian Arcadians","startOffset":395,"endOffset":414},{"placeId":"570228","name":"Epidaurus","startOffset":427,"endOffset":436},{"placeId":"579885","name":"Athens","startOffset":518,"endOffset":524},{"placeId":"735295266","name":"Ionians","startOffset":565,"endOffset":572},{"placeId":"991381","name":"Carian women","startOffset":644,"endOffset":656},{"placeId":"599799","name":"Miletus","startOffset":984,"endOffset":991}]},{"id":147,"text":"And as kings, some of them chose Lycian descendants of Glaucus son of Hippolochus, and some Caucones of Pylus, descendants of Codrus son of Melanthus, and some both. Yet since they set more store by the name than the rest of the Ionians, let it be granted that those of pure birth are Ionians; [2] and all are Ionians who are of Athenian descent and keep the feast Apaturia.48 All do keep it, except the men of Ephesus and Colophon; these are the only Ionians who do not keep it, and these because, they say, of a certain pretext of murder.","places":[{"placeId":"638965","name":"Lycian descendants","startOffset":33,"endOffset":51},{"placeId":"570343","name":"Caucones","startOffset":92,"endOffset":100},{"placeId":"570640","name":"Pylus","startOffset":104,"endOffset":109},{"placeId":"735295266","name":"Ionians","startOffset":229,"endOffset":236},{"placeId":"735295266","name":"Ionians","startOffset":285,"endOffset":292},{"placeId":"735295266","name":"Ionians","startOffset":310,"endOffset":317},{"placeId":"579885","name":"Athenian descent","startOffset":329,"endOffset":345},{"placeId":"599612","name":"Ephesus","startOffset":411,"endOffset":418},{"placeId":"599577","name":"Colophon","startOffset":423,"endOffset":431},{"placeId":"735295266","name":"Ionians","startOffset":452,"endOffset":459}]},{"id":148,"text":"The Panionion is a sacred ground in Mykale, facing north; it was set apart for Poseidon of Helicon by the joint will of the Ionians. Mykale is a western promontory of the mainland opposite Samos; the Ionians used to assemble there from their cities and keep the festival to which they gave the name of Panionia. [2] Not only the Ionian festivals, but all those of all the Greeks alike, end in the same letter, just as do the names of the Persians.","places":[{"placeId":"599855","name":"Panionion","startOffset":4,"endOffset":13},{"placeId":"599805","name":"Mykale","startOffset":36,"endOffset":42},{"placeId":"735295266","name":"Ionians","startOffset":124,"endOffset":131},{"placeId":"599805","name":"Mykale","startOffset":133,"endOffset":139},{"placeId":"599926","name":"Samos","startOffset":189,"endOffset":194},{"placeId":"735295266","name":"Ionians","startOffset":200,"endOffset":207},{"placeId":"735295266","name":"Panionia","startOffset":302,"endOffset":310},{"placeId":"550597","name":"Ionian","startOffset":329,"endOffset":335},{"placeId":"1001896","name":"Greeks","startOffset":372,"endOffset":378},{"placeId":"geonames-130758","name":"Persians","startOffset":438,"endOffset":446}]},{"id":149,"text":"Those are the Ionian cities, and these are the Aeolian: Cyme (called Phriconian),49 Lerisae, Neon Teichos, Temnos, Cilla, Notion, Aegiroessa, Pitane, Aegaeae, Myrina, Gryneia.50 These are the ancient Aeolian cities, eleven in number; but one of them, Smyrna, was taken away by the Ionians; for these too were once twelve, on the mainland. [2] These Aeolians had settled where the land was better than the Ionian territory, but the climate was not so good.","places":[{"placeId":"550597","name":"Ionian cities","startOffset":14,"endOffset":27},{"placeId":"550597","name":"Aeolian","startOffset":47,"endOffset":54},{"placeId":"550506","name":"Cyme","startOffset":56,"endOffset":60},{"placeId":"550826","name":"Phriconian","startOffset":70,"endOffset":80},{"placeId":"828295","name":"Neon Teichos","startOffset":95,"endOffset":107},{"placeId":"550908","name":"Temnos","startOffset":109,"endOffset":115},{"placeId":"554254","name":"Cilla","startOffset":117,"endOffset":122},{"placeId":"599578","name":"Notion","startOffset":124,"endOffset":130},{"placeId":"554178","name":"Aegiroessa","startOffset":132,"endOffset":142},{"placeId":"550833","name":"Pitane","startOffset":144,"endOffset":150},{"placeId":"550756","name":"Myrina","startOffset":161,"endOffset":167},{"placeId":"550555","name":"Gryneia","startOffset":169,"endOffset":176},{"placeId":"550597","name":"Aeolian","startOffset":202,"endOffset":209},{"placeId":"550893","name":"Smyrna","startOffset":253,"endOffset":259},{"placeId":"735295266","name":"Ionians","startOffset":283,"endOffset":290},{"placeId":"550406","name":"Aeolians","startOffset":351,"endOffset":359},{"placeId":"550597","name":"Ionian","startOffset":407,"endOffset":413}]},{"id":150,"text":"Now this is how the Aeolians lost Smyrna. Some men of Colophon, the losers in civil strife and exiles from their country, had been received by them into the town. These Colophonian exiles waited for the time when the men of Smyrna were holding a festival to Dionysus outside the walls; then they shut the gates and so got the city. [2] Then all the Aeolians came to recover it; and an agreement was made, whereby the Aeolians would receive back their movable goods from the Ionians, and leave the city. After this was done, the other eleven cities divided the Smyrnaeans among themselves and made them citizens of their own.","places":[{"placeId":"550406","name":"Aeolians","startOffset":20,"endOffset":28},{"placeId":"550893","name":"Smyrna","startOffset":34,"endOffset":40},{"placeId":"599577","name":"Colophon","startOffset":54,"endOffset":62},{"placeId":"599577","name":"Colophonian exiles","startOffset":169,"endOffset":187},{"placeId":"550893","name":"Smyrna","startOffset":224,"endOffset":230},{"placeId":"550406","name":"Aeolians","startOffset":349,"endOffset":357},{"placeId":"550406","name":"Aeolians","startOffset":417,"endOffset":425},{"placeId":"735295266","name":"Ionians","startOffset":474,"endOffset":481},{"placeId":"550893","name":"Smyrnaeans","startOffset":560,"endOffset":570}]},{"id":151,"text":"These then are the Aeolian cities on the mainland, besides those that are situated on Ida and are separate. [2] Among those on the islands, five divide Lesbos among them (there was a sixth on Lesbos, Arisba, but its people were enslaved by their kinfolk of Methymna); there is one on Tenedos, and one again in the Hundred Isles,51 as they are called. [3] The men of Lesbos and Tenedos, then, like the Ionian islanders, had nothing to fear. The rest of the cities deliberated together and decided to follow the Ionians' lead.","places":[{"placeId":"550597","name":"Aeolian","startOffset":19,"endOffset":26},{"placeId":"550696","name":"Lesbos","startOffset":152,"endOffset":158},{"placeId":"550696","name":"Lesbos","startOffset":192,"endOffset":198},{"placeId":"550455","name":"Arisba","startOffset":200,"endOffset":206},{"placeId":"550738","name":"Methymna","startOffset":257,"endOffset":265},{"placeId":"550911","name":"Tenedos","startOffset":284,"endOffset":291},{"placeId":"550567","name":"Hundred Isles","startOffset":315,"endOffset":328},{"placeId":"550696","name":"Lesbos","startOffset":368,"endOffset":374},{"placeId":"550911","name":"Tenedos","startOffset":379,"endOffset":386},{"placeId":"550597","name":"Ionian","startOffset":403,"endOffset":409},{"placeId":"735295266","name":"Ionians","startOffset":512,"endOffset":519}]},{"id":152,"text":"So when the envoys of the Ionians and Aeolians came to Sparta (for they set about this in haste) they chose a Phocaean, whose name was Pythennos, to speak for all. He then put on a purple cloak, so that as many Spartans as possible might assemble to hear him, and stood up and made a long speech asking aid for his people. [2] But the Lacedaemonians would not listen to him and refused to help the Ionians. So the Ionians departed; but the Lacedaemonians, though they had rejected their envoys, did nevertheless send men in a ship of fifty oars to see (as I suppose) the situation with Cyrus and Ionia. [3] These, after coming to Phocaea, sent Lacrines, who was the most esteemed among them, to Sardis, to repeat there to Cyrus a proclamation of the Lacedaemonians, that he was to harm no city on Greek territory, or else the Lacedaemonians would punish him.","places":[{"placeId":"735295266","name":"Ionians","startOffset":26,"endOffset":33},{"placeId":"550406","name":"Aeolians","startOffset":38,"endOffset":46},{"placeId":"570685","name":"Sparta","startOffset":55,"endOffset":61},{"placeId":"550823","name":"Phocaean","startOffset":110,"endOffset":118},{"placeId":"570685","name":"Spartans","startOffset":211,"endOffset":219},{"placeId":"570406","name":"Lacedaemonians","startOffset":335,"endOffset":349},{"placeId":"735295266","name":"Ionians","startOffset":398,"endOffset":405},{"placeId":"735295266","name":"Ionians","startOffset":414,"endOffset":421},{"placeId":"570406","name":"Lacedaemonians","startOffset":440,"endOffset":454},{"placeId":"550597","name":"Ionia","startOffset":596,"endOffset":601},{"placeId":"550823","name":"Phocaea","startOffset":630,"endOffset":637},{"placeId":"550867","name":"Sardis","startOffset":695,"endOffset":701},{"placeId":"570406","name":"Lacedaemonians","startOffset":750,"endOffset":764},{"placeId":"570406","name":"Lacedaemonians","startOffset":826,"endOffset":840}]},{"id":153,"text":"When the herald had proclaimed this, Cyrus is said to have asked the Greeks who were present who and how many in number these Lacedaemonians were who made this declaration. When he was told, he said to the Spartan herald, I never yet feared men who set apart a place in the middle of their city where they perjure themselves and deceive each other. They, if I keep my health, shall talk of their own misfortunes, not those of the Ionians. [2] He uttered this threat against all the Greeks, because they have markets and buy and sell there; for the Persians themselves were not used to resorting to markets at all, nor do they even have a market of any kind. [3] Presently, entrusting Sardis to a Persian called Tabalus, and instructing Pactyes, a Lydian, to take charge of the gold of Croesus and the Lydians, he himself marched away to Ecbatana, taking Croesus with him, and at first taking no notice of the Ionians. [4] For he had Babylon on his hands and the Bactrian nation and the Sacae and Egyptians; he meant to lead the army against these himself, and to send another commander against the Ionians.","places":[{"placeId":"1001896","name":"Greeks","startOffset":69,"endOffset":75},{"placeId":"570406","name":"Lacedaemonians","startOffset":126,"endOffset":140},{"placeId":"570685","name":"Spartan herald","startOffset":206,"endOffset":220},{"placeId":"735295266","name":"Ionians","startOffset":431,"endOffset":438},{"placeId":"1001896","name":"Greeks","startOffset":484,"endOffset":490},{"placeId":"geonames-130758","name":"Persians","startOffset":550,"endOffset":558},{"placeId":"550867","name":"Sardis","startOffset":686,"endOffset":692},{"placeId":"geonames-130758","name":"Persian","startOffset":698,"endOffset":705},{"placeId":"550701","name":"Lydian","startOffset":749,"endOffset":755},{"placeId":"991385","name":"Lydians","startOffset":803,"endOffset":810},{"placeId":"903021","name":"Ecbatana","startOffset":839,"endOffset":847},{"placeId":"735295266","name":"Ionians","startOffset":911,"endOffset":918},{"placeId":"893951","name":"Babylon","startOffset":935,"endOffset":942},{"placeId":"59788","name":"Bactrian nation","startOffset":964,"endOffset":979},{"placeId":"60021","name":"Sacae","startOffset":988,"endOffset":993},{"placeId":"981503","name":"Egyptians","startOffset":998,"endOffset":1007},{"placeId":"735295266","name":"Ionians","startOffset":1100,"endOffset":1107}]},{"id":154,"text":"But no sooner had Cyrus marched away from Sardis than Pactyes made the Lydians revolt from Tabalus and Cyrus; and he went down to the sea, where, as he had all the gold of Sardis, he hired soldiers and persuaded the men of the coast to join his undertaking. Then, marching to Sardis, he penned Tabalus in the acropolis and besieged him there.","places":[{"placeId":"550867","name":"Sardis","startOffset":42,"endOffset":48},{"placeId":"991385","name":"Lydians","startOffset":71,"endOffset":78},{"placeId":"550867","name":"Sardis","startOffset":172,"endOffset":178},{"placeId":"550867","name":"Sardis","startOffset":276,"endOffset":282}]},{"id":155,"text":"When Cyrus heard of this on his journey, he said to Croesus, What end to this business, Croesus? It seems that the Lydians will never stop making trouble for me and for themselves. It occurs to me that it may be best to make slaves of them; for it seems I have acted like one who slays the father and spares the children. [2] So likewise I have taken with me you who were more than a father to the Lydians, and handed the city over to the Lydians themselves; and then indeed I marvel that they revolt! So Cyrus uttered his thought; but Croesus feared that he would destroy Sardis, and answered him thus: [3] O King, what you say is reasonable. But do not ever yield to anger, or destroy an ancient city that is innocent both of the former and of the present offense. For the former I am responsible, and bear the punishment on my head; while Pactyes, in whose charge you left Sardis, does this present wrong; let him, then, pay the penalty. [4] But pardon the Lydians, and give them this command so that they not revolt or pose a danger to you: send and forbid them to possess weapons of war, and order them to wear tunics under their cloaks and knee-boots on their feet, and to teach their sons lyre-playing and song and dance and shop-keeping. And quickly, O king, you shall see them become women instead of men, so that you need not fear them, that they might revolt.","places":[{"placeId":"991385","name":"Lydians","startOffset":116,"endOffset":123},{"placeId":"991385","name":"Lydians","startOffset":399,"endOffset":406},{"placeId":"991385","name":"Lydians","startOffset":440,"endOffset":447},{"placeId":"550867","name":"Sardis","startOffset":575,"endOffset":581},{"placeId":"550867","name":"Sardis","startOffset":879,"endOffset":885},{"placeId":"991385","name":"Lydians","startOffset":963,"endOffset":970}]},{"id":156,"text":"Croesus proposed this to him, because he thought this was better for the Lydians than to be sold as slaves; he knew that without some reasonable plea he could not change the king's mind, and feared that even if the Lydians should escape this time they might later revolt and be destroyed by the Persians. [2] Cyrus was pleased by this counsel; he relented in his anger and said he would follow Croesus' advice. Then calling Mazares, a Mede, he told him to give the Lydians the commands that Croesus advised; further, to enslave all the others who had joined the Lydians in attacking Sardis; and as for Pactyes himself, by all means to bring him into his presence alive.","places":[{"placeId":"991385","name":"Lydians","startOffset":73,"endOffset":80},{"placeId":"991385","name":"Lydians","startOffset":215,"endOffset":222},{"placeId":"geonames-130758","name":"Persian","startOffset":295,"endOffset":302},{"placeId":"903080","name":"Mede","startOffset":435,"endOffset":439},{"placeId":"991385","name":"Lydians","startOffset":465,"endOffset":472},{"placeId":"991385","name":"Lydians","startOffset":562,"endOffset":569},{"placeId":"550867","name":"Sardis","startOffset":583,"endOffset":589}]},{"id":157,"text":"After giving these commands on his journey, he marched away into the Persian country. But Pactyes, learning that an army sent against him was approaching, was frightened and fled to Cyme. [2] Mazares the Mede, when he came to Sardis with the part that he had of Cyrus' host and found Pactyes' followers no longer there, first of all compelled the Lydians to carry out Cyrus' commands; and by his order they changed their whole way of life. [3] After this, he sent messengers to Cyme demanding that Pactyes be surrendered. The Cymaeans resolved to make the god at Branchidae their judge as to what course they should take; for there was an ancient place of divination there, which all the Ionians and Aeolians used to consult; the place is in the land of Miletus, above the harbor of Panormus.","places":[{"placeId":"geonames-130758","name":"Persian","startOffset":69,"endOffset":76},{"placeId":"550506","name":"Cyme","startOffset":182,"endOffset":186},{"placeId":"903080","name":"Mede","startOffset":204,"endOffset":208},{"placeId":"550867","name":"Sardis","startOffset":226,"endOffset":232},{"placeId":"991385","name":"Lydians","startOffset":347,"endOffset":354},{"placeId":"550506","name":"Cyme","startOffset":478,"endOffset":482},{"placeId":"550506","name":"Cymaeans","startOffset":526,"endOffset":534},{"placeId":"599593","name":"Branchidae","startOffset":563,"endOffset":573},{"placeId":"550597","name":"Ionians","startOffset":688,"endOffset":695},{"placeId":"550406","name":"Aeolians","startOffset":700,"endOffset":708},{"placeId":"599799","name":"Miletus","startOffset":754,"endOffset":761}]},{"id":158,"text":"The men of Cyme, then, sent to Branchidae to inquire of the shrine what they should do in the matter of Pactyes that would be most pleasing to the gods; and the oracle replied that they must surrender Pactyes to the Persians. [2] When this answer came back to them, they set about surrendering him. But while the greater part were in favor of doing this, Aristodicus son of Heraclides, a notable man among the citizens, stopped the men of Cyme from doing it; for he did not believe the oracle and thought that those who had inquired of the god spoke falsely; until at last a second band of inquirers was sent to inquire concerning Pactyes, among whom was Aristodicus.","places":[{"placeId":"550506","name":"Cyme","startOffset":11,"endOffset":15},{"placeId":"599593","name":"Branchidae","startOffset":31,"endOffset":41},{"placeId":"geonames-130758","name":"Persians","startOffset":216,"endOffset":224},{"placeId":"550506","name":"Cyme","startOffset":439,"endOffset":443}]},{"id":159,"text":"When they came to Branchidae, Aristodicus, speaking for all, put this question to the oracle: Lord, Pactyes the Lydian has come to us a suppliant fleeing a violent death at the hands of the Persians; and they demand him of us, telling the men of Cyme to surrender him. [2] But we, as much as we fear the Persian power, have not dared give up this suppliant of ours until it is clearly made known to us by you whether we are to do this or not. Thus Aristodicus inquired; and the god again gave the same answer, that Pactyes should be surrendered to the Persians. [3] With that Aristodicus did as he had already decided; he went around the temple, and took away the sparrows and all the families of nesting birds that were in it. But while he was doing so, a voice (they say) came out of the inner shrine calling to Aristodicus, and saying, Vilest of men, how dare you do this? Will you rob my temple of those that take refuge with me? [4] Then Aristodicus had his answer ready: Lord, he said, will you save your own suppliants, yet tell the men of Cyme to deliver up theirs? But the god replied, Yes, I do command them, so that you may perish all the sooner for your impiety, and never again come to inquire of my oracle about giving up those that seek refuge with you.","places":[{"placeId":"599593","name":"Branchidae","startOffset":18,"endOffset":28},{"placeId":"550701","name":"Lydian","startOffset":113,"endOffset":119},{"placeId":"geonames-130758","name":"Persians","startOffset":191,"endOffset":199},{"placeId":"550506","name":"Cyme","startOffset":247,"endOffset":251},{"placeId":"geonames-130758","name":"Persian","startOffset":305,"endOffset":312},{"placeId":"geonames-130758","name":"Persians","startOffset":554,"endOffset":562},{"placeId":"550506","name":"Cyme","startOffset":1054,"endOffset":1058}]},{"id":160,"text":"When the Cymaeans heard this answer, they sent Pactyes away to Mytilene; for they were anxious not to perish for delivering him up or to be besieged for keeping him with them. [2] Then Mazares sent a message to Mytilene demanding the surrender of Pactyes, and the Mytilenaeans prepared to give him, for a price; I cannot say exactly how much it was, for the bargain was never fulfilled; [3] for when the Cymaeans learned what the Mytilenaeans were about, they sent a ship to Lesbos and took Pactyes away to Chios. From there he was dragged out of the temple of City-guarding Athena and delivered up by the Chians, [4] who received in return Atarneus, which is a district in Mysia opposite Lesbos. The Persians thus received Pactyes and kept him guarded, so that they might show him to Cyrus; [5] and for a long time no one would use barley meal from this land of Atarneus in sacrifices to any god, or make sacrificial cakes of what grew there; everything that came from that country was kept away from any sacred rite.","places":[{"placeId":"550506","name":"Cymaeans","startOffset":9,"endOffset":17},{"placeId":"550763","name":"Mytilene","startOffset":63,"endOffset":71},{"placeId":"geonames-256866","name":"Mytilene","startOffset":211,"endOffset":219},{"placeId":"550763","name":"Mytilenaeans","startOffset":264,"endOffset":276},{"placeId":"550506","name":"Cymaeans","startOffset":404,"endOffset":412},{"placeId":"550763","name":"Mytilenaeans","startOffset":430,"endOffset":442},{"placeId":"550696","name":"Lesbos","startOffset":475,"endOffset":481},{"placeId":"550497","name":"Chios","startOffset":507,"endOffset":512},{"placeId":"550496","name":"Chians","startOffset":606,"endOffset":612},{"placeId":"550759","name":"Mysia","startOffset":674,"endOffset":679},{"placeId":"550696","name":"Lesbos","startOffset":689,"endOffset":695},{"placeId":"geonames-130758","name":"Persians","startOffset":701,"endOffset":709}]},{"id":161,"text":"The Chians, then, surrendered Pactyes, and afterwards Mazares led his army against those who had helped to besiege Tabalus, and he enslaved the people of Priene, and overran the plain of the Maeandrus, giving it to his army to pillage and Magnesia likewise. Immediately after this he died of an illness.","places":[{"placeId":"550496","name":"Chians","startOffset":4,"endOffset":10},{"placeId":"599905","name":"Priene","startOffset":154,"endOffset":160},{"placeId":"599777","name":"Maeandrus","startOffset":191,"endOffset":200},{"placeId":"599778","name":"Magnesia","startOffset":239,"endOffset":247}]},{"id":162,"text":"After his death, Harpagus, a Mede like Mazares, came down to succeed him in his command; this is the Harpagus who was entertained by Astyages the king of the Medes at that unnatural feast, and who helped win the kingship for Cyrus. [2] This man was now made general by Cyrus. When he came to Ionia, he took the cities by means of earthworks; he would drive the men within their walls and then build earthworks against the walls and so take the cities.","places":[{"placeId":"903080","name":"Mede","startOffset":29,"endOffset":33},{"placeId":"903080","name":"Medes","startOffset":158,"endOffset":163},{"placeId":"550597","name":"Ionia","startOffset":292,"endOffset":297}]},{"id":163,"text":"Phocaea was the first Ionian town that he attacked. These Phocaeans were the earliest of the Greeks to make long sea-voyages, and it was they who discovered the Adriatic Sea, and Tyrrhenia, and Iberia, and Tartessus,52 [2] not sailing in round freightships but in fifty-oared vessels. When they came to Tartessus they made friends with the king of the Tartessians, whose name was Arganthonius; he ruled Tartessus for eighty years and lived a hundred and twenty.53 [3] The Phocaeans won this man's friendship to such a degree that he invited them to leave Ionia and settle in his country wherever they liked; and then, when he could not persuade them to, and learned from them how the Median power was increasing, he gave them money to build a wall around their city. [4] He gave it generously: for the circuit of the wall is of not a few stades, and all this is made of great stones well fitted together.","places":[{"placeId":"550823","name":"Phocaea","startOffset":0,"endOffset":7},{"placeId":"550597","name":"Ionian town","startOffset":22,"endOffset":33},{"placeId":"550823","name":"Phocaeans","startOffset":58,"endOffset":67},{"placeId":"1001896","name":"Greeks","startOffset":93,"endOffset":99},{"placeId":"1004","name":"Adriatic Sea","startOffset":161,"endOffset":173},{"placeId":"413122","name":"Tyrrhenia","startOffset":179,"endOffset":188},{"placeId":"256468","name":"Tartessus","startOffset":206,"endOffset":215},{"placeId":"256468","name":"Tartessus","startOffset":303,"endOffset":312},{"placeId":"256468","name":"Tartessians","startOffset":352,"endOffset":363},{"placeId":"256468","name":"Tartessus","startOffset":403,"endOffset":412},{"placeId":"550823","name":"Phocaeans","startOffset":472,"endOffset":481},{"placeId":"550597","name":"Ionia","startOffset":555,"endOffset":560},{"placeId":"903080","name":"Median power","startOffset":684,"endOffset":696}]},{"id":164,"text":"In such a manner the Phocaeans' wall was built. Harpagus marched against the city and besieged it, but he made overtures, and said that it would suffice him if the Phocaeans would demolish one rampart of the wall and dedicate one house. [2] But the Phocaeans, very indignant at the thought of slavery, said they wanted to deliberate for a day, and then they would answer; but while they were deliberating, Harpagus must withdraw his army from the walls, they said. Harpagus said that he well knew what they intended to do, but that nevertheless he would allow them to deliberate. [3] So when Harpagus withdrew his army from the walls, the Phocaeans launched their fifty-oared ships, embarked their children and women and all their movable goods, besides the statues from the temples and everything dedicated in them except bronze or stonework or painting, and then embarked themselves and set sail for Chios; and the Persians took Phocaea, left thus uninhabited.","places":[{"placeId":"550823","name":"Phocaeans' wall","startOffset":21,"endOffset":36},{"placeId":"550823","name":"Phocaeans","startOffset":164,"endOffset":173},{"placeId":"550823","name":"Phocaeans","startOffset":249,"endOffset":258},{"placeId":"550823","name":"Phocaeans","startOffset":639,"endOffset":648},{"placeId":"550497","name":"Chios","startOffset":902,"endOffset":907},{"placeId":"geonames-130758","name":"Persians","startOffset":917,"endOffset":925},{"placeId":"550823","name":"Phocaea","startOffset":931,"endOffset":938}]},{"id":165,"text":"The Phocaeans would have bought the islands called Oenussae from the Chians;54 but the Chians would not sell them, because they feared that the islands would become a market and so their own island be cut off from trade: so the Phocaeans prepared to sail to Cyrnus,55 where at the command of an oracle they had built a city called Alalia twenty years before. [2] Arganthonius was by this time dead. While getting ready for their voyage, they first sailed to Phocaea, where they destroyed the Persian guard to whom Harpagus had entrusted the defense of the city; and when this was done, they called down mighty curses on any one of them who should stay behind when the rest sailed. [3] Not only this, but they sank a mass of iron in the sea, and swore never to return to Phocaea before the iron should appear again. But while they prepared to sail to Cyrnus, more than half of the citizens were overcome with longing and pitiful sorrow for the city and the life of their land, and they broke their oath and sailed back to Phocaea. Those of them who kept the oath put out to sea from the Oenussae.","places":[{"placeId":"550823","name":"Phocaeans","startOffset":4,"endOffset":13},{"placeId":"550781","name":"Oenussae","startOffset":51,"endOffset":59},{"placeId":"550496","name":"Chians","startOffset":69,"endOffset":75},{"placeId":"550496","name":"Chians","startOffset":87,"endOffset":93},{"placeId":"550823","name":"Phocaeans","startOffset":228,"endOffset":237},{"placeId":"472063","name":"Cyrnus","startOffset":258,"endOffset":264},{"placeId":"472048","name":"Alalia","startOffset":331,"endOffset":337},{"placeId":"550823","name":"Phocaea","startOffset":458,"endOffset":465},{"placeId":"geonames-130758","name":"Persian","startOffset":492,"endOffset":499},{"placeId":"550823","name":"Phocaea","startOffset":770,"endOffset":777},{"placeId":"472063","name":"Cyrnus","startOffset":850,"endOffset":856},{"placeId":"550823","name":"Phocaea","startOffset":1021,"endOffset":1028},{"placeId":"550781","name":"Oenussae","startOffset":1086,"endOffset":1094}]},{"id":166,"text":"And when they came to Cyrnus they lived there for five years as one community with those who had come first, and they founded temples there. But they harassed and plundered all their neighbors, as a result of which the Tyrrhenians and Carthaginians made common cause against them, and sailed to attack them with sixty ships each. [2] The Phocaeans also manned their ships, sixty in number, and met the enemy in the sea called Sardonian. They engaged and the Phocaeans won, yet it was only a kind of Cadmean victory;56 for they lost forty of their ships, and the twenty that remained were useless, their rams twisted awry. [3] Then sailing to Alalia they took their children and women and all of their possessions that their ships could hold on board, and leaving Cyrnus they sailed to Rhegium.","places":[{"placeId":"472063","name":"Cyrnus","startOffset":22,"endOffset":28},{"placeId":"413122","name":"Tyrrhenians","startOffset":219,"endOffset":230},{"placeId":"314921","name":"Carthaginians","startOffset":235,"endOffset":248},{"placeId":"550823","name":"Phocaeans","startOffset":338,"endOffset":347},{"placeId":"472127","name":"Sardonian","startOffset":426,"endOffset":435},{"placeId":"550823","name":"Phocaeans","startOffset":458,"endOffset":467},{"placeId":"472048","name":"Alalia","startOffset":642,"endOffset":648},{"placeId":"472063","name":"Cyrnus","startOffset":763,"endOffset":769},{"placeId":"452416","name":"Rhegium","startOffset":785,"endOffset":792}]},{"id":167,"text":"As for the crews of the disabled ships, the Carthaginians and Tyrrhenians drew lots for them, and of the Tyrrhenians the Agyllaioi57 were allotted by far the majority and these they led out and stoned to death. But afterwards, everything from Agylla that passed the place where the stoned Phocaeans lay, whether sheep or beasts of burden or men, became distorted and crippled and palsied. [2] The Agyllaeans sent to Delphi, wanting to mend their offense; and the Pythian priestess told them to do what the people of Agylla do to this day: for they pay great honors to the Phocaeans, with religious rites and games and horse-races. [3] Such was the end of this part of the Phocaeans. Those of them who fled to Rhegium set out from there and gained possession of that city in the Oenotrian58 country which is now called Hyele;59 [4] they founded this because they learned from a man of Posidonia that the Cyrnus whose establishment the Pythian priestess ordained was the hero, and not the island.","places":[{"placeId":"314921","name":"Carthaginians","startOffset":44,"endOffset":57},{"placeId":"413122","name":"Tyrrhenians","startOffset":62,"endOffset":73},{"placeId":"413122","name":"Tyrrhenians","startOffset":105,"endOffset":116},{"placeId":"422859","name":"Agyllaioi","startOffset":121,"endOffset":130},{"placeId":"422859","name":"Agylla","startOffset":243,"endOffset":249},{"placeId":"550823","name":"Phocaeans","startOffset":289,"endOffset":298},{"placeId":"422859","name":"Agyllaeans","startOffset":397,"endOffset":407},{"placeId":"540726","name":"Delphi","startOffset":416,"endOffset":422},{"placeId":"540726","name":"Pythian priestess","startOffset":463,"endOffset":480},{"placeId":"422859","name":"Agylla","startOffset":516,"endOffset":522},{"placeId":"550823","name":"Phocaeans","startOffset":572,"endOffset":581},{"placeId":"550823","name":"Phocaeans","startOffset":672,"endOffset":681},{"placeId":"452416","name":"Rhegium","startOffset":709,"endOffset":716},{"placeId":"452395","name":"Oenotrian","startOffset":778,"endOffset":787},{"placeId":"452488","name":"Hyele","startOffset":818,"endOffset":823},{"placeId":"442733","name":"Posidonia","startOffset":884,"endOffset":893},{"placeId":"472063","name":"Cyrnus","startOffset":903,"endOffset":909},{"placeId":"540726","name":"Pythian priestess","startOffset":934,"endOffset":951}]},{"id":168,"text":"Thus, then, it went with the Ionian Phocaea. The Teians did the same things as the Phocaeans: when Harpagus had taken their walled city by building an earthwork, they all embarked aboard ship and sailed away for Thrace. There they founded a city, Abdera, which before this had been founded by Timesius of Clazomenae; yet he got no profit of it, but was driven out by the Thracians. This Timesius is now honored as a hero by the Teians of Abdera.","places":[{"placeId":"735295266","name":"Ionian","startOffset":29,"endOffset":35},{"placeId":"550823","name":"Phocaea","startOffset":36,"endOffset":43},{"placeId":"550913","name":"Teians","startOffset":49,"endOffset":55},{"placeId":"550823","name":"Phocaeans","startOffset":83,"endOffset":92},{"placeId":"501323","name":"Abdera","startOffset":247,"endOffset":253},{"placeId":"550650","name":"Clazomenae","startOffset":305,"endOffset":315},{"placeId":"550913","name":"Teians","startOffset":428,"endOffset":434},{"placeId":"501323","name":"Abdera","startOffset":438,"endOffset":444}]},{"id":169,"text":"These were the only Ionians who left their native lands, unable to endure slavery. The rest of the Ionians, except the Milesians, though they faced Harpagus in battle as did the exiles, and conducted themselves well, each fighting for his own country, yet, when they were defeated and their cities taken, they remained where they were and did as they were told. [2] The Milesians, as I have already said, made a treaty with Cyrus himself and struck no blow. Thus Ionia was enslaved for the second time: and when Harpagus had conquered the Ionians of the mainland, the Ionians of the islands, fearing the same fate, surrendered to Cyrus.","places":[{"placeId":"550597","name":"Ionians","startOffset":20,"endOffset":27},{"placeId":"550597","name":"Ionians","startOffset":99,"endOffset":106},{"placeId":"599799","name":"Milesians","startOffset":119,"endOffset":128},{"placeId":"599799","name":"Milesians","startOffset":370,"endOffset":379},{"placeId":"550597","name":"Ionia","startOffset":463,"endOffset":468},{"placeId":"550597","name":"Ionians","startOffset":539,"endOffset":546},{"placeId":"550597","name":"Ionians","startOffset":568,"endOffset":575}]},{"id":170,"text":"When the Ionians, despite their evil plight, nonetheless assembled at the Panionion, Bias of Priene, I have learned, gave them very useful advice, and had they followed it they might have been the most prosperous of all Greeks: [2] for he advised them to put out to sea and sail all together to Sardo and then found one city for all Ionians: thus, possessing the greatest island in the world and ruling others, they would be rid of slavery and have prosperity; but if they stayed in Ionia he could see (he said) no hope of freedom for them. [3] This was the advice which Bias of Priene gave after the destruction of the Ionians; and that given before the destruction by Thales of Miletus, a Phoenician by descent, was good too; he advised that the Ionians have one place of deliberation, and that it be in Teos (for that was the center of Ionia), and that the other cities be considered no more than demes.Thus Bias and Thales advised.","places":[{"placeId":"550597","name":"Ionians","startOffset":9,"endOffset":16},{"placeId":"599855","name":"Panionion","startOffset":74,"endOffset":83},{"placeId":"599905","name":"Priene","startOffset":93,"endOffset":99},{"placeId":"1001896","name":"Greeks","startOffset":220,"endOffset":226},{"placeId":"550597","name":"Ionians","startOffset":333,"endOffset":340},{"placeId":"550597","name":"Ionia","startOffset":483,"endOffset":488},{"placeId":"599905","name":"Priene","startOffset":579,"endOffset":585},{"placeId":"550597","name":"Ionians","startOffset":620,"endOffset":627},{"placeId":"599799","name":"Miletus","startOffset":680,"endOffset":687},{"placeId":"678334","name":"Phoenician","startOffset":691,"endOffset":701},{"placeId":"550597","name":"Ionians","startOffset":748,"endOffset":755},{"placeId":"550913","name":"Teos","startOffset":806,"endOffset":810},{"placeId":"550597","name":"Ionia","startOffset":839,"endOffset":844}]},{"id":171,"text":"Harpagus, after subjugating Ionia, made an expedition against the Carians, Caunians, and Lycians, taking Ionians and Aeolians with him. [2] Of these, the Carians have come to the mainland from the islands; for in the past they were islanders, called Leleges and under the rule of Minos, not (as far as I can learn by report) paying tribute, but manning ships for him when he needed them. [3] Since Minos had subjected a good deal of territory for himself and was victorious in war, this made the Carians too at that time by far the most respected of all nations. [4] They invented three things in which they were followed by the Greeks: it was the Carians who originated wearing crests on their helmets and devices on their shields, and who first made grips for their shields; until then all who used shields carried them without these grips, and guided them with leather belts which they slung round the neck and over the left shoulder.60 [5] Then, a long time afterwards, the Carians were driven from the islands by Dorians and Ionians and so came to the mainland. This is the Cretan story about the Carians; but the Carians themselves do not subscribe to it, but believe that they are aboriginal inhabitants of the mainland and always bore the name which they bear now; [6] and they point to an ancient shrine of Carian Zeus at Mylasa, to which Mysians and Lydians, as brethren of the Carians (for Lydus and Mysus, they say, were brothers of Car), are admitted, but not those who spoke the same language as the Carians but were of another people.","places":[{"placeId":"550597","name":"Ionia","startOffset":28,"endOffset":33},{"placeId":"991381","name":"Carians","startOffset":66,"endOffset":73},{"placeId":"638796","name":"Caunians","startOffset":75,"endOffset":83},{"placeId":"638965","name":"Lycians","startOffset":89,"endOffset":96},{"placeId":"550597","name":"Ionians","startOffset":105,"endOffset":112},{"placeId":"550406","name":"Aeolians","startOffset":117,"endOffset":125},{"placeId":"991381","name":"Carians","startOffset":154,"endOffset":161},{"placeId":"991381","name":"Carians","startOffset":496,"endOffset":503},{"placeId":"1001896","name":"Greeks","startOffset":629,"endOffset":635},{"placeId":"991381","name":"Carians","startOffset":648,"endOffset":655},{"placeId":"991381","name":"Carians","startOffset":978,"endOffset":985},{"placeId":"550597","name":"Ionians","startOffset":1030,"endOffset":1037},{"placeId":"589748","name":"Cretan story","startOffset":1079,"endOffset":1091},{"placeId":"991381","name":"Carians","startOffset":1102,"endOffset":1109},{"placeId":"991381","name":"Carians","startOffset":1119,"endOffset":1126},{"placeId":"991381","name":"Carian Zeus","startOffset":1316,"endOffset":1327},{"placeId":"599810","name":"Mylasa","startOffset":1331,"endOffset":1337},{"placeId":"550710","name":"Mysians","startOffset":1348,"endOffset":1355},{"placeId":"991385","name":"Lydians","startOffset":1360,"endOffset":1367},{"placeId":"991381","name":"Carians","startOffset":1388,"endOffset":1395},{"placeId":"991381","name":"Carians","startOffset":1514,"endOffset":1521}]},{"id":172,"text":"I think the Caunians are aborigines of the soil, but they say that they came from Crete. Their speech has become like the Carian, or the Carian like theirs (for I cannot clearly decide), but in their customs they diverge widely from the Carians, as from all other men. Their chief pleasure is to assemble for drinking-bouts in groups according to their ages and friendships: men, women, and children. [2] Certain foreign rites of worship were established among them; but afterwards, when they were inclined otherwise, and wanted to worship only the gods of their fathers, all Caunian men of full age put on their armor and went together as far as the boundaries of Calynda, striking the air with their spears and saying that they were casting out the alien gods.","places":[{"placeId":"638796","name":"Caunians","startOffset":12,"endOffset":20},{"placeId":"589748","name":"Crete","startOffset":82,"endOffset":87},{"placeId":"991381","name":"Carian","startOffset":122,"endOffset":128},{"placeId":"991381","name":"Carian","startOffset":137,"endOffset":143},{"placeId":"991381","name":"Carians","startOffset":237,"endOffset":244},{"placeId":"638796","name":"Caunian men","startOffset":576,"endOffset":587},{"placeId":"638891","name":"Calynda","startOffset":665,"endOffset":672}]},{"id":173,"text":"Such are their ways. The Lycians were from Crete in ancient times (for in the past none that lived on Crete were Greek). [2] Now there was a dispute in Crete about the royal power between Sarpedon and Minos, sons of Europa; Minos prevailed in this dispute and drove out Sarpedon and his partisans; who, after being driven out, came to the Milyan land in Asia. What is now possessed by the Lycians was in the past Milyan, and the Milyans were then called Solymi. [3] For a while Sarpedon ruled them, and the people were called Termilae, which was the name that they had brought with them and that is still given to the Lycians by their neighbors; but after Lycus son of Pandion came from Athensbanished as well by his brother, Aegeusto join Sarpedon in the land of the Termilae, they came in time to be called Lycians after Lycus. [4] Their customs are partly Cretan and partly Carian. But they have one which is their own and shared by no other men: they take their names not from their fathers but from their mothers, [5] and when one is asked by his neighbor who he is, he will say that he is the son of such a mother, and rehearse the mothers of his mother. Indeed, if a female citizen marries a slave, her children are considered pure-blooded; but if a male citizen, even the most prominent of them, takes an alien wife or concubine, the children are dishonored.","places":[{"placeId":"638965","name":"Lycians","startOffset":25,"endOffset":32},{"placeId":"589748","name":"Crete","startOffset":43,"endOffset":48},{"placeId":"589748","name":"Crete","startOffset":102,"endOffset":107},{"placeId":"589748","name":"Crete","startOffset":152,"endOffset":157},{"placeId":"638996","name":"Milyan land","startOffset":339,"endOffset":350},{"placeId":"638965","name":"Lycians","startOffset":389,"endOffset":396},{"placeId":"638996","name":"Milyan","startOffset":413,"endOffset":419},{"placeId":"638996","name":"Milyans","startOffset":429,"endOffset":436},{"placeId":"639114","name":"Solymi","startOffset":454,"endOffset":460},{"placeId":"638965","name":"Lycians","startOffset":618,"endOffset":625},{"placeId":"579885","name":"Athens","startOffset":687,"endOffset":693},{"placeId":"638965","name":"Lycians","startOffset":811,"endOffset":818},{"placeId":"589748","name":"Cretan","startOffset":861,"endOffset":867},{"placeId":"991381","name":"Carian","startOffset":879,"endOffset":885}]},{"id":174,"text":"Neither the Carians nor any Greeks who dwell in this country did any thing notable before they were all enslaved by Harpagus. [2] Among those who inhabit it are certain Cnidians, colonists from Lacedaemon. Their country (it is called the Triopion) lies between the sea and that part of the peninsula which belongs to Bubassus, and all but a small part of the Cnidian territory is washed by the sea [3] (for it is bounded on the north by the gulf of Ceramicus, and on the south by the sea off Syme and Rhodes). Now while Harpagus was conquering Ionia, the Cnidians dug a trench across this little space, which is about two-thirds of a mile wide, in order that their country might be an island. So they brought it all within the entrenchment; for the frontier between the Cnidian country and the mainland is on the isthmus across which they dug. [4] Many of them were at this work; and seeing that the workers were injured when breaking stones more often and less naturally than usual, some in other ways, but most in the eyes, the Cnidians sent envoys to Delphi to inquire what it was that opposed them. [5] Then, as they themselves say, the priestess gave them this answer in iambic verse: Do not wall or trench the isthmus: Zeus would have given you an island, if he had wanted to.  [6] At this answer from the priestess, the Cnidians stopped their digging, and when Harpagus came against them with his army they surrendered to him without resistance.","places":[{"placeId":"991381","name":"Carians","startOffset":12,"endOffset":19},{"placeId":"1001896","name":"Greeks","startOffset":28,"endOffset":34},{"placeId":"599575","name":"Cnidians","startOffset":169,"endOffset":177},{"placeId":"570406","name":"Lacedaemon","startOffset":194,"endOffset":204},{"placeId":"599988","name":"Triopion","startOffset":238,"endOffset":246},{"placeId":"599561","name":"Bubassus","startOffset":317,"endOffset":325},{"placeId":"599575","name":"Cnidian territory","startOffset":359,"endOffset":376},{"placeId":"599706","name":"gulf of Ceramicus","startOffset":441,"endOffset":458},{"placeId":"599950","name":"Syme","startOffset":492,"endOffset":496},{"placeId":"590031","name":"Rhodes","startOffset":501,"endOffset":507},{"placeId":"550597","name":"Ionia","startOffset":544,"endOffset":549},{"placeId":"599575","name":"Cnidians","startOffset":555,"endOffset":563},{"placeId":"599575","name":"Cnidian country","startOffset":770,"endOffset":785},{"placeId":"599575","name":"Cnidians","startOffset":1030,"endOffset":1038},{"placeId":"540726","name":"Delphi","startOffset":1054,"endOffset":1060},{"placeId":"599575","name":"Cnidians","startOffset":1331,"endOffset":1339}]},{"id":175,"text":"There were Pedaseans dwelling inland above Halicarnassus; when any misfortune was approaching them or their neighbors, the priestess of Athena grew a long beard. This had happened to them thrice. These were the only men near Caria who held out for long against Harpagus, and they gave him the most trouble; they fortified a hill called Lide.","places":[{"placeId":"599873","name":"Pedaseans","startOffset":11,"endOffset":20},{"placeId":"599636","name":"Halicarnassus","startOffset":43,"endOffset":56},{"placeId":"991381","name":"Caria","startOffset":225,"endOffset":230},{"placeId":"599768","name":"Lide","startOffset":336,"endOffset":340}]},{"id":176,"text":"The Pedaseans were at length taken, and when Harpagus led his army into the plain of Xanthus, the Lycians came out to meet him, and showed themselves courageous fighting few against many; but being beaten and driven into the city, they gathered their wives and children and goods and servants into the acropolis, and then set the whole acropolis on fire. [2] Then they swore great oaths to each other, and sallying out fell fighting, all the men of Xanthus. [3] Of the Xanthians who claim now to be Lycians the greater number, all except eighty households, are of foreign descent; these eighty families as it happened were away from the city at that time, and thus survived. So Harpagus gained Xanthus, and Caunus too in a somewhat similar manner, the Caunians following for the most part the example of the Lycians.","places":[{"placeId":"599873","name":"Pedaseans","startOffset":4,"endOffset":13},{"placeId":"639167","name":"Xanthus","startOffset":85,"endOffset":92},{"placeId":"638965","name":"Lycians","startOffset":98,"endOffset":105},{"placeId":"639166","name":"Xanthus","startOffset":449,"endOffset":456},{"placeId":"639166","name":"Xanthians","startOffset":469,"endOffset":478},{"placeId":"638965","name":"Lycians","startOffset":499,"endOffset":506},{"placeId":"639166","name":"Xanthus","startOffset":694,"endOffset":701},{"placeId":"638796","name":"Caunians","startOffset":752,"endOffset":760},{"placeId":"638965","name":"Lycians","startOffset":808,"endOffset":815}]},{"id":177,"text":"Harpagus, then, made havoc of lower Asia; in the upper country, Cyrus himself vanquished every nation, leaving none untouched. Of the greater part of these I will say nothing, but will speak only of those which gave Cyrus the most trouble and are most worthy of being described.","places":[]},{"id":178,"text":"When Cyrus had made all the mainland submit to him, he attacked the Assyrians. In Assyria there are many other great cities, but the most famous and the strongest was Babylon, where the royal dwelling had been established after the destruction of Ninus.61 Babylon was a city such as I will now describe. [2] It lies in a great plain, and is in shape a square, each side fifteen miles in length; thus sixty miles make the complete circuit of the city. Such is the size of the city of Babylon; and it was planned like no other city of which we know. [3] Around it runs first a moat deep and wide and full of water, and then a wall eighty three feet thick and three hundred thirty three feet high. The royal measure is greater by three fingers' breadth than the common measure.62","places":[{"placeId":"29492","name":"Assyrians","startOffset":68,"endOffset":77},{"placeId":"29492","name":"Assyria","startOffset":82,"endOffset":89},{"placeId":"893951","name":"Babylon","startOffset":167,"endOffset":174},{"placeId":"874621","name":"Ninus","startOffset":247,"endOffset":252},{"placeId":"893951","name":"Babylon","startOffset":256,"endOffset":263}]},{"id":179,"text":"Further, I must relate where the earth was used as it was dug from the moat and how the wall was constructed. As they dug the moat, they made bricks of the earth which was carried out of the place they dug, and when they had moulded bricks enough, they baked them in ovens; [2] then using hot bitumen for cement and interposing layers of wattled reeds at every thirtieth course of bricks, they built first the border of the moat and then the wall itself in the same fashion. [3] On the top, along the edges of the wall, they built houses of a single room, facing each other, with space enough between to drive a four-horse chariot. There are a hundred gates in the circuit of the wall, all of bronze, with posts and lintels of the same. [4] There is another city, called Is,63 eight days' journey from Babylon, where there is a little river, also named Is, a tributary of the Euphrates river; from the source of this river Is, many lumps of bitumen rise with the water; and from there the bitumen was brought for the wall of Babylon.","places":[{"placeId":"893951","name":"Babylon","startOffset":802,"endOffset":809},{"placeId":"912849","name":"Euphrates","startOffset":876,"endOffset":885},{"placeId":"893951","name":"Babylon","startOffset":1025,"endOffset":1032}]},{"id":180,"text":"Thus, then, this wall was built; the city is divided into two parts; for it is cut in half by a river named Euphrates, a wide, deep, and swift river, flowing from Armenia and issuing into the Red Sea. [2] The angles of the wall, then, on either side are built quite down to the river; here they turn, and from here a fence of baked bricks runs along each bank of the stream. [3] The city itself is full of houses three and four stories high; and the ways that traverse it, those that run crosswise towards the river and the rest, are all straight. [4] Further, at the end of each road there was a gate in the riverside fence, one gate for each alley; these gates also were of bronze, and these too opened on the river.","places":[{"placeId":"912849","name":"Euphrates","startOffset":108,"endOffset":117},{"placeId":"981507","name":"Armenia","startOffset":163,"endOffset":170},{"placeId":"39290","name":"Red Sea","startOffset":192,"endOffset":199}]},{"id":181,"text":"These walls are the city's outer armor; within them there is another encircling wall, nearly as strong as the other, but narrower. [2] In the middle of one division of the city stands the royal palace, surrounded by a high and strong wall; and in the middle of the other is still to this day the sacred enclosure of Zeus Belus,64 a square of four hundred and forty yards each way, with gates of bronze. [3] In the center of this sacred enclosure a solid tower has been built, two hundred and twenty yards long and broad; a second tower rises from this and from it yet another, until at last there are eight. [4] The way up them mounts spirally outside the height of the towers; about halfway up is a resting place, with seats for repose, where those who ascend sit down and rest. [5] In the last tower there is a great shrine; and in it stands a great and well-covered couch, and a golden table nearby. But no image has been set up in the shrine, nor does any human creature lie there for the night, except one native woman, chosen from all women by the god, as the Chaldaeans say, who are priests of this god.","places":[{"placeId":"915843","name":"Chaldaeans","startOffset":1066,"endOffset":1076}]},{"id":182,"text":"These same Chaldaeans say (though I do not believe them) that the god himself is accustomed to visit the shrine and rest on the couch, as in Thebes of Egypt, as the Egyptians say [2] (for there too a woman sleeps in the temple of Theban Zeus,65 and neither the Egyptian nor the Babylonian woman, it is said, has intercourse with men), and as does the prophetess of the god66 at Patara in Lycia, whenever she is appointed; for there is not always a place of divination there; but when she is appointed she is shut up in the temple during the night.","places":[{"placeId":"915843","name":"Chaldaeans","startOffset":11,"endOffset":21},{"placeId":"786131","name":"Thebes","startOffset":141,"endOffset":147},{"placeId":"766","name":"Egypt","startOffset":151,"endOffset":156},{"placeId":"981503","name":"Egyptians","startOffset":165,"endOffset":174},{"placeId":"981503","name":"Egyptian","startOffset":261,"endOffset":269},{"placeId":"893951","name":"Babylonian woman","startOffset":278,"endOffset":294},{"placeId":"639041","name":"Patara","startOffset":378,"endOffset":384},{"placeId":"638965","name":"Lycia","startOffset":388,"endOffset":393}]},{"id":183,"text":"In the Babylonian temple there is another shrine below, where there is a great golden image of Zeus, sitting at a great golden table, and the footstool and the chair are also gold; the gold of the whole was said by the Chaldeans to be eight hundred talents' weight. [2] Outside the temple is a golden altar. There is also another great altar, on which are sacrificed the full-grown of the flocks; only nurslings may be sacrificed on the golden altar, but on the greater altar the Chaldeans even offer a thousand talents' weight of frankincense yearly, when they keep the festival of this god; and in the days of Cyrus there was still in this sacred enclosure a statue of solid gold twenty feet high. [3] I myself have not seen it, but I relate what is told by the Chaldeans. Darius son of Hystaspes proposed to take this statue but dared not; Xerxes his son took it, and killed the priest who warned him not to move the statue. Such is the furniture of this temple, and there are many private offerings besides.","places":[{"placeId":"893951","name":"Babylonian temple","startOffset":7,"endOffset":24},{"placeId":"915843","name":"Chaldeans","startOffset":219,"endOffset":228},{"placeId":"915843","name":"Chaldeans","startOffset":480,"endOffset":489},{"placeId":"915843","name":"Chaldeans","startOffset":764,"endOffset":773}]},{"id":184,"text":"Now among the many rulers of this city of Babylon (whom I shall mention in my Assyrian history) who finished the building of the walls and the temples, there were two that were women. The first of these lived five generations earlier than the second, and her name was Semiramis: it was she who built dikes on the plain, a notable work; before that the whole plain used to be flooded by the river.","places":[{"placeId":"893951","name":"Babylon","startOffset":42,"endOffset":49},{"placeId":"29492","name":"Assyrian","startOffset":78,"endOffset":86}]},{"id":185,"text":"The second queen, whose name was Nitocris, was a wiser woman than the first. She left such monuments as I shall record; and moreover, seeing that the kingdom of Media was great and restless and Ninus itself among other cities had fallen to it, she took such precautions as she could for her protection. [2] First she dealt with the river Euphrates, which flows through the middle of her city; this had been straight before; but by digging canals higher up she made the river so crooked that its course now passes one of the Assyrian villages three times; the village which is so approached by the Euphrates is called Ardericca. And now those who travel from our sea to Babylon must spend three days as they float down the Euphrates coming three times to the same village. [3] Such was this work; and she built an embankment along either shore of the river, marvellous for its greatness and height. [4] Then a long way above Babylon she dug the reservoir of a lake, a little way off from the river, always digging deep enough to find water, and making the circumference a distance of fifty two miles; what was dug out of this hole, she used to embank either edge of the river; [5] and when she had it all dug, she brought stones and made a quay all around the lake. [6] Her purpose in making the river wind and turning the hole into marsh was this: that the current might be slower because of the many windings that broke its force, and that the passages to Babylon might be crooked, and that right after them should come also the long circuit of the lake. [7] All this work was done in that part of the country where the passes are and the shortest road from Media, so that the Medes might not mix with her people and learn of her affairs.","places":[{"placeId":"903080","name":"Media","startOffset":161,"endOffset":166},{"placeId":"874621","name":"Ninus","startOffset":194,"endOffset":199},{"placeId":"912849","name":"Euphrates","startOffset":338,"endOffset":347},{"placeId":"29492","name":"Assyrian","startOffset":524,"endOffset":532},{"placeId":"912849","name":"Euphrates","startOffset":597,"endOffset":606},{"placeId":"897717","name":"Ardericca","startOffset":617,"endOffset":626},{"placeId":"893951","name":"Babylon","startOffset":669,"endOffset":676},{"placeId":"912849","name":"Euphrates","startOffset":722,"endOffset":731},{"placeId":"893951","name":"Babylon","startOffset":924,"endOffset":931},{"placeId":"893951","name":"Babylon","startOffset":1457,"endOffset":1464},{"placeId":"903080","name":"Media","startOffset":1659,"endOffset":1664},{"placeId":"903080","name":"Medes","startOffset":1678,"endOffset":1683}]},{"id":186,"text":"So she made the deep river her protection; and this work led to another which she added to it. Her city was divided into two parts by the river that flowed through the middle. In the days of the former rulers, when one wanted to go from one part to the other, one had to cross in a boat; and this, I suppose, was a nuisance. But the queen also provided for this; she made another monument of her reign out of this same work when the digging of the basin of the lake was done. [2] She had very long blocks of stone cut; and when these were ready and the place was dug, she turned the course of the river into it, and while it was filling, the former channel now being dry, she bricked the borders of the river in the city and the descent from the gate leading down to the river with baked bricks, like those of the wall; and near the middle of the city she built a bridge with the stones that had been dug up, binding them together with iron and lead. [3] Each morning, she laid square-hewn logs across it, on which the Babylonians crossed; but these logs were removed at night, lest folk always be crossing over and stealing from one another. [4] Then, when the basin she had made for a lake was filled by the river and the bridge was finished, Nitocris brought the Euphrates back to its former channel out of the lake; thus she had served her purpose, as she thought, by making a swamp of the basin, and her citizens had a bridge made for them.","places":[{"placeId":"893951","name":"Babylonians","startOffset":1019,"endOffset":1030},{"placeId":"912849","name":"Euphrates","startOffset":1266,"endOffset":1275}]},{"id":187,"text":"There was a trick, too, that this same queen contrived. She had a tomb made for herself and set high over the very gate of that entrance of the city which was used most, with writing engraved on the tomb, which read: [2] If any king of Babylon in the future is in need of money, let him open this tomb and take as much as he likes: but let him not open it unless he is in need; for it will be the worse for him. [3] This tomb remained untouched until the kingship fell to Darius. He thought it a very strange thing that he should never use this gate, or take the money when it lay there and the writing itself invited him to. [4] The reason he did not use the gate was that the dead body would be over his head as he passed through. [5] After opening the tomb, he found no money there, only the dead body, with writing which read: If you were ever satisfied with what you had and did not disgrace yourself seeking more, you would not have opened the coffins of the dead. Such a woman, it is recorded, was this queen.","places":[{"placeId":"893951","name":"Babylon","startOffset":237,"endOffset":244}]},{"id":188,"text":"Cyrus, then, marched against Nitocris' son, who inherited the name of his father Labynetus and the sovereignty of Assyria. Now when the Great King campaigns, he marches well provided with food and flocks from home; and water from the Choaspes river that flows past Susa is carried with him, the only river from which the king will drink. [2] This water of the Choaspes67 is boiled, and very many four-wheeled wagons drawn by mules carry it in silver vessels, following the king wherever he goes at any time.","places":[{"placeId":"29492","name":"Assyria","startOffset":114,"endOffset":121},{"placeId":"59773","name":"Choaspes","startOffset":234,"endOffset":242},{"placeId":"912936","name":"Susa","startOffset":265,"endOffset":269},{"placeId":"59773","name":"Choaspes","startOffset":360,"endOffset":368}]},{"id":189,"text":"When Cyrus reached the Gyndes river on his march to Babylon,68 which rises in the mountains of the Matieni and flows through the Dardanean country into another river, the Tigris, that again passes the city of Opis and empties into the Red Seawhen, I say, Cyrus tried to cross the Gyndes, which was navigable there, one of his sacred white horses dashed recklessly into the river trying to get through it, but the current overwhelmed him and swept him under and away. [2] At this violence of the river Cyrus was very angry, and he threatened to make it so feeble that women could ever after cross it easily without wetting their knees. [3] After uttering this threat, he paused in his march against Babylon, and, dividing his army into two parts, drew lines planning out a hundred and eighty canals running every way from either bank of the Gyndes; then he organized his army along the lines and made them dig. [4] Since a great multitude was at work, it went quickly; but they spent the whole summer there before it was finished.","places":[{"placeId":"897772","name":"Gyndes","startOffset":23,"endOffset":29},{"placeId":"893951","name":"Babylon","startOffset":52,"endOffset":59},{"placeId":"884179","name":"Matieni","startOffset":99,"endOffset":106},{"placeId":"912964","name":"Tigris","startOffset":171,"endOffset":177},{"placeId":"894056","name":"Opis","startOffset":209,"endOffset":213},{"placeId":"39290","name":"Red Sea","startOffset":235,"endOffset":242},{"placeId":"897772","name":"Gyndes","startOffset":281,"endOffset":287},{"placeId":"893951","name":"Babylon","startOffset":699,"endOffset":706},{"placeId":"897772","name":"Gyndes","startOffset":841,"endOffset":847}]},{"id":190,"text":"Then at the beginning of the following spring, when Cyrus had punished the Gyndes by dividing it among the three hundred and sixty canals, he marched against Babylon at last. The Babylonians sallied out and awaited him; and when he came near their city in his march, they engaged him, but they were beaten and driven inside the city. [2] There they had stored provisions enough for very many years, because they knew already that Cyrus was not a man of no ambitition, and saw that he attacked all nations alike; so now they were indifferent to the siege; and Cyrus did not know what to do, being so long delayed and gaining no advantage.","places":[{"placeId":"897772","name":"Gyndes","startOffset":75,"endOffset":81},{"placeId":"893951","name":"Babylon","startOffset":158,"endOffset":165},{"placeId":"893951","name":"Babylonians","startOffset":179,"endOffset":190}]},{"id":191,"text":"Whether someone advised him in his difficulty, or whether he perceived for himself what to do, I do not know, but he did the following. [2] He posted his army at the place where the river goes into the city, and another part of it behind the city, where the river comes out of the city, and told his men to enter the city by the channel of the Euphrates when they saw it to be fordable. Having disposed them and given this command, he himself marched away with those of his army who could not fight; [3] and when he came to the lake, Cyrus dealt with it and with the river just as had the Babylonian queen: drawing off the river by a canal into the lake, which was a marsh, he made the stream sink until its former channel could be forded. [4] When this happened, the Persians who were posted with this objective made their way into Babylon by the channel of the Euphrates, which had now sunk to a depth of about the middle of a man's thigh. [5] Now if the Babylonians had known beforehand or learned what Cyrus was up to, they would have let the Persians enter the city and have destroyed them utterly; for then they would have shut all the gates that opened on the river and mounted the walls that ran along the river banks, and so caught their enemies in a trap. [6] But as it was, the Persians took them unawares, and because of the great size of the city (those who dwell there say) those in the outer parts of it were overcome, but the inhabitants of the middle part knew nothing of it; all this time they were dancing and celebrating a holiday which happened to fall then, until they learned the truth only too well.","places":[{"placeId":"912849","name":"Euphrates","startOffset":344,"endOffset":353},{"placeId":"893951","name":"Babylonian","startOffset":589,"endOffset":599},{"placeId":"geonames-130758","name":"Persians","startOffset":768,"endOffset":776},{"placeId":"912849","name":"Euphrates","startOffset":863,"endOffset":872},{"placeId":"893951","name":"Babylonians","startOffset":957,"endOffset":968},{"placeId":"geonames-130758","name":"Persians","startOffset":1047,"endOffset":1055},{"placeId":"geonames-130758","name":"Persians","startOffset":1289,"endOffset":1297}]},{"id":192,"text":"And Babylon, then for the first time, was taken in this way. I shall show how great the power of Babylon is by many other means, but particularly by this. All the land that the great King rules is parcelled out to provision him and his army, and pays tribute besides: now the territory of Babylon feeds him for four of the twelve months in the year, the whole of the rest of Asia providing for the other eight. [2] Thus the wealth of Assyria is one third of the entire wealth of Asia. The governorship of this land, which the Persians call satrapy, is by far the most powerful of all the governorships, since the daily income of Tritantaechmes son of Artabazus, who governed this province by the king's will, was an artaba full of silver [3] (the artaba is a Persian measure, containing more than an Attic medimnus by three Attic choenixes),69 and besides warhorses he had eight hundred stallions in his stables, and sixteen thousand brood mares, each stallion servicing twenty mares. [4] Moreover he kept so great a number of Indian dogs that four great villages of the plain were appointed to provide food for the dogs and exempted from all other burdens. Such were the riches of the governor of Babylon.","places":[{"placeId":"893951","name":"Babylon","startOffset":4,"endOffset":11},{"placeId":"893951","name":"Babylon","startOffset":97,"endOffset":104},{"placeId":"893951","name":"Babylon","startOffset":289,"endOffset":296},{"placeId":"29492","name":"Assyria","startOffset":434,"endOffset":441},{"placeId":"geonames-130758","name":"Persians","startOffset":526,"endOffset":534},{"placeId":"geonames-130758","name":"Persian","startOffset":761,"endOffset":768},{"placeId":"579888","name":"Attic","startOffset":802,"endOffset":807},{"placeId":"579888","name":"Attic","startOffset":826,"endOffset":831},{"placeId":"50004","name":"Indian dogs","startOffset":1029,"endOffset":1040},{"placeId":"893951","name":"Babylon","startOffset":1200,"endOffset":1207}]},{"id":193,"text":"There is little rain in Assyria. This nourishes the roots of the grain; but it is irrigation from the river that ripens the crop and brings the grain to fullness. In Egypt, the river itself rises and floods the fields; in Assyria, they are watered by hand and by swinging beams.70 [2] For the whole land of Babylon, like Egypt, is cut across by canals. The greatest of these is navigable: it runs towards where the sun rises in winter, from the Euphrates to another river, the Tigris, on which stood the city of Ninus. This land is by far the most fertile in grain which we know. [3] It does not even try to bear trees, fig, vine, or olive, but Demeter's grain is so abundant there that it yields for the most part two hundred fold, and even three hundred fold when the harvest is best. The blades of the wheat and barley there are easily four fingers broad; [4] and for millet and sesame, I will not say to what height they grow, though it is known to me; for I am well aware that even what I have said regarding grain is wholly disbelieved by those who have never visited Babylonia. They use no oil except what they make from sesame.71 There are palm trees there growing all over the plain, most of them yielding fruit, from which food is made and wine and honey. [5] The Assyrians tend these like figs, and chiefly in this respect, that they tie the fruit of the palm called male by the Greeks to the date-bearing palm, so that the gall-fly may enter the dates and cause them to ripen, and that the fruit of the palm may not fall; for the male palms, like unripened figs, have gall-flies in their fruit.","places":[{"placeId":"29492","name":"Assyria","startOffset":24,"endOffset":31},{"placeId":"766","name":"Egypt","startOffset":166,"endOffset":171},{"placeId":"29492","name":"Assyria","startOffset":222,"endOffset":229},{"placeId":"893951","name":"Babylon","startOffset":307,"endOffset":314},{"placeId":"766","name":"Egypt","startOffset":321,"endOffset":326},{"placeId":"912849","name":"Euphrates","startOffset":445,"endOffset":454},{"placeId":"912964","name":"Tigris","startOffset":477,"endOffset":483},{"placeId":"874621","name":"Ninus","startOffset":512,"endOffset":517},{"placeId":"912816","name":"Babylonia","startOffset":1074,"endOffset":1083},{"placeId":"29492","name":"Assyrians","startOffset":1274,"endOffset":1283},{"placeId":"1001896","name":"Greeks","startOffset":1390,"endOffset":1396}]},{"id":194,"text":"I am going to indicate what seems to me to be the most marvellous thing in the country, next to the city itself. Their boats which ply the river and go to Babylon are all of skins, and round. [2] They make these in Armenia, higher up the stream than Assyria. First they cut frames of willow, then they stretch hides over these for a covering, making as it were a hold; they neither broaden the stern nor narrow the prow, but the boat is round, like a shield. They then fill it with reeds and send it floating down the river with a cargo; and it is for the most part palm wood casks of wine that they carry down. [3] Two men standing upright steer the boat, each with a paddle, one drawing it to him, the other thrusting it from him. These boats are of all sizes, some small, some very large; the largest of them are of as much as five thousand talents72 burden. There is a live ass in each boat, or more than one in the larger. [4] So when they have floated down to Babylon and disposed of their cargo, they sell the framework of the boat and all the reeds; the hides are set on the backs of asses, which are then driven back to Armenia, [5] for it is not by any means possible to go upstream by water, because of the swiftness of the current; it is for this reason that they make their boats of hides and not of wood. When they have driven their asses back into Armenia, they make more boats in the same way.","places":[{"placeId":"893951","name":"Babylon","startOffset":155,"endOffset":162},{"placeId":"981507","name":"Armenia","startOffset":215,"endOffset":222},{"placeId":"29492","name":"Assyria","startOffset":250,"endOffset":257},{"placeId":"893951","name":"Babylon","startOffset":966,"endOffset":973},{"placeId":"981507","name":"Armenia","startOffset":1129,"endOffset":1136},{"placeId":"981507","name":"Armenia","startOffset":1363,"endOffset":1370}]},{"id":195,"text":"Such then are their boats. For clothing, they wear a linen tunic, reaching to the feet; over this the Babylonian puts on another tunic, of wool, and wraps himself in a white mantle; he wears the shoes of his country, which are like Boeotian sandals. Their hair is worn long, and covered by caps; the whole body is perfumed. [2] Every man has a seal and a carved staff, and on every staff is some image, such as that of an apple or a rose or a lily or an eagle: no one carries a staff without an image.","places":[{"placeId":"893951","name":"Babylonian","startOffset":102,"endOffset":112},{"placeId":"540689","name":"Boeotian sandals","startOffset":232,"endOffset":248}]},{"id":196,"text":"This is the equipment of their persons. I will now speak of their established customs. The wisest of these, in our judgment, is one which I have learned by inquiry is also a custom of the Eneti in Illyria. It is this: once a year in every village all the maidens as they attained marriageable age were collected and brought together into one place, with a crowd of men standing around. [2] Then a crier would display and offer them for sale one by one, first the fairest of all; and then, when she had fetched a great price, he put up for sale the next most attractive, selling all the maidens as lawful wives. Rich men of Assyria who desired to marry would outbid each other for the fairest; the ordinary people, who desired to marry and had no use for beauty, could take the ugly ones and money besides; [3] for when the crier had sold all the most attractive, he would put up the one that was least beautiful, or crippled, and offer her to whoever would take her to wife for the least amount, until she fell to one who promised to accept least; the money came from the sale of the attractive ones, who thus paid the dowry of the ugly and the crippled. But a man could not give his daughter in marriage to whomever he liked, nor could one that bought a girl take her away without giving security that he would in fact make her his wife. [4] And if the couple could not agree, it was a law that the money be returned. Men might also come from other villages to buy if they so desired. [5] This, then, was their best custom; but it does not continue at this time; they have invented a new one lately [so that the women not be wronged or taken to another city]; since the conquest of Babylon made them afflicted and poor, everyone of the people that lacks a livelihood prostitutes his daughters.","places":[{"placeId":"29492","name":"Assyria","startOffset":623,"endOffset":630},{"placeId":"893951","name":"Babylon","startOffset":1683,"endOffset":1690}]},{"id":197,"text":"I come now to the next wisest of their customs: having no use for physicians, they carry the sick into the market-place; then those who have been afflicted themselves by the same illness as the sick man's, or seen others in like case, come near and advise him about his disease and comfort him, telling him by what means they have themselves recovered from it or seen others recover. No one may pass by the sick man without speaking and asking after his sickness.","places":[]},{"id":198,"text":"The dead are embalmed in honey for burial, and their dirges are like the dirges of Egypt. Whenever a Babylonian has had intercourse with his wife, they both sit before a burnt offering of incense, and at dawn they wash themselves; they will touch no vessel before this is done. This is the custom in Arabia also.","places":[{"placeId":"766","name":"Egypt","startOffset":83,"endOffset":88},{"placeId":"893951","name":"Babylonian","startOffset":101,"endOffset":111},{"placeId":"981506","name":"Arabia","startOffset":300,"endOffset":306}]},{"id":199,"text":"The foulest Babylonian custom is that which compels every woman of the land to sit in the temple of Aphrodite and have intercourse with some stranger once in her life. Many women who are rich and proud and disdain to mingle with the rest, drive to the temple in covered carriages drawn by teams, and stand there with a great retinue of attendants. [2] But most sit down in the sacred plot of Aphrodite, with crowns of cord on their heads; there is a great multitude of women coming and going; passages marked by line run every way through the crowd, by which the men pass and make their choice. [3] Once a woman has taken her place there, she does not go away to her home before some stranger has cast money into her lap, and had intercourse with her outside the temple; but while he casts the money, he must say, I invite you in the name of Mylitta (that is the Assyrian name for Aphrodite). [4] It does not matter what sum the money is; the woman will never refuse, for that would be a sin, the money being by this act made sacred. So she follows the first man who casts it and rejects no one. After their intercourse, having discharged her sacred duty to the goddess, she goes away to her home; and thereafter there is no bribe however great that will get her. [5] So then the women that are fair and tall are soon free to depart, but the uncomely have long to wait because they cannot fulfill the law; for some of them remain for three years, or four. There is a custom like this in some parts of Cyprus.","places":[{"placeId":"893951","name":"Babylonian","startOffset":12,"endOffset":22},{"placeId":"29492","name":"Assyrian","startOffset":865,"endOffset":873},{"placeId":"707498","name":"Cyprus","startOffset":1503,"endOffset":1509}]},{"id":200,"text":"These are established customs among the Babylonians. Furthermore, there are three tribes in the country that eat nothing but fish, which they catch and dry in the sun; then, after throwing it into a mortar, they pound it with pestles and strain everything through linen. Then whoever desires kneads as it were a cake of it and eats it; others bake it like bread.","places":[{"placeId":"893951","name":"Babylonians","startOffset":40,"endOffset":51}]},{"id":201,"text":"When Cyrus had conquered this nation, too, he wanted to subject the Massagetae. These are said to be a great and powerful people dwelling towards the east and the sunrise, beyond the Araxes and opposite the Issedones; and some say that they are a Scythian people.","places":[{"placeId":"59921","name":"Massagetae","startOffset":68,"endOffset":78},{"placeId":"59969","name":"Araxes","startOffset":183,"endOffset":189}]},{"id":202,"text":"The Araxes is said by some to be greater and by some to be less than the Ister. It is reported that there are many islands in it as big as Lesbos, and men on them who in summer live on roots of all kinds that they dig up, and in winter on fruit that they have got from trees when it was ripe and stored for food; [2] and they know (it is said) of trees bearing a fruit whose effect is this: gathering in groups and kindling a fire, the people sit around it and throw the fruit into the flames; then the fumes of it as it burns make them drunk as the Greeks are with wine, and more and more drunk as more fruit is thrown on the fire, until at last they rise up to dance and even sing. Such is said to be their way of life. [3] The Araxes73 flows from the country of the Matieni (as does the Gyndes, which Cyrus divided into the three hundred and sixty channels) and empties itself through forty mouths, of which all except one issue into bogs and swamps, where men are said to live whose food is raw fish, and their customary dress sealskins. [4] The one remaining stream of the Araxes flows in a clear channel into the Caspian sea.This is a sea by itself, not joined to the other sea. For that on which the Greeks sail, and the sea beyond the pillars of Heracles, which they call Atlantic, and the Red Sea, are all one:","places":[{"placeId":"59969","name":"Araxes","startOffset":4,"endOffset":10},{"placeId":"550696","name":"Lesbos","startOffset":139,"endOffset":145},{"placeId":"1001896","name":"Greeks","startOffset":550,"endOffset":556},{"placeId":"884118","name":"Araxes","startOffset":730,"endOffset":736},{"placeId":"60574","name":"country","startOffset":754,"endOffset":761},{"placeId":"884179","name":"Matieni","startOffset":769,"endOffset":776},{"placeId":"897772","name":"Gyndes","startOffset":790,"endOffset":796},{"placeId":"884118","name":"Araxes","startOffset":1078,"endOffset":1084},{"placeId":"884130","name":"Caspian sea","startOffset":1119,"endOffset":1130},{"placeId":"1001896","name":"Greeks","startOffset":1207,"endOffset":1213},{"placeId":"256198","name":"pillars of Heracles","startOffset":1243,"endOffset":1262},{"placeId":"845","name":"Atlantic","startOffset":1280,"endOffset":1288},{"placeId":"29713","name":"Red Sea","startOffset":1298,"endOffset":1305}]},{"id":203,"text":"but the Caspian is separate and by itself. Its length is what a ship rowed by oars can traverse in fifteen days, and its breadth, where it is broadest, is an eight days' journey. Along its western shore stretches the range of Caucasus, which has more and higher peaks than any other range. Many and all kinds of nations dwell in the Caucasus, and the most of them live on the fruits of the forest. [2] Here, it is said, are trees growing leaves that men crush and mix with water and use for painting figures on their clothing; these figures cannot be washed out, but last as long as the wool, as if they had been woven into it from the first. Men and women here (they say) have intercourse openly, like beasts of the flock.","places":[{"placeId":"884130","name":"Caspian","startOffset":8,"endOffset":15},{"placeId":"863766","name":"Caucasus","startOffset":226,"endOffset":234},{"placeId":"863766","name":"Caucasus","startOffset":333,"endOffset":341}]},{"id":204,"text":"This sea called Caspian is hemmed in to the west by the Caucasus: towards the east and the sunrise there stretches from its shores a boundless plain as far as the eye can see. The greater part of this wide plain is the country of the Massagetae, against whom Cyrus was eager to lead his army. [2] For there were many weighty reasons that impelled and encouraged him to do so: first, his birth, because of which he seemed to be something more than mortal; and next, his victories in his wars: for no nation that Cyrus undertook to attack could escape from him.","places":[{"placeId":"884130","name":"Caspian","startOffset":16,"endOffset":23},{"placeId":"863766","name":"Caucasus","startOffset":56,"endOffset":64},{"placeId":"59921","name":"country of the Massagetae","startOffset":219,"endOffset":244}]},{"id":205,"text":"Now at this time the Massagetae were ruled by a queen called Tomyris, whose husband was dead. Cyrus sent a message with a pretence of wanting her for his wife, but Tomyris would have none of his advances, well understanding that he wanted not her but the kingdom of the Massagetae. [2] So when guile was of no avail, Cyrus marched to the Araxes and openly prepared to attack the Massagetae; he bridged the river for his army to cross, and built towers on the pontoons bridging the river.","places":[{"placeId":"59921","name":"Massagetae","startOffset":21,"endOffset":31},{"placeId":"59921","name":"Massagetae","startOffset":270,"endOffset":280},{"placeId":"897715","name":"Araxes","startOffset":338,"endOffset":344},{"placeId":"59921","name":"Massagetae","startOffset":379,"endOffset":389}]},{"id":206,"text":"But while he was busy at this, Tomyris sent a herald to him with this message: O king of the Medes, stop hurrying on what you are hurrying on, for you cannot know whether the completion of this work will be for your advantage. Stop, and be king of your own country; and endure seeing us ruling those whom we rule. [2] But if you will not take this advice, and will do anything rather than remain at peace, then if you so greatly desire to try the strength of the Massagetae, stop your present work of bridging the river, and let us withdraw three days' journey from the Araxes; and when that is done, cross into our country. [3] Or if you prefer to receive us into your country, then withdraw yourself as I have said. Hearing this, Cyrus called together the leading Persians and laid the matter before them, asking them to advise him which he should do. They all spoke to the same end, urging him to let Tomyris and her army enter his country.","places":[{"placeId":"903080","name":"Medes","startOffset":94,"endOffset":99},{"placeId":"59921","name":"Massagetae","startOffset":464,"endOffset":474},{"placeId":"884118","name":"Araxes","startOffset":571,"endOffset":577},{"placeId":"geonames-130758","name":"Persians","startOffset":768,"endOffset":776}]},{"id":207,"text":"But Croesus the Lydian, who was present, was displeased by their advice and spoke against it. O King, he said, you have before now heard from me that since Zeus has given me to you I will turn aside to the best of my ability whatever misadventure I see threatening your house. And disaster has been my teacher. [2] Now, if you think that you and the army that you lead are immortal, I have no business giving you advice; but if you know that you and those whom you rule are only men, then I must first teach you this: men's fortunes are on a wheel, which in its turning does not allow the same man to prosper forever. [3] So, if that is the case, I am not of the same opinion about the business in hand as these other counsellors of yours. This is the danger if we agree to let the enemy enter your country: if you lose the battle, you lose your empire also, for it is plain that if the Massagetae win they will not retreat but will march against your provinces. [4] And if you conquer them, it is a lesser victory than if you crossed into their country and routed the Massagetae and pursued them; for I weigh your chances against theirs, and suppose that when you have beaten your adversaries you will march for the seat of Tomyris' power. [5] And besides what I have shown, it would be a shameful thing and not to be endured if Cyrus the son of Cambyses should yield and give ground before a woman. Now then, it occurs to me that we should cross and go forward as far as they draw back, and that then we should endeavor to overcome them by doing as I shall show. [6] As I understand, the Massagetae have no experience of the good things of Persia, and have never fared well as to what is greatly desirable. Therefore, I advise you to cut up the meat of many of your sheep and goats into generous portions for these men, and to cook it and serve it as a feast in our camp, providing many bowls of unmixed wine and all kinds of food. [7] Then let your army withdraw to the river again, leaving behind that part of it which is of least value. For if I am not mistaken in my judgment, when the Massagetae see so many good things they will give themselves over to feasting on them; and it will be up to us then to accomplish great things.","places":[{"placeId":"550701","name":"Lydian","startOffset":16,"endOffset":22},{"placeId":"59921","name":"Massagetae","startOffset":890,"endOffset":900},{"placeId":"59921","name":"Massagetae","startOffset":1072,"endOffset":1082},{"placeId":"59921","name":"Massagetae","startOffset":1593,"endOffset":1603},{"placeId":"geonames-130758","name":"Persia","startOffset":1645,"endOffset":1651},{"placeId":"59921","name":"Massagetae","startOffset":2095,"endOffset":2105}]},{"id":208,"text":"So these opinions clashed; and Cyrus set aside his former plan and chose that of Croesus; consequently, he told Tomyris to draw her army off, for he would cross (he said) and attack her; so she withdrew as she had promised before. Then he entrusted Croesus to the care of his own son Cambyses, to whom he would leave his sovereignty, telling Cambyses to honor Croesus and treat him well if the crossing of the river against the Massagetae should not go well. With these instructions, he sent the two back to Persia, and he and his army crossed the river.","places":[{"placeId":"59921","name":"Massagetae","startOffset":428,"endOffset":438},{"placeId":"geonames-130758","name":"Persia","startOffset":508,"endOffset":514}]},{"id":209,"text":"After he had crossed the Araxes, he dreamed that night while sleeping in the country of the Massagetae that he saw the eldest of Hystapes' sons with wings on his shoulders, the one wing overshadowing Asia and the other Europe. [2] Hystaspes son of Arsames was an Achaemenid, and Darius was the eldest of his sons, then about twenty years old; this Darius had been left behind in Persia, not yet being of an age to go on campaign. [3] So when Cyrus awoke he considered his vision, and because it seemed to him to be of great importance, he sent for Hystaspes and said to him privately, Hystaspes, I have caught your son plotting against me and my sovereignty; and I will tell you how I know this for certain. [4] The gods care for me and show me beforehand all that is coming. Now then, I have seen in a dream in the past night your eldest son with wings on his shoulders, overshadowing Asia with the one and Europe with the other. [5] From this vision, there is no way that he is not plotting against me. Therefore hurry back to Persia, and see that when I come back after subjecting this country you bring your son before me to be questioned about this.","places":[{"placeId":"59969","name":"Araxes","startOffset":25,"endOffset":31},{"placeId":"59921","name":"country of the Massagetae","startOffset":77,"endOffset":102},{"placeId":"geonames-130758","name":"Persia","startOffset":379,"endOffset":385},{"placeId":"geonames-130758","name":"Persia","startOffset":1030,"endOffset":1036}]},{"id":210,"text":"Cyrus said this, thinking that Darius was plotting against him; but in fact, heaven was showing him that he himself was to die in the land where he was and Darius inherit his kingdom. [2] So then Hystaspes replied with this: O King, may there not be any Persian born who would plot against you! But if there is, may he perish suddenly; for you have made the Persians free men instead of slaves and rulers of all instead of subjects of any. [3] But if your vision does indeed signify that my son is planning revolution, I give him to you to treat as you like.","places":[{"placeId":"geonames-130758","name":"Persian","startOffset":255,"endOffset":262},{"placeId":"geonames-130758","name":"Persians","startOffset":359,"endOffset":367}]},{"id":211,"text":"After having given this answer and crossed the Araxes, Hystaspes went to Persia to watch his son for Cyrus; and Cyrus, advancing a day's journey from the Araxes, acted according to Croesus' advice. [2] Cyrus and the sound portion of the Persian army marched back to the Araxes, leaving behind those that were useless; a third of the Massagetae forces attacked those of the army who were left behind and destroyed them despite resistance; then, when they had overcome their enemies, seeing the banquet spread they sat down and feasted, and after they had had their fill of food and wine, they fell asleep. [3] Then the Persians attacked them, killing many and taking many more alive, among whom was the son of Tomyris the queen, Spargapises by name, the leader of the Massagetae.","places":[{"placeId":"884118","name":"Araxes","startOffset":47,"endOffset":53},{"placeId":"geonames-130758","name":"Persia","startOffset":73,"endOffset":79},{"placeId":"884118","name":"Araxes","startOffset":154,"endOffset":160},{"placeId":"geonames-130758","name":"Persian","startOffset":237,"endOffset":244},{"placeId":"884118","name":"Araxes","startOffset":270,"endOffset":276},{"placeId":"59921","name":"Massagetae","startOffset":333,"endOffset":343},{"placeId":"geonames-130758","name":"Persians","startOffset":618,"endOffset":626},{"placeId":"59921","name":"Massagetae","startOffset":767,"endOffset":777}]},{"id":212,"text":"When Tomyris heard what had happened to her army and her son, she sent a herald to Cyrus with this message: [2] Cyrus who can never get enough blood, do not be elated by what you have done; it is nothing to be proud of if, by the fruit of the vinewith which you Persians fill yourselves and rage so violently that evil words rise in a flood to your lips when the wine enters your bodiesif, by tricking him with this drug, you got the better of my son, and not by force of arms in battle. [3] Now, then, take a word of good advice from me: give me back my son and leave this country unpunished, even though you have savaged a third of the Massagetae army. But if you will not, then I swear to you by the sun, lord of the Massagetae, that I shall give even you who can never get enough of it your fill of blood.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":264,"endOffset":272},{"placeId":"59921","name":"Massagetae","startOffset":641,"endOffset":651},{"placeId":"59921","name":"Massagetae","startOffset":723,"endOffset":733}]},{"id":213,"text":"Cyrus dismissed this warning when it was repeated to him. But Spargapises, the son of the queen Tomyris, after the wine wore off and he recognized his evil plight, asked Cyrus to be freed from his bonds; and this was granted him; but as soon as he was freed and had the use of his hands, he did away with himself.","places":[]},{"id":214,"text":"Such was the end of Spargapises. Tomyris, when Cyrus would not listen to her, collected all her forces and engaged him. This fight I judge to have been the fiercest ever fought by men that were not Greek; and indeed I have learned that this was so. [2] For first (it is said) they shot arrows at each other from a distance; then, when their arrows were all spent, they rushed at each other and fought with their spears and swords; and for a long time they stood fighting and neither would give ground; but at last the Massagetae got the upper hand. [3] The greater part of the Persian army was destroyed there on the spot, and Cyrus himself fell there, after having reigned for one year short of thirty years. [4] Tomyris filled a skin with human blood, and searched among the Persian dead for Cyrus' body; and when she found it, she pushed his head into the skin, and insulted the dead man in these words: [5] Though I am alive and have defeated you in battle, you have destroyed me, taking my son by guile; but just as I threatened, I give you your fill of blood. Many stories are told of Cyrus' death; this, that I have told, is the most credible.","places":[{"placeId":"59921","name":"Massagetae","startOffset":518,"endOffset":528},{"placeId":"geonames-130758","name":"Persian","startOffset":577,"endOffset":584},{"placeId":"geonames-130758","name":"Persian","startOffset":777,"endOffset":784}]},{"id":215,"text":"These Massagetae are like the Scythians in their dress and way of life. They are both cavalry and infantry (having some of each kind), and spearmen and archers; and it is their custom to carry battle-axes. They always use gold and bronze; all their spear-points and arrow-heads and battle-axes are bronze and the adornment of their headgear and belts and girdles is gold. [2] They equip their horses similarly, protecting their chests with bronze breastplates and putting gold on reins, bits, and cheekplates. But they never use iron and silver, for there is none at all in their country, but gold and bronze abound.","places":[{"placeId":"59921","name":"Massagetae","startOffset":6,"endOffset":16},{"placeId":"216976","name":"Scythians","startOffset":30,"endOffset":39}]},{"id":216,"text":"Now for their customs: each man marries a wife, but the wives are common to all. The Greeks say this is a Scythian custom; it is not, but a custom of the Massagetae. There, when a man desires a woman, he hangs his quiver before her wagon, and has intercourse with her without fear. [2] Though they fix no certain term to life, yet when a man is very old all his family meet together and kill him, with beasts of the flock besides, then boil the flesh and feast on it. [3] This is held to be the happiest death; when a man dies of an illness, they do not eat him, but bury him in the earth, and lament that he did not live to be killed. They never plant seed; their fare is their livestock and the fish which they take in abundance from the Araxes. [4] Their drink is milk. The sun is the only god whom they worship; they sacrifice horses to him; the reasoning is that he is the swiftest of the gods, and therefore they give him the swiftest of mortal things.HerodotusThe Histories","places":[{"placeId":"1001896","name":"Greeks","startOffset":85,"endOffset":91},{"placeId":"59921","name":"Massagetae","startOffset":154,"endOffset":164},{"placeId":"884118","name":"Araxes","startOffset":740,"endOffset":746}]}]`)},2:{id:2,title:"Book 2: Euterpe",chapters:JSON.parse(`[{"id":1,"text":"After the death of Cyrus, Cambyses inherited his throne. He was the son of Cyrus and of Cassandane, the daughter of Pharnaspes, for whom Cyrus mourned deeply when she died before him, and had all his subjects mourn also. [2] Cambyses was the son of this woman and of Cyrus. He considered the Ionians and Aeolians slaves inherited from his father, and prepared an expedition against Egypt, taking with him some of these Greek subjects besides others whom he ruled.","places":[{"placeId":"550597","name":"Ionians","startOffset":292,"endOffset":299},{"placeId":"550406","name":"Aeolians slaves","startOffset":304,"endOffset":319},{"placeId":"766","name":"Egypt","startOffset":382,"endOffset":387}]},{"id":2,"text":"Now before Psammetichus became king of Egypt,1 the Egyptians believed that they were the oldest people on earth. But ever since Psammetichus became king and wished to find out which people were the oldest, they have believed that the Phrygians were older than they, and they than everybody else. [2] Psammetichus, when he was in no way able to learn by inquiry which people had first come into being, devised a plan by which he took two newborn children of the common people and gave them to a shepherd to bring up among his flocks. He gave instructions that no one was to speak a word in their hearing; they were to stay by themselves in a lonely hut, and in due time the shepherd was to bring goats and give the children their milk and do everything else necessary. [3] Psammetichus did this, and gave these instructions, because he wanted to hear what speech would first come from the children, when they were past the age of indistinct babbling. And he had his wish; for one day, when the shepherd had done as he was told for two years, both children ran to him stretching out their hands and calling Bekos! as he opened the door and entered. [4] When he first heard this, he kept quiet about it; but when, coming often and paying careful attention, he kept hearing this same word, he told his master at last and brought the children into the king's presence as required. Psammetichus then heard them himself, and asked to what language the word Bekos belonged; he found it to be a Phrygian word, signifying bread. [5] Reasoning from this, the Egyptians acknowledged that the Phrygians were older than they. This is the story which I heard from the priests of Hephaestus'2 temple at Memphis; the Greeks say among many foolish things that Psammetichus had the children reared by women whose tongues he had cut out.","places":[{"placeId":"766","name":"Egypt","startOffset":39,"endOffset":44},{"placeId":"981503","name":"Egyptians","startOffset":51,"endOffset":60},{"placeId":"609502","name":"Phrygians","startOffset":234,"endOffset":243},{"placeId":"609502","name":"Phrygian word","startOffset":1490,"endOffset":1503},{"placeId":"981503","name":"Egyptians","startOffset":1552,"endOffset":1561},{"placeId":"609502","name":"Phrygians","startOffset":1584,"endOffset":1593},{"placeId":"736963","name":"Memphis","startOffset":1691,"endOffset":1698}]},{"id":3,"text":"Besides this story of the rearing of the children, I also heard other things at Memphis in conversation with the priests of Hephaestus;3 and I visited Thebes and Heliopolis, too, for this very purpose, because I wished to know if the people of those places would tell me the same story as the priests at Memphis; for the people of Heliopolis are said to be the most learned of the Egyptians. [2] Now, such stories as I heard about the gods I am not ready to relate, except their names, for I believe that all men are equally knowledgeable about them; and I shall say about them what I am constrained to say by the course of my history.","places":[{"placeId":"736963","name":"Memphis","startOffset":80,"endOffset":87},{"placeId":"786017","name":"Thebes","startOffset":151,"endOffset":157},{"placeId":"727117","name":"Heliopolis","startOffset":162,"endOffset":172},{"placeId":"736963","name":"Memphis","startOffset":304,"endOffset":311},{"placeId":"727117","name":"Heliopolis","startOffset":331,"endOffset":341},{"placeId":"981503","name":"Egyptians","startOffset":381,"endOffset":390}]},{"id":4,"text":"351-2 [6] In these verses the poet shows that he knew of Alexander's wanderings to Egypt; for Syria borders on Egypt, and the Phoenicians, to whom Sidon belongs, dwell in Syria.","places":[{"placeId":"766","name":"Egypt","startOffset":83,"endOffset":88},{"placeId":"1306","name":"Syria","startOffset":94,"endOffset":99},{"placeId":"766","name":"Egypt","startOffset":111,"endOffset":116},{"placeId":"678334","name":"Phoenicians","startOffset":126,"endOffset":137},{"placeId":"geonames-268064","name":"Sidon","startOffset":147,"endOffset":152},{"placeId":"1306","name":"Syria","startOffset":171,"endOffset":176}]},{"id":5,"text":"And I think that their account of the country was true. For even if a man has not heard it before, he can readily see, if he has sense, that that Egypt to which the Greeks sail is land deposited for the Egyptians, the river's giftnot only the lower country, but even the land as far as three days' voyage above the lake, which is of the same nature as the other, although the priests did not say this, too. [2] For this is the nature of the land of Egypt: in the first place, when you approach it from the sea and are still a day's sail from land, if you let down a sounding line you will bring up mud from a depth of eleven fathoms. This shows that the deposit from the land reaches this far.","places":[{"placeId":"766","name":"Egypt","startOffset":146,"endOffset":151},{"placeId":"981503","name":"Egyptians","startOffset":203,"endOffset":212},{"placeId":"981503","name":"Egypt","startOffset":450,"endOffset":455}]},{"id":6,"text":"289-92 [4] [He mentions it in the Odyssey also: The daughter of Zeus had such ingenious drugs, Good ones, which she had from Thon's wife, Polydamna, an Egyptian, Whose country's fertile plains bear the most drugs, Many mixed for good, many for harm: Hom. Od.","places":[{"placeId":"981503","name":"Egyptian","startOffset":153,"endOffset":161}]},{"id":7,"text":"By this reckoning, then, the seaboard of Egypt will be four hundred and fifty miles in length. Inland from the sea as far as Heliopolis, Egypt is a wide land, all flat and watery and marshy. From the sea up to Heliopolis is a journey about as long as the way from the altar of the twelve gods at Athens to the temple of Olympian Zeus at Pisa. [2] If a reckoning is made, only a little difference of length, not more than two miles, will be found between these two journeys; for the journey from Athens to Pisa is two miles short of two hundred, which is the number of miles between the sea and Heliopolis.","places":[{"placeId":"766","name":"Egypt","startOffset":41,"endOffset":46},{"placeId":"727117","name":"Heliopolis","startOffset":125,"endOffset":135},{"placeId":"766","name":"Egypt","startOffset":137,"endOffset":142},{"placeId":"727117","name":"Heliopolis","startOffset":210,"endOffset":220},{"placeId":"570612","name":"Pisa","startOffset":337,"endOffset":341},{"placeId":"579885","name":"Athens","startOffset":495,"endOffset":501},{"placeId":"570612","name":"Pisa","startOffset":505,"endOffset":509},{"placeId":"727117","name":"Heliopolis","startOffset":594,"endOffset":604}]},{"id":8,"text":"Beyond and above Heliopolis, Egypt is a narrow land. For it is bounded on the one side by the mountains of Arabia, which run north to south, always running south towards the sea called the Red Sea. In these mountains are the quarries that were hewn out for making the pyramids at Memphis. This way, then, the mountains run, and end in the places of which I have spoken; their greatest width from east to west, as I learned by inquiry, is a two months' journey, and their easternmost boundaries yield frankincense. [2] Such are these mountains. On the side of Libya, Egypt is bounded by another range of rocky mountains among which are the pyramids; these are all covered with sand, and run in the same direction as those Arabian hills that run southward. [3] Beyond Heliopolis, there is no great distancein Egypt, that is:8 the narrow land has a length of only fourteen days' journey up the river. Between the aforesaid mountain ranges, the land is level, and where the plain is narrowest it seemed to me that there were no more than thirty miles between the Arabian mountains and those that are called Libyan. Beyond this Egypt is a wide land again. Such is the nature of this country.","places":[{"placeId":"727117","name":"Heliopolis","startOffset":17,"endOffset":27},{"placeId":"766","name":"Egypt","startOffset":29,"endOffset":34},{"placeId":"756537","name":"Arabia","startOffset":107,"endOffset":113},{"placeId":"29713","name":"Red Sea","startOffset":189,"endOffset":196},{"placeId":"736963","name":"Memphis","startOffset":280,"endOffset":287},{"placeId":"991375","name":"Libya","startOffset":559,"endOffset":564},{"placeId":"766","name":"Egypt","startOffset":566,"endOffset":571},{"placeId":"756537","name":"Arabian","startOffset":721,"endOffset":728},{"placeId":"727117","name":"Heliopolis","startOffset":766,"endOffset":776},{"placeId":"981503","name":"Egypt","startOffset":808,"endOffset":813},{"placeId":"981503","name":"Egypt","startOffset":1124,"endOffset":1129}]},{"id":9,"text":"From Heliopolis to Thebes is nine days' journey by river, and the distance is six hundred and eight miles, or eighty-one schoeni. [2] This, then, is a full statement of all the distances in Egypt: the seaboard is four hundred and fifty miles long; and I will now declare the distance inland from the sea to Thebes : it is seven hundred and sixty-five miles. And between Thebes and the city called Elephantine there are two hundred and twenty-five miles.","places":[{"placeId":"727117","name":"Heliopolis","startOffset":5,"endOffset":15},{"placeId":"786131","name":"Thebes","startOffset":19,"endOffset":25},{"placeId":"981503","name":"Egypt","startOffset":190,"endOffset":195},{"placeId":"541138","name":"Thebes","startOffset":307,"endOffset":313},{"placeId":"541138","name":"Thebes","startOffset":370,"endOffset":376},{"placeId":"786021","name":"Elephantine","startOffset":397,"endOffset":408}]},{"id":10,"text":"The greater portion, then, of this country of which I have spoken was land deposited for the Egyptians as the priests told me, and I myself formed the same judgment; all that lies between the ranges of mountains above Memphis to which I have referred seemed to me to have once been a gulf of the sea, just as the country about Ilion and Teuthrania and Ephesus and the plain of the Maeander, to compare these small things with great. [2] For of the rivers that brought down the stuff to make these lands, there is none worthy to be compared for greatness with even one of the mouths of the Nile, and the Nile has five mouths. [3] There are also other rivers, not so great as the Nile, that have had great effects; I could rehearse their names, but principal among them is the Achelous, which, flowing through Acarnania and emptying into the sea, has already made half of the Echinades Islands mainland.","places":[{"placeId":"981503","name":"Egyptians","startOffset":93,"endOffset":102},{"placeId":"736963","name":"Memphis","startOffset":218,"endOffset":225},{"placeId":"550595","name":"Ilion","startOffset":327,"endOffset":332},{"placeId":"550916","name":"Teuthrania","startOffset":337,"endOffset":347},{"placeId":"599612","name":"Ephesus","startOffset":352,"endOffset":359},{"placeId":"599777","name":"Maeander","startOffset":381,"endOffset":389},{"placeId":"727172","name":"Nile","startOffset":589,"endOffset":593},{"placeId":"727172","name":"Nile","startOffset":603,"endOffset":607},{"placeId":"727172","name":"Nile","startOffset":678,"endOffset":682},{"placeId":"530768","name":"Achelous","startOffset":775,"endOffset":783},{"placeId":"530767","name":"Acarnania","startOffset":808,"endOffset":817},{"placeId":"530852","name":"Echinades Islands","startOffset":874,"endOffset":891}]},{"id":11,"text":"Now in Arabia, not far from Egypt, there is a gulf extending inland from the sea called Red9 , whose length and width are such as I shall show: [2] in length, from its inner end out to the wide sea, it is a forty days' voyage for a ship rowed by oars; and in breadth, it is half a day's voyage at the widest. Every day the tides ebb and flow in it. [3] I believe that where Egypt is now, there was once another such gulf; this extended from the northern sea towards Aethiopia, and the other, the Arabian gulf of which I shall speak, extended from the south towards Syria; the ends of these gulfs penetrated into the country near each other, and but a little space of land separated them. [4] Now, if the Nile inclined to direct its current into this Arabian gulf, why should the latter not be silted up by it inside of twenty thousand years? In fact, I expect that it would be silted up inside of ten thousand years. Is it to be doubted, then, that in the ages before my birth a gulf even much greater than this should have been silted up by a river so great and so busy?","places":[{"placeId":"29475","name":"Arabia","startOffset":7,"endOffset":13},{"placeId":"766","name":"Egypt","startOffset":28,"endOffset":33},{"placeId":"39290","name":"Red","startOffset":88,"endOffset":91},{"placeId":"766","name":"Egypt","startOffset":374,"endOffset":379},{"placeId":"39274","name":"Aethiopia","startOffset":466,"endOffset":475},{"placeId":"29713","name":"Arabian gulf","startOffset":496,"endOffset":508},{"placeId":"1306","name":"Syria","startOffset":565,"endOffset":570},{"placeId":"727172","name":"Nile","startOffset":704,"endOffset":708},{"placeId":"29713","name":"Arabian gulf","startOffset":750,"endOffset":762}]},{"id":12,"text":"As for Egypt, then, I credit those who say it, and myself very much believe it to be the case; for I have seen that Egypt projects into the sea beyond the neighboring land, and shells are exposed to view on the mountains, and things are coated with salt, so that even the pyramids show it, and the only sandy mountain in Egypt is that which is above Memphis; [2] besides, Egypt is like neither the neighboring land of Arabia nor Libya, not even like Syria (for Syrians inhabit the seaboard of Arabia); it is a land of black and crumbling earth, as if it were alluvial deposit carried down the river from Aethiopia; [3] but we know that the soil of Libya is redder and somewhat sandy, and Arabia and Syria are lands of clay and stones.","places":[{"placeId":"766","name":"Egypt","startOffset":7,"endOffset":12},{"placeId":"766","name":"Egypt","startOffset":116,"endOffset":121},{"placeId":"981503","name":"Egypt","startOffset":321,"endOffset":326},{"placeId":"736963","name":"Memphis","startOffset":350,"endOffset":357},{"placeId":"766","name":"Egypt","startOffset":372,"endOffset":377},{"placeId":"29475","name":"Arabia","startOffset":418,"endOffset":424},{"placeId":"991375","name":"Libya","startOffset":429,"endOffset":434},{"placeId":"1306","name":"Syria","startOffset":450,"endOffset":455},{"placeId":"1306","name":"Syrians","startOffset":461,"endOffset":468},{"placeId":"29475","name":"Arabia","startOffset":493,"endOffset":499},{"placeId":"39274","name":"Aethiopia","startOffset":604,"endOffset":613},{"placeId":"716588","name":"Libya","startOffset":648,"endOffset":653},{"placeId":"29475","name":"Arabia","startOffset":688,"endOffset":694},{"placeId":"1306","name":"Syria","startOffset":699,"endOffset":704}]},{"id":13,"text":"This, too, that the priests told me about Egypt, is a strong proof: when Moeris was king, if the river rose as much as thirteen feet, it watered all of Egypt below Memphis.10 Moeris had not been dead nine hundred years when I heard this from the priests. But now, if the river does not rise at least twenty-six or twenty-five feet, the land is not flooded. [2] And, in my opinion, the Egyptians who inhabit the lands lower down the river than lake Moeris, and especially what is called the Deltaif this land of theirs rises in the same proportion and broadens likewise in extent, and the Nile no longer floods itwill forever after be in the same straits as they themselves once said the Greeks would be; [3] for, learning that all the Greek land is watered by rain, but not by river water like theirs, they said that one day the Greeks would be let down by what they counted on, and miserably starve: meaning that, if heaven send no rain for the Greeks and afflict them with drought, the Greeks will be overtaken by famine, for there is no other source of water for them except Zeus alone.","places":[{"placeId":"766","name":"Egypt","startOffset":42,"endOffset":47},{"placeId":"766","name":"Egypt","startOffset":152,"endOffset":157},{"placeId":"736963","name":"Memphis","startOffset":164,"endOffset":171},{"placeId":"981503","name":"Egyptians","startOffset":385,"endOffset":394},{"placeId":"736967","name":"lake Moeris","startOffset":443,"endOffset":454},{"placeId":"727172","name":"Nile","startOffset":589,"endOffset":593}]},{"id":14,"text":"And this prediction of the Egyptians about the Greeks was true enough. But now let me show the prospect for the Egyptians themselves: if, as I have already said, the country below Memphis (for it is this which rises) should increase in height in the same proportion as formerly, will not the Egyptians who inhabit it go hungry, as there is no rain in their country and the river will be unable to inundate their fields? [2] At present, of course, there are no people, either in the rest of Egypt or in the whole world, who live from the soil with so little labor; they do not have to break the land up with the plough, or hoe, or do any other work that other men do to get a crop; the river rises of itself, waters the fields, and then sinks back again; then each man sows his field and sends swine into it to tread down the seed, and waits for the harvest; then he has the swine thresh his grain, and so garners it.","places":[{"placeId":"981503","name":"Egyptians","startOffset":27,"endOffset":36},{"placeId":"981503","name":"Egyptians","startOffset":112,"endOffset":121},{"placeId":"736963","name":"Memphis","startOffset":180,"endOffset":187},{"placeId":"981503","name":"Egyptians","startOffset":292,"endOffset":301},{"placeId":"981503","name":"Egypt","startOffset":490,"endOffset":495}]},{"id":15,"text":"Now if we agree with the opinion of the Ionians, who say that only the Delta is Egypt, and that its seaboard reaches from the so-called Watchtower of Perseus forty schoeni to the Salters' at Pelusium, while inland it stretches as far as the city of Cercasorus,11 where the Nile divides and flows to Pelusium and Canobus, and that all the rest of Egypt is partly Libya and partly Arabiaif we follow this account, we can show that there was once no land for the Egyptians; [2] for we have seen that (as the Egyptians themselves say, and as I myself judge) the Delta is alluvial land and but lately (so to speak) came into being. Then if there was once no land for them, it was an idle notion that they were the oldest nation on earth, and they need not have made that trial to see what language the children would first speak. [3] I maintain, rather, that the Egyptians did not come into existence together with what the Ionians call the Delta, but have existed since the human race came into being; and as the land grew in extent, there were many of them who stayed behind, and many who spread down over it. Be that as it may, the Theban district, a land of seven hundred and sixty-five miles in circumference, was in the past called Egypt.","places":[{"placeId":"550597","name":"Ionians","startOffset":40,"endOffset":47},{"placeId":"766","name":"Egypt","startOffset":80,"endOffset":85},{"placeId":"727193","name":"Watchtower of Perseus","startOffset":136,"endOffset":157},{"placeId":"727192","name":"Pelusium","startOffset":191,"endOffset":199},{"placeId":"727142","name":"Cercasorus","startOffset":249,"endOffset":259},{"placeId":"727172","name":"Nile","startOffset":273,"endOffset":277},{"placeId":"727192","name":"Pelusium","startOffset":299,"endOffset":307},{"placeId":"727097","name":"Canobus","startOffset":312,"endOffset":319},{"placeId":"766","name":"Egypt","startOffset":346,"endOffset":351},{"placeId":"991375","name":"Libya","startOffset":362,"endOffset":367},{"placeId":"29475","name":"Arabia","startOffset":379,"endOffset":385},{"placeId":"981503","name":"Egyptians","startOffset":461,"endOffset":470},{"placeId":"981503","name":"Egyptians","startOffset":506,"endOffset":515},{"placeId":"981503","name":"Egyptians","startOffset":859,"endOffset":868},{"placeId":"550597","name":"Ionians","startOffset":920,"endOffset":927},{"placeId":"786017","name":"Theban district","startOffset":1131,"endOffset":1146},{"placeId":"981503","name":"Egypt","startOffset":1234,"endOffset":1239}]},{"id":16,"text":"If, then, our judgment of this is right, the Ionians are in error concerning Egypt; but if their opinion is right, then it is plain that they and the rest of the Greeks cannot reckon truly, when they divide the whole earth into three parts, Europe, Asia, and Libya; [2] they must add to these a fourth part, the Delta of Egypt, if it belongs neither to Asia nor to Libya; for by their showing the Nile is not the river that separates Asia and Libya; the Nile divides at the apex of this Delta, so that this land must be between Asia and Libya.","places":[{"placeId":"550597","name":"Ionians","startOffset":45,"endOffset":52},{"placeId":"766","name":"Egypt","startOffset":77,"endOffset":82},{"placeId":"991375","name":"Libya","startOffset":259,"endOffset":264},{"placeId":"766","name":"Egypt","startOffset":321,"endOffset":326},{"placeId":"716588","name":"Libya","startOffset":365,"endOffset":370},{"placeId":"727172","name":"Nile","startOffset":397,"endOffset":401},{"placeId":"716588","name":"Libya","startOffset":443,"endOffset":448},{"placeId":"727172","name":"Nile","startOffset":454,"endOffset":458},{"placeId":"716588","name":"Libya","startOffset":537,"endOffset":542}]},{"id":17,"text":"We leave the Ionians' opinion aside, and our own judgment about the matter is this: Egypt is all that country which is inhabited by Egyptians, just as Cilicia and Assyria are the countries inhabited by Cilicians and Assyrians, and we know of no boundary line (rightly so called) below Asia and Libya except the borders of the Egyptians. [2] But if we follow the belief of the Greeks, we shall consider all Egypt commencing from the Cataracts and the city of Elephantine12 to be divided into two parts, and to claim both the names, the one a part of Libya and the other of Asia. [3] For the Nile, beginning from the Cataracts, divides Egypt into two parts as it flows to the sea. Now, as far as the city Cercasorus the Nile flows in one channel, but after that it parts into three. [4] One of these, which is called the Pelusian mouth, flows east; the second flows west, and is called the Canobic mouth. But the direct channel of the Nile, when the river in its downward course reaches the apex of the Delta, flows thereafter clean through the middle of the Delta into the sea; in this is seen the greatest and most famous part of its waters, and it is called the Sebennytic mouth. [5] There are also two channels which separate themselves from the Sebennytic and so flow into the sea: by name, the Satic and the Mendesian. [6] The Bolbitine and Bucolic mouths are not natural but excavated channels.","places":[{"placeId":"550597","name":"Ionians","startOffset":13,"endOffset":20},{"placeId":"766","name":"Egypt","startOffset":84,"endOffset":89},{"placeId":"981503","name":"Egyptians","startOffset":132,"endOffset":141},{"placeId":"658440","name":"Cilicia","startOffset":151,"endOffset":158},{"placeId":"29492","name":"Assyria","startOffset":163,"endOffset":170},{"placeId":"658440","name":"Cilicians","startOffset":202,"endOffset":211},{"placeId":"29492","name":"Assyrians","startOffset":216,"endOffset":225},{"placeId":"991375","name":"Libya","startOffset":294,"endOffset":299},{"placeId":"981503","name":"Egyptians","startOffset":326,"endOffset":335},{"placeId":"981503","name":"Egypt","startOffset":406,"endOffset":411},{"placeId":"hestia-cataracts","name":"Cataracts","startOffset":432,"endOffset":441},{"placeId":"786021","name":"Elephantine","startOffset":458,"endOffset":469},{"placeId":"716588","name":"Libya","startOffset":549,"endOffset":554},{"placeId":"727172","name":"Nile","startOffset":590,"endOffset":594},{"placeId":"hestia-cataracts","name":"Cataracts","startOffset":615,"endOffset":624},{"placeId":"766","name":"Egypt","startOffset":634,"endOffset":639},{"placeId":"727142","name":"Cercasorus","startOffset":703,"endOffset":713},{"placeId":"727172","name":"Nile","startOffset":718,"endOffset":722},{"placeId":"727192","name":"Pelusian","startOffset":819,"endOffset":827},{"placeId":"727137","name":"Canobic mouth","startOffset":888,"endOffset":901},{"placeId":"727172","name":"Nile","startOffset":933,"endOffset":937},{"placeId":"727224","name":"Sebennytic mouth","startOffset":1163,"endOffset":1179},{"placeId":"727224","name":"Sebennytic","startOffset":1248,"endOffset":1258},{"placeId":"727138","name":"Satic","startOffset":1298,"endOffset":1304},{"placeId":"727157","name":"Mendesian","startOffset":1313,"endOffset":1322},{"placeId":"727085","name":"Bolbitine","startOffset":1332,"endOffset":1341}]},{"id":18,"text":"The response of oracle of Ammon in fact bears witness to my opinion, that Egypt is of such an extent as I have argued; I learned this by inquiry after my judgment was already formed about Egypt. [2] The men of the cities of Marea and Apis, in the part of Egypt bordering on Libya, believing themselves to be Libyans and not Egyptians, and disliking the injunction of the religious law that forbade them to eat cows' meat, sent to Ammon saying that they had no part of or lot with Egypt: for they lived (they said) outside the Delta and did not consent to the ways of its people, and they wished to be allowed to eat all foods. [3] But the god forbade them: all the land, he said, watered by the Nile in its course was Egypt, and all who lived lower down than the city Elephantine and drank the river's water were Egyptians. Such was the oracle given to them.","places":[{"placeId":"716520","name":"oracle of Ammon","startOffset":16,"endOffset":31},{"placeId":"766","name":"Egypt","startOffset":74,"endOffset":79},{"placeId":"766","name":"Egypt","startOffset":188,"endOffset":193},{"placeId":"716526","name":"Apis","startOffset":234,"endOffset":238},{"placeId":"981503","name":"Egypt","startOffset":255,"endOffset":260},{"placeId":"991375","name":"Libya","startOffset":274,"endOffset":279},{"placeId":"716588","name":"Libyans","startOffset":308,"endOffset":315},{"placeId":"981503","name":"Egyptians","startOffset":324,"endOffset":333},{"placeId":"716520","name":"Ammon","startOffset":430,"endOffset":435},{"placeId":"981503","name":"Egypt","startOffset":480,"endOffset":485},{"placeId":"727172","name":"Nile","startOffset":695,"endOffset":699},{"placeId":"766","name":"Egypt","startOffset":718,"endOffset":723},{"placeId":"786021","name":"Elephantine","startOffset":768,"endOffset":779},{"placeId":"981503","name":"Egyptians","startOffset":813,"endOffset":822}]},{"id":19,"text":"When the Nile is in flood, it overflows not only the Delta but also the lands called Libyan and Arabian, as far as two days' journey from either bank in places, and sometimes more than this, sometimes less. Concerning its nature, I could not learn anything either from the priests or from any others. [2] Yet I was anxious to learn from them why the Nile comes down with a rising flood for a hundred days from the summer solstice; and when this number of days is passed, sinks again with a diminishing stream, so that the river is low for the whole winter until the summer solstice again. [3] I was not able to get any information from any of the Egyptians regarding this, when I asked them what power the Nile has to be contrary in nature to all other rivers. I wished to know this, and asked; also, why no breezes blew from it as from every other river13.","places":[{"placeId":"727172","name":"Nile","startOffset":9,"endOffset":13},{"placeId":"716588","name":"Libyan","startOffset":85,"endOffset":91},{"placeId":"29475","name":"Arabian","startOffset":96,"endOffset":103},{"placeId":"727172","name":"Nile","startOffset":350,"endOffset":354},{"placeId":"981503","name":"Egyptians","startOffset":647,"endOffset":656},{"placeId":"727172","name":"Nile","startOffset":706,"endOffset":710}]},{"id":20,"text":"But some of the Greeks, wishing to be notable for cleverness, put forward three opinions about this river, two of which I would not even mention except just to show what they are. [2] One of them maintains that the Etesian winds14 are the cause of the river being in flood, because they hinder the Nile from emptying into the sea. But there are many times when the Etesian winds do not blow, yet the Nile does the same as before. [3] And further, if the Etesian winds were the cause, then the other rivers which flow contrary to those winds should be affected like the Nile, and even more so, since being smaller they have a weaker current. Yet there are many rivers in Syria and many in Libya, and they behave nothing like the Nile.","places":[{"placeId":"727172","name":"Nile","startOffset":298,"endOffset":302},{"placeId":"727172","name":"Nile","startOffset":400,"endOffset":404},{"placeId":"727172","name":"Nile","startOffset":569,"endOffset":573},{"placeId":"1306","name":"Syria","startOffset":670,"endOffset":675},{"placeId":"991375","name":"Libya","startOffset":688,"endOffset":693},{"placeId":"727172","name":"Nile","startOffset":728,"endOffset":732}]},{"id":21,"text":"The second opinion is less grounded on knowledge than the previous, though it is more marvellous to the ear: according to it, the river effects what it does because it flows from Ocean, which flows around the whole world.","places":[]},{"id":22,"text":"The third opinion is by far the most plausible, yet the most erroneous of all. It has no more truth in it than the others. According to this, the Nile flows from where snows melt; but it flows from Libya through the midst of Ethiopia, and comes out into Egypt. [2] How can it flow from snow, then, seeing that it comes from the hottest places to lands that are for the most part cooler? In fact, for a man who can reason about such things, the principal and strongest evidence that the river is unlikely to flow from snows is that the winds blowing from Libya and Ethiopia are hot. [3] In the second place, the country is rainless and frostless; but after snow has fallen, it has to rain within five days15 ; so that if it snowed, it would rain in these lands. And thirdly, the men of the country are black because of the heat. [4] Moreover, kites and swallows live there all year round, and cranes come every year to these places to winter there, flying from the wintry weather of Scythia. Now, were there but the least fall of snow in this country through which the Nile flows and where it rises, none of these things would happen, as necessity proves.","places":[{"placeId":"727172","name":"Nile","startOffset":146,"endOffset":150},{"placeId":"991375","name":"Libya","startOffset":198,"endOffset":203},{"placeId":"39274","name":"Ethiopia","startOffset":225,"endOffset":233},{"placeId":"766","name":"Egypt","startOffset":254,"endOffset":259},{"placeId":"991375","name":"Libya","startOffset":554,"endOffset":559},{"placeId":"39274","name":"Ethiopia","startOffset":564,"endOffset":572},{"placeId":"1273","name":"Scythia","startOffset":982,"endOffset":989},{"placeId":"727172","name":"Nile","startOffset":1068,"endOffset":1072}]},{"id":23,"text":"The opinion about Ocean is grounded in obscurity and needs no disproof; for I know of no Ocean river; and I suppose that Homer or some older poet invented this name and brought it into his poetry.","places":[]},{"id":24,"text":"If, after having condemned the opinions proposed, I must indicate what I myself think about these obscure matters, I shall say why I think the Nile floods in the summer. During the winter, the sun is driven by storms from his customary course and passes over the inland parts of Libya. [2] For the briefest demonstration, everything has been said; for whatever country this god is nearest, or over, it is likely that that land is very thirsty for water and that the local rivers are dried up.","places":[{"placeId":"727172","name":"Nile","startOffset":143,"endOffset":147},{"placeId":"991375","name":"Libya","startOffset":279,"endOffset":284}]},{"id":25,"text":"A lengthier demonstration goes as follows. In its passage over the inland parts of Libya, the sun does this: as the air is always clear in that region, the land warm, and the winds cool, the sun does in its passage exactly as it would do in the summer passing through the middle of the heaven: [2] it draws the water to itself, and having done so, expels it away to the inland regions, and the winds catch it and scatter and dissolve it; and, as is to be expected, those that blow from that country, the south and the southwest, are the most rainy of all winds. [3] Yet I think that the sun never lets go of all of the water that it draws up from the Nile yearly, but keeps some back near itself. Then, as the winter becomes milder, the sun returns to the middle of the heaven, and after that draws from all rivers alike. [4] Meanwhile, the other rivers are swollen to high flood by the quantity of water that falls into them from the sky, because the country is rained on and cut into gullies; but in the summer they are low, lacking the rain and being drawn up too by the sun. [5] But the Nile, being fed by no rain, and being the only river drawn up by the sun in winter, at this time falls far short of the height that it had in summer; which is but natural; for in summer all other waters too and not it alone are attracted to the sun, but in the winter it alone is afflicted.","places":[{"placeId":"991375","name":"Libya","startOffset":83,"endOffset":88},{"placeId":"727172","name":"Nile","startOffset":651,"endOffset":655},{"placeId":"727172","name":"Nile","startOffset":1091,"endOffset":1095}]},{"id":26,"text":"I am convinced, therefore, that the sun is the cause of this phenomenon. The dryness of the air in these parts is also caused by the sun, in my opinion, because it burns its way through it; hence, it is always summer in the inland part of Libya. [2] But were the stations of the seasons changed, so that the south wind and the summer had their station where the north wind and winter are now set, and the north wind was where the south wind is nowif this were so, the sun, when driven from mid-heaven by the winter and the north wind, would pass over the inland parts of Europe as it now passes over Libya, and I think that in its passage over all Europe it would have the same effect on the Ister as it now does on the Nile.","places":[{"placeId":"991375","name":"Libya","startOffset":239,"endOffset":244},{"placeId":"716588","name":"Libya","startOffset":601,"endOffset":606},{"placeId":"226577","name":"Ister","startOffset":693,"endOffset":698},{"placeId":"727172","name":"Nile","startOffset":721,"endOffset":725}]},{"id":27,"text":"And as to why no breeze blows from the river, this is my opinion: it is not natural that any breeze blow from very hot places; breezes always come from that which is very cold.","places":[]},{"id":28,"text":"Let this be, then, as it is and as it was in the beginning. But as to the sources of the Nile, no one that conversed with me, Egyptian, Libyan, or Greek, professed to know them, except the recorder of the sacred treasures of Athena in the Egyptian city of Sas. [2] I thought he was joking when he said that he had exact knowledge, but this was his story. Between the city of Syene in the Thebaid and Elephantine, there are two hills with sharp peaks, one called Crophi and the other Mophi. [3] The springs of the Nile, which are bottomless, rise between these hills; half the water flows north towards Egypt, and the other half south towards Ethiopia. [4] He said that Psammetichus king of Egypt had put to the test whether the springs are bottomless: for he had a rope of many thousand fathoms' length woven and let down into the spring, but he could not reach to the bottom. [5] This recorder, then, if he spoke the truth, showed, I think, that there are strong eddies and an upward flow of water, such that with the stream rushing against the hills the sounding-line when let down cannot reach bottom.","places":[{"placeId":"727172","name":"Nile","startOffset":89,"endOffset":93},{"placeId":"981503","name":"Egyptian","startOffset":126,"endOffset":134},{"placeId":"716588","name":"Libyan","startOffset":136,"endOffset":142},{"placeId":"981503","name":"Egyptian","startOffset":239,"endOffset":247},{"placeId":"727217","name":"Sas","startOffset":256,"endOffset":260},{"placeId":"786123","name":"Syene","startOffset":376,"endOffset":381},{"placeId":"786017","name":"Thebaid","startOffset":389,"endOffset":396},{"placeId":"786021","name":"Elephantine","startOffset":401,"endOffset":412},{"placeId":"727172","name":"Nile","startOffset":514,"endOffset":518},{"placeId":"766","name":"Egypt","startOffset":603,"endOffset":608},{"placeId":"39274","name":"Ethiopia","startOffset":643,"endOffset":651},{"placeId":"766","name":"Egypt","startOffset":691,"endOffset":696}]},{"id":29,"text":"I was unable to learn anything from anyone else, but this much further I did learn by the most extensive investigation that I could make, going as far as the city of Elephantine to look myself, and beyond that by question and hearsay. [2] Beyond Elephantine, as one travels inland, the land rises. Here one must pass with the boat roped on both sides as men harness an ox; and if the rope breaks, the boat will be carried away by the strength of the current. [3] This part of the river is a four days' journey by boat, and the Nile here is twisty just as the Maeander; a distance of twelve schoeni must be passed in the foregoing manner. After that, you come to a level plain, where there is an island in the Nile, called Takhompso. [4] The country above Elephantine now begins to be inhabited by Ethiopians: half the people of the island are Ethiopians, and half Egyptians. Near the island is a great lake, on whose shores live nomadic Ethiopians. After crossing this, you come to the stream of the Nile, which empties into this lake. [5] Then you disembark and journey along the river bank for forty days; for there are sharp projecting rocks in the Nile and many reefs, through which no boat can pass. [6] Having traversed this part in forty days as I have said, you take boat again and so travel for twelve days until you come to a great city called Meroe, which is said to be the capital of all Ethiopia. [7] The people of the place worship no other gods but Zeus and Dionysus;16 these they greatly honor, and they have a place of divination sacred to Zeus; they send out armies whenever and wherever this god through his oracle commands them17.","places":[{"placeId":"786021","name":"Elephantine","startOffset":166,"endOffset":177},{"placeId":"786021","name":"Elephantine","startOffset":246,"endOffset":257},{"placeId":"727172","name":"Nile","startOffset":527,"endOffset":531},{"placeId":"599777","name":"Maeander","startOffset":559,"endOffset":567},{"placeId":"727172","name":"Nile","startOffset":709,"endOffset":713},{"placeId":"795866","name":"Takhompso","startOffset":722,"endOffset":731},{"placeId":"786021","name":"Elephantine","startOffset":755,"endOffset":766},{"placeId":"39274","name":"Ethiopians","startOffset":797,"endOffset":807},{"placeId":"39274","name":"Ethiopians","startOffset":843,"endOffset":853},{"placeId":"981503","name":"Egyptians","startOffset":864,"endOffset":873},{"placeId":"39274","name":"Ethiopians","startOffset":937,"endOffset":947},{"placeId":"727172","name":"Nile","startOffset":1000,"endOffset":1004},{"placeId":"727172","name":"Nile","startOffset":1152,"endOffset":1156},{"placeId":"805630","name":"Meroe","startOffset":1354,"endOffset":1359},{"placeId":"39274","name":"Ethiopia","startOffset":1400,"endOffset":1408}]},{"id":30,"text":"From this city you make a journey by water equal in distance to that by which you came from Elephantine to the capital city of Ethiopia, and you come to the land of the Deserters. These Deserters are called Asmakh, which translates, in Greek, as those who stand on the left hand of the king. [2] These once revolted and joined themselves to the Ethiopians, two hundred and forty thousand Egyptians of fighting age. The reason was as follows. In the reign of Psammetichus, there were watchposts at Elephantine facing Ethiopia, at Daphnae of Pelusium facing Arabia and Assyria, and at Marea facing Libya. [3] And still in my time the Persians hold these posts as they were held in the days of Psammetichus; there are Persian guards at Elephantine and at Daphnae. Now the Egyptians had been on guard for three years, and no one came to relieve them; so, organizing and making common cause, they revolted from Psammetichus and went to Ethiopia. [4] Psammetichus heard of it and pursued them; and when he overtook them, he asked them in a long speech not to desert their children and wives and the gods of their fathers. Then one of them, the story goes, pointed to his genitals and said that wherever that was, they would have wives and children. [5] So they came to Ethiopia, and gave themselves up to the king of the country; who, to make them a gift in return, told them to dispossess certain Ethiopians with whom he was feuding, and occupy their land. These Ethiopians then learned Egyptian customs and have become milder-mannered by intermixture with the Egyptians.","places":[{"placeId":"786021","name":"Elephantine","startOffset":92,"endOffset":103},{"placeId":"39274","name":"Ethiopia","startOffset":127,"endOffset":135},{"placeId":"39274","name":"Ethiopians","startOffset":347,"endOffset":357},{"placeId":"981503","name":"Egyptians","startOffset":390,"endOffset":399},{"placeId":"786021","name":"Elephantine","startOffset":499,"endOffset":510},{"placeId":"39274","name":"Ethiopia","startOffset":518,"endOffset":526},{"placeId":"727103","name":"Daphnae","startOffset":531,"endOffset":538},{"placeId":"727192","name":"Pelusium","startOffset":542,"endOffset":550},{"placeId":"29475","name":"Arabia","startOffset":558,"endOffset":564},{"placeId":"29492","name":"Assyria","startOffset":569,"endOffset":576},{"placeId":"991375","name":"Libya","startOffset":598,"endOffset":603},{"placeId":"geonames-130758","name":"Persians","startOffset":634,"endOffset":642},{"placeId":"geonames-130758","name":"Persian guards","startOffset":717,"endOffset":731},{"placeId":"786021","name":"Elephantine","startOffset":735,"endOffset":746},{"placeId":"727103","name":"Daphnae","startOffset":754,"endOffset":761},{"placeId":"981503","name":"Egyptians","startOffset":771,"endOffset":780},{"placeId":"39274","name":"Ethiopia","startOffset":933,"endOffset":941},{"placeId":"39274","name":"Ethiopia","startOffset":1265,"endOffset":1273},{"placeId":"39274","name":"Ethiopians","startOffset":1394,"endOffset":1404},{"placeId":"39274","name":"Ethiopians","startOffset":1460,"endOffset":1470},{"placeId":"981503","name":"Egyptian","startOffset":1484,"endOffset":1492},{"placeId":"981503","name":"Egyptians","startOffset":1558,"endOffset":1567}]},{"id":31,"text":"To a distance of four months' travel by land and water, then, there is knowledge of the Nile, besides the part of it that is in Egypt. So many months, as reckoning shows, are found to be spent by one going from Elephantine to the country of the Deserters. The river flows from the west and the sun's setting. Beyond this, no one has clear information to declare; for all that country is desolate because of the heat.","places":[{"placeId":"727172","name":"Nile","startOffset":88,"endOffset":92},{"placeId":"766","name":"Egypt","startOffset":128,"endOffset":133},{"placeId":"786021","name":"Elephantine","startOffset":211,"endOffset":222}]},{"id":32,"text":"But I heard this from some men of Cyrene, who told me that they had gone to the oracle of Ammon, and conversed there with Etearchus king of the Ammonians, and that from other subjects the conversation turned to the Nile, how no one knows the source of it. Then Etearchus told them that once he had been visited by some Nasamonians. [2] These are a Libyan people, inhabiting the country of the Syrtis and a little way to the east of the Syrtis. [3] When these Nasamonians were asked on their arrival if they brought any news concerning the Libyan desert, they told Etearchus that some sons of their leading men, proud and violent youths, when they came to manhood, besides planning other wild adventures, had chosen by lot five of their company to visit the deserts of Libya and see whether they could see any farther than those who had seen the farthest. [4] It must be known that the whole northern seacoast of Libya, from Egypt as far as the promontory of Soloeis, which is the end of Libya, is inhabited throughout its length by Libyans, many tribes of them, except the part held by Greeks and Phoenicians; the region of Libya that is above the sea and the inhabitants of the coast is infested by wild beasts; and farther inland than the wild-beast country everything is sand, waterless and desolate. [5] When the young men left their companions, being well supplied with water and provisions, they journeyed first through the inhabited country, and after passing this they came to the region of wild beasts. [6] After this, they travelled over the desert, towards the west, and crossed a wide sandy region, until after many days they saw trees growing in a plain; when they came to these and were picking the fruit of the trees, they were met by little men of less than common stature, who took them and led them away. The Nasamonians did not know these men's language nor did the escort know the language of the Nasamonians. [7] The men led them across great marshes, after crossing which they came to a city where all the people were of a stature like that of the guides, and black. A great river ran past this city, from the west towards the rising sun; crocodiles could be seen in it.","places":[{"placeId":"373778","name":"Cyrene","startOffset":34,"endOffset":40},{"placeId":"716520","name":"oracle of Ammon","startOffset":80,"endOffset":95},{"placeId":"716520","name":"Ammon","startOffset":144,"endOffset":149},{"placeId":"727172","name":"Nile","startOffset":215,"endOffset":219},{"placeId":"373861","name":"Nasamonians","startOffset":319,"endOffset":330},{"placeId":"716588","name":"Libyan people","startOffset":348,"endOffset":361},{"placeId":"344491","name":"Syrtis","startOffset":393,"endOffset":399},{"placeId":"344491","name":"Syrtis","startOffset":436,"endOffset":442},{"placeId":"373861","name":"Nasamonians","startOffset":459,"endOffset":470},{"placeId":"736954","name":"Libyan desert","startOffset":539,"endOffset":552},{"placeId":"716588","name":"Libya","startOffset":768,"endOffset":773},{"placeId":"716588","name":"Libya","startOffset":912,"endOffset":917},{"placeId":"766","name":"Egypt","startOffset":924,"endOffset":929},{"placeId":"275724","name":"Soloeis","startOffset":958,"endOffset":965},{"placeId":"991375","name":"Libya","startOffset":987,"endOffset":992},{"placeId":"716588","name":"Libyans","startOffset":1032,"endOffset":1039},{"placeId":"678334","name":"Phoenicians","startOffset":1097,"endOffset":1108},{"placeId":"716588","name":"Libya","startOffset":1124,"endOffset":1129},{"placeId":"373861","name":"Nasamonians","startOffset":1827,"endOffset":1838},{"placeId":"373861","name":"Nasamonians","startOffset":1917,"endOffset":1928}]},{"id":33,"text":"This is enough of the story told by Etearchus the Ammonian; except he said that the Nasamonians returned, as the men of Cyrene told me, and that the people to whose country they came were all wizards; [2] as to the river that ran past the city, Etearchus guessed it to be the Nile; and reason proves as much. For the Nile flows from Libya, right through the middle of it; and as I guess, reasoning about things unknown from visible signs, it rises proportionally as far away as does the Ister.18 [3] For the Ister flows from the land of the Celts and the city of Pyrene through the very middle of Europe; now the Celts live beyond the Pillars of Heracles, being neighbors of the Cynesii, who are the westernmost of all the peoples inhabiting Europe. [4] The Ister, then, flows clean across Europe and ends its course in the Euxine sea, at Istria, which is inhabited by Milesian colonists.","places":[{"placeId":"716520","name":"Ammonian","startOffset":50,"endOffset":58},{"placeId":"373861","name":"Nasamonians","startOffset":84,"endOffset":95},{"placeId":"373778","name":"Cyrene","startOffset":120,"endOffset":126},{"placeId":"727172","name":"Nile","startOffset":276,"endOffset":280},{"placeId":"727172","name":"Nile","startOffset":317,"endOffset":321},{"placeId":"991375","name":"Libya","startOffset":333,"endOffset":338},{"placeId":"226577","name":"Ister","startOffset":487,"endOffset":492},{"placeId":"226577","name":"Ister","startOffset":508,"endOffset":513},{"placeId":"hestia-pyrene","name":"Pyrene","startOffset":563,"endOffset":569},{"placeId":"226577","name":"Ister","startOffset":758,"endOffset":763},{"placeId":"1224","name":"Euxine sea","startOffset":824,"endOffset":834},{"placeId":"216839","name":"Istria","startOffset":839,"endOffset":845},{"placeId":"599799","name":"Milesian colonists","startOffset":869,"endOffset":887}]},{"id":34,"text":"The Ister, since it flows through inhabited country, is known from many reports; but no one can speak of the source of the Nile; for Libya, though which it runs, is uninhabited and desert. Regarding its course, I have related everything that I could learn by inquiry; and it issues into Egypt. Now Egypt lies about opposite to the mountainous part of Cilicia; [2] from there, it is a straight five days' journey for an unencumbered man to Sinope on the Euxine; and Sinope lies opposite the place where the Ister falls into the sea. Thus I suppose the course of the Nile in its passage through Libya to be like the course of the Ister.","places":[{"placeId":"226577","name":"Ister","startOffset":4,"endOffset":9},{"placeId":"727172","name":"Nile","startOffset":123,"endOffset":127},{"placeId":"991375","name":"Libya","startOffset":133,"endOffset":138},{"placeId":"766","name":"Egypt","startOffset":287,"endOffset":292},{"placeId":"766","name":"Egypt","startOffset":298,"endOffset":303},{"placeId":"658440","name":"Cilicia","startOffset":351,"endOffset":358},{"placeId":"857321","name":"Sinope","startOffset":439,"endOffset":445},{"placeId":"1224","name":"Euxine","startOffset":453,"endOffset":459},{"placeId":"857321","name":"Sinope","startOffset":465,"endOffset":471},{"placeId":"226577","name":"Ister","startOffset":506,"endOffset":511},{"placeId":"727172","name":"Nile","startOffset":565,"endOffset":569},{"placeId":"991375","name":"Libya","startOffset":593,"endOffset":598},{"placeId":"226577","name":"Ister","startOffset":628,"endOffset":633}]},{"id":35,"text":"It is sufficient to say this much concerning the Nile. But concerning Egypt, I am going to speak at length, because it has the most wonders, and everywhere presents works beyond description; therefore, I shall say the more concerning Egypt. [2]Just as the Egyptians have a climate peculiar to themselves, and their river is different in its nature from all other rivers, so, too, have they instituted customs and laws contrary for the most part to those of the rest of mankind. Among them, the women buy and sell, the men stay at home and weave; and whereas in weaving all others push the woof upwards, the Egyptians push it downwards. [3] Men carry burdens on their heads, women on their shoulders. Women pass water standing, men sitting. They ease their bowels indoors, and eat out of doors in the streets, explaining that things unseemly but necessary should be done alone in private, things not unseemly should be done openly. [4] No woman is dedicated to the service of any god or goddess; men are dedicated to all deities male or female. Sons are not compelled against their will to support their parents, but daughters must do so though they be unwilling.","places":[{"placeId":"727172","name":"Nile","startOffset":49,"endOffset":53},{"placeId":"766","name":"Egypt","startOffset":70,"endOffset":75},{"placeId":"766","name":"Egypt","startOffset":234,"endOffset":239},{"placeId":"981503","name":"Egyptians","startOffset":256,"endOffset":265},{"placeId":"981503","name":"Egyptians","startOffset":607,"endOffset":616}]},{"id":36,"text":"Everywhere else, priests of the gods wear their hair long; in Egypt, they are shaven. For all other men, the rule in mourning for the dead is that those most nearly concerned have their heads shaven; Egyptians are shaven at other times, but after a death they let their hair and beard grow. [2] The Egyptians are the only people who keep their animals with them in the house. Whereas all others live on wheat and barley, it is the greatest disgrace for an Egyptian to live so; they make food from a coarse grain which some call spelt. [3] They knead dough with their feet, and gather mud and dung with their hands. The Egyptians and those who have learned it from them are the only people who practise circumcision. Every man has two garments, every woman only one. [4] The rings and sheets of sails are made fast outside the boat elsewhere, but inside it in Egypt. The Greeks write and calculate from left to right; the Egyptians do the opposite; yet they say that their way of writing is towards the right, and the Greek way towards the left. They employ two kinds of writing; one is called sacred, the other demotic19.","places":[{"placeId":"766","name":"Egypt","startOffset":62,"endOffset":67},{"placeId":"981503","name":"Egyptians","startOffset":200,"endOffset":209},{"placeId":"981503","name":"Egyptians","startOffset":299,"endOffset":308},{"placeId":"981503","name":"Egyptian","startOffset":456,"endOffset":464},{"placeId":"981503","name":"Egyptians","startOffset":619,"endOffset":628},{"placeId":"981503","name":"Egypt","startOffset":859,"endOffset":864},{"placeId":"981503","name":"Egyptians","startOffset":921,"endOffset":930}]},{"id":37,"text":"They are religious beyond measure, more than any other people; and the following are among their customs. They drink from cups of bronze, which they clean out daily; this is done not by some but by all. [2] They are especially careful always to wear newly-washed linen. They practise circumcision for cleanliness' sake; for they would rather be clean than more becoming. Their priests shave the whole body every other day, so that no lice or anything else foul may infest them as they attend upon the gods. [3] The priests wear a single linen garment and sandals of papyrus:20 they may have no other kind of clothing or footwear. Twice a day and twice every night they wash in cold water. Their religious observances are, one may say, innumerable. [4] But also they receive many benefits: they do not consume or spend anything of their own; sacred food is cooked for them, beef and goose are brought in great abundance to each man every day, and wine of grapes is given to them, too. They may not eat fish. [5] The Egyptians sow no beans in their country; if any grow, they will not eat them either raw or cooked; the priests cannot endure even to see them, considering beans an unclean kind of legume. Many (not only one) are dedicated to the service of each god. One of these is the high priest; and when a high priest dies, his son succeeds to his office.","places":[{"placeId":"981503","name":"Egyptians","startOffset":1015,"endOffset":1024}]},{"id":38,"text":"They believe that bulls belong to Epaphus,21 and for this reason scrutinize them as follows; if they see even one black hair on them, the bull is considered impure. [2] One of the priests, appointed to the task, examines the beast, making it stand and lie, and drawing out its tongue, to determine whether it is clean of the stated signs which I shall indicate hereafter.22 He looks also to the hairs of the tail, to see if they grow naturally. [3] If it is clean in all these respects, the priest marks it by wrapping papyrus around the horns, then smears it with sealing-earth and stamps it with his ring; and after this they lead the bull away. But the penalty is death for sacrificing a bull that the priest has not marked. Such is the manner of approving the beast; I will now describe how it is sacrificed.","places":[]},{"id":39,"text":"After leading the marked beast to the altar where they will sacrifice it, they kindle a fire; then they pour wine on the altar over the victim and call upon the god; then they cut its throat, and having done so sever the head from the body. [2] They flay the carcass of the victim, then invoke many curses on its head, which they carry away. Where there is a market, and Greek traders in it, the head is taken to the market and sold; where there are no Greeks, it is thrown into the river. [3] The imprecation which they utter over the heads is that whatever ill threatens those who sacrifice, or the whole of Egypt, fall upon that head. [4] In respect of the heads of sacrificed beasts and the libation of wine, the practice of all Egyptians is the same in all sacrifices; and from this ordinance no Egyptian will taste of the head of anything that had life.","places":[{"placeId":"766","name":"Egypt","startOffset":610,"endOffset":615},{"placeId":"981503","name":"Egyptians","startOffset":733,"endOffset":742},{"placeId":"981503","name":"Egyptian","startOffset":801,"endOffset":809}]},{"id":40,"text":"But in regard to the disembowelling and burning of the victims, there is a different way for each sacrifice. I shall now, however, speak of that goddess whom they consider the greatest, and in whose honor they keep highest festival. [2] After praying in the foregoing way, they take the whole stomach out of the flayed bull, leaving the entrails and the fat in the carcass, and cut off the legs, the end of the loin, the shoulders, and the neck. [3] Having done this, they fill what remains of the carcass with pure bread, honey, raisins, figs, frankincense, myrrh, and other kinds of incense, and then burn it, pouring a lot of oil on it. [4] They fast before the sacrifice, and while it is burning, they all make lamentation; and when their lamentation is over, they set out a meal of what is left of the victim.","places":[]},{"id":41,"text":"All Egyptians sacrifice unblemished bulls and bull-calves; they may not sacrifice cows: these are sacred to Isis. [2] For the images of Isis are in woman's form, horned like a cow, exactly as the Greeks picture Io, and cows are held by far the most sacred of all beasts of the herd by all Egyptians alike. [3] For this reason, no Egyptian man or woman will kiss a Greek man, or use a knife, or a spit, or a cauldron belonging to a Greek, or taste the flesh of an unblemished bull that has been cut up with a Greek knife. [4] Cattle that die are dealt with in the following way. Cows are cast into the river, bulls are buried by each city in its suburbs, with one or both horns uncovered for a sign; then, when the carcass is decomposed, and the time appointed is at hand, a boat comes to each city from the island called Prosopitis, [5] an island in the Delta, nine schoeni in circumference. There are many other towns on Prosopitis; the one from which the boats come to gather the bones of the bulls is called Atarbekhis;23 a temple of Aphrodite stands in it of great sanctity. [6] From this town many go out, some to one town and some to another, to dig up the bones, which they then carry away and all bury in one place. As they bury the cattle, so do they all other beasts at death. Such is their ordinance respecting these also; for they, too, may not be killed.","places":[{"placeId":"981503","name":"Egyptians","startOffset":4,"endOffset":13},{"placeId":"981503","name":"Egyptians","startOffset":289,"endOffset":298},{"placeId":"981503","name":"Egyptian man","startOffset":330,"endOffset":342},{"placeId":"727206","name":"Prosopitis","startOffset":821,"endOffset":831},{"placeId":"727206","name":"Prosopitis","startOffset":922,"endOffset":932}]},{"id":42,"text":"All that have a temple of Zeus of Thebes or are of the Theban district sacrifice goats, but will not touch sheep. [2] For no gods are worshipped by all Egyptians in common except Isis and Osiris, who they say is Dionysus; these are worshipped by all alike. Those who have a temple of Mendes24 or are of the Mendesian district sacrifice sheep, but will not touch goats. [3] The Thebans, and those who by the Theban example will not touch sheep, give the following reason for their ordinance:25 they say that Heracles wanted very much to see Zeus and that Zeus did not want to be seen by him, but that finally, when Heracles prayed, Zeus contrived [4] to show himself displaying the head and wearing the fleece of a ram which he had flayed and beheaded. It is from this that the Egyptian images of Zeus have a ram's head; and in this, the Egyptians are imitated by the Ammonians, who are colonists from Egypt and Ethiopia and speak a language compounded of the tongues of both countries. [5] It was from this, I think, that the Ammonians got their name, too; for the Egyptians call Zeus Amon. The Thebans, then, consider rams sacred for this reason, and do not sacrifice them. [6] But one day a year, at the festival of Zeus, they cut in pieces and flay a single ram and put the fleece on the image of Zeus, as in the story; then they bring an image of Heracles near it. Having done this, all that are at the temple mourn for the ram, and then bury it in a sacred coffin.","places":[{"placeId":"786017","name":"Thebes","startOffset":34,"endOffset":40},{"placeId":"786017","name":"Theban district","startOffset":55,"endOffset":70},{"placeId":"981503","name":"Egyptians","startOffset":152,"endOffset":161},{"placeId":"727156","name":"Mendes","startOffset":284,"endOffset":290},{"placeId":"727159","name":"Mendesian district","startOffset":307,"endOffset":325},{"placeId":"786017","name":"Thebans","startOffset":377,"endOffset":384},{"placeId":"981503","name":"Egypt","startOffset":777,"endOffset":782},{"placeId":"981503","name":"Egyptians","startOffset":837,"endOffset":846},{"placeId":"716520","name":"Ammonians","startOffset":867,"endOffset":876},{"placeId":"981503","name":"Egypt","startOffset":901,"endOffset":906},{"placeId":"39274","name":"Ethiopia","startOffset":911,"endOffset":919},{"placeId":"716520","name":"Ammonians","startOffset":1026,"endOffset":1035},{"placeId":"981503","name":"Egyptians","startOffset":1065,"endOffset":1074},{"placeId":"786017","name":"Thebans","startOffset":1097,"endOffset":1104}]},{"id":43,"text":"Concerning Heracles, I heard it said that he was one of the twelve gods. But nowhere in Egypt could I hear anything about the other Heracles, whom the Greeks know. [2] I have indeed a lot of other evidence that the name of Heracles did not come from Hellas to Egypt, but from Egypt to Hellas (and in Hellas to those Greeks who gave the name Heracles to the son of Amphitryon), besides this: that Amphitryon and Alcmene, the parents of this Heracles, were both Egyptian by descent26 ; and that the Egyptians deny knowing the names Poseidon and the Dioscuri, nor are these gods reckoned among the gods of Egypt. [3] Yet if they got the name of any deity from the Greeks, of these not least but in particular would they preserve a recollection, if indeed they were already making sea voyages and some Greeks, too, were seafaring men, as I expect and judge; so that the names of these gods would have been even better known to the Egyptians than the name of Heracles. [4] But Heracles is a very ancient god in Egypt; as the Egyptians themselves say, the change of the eight gods to the twelve, one of whom they acknowledge Heracles to be, was made seventeen thousand years before the reign of Amasis.","places":[{"placeId":"766","name":"Egypt","startOffset":88,"endOffset":93},{"placeId":"766","name":"Egypt","startOffset":260,"endOffset":265},{"placeId":"981503","name":"Egypt","startOffset":276,"endOffset":281},{"placeId":"981503","name":"Egyptian","startOffset":460,"endOffset":468},{"placeId":"981503","name":"Egyptians","startOffset":497,"endOffset":506},{"placeId":"981503","name":"Egypt","startOffset":603,"endOffset":608},{"placeId":"981503","name":"Egyptians","startOffset":927,"endOffset":936},{"placeId":"981503","name":"Egypt","startOffset":1006,"endOffset":1011},{"placeId":"981503","name":"Egyptians","startOffset":1020,"endOffset":1029}]},{"id":44,"text":"Moreover, wishing to get clear information about this matter where it was possible so to do, I took ship for Tyre in Phoenicia, where I had learned by inquiry that there was a holy temple of Heracles.27 [2] There I saw it, richly equipped with many other offerings, besides two pillars, one of refined gold, one of emerald: a great pillar that shone at night; and in conversation with the priests, I asked how long it was since their temple was built. [3] I found that their account did not tally with the belief of the Greeks, either; for they said that the temple of the god was founded when Tyre first became a city, and that was two thousand three hundred years ago. At Tyre I saw yet another temple of the so-called Thasian Heracles. [4] Then I went to Thasos, too, where I found a temple of Heracles built by the Phoenicians, who made a settlement there when they voyaged in search of Europe; now they did so as much as five generations before the birth of Heracles the son of Amphitryon in Hellas. [5] Therefore, what I have discovered by inquiry plainly shows that Heracles is an ancient god. And furthermore, those Greeks, I think, are most in the right, who have established and practise two worships of Heracles, sacrificing to one Heracles as to an immortal, and calling him the Olympian, but to the other bringing offerings as to a dead hero28.","places":[{"placeId":"678437","name":"Tyre","startOffset":109,"endOffset":113},{"placeId":"678334","name":"Phoenicia","startOffset":117,"endOffset":126},{"placeId":"678437","name":"Tyre","startOffset":594,"endOffset":598},{"placeId":"678437","name":"Tyre","startOffset":674,"endOffset":678},{"placeId":"501635","name":"Thasian Heracles","startOffset":721,"endOffset":737},{"placeId":"501635","name":"Thasos","startOffset":758,"endOffset":764},{"placeId":"678334","name":"Phoenicians","startOffset":819,"endOffset":830}]},{"id":45,"text":"And the Greeks say many other ill-considered things, too; among them, this is a silly story which they tell about Heracles: that when he came to Egypt, the Egyptians crowned him and led him out in a procession to sacrifice him to Zeus; and for a while (they say) he followed quietly, but when they started in on him at the altar, he resisted and killed them all. [2] Now it seems to me that by this story the Greeks show themselves altogether ignorant of the character and customs of the Egyptians; for how should they sacrifice men when they are forbidden to sacrifice even beasts, except swine and bulls and bull-calves, if they are unblemished, and geese? [3] And furthermore, as Heracles was alone, and, still, only a man, as they say, how is it natural that he should kill many myriads? In talking so much about this, may I keep the goodwill of gods and heroes!","places":[{"placeId":"766","name":"Egypt","startOffset":145,"endOffset":150},{"placeId":"981503","name":"Egyptians","startOffset":156,"endOffset":165},{"placeId":"981503","name":"Egyptians","startOffset":488,"endOffset":497}]},{"id":46,"text":"This is why the Egyptians of whom I have spoken sacrifice no goats, male or female: the Mendesians reckon Pan among the eight gods who, they say, were before the twelve gods. [2] Now in their painting and sculpture, the image of Pan is made with the head and the legs of a goat, as among the Greeks; not that he is thought to be in fact such, or unlike other gods; but why they represent him so, I have no wish to say. [3] The Mendesians consider all goats sacred, the male even more than the female, and goatherds are held in special estimation: one he-goat is most sacred of all; when he dies, it is ordained that there should be great mourning in all the Mendesian district. [4] In the Egyptian language Mendes is the name both for the he-goat and for Pan. In my lifetime a strange thing occurred in this district: a he-goat had intercourse openly with a woman. This came to be publicly known.","places":[{"placeId":"981503","name":"Egyptians","startOffset":16,"endOffset":25},{"placeId":"727156","name":"Mendesians","startOffset":88,"endOffset":98},{"placeId":"727156","name":"Mendesians","startOffset":427,"endOffset":437},{"placeId":"727159","name":"Mendesian district","startOffset":658,"endOffset":676},{"placeId":"981503","name":"Egyptian language","startOffset":689,"endOffset":706},{"placeId":"727156","name":"Mendes","startOffset":707,"endOffset":713}]},{"id":47,"text":"Swine are held by the Egyptians to be unclean beasts. In the first place, if an Egyptian touches a hog in passing, he goes to the river and dips himself in it, clothed as he is; and in the second place, swineherds, though native born Egyptians, are alone of all men forbidden to enter any Egyptian temple; nor will any give a swineherd his daughter in marriage, nor take a wife from their women; but swineherds intermarry among themselves. [2] Nor do the Egyptians think it right to sacrifice swine to any god except the Moon and Dionysus; to these, they sacrifice their swine at the same time, in the same season of full moon; then they eat the meat. The Egyptians have an explanation of why they sacrifice swine at this festival, yet abominate them at others; I know it, but it is not fitting that I relate it. [3] But this is how they sacrifice swine to the Moon: the sacrificer lays the end of the tail and the spleen and the caul together and covers them up with all the fat that he finds around the belly, then consigns it all to the fire; as for the rest of the flesh, they eat it at the time of full moon when they sacrifice the victim; but they will not taste it on any other day. Poor men, with but slender means, mold swine out of dough, which they then take and sacrifice.","places":[{"placeId":"981503","name":"Egyptians","startOffset":22,"endOffset":31},{"placeId":"981503","name":"Egyptian","startOffset":80,"endOffset":88},{"placeId":"981503","name":"Egyptians","startOffset":234,"endOffset":243},{"placeId":"981503","name":"Egyptian temple","startOffset":289,"endOffset":304},{"placeId":"981503","name":"Egyptians","startOffset":455,"endOffset":464},{"placeId":"981503","name":"Egyptians","startOffset":656,"endOffset":665}]},{"id":48,"text":"To Dionysus, on the evening of his festival, everyone offers a piglet which he kills before his door and then gives to the swineherd who has sold it, for him to take away. [2] The rest of the festival of Dionysus is observed by the Egyptians much as it is by the Greeks, except for the dances; but in place of the phallus, they have invented the use of puppets two feet high moved by strings, the male member nodding and nearly as big as the rest of the body, which are carried about the villages by women; a flute-player goes ahead, the women follow behind singing of Dionysus. [3] Why the male member is so large and is the only part of the body that moves, there is a sacred legend that explains.","places":[{"placeId":"981503","name":"Egyptians","startOffset":232,"endOffset":241}]},{"id":49,"text":"Now then, it seems to me that Melampus son of Amytheon was not ignorant of but was familiar with this sacrifice. For Melampus was the one who taught the Greeks the name of Dionysus and the way of sacrificing to him and the phallic procession; he did not exactly unveil the subject taking all its details into consideration, for the teachers who came after him made a fuller revelation; but it was from him that the Greeks learned to bear the phallus along in honor of Dionysus, and they got their present practice from his teaching. [2] I say, then, that Melampus acquired the prophetic art, being a discerning man, and that, besides many other things which he learned from Egypt, he also taught the Greeks things concerning Dionysus, altering few of them; for I will not say that what is done in Egypt in connection with the god and what is done among the Greeks originated independently: for they would then be of an Hellenic character and not recently introduced. [3] Nor again will I say that the Egyptians took either this or any other custom from the Greeks. But I believe that Melampus learned the worship of Dionysus chiefly from Cadmus of Tyre and those who came with Cadmus from Phoenicia to the land now called Boeotia.","places":[{"placeId":"766","name":"Egypt","startOffset":674,"endOffset":679},{"placeId":"766","name":"Egypt","startOffset":797,"endOffset":802},{"placeId":"981503","name":"Egyptians","startOffset":1001,"endOffset":1010},{"placeId":"678437","name":"Tyre","startOffset":1148,"endOffset":1152},{"placeId":"678334","name":"Phoenicia","startOffset":1189,"endOffset":1198},{"placeId":"540689","name":"Boeotia","startOffset":1222,"endOffset":1229}]},{"id":50,"text":"In fact, the names of nearly all the gods came to Hellas from Egypt. For I am convinced by inquiry that they have come from foreign parts, and I believe that they came chiefly from Egypt. [2] Except the names of Poseidon and the Dioscuri, as I have already said, and Hera, and Hestia, and Themis, and the Graces, and the Nereids, the names of all the gods have always existed in Egypt. I only say what the Egyptians themselves say. The gods whose names they say they do not know were, as I think, named by the Pelasgians, except Poseidon, the knowledge of whom they learned from the Libyans. [3] Alone of all nations the Libyans have had among them the name of Poseidon from the beginning, and they have always honored this god. The Egyptians, however, are not accustomed to pay any honors to heroes.","places":[{"placeId":"766","name":"Egypt","startOffset":62,"endOffset":67},{"placeId":"766","name":"Egypt","startOffset":181,"endOffset":186},{"placeId":"981503","name":"Egypt","startOffset":379,"endOffset":384},{"placeId":"981503","name":"Egyptians","startOffset":406,"endOffset":415},{"placeId":"570102","name":"Pelasgians","startOffset":510,"endOffset":520},{"placeId":"716588","name":"Libyans","startOffset":583,"endOffset":590},{"placeId":"716588","name":"Libyans","startOffset":621,"endOffset":628},{"placeId":"981503","name":"Egyptians","startOffset":733,"endOffset":742}]},{"id":51,"text":"These customs, then, and others besides, which I shall indicate, were taken by the Greeks from the Egyptians. It was not so with the ithyphallic images of Hermes; the production of these came from the Pelasgians, from whom the Athenians were the first Greeks to take it, and then handed it on to others. [2] For the Athenians were then already counted as Greeks when the Pelasgians came to live in the land with them and thereby began to be considered as Greeks. Whoever has been initiated into the rites of the Cabeiri, which the Samothracians learned from the Pelasgians and now practice, understands what my meaning is. [3] Samothrace was formerly inhabited by those Pelasgians who came to live among the Athenians, and it is from them that the Samothracians take their rites. [4] The Athenians, then, were the first Greeks to make ithyphallic images of Hermes, and they did this because the Pelasgians taught them. The Pelasgians told a certain sacred tale about this, which is set forth in the Samothracian mysteries.","places":[{"placeId":"981503","name":"Egyptians","startOffset":99,"endOffset":108},{"placeId":"570102","name":"Pelasgians","startOffset":201,"endOffset":211},{"placeId":"579885","name":"Athenians","startOffset":227,"endOffset":236},{"placeId":"579885","name":"Athenians","startOffset":316,"endOffset":325},{"placeId":"570102","name":"Pelasgians","startOffset":371,"endOffset":381},{"placeId":"540844","name":"Cabeiri","startOffset":512,"endOffset":519},{"placeId":"501597","name":"Samothracians","startOffset":531,"endOffset":544},{"placeId":"570102","name":"Pelasgians","startOffset":562,"endOffset":572},{"placeId":"501597","name":"Samothrace","startOffset":627,"endOffset":637},{"placeId":"570102","name":"Pelasgians","startOffset":670,"endOffset":680},{"placeId":"579885","name":"Athenians","startOffset":708,"endOffset":717},{"placeId":"501597","name":"Samothracians","startOffset":748,"endOffset":761},{"placeId":"579885","name":"Athenians","startOffset":788,"endOffset":797},{"placeId":"570102","name":"Pelasgians","startOffset":895,"endOffset":905},{"placeId":"570102","name":"Pelasgians","startOffset":923,"endOffset":933},{"placeId":"501597","name":"Samothracian mysteries","startOffset":999,"endOffset":1021}]},{"id":52,"text":"Formerly, in all their sacrifices, the Pelasgians called upon gods without giving name or appellation to any (I know this, because I was told at Dodona); for as yet they had not heard of such. They called them gods29 from the fact that, besides setting everything in order, they maintained all the dispositions. [2] Then, after a long while, first they learned the names of the rest of the gods, which came to them from Egypt, and, much later, the name of Dionysus; and presently they asked the oracle at Dodona about the names; for this place of divination, held to be the most ancient in Hellas, was at that time the only one. [3] When the Pelasgians, then, asked at Dodona whether they should adopt the names that had come from foreign parts, the oracle told them to use the names. From that time onwards they used the names of the gods in their sacrifices; and the Greeks received these later from the Pelasgians.","places":[{"placeId":"570102","name":"Pelasgians","startOffset":39,"endOffset":49},{"placeId":"530843","name":"Dodona","startOffset":145,"endOffset":151},{"placeId":"766","name":"Egypt","startOffset":420,"endOffset":425},{"placeId":"530843","name":"Dodona","startOffset":505,"endOffset":511},{"placeId":"570102","name":"Pelasgians","startOffset":642,"endOffset":652},{"placeId":"530843","name":"Dodona","startOffset":669,"endOffset":675},{"placeId":"570102","name":"Pelasgians","startOffset":906,"endOffset":916}]},{"id":53,"text":"But whence each of the gods came to be, or whether all had always been, and how they appeared in form, they did not know until yesterday or the day before, so to speak; [2] for I suppose Hesiod and Homer flourished not more than four hundred years earlier than I; and these are the ones who taught the Greeks the descent of the gods, and gave the gods their names, and determined their spheres and functions, and described their outward forms. [3] But the poets who are said to have been earlier than these men were, in my opinion, later. The earlier part of all this is what the priestesses of Dodona tell; the later, that which concerns Hesiod and Homer, is what I myself say.","places":[{"placeId":"530843","name":"Dodona","startOffset":595,"endOffset":601}]},{"id":54,"text":"But about the oracles in Hellas, and that one which is in Libya, the Egyptians give the following account. The priests of Zeus of Thebes told me that two priestesses had been carried away from Thebes by Phoenicians; one, they said they had heard was taken away and sold in Libya, the other in Hellas; these women, they said, were the first founders of places of divination in the aforesaid countries. [2] When I asked them how it was that they could speak with such certain knowledge, they said in reply that their people had sought diligently for these women, and had never been able to find them, but had learned later the story which they were telling me.","places":[{"placeId":"991375","name":"Libya","startOffset":58,"endOffset":63},{"placeId":"981503","name":"Egyptians","startOffset":69,"endOffset":78},{"placeId":"786131","name":"Thebes","startOffset":130,"endOffset":136},{"placeId":"786131","name":"Thebes","startOffset":193,"endOffset":199},{"placeId":"678334","name":"Phoenicians","startOffset":203,"endOffset":214},{"placeId":"716588","name":"Libya","startOffset":273,"endOffset":278}]},{"id":55,"text":"That, then, I heard from the Theban priests; and what follows, the prophetesses of Dodona say: that two black doves had come flying from Thebes in Egypt, one to Libya and one to Dodona; [2] the latter settled on an oak tree, and there uttered human speech, declaring that a place of divination from Zeus must be made there; the people of Dodona understood that the message was divine, and therefore established the oracular shrine. [3] The dove which came to Libya told the Libyans (they say) to make an oracle of Ammon; this also is sacred to Zeus. Such was the story told by the Dodonaean priestesses, the eldest of whom was Promeneia and the next Timarete and the youngest Nicandra; and the rest of the servants of the temple at Dodona similarly held it true.","places":[{"placeId":"786017","name":"Theban priests","startOffset":29,"endOffset":43},{"placeId":"530843","name":"Dodona","startOffset":83,"endOffset":89},{"placeId":"786131","name":"Thebes","startOffset":137,"endOffset":143},{"placeId":"766","name":"Egypt","startOffset":147,"endOffset":152},{"placeId":"991375","name":"Libya","startOffset":161,"endOffset":166},{"placeId":"530843","name":"Dodona","startOffset":178,"endOffset":184},{"placeId":"530843","name":"Dodona","startOffset":338,"endOffset":344},{"placeId":"716588","name":"Libya","startOffset":459,"endOffset":464},{"placeId":"716588","name":"Libyans","startOffset":474,"endOffset":481},{"placeId":"716520","name":"oracle of Ammon","startOffset":504,"endOffset":519},{"placeId":"530843","name":"Dodonaean priestesses","startOffset":581,"endOffset":602},{"placeId":"530843","name":"Dodona","startOffset":732,"endOffset":738}]},{"id":56,"text":"But my own belief about it is this. If the Phoenicians did in fact carry away the sacred women and sell one in Libya and one in Hellas, then, in my opinion, the place where this woman was sold in what is now Hellas, but was formerly called Pelasgia, was Thesprotia; [2] and then, being a slave there, she established a shrine of Zeus under an oak that was growing there; for it was reasonable that, as she had been a handmaid of the temple of Zeus at Thebes , she would remember that temple in the land to which she had come. [3] After this, as soon as she understood the Greek language, she taught divination; and she said that her sister had been sold in Libya by the same Phoenicians who sold her.","places":[{"placeId":"678334","name":"Phoenicians","startOffset":43,"endOffset":54},{"placeId":"991375","name":"Libya","startOffset":111,"endOffset":116},{"placeId":"geonames-255638","name":"Pelasgia","startOffset":240,"endOffset":248},{"placeId":"541138","name":"Thebes","startOffset":451,"endOffset":457},{"placeId":"716588","name":"Libya","startOffset":657,"endOffset":662},{"placeId":"678334","name":"Phoenicians","startOffset":675,"endOffset":686}]},{"id":57,"text":"I expect that these women were called doves by the people of Dodona because they spoke a strange language, and the people thought it like the cries of birds; [2] then the woman spoke what they could understand, and that is why they say that the dove uttered human speech; as long as she spoke in a foreign tongue, they thought her voice was like the voice of a bird. For how could a dove utter the speech of men? The tale that the dove was black signifies that the woman was Egyptian30. [3]The fashions of divination at Thebes of Egypt and at Dodona are like one another; moreover, the practice of divining from the sacrificed victim has also come from Egypt.","places":[{"placeId":"530843","name":"Dodona","startOffset":63,"endOffset":69},{"placeId":"981503","name":"Egyptian","startOffset":477,"endOffset":485},{"placeId":"786131","name":"Thebes","startOffset":522,"endOffset":528},{"placeId":"766","name":"Egypt","startOffset":532,"endOffset":537},{"placeId":"530843","name":"Dodona","startOffset":545,"endOffset":551},{"placeId":"766","name":"Egypt","startOffset":655,"endOffset":660}]},{"id":58,"text":"It would seem, too, that the Egyptians were the first people to establish solemn assemblies, and processions, and services; the Greeks learned all that from them. I consider this proved, because the Egyptian ceremonies are manifestly very ancient, and the Greek are of recent origin.","places":[{"placeId":"981503","name":"Egyptians","startOffset":29,"endOffset":38},{"placeId":"981503","name":"Egyptian ceremonies","startOffset":199,"endOffset":218}]},{"id":59,"text":"The Egyptians hold solemn assemblies not once a year, but often. The principal one of these and the most enthusiastically celebrated is that in honor of Artemis at the town of Bubastis31 , and the next is that in honor of Isis at Busiris. [2] This town is in the middle of the Egyptian Delta, and there is in it a very great temple of Isis, who is Demeter in the Greek language. [3] The third greatest festival is at Sas in honor of Athena; the fourth is the festival of the sun at Heliopolis, the fifth of Leto at Buto, and the sixth of Ares at Papremis.","places":[{"placeId":"981503","name":"Egyptians","startOffset":4,"endOffset":13},{"placeId":"727088","name":"Bubastis","startOffset":176,"endOffset":184},{"placeId":"756543","name":"Busiris","startOffset":230,"endOffset":237},{"placeId":"727217","name":"Sas","startOffset":417,"endOffset":421},{"placeId":"727117","name":"Heliopolis","startOffset":483,"endOffset":493},{"placeId":"727095","name":"Buto","startOffset":516,"endOffset":520},{"placeId":"727185","name":"Papremis","startOffset":547,"endOffset":555}]},{"id":60,"text":"When the people are on their way to Bubastis, they go by river, a great number in every boat, men and women together. Some of the women make a noise with rattles, others play flutes all the way, while the rest of the women, and the men, sing and clap their hands. [2] As they travel by river to Bubastis, whenever they come near any other town they bring their boat near the bank; then some of the women do as I have said, while some shout mockery of the women of the town; others dance, and others stand up and lift their skirts. They do this whenever they come alongside any riverside town. [3] But when they have reached Bubastis, they make a festival with great sacrifices, and more wine is drunk at this feast than in the whole year besides. It is customary for men and women (but not children) to assemble there to the number of seven hundred thousand, as the people of the place say.","places":[{"placeId":"727088","name":"Bubastis","startOffset":36,"endOffset":44},{"placeId":"727088","name":"Bubastis","startOffset":295,"endOffset":303},{"placeId":"727088","name":"Bubastis","startOffset":624,"endOffset":632}]},{"id":61,"text":"This is what they do there; I have already described how they keep the feast of Isis at Busiris. There, after the sacrifice, all the men and women lament, in countless numbers; but it is not pious for me to say who it is for whom they lament. [2] Carians who live in Egypt do even more than this, inasmuch as they cut their foreheads with knives; and by this they show that they are foreigners and not Egyptians.","places":[{"placeId":"756543","name":"Busiris","startOffset":88,"endOffset":95},{"placeId":"991381","name":"Carians","startOffset":247,"endOffset":254},{"placeId":"766","name":"Egypt","startOffset":267,"endOffset":272},{"placeId":"981503","name":"Egyptians","startOffset":402,"endOffset":411}]},{"id":62,"text":"When they assemble at Sas on the night of the sacrifice, they keep lamps burning outside around their houses. These lamps are saucers full of salt and oil on which the wick floats, and they burn all night. This is called the Feast of Lamps. [2] Egyptians who do not come to this are mindful on the night of sacrifice to keep their own lamps burning, and so they are alight not only at Sas but throughout Egypt. A sacred tale is told showing why this night is lit up thus and honored.","places":[{"placeId":"727217","name":"Sas","startOffset":22,"endOffset":26},{"placeId":"981503","name":"Egyptians","startOffset":246,"endOffset":255},{"placeId":"727217","name":"Sas","startOffset":386,"endOffset":390},{"placeId":"766","name":"Egypt","startOffset":406,"endOffset":411}]},{"id":63,"text":"When the people go to Heliopolis and Buto, they offer sacrifice only. At Papremis sacrifice is offered and rites performed just as elsewhere; but when the sun is setting, a few of the priests hover about the image, while most of them go and stand in the entrance to the temple with clubs of wood in their hands; others, more than a thousand men fulfilling vows, who also carry wooden clubs, stand in a mass opposite. [2] The image of the god, in a little gilded wooden shrine, they carry away on the day before this to another sacred building. The few who are left with the image draw a four-wheeled wagon conveying the shrine and the image that is in the shrine; the others stand in the space before the doors and do not let them enter, while the vow-keepers, taking the side of the god, strike them, who defend themselves. [3] A fierce fight with clubs breaks out there, and they are hit on their heads, and many, I expect, even die from their wounds; although the Egyptians said that nobody dies. [4] The natives say that they made this assembly a custom from the following incident: the mother of Ares lived in this temple; Ares had been raised apart from her and came, when he grew up, wishing to visit his mother; but as her attendants kept him out and would not let him pass, never having seen him before, Ares brought men from another town, manhandled the attendants, and went in to his mother. From this, they say, this hitting for Ares became a custom in the festival32.","places":[{"placeId":"727117","name":"Heliopolis","startOffset":22,"endOffset":32},{"placeId":"727095","name":"Buto","startOffset":37,"endOffset":41},{"placeId":"727185","name":"Papremis","startOffset":73,"endOffset":81},{"placeId":"981503","name":"Egyptians","startOffset":967,"endOffset":976}]},{"id":64,"text":"Furthermore, it was the Egyptians who first made it a matter of religious observance not to have intercourse with women in temples or to enter a temple after such intercourse without washing. Nearly all other peoples are less careful in this matter than are the Egyptians and Greeks, and consider a man to be like any other animal; [2] for beasts and birds (they say) are seen to mate both in the temples and in the sacred precincts; now were this displeasing to the god, the beasts would not do so. This is the reason given by others for practices which I, for my part, dislike;","places":[{"placeId":"981503","name":"Egyptians","startOffset":24,"endOffset":33},{"placeId":"981503","name":"Egyptians","startOffset":262,"endOffset":271}]},{"id":65,"text":"but the Egyptians in this and in all other matters are exceedingly strict against desecration of their temples. [2]Although Egypt has Libya on its borders, it is not a country of many animals. All of them are held sacred; some of these are part of men's households and some not; but if I were to say why they are left alone as sacred, I should end up talking of matters of divinity, which I am especially averse to treating; I have never touched upon such except where necessity has compelled me. [3] But I will indicate how it is customary to deal with the animals. Men and women are appointed guardians to provide nourishment for each kind respectively; a son inherits this office from his father. [4] Townsfolk in each place, when they pay their vows, pray to the god to whom the animal is dedicated, shaving all or one half or one third of their children's heads, and weighing the hair in a balance against a sum of silver; then the weight in silver of the hair is given to the female guardian of the creatures, who buys fish with it and feeds them. [5] Thus, food is provided for them. Whoever kills one of these creatures intentionally is punished with death; if he kills accidentally, he pays whatever penalty the priests appoint. Whoever kills an ibis or a hawk, intentionally or not, must die for it.","places":[{"placeId":"981503","name":"Egyptians","startOffset":8,"endOffset":17},{"placeId":"766","name":"Egypt","startOffset":124,"endOffset":129},{"placeId":"991375","name":"Libya","startOffset":134,"endOffset":139}]},{"id":66,"text":"There are many household animals; and there would be many more, were it not for what happens among the cats. When the females have a litter, they are no longer receptive to the males; those that seek to have intercourse with them cannot; [2] so their recourse is to steal and carry off and kill the kittens (but they do not eat what they have killed). The mothers, deprived of their young and desiring to have more, will then approach the males; for they are creatures that love offspring. [3] And when a fire breaks out, very strange things happen among the cats. The Egyptians stand around in a broken line, thinking more of the cats than of quenching the burning; but the cats slip through or leap over the men and spring into the fire. [4] When this happens, there is great mourning in Egypt. The occupants of a house where a cat has died a natural death shave their eyebrows and no more; where a dog has died, the head and the whole body are shaven.","places":[{"placeId":"981503","name":"Egyptians","startOffset":569,"endOffset":578},{"placeId":"981503","name":"Egypt","startOffset":790,"endOffset":795}]},{"id":67,"text":"Dead cats are taken away to sacred buildings in the town of Bubastis, where they are embalmed and buried; female dogs are buried by the townsfolk in their own towns in sacred coffins; and the like is done with mongooses. Shrewmice and hawks are taken away to Buto, ibises to the city of Hermes. [2] There are few bears, and the wolves are little bigger than foxes; both these are buried wherever they are found lying.","places":[{"placeId":"727088","name":"Bubastis","startOffset":60,"endOffset":68},{"placeId":"727095","name":"Buto","startOffset":259,"endOffset":263}]},{"id":68,"text":"The nature of crocodiles is as follows. For the four winter months, it eats nothing. It has four feet, and lives both on land and in the water, for it lays eggs and hatches them out on land and spends the greater part of the day on dry ground, and the night in the river, the water being warmer than the air and dew. [2] No mortal creature of all which we know grows from so small a beginning to such greatness; for its eggs are not much bigger than goose eggs, and the young crocodile is of a proportional size, but it grows to a length of twenty-eight feet and more. [3] It has eyes like pigs' eyes, and long, protruding teeth. It is the only animal that has no tongue. It does not move the lower jaw, but brings the upper jaw down upon the lower, uniquely among beasts. [4] It also has strong claws, and a scaly, impenetrable hide on its back. It is blind in the water, but very keen of sight in the air. Since it lives in the water, its mouth is all full of leeches. All birds and beasts flee from it, except the sandpiper33 , with which it is at peace because this bird does the crocodile a service; [5] for whenever the crocodile comes ashore out of the water and then opens its mouth (and it does this mostly to catch the west wind), the sandpiper goes into its mouth and eats the leeches; the crocodile is pleased by this service and does the sandpiper no harm.","places":[]},{"id":69,"text":"Some of the Egyptians consider crocodiles sacred; others do not, but treat them as enemies. Those who live near Thebes and lake Moeris consider them very sacred. [2] Every household raises one crocodile, trained to be tame; they put ornaments of glass and gold on its ears and bracelets on its forefeet, provide special food and offerings for it, and give the creatures the best of treatment while they live; after death, the crocodiles are embalmed and buried in sacred coffins. [3] But around Elephantine they are not held sacred, and are even eaten. The Egyptians do not call them crocodiles, but khampsae. The Ionians named them crocodiles, from their resemblance to the lizards which they have in their walls34.","places":[{"placeId":"981503","name":"Egyptians","startOffset":12,"endOffset":21},{"placeId":"786017","name":"Thebes","startOffset":112,"endOffset":118},{"placeId":"736967","name":"lake Moeris","startOffset":123,"endOffset":134},{"placeId":"786021","name":"Elephantine","startOffset":495,"endOffset":506},{"placeId":"981503","name":"Egyptians","startOffset":557,"endOffset":566},{"placeId":"550597","name":"Ionians","startOffset":614,"endOffset":621}]},{"id":70,"text":"There are many different ways of crocodile hunting; I will write of the way that I think most worth mentioning. The hunter baits a hook with a hog's back, and lets it float into the midst of the river; he himself stays on the bank with a young live pig, which he beats. [2] Hearing the squeals of the pig, the crocodile goes after the sound, and meets the bait, which it swallows; then the hunters pull the line. When the crocodile is drawn ashore, first of all the hunter smears its eyes over with mud; when this is done, the quarry is very easily masteredno light matter, without that.","places":[]},{"id":71,"text":"Hippopotamuses are sacred in the district of Papremis, but not elsewhere in Egypt. They present the following appearance: four-footed, with cloven hooves like cattle; blunt-nosed; with a horse's mane, visible tusks, a horse's tail and voice; big as the biggest bull. Their hide is so thick that, when it is dried, spearshafts are made of it.","places":[{"placeId":"727185","name":"Papremis","startOffset":45,"endOffset":53},{"placeId":"766","name":"Egypt","startOffset":76,"endOffset":81}]},{"id":72,"text":"Otters are found in the river, too, which the Egyptians consider sacred; and they consider sacred that fish, too, which is called the scale-fish, and the eel. These, and the fox-goose35 among birds, are said to be sacred to the god of the Nile.","places":[{"placeId":"981503","name":"Egyptians","startOffset":46,"endOffset":55},{"placeId":"727172","name":"Nile","startOffset":239,"endOffset":243}]},{"id":73,"text":"There is another sacred bird, too, whose name is phoenix. I myself have never seen it, only pictures of it; for the bird seldom comes into Egypt: once in five hundred years, as the people of Heliopolis say. [2] It is said that the phoenix comes when his father dies. If the picture truly shows his size and appearance, his plumage is partly golden and partly red. He is most like an eagle in shape and size. [3] What they say this bird manages to do is incredible to me. Flying from Arabia to the temple of the sun, they say, he conveys his father encased in myrrh and buries him at the temple of the Sun. [4] This is how he conveys him: he first molds an egg of myrrh as heavy as he can carry, then tries lifting it, and when he has tried it, he then hollows out the egg and puts his father into it, and plasters over with more myrrh the hollow of the egg into which he has put his father, which is the same in weight with his father lying in it, and he conveys him encased to the temple of the Sun in Egypt. This is what they say this bird does.","places":[{"placeId":"981503","name":"Egypt","startOffset":139,"endOffset":144},{"placeId":"727117","name":"Heliopolis","startOffset":191,"endOffset":201},{"placeId":"29475","name":"Arabia","startOffset":483,"endOffset":489},{"placeId":"981503","name":"Egypt","startOffset":1003,"endOffset":1008}]},{"id":74,"text":"Near Thebes there are sacred snakes, harmless to men, small in size, and bearing two horns on the top of their heads. These, when they die, are buried in the temple of Zeus, to whom they are said to be sacred.","places":[{"placeId":"786017","name":"Thebes","startOffset":5,"endOffset":11}]},{"id":75,"text":"There is a place in Arabia not far from the town of Buto where I went to learn about the winged serpents. When I arrived there, I saw innumerable bones and backbones of serpents: many heaps of backbones, great and small and even smaller. [2] This place, where the backbones lay scattered, is where a narrow mountain pass opens into a great plain, which adjoins the plain of Egypt. [3] Winged serpents are said to fly from Arabia at the beginning of spring, making for Egypt; but the ibis birds encounter the invaders in this pass and kill them. [4] The Arabians say that the ibis is greatly honored by the Egyptians for this service, and the Egyptians give the same reason for honoring these birds.","places":[{"placeId":"29475","name":"Arabia","startOffset":20,"endOffset":26},{"placeId":"727095","name":"Buto","startOffset":52,"endOffset":56},{"placeId":"766","name":"Egypt","startOffset":374,"endOffset":379},{"placeId":"29475","name":"Arabia","startOffset":422,"endOffset":428},{"placeId":"766","name":"Egypt","startOffset":468,"endOffset":473},{"placeId":"29475","name":"Arabians","startOffset":553,"endOffset":561},{"placeId":"981503","name":"Egyptians","startOffset":606,"endOffset":615},{"placeId":"981503","name":"Egyptians","startOffset":642,"endOffset":651}]},{"id":76,"text":"Now this is the appearance of the ibis. It is all quite black, with the legs of a crane, and a beak sharply hooked, and is as big as a landrail. Such is the appearance of the ibis which fights with the serpents. Those that most associate with men (for there are two kinds of ibis36 ) [2] have the whole head and neck bare of feathers; their plumage is white, except the head and neck and wingtips and tail (these being quite black); the legs and beak of the bird are like those of the other ibis. The serpents are like water-snakes. [3] Their wings are not feathered but very like the wings of a bat.I have now said enough concerning creatures that are sacred.","places":[]},{"id":77,"text":"Among the Egyptians themselves, those who live in the cultivated country are the most assiduous of all men at preserving the memory of the past, and none whom I have questioned are so skilled in history. [2] They practice the following way of life. For three consecutive days in every month they purge themselves, pursuing health by means of emetics and drenches; for they think that it is from the food they eat that all sicknesses come to men. [3] Even without this, the Egyptians are the healthiest of all men, next to the Libyans; the explanation of which, in my opinion, is that the climate in all seasons is the same: for change is the great cause of men's falling sick, more especially changes of seasons. [4] They eat bread, making loaves which they call cyllestis,37 of coarse grain. For wine, they use a drink made from barley, for they have no vines in their country. They eat fish either raw and sun-dried, or preserved with brine. [5] Quails and ducks and small birds are salted and eaten raw; all other kinds of birds, as well as fish (except those that the Egyptians consider sacred) are eaten roasted or boiled.","places":[{"placeId":"981503","name":"Egyptians","startOffset":10,"endOffset":19},{"placeId":"981503","name":"Egyptians","startOffset":473,"endOffset":482},{"placeId":"716588","name":"Libyans","startOffset":526,"endOffset":533},{"placeId":"981503","name":"Egyptians","startOffset":1074,"endOffset":1083}]},{"id":78,"text":"After rich men's repasts, a man carries around an image in a coffin, painted and carved in exact imitation of a corpse two or four feet long. This he shows to each of the company, saying While you drink and enjoy, look on this; for to this state you must come when you die. Such is the custom at their symposia.","places":[]},{"id":79,"text":"They keep the customs of their fathers, adding none to them. Among other notable customs of theirs is this, that they have one song, the Linus-song,38 which is sung in Phoenicia and Cyprus and elsewhere; each nation has a name of its own for this, [2] but it happens to be the same song that the Greeks sing, and call Linus; so that of many things in Egypt that amaze me, one is: where did the Egyptians get Linus? Plainly they have always sung this song; but in Egyptian Linus is called Maneros.39 [3] The Egyptians told me that Maneros was the only son of their first king, who died prematurely, and this dirge was sung by the Egyptians in his honor; and this, they said, was their earliest and their only chant.","places":[{"placeId":"678334","name":"Phoenicia","startOffset":168,"endOffset":177},{"placeId":"707498","name":"Cyprus","startOffset":182,"endOffset":188},{"placeId":"766","name":"Egypt","startOffset":351,"endOffset":356},{"placeId":"981503","name":"Egyptians","startOffset":394,"endOffset":403},{"placeId":"981503","name":"Egyptian","startOffset":463,"endOffset":471},{"placeId":"981503","name":"Egyptians","startOffset":507,"endOffset":516},{"placeId":"981503","name":"Egyptians","startOffset":629,"endOffset":638}]},{"id":80,"text":"There is a custom, too, which no Greeks except the Lacedaemonians have in common with the Egyptians: younger men, encountering their elders, yield the way and stand aside, and rise from their seats for them when they approach. [2] But they are like none of the Greeks in this: passers-by do not address each other, but salute by lowering the hand to the knee.","places":[{"placeId":"570406","name":"Lacedaemonians","startOffset":51,"endOffset":65},{"placeId":"981503","name":"Egyptians","startOffset":90,"endOffset":99}]},{"id":81,"text":"They wear linen tunics with fringes hanging about the legs, called calasiris, and loose white woolen mantles over these. But nothing woolen is brought into temples, or buried with them: that is impious. [2] They agree in this with practices called Orphic and Bacchic, but in fact Egyptian and Pythagorean: for it is impious, too, for one partaking of these rites to be buried in woolen wrappings. There is a sacred legend about this.","places":[{"placeId":"981503","name":"Egyptian","startOffset":282,"endOffset":290}]},{"id":82,"text":"Other things originating with the Egyptians are these. Each month and day belong to one of the gods, and according to the day of one's birth are determined how one will fare and how one will end and what one will be like; those Greeks occupied with poetry exploit this. [2] More portents have been discovered by them than by all other peoples; when a portent occurs, they take note of the outcome and write it down; and if something of a like kind happens again, they think it will have a like result.","places":[{"placeId":"981503","name":"Egyptians","startOffset":34,"endOffset":43}]},{"id":83,"text":"As to the art of divination among them, it belongs to no man, but to some of the gods; there are in their country oracles of Heracles, Apollo, Athena, Artemis, Ares, and Zeus, and of Leto (the most honored of all) in the town of Buto. Nevertheless, they have several ways of divination, not just one.","places":[{"placeId":"727095","name":"Buto","startOffset":229,"endOffset":233}]},{"id":84,"text":"The practice of medicine is so specialized among them that each physician is a healer of one disease and no more. All the country is full of physicians, some of the eye, some of the teeth, some of what pertains to the belly, and some of internal diseases.","places":[]},{"id":85,"text":"They mourn and bury the dead like this: whenever a man of note is lost to his house by death, all the women of the house daub their faces or heads with mud; then they leave the corpse in the house and roam about the city lamenting, with their garments girt around them and their breasts showing, and with them all the women of their relatives; [2] elsewhere, the men lament, with garments girt likewise. When this is done, they take the dead body to be embalmed.","places":[]},{"id":86,"text":"There are men whose sole business this is and who have this special craft. [2] When a dead body is brought to them, they show those who brought it wooden models of corpses, painted likenesses; the most perfect way of embalming belongs, they say, to One whose name it would be impious for me to mention in treating such a matter; the second way, which they show, is less perfect than the first, and cheaper; and the third is the least costly of all. Having shown these, they ask those who brought the body in which way they desire to have it prepared. [3] Having agreed on a price, the bearers go away, and the workmen, left alone in their place, embalm the body. If they do this in the most perfect way, they first draw out part of the brain through the nostrils with an iron hook, and inject certain drugs into the rest. [4] Then, making a cut near the flank with a sharp knife of Ethiopian stone, they take out all the intestines, and clean the belly, rinsing it with palm wine and bruised spices; [5] they sew it up again after filling the belly with pure ground myrrh and casia and any other spices, except frankincense. After doing this, they conceal the body for seventy days, embalmed in saltpetre; no longer time is allowed for the embalming; [6] and when the seventy days have passed, they wash the body and wrap the whole of it in bandages of fine linen cloth, anointed with gum, which the Egyptians mostly use instead of glue; [7] then they give the dead man back to his friends. These make a hollow wooden figure like a man, in which they enclose the corpse, shut it up, and keep it safe in a coffin-chamber, placed erect against a wall.","places":[{"placeId":"39274","name":"Ethiopian stone","startOffset":882,"endOffset":897},{"placeId":"981503","name":"Egyptians","startOffset":1400,"endOffset":1409}]},{"id":87,"text":"That is how they prepare the dead in the most costly way;40 those who want the middle way and shun the costly, they prepare as follows. [2] The embalmers charge their syringes with cedar oil and fill the belly of the dead man with it, without making a cut or removing the intestines, but injecting the fluid through the anus and preventing it from running out; then they embalm the body for the appointed days; on the last day they drain the belly of the cedar oil which they put in before. [3] It has such great power as to bring out with it the internal organs and intestines all dissolved; meanwhile, the flesh is eaten away by the saltpetre, and in the end nothing is left of the body but hide and bones. Then the embalmers give back the dead body with no more ado.","places":[]},{"id":88,"text":"The third manner of embalming, the preparation of the poorer dead, is this: they cleanse the belly with a purge, embalm the body for the seventy days and then give it back to be taken away.","places":[]},{"id":89,"text":"Wives of notable men, and women of great beauty and reputation, are not at once given to the embalmers, but only after they have been dead for three or four days; [2] this is done to deter the embalmers from having intercourse with the women. For it is said that one was caught having intercourse with the fresh corpse of a woman, and was denounced by his fellow-workman.","places":[]},{"id":90,"text":"Anyone, Egyptian or foreigner, known to have been carried off by a crocodile or drowned by the river itself, must by all means be embalmed and wrapped as attractively as possible and buried in a sacred coffin by the people of the place where he is cast ashore; [2] none of his relatives or friends may touch him, but his body is considered something more than human, and is handled and buried by the priests of the Nile themselves.","places":[{"placeId":"981503","name":"Egyptian","startOffset":8,"endOffset":16},{"placeId":"727172","name":"Nile","startOffset":415,"endOffset":419}]},{"id":91,"text":"The Egyptians shun using Greek customs, and (generally speaking) the customs of all other peoples as well. Yet, though the rest are wary of this, there is a great city called Khemmis, in the Theban district, near the New City. [2] In this city is a square temple of Perseus son of Danae, in a grove of palm trees. Before this temple stand great stone columns; and at the entrance, two great stone statues. In the outer court there is a shrine with an image of Perseus standing in it. [3] The people of this Khemmis say that Perseus is seen often up and down this land, and often within the temple, and that the sandal he wears, which is four feet long, keeps turning up, and that when it does turn up, all Egypt prospers. [4] This is what they say; and their doings in honor of Perseus are Greek, inasmuch as they celebrate games that include every form of contest, and offer animals and cloaks and skins as prizes. [5] When I asked why Perseus appeared only to them, and why, unlike all other Egyptians, they celebrate games, they told me that Perseus was by lineage of their city; for Danaus and Lynceus, who travelled to Greece, were of Khemmis; and they traced descent from these down to Perseus. [6] They told how he came to Khemmis, too, when he came to Egypt for the reason alleged by the Greeks as wellnamely, to bring the Gorgon's head from Libyaand recognized all his relatives; and how he had heard the name of Khemmis from his mother before he came to Egypt. It was at his bidding, they said, that they celebrated the games.","places":[{"placeId":"981503","name":"Egyptians","startOffset":4,"endOffset":13},{"placeId":"756613","name":"Khemmis","startOffset":175,"endOffset":182},{"placeId":"786017","name":"Theban district","startOffset":191,"endOffset":206},{"placeId":"756613","name":"Khemmis","startOffset":507,"endOffset":514},{"placeId":"981503","name":"Egypt","startOffset":706,"endOffset":711},{"placeId":"geonames-390903","name":"Greek","startOffset":790,"endOffset":795},{"placeId":"981503","name":"Egyptians","startOffset":994,"endOffset":1003},{"placeId":"geonames-390903","name":"Greece","startOffset":1124,"endOffset":1130},{"placeId":"756613","name":"Khemmis","startOffset":1140,"endOffset":1147},{"placeId":"756613","name":"Khemmis","startOffset":1230,"endOffset":1237},{"placeId":"981503","name":"Egypt","startOffset":1260,"endOffset":1265},{"placeId":"geonames-390903","name":"Greeks","startOffset":1296,"endOffset":1302},{"placeId":"716588","name":"Libya","startOffset":1351,"endOffset":1356},{"placeId":"756613","name":"Khemmis","startOffset":1424,"endOffset":1431},{"placeId":"981503","name":"Egypt","startOffset":1466,"endOffset":1471}]},{"id":92,"text":"All these are the customs of Egyptians who live above the marsh country. Those who inhabit the marshes have the same customs as the rest of Egyptians, even that each man has one wife just like Greeks. They have, besides, devised means to make their food less costly. [2] When the river is in flood and flows over the plains, many lilies, which the Egyptians call lotus, grow in the water. They gather these and dry them in the sun; then they crush the poppy-like center of the plant and bake loaves of it. [3] The root of this lotus is edible also, and of a sweetish taste; it is round, and the size of an apple. [4] Other lilies grow in the river, too, that are like roses; the fruit of these is found in a calyx springing from the root by a separate stalk, and is most like a comb made by wasps; this produces many edible seeds as big as olive pits, which are eaten both fresh and dried. [5] They also use the byblus which grows annually: it is gathered from the marshes, the top of it cut off and put to other uses, and the lower part, about twenty inches long, eaten or sold. Those who wish to use the byblus at its very best, roast it before eating in a red-hot oven. Some live on fish alone. They catch the fish, take out the intestines, then dry them in the sun and eat them dried.","places":[{"placeId":"981503","name":"Egyptians","startOffset":29,"endOffset":38},{"placeId":"981503","name":"Egyptians","startOffset":140,"endOffset":149},{"placeId":"981503","name":"Egyptians","startOffset":348,"endOffset":357}]},{"id":93,"text":"Fish that go in schools are seldom born in rivers; they are raised in the lakes, and this is how they behave: when the desire of spawning comes on them, they swim out to sea in schools, the males leading, and throwing out their milt, while the females come after and swallow and conceive from it. [2] When the females have grown heavy in the sea, then all the fish swim back to their own haunts. But the same no longer lead; now the leadership goes to the females. They go before in a school as the males had, and now and then throw off some of their eggs (which are like millet-seeds), which the males devour as they follow. These millet-seeds, or eggs, are fish. [3] The fish that are reared come from the eggs that survive and are not devoured. Those fish that are caught while swimming seawards show bruises on the left side of their heads; those that are caught returning, on the right side. [4] This happens because they keep close to the left bank as they swim seawards, and keep to the same bank also on their return, grazing it and keeping in contact with it as well as they can, I suppose lest the current make them miss their way. [5] When the Nile begins to rise, hollow and marshy places near the river are the first to begin to fill, the water trickling through from the river, and as soon as they are flooded, they are suddenly full of little fishes. [6] Where these probably come from, I believe that I can guess. When the Nile falls, the fish have dropped their eggs into the mud before they leave with the last of the water; and when in the course of time the flood comes again in the following year, from these eggs at once come the fish.","places":[{"placeId":"727172","name":"Nile","startOffset":1155,"endOffset":1159},{"placeId":"727172","name":"Nile","startOffset":1439,"endOffset":1443}]},{"id":94,"text":"So much, then, for the fish. The Egyptians who live around the marshes use an oil drawn from the castor-berry, which they call kiki. They sow this plant, which grows wild in Hellas, on the banks of the rivers and lakes; [2] sown in Egypt, it produces abundant fruit, though malodorous; when they gather this, some bruise and press it, others boil after roasting it, and collect the liquid that comes from it. This is thick and useful as oil for lamps, and gives off a strong smell.","places":[{"placeId":"981503","name":"Egyptians","startOffset":33,"endOffset":42},{"placeId":"766","name":"Egypt","startOffset":232,"endOffset":237}]},{"id":95,"text":"Against the mosquitos that abound, the following have been devised by them: those who dwell higher up than the marshy country are well served by the towers where they ascend to sleep, for the winds prevent the mosquitos from flying aloft; [2] those living about the marshes have a different recourse, instead of the towers. Every one of them has a net, with which he catches fish by day, and at night he sets it around the bed where he rests, then creeps under it and sleeps. [3] If he sleeps wrapped in a garment or cloth, the mosquitos bite through it; but through the net they absolutely do not even venture.","places":[]},{"id":96,"text":"The boats in which they carry cargo are made of the acacia,41 which is most like the lotus of Cyrene in form, and its sap is gum. Of this tree they cut logs of four feet long and lay them like courses of bricks,42 and build the boat [2] by fastening these four foot logs to long and close-set stakes; and having done so, they set crossbeams athwart and on the logs. They use no ribs. They caulk the seams within with byblus. [3] There is one rudder, passing through a hole in the boat's keel. The mast is of acacia-wood and the sails of byblus. These boats cannot move upstream unless a brisk breeze continues; they are towed from the bank; but downstream they are managed thus: [4] they have a raft made of tamarisk wood, fastened together with matting of reeds, and a pierced stone of about two talents' weight; the raft is let go to float down ahead of the boat, connected to it by a rope, and the stone is connected by a rope to the after part of the boat. [5] So, driven by the current, the raft floats swiftly and tows the baris (which is the name of these boats,) and the stone dragging behind on the river bottom keeps the boat's course straight. There are many of these boats; some are of many thousand talents' burden.","places":[{"placeId":"373778","name":"Cyrene","startOffset":94,"endOffset":100}]},{"id":97,"text":"When the Nile overflows the land, only the towns are seen high and dry above the water, very like the islands in the Aegean sea. These alone stand out, the rest of Egypt being a sheet of water. So when this happens, folk are not ferried, as usual, in the course of the stream, but clean over the plain. [2] Indeed, the boat going up from Naucratis to Memphis passes close by the pyramids themselves, though the course does not go by here,43 but by the Delta's point and the town Cercasorus; but your voyage from the sea and Canobus to Naucratis will take you over the plain near the town of Anthylla and that which is called Arkhandrus' town.","places":[{"placeId":"727172","name":"Nile","startOffset":9,"endOffset":13},{"placeId":"560221","name":"Aegean","startOffset":117,"endOffset":123},{"placeId":"766","name":"Egypt","startOffset":164,"endOffset":169},{"placeId":"727169","name":"Naucratis","startOffset":338,"endOffset":347},{"placeId":"736963","name":"Memphis","startOffset":351,"endOffset":358},{"placeId":"727142","name":"Cercasorus","startOffset":479,"endOffset":489},{"placeId":"727097","name":"Canobus","startOffset":524,"endOffset":531},{"placeId":"727169","name":"Naucratis","startOffset":535,"endOffset":544},{"placeId":"727073","name":"Anthylla","startOffset":591,"endOffset":599},{"placeId":"727076","name":"Arkhandrus' town","startOffset":625,"endOffset":641}]},{"id":98,"text":"Anthylla is a town of some reputation, and is especially assigned to the consort of the reigning king of Egypt, to provide her shoes. This has been done since Egypt has been under Persian dominion. [2] The other town, I think, is named after Arkhandrus son of Phthius the Achaean, and son-in-law of Danaus; for it is called Arkhandrus' town. It may be that there was another Arkhandrus; but the name is not Egyptian.","places":[{"placeId":"727073","name":"Anthylla","startOffset":0,"endOffset":8},{"placeId":"766","name":"Egypt","startOffset":105,"endOffset":110},{"placeId":"766","name":"Egypt","startOffset":159,"endOffset":164},{"placeId":"geonames-130758","name":"Persian","startOffset":180,"endOffset":187},{"placeId":"981502","name":"Achaean","startOffset":272,"endOffset":279},{"placeId":"727076","name":"Arkhandrus' town","startOffset":324,"endOffset":340},{"placeId":"981503","name":"Egyptian","startOffset":407,"endOffset":415}]},{"id":99,"text":"So far, all I have said is the record of my own autopsy and judgment and inquiry. Henceforth I will record Egyptian chronicles, according to what I have heard, adding something of what I myself have seen. [2] The priests told me that Min was the first king of Egypt, and that first he separated Memphis from the Nile by a dam. All the river had flowed close under the sandy mountains on the Libyan side, but Min made the southern bend of it, which begins about twelve and one half miles above Memphis, by damming the stream, thereby drying up the ancient channel, and carried the river by a channel so that it flowed midway between the hills. [3] And to this day the Persians keep careful watch on this bend of the river, strengthening its dam every year to keep the current in; for were the Nile to burst its dikes and overflow here, all Memphis would be in danger of flooding. [4] Then, when this first king Min had made dry land of what he thus cut off, he first founded in it that city which is now called Memphis (for even Memphis lies in the narrow part of Egypt), and outside of it he dug a lake from the river to its north and west (for the Nile itself bounds it on the east); and secondly, he built in it the great and most noteworthy temple of Hephaestus.","places":[{"placeId":"981503","name":"Egyptian chronicles","startOffset":107,"endOffset":126},{"placeId":"981503","name":"Egypt","startOffset":260,"endOffset":265},{"placeId":"736963","name":"Memphis","startOffset":295,"endOffset":302},{"placeId":"727172","name":"Nile","startOffset":312,"endOffset":316},{"placeId":"716588","name":"Libyan","startOffset":391,"endOffset":397},{"placeId":"736963","name":"Memphis","startOffset":493,"endOffset":500},{"placeId":"geonames-130758","name":"Persians","startOffset":667,"endOffset":675},{"placeId":"727172","name":"Nile","startOffset":792,"endOffset":796},{"placeId":"736963","name":"Memphis","startOffset":839,"endOffset":846},{"placeId":"736963","name":"Memphis","startOffset":1010,"endOffset":1017},{"placeId":"736963","name":"Memphis","startOffset":1028,"endOffset":1035},{"placeId":"981503","name":"Egypt","startOffset":1063,"endOffset":1068},{"placeId":"727172","name":"Nile","startOffset":1149,"endOffset":1153}]},{"id":100,"text":"After him came three hundred and thirty kings, whose names the priests recited from a papyrus roll. In all these many generations there were eighteen Ethiopian kings, and one queen, native to the country; the rest were all Egyptian men. [2] The name of the queen was the same as that of the Babylonian princess, Nitocris. She, to avenge her brother (he was king of Egypt and was slain by his subjects, who then gave Nitocris the sovereignty) put many of the Egyptians to death by treachery. [3] She built a spacious underground chamber; then, with the pretence of inaugurating it, but with quite another intent in her mind, she gave a great feast, inviting to it those Egyptians whom she knew to have had the most complicity in her brother's murder; and while they feasted, she let the river in upon them by a vast secret channel. [4] This was all that the priests told of her, except that when she had done this she cast herself into a chamber full of hot ashes, to escape vengeance.","places":[{"placeId":"39274","name":"Ethiopian kings","startOffset":150,"endOffset":165},{"placeId":"981503","name":"Egyptian men","startOffset":223,"endOffset":235},{"placeId":"893951","name":"Babylonian princess","startOffset":291,"endOffset":310},{"placeId":"981503","name":"Egypt","startOffset":365,"endOffset":370},{"placeId":"981503","name":"Egyptians","startOffset":458,"endOffset":467},{"placeId":"981503","name":"Egyptians","startOffset":669,"endOffset":678}]},{"id":101,"text":"But of the other kings they related no achievement or act of great note, except of Moeris, the last of them. [2] This Moeris was remembered as having built the northern forecourt of the temple of Hephaestus, and dug a lake, of as great a circumference as I shall later indicate; and built pyramids there also, the size of which I will mention when I speak of the lake. All this was Moeris' work, they said; of none of the rest had they anything to record.","places":[]},{"id":102,"text":"Leaving the latter aside, then, I shall speak of the king who came after them, whose name was Sesostris44. [2] This king, the priests said, set out with a fleet of long ships45 from the Arabian Gulf and subjugated all those living by the Red Sea, until he came to a sea which was too shallow for his vessels. [3] After returning from there back to Egypt, he gathered a great army (according to the account of the priests) and marched over the mainland, subjugating every nation to which he came. [4] When those that he met were valiant men and strove hard for freedom, he set up pillars in their land, the inscription on which showed his own name and his country's, and how he had overcome them with his own power; [5] but when the cities had made no resistance and been easily taken, then he put an inscription on the pillars just as he had done where the nations were brave; but he also drew on them the private parts of a woman, wishing to show clearly that the people were cowardly.","places":[{"placeId":"29713","name":"Arabian Gulf","startOffset":186,"endOffset":198},{"placeId":"39290","name":"Red Sea","startOffset":238,"endOffset":245},{"placeId":"766","name":"Egypt","startOffset":348,"endOffset":353}]},{"id":103,"text":"He marched over the country doing this until he had crossed over from Asia to Europe and defeated the Scythians and Thracians. Thus far and no farther, I think, the Egyptian army went; for the pillars can be seen standing in their country, but in none beyond it. [2] From there, he turned around and went back home; and when he came to the Phasis river, that King, Sesostris, may have detached some part of his army and left it there to live in the country (for I cannot speak with exact knowledge), or it may be that some of his soldiers grew weary of his wanderings, and stayed by the Phasis.","places":[{"placeId":"1273","name":"Scythians","startOffset":102,"endOffset":111},{"placeId":"1001889","name":"Thracians","startOffset":116,"endOffset":125},{"placeId":"981503","name":"Egyptian army","startOffset":165,"endOffset":178},{"placeId":"857276","name":"Phasis","startOffset":340,"endOffset":346},{"placeId":"857276","name":"Phasis","startOffset":587,"endOffset":593}]},{"id":104,"text":"For it is plain to see that the Colchians are Egyptians; and what I say, I myself noted before I heard it from others. When it occurred to me, I inquired of both peoples; and the Colchians remembered the Egyptians better than the Egyptians remembered the Colchians; [2] the Egyptians said that they considered the Colchians part of Sesostris' army. I myself guessed it, partly because they are dark-skinned and woolly-haired; though that indeed counts for nothing, since other peoples are, too; but my better proof was that the Colchians and Egyptians and Ethiopians are the only nations that have from the first practised circumcision. [3] The Phoenicians and the Syrians of Palestine acknowledge that they learned the custom from the Egyptians, and the Syrians of the valleys of the Thermodon and the Parthenius, as well as their neighbors the Macrones, say that they learned it lately from the Colchians. These are the only nations that circumcise, and it is seen that they do just as the Egyptians. [4] But as to the Egyptians and Ethiopians themselves, I cannot say which nation learned it from the other; for it is evidently a very ancient custom. That the others learned it through traffic with Egypt, I consider clearly proved by this: that Phoenicians who traffic with Hellas cease to imitate the Egyptians in this matter and do not circumcise their children.","places":[{"placeId":"863770","name":"Colchians","startOffset":32,"endOffset":41},{"placeId":"981503","name":"Egyptians","startOffset":46,"endOffset":55},{"placeId":"863770","name":"Colchians","startOffset":179,"endOffset":188},{"placeId":"981503","name":"Egyptians","startOffset":204,"endOffset":213},{"placeId":"981503","name":"Egyptians","startOffset":230,"endOffset":239},{"placeId":"863770","name":"Colchians","startOffset":255,"endOffset":264},{"placeId":"981503","name":"Egyptians","startOffset":274,"endOffset":283},{"placeId":"863770","name":"Colchians","startOffset":314,"endOffset":323},{"placeId":"863770","name":"Colchians","startOffset":528,"endOffset":537},{"placeId":"981503","name":"Egyptians","startOffset":542,"endOffset":551},{"placeId":"39274","name":"Ethiopians","startOffset":556,"endOffset":566},{"placeId":"678334","name":"Phoenicians","startOffset":645,"endOffset":656},{"placeId":"1306","name":"Syrians","startOffset":665,"endOffset":672},{"placeId":"1001940","name":"Palestine","startOffset":676,"endOffset":685},{"placeId":"981503","name":"Egyptians","startOffset":736,"endOffset":745},{"placeId":"1306","name":"Syrians","startOffset":755,"endOffset":762},{"placeId":"857352","name":"Thermodon","startOffset":785,"endOffset":794},{"placeId":"845036","name":"Parthenius","startOffset":803,"endOffset":813},{"placeId":"857224","name":"Macrones","startOffset":846,"endOffset":854},{"placeId":"863770","name":"Colchians","startOffset":897,"endOffset":906},{"placeId":"981503","name":"Egyptians","startOffset":992,"endOffset":1001},{"placeId":"981503","name":"Egyptians","startOffset":1021,"endOffset":1030},{"placeId":"39274","name":"Ethiopians","startOffset":1035,"endOffset":1045},{"placeId":"981503","name":"Egypt","startOffset":1202,"endOffset":1207},{"placeId":"678334","name":"Phoenicians","startOffset":1249,"endOffset":1260},{"placeId":"981503","name":"Egyptians","startOffset":1306,"endOffset":1315}]},{"id":105,"text":"Listen to something else about the Colchians, in which they are like the Egyptians: they and the Egyptians alone work linen and have the same way of working it, a way peculiar to themselves; and they are alike in all their way of life, and in their speech. Linen has two names: the Colchian kind is called by the Greeks Sardonian46 ; that which comes from Egypt is called Egyptian.","places":[{"placeId":"863770","name":"Colchians","startOffset":35,"endOffset":44},{"placeId":"981503","name":"Egyptians","startOffset":73,"endOffset":82},{"placeId":"981503","name":"Egyptians","startOffset":97,"endOffset":106},{"placeId":"863770","name":"Colchian","startOffset":282,"endOffset":290},{"placeId":"472014","name":"Sardonian","startOffset":320,"endOffset":329},{"placeId":"981503","name":"Egypt","startOffset":356,"endOffset":361},{"placeId":"981503","name":"Egyptian","startOffset":372,"endOffset":380}]},{"id":106,"text":"As to the pillars that Sesostris, king of Egypt, set up in the countries, most of them are no longer to be seen. But I myself saw them in the Palestine district of Syria, with the aforesaid writing and the women's private parts on them. [2] Also, there are in Ionia two figures47 of this man carved in rock, one on the road from Ephesus to Phocaea, and the other on that from Sardis to Smyrna. [3] In both places, the figure is over twenty feet high, with a spear in his right hand and a bow in his left, and the rest of his equipment proportional; for it is both Egyptian and Ethiopian; [4] and right across the breast from one shoulder to the other a text is cut in the Egyptian sacred characters, saying: I myself won this land with the strength of my shoulders. There is nothing here to show who he is and whence he comes, but it is shown elsewhere. [5] Some of those who have seen these figures guess they are Memnon, but they are far indeed from the truth.","places":[{"placeId":"766","name":"Egypt","startOffset":42,"endOffset":47},{"placeId":"1001940","name":"Palestine","startOffset":142,"endOffset":151},{"placeId":"1306","name":"Syria","startOffset":164,"endOffset":169},{"placeId":"550597","name":"Ionia","startOffset":260,"endOffset":265},{"placeId":"599612","name":"Ephesus","startOffset":329,"endOffset":336},{"placeId":"550823","name":"Phocaea","startOffset":340,"endOffset":347},{"placeId":"550867","name":"Sardis","startOffset":376,"endOffset":382},{"placeId":"550893","name":"Smyrna","startOffset":386,"endOffset":392},{"placeId":"981503","name":"Egyptian","startOffset":564,"endOffset":572},{"placeId":"39274","name":"Ethiopian","startOffset":577,"endOffset":586},{"placeId":"981503","name":"Egyptian sacred characters","startOffset":672,"endOffset":698}]},{"id":107,"text":"Now when this Egyptian Sesostris (so the priests said) reached Daphnae of Pelusium on his way home, leading many captives from the peoples whose lands he had subjugated, his brother, whom he had left in charge in Egypt, invited him and his sons to a banquet and then piled wood around the house and set it on fire. [2] When Sesostris was aware of this, he at once consulted his wife, whom (it was said) he had with him; and she advised him to lay two of his six sons on the fire and make a bridge over the burning so that they could walk over the bodies of the two and escape. This Sesostris did; two of his sons were thus burnt but the rest escaped alive with their father.","places":[{"placeId":"981503","name":"Egyptian","startOffset":14,"endOffset":22},{"placeId":"727103","name":"Daphnae","startOffset":63,"endOffset":70},{"placeId":"727192","name":"Pelusium","startOffset":74,"endOffset":82},{"placeId":"981503","name":"Egypt","startOffset":213,"endOffset":218}]},{"id":108,"text":"After returning to Egypt, and avenging himself on his brother, Sesostris found work for the multitude which he brought with him from the countries which he had subdued. [2] It was these who dragged the great and long blocks of stone which were brought in this king's reign to the temple of Hephaestus; and it was they who were compelled to dig all the canals which are now in Egypt, and involuntarily made what had been a land of horses and carts empty of these. [3] For from this time Egypt, although a level land, could use no horses or carts, because there were so many canals going every which way. The reason why the king thus intersected the country was this: [4] those Egyptians whose towns were not on the Nile, but inland from it, lacked water whenever the flood left their land, and drank only brackish water from wells.","places":[{"placeId":"766","name":"Egypt","startOffset":19,"endOffset":24},{"placeId":"766","name":"Egypt","startOffset":376,"endOffset":381},{"placeId":"981503","name":"Egypt","startOffset":486,"endOffset":491},{"placeId":"981503","name":"Egyptians","startOffset":676,"endOffset":685},{"placeId":"727172","name":"Nile","startOffset":714,"endOffset":718}]},{"id":109,"text":"For this reason Egypt was intersected. This king also (they said) divided the country among all the Egyptians by giving each an equal parcel of land, and made this his source of revenue, assessing the payment of a yearly tax. [2] And any man who was robbed by the river of part of his land could come to Sesostris and declare what had happened; then the king would send men to look into it and calculate the part by which the land was diminished, so that thereafter it should pay in proportion to the tax originally imposed. [3] From this, in my opinion, the Greeks learned the art of measuring land; the sunclock and the sundial, and the twelve divisions of the day, came to Hellas from Babylonia and not from Egypt.","places":[{"placeId":"766","name":"Egypt","startOffset":16,"endOffset":21},{"placeId":"981503","name":"Egyptians","startOffset":100,"endOffset":109},{"placeId":"766","name":"Egypt","startOffset":711,"endOffset":716}]},{"id":110,"text":"Sesostris was the only Egyptian king who also ruled Ethiopia. To commemorate his name, he set before the temple of Hephaestus two stone statues, of himself and of his wife, each fifty feet high, and statues of his four sons, each thirty-three feet. [2] Long afterwards, Darius the Persian would have set up his statue before these; but the priest of Hephaestus forbade him, saying that he had achieved nothing equal to the deeds of Sesostris the Egyptian; for Sesostris (he said) had subjugated the Scythians, besides as many nations as Darius had conquered, and Darius had not been able to overcome the Scythians; [3] therefore, it was not just that Darius should set his statue before the statues of Sesostris, whose achievements he had not equalled. Darius, it is said, let the priest have his way.","places":[{"placeId":"981503","name":"Egyptian king","startOffset":23,"endOffset":36},{"placeId":"39274","name":"Ethiopia","startOffset":52,"endOffset":60},{"placeId":"geonames-130758","name":"Persian","startOffset":281,"endOffset":288},{"placeId":"981503","name":"Egyptian","startOffset":446,"endOffset":454},{"placeId":"1273","name":"Scythians","startOffset":499,"endOffset":508},{"placeId":"1273","name":"Scythia","startOffset":604,"endOffset":611}]},{"id":111,"text":"When Sesostris died, he was succeeded in the kingship (the priests said) by his son Pheros48. This king waged no wars, and chanced to become blind, for the following reason: the Nile came down in such a flood as there had never been, rising to a height of thirty feet, and the water that flowed over the fields was roughened by a strong wind; [2] then, it is said, the king was so audacious as to seize a spear and hurl it into the midst of the river eddies. Right after this, he came down with a disease of the eyes, and became blind. When he had been blind for ten years, an oracle from the city of Buto declared to him that the term of his punishment was drawing to an end, and that he would regain his sight by washing his eyes with the urine of a woman who had never had intercourse with any man but her own husband. [3] Pheros tried his own wife first; and, as he remained blind, all women, one after another. When he at last recovered his sight, he took all the women whom he had tried, except the one who had made him see again, and gathered them into one town, the one which is now called Red Clay; having concentrated them together there, he burnt them and the town; [4] but the woman by whose means he had recovered his sight, he married. Most worthy of mention among the many offerings which he dedicated in all the noteworthy temples for his deliverance from blindness are the two marvellous stone obelisks which he set up in the temple of the Sun. Each of these is made of a single block, and is over one hundred and sixty-six feet high and thirteen feet thick.","places":[{"placeId":"727172","name":"Nile","startOffset":178,"endOffset":182},{"placeId":"727095","name":"Buto","startOffset":601,"endOffset":605}]},{"id":112,"text":"Pheros was succeeded (they said) by a man of Memphis, whose name in the Greek tongue was Proteus. This Proteus has a very attractive and well-appointed temple precinct at Memphis, south of the temple of Hephaestus. [2] Around the precinct live Phoenicians of Tyre, and the whole place is called the Camp of the Tyrians. There is in the precinct of Proteus a temple called the temple of the Stranger Aphrodite; I guess this is a temple of Helen, daughter of Tyndarus, partly because I have heard the story of Helen's abiding with Proteus, and partly because it bears the name of the Foreign Aphrodite: for no other of Aphrodite's temples is called by that name.","places":[{"placeId":"736963","name":"Memphis","startOffset":45,"endOffset":52},{"placeId":"736963","name":"Memphis","startOffset":171,"endOffset":178},{"placeId":"678334","name":"Phoenicians","startOffset":244,"endOffset":255},{"placeId":"678437","name":"Tyre","startOffset":259,"endOffset":263},{"placeId":"730164","name":"Camp of the Tyrians","startOffset":299,"endOffset":318}]},{"id":113,"text":"When I inquired of the priests, they told me that this was the story of Helen. After carrying off Helen from Sparta, Alexandrus sailed away for his own country; violent winds caught him in the Aegean and drove him into the Egyptian sea; and from there (as the wind did not let up) he came to Egypt, to the mouth of the Nile called the Canopic mouth, and to the Salters'. [2] Now there was (and still is) on the coast a temple of Heracles; if a servant of any man takes refuge there and is branded with certain sacred marks, delivering himself to the god, he may not be touched. This law continues today the same as it has always been from the first. [3] Hearing of the temple law, some of Alexandrus' servants ran away from him, threw themselves on the mercy of the god, and brought an accusation against Alexandrus meaning to injure him, telling the whole story of Helen and the wrong done Menelaus. They laid this accusation before the priests and the warden of the Nile mouth, whose name was Thonis.","places":[{"placeId":"570685","name":"Sparta","startOffset":109,"endOffset":115},{"placeId":"560221","name":"Aegean","startOffset":193,"endOffset":199},{"placeId":"727067","name":"Egyptian sea","startOffset":223,"endOffset":235},{"placeId":"981503","name":"Egypt","startOffset":292,"endOffset":297},{"placeId":"727172","name":"Nile","startOffset":319,"endOffset":323},{"placeId":"211425281","name":"Canopic mouth","startOffset":335,"endOffset":348}]},{"id":114,"text":"When Thonis heard it, he sent this message the quickest way to Proteus at Memphis: [2] A stranger has come, a Trojan, who has committed an impiety in Hellas. After defrauding his guest-friend, he has come bringing the man's wife and a very great deal of wealth, driven to your country by the wind. Are we to let him sail away untouched, or are we to take away what he has come with? [3] Proteus sent back this message: Whoever this is who has acted impiously against his guest-friend, seize him and bring him to me, that I may know what he will say.","places":[{"placeId":"736963","name":"Memphis","startOffset":74,"endOffset":81}]},{"id":115,"text":"Hearing this, Thonis seized Alexandrus and detained his ships there, and then brought him with Helen and all the wealth, and the suppliants too, to Memphis. [2] When all had arrived, Proteus asked Alexandrus who he was and whence he sailed; Alexandrus told him his lineage and the name of his country, and about his voyage, whence he sailed. [3] Then Proteus asked him where he had got Helen; when Alexandrus was evasive in his story and did not tell the truth, the men who had taken refuge with the temple confuted him, and related the whole story of the wrong. [4] Finally, Proteus declared the following judgment to them, saying, If I did not make it a point never to kill a stranger who has been caught by the wind and driven to my coasts, I would have punished you on behalf of the Greek, you most vile man. You committed the gravest impiety after you had had your guest-friend's hospitality: you had your guest-friend's wife. [5] And as if this were not enough, you got her to fly with you and went off with her. And not just with her, either, but you plundered your guest-friend's wealth and brought it, too. [6] Now, then, since I make it a point not to kill strangers, I shall not let you take away this woman and the wealth, but I shall watch them for the Greek stranger, until he come and take them away; but as for you and your sailors, I warn you to leave my country for another within three days, and if you do not, I will declare war on you.","places":[{"placeId":"736963","name":"Memphis","startOffset":148,"endOffset":155}]},{"id":116,"text":"This, the priests said, was how Helen came to Proteus. And, in my opinion, Homer knew this story, too; but seeing that it was not so well suited to epic poetry as the tale of which he made use, he rejected it, showing that he knew it. [2] This is apparent from the passage in the Iliad (and nowhere else does he return to the story) where he relates the wanderings of Alexander, and shows how he and Helen were carried off course, and wandered to, among other places, Sidon in Phoenicia. [3] This is in the story of the Prowess of Diomedes, where the verses run as follows:There were the robes, all embroidered, The work of women of Sidon, whom godlike Alexandrus himself Brought from Sidon, crossing the broad sea, The same voyage on which he brought back Helen of noble descent. Hom. Il.","places":[{"placeId":"geonames-268064","name":"Sidon","startOffset":468,"endOffset":473},{"placeId":"678334","name":"Phoenicia","startOffset":477,"endOffset":486},{"placeId":"geonames-268064","name":"Sidon","startOffset":634,"endOffset":639},{"placeId":"geonames-268064","name":"Sidon","startOffset":686,"endOffset":691}]},{"id":117,"text":"These verses and this passage prove most clearly that the Cyprian poems are not the work of Homer but of someone else. For the Cyprian poems relate that Alexandrus reached Ilion with Helen in three days from Sparta, having a fair wind and a smooth sea; but according to the Iliad, he wandered from his course in bringing her.","places":[{"placeId":"550595","name":"Ilion","startOffset":172,"endOffset":177},{"placeId":"570685","name":"Sparta","startOffset":208,"endOffset":214}]},{"id":118,"text":"Enough, then, of Homer and the Cyprian poems. But, when I asked the priests whether the Greek account of what happened at Troy were idle or not, they gave me the following answer, saying that they had inquired and knew from Menelaus himself. [2] After the rape of Helen, a great force of Greeks came to the Trojan land on Menelaus' behalf. After disembarking and disposing their forces, they sent messengers to Ilion, one of whom was Menelaus himself. [3] When these were let inside the city walls, they demanded the restitution of Helen and of the property which Alexandrus had stolen from Menelaus and carried off, and they demanded reparation for the wrongs; but the Trojans gave the same testimony then and later, sworn and unsworn: that they did not have Helen or the property claimed, but all of that was in Egypt, and they could not justly make reparation for what Proteus the Egyptian had. [4] But the Greeks, thinking that the Trojans were mocking them, laid siege to the city, until they took it; but there was no Helen there when they breached the wall, but they heard the same account as before; so, crediting the original testimony, they sent Menelaus himself to Proteus.","places":[{"placeId":"550595","name":"Troy","startOffset":122,"endOffset":126},{"placeId":"550595","name":"Trojan land","startOffset":307,"endOffset":318},{"placeId":"550595","name":"Ilion","startOffset":411,"endOffset":416},{"placeId":"550595","name":"Trojans","startOffset":670,"endOffset":677},{"placeId":"766","name":"Egypt","startOffset":814,"endOffset":819},{"placeId":"981503","name":"Egyptian","startOffset":884,"endOffset":892},{"placeId":"550595","name":"Trojans","startOffset":936,"endOffset":943}]},{"id":119,"text":"Menelaus then went to Egypt and up the river to Memphis; there, relating the truth of the matter, he met with great hospitality and got back Helen, who had not been harmed, and also all his wealth, besides. [2] Yet, although getting this, Menelaus was guilty of injustice toward the Egyptians. For adverse weather detained him when he tried to sail away; after this continued for some time, he carried out something impious, [3] taking two native children and sacrificing them. When it became known that he had done this, he fled with his ships straight to Libya, hated and hunted; and where he went from there, the Egyptians could not say. The priests told me that they had learned some of this by inquiry, but that they were sure of what had happened in their own country.","places":[{"placeId":"766","name":"Egypt","startOffset":22,"endOffset":27},{"placeId":"736963","name":"Memphis","startOffset":48,"endOffset":55},{"placeId":"981503","name":"Egyptians","startOffset":283,"endOffset":292},{"placeId":"991375","name":"Libya","startOffset":557,"endOffset":562},{"placeId":"981503","name":"Egyptians","startOffset":616,"endOffset":625}]},{"id":120,"text":"The Egyptians' priests said this, and I myself believe their story about Helen, for I reason thus: had Helen been in Ilion, then with or without the will of Alexandrus she would have been given back to the Greeks. [2] For surely Priam was not so mad, or those nearest to him, as to consent to risk their own persons and their children and their city so that Alexandrus might cohabit with Helen. [3] Even if it were conceded that they were so inclined in the first days, yet when not only many of the Trojans were slain in fighting against the Greeks, but Priam himself lost to death two or three or even more of his sons in every battle (if the poets are to be believed), in this turn of events, had Helen been Priam's own wife, I cannot but think that he would have restored her to the Greeks, if by so doing he could escape from the evils besetting him. [4] Alexandrus was not even heir to the throne, in which case matters might have been in his hands since Priam was old, but Hector, who was an older and a better man than Alexandrus, was going to receive the royal power at Priam's death, and ought not have acquiesced in his brother's wrongdoing, especially when that brother was the cause of great calamity to Hector himself and all the rest of the Trojans. [5] But since they did not have Helen there to give back, and since the Greeks would not believe them although they spoke the truthI am convinced and declarethe divine powers provided that the Trojans, perishing in utter destruction, should make this clear to all mankind: that retribution from the gods for terrible wrongdoing is also terrible. This is what I think, and I state it.","places":[{"placeId":"981503","name":"Egyptians","startOffset":4,"endOffset":13},{"placeId":"550595","name":"Ilion","startOffset":117,"endOffset":122},{"placeId":"550595","name":"Trojans","startOffset":500,"endOffset":507},{"placeId":"550595","name":"Trojans","startOffset":1256,"endOffset":1263},{"placeId":"550595","name":"Trojans","startOffset":1460,"endOffset":1467}]},{"id":121,"text":"The next to reign after Proteus (they said) was Rhampsinitus. The memorial of his name left by him was the western forecourt of the temple of Hephaestus; he set two statues here forty-one feet high; the northernmost of these the Egyptians call Summer, and the southernmost Winter; the one that they call Summer they worship and treat well, but do the opposite to the statue called Winter. 121A. This king (they told me) had great wealth in silver, so great that none of the succeeding kings could surpass or come near it. To store his treasure safely, he had a stone chamber built, one of its walls abutting on the outer side of his palace. But the builder of it shrewdly provided that one stone be so placed as to be easily removed by two men or even by one. [2] So when the chamber was finished, the king stored his treasure in it, and as time went on, the builder, drawing near the end of his life, summoned his sons (he had two) and told them how he had provided for them, that they have an ample livelihood, by the art with which he had built the king's treasure-house; explaining clearly to them how to remove the stone, he gave the coordinates of it, and told them that if they kept these in mind, they would be the custodians of the king's riches. [3] So when he was dead, his sons got to work at once: coming to the palace by night, they readily found and managed the stone in the building, and took away much of the treasure. 121B. When the king opened the building, he was amazed to see the containers lacking their treasure; yet he did not know whom to accuse, seeing that the seals were unbroken and the building shut fast. But when less treasure appeared the second and third times he opened the building (for the thieves did not stop plundering), he had traps made and placed around the containers in which his riches were stored. [2] The thieves came just as before, and one of them crept in; when he came near the container, right away he was caught in the trap. When he saw the trouble he was in, he called to his brother right away and explained to him the problem, and told him to come in quickly and cut off his head, lest he be seen and recognized and destroy him, too. He seemed to have spoken rightly to the other, who did as he was persuaded and then, replacing the stone, went home, carrying his brother's head. 121C. When day came, the king went to the building, and was amazed to see in the trap the thief's body without a head, yet the building intact, with no way in or out. At a loss, he did as follows: he suspended the thief's body from the wall and set guards over it, instructing them to seize and bring to him any whom they saw weeping or making lamentation. [2]But the thief's mother, when the body had been hung up, was terribly stricken: she had words with her surviving son, and told him that he was somehow to think of some way to cut loose and bring her his brother's body, and if he did not obey, she threatened to go to the king and denounce him as having the treasure. 121D. So when his mother bitterly reproached the surviving son and for all that he said he could not dissuade her, he devised a plan: he harnessed asses and put skins full of wine on the asses, then set out driving them; and when he was near those who were guarding the hanging body, he pulled at the feet of two or three of the skins and loosed their fastenings; [2] and as the wine ran out, he beat his head and cried aloud like one who did not know to which ass he should turn first, while the guards, when they saw the wine flowing freely, ran out into the road with cups and caught what was pouring out, thinking themselves in luck; [3] feigning anger, the man cursed all; but as the guards addressed him peaceably, he pretended to be soothed and to relent in his anger, and finally drove his asses out of the road and put his harness in order. [4] And after more words passed and one joked with him and got him to laugh, he gave them one of the skins: and they lay down there just as they were, disposed to drink, and included him and told him to stay and drink with them; and he consented and stayed. [5] When they cheerily saluted him in their drinking, he gave them yet another of the skins; and the guards grew very drunk with the abundance of liquor, and lay down right there where they were drinking, overpowered by sleep; [6] but he, when it was late at night, cut down the body of his brother and shaved the right cheek of each of the guards for the indignity, and loading the body on his asses, drove home, fulfilling his mother's commands. 121E.When the king learned that the body of the thief had been taken, he was beside himself and, obsessed with finding who it was who had managed this, did as followsthey say, but I do not believe it. [2] He put his own daughter in a brothel, instructing her to accept all alike and, before having intercourse, to make each tell her the shrewdest and most impious thing he had done in his life; whoever told her the story of the thief, she was to seize and not let get out. [3] The girl did as her father told her, and the thief, learning why she was doing this, did as follows, wanting to get the better of the king by craft. [4] He cut the arm off a fresh corpse at the shoulder, and went to the king's daughter, carrying it under his cloak, and when asked the same question as the rest, he said that his most impious act had been when he had cut the head off his brother who was caught in a trap in the king's treasury; and his shrewdest, that after making the guards drunk he had cut down his brother's hanging body. [5] When she heard this, the princess grabbed for him; but in the darkness the thief let her have the arm of the corpse; and clutching it, she held on, believing that she had the arm of the other; but the thief, after giving it to her, was gone in a flash out the door. 121F.When this also came to the king's ears, he was astonished at the man's ingenuity and daring, and in the end, he sent a proclamation to every town, promising the thief immunity and a great reward if he would come into the king's presence. [2] The thief trusted the king and came before him; Rhampsinitus was very admiring and gave him his daughter to marry on the grounds that he was the cleverest of men; for as the Egyptians (he said) surpassed all others in craft, so he surpassed the Egyptians.","places":[{"placeId":"981503","name":"Egyptians","startOffset":229,"endOffset":238},{"placeId":"981503","name":"Egyptians","startOffset":6283,"endOffset":6292},{"placeId":"981503","name":"Egyptians","startOffset":6354,"endOffset":6363}]},{"id":122,"text":"They said that later this king went down alive to what the Greeks call Hades and there played dice with Demeter, and after winning some and losing some, came back with a gift from her of a golden hand towel. [2] From the descent of Rhampsinitus, when he came back, they said that the Egyptians celebrate a festival, which I know that they celebrate to this day, but whether this is why they celebrate, I cannot say. [3] On the day of the festival, the priests weave a cloth and bind it as a headband on the eyes of one of their number, whom they then lead, wearing the cloth, into a road that goes to the temple of Demeter; they themselves go back, but this priest with his eyes bandaged is guided (they say) by two wolves49 to Demeter's temple, a distance of three miles from the city, and led back again from the temple by the wolves to the same place.","places":[{"placeId":"981503","name":"Egyptians","startOffset":284,"endOffset":293}]},{"id":123,"text":"These Egyptian stories are for the benefit of whoever believes such tales: my rule in this history is that I record what is said by all as I have heard it. The Egyptians say that Demeter and Dionysus are the rulers of the lower world.50 [2] The Egyptians were the first who maintained the following doctrine, too, that the human soul is immortal, and at the death of the body enters into some other living thing then coming to birth; and after passing through all creatures of land, sea, and air, it enters once more into a human body at birth, a cycle which it completes in three thousand years. [3] There are Greeks who have used this doctrine, some earlier and some later, as if it were their own; I know their names, but do not record them.","places":[{"placeId":"981503","name":"Egyptian stories","startOffset":6,"endOffset":22},{"placeId":"981503","name":"Egyptians","startOffset":160,"endOffset":169},{"placeId":"981503","name":"Egyptians","startOffset":245,"endOffset":254}]},{"id":124,"text":"They said that Egypt until the time of King Rhampsinitus was altogether well-governed and prospered greatly, but that Kheops, who was the next king, brought the people to utter misery. For first he closed all the temples, so that no one could sacrifice there; and next, he compelled all the Egyptians to work for him. [2] To some, he assigned the task of dragging stones from the quarries in the Arabian mountains to the Nile; and after the stones were ferried across the river in boats, he organized others to receive and drag them to the mountains called Libyan. [3] They worked in gangs of a hundred thousand men, each gang for three months. For ten years the people wore themselves out building the road over which the stones were dragged, work which was in my opinion not much lighter at all than the building of the pyramid51 [4] (for the road is nearly a mile long and twenty yards wide, and elevated at its highest to a height of sixteen yards, and it is all of stone polished and carved with figures). The aforesaid ten years went to the building of this road and of the underground chambers in the hill where the pyramids stand; these, the king meant to be burial-places for himself, and surrounded them with water, bringing in a channel from the Nile. [5] The pyramid itself was twenty years in the making. Its base is square, each side eight hundred feet long, and its height is the same; the whole is of stone polished and most exactly fitted; there is no block of less than thirty feet in length.","places":[{"placeId":"766","name":"Egypt","startOffset":15,"endOffset":20},{"placeId":"981503","name":"Egyptians","startOffset":291,"endOffset":300},{"placeId":"736891","name":"Arabian mountains","startOffset":396,"endOffset":413},{"placeId":"727172","name":"Nile","startOffset":421,"endOffset":425},{"placeId":"736954","name":"Libyan","startOffset":557,"endOffset":563},{"placeId":"727172","name":"Nile","startOffset":1257,"endOffset":1261}]},{"id":125,"text":"This pyramid was made like stairs, which some call steps and others, tiers. [2] When this, its first form, was completed, the workmen used short wooden logs as levers to raise the rest of the stones52 ; they heaved up the blocks from the ground onto the first tier of steps; [3] when the stone had been raised, it was set on another lever that stood on the first tier, and the lever again used to lift it from this tier to the next. [4] It may be that there was a new lever on each tier of steps, or perhaps there was only one lever, quite portable, which they carried up to each tier in turn; I leave this uncertain, as both possibilities were mentioned. [5] But this is certain, that the upper part of the pyramid was finished off first, then the next below it, and last of all the base and the lowest part. [6] There are writings on53 the pyramid in Egyptian characters indicating how much was spent on radishes and onions and garlic for the workmen; and I am sure that, when he read me the writing, the interpreter said that sixteen hundred talents of silver had been paid. [7] Now if that is so, how much must have been spent on the iron with which they worked, and the workmen's food and clothing, considering that the time aforesaid was spent in building, while hewing and carrying the stone and digging out the underground parts was, as I suppose, a business of long duration.","places":[{"placeId":"981503","name":"Egyptian characters","startOffset":853,"endOffset":872}]},{"id":126,"text":"And so evil a man was Kheops that, needing money, he put his own daughter in a brothel and made her charge a fee (how much, they did not say). She did as her father told her, but was disposed to leave a memorial of her own, and asked of each coming to her that he give one stone; [2] and of these stones they said the pyramid was built that stands midmost of the three, over against the great pyramid; each side of it measures one hundred and fifty feet.","places":[]},{"id":127,"text":"The Egyptians said that this Kheops reigned for fifty years; at his death he was succeeded by his brother Khephren, who was in all respects like Kheops. Khephren also built a pyramid, smaller than his brother's. I have measured it myself. [2] It has no underground chambers, nor is it entered like the other by a canal from the Nile, but the river comes in through a built passage and encircles an island, in which, they say, Kheops himself lies. [3] This pyramid was built on the same scale as the other, except that it falls forty feet short of it in height; it stands near the great pyramid; the lowest layer of it is of variegated Ethiopian stone. Both of them stand on the same ridge, which is about a hundred feet high. Khephren, they said, reigned for fifty-six years.","places":[{"placeId":"981503","name":"Egyptians","startOffset":4,"endOffset":13},{"placeId":"727172","name":"Nile","startOffset":328,"endOffset":332},{"placeId":"39274","name":"Ethiopian stone","startOffset":635,"endOffset":650}]},{"id":128,"text":"Thus, they reckon that for a hundred and six years Egypt was in great misery and the temples so long shut were never opened. The people hate the memory of these two kings so much that they do not much wish to name them, and call the pyramids after the shepherd Philitis, who then pastured his flocks in this place54.","places":[{"placeId":"766","name":"Egypt","startOffset":51,"endOffset":56}]},{"id":129,"text":"The next king of Egypt, they said, was Kheops' son Mycerinus. Disliking his father's doings, he opened the temples and let the people, ground down to the depth of misery, go to their business and their sacrifices; and he was the most just judge among all the kings. [2] This is why he is praised above all the rulers of Egypt; for not only were his judgments just, but Mycerinus would give any who were not satisfied with the judgment a present out of his own estate to compensate him for his loss. [3] Though mild toward his people and conducting himself as he did, yet he suffered calamities, the first of which was the death of his daughter, the only child of his household. Deeply grieved over this misfortune, he wanted to give her a burial somewhat more sumptuous than ordinary; he therefore made a hollow cow's image of gilded wood and placed the body of his dead daughter therein.","places":[{"placeId":"766","name":"Egypt","startOffset":17,"endOffset":22},{"placeId":"766","name":"Egypt","startOffset":320,"endOffset":325}]},{"id":130,"text":"This cow was not buried in the earth but was to be seen even in my time, in the town of Sas, where it stood in a furnished room of the palace; incense of all kinds is offered daily before it, and a lamp burns by it all through every night. [2] Near this cow in another chamber statues of Mycerinus' concubines stand, so the priests of Sas said; and in fact there are about twenty colossal wooden figures there, made like naked women; but except what I was told, I cannot tell who these are.","places":[{"placeId":"727217","name":"Sas","startOffset":88,"endOffset":92},{"placeId":"727217","name":"Sas","startOffset":336,"endOffset":340}]},{"id":131,"text":"But some tell the following story about the cow and the statues: that Mycerinus conceived a passion for his own daughter and then had intercourse with her against her will; [2] and they say that afterwards the girl strangled herself for grief, and that he buried her in this cow, but that her mother cut off the hands of the attendants who had betrayed the daughter to her father, and that now their statues are in the same condition as the living women were. [3] But this I believe to be a silly story, especially about the hands of the figures. For in fact we ourselves saw that the hands have fallen off through age, and were lying at their feet even in my day.","places":[]},{"id":132,"text":"As for the cow, it is covered with a purple robe, only the head and neck exposed, encrusted with a very thick layer of gold. Between the horns is the golden figure of the sun's orb. [2] It does not stand, but kneels; it is as big as a live cow of great size. This image is carried out of the chamber once every year, whenever the Egyptians mourn the god whose name I omit in speaking of these matters: [3] then the cow is brought out into the light; for they say that before she died she asked her father, Mycerinus, that she see the sun once a year55.","places":[{"placeId":"981503","name":"Egyptians","startOffset":330,"endOffset":339}]},{"id":133,"text":"After what happened to his daughter, the following happened next to this king: an oracle came to him from the city of Buto, announcing that he had just six years to live and was to die in the seventh. [2] The king took this badly, and sent back to the oracle a message of reproach, blaming the god that his father and his uncle, though they had shut up the temples, and disregarded the gods, and destroyed men, had lived for a long time, but that he who was pious was going to die so soon. [3] But a second oracle came announcing that for this very reason his life was hastening to a close: he had done what was contrary to fate; Egypt should have been afflicted for a hundred and fifty years, and the two kings before him knew this, but not he. [4] Hearing this, Mycerinus knew that his doom was fixed. Therefore, he had many lamps made, and would light these at nightfall and drink and enjoy himself, not letting up day or night, roaming to the marsh country and the groves and wherever he heard of the likeliest places of pleasure. [5] This was his recourse, so that by turning night into day he might make his six years into twelve and so prove the oracle false.","places":[{"placeId":"727095","name":"Buto","startOffset":118,"endOffset":122},{"placeId":"766","name":"Egypt","startOffset":630,"endOffset":635}]},{"id":134,"text":"This king, too, left a pyramid, but far smaller than his father's, each side twenty feet short of three hundred feet long, square at the base, and as much as half its height of Ethiopian stone. Some Greeks say that it was built by Rhodopis, the courtesan, but they are wrong; [2] indeed, it is clear to me that they say this without even knowing who Rhodopis was (otherwise, they would never have credited her with the building of a pyramid on which what I may call an uncountable sum of money was spent), or that Rhodopis flourished in the reign of Amasis, not of Mycerinus; [3] for very many years later than these kings who left the pyramids came Rhodopis, who was Thracian by birth, and a slave of Iadmon son of Hephaestopolis the Samian, and a fellow-slave of Aesop the story-writer. For he was owned by Iadmon, too, as the following made crystal clear: [4] when the Delphians, obeying an oracle, issued many proclamations summoning anyone who wanted it to accept compensation for the killing of Aesop, no one accepted it except the son of Iadmon's son, another Iadmon; hence Aesop, too, was Iadmon's.","places":[{"placeId":"39274","name":"Ethiopian stone","startOffset":177,"endOffset":192},{"placeId":"1001889","name":"Thracian","startOffset":668,"endOffset":676},{"placeId":"599926","name":"Samian","startOffset":735,"endOffset":741},{"placeId":"540726","name":"Delphi","startOffset":872,"endOffset":878}]},{"id":135,"text":"Rhodopis came to Egypt to work, brought by Xanthes of Samos, but upon her arrival was freed for a lot of money by Kharaxus of Mytilene, son of Scamandronymus and brother of Sappho the poetess. [2] Thus Rhodopis lived as a free woman in Egypt, where, as she was very alluring, she acquired a lot of moneysufficient for such a Rhodopis, so to speak, but not for such a pyramid. [3] Seeing that to this day anyone who likes can calculate what one tenth of her worth was, she cannot be credited with great wealth. For Rhodopis desired to leave a memorial of herself in Greece, by having something made which no one else had thought of or dedicated in a temple and presenting this at Delphi to preserve her memory; [4] so she spent one tenth of her substance on the manufacture of a great number of iron beef spits, as many as the tenth would pay for, and sent them to Delphi; these lie in a heap to this day, behind the altar set up by the Chians and in front of the shrine itself. [5] The courtesans of Naucratis seem to be peculiarly alluring, for the woman of whom this story is told became so famous that every Greek knew the name of Rhodopis, and later on a certain Archidice was the theme of song throughout Greece, although less celebrated than the other. [6] Kharaxus, after giving Rhodopis her freedom, returned to Mytilene. He is bitterly attacked by Sappho in one of her poems. This is enough about Rhodopis.","places":[{"placeId":"766","name":"Egypt","startOffset":17,"endOffset":22},{"placeId":"599926","name":"Samos","startOffset":54,"endOffset":59},{"placeId":"550763","name":"Mytilene","startOffset":126,"endOffset":134},{"placeId":"766","name":"Egypt","startOffset":236,"endOffset":241},{"placeId":"geonames-390903","name":"Greece","startOffset":566,"endOffset":572},{"placeId":"540726","name":"Delphi","startOffset":680,"endOffset":686},{"placeId":"540726","name":"Delphi","startOffset":865,"endOffset":871},{"placeId":"550497","name":"Chians","startOffset":937,"endOffset":943},{"placeId":"727169","name":"Naucratis","startOffset":1001,"endOffset":1010},{"placeId":"geonames-390903","name":"Greece","startOffset":1211,"endOffset":1217},{"placeId":"550763","name":"Mytilene","startOffset":1321,"endOffset":1329}]},{"id":136,"text":"After Mycerinus, the priests said, Asukhis became king of Egypt. He built the eastern outer court of Hephaestus' temple; this is by far the finest and grandest of all the courts, for while all have carved figures and innumerable felicities of architecture, this court has far more than any. [2] As not much money was in circulation during this king's reign, they told me, a law was made for the Egyptians allowing a man to borrow on the security of his father's corpse; and the law also provided that the lender become master of the entire burial-vault of the borrower, and that the penalty for one giving this security, should he fail to repay the loan, was that he was not to be buried at his death either in that tomb of his fathers or in any other, nor was he to bury any relative of his there. [3] Furthermore, in his desire to excel all who ruled Egypt before him, this king left a pyramid of brick to commemorate his name, on which is this writing, cut on a stone: [4] Do not think me less than pyramids of stone; for I excel them as much as Zeus does other gods; for they stuck a pole down into a marsh and collected what mud clung to the pole, made bricks of it, and thus built me. These were the acts of Asukhis.","places":[{"placeId":"766","name":"Egypt","startOffset":58,"endOffset":63},{"placeId":"981503","name":"Egyptians","startOffset":395,"endOffset":404},{"placeId":"981503","name":"Egypt","startOffset":853,"endOffset":858}]},{"id":137,"text":"After him reigned a blind man called Anysis, of the town of that name. In his reign Egypt was invaded by Sabacos king of Ethiopia and a great army of Ethiopians.56 [2] The blind man fled to the marshes, and the Ethiopian ruled Egypt for fifty years, during which he distinguished himself for the following: [3] he would never put to death any Egyptian wrongdoer but sentenced all, according to the severity of their offenses, to raise embankments in their native towns. Thus the towns came to stand yet higher than before; [4] for after first being built on embankments made by the excavators of the canals in the reign of Sesostris, they were yet further raised in the reign of the Ethiopian. [5] Of the towns in Egypt that were raised, in my opinion, Bubastis is especially prominent, where there is also a temple of Bubastis, a building most worthy of note. Other temples are greater and more costly, but none more pleasing to the eye than this. Bubastis is, in the Greek language, Artemis.","places":[{"placeId":"730088","name":"Anysis, of the town of that name","startOffset":37,"endOffset":69},{"placeId":"766","name":"Egypt","startOffset":84,"endOffset":89},{"placeId":"39274","name":"Ethiopia","startOffset":121,"endOffset":129},{"placeId":"39274","name":"Ethiopians","startOffset":150,"endOffset":160},{"placeId":"39274","name":"Ethiopian","startOffset":211,"endOffset":220},{"placeId":"766","name":"Egypt","startOffset":227,"endOffset":232},{"placeId":"981503","name":"Egyptian","startOffset":343,"endOffset":351},{"placeId":"39274","name":"Ethiopian","startOffset":683,"endOffset":692},{"placeId":"981503","name":"Egypt","startOffset":714,"endOffset":719},{"placeId":"727088","name":"Bubastis","startOffset":753,"endOffset":761},{"placeId":"727088","name":"Bubastis","startOffset":819,"endOffset":827},{"placeId":"727088","name":"Bubastis","startOffset":949,"endOffset":957}]},{"id":138,"text":"Her temple is of this description: except for the entrance, it stands on an island; for two channels approach it from the Nile without mixing with one another, running as far as the entryway of the temple, the one and the other flowing around it, each a hundred feet wide and shaded by trees. [2] The outer court is sixty feet high, adorned with notable figures ten feet high. The whole circumference of the city commands a view down into the temple in its midst; for the city's level has been raised, but that of the temple has been left as it was from the first, so that it can be seen into from above. [3] A stone wall, cut with figures, runs around it; within is a grove of very tall trees growing around a great shrine where the image of the goddess is; the temple is a square, each side measuring an eighth of a mile. [4] A road, paved with stone, about three eighths of a mile long leads to the entrance, running eastward through the marketplace, towards the temple of Hermes; this road is about four hundred feet wide, and bordered by trees reaching to heaven. Such is this temple.","places":[{"placeId":"727172","name":"Nile","startOffset":122,"endOffset":126}]},{"id":139,"text":"Now the departure of the Ethiopian (they said) came about in this way. After seeing in a dream one who stood over him and urged him to gather together all the Priests in Egypt and cut them in half, he fled from the country. [2] Seeing this vision, he said, he supposed it to be a manifestation sent to him by the gods, so that he might commit sacrilege and so be punished by gods or men; he would not (he said) do so, but otherwise, for the time foretold for his rule over Egypt was now fulfilled, after which he was to depart: [3] for when he was still in Ethiopia, the oracles that are consulted by the people of that country told him that he was fated to reign fifty years over Egypt. Seeing that this time was now completed and that he was troubled by what he saw in his dream, Sabacos departed from Egypt of his own volition.","places":[{"placeId":"39274","name":"Ethiopian","startOffset":25,"endOffset":34},{"placeId":"766","name":"Egypt","startOffset":170,"endOffset":175},{"placeId":"766","name":"Egypt","startOffset":473,"endOffset":478},{"placeId":"39274","name":"Ethiopia","startOffset":557,"endOffset":565},{"placeId":"766","name":"Egypt","startOffset":681,"endOffset":686},{"placeId":"981503","name":"Egypt","startOffset":804,"endOffset":809}]},{"id":140,"text":"When the Ethiopian left Egypt, the blind man (it is said) was king once more, returning from the marshes where he had lived for fifty years on an island that he built of ashes and earth; for the Egyptians who were to bring him food without the Ethiopian's knowledge were instructed by the king to bring ashes whenever they came, to add to their gift. [2] This island was never discovered before the time of Amyrtaeus; all the kings before him sought it in vain for more than seven hundred years. The name of it is Elbo, and it is over a mile long and of an equal breadth.","places":[{"placeId":"39274","name":"Ethiopian","startOffset":9,"endOffset":18},{"placeId":"766","name":"Egypt","startOffset":24,"endOffset":29},{"placeId":"981503","name":"Egyptians","startOffset":195,"endOffset":204},{"placeId":"39274","name":"Ethiopian","startOffset":244,"endOffset":253},{"placeId":"730109","name":"Elbo","startOffset":514,"endOffset":518}]},{"id":141,"text":"The next king was the priest of Hephaestus whose name was Sethos. He despised and had no regard for the warrior Egyptians, thinking he would never need them; besides otherwise dishonoring them, he took away the chosen lands which had been given to them, twelve fields to each man, in the reign of former kings. [2] So when presently king Sanacharib57 came against Egypt, with a great force of Arabians and Assyrians, the warrior Egyptians would not march against him. [3] The priest, in this quandary, went into the temple shrine and there before the god's image bitterly lamented over what he expected to suffer. Sleep came on him while he was lamenting, and it seemed to him the god stood over him and told him to take heart, that he would come to no harm encountering the power of Arabia: I shall send you champions, said the god. [4] So he trusted the vision, and together with those Egyptians who would follow him camped at Pelusium, where the road comes into Egypt; and none of the warriors would go with him, but only merchants and craftsmen and traders. [5] Their enemies came there, too, and during the night were overrun by a horde of field mice58 that gnawed quivers and bows and the handles of shields, with the result that many were killed fleeing unarmed the next day. [6] And to this day a stone statue of the Egyptian king stands in Hephaestus' temple, with a mouse in his hand, and an inscription to this effect: Look at me, and believe.","places":[{"placeId":"981503","name":"Egyptians","startOffset":112,"endOffset":121},{"placeId":"981503","name":"Egypt","startOffset":364,"endOffset":369},{"placeId":"29475","name":"Arabians","startOffset":393,"endOffset":401},{"placeId":"29492","name":"Assyrians","startOffset":406,"endOffset":415},{"placeId":"981503","name":"Egyptians","startOffset":429,"endOffset":438},{"placeId":"29475","name":"Arabia","startOffset":784,"endOffset":790},{"placeId":"981503","name":"Egyptians","startOffset":890,"endOffset":899},{"placeId":"727192","name":"Pelusium","startOffset":931,"endOffset":939},{"placeId":"981503","name":"Egypt","startOffset":967,"endOffset":972},{"placeId":"981503","name":"Egyptian king","startOffset":1327,"endOffset":1340}]},{"id":142,"text":"Thus far went the record given by the Egyptians and their priests; and they showed me that the time from the first king to that priest of Hephaestus, who was the last, covered three hundred and forty-one generations, and that in this time this also had been the number of their kings, and of their high priests. [2] Now three hundred generations are ten thousand years, three generations being equal to a hundred. And over and above the three hundred, the remaining forty-one cover thirteen hundred and forty years. [3] Thus the whole period is eleven thousand three hundred and forty years; in all of which time (they said) they had had no king who was a god in human form, nor had there been any such either before or after those years among the rest of the kings of Egypt. [4] Four times in this period (so they told me) the sun rose contrary to experience; twice he came up where he now goes down, and twice went down where he now comes up; yet Egypt at these times underwent no change, either in the produce of the river and the land, or in the matter of sickness and death.","places":[{"placeId":"981503","name":"Egyptians","startOffset":38,"endOffset":47},{"placeId":"981503","name":"Egypt","startOffset":769,"endOffset":774},{"placeId":"981503","name":"Egypt","startOffset":949,"endOffset":954}]},{"id":143,"text":"Hecataeus59 the historian was once at Thebes , where he made a genealogy for himself that had him descended from a god in the sixteenth generation. But the priests of Zeus did with him as they also did with me (who had not traced my own lineage). [2] They brought me into the great inner court of the temple and showed me wooden figures there which they counted to the total they had already given, for every high priest sets up a statue of himself there during his lifetime; [3] pointing to these and counting, the priests showed me that each succeeded his father; they went through the whole line of figures, back to the earliest from that of the man who had most recently died. [4] Thus, when Hecataeus had traced his descent and claimed that his sixteenth forefather was a god, the priests too traced a line of descent according to the method of their counting; for they would not be persuaded by him that a man could be descended from a god; they traced descent through the whole line of three hundred and forty-five figures, not connecting it with any ancestral god or hero, but declaring each figure to be a Piromis the son of a Piromis; in Greek, one who is in all respects a good man.","places":[{"placeId":"786131","name":"Thebes","startOffset":38,"endOffset":44}]},{"id":144,"text":"Thus they showed that all those whose statues stood there had been good men, but quite unlike gods. [2] Before these men, they said, the rulers of Egypt were gods, but none had been contemporary with the human priests. Of these gods one or another had in succession been supreme; the last of them to rule the country was Osiris' son Horus, whom the Greeks call Apollo; he deposed Typhon,60 and was the last divine king of Egypt. Osiris is, in the Greek language, Dionysus.","places":[{"placeId":"766","name":"Egypt","startOffset":147,"endOffset":152},{"placeId":"766","name":"Egypt","startOffset":422,"endOffset":427}]},{"id":145,"text":"Among the Greeks, Heracles, Dionysus, and Pan are held to be the youngest of the gods. But in Egypt, Pan61 is the most ancient of these and is one of the eight gods who are said to be the earliest of all; Heracles belongs to the second dynasty (that of the so-called twelve gods); and Dionysus to the third, which came after the twelve. [2] How many years there were between Heracles and the reign of Amasis, I have already shown; Pan is said to be earlier still; the years between Dionysus and Amasis are the fewest, and they are reckoned by the Egyptians at fifteen thousand. [3] The Egyptians claim to be sure of all this, since they have reckoned the years and chronicled them in writing. [4] Now the Dionysus who was called the son of Semele, daughter of Cadmus, was about sixteen hundred years before my time, and Heracles son of Alcmene about nine hundred years; and Pan the son of Penelope (for according to the Greeks Penelope and Hermes were the parents of Pan) was about eight hundred years before me, and thus of a later date than the Trojan war.","places":[{"placeId":"766","name":"Egypt","startOffset":94,"endOffset":99},{"placeId":"981503","name":"Egyptians","startOffset":547,"endOffset":556},{"placeId":"981503","name":"Egyptians","startOffset":586,"endOffset":595}]},{"id":146,"text":"With regard to these two, Pan and Dionysus, one may follow whatever story one thinks most credible; but I give my own opinion concerning them here. Had Dionysus son of Semele and Pan son of Penelope appeared in Hellas and lived there to old age, like Heracles the son of Amphitryon, it might have been said that they too (like Heracles) were but men, named after the older Pan and Dionysus, the gods of antiquity; [2] but as it is, the Greek story has it that no sooner was Dionysus born than Zeus sewed him up in his thigh and carried him away to Nysa in Ethiopia beyond Egypt; and as for Pan, the Greeks do not know what became of him after his birth. It is therefore plain to me that the Greeks learned the names of these two gods later than the names of all the others, and trace the birth of both to the time when they gained the knowledge.","places":[{"placeId":"39274","name":"Ethiopia","startOffset":556,"endOffset":564},{"placeId":"766","name":"Egypt","startOffset":572,"endOffset":577}]},{"id":147,"text":"So far I have recorded what the Egyptians themselves say. I shall now relate what is recorded alike by Egyptians and foreigners, and shall add something of what I myself have seen. [2]After the reign of the priest of Hephaestus the Egyptians were made free. But they could never live without a king, so they divided Egypt into twelve districts and set up twelve kings. [3] These kings intermarried, and agreed to be close friends, no one deposing another or seeking to possess more than another. [4] The reason for this agreement, which they scrupulously kept, was this: no sooner were they established in their districts than an oracle was given them that whichever of them poured a libation from a bronze vessel in the temple of Hephaestus (where, as in all the temples, they used to assemble) would be king of all Egypt.","places":[{"placeId":"981503","name":"Egyptians","startOffset":32,"endOffset":41},{"placeId":"981503","name":"Egyptians","startOffset":103,"endOffset":112},{"placeId":"981503","name":"Egyptians","startOffset":232,"endOffset":241},{"placeId":"981503","name":"Egypt","startOffset":316,"endOffset":321},{"placeId":"981503","name":"Egypt","startOffset":817,"endOffset":822}]},{"id":148,"text":"Moreover, they decided to preserve the memory of their names by a common memorial, and so they made a labyrinth62 a little way beyond lake Moeris and near the place called the City of Crocodiles. I have seen it myself, and indeed words cannot describe it;63 [2] if one were to collect the walls and evidence of other efforts of the Greeks, the sum would not amount to the labor and cost of this labyrinth. And yet the temple at Ephesus and the one on Samos are noteworthy. [3] Though the pyramids beggar description and each one of them is a match for many great monuments built by Greeks, this maze surpasses even the pyramids. [4] It has twelve roofed courts with doors facing each other: six face north and six south, in two continuous lines, all within one outer wall. There are also double sets of chambers, three thousand altogether, fifteen hundred above and the same number under ground. [5] We ourselves viewed those that are above ground, and speak of what we have seen, but we learned through conversation about the underground chambers; the Egyptian caretakers would by no means show them, as they were, they said, the burial vaults of the kings who first built this labyrinth, and of the sacred crocodiles. [6] Thus we can only speak from hearsay of the lower chambers; the upper we saw for ourselves, and they are creations greater than human. The exits of the chambers and the mazy passages hither and thither through the courts were an unending marvel to us as we passed from court to apartment and from apartment to colonnade, from colonnades again to more chambers and then into yet more courts. [7] Over all this is a roof, made of stone like the walls, and the walls are covered with cut figures, and every court is set around with pillars of white stone very precisely fitted together. Near the corner where the labyrinth ends stands a pyramid two hundred and forty feet high, on which great figures are cut. A passage to this has been made underground.","places":[{"placeId":"736967","name":"lake Moeris","startOffset":134,"endOffset":145},{"placeId":"786055","name":"City of Crocodiles","startOffset":176,"endOffset":194},{"placeId":"599612","name":"Ephesus","startOffset":428,"endOffset":435},{"placeId":"599926","name":"Samos","startOffset":451,"endOffset":456},{"placeId":"981503","name":"Egyptian caretakers","startOffset":1053,"endOffset":1072}]},{"id":149,"text":"Such is this labyrinth; and still more marvellous is lake Moeris, on which it stands. This lake has a circumference of four hundred and fifty miles, or sixty schoeni: as much as the whole seaboard of Egypt. Its length is from north to south; the deepest part has a depth of fifty fathoms. [2] That it has been dug out and made by men's hands the lake shows for itself; for almost in the middle of it stand two pyramids, so built that fifty fathoms of each are below and fifty above the water; atop each is a colossal stone figure seated on a throne. [3] Thus these pyramids are a hundred fathoms high; and a hundred fathoms equal a furlong of six hundred feet, the fathom measuring six feet or four cubits, the foot four spans and the cubit six spans. [4] The water of the lake is not natural (for the country here is exceedingly arid) but brought by a channel from the Nile; six months it flows into the lake, and six back into the river. [5] For the six months that it flows out of the lake, the daily take of fish brings a silver talent into the royal treasury, and twenty minae for each day of the flow into the lake.","places":[{"placeId":"736967","name":"lake Moeris","startOffset":53,"endOffset":64},{"placeId":"766","name":"Egypt","startOffset":200,"endOffset":205},{"placeId":"727172","name":"Nile","startOffset":870,"endOffset":874}]},{"id":150,"text":"Furthermore, the natives said that this lake drains underground into the Libyan Syrtis, and extends under the mountains that are above Memphis, having the inland country on its west. [2] When I could not see anywhere the earth taken from the digging of this lake, since this was curious to me, I asked those who live nearest the lake where the stuff was that had been dug out. They told me where it had been carried, and I readily believed them, for I had heard of a similar thing happening in the Assyrian city of Ninus. [3] Sardanapallus king of Ninus had great wealth, which he kept in an underground treasury. Some thieves plotted to carry it off; they surveyed their course and dug an underground way from their own house to the palace, carrying the earth taken out of the passage dug by night to the Tigris, which runs past Ninus, until at last they accomplished their end. [4] This, I was told, had happened when the Egyptian lake was dug, except that the work went on not by night but by day. The Egyptians bore the earth dug out by them to the Nile, to be caught and scattered (as was to be expected) by the river. Thus is this lake said to have been dug.","places":[{"placeId":"716588","name":"Libyan","startOffset":73,"endOffset":79},{"placeId":"344491","name":"Syrtis","startOffset":80,"endOffset":86},{"placeId":"736963","name":"Memphis","startOffset":135,"endOffset":142},{"placeId":"29492","name":"Assyrian city","startOffset":498,"endOffset":511},{"placeId":"874621","name":"Ninus","startOffset":515,"endOffset":520},{"placeId":"874621","name":"Ninus","startOffset":548,"endOffset":553},{"placeId":"912964","name":"Tigris","startOffset":806,"endOffset":812},{"placeId":"874621","name":"Ninus","startOffset":830,"endOffset":835},{"placeId":"981503","name":"Egyptian lake","startOffset":924,"endOffset":937},{"placeId":"981503","name":"Egyptians","startOffset":1005,"endOffset":1014},{"placeId":"727172","name":"Nile","startOffset":1053,"endOffset":1057}]},{"id":151,"text":"Now the twelve kings were just, and in time came to sacrifice in Hephaestus' temple. On the last day of the feast, as they were about to pour libations, the high priest brought out the golden vessels which they commonly used for this; but he counted wrongly and had only eleven for the twelve. [2] So the last in line, Psammetichus, as he had no vessel, took off his bronze helmet and held it out and poured the libation with it. All the kings were accustomed to wear helmets, and were then helmeted; [3] it was not in guile, then, that Psammetichus held out his headgear; but the rest perceived what Psammetichus had done, and remembered the oracle that promised the sovereignty of all Egypt to whoever poured a libation from a vessel of bronze; therefore, though they considered Psammetichus not deserving of death (for they examined him and found that he had acted without intent), they decided to strip him of most of his power and to chase him away into the marshes, and that he was not to concern himself with the rest of Egypt.","places":[{"placeId":"766","name":"Egypt","startOffset":687,"endOffset":692},{"placeId":"766","name":"Egypt","startOffset":1028,"endOffset":1033}]},{"id":152,"text":"This Psammetichus had formerly been in exile in Syria, where he had fled from Sabacos the Ethiopian, who killed his father Necos; then, when the Ethiopian departed because of what he saw in a dream, the Egyptians of the district of Sas brought him back from Syria. [2] Psammetichus was king for the second time when he found himself driven away into the marshes by the eleven kings because of the helmet. [3] Believing, therefore, that he had been abused by them, he meant to be avenged on those who had expelled him. He sent to inquire in the town of Buto, where the most infallible oracle in Egypt is; the oracle answered that he would have vengeance when he saw men of bronze coming from the sea. [4] Psammetichus did not in the least believe that men of bronze would come to aid him. But after a short time, Ionians and Carians, voyaging for plunder, were forced to put in on the coast of Egypt, where they disembarked in their armor of bronze; and an Egyptian came into the marsh country and brought news to Psammetichus (for he had never before seen armored men) that men of bronze had come from the sea and were foraging in the plain. [5] Psammetichus saw in this the fulfillment of the oracle; he made friends with the Ionians and Carians, and promised them great rewards if they would join him and, having won them over, deposed the eleven kings with these allies and those Egyptians who volunteered.","places":[{"placeId":"1306","name":"Syria","startOffset":48,"endOffset":53},{"placeId":"39274","name":"Ethiopian","startOffset":90,"endOffset":99},{"placeId":"39274","name":"Ethiopian","startOffset":145,"endOffset":154},{"placeId":"981503","name":"Egyptians","startOffset":203,"endOffset":212},{"placeId":"727217","name":"Sas","startOffset":232,"endOffset":236},{"placeId":"1306","name":"Syria","startOffset":259,"endOffset":264},{"placeId":"727095","name":"Buto","startOffset":553,"endOffset":557},{"placeId":"981503","name":"Egypt","startOffset":595,"endOffset":600},{"placeId":"550597","name":"Ionians","startOffset":813,"endOffset":820},{"placeId":"991381","name":"Carians","startOffset":825,"endOffset":832},{"placeId":"981503","name":"Egypt","startOffset":894,"endOffset":899},{"placeId":"981503","name":"Egypt","startOffset":957,"endOffset":962},{"placeId":"550597","name":"Ionians","startOffset":1228,"endOffset":1235},{"placeId":"991381","name":"Carians","startOffset":1240,"endOffset":1247},{"placeId":"981503","name":"Egyptians","startOffset":1384,"endOffset":1393}]},{"id":153,"text":"Having made himself master of all Egypt, he made the southern outer court of Hephaestus' temple at Memphis, and built facing this a court for Apis, where Apis is kept and fed whenever he appears; this court has an inner colonnade all around it and many cut figures; the roof is held up by great statues twenty feet high for pillars. Apis in Greek is Epaphus.","places":[{"placeId":"766","name":"Egypt","startOffset":34,"endOffset":39},{"placeId":"736963","name":"Memphis","startOffset":99,"endOffset":106}]},{"id":154,"text":"To the Ionians and Carians who had helped him, Psammetichus gave places to live in called The Camps, opposite each other on either side of the Nile; and besides this, he paid them all that he had promised. [2] Moreover, he put Egyptian boys in their hands to be taught Greek, and from these, who learned the language, are descended the present-day Egyptian interpreters. [3] The Ionians and Carians lived for a long time in these places, which are near the sea, on the arm of the Nile called the Pelusian, a little way below the town of Bubastis. Long afterwards, king Amasis removed them and settled them at Memphis to be his guard against the Egyptians. [4] It is a result of our communication with these settlers in Egypt (the first of foreign speech to settle in that country) that we Greeks have exact knowledge of the history of Egypt from the reign of Psammetichus onwards. [5] There still remained in my day, in the places out of which the Ionians and Carians were turned, the winches64 for their ships and the ruins of their houses. This is how Psammetichus got Egypt.","places":[{"placeId":"550597","name":"Ionians","startOffset":7,"endOffset":14},{"placeId":"991381","name":"Carians","startOffset":19,"endOffset":26},{"placeId":"730116","name":"The Camps","startOffset":90,"endOffset":99},{"placeId":"727172","name":"Nile","startOffset":143,"endOffset":147},{"placeId":"981503","name":"Egyptian boys","startOffset":227,"endOffset":240},{"placeId":"981503","name":"Egyptian interpreters","startOffset":348,"endOffset":369},{"placeId":"550597","name":"Ionians","startOffset":379,"endOffset":386},{"placeId":"991381","name":"Carians","startOffset":391,"endOffset":398},{"placeId":"727172","name":"Nile","startOffset":480,"endOffset":484},{"placeId":"727192","name":"Pelusian","startOffset":496,"endOffset":504},{"placeId":"727088","name":"Bubastis","startOffset":537,"endOffset":545},{"placeId":"736963","name":"Memphis","startOffset":609,"endOffset":616},{"placeId":"981503","name":"Egyptians","startOffset":645,"endOffset":654},{"placeId":"981503","name":"Egypt","startOffset":719,"endOffset":724},{"placeId":"981503","name":"Egypt","startOffset":835,"endOffset":840},{"placeId":"550597","name":"Ionians","startOffset":948,"endOffset":955},{"placeId":"991381","name":"Carians","startOffset":960,"endOffset":967},{"placeId":"981503","name":"Egypt","startOffset":1071,"endOffset":1076}]},{"id":155,"text":"I have often mentioned the Egyptian oracle, and shall give an account of this, as it deserves. This oracle is sacred to Leto, and is situated in a great city by the Sebennytic arm of the Nile, on the way up from the sea. [2] Buto is the name of the city where this oracle is; I have already mentioned it. In Buto there is a temple of Apollo and Artemis. The shrine of Leto where the oracle is, is itself very great, and its outer court is sixty feet high. [3] But what caused me the most wonder among the things apparent there I shall mention. In this precinct is the shrine of Leto, the height and length of whose walls is all made of a single stone slab; each wall has an equal length and height; namely, seventy feet. Another slab makes the surface of the roof, the cornice of which is seven feet broad.","places":[{"placeId":"716520","name":"Egyptian oracle","startOffset":27,"endOffset":42},{"placeId":"727225","name":"Sebennytic arm","startOffset":165,"endOffset":179},{"placeId":"727172","name":"Nile","startOffset":187,"endOffset":191},{"placeId":"727095","name":"Buto","startOffset":225,"endOffset":229},{"placeId":"727095","name":"Buto","startOffset":308,"endOffset":312}]},{"id":156,"text":"Thus, then, the shrine is the most marvellous of all the things that I saw in this temple; but of things of second rank, the most wondrous is the island called Khemmis. [2] This lies in a deep and wide lake near the temple at Buto, and the Egyptians say that it floats. I never saw it float, or move at all, and I thought it a marvellous tale, that an island should truly float. [3] However that may be, there is a great shrine of Apollo on it, and three altars stand there; many palm trees grow on the island, and other trees too, some yielding fruit and some not. [4] This is the story that the Egyptians tell to explain why the island moves: that on this island that did not move before, Leto, one of the eight gods who first came to be, who was living at Buto where this oracle of hers is, taking charge of Apollo from Isis, hid him for safety in this island which is now said to float, when Typhon came hunting through the world, keen to find the son of Osiris. [5] Apollo and Artemis were (they say) children of Dionysus and Isis, and Leto was made their nurse and preserver; in Egyptian, Apollo is Horus, Demeter Isis, Artemis Bubastis. [6] It was from this legend and no other that Aeschylus son of Euphorion took a notion which is in no poet before him: that Artemis was the daughter of Demeter. For this reason the island was made to float. So they say.","places":[{"placeId":"756613","name":"Khemmis","startOffset":160,"endOffset":167},{"placeId":"727095","name":"Buto","startOffset":226,"endOffset":230},{"placeId":"981503","name":"Egyptians","startOffset":240,"endOffset":249},{"placeId":"981503","name":"Egyptians","startOffset":597,"endOffset":606},{"placeId":"727095","name":"Buto","startOffset":759,"endOffset":763},{"placeId":"981503","name":"Egyptian","startOffset":1085,"endOffset":1093},{"placeId":"727088","name":"Bubastis","startOffset":1134,"endOffset":1142}]},{"id":157,"text":"Psammetichus ruled Egypt for fifty-three years, twenty-nine of which he spent before Azotus, a great city in Syria, besieging it until he took it. Azotus held out against a siege longer than any city of which we know.","places":[{"placeId":"766","name":"Egypt","startOffset":19,"endOffset":24},{"placeId":"687843","name":"Azotus","startOffset":85,"endOffset":91},{"placeId":"1306","name":"Syria","startOffset":109,"endOffset":114},{"placeId":"687843","name":"Azotus","startOffset":147,"endOffset":153}]},{"id":158,"text":"Psammetichus had a son, Necos, who became king of Egypt. It was he who began building the canal into the Red Sea,65 which was finished by Darius the Persian. This is four days' voyage in length, and it was dug wide enough for two triremes to move in it rowed abreast. [2] It is fed by the Nile, and is carried from a little above Bubastis by the Arabian town of Patumus; it issues into the Red Sea. Digging began in the part of the Egyptian plain nearest to Arabia; the mountains that extend to Memphis (the mountains where the stone quarries are) come close to this plain; [3] the canal is led along the foothills of these mountains in a long reach from west to east; passing then into a ravine, it bears southward out of the hill country towards the Arabian Gulf. [4] Now the shortest and most direct passage from the northern to the southern or Red Sea is from the Casian promontory, the boundary between Egypt and Syria, to the Arabian Gulf, and this is a distance of one hundred and twenty five miles, neither more nor less; [5] this is the most direct route, but the canal is far longer, inasmuch as it is more crooked. In Necos' reign, a hundred and twenty thousand Egyptians died digging it. Necos stopped work, stayed by a prophetic utterance that he was toiling beforehand for the barbarian. The Egyptians call all men of other languages barbarians.","places":[{"placeId":"766","name":"Egypt","startOffset":50,"endOffset":55},{"placeId":"39290","name":"Red Sea","startOffset":105,"endOffset":112},{"placeId":"geonames-130758","name":"Persian","startOffset":149,"endOffset":156},{"placeId":"727172","name":"Nile","startOffset":289,"endOffset":293},{"placeId":"727088","name":"Bubastis","startOffset":330,"endOffset":338},{"placeId":"29475","name":"Arabian town","startOffset":346,"endOffset":358},{"placeId":"727124","name":"Patumus","startOffset":362,"endOffset":369},{"placeId":"39290","name":"Red Sea","startOffset":390,"endOffset":397},{"placeId":"981503","name":"Egyptian plain","startOffset":432,"endOffset":446},{"placeId":"29475","name":"Arabia","startOffset":458,"endOffset":464},{"placeId":"736963","name":"Memphis","startOffset":495,"endOffset":502},{"placeId":"29713","name":"Arabian Gulf","startOffset":752,"endOffset":764},{"placeId":"39290","name":"Red Sea","startOffset":848,"endOffset":855},{"placeId":"687872","name":"Casian promontory","startOffset":868,"endOffset":885},{"placeId":"766","name":"Egypt","startOffset":908,"endOffset":913},{"placeId":"1306","name":"Syria","startOffset":918,"endOffset":923},{"placeId":"29713","name":"Arabian Gulf","startOffset":932,"endOffset":944},{"placeId":"981503","name":"Egyptians","startOffset":1173,"endOffset":1182},{"placeId":"981503","name":"Egyptians","startOffset":1306,"endOffset":1315}]},{"id":159,"text":"Necos, then, stopped work on the canal and engaged in preparations for war; some of his ships of war were built on the northern sea, and some in the Arabian Gulf, by the Red Sea coast: the winches for landing these can still be seen. [2] He used these ships when needed, and with his land army met and defeated the Syrians at Magdolus,66 taking the great Syrian city of Cadytis67 after the battle. [3] He sent to Branchidae of Miletus and dedicated there to Apollo the garments in which he won these victories. Then he died after a reign of sixteen years, and his son Psammis reigned in his place.","places":[{"placeId":"29713","name":"Arabian Gulf","startOffset":149,"endOffset":161},{"placeId":"39290","name":"Red Sea","startOffset":170,"endOffset":177},{"placeId":"1306","name":"Syrians","startOffset":315,"endOffset":322},{"placeId":"727152","name":"Magdolus","startOffset":326,"endOffset":334},{"placeId":"1306","name":"Syrian city","startOffset":355,"endOffset":366},{"placeId":"687902","name":"Cadytis","startOffset":370,"endOffset":377},{"placeId":"599799","name":"Miletus","startOffset":427,"endOffset":434}]},{"id":160,"text":"While this Psammis was king of Egypt, he was visited by ambassadors from Elis, the Eleans boasting that they had arranged the Olympic games with all the justice and fairness in the world, and claiming that even the Egyptians, although the wisest of all men, could not do better. [2] When the Eleans came to Egypt and announced why they had come, Psammis assembled the Egyptians reputed to be wisest. These assembled and learned all that the Eleans were to do regarding the games; after explaining this, the Eleans said that they had come to learn whether the Egyptians could discover any juster way. [3] The Egyptians deliberated, and then asked the Eleans if their own citizens took part in the contests. The Eleans answered that they did: all Greeks from Elis or elsewhere might contend. [4] Then the Egyptians said that in establishing this rule they fell short of complete fairness: For there is no way that you will not favor your own townsfolk in the contest and wrong the stranger; if you wish in fact to make just rules and have come to Egypt for that reason, you should admit only strangers to the contest, and not Eleans. Such was the counsel of the Egyptians to the Eleans.","places":[{"placeId":"766","name":"Egypt","startOffset":31,"endOffset":36},{"placeId":"570221","name":"Elis","startOffset":73,"endOffset":77},{"placeId":"570220","name":"Eleans","startOffset":83,"endOffset":89},{"placeId":"570531","name":"Olympic games","startOffset":126,"endOffset":139},{"placeId":"981503","name":"Egyptians","startOffset":215,"endOffset":224},{"placeId":"570220","name":"Eleans","startOffset":292,"endOffset":298},{"placeId":"981503","name":"Egypt","startOffset":307,"endOffset":312},{"placeId":"981503","name":"Egyptians","startOffset":368,"endOffset":377},{"placeId":"570220","name":"Eleans","startOffset":441,"endOffset":447},{"placeId":"570220","name":"Eleans","startOffset":507,"endOffset":513},{"placeId":"981503","name":"Egyptians","startOffset":559,"endOffset":568},{"placeId":"981503","name":"Egyptians","startOffset":608,"endOffset":617},{"placeId":"570220","name":"Eleans","startOffset":650,"endOffset":656},{"placeId":"570220","name":"Eleans","startOffset":710,"endOffset":716},{"placeId":"570221","name":"Elis","startOffset":757,"endOffset":761},{"placeId":"981503","name":"Egyptians","startOffset":803,"endOffset":812},{"placeId":"981503","name":"Egypt","startOffset":1046,"endOffset":1051},{"placeId":"570220","name":"Eleans","startOffset":1125,"endOffset":1131},{"placeId":"981503","name":"Egyptians","startOffset":1162,"endOffset":1171},{"placeId":"570220","name":"Eleans","startOffset":1179,"endOffset":1185}]},{"id":161,"text":"Psammis reigned over Egypt for only six years; he invaded Ethiopia, and immediately thereafter died, and Apries68 the son of Psammis reigned in his place. [2] He was more fortunate than any former king (except his great-grandfather Psammetichus) during his rule of twenty-five years, during which he sent an army against Sidon and fought at sea with the king of Tyre. [3] But when it was fated that evil should overtake him, the cause of it was something that I will now deal with briefly, and at greater length in the Libyan part of this history. [4] Apries sent a great force against Cyrene and suffered a great defeat. The Egyptians blamed him for this and rebelled against him; for they thought that Apries had knowingly sent his men to their doom, so that after their perishing in this way he might be the more secure in his rule over the rest of the Egyptians. Bitterly angered by this, those who returned home and the friends of the slain openly revolted.","places":[{"placeId":"766","name":"Egypt","startOffset":21,"endOffset":26},{"placeId":"39274","name":"Ethiopia","startOffset":58,"endOffset":66},{"placeId":"geonames-268064","name":"Sidon","startOffset":321,"endOffset":326},{"placeId":"678437","name":"Tyre","startOffset":362,"endOffset":366},{"placeId":"716588","name":"Libyan","startOffset":519,"endOffset":525},{"placeId":"373778","name":"Cyrene","startOffset":586,"endOffset":592},{"placeId":"981503","name":"Egyptians","startOffset":626,"endOffset":635},{"placeId":"981503","name":"Egyptians","startOffset":856,"endOffset":865}]},{"id":162,"text":"Hearing of this, Apries sent Amasis to dissuade them. When Amasis came up with the Egyptians, he exhorted them to desist; but as he spoke an Egyptian came behind him and put a helmet on his head, saying it was the token of royalty. [2] And Amasis showed that this was not displeasing to him, for after being made king by the rebel Egyptians he prepared to march against Apries. [3] When Apries heard of it, he sent against Amasis an esteemed Egyptian named Patarbemis, one of his own court, instructing him to take the rebel alive and bring him into his presence. When Patarbemis came and summoned Amasis, Amasis (who was on horseback) rose up and farted, telling the messenger to take that back to Apries. [4] But when in spite of this Patarbemis insisted that Amasis obey the king's summons and go to him, Amasis answered that he had long been preparing to do just that, and Apries would find him above reproach, for he would present himself, and bring others. [5] Hearing this, Patarbemis could not mistake Amasis; he saw his preparations and hastened to depart, the more quickly to make known to the king what was going on. When Apries saw him return without Amasis, he did not stop to reflect, but in his rage and fury had Patarbemis' ears and nose cut off. [6] The rest of the Egyptians, who were until now Apries' friends, seeing this outrage done to the man who was most prominent among them, changed sides without delay and offered themselves to Amasis.","places":[{"placeId":"981503","name":"Egyptians","startOffset":83,"endOffset":92},{"placeId":"981503","name":"Egyptian","startOffset":141,"endOffset":149},{"placeId":"981503","name":"Egyptians","startOffset":331,"endOffset":340},{"placeId":"981503","name":"Egyptian","startOffset":442,"endOffset":450},{"placeId":"981503","name":"Egyptians","startOffset":1283,"endOffset":1292}]},{"id":163,"text":"Learning of this, too, Apries armed his guard and marched against the Egyptians; he had a bodyguard of Carians and Ionians, thirty thousand of them, and his royal palace was in the city of Sas, a great and marvellous palace. [2] Apries' men marched against the Egyptians, and so did Amasis' men against the foreigners. So they both came to Momemphis and were going to make trial of one another.","places":[{"placeId":"981503","name":"Egyptians","startOffset":70,"endOffset":79},{"placeId":"991381","name":"Carians","startOffset":103,"endOffset":110},{"placeId":"550597","name":"Ionians","startOffset":115,"endOffset":122},{"placeId":"727217","name":"Sas","startOffset":189,"endOffset":193},{"placeId":"981503","name":"Egyptians","startOffset":262,"endOffset":271},{"placeId":"727165","name":"Momemphis","startOffset":341,"endOffset":350}]},{"id":164,"text":"The Egyptians are divided into seven classes: priests, warriors, cowherds, swineherds, merchants, interpreters, and pilots. There are this many classes, each named after its occupation. [2] The warriors are divided into Kalasiries and Hermotubies, and they belong to the following districts (for all divisions in Egypt are made according to districts).","places":[{"placeId":"981503","name":"Egyptians","startOffset":4,"endOffset":13},{"placeId":"981503","name":"Egypt","startOffset":313,"endOffset":318}]},{"id":165,"text":"The Hermotubies are from the districts of Busiris, Sas, Khemmis, and Papremis, the island called Prosopitis, and half of Nathofrom all of these; their number, at its greatest, attained to a hundred and sixty thousand. None of these has learned any common trade; they are free to follow the profession of arms alone.","places":[{"placeId":"756543","name":"Busiris","startOffset":42,"endOffset":49},{"placeId":"727217","name":"Sas","startOffset":51,"endOffset":55},{"placeId":"756613","name":"Khemmis","startOffset":57,"endOffset":64},{"placeId":"727185","name":"Papremis","startOffset":70,"endOffset":78},{"placeId":"727206","name":"Prosopitis","startOffset":98,"endOffset":108},{"placeId":"727168","name":"Natho","startOffset":122,"endOffset":127}]},{"id":166,"text":"The Kalasiries are from the districts of Thebes , Bubastis, Aphthis, Tanis, Mendes, Sebennys, Athribis, Pharbathis, Thmuis, Onuphis, Anytis, Myecphoris (this last is in an island opposite the city of Bubastis [2] from all of these; their number, at its greatest, attained to two hundred and fifty thousand men. These too may practise no trade but war, which is their hereditary calling.","places":[{"placeId":"786017","name":"Thebes","startOffset":41,"endOffset":47},{"placeId":"727088","name":"Bubastis","startOffset":50,"endOffset":58},{"placeId":"730092","name":"Aphthis","startOffset":60,"endOffset":67},{"placeId":"737069","name":"Tanis","startOffset":69,"endOffset":74},{"placeId":"727156","name":"Mendes","startOffset":76,"endOffset":82},{"placeId":"727227","name":"Sebennys","startOffset":84,"endOffset":92},{"placeId":"727078","name":"Athribis","startOffset":94,"endOffset":102},{"placeId":"727196","name":"Pharbathis","startOffset":104,"endOffset":115},{"placeId":"727249","name":"Thmuis","startOffset":117,"endOffset":123},{"placeId":"727180","name":"Onuphis","startOffset":125,"endOffset":132},{"placeId":"730088","name":"Anytis","startOffset":134,"endOffset":140},{"placeId":"730125","name":"Myecphoris","startOffset":142,"endOffset":152},{"placeId":"727088","name":"Bubastis","startOffset":201,"endOffset":209}]},{"id":167,"text":"Now whether this, too, the Greeks have learned from the Egyptians, I cannot confidently judge. I know that in Thrace and Scythia and Persia and Lydia and nearly all foreign countries, those who learn trades are held in less esteem than the rest of the people, and those who have least to do with artisans' work, especially men who are free to practise the art of war, are highly honored. [2] This much is certain: that this opinion, which is held by all Greeks and particularly by the Lacedaemonians, is of foreign origin. It is in Corinth that artisans are held in least contempt.","places":[{"placeId":"981503","name":"Egyptians","startOffset":56,"endOffset":65},{"placeId":"1001889","name":"Thrace","startOffset":110,"endOffset":116},{"placeId":"1273","name":"Scythia","startOffset":121,"endOffset":128},{"placeId":"geonames-130758","name":"Persia","startOffset":133,"endOffset":139},{"placeId":"550701","name":"Lydia","startOffset":144,"endOffset":149},{"placeId":"570406","name":"Lacedaemonians","startOffset":485,"endOffset":499},{"placeId":"570182","name":"Corinth","startOffset":532,"endOffset":539}]},{"id":168,"text":"The warriors were the only Egyptians, except the priests, who had special privileges: for each of them an untaxed plot of twelve acres was set apart. This acre is a square of a hundred Egyptian cubits each way, the Egyptian cubit being equal to the Samian. [2] These lands were set apart for all; it was never the same men who cultivated them, but each in turn.69 A thousand Kalasiries and as many Hermotubies were the king's annual bodyguard. These men, besides their lands, each received a daily provision of five minae's weight of roast grain, two minae of beef, and four cups of wine. These were the gifts received by each bodyguard.","places":[{"placeId":"981503","name":"Egyptians","startOffset":27,"endOffset":36},{"placeId":"981503","name":"Egyptian cubits","startOffset":185,"endOffset":200},{"placeId":"981503","name":"Egyptian cubit","startOffset":215,"endOffset":229},{"placeId":"599926","name":"Samian","startOffset":249,"endOffset":255}]},{"id":169,"text":"When Apries with his guards and Amasis with the whole force of Egyptians came to the town of Momemphis, they engaged; and though the foreigners fought well, they were vastly outnumbered, and therefore were beaten. [2] Apries, they say, supposed that not even a god could depose him from his throne, so firmly did he think he was established; and now, defeated in battle and taken captive, he was brought to Sas, to the royal dwelling which belonged to him once but now belonged to Amasis. [3] There, he was kept alive for a while in the palace and well treated by Amasis. But presently the Egyptians complained that there was no justice in keeping alive one who was their own and their king's bitterest enemy; whereupon Amasis gave Apries up to them, and they strangled him and then buried him in the burial-place of his fathers. [4] This is in the temple of Athena, very near to the sanctuary, on the left of the entrance. The people of Sas buried within the temple precinct all kings who were natives of their district. [5] The tomb of Amasis is farther from the sanctuary than the tomb of Apries and his ancestors; yet it, too, is within the temple court; it is a great colonnade of stone, richly adorned, the pillars made in the form of palm trees. In this colonnade are two portals, and the place where the coffin lies is within their doors.","places":[{"placeId":"981503","name":"Egyptians","startOffset":63,"endOffset":72},{"placeId":"727165","name":"Momemphis","startOffset":93,"endOffset":102},{"placeId":"727217","name":"Sas","startOffset":407,"endOffset":411},{"placeId":"981503","name":"Egyptians","startOffset":591,"endOffset":600},{"placeId":"727217","name":"Sas","startOffset":939,"endOffset":943}]},{"id":170,"text":"There is also at Sas the burial-place of one whose name I think it impious to mention in speaking of such a matter; it is in the temple of Athena, behind and close to the length of the wall of the shrine. [2] Moreover, great stone obelisks stand in the precinct; and there is a lake nearby, adorned with a stone margin and made in a complete circle; it is, as it seemed to me, the size of the lake at Delos which they call the Round Pond.","places":[{"placeId":"727217","name":"Sas","startOffset":17,"endOffset":21},{"placeId":"599588","name":"Delos","startOffset":402,"endOffset":407}]},{"id":171,"text":"On this lake they enact by night the story of the god's sufferings, a rite which the Egyptians call the Mysteries. I could say more about this, for I know the truth, but let me preserve a discreet silence. [2] Let me preserve a discreet silence, too, concerning that rite of Demeter which the Greeks call Thesmophoria70 , except as much of it as I am not forbidden to mention. [3] The daughters of Danaus were those who brought this rite out of Egypt and taught it to the Pelasgian women; afterwards, when the people of the Peloponnese were driven out by the Dorians, it was lost, except in so far as it was preserved by the Arcadians, the Peloponnesian people which was not driven out but left in its home.","places":[{"placeId":"981503","name":"Egyptians","startOffset":85,"endOffset":94},{"placeId":"981503","name":"Egypt","startOffset":445,"endOffset":450},{"placeId":"570106","name":"Pelasgian women","startOffset":472,"endOffset":487},{"placeId":"570577","name":"Peloponnese","startOffset":524,"endOffset":535},{"placeId":"570102","name":"Arcadians","startOffset":625,"endOffset":634},{"placeId":"570577","name":"Peloponnesian people","startOffset":640,"endOffset":660}]},{"id":172,"text":"After Apries was deposed, Amasis became king; he was from a town called Siuph in the district of Sas. [2] Now at first he was scorned and held in low regard by the Egyptians on the ground that he was a common man and of no high family; but presently he won them over by being shrewd and not arrogant. [3] He had among his countless treasures a golden washbowl, in which he and all those who ate with him were accustomed to clean their feet. This he broke in pieces and out of it made a god's image, which he set in a most conspicuous spot in the city; and the Egyptians came frequently to this image and held it in great reverence. [4] When Amasis learned what the townsfolk were doing, he called the Egyptians together and told them that the image had been made out of the washbowl, in which Egyptians had once vomited and urinated and cleaned their feet, but which now they greatly revered. [5] Now then, he said, I have fared like the washbowl, since if before I was a common man, still, I am your king now. And he told them to honor and show respect for him.","places":[{"placeId":"730157","name":"Siuph","startOffset":72,"endOffset":77},{"placeId":"727217","name":"Sas","startOffset":97,"endOffset":101},{"placeId":"981503","name":"Egyptians","startOffset":165,"endOffset":174},{"placeId":"981503","name":"Egyptians","startOffset":561,"endOffset":570},{"placeId":"981503","name":"Egyptians","startOffset":702,"endOffset":711},{"placeId":"981503","name":"Egyptians","startOffset":794,"endOffset":803}]},{"id":173,"text":"The following was how he scheduled his affairs: in the morning, until the the hour when the marketplace filled, he readily conducted whatever business was brought to him; the rest of the day, he drank and joked at the expense of his companions and was idle and playful. [2] But this displeased his friends, who admonished him thus: O King, you do not conduct yourself well by indulging too much in vulgarity. You, a celebrated man, ought to conduct your business throughout the day, sitting on a celebrated throne; and thus the Egyptians would know that they are governed by a great man, and you would be better spoken of; as it is, what you do is by no means kingly. [3] But he answered them like this: Men that have bows string them when they must use them, and unstring them when they have used them; were bows kept strung forever, they would break, and so could not be used when needed. [4] Such, too, is the nature of man. Were one to be always at serious work and not permit oneself a bit of relaxation, he would go mad or idiotic before he knew it; I am well aware of that, and give each of the two its turn. Such was his answer to his friends.","places":[{"placeId":"981503","name":"Egyptians","startOffset":529,"endOffset":538}]},{"id":174,"text":"It is said that even when Amasis was a private man he was fond of drinking and joking and was not at all a sober man; and that when his drinking and pleasure-seeking cost him the bare necessities, he would go around stealing. Then when he contradicted those who said that he had their possessions, they would bring him to whatever place of divination was nearby, and sometimes the oracles declared him guilty and sometimes they acquitted him. [2] When he became king, he did not take care of the shrines of the gods who had acquitted him of theft, or give them anything for maintenance, or make it his practice to sacrifice there, for he knew them to be worthless and their oracles false; but he took scrupulous care of the gods who had declared his guilt, considering them to be gods in very deed and their oracles infallible.","places":[]},{"id":175,"text":"Amasis made a marvellous outer court for the temple of Athena71 at Sas, far surpassing all in its height and size, and in the size and quality of the stone blocks; moreover, he set up huge images and vast man-headed sphinxes,72 and brought enormous blocks of stone besides for the building. [2] Some of these he brought from the stone quarries of Memphis; the largest came from the city of Elephantine,73 twenty days' journey distant by river from Sas. [3] But what I admire most of his works is this: he brought from Elephantine a shrine made of one single block of stone; its transport took three years and two thousand men had the carriage of it, all of them pilots. This chamber is thirty-five feet long, twenty-three feet wide, thirteen feet high. [4] These are the external dimensions of the chamber which is made of one block; its internal dimensions are: thirty-one feet long, twenty feet wide, eight feet high. It stands at the entrance of the temple; [5] it was not dragged within (so they say) because while it was being drawn the chief builder complained aloud of the great expense of time and his loathing of the work, and Amasis taking this to heart would not let it be drawn further. Some also say that a man, one of those who heaved up the shrine, was crushed by it, and therefore it was not dragged within.","places":[{"placeId":"727217","name":"Sas","startOffset":67,"endOffset":71},{"placeId":"736963","name":"Memphis","startOffset":348,"endOffset":355},{"placeId":"786021","name":"Elephantine","startOffset":391,"endOffset":402},{"placeId":"727217","name":"Sas","startOffset":449,"endOffset":453},{"placeId":"786021","name":"Elephantine","startOffset":520,"endOffset":531}]},{"id":176,"text":"Furthermore, Amasis dedicated, besides monuments of marvellous size in all the other temples of note, the huge image that lies supine before Hephaestus' temple at Memphis; this image is seventy-five feet in length; there stand on the same base, on either side of the great image, two huge statues hewn from the same block, each of them twenty feet high. [2] There is at Sas another stone figure of like size, supine as is the figure at Memphis. It was Amasis, too, who built the great and most marvellous temple of Isis at Memphis.","places":[{"placeId":"736963","name":"Memphis","startOffset":163,"endOffset":170},{"placeId":"727217","name":"Sas","startOffset":370,"endOffset":374},{"placeId":"736963","name":"Memphis","startOffset":437,"endOffset":444},{"placeId":"736963","name":"Memphis","startOffset":524,"endOffset":531}]},{"id":177,"text":"It is said that in the reign of Amasis Egypt attained to its greatest prosperity, in respect of what the river did for the land and the land for its people: and that the number of inhabited cities in the country was twenty thousand. [2] It was Amasis also who made the law that every Egyptian declare his means of livelihood to the ruler of his district annually, and that omitting to do so or to prove that one had a legitimate livelihood be punishable with death. Solon the Athenian got this law from Egypt and established it among his people; may they always have it, for it is a perfect law.","places":[{"placeId":"766","name":"Egypt","startOffset":39,"endOffset":44},{"placeId":"981503","name":"Egyptian","startOffset":284,"endOffset":292},{"placeId":"579885","name":"Athenian","startOffset":476,"endOffset":484},{"placeId":"981503","name":"Egypt","startOffset":503,"endOffset":508}]},{"id":178,"text":"Amasis became a philhellene, and besides other services which he did for some of the Greeks, he gave those who came to Egypt the city of Naucratis to live in; and to those who travelled to the country without wanting to settle there, he gave lands where they might set up altars and make holy places for their gods. [2] Of these the greatest and most famous and most visited precinct is that which is called the Hellenion, founded jointly by the Ionian cities of Chios, Teos, Phocaea, and Clazomenae, the Dorian cities of Rhodes, Cnidus, Halicarnassus, and Phaselis, and one Aeolian city, Mytilene. [3] It is to these that the precinct belongs, and these are the cities that furnish overseers of the trading port; if any other cities advance claims, they claim what does not belong to them. The Aeginetans made a precinct of their own, sacred to Zeus; and so did the Samians for Hera and the Milesians for Apollo.","places":[{"placeId":"766","name":"Egypt","startOffset":119,"endOffset":124},{"placeId":"727169","name":"Naucratis","startOffset":137,"endOffset":146},{"placeId":"550597","name":"Ionian cities","startOffset":446,"endOffset":459},{"placeId":"550496","name":"Chios","startOffset":463,"endOffset":468},{"placeId":"550913","name":"Teos","startOffset":470,"endOffset":474},{"placeId":"550823","name":"Phocaea","startOffset":476,"endOffset":483},{"placeId":"550650","name":"Clazomenae","startOffset":489,"endOffset":499},{"placeId":"590030","name":"Rhodes","startOffset":522,"endOffset":528},{"placeId":"599576","name":"Cnidus","startOffset":530,"endOffset":536},{"placeId":"599636","name":"Halicarnassus","startOffset":538,"endOffset":551},{"placeId":"639051","name":"Phaselis","startOffset":557,"endOffset":565},{"placeId":"550406","name":"Aeolian city","startOffset":575,"endOffset":587},{"placeId":"550763","name":"Mytilene","startOffset":589,"endOffset":597},{"placeId":"579844","name":"Aeginetans","startOffset":795,"endOffset":805},{"placeId":"599926","name":"Samians","startOffset":867,"endOffset":874},{"placeId":"599799","name":"Milesians","startOffset":892,"endOffset":901}]},{"id":179,"text":"Naucratis was in the past the only trading port in Egypt. Whoever came to any other mouth of the Nile had to swear that he had not come intentionally, and had then to take his ship and sail to the Canobic mouth; or if he could not sail against contrary winds, he had to carry his cargo in barges around the Delta until he came to Naucratis. In such esteem was Naucratis held.","places":[{"placeId":"727169","name":"Naucratis","startOffset":0,"endOffset":9},{"placeId":"766","name":"Egypt","startOffset":51,"endOffset":56},{"placeId":"727172","name":"Nile","startOffset":97,"endOffset":101},{"placeId":"727137","name":"Canobic mouth","startOffset":197,"endOffset":210},{"placeId":"727169","name":"Naucratis","startOffset":330,"endOffset":339},{"placeId":"727169","name":"Naucratis","startOffset":360,"endOffset":369}]},{"id":180,"text":"When the Amphictyons paid three hundred talents to have the temple that now stands at Delphi finished (as that which was formerly there burnt down by accident), it was the Delphians' lot to pay a fourth of the cost. [2] They went about from city to city collecting gifts, and got most from Egypt; for Amasis gave them a thousand talents' weight of astringent earth,74 and the Greek settlers in Egypt twenty minae.","places":[{"placeId":"540726","name":"Delphi","startOffset":86,"endOffset":92},{"placeId":"540726","name":"Delphi","startOffset":172,"endOffset":178},{"placeId":"766","name":"Egypt","startOffset":290,"endOffset":295},{"placeId":"766","name":"Egypt","startOffset":394,"endOffset":399}]},{"id":181,"text":"Amasis made friends and allies of the people of Cyrene. And he decided to marry from there, either because he had his heart set on a Greek wife, or for the sake of the Corcyreans' friendship; [2] in any case, he married a certain Ladice, said by some to be the daughter of Battus, of Arcesilaus by others, and by others again of Critobulus, an esteemed citizen of the place. But whenever Amasis lay with her, he became unable to have intercourse, though he managed with every other woman; [3] and when this happened repeatedly, Amasis said to the woman called Ladice, Woman, you have cast a spell on me, and there is no way that you shall avoid perishing the most wretchedly of all women. [4] So Ladice, when the king did not relent at all although she denied it, vowed in her heart to Aphrodite that, if Amasis could have intercourse with her that night, since that would remedy the problem, she would send a statue to Cyrene to her. And after the prayer, immediately, Amasis did have intercourse with her. And whenever Amasis came to her thereafter, he had intercourse, and he was very fond of her after this. [5] Ladice paid her vow to the goddess; she had an image made and sent it to Cyrene, where it stood safe until my time, facing outside the city. Cambyses, when he had conquered Egypt and learned who Ladice was, sent her away to Cyrene unharmed.","places":[{"placeId":"373778","name":"Cyrene","startOffset":48,"endOffset":54},{"placeId":"530835","name":"Corcyreans","startOffset":168,"endOffset":178},{"placeId":"373778","name":"Cyrene","startOffset":922,"endOffset":928},{"placeId":"373778","name":"Cyrene","startOffset":1191,"endOffset":1197},{"placeId":"766","name":"Egypt","startOffset":1291,"endOffset":1296},{"placeId":"373778","name":"Cyrene","startOffset":1342,"endOffset":1348}]},{"id":182,"text":"Moreover, Amasis dedicated offerings in Hellas. He gave to Cyrene a gilt image of Athena and a painted picture of himself; to Athena of Lindus, two stone images and a marvellous linen breast-plate; and to Hera in Samos, two wooden statues of himself that were still standing in my time behind the doors in the great shrine. [2] The offerings in Samos were dedicated because of the friendship between Amasis and Polycrates,75 son of Aeaces; what he gave to Lindus was not out of friendship for anyone, but because the temple of Athena in Lindus is said to have been founded by the daughters of Danaus, when they landed there in their flight from the sons of Egyptus. Such were Amasis' offerings. Moreover, he was the first conqueror of Cyprus, which he made tributary to himself.HerodotusThe Histories","places":[{"placeId":"373778","name":"Cyrene","startOffset":59,"endOffset":65},{"placeId":"589913","name":"Lindus","startOffset":136,"endOffset":142},{"placeId":"599926","name":"Samos","startOffset":213,"endOffset":218},{"placeId":"599926","name":"Samos","startOffset":345,"endOffset":350},{"placeId":"589913","name":"Lindus","startOffset":456,"endOffset":462},{"placeId":"589913","name":"Lindus","startOffset":537,"endOffset":543},{"placeId":"981503","name":"Egyptus","startOffset":657,"endOffset":664},{"placeId":"707498","name":"Cyprus","startOffset":735,"endOffset":741}]}]`)},3:{id:3,title:"Book 3: Thalia",chapters:JSON.parse(`[{"id":1,"text":"Cyrus' son Cambyses was leading an army of his subjects, Ionian and Aeolian Greeks among them,1 against this Amasis for the following reason. Cambyses had sent a herald to Egypt asking Amasis for his daughter; he asked on the advice of an Egyptian, who advised it out of resentment against Amasis, that out of all the Egyptian physicians Amasis had dragged him away from his wife and children and sent him up to Persia when Cyrus sent to Amasis asking for the best eye-doctor in Egypt. [2] Out of resentment, the Egyptian by his advice induced Cambyses to ask Amasis for his daughter, so that Amasis would either be wretched if he gave her, or hated by Cambyses if he did not. Amasis, intimidated by the power of Persia and frightened, could neither give his daughter nor refuse her; for he knew well that Cambyses was not going to take her as his wife but as his concubine. [3] After considering the matter, he did as follows. There was a daughter of the former king Apries, all that was left of that family, quite tall and pretty, and her name was Nitetis; this girl Amasis adorned with clothes and gold and sent to Cambyses as his own daughter. [4] But after a time, as he embraced her addressing her as the daughter of Amasis, the girl said to him, O King, you do not understand how you have been made a fool of by Amasis, who dressed me in finery and sent me to you as his own daughter, when I am in fact the daughter of Apries, the ruler Amasis revolted from with the Egyptians and killed. [5] This speech and this crime that occurred turned Cyrus' son Cambyses, furiously angry, against Egypt. So the Persians say.","places":[{"placeId":"550597","name":"Ionian","startOffset":57,"endOffset":63},{"placeId":"550406","name":"Aeolian Greeks","startOffset":68,"endOffset":82},{"placeId":"766","name":"Egypt","startOffset":172,"endOffset":177},{"placeId":"981503","name":"Egyptian","startOffset":239,"endOffset":247},{"placeId":"981503","name":"Egyptian","startOffset":318,"endOffset":326},{"placeId":"geonames-130758","name":"Persia","startOffset":412,"endOffset":418},{"placeId":"981503","name":"Egypt","startOffset":479,"endOffset":484},{"placeId":"981503","name":"Egyptian","startOffset":513,"endOffset":521},{"placeId":"geonames-130758","name":"Persia","startOffset":713,"endOffset":719},{"placeId":"981503","name":"Egyptians","startOffset":1475,"endOffset":1484},{"placeId":"981503","name":"Egypt","startOffset":1596,"endOffset":1601},{"placeId":"geonames-130758","name":"Persians","startOffset":1610,"endOffset":1618}]},{"id":2,"text":"But the Egyptians, who say that Cambyses was the son of this daughter of Apries, claim him as one of theirs; they say that it was Cyrus who asked Amasis for his daughter, and not Cambyses. [2] But what they say is false. They are certainly not unaware (for if any understand the customs of the Persians the Egyptians do) firstly, that it is not their custom for illegitimate offspring to rule when there are legitimate offspring; and secondly, that Cambyses was the son of Cassandane, the daughter of Pharnaspes, who was an Achaemenid, and not of the Egyptian woman. But they falsify the story, pretending to be related to the house of Cyrus. That is the truth of the matter.","places":[{"placeId":"981503","name":"Egyptians","startOffset":8,"endOffset":17},{"placeId":"geonames-130758","name":"Persians","startOffset":294,"endOffset":302},{"placeId":"981503","name":"Egyptians","startOffset":307,"endOffset":316},{"placeId":"981503","name":"Egyptian","startOffset":551,"endOffset":559}]},{"id":3,"text":"The following story, incredible to me, is also told: that one of the Persian women who came to visit Cyrus' wives, and saw the tall and attractive children who stood by Cassandane, expressed her admiration in extravagant terms. Then Cassandane, Cyrus' wife, said, [2] Although I am the mother of such children, Cyrus dishonors me and honors his new woman from Egypt. So she spoke in her bitterness against Nitetis; and Cambyses, the eldest of her sons, said, [3] Then, mother, when I am grown up, I will turn all Egypt upside down. When he said this, he was about ten years old, and the women were amazed; but he kept it in mind, and it was thus that when he grew up and became king, he made the campaign against Egypt.","places":[{"placeId":"geonames-130758","name":"Persian","startOffset":69,"endOffset":76},{"placeId":"766","name":"Egypt","startOffset":361,"endOffset":366},{"placeId":"981503","name":"Egypt","startOffset":516,"endOffset":521},{"placeId":"981503","name":"Egypt","startOffset":717,"endOffset":722}]},{"id":4,"text":"It so happened, too, that something else occurred contributing to this campaign. There was among Amasis' mercenaries a man who was a Halicarnassian by birth, a clever man and a good soldier, whose name was Phanes. [2] This Phanes had some grudge against Amasis, and fled from Egypt aboard ship, hoping to talk to Cambyses. Since he was a man much admired among the mercenaries and had an exact knowledge of all Egyptian matters, Amasis was anxious to catch him, and sent a trireme with his most trusted eunuch to pursue him. This eunuch caught him in Lycia but never brought him back to Egypt, for Phanes was too clever for him. [3] He made his guards drunk and so escaped to Persia. There he found Cambyses prepared to set out against Egypt, but in doubt as to his march, how he should cross the waterless desert; so Phanes showed him what was Amasis' condition and how he should march; as to this, he advised Cambyses to send and ask the king of the Arabians for a safe passage.","places":[{"placeId":"599636","name":"Halicarnassian","startOffset":133,"endOffset":147},{"placeId":"766","name":"Egypt","startOffset":276,"endOffset":281},{"placeId":"981503","name":"Egyptian","startOffset":411,"endOffset":419},{"placeId":"981503","name":"Egypt","startOffset":587,"endOffset":592},{"placeId":"geonames-130758","name":"Persia","startOffset":676,"endOffset":682},{"placeId":"981503","name":"Egypt","startOffset":736,"endOffset":741},{"placeId":"29475","name":"Arabians","startOffset":952,"endOffset":960}]},{"id":5,"text":"Now the only apparent way of entry into Egypt is this. The road runs from Phoenicia as far as the borders of the city of Cadytis,2 which belongs to the so-called Syrians of Palestine. [2] From Cadytis (which, as I judge, is a city not much smaller than Sardis) to the city of Ienysus the seaports belong to the Arabians; then they are Syrian again from Ienysus as far as the Serbonian marsh, beside which the Casian promontory stretches seawards; [3] from this Serbonian marsh, where Typho is supposed to have been hidden,3 the country is Egypt. Now between Ienysus and the Casian mountain and the Serbonian marsh there lies a wide territory for as much as three days' journey, terribly arid.","places":[{"placeId":"766","name":"Egypt","startOffset":40,"endOffset":45},{"placeId":"991410","name":"Phoenicia","startOffset":74,"endOffset":83},{"placeId":"687902","name":"Cadytis","startOffset":121,"endOffset":128},{"placeId":"1306","name":"Syrians","startOffset":162,"endOffset":169},{"placeId":"1001940","name":"Palestine","startOffset":173,"endOffset":182},{"placeId":"687902","name":"Cadytis","startOffset":193,"endOffset":200},{"placeId":"550867","name":"Sardis","startOffset":253,"endOffset":259},{"placeId":"29475","name":"Arabians","startOffset":311,"endOffset":319},{"placeId":"1306","name":"Syrian","startOffset":335,"endOffset":341},{"placeId":"688025","name":"Serbonian marsh","startOffset":375,"endOffset":390},{"placeId":"687872","name":"Casian promontory","startOffset":409,"endOffset":426},{"placeId":"688025","name":"Serbonian marsh","startOffset":461,"endOffset":476},{"placeId":"981503","name":"Egypt","startOffset":539,"endOffset":544},{"placeId":"687872","name":"Casian mountain","startOffset":574,"endOffset":589},{"placeId":"688025","name":"Serbonian marsh","startOffset":598,"endOffset":613}]},{"id":6,"text":"I am going to mention something now which few of those who sail to Egypt know. Earthen jars full of wine are brought into Egypt twice a year from all Greece and Phoenicia besides: yet one might safely say there is not a single empty wine jar anywhere in the country. [2] What then (one may ask) becomes of them? I shall explain this too. Each governor of a district must gather in all the earthen pots from his own township and take them to Memphis, and the people of Memphis must fill them with water and carry them to those arid lands of Syria; so the earthen pottery that is brought to Egypt and unloaded or emptied there is carried to Syria to join the stock that has already been taken there.","places":[{"placeId":"766","name":"Egypt","startOffset":67,"endOffset":72},{"placeId":"981503","name":"Egypt","startOffset":122,"endOffset":127},{"placeId":"geonames-390903","name":"Greece","startOffset":150,"endOffset":156},{"placeId":"991410","name":"Phoenicia","startOffset":161,"endOffset":170},{"placeId":"736963","name":"Memphis","startOffset":441,"endOffset":448},{"placeId":"736963","name":"Memphis","startOffset":468,"endOffset":475},{"placeId":"1306","name":"Syria","startOffset":540,"endOffset":545},{"placeId":"981503","name":"Egypt","startOffset":589,"endOffset":594},{"placeId":"1306","name":"Syria","startOffset":639,"endOffset":644}]},{"id":7,"text":"Now as soon as the Persians took possession of Egypt, they became the caretakers of the entryway into it, having it provisioned with water in the way I have described. [2] But at this time there was as yet no ready supply of water; and so Cambyses, hearing what was said by the stranger from Halicarnassus, sent messengers to the Arabian and asked and obtained safe conduct, giving to him and receiving from him pledges.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":19,"endOffset":27},{"placeId":"766","name":"Egypt","startOffset":47,"endOffset":52},{"placeId":"599636","name":"Halicarnassus","startOffset":292,"endOffset":305},{"placeId":"29475","name":"Arabian","startOffset":330,"endOffset":337}]},{"id":8,"text":"There are no men who respect pledges more than the Arabians. This is how they give them: a man stands between the two pledging parties, and with a sharp stone cuts the palms of their hands, near the thumb; then he takes a piece of wood from the cloak of each and smears with their blood seven stones that lie between them, meanwhile calling on Dionysus and the Heavenly Aphrodite; [2] after this is done, the one who has given his pledge commends the stranger (or his countryman if the other be one) to his friends, and his friends hold themselves bound to honor the pledge. [3] They believe in no other gods except Dionysus and the Heavenly Aphrodite; and they say that they wear their hair as Dionysus does his, cutting it round the head and shaving the temples. They call Dionysus, Orotalt; and Aphrodite, Alilat.4","places":[{"placeId":"29475","name":"Arabians","startOffset":51,"endOffset":59}]},{"id":9,"text":"When, then, the Arabian had made the pledge to the messengers who had come from Cambyses, he devised the following expedient: he filled camel-skins with water and loaded all his camels with these; then he drove them into the waterless land and there awaited Cambyses' army. [2] This is the most credible of the stories told; but I must relate the less credible tale also, since they tell it. There is a great river in Arabia called Corys, emptying into the sea called Red. [3] From this river (it is said) the king of the Arabians brought water by an aqueduct made of sewn oxhides and other hides and extensive enough to reach to the dry country; and he had great tanks dug in that country to try to receive and keep the water. [4] It is a twelve days' journey from the river to that desert. By three aqueducts (they say) he brought the water to three different places.","places":[{"placeId":"29475","name":"Arabian","startOffset":16,"endOffset":23},{"placeId":"981506","name":"Arabia","startOffset":418,"endOffset":424},{"placeId":"39290","name":"sea called Red","startOffset":457,"endOffset":471},{"placeId":"29475","name":"Arabians","startOffset":522,"endOffset":530}]},{"id":10,"text":"Psammenitus, son of Amasis, was encamped by the mouth of the Nile called Pelusian, awaiting Cambyses. [2] For when Cambyses marched against Egypt, he found Amasis no longer alive; he had died after reigning forty-four years, during which he had suffered no great misfortune; and being dead he was embalmed and laid in the burial-place built for him in the temple. [3] While his son Psammenitus was king of Egypt, the people saw an extraordinary thing, namely, rain at Thebes of Egypt, where, as the Thebans themselves say, there had never been rain before, nor since to my lifetime; for indeed there is no rain at all in the upper parts of Egypt; but at that time a drizzle of rain fell at Thebes .5","places":[{"placeId":"727172","name":"Nile","startOffset":61,"endOffset":65},{"placeId":"727191","name":"Pelusian","startOffset":73,"endOffset":81},{"placeId":"766","name":"Egypt","startOffset":140,"endOffset":145},{"placeId":"981503","name":"Egypt","startOffset":406,"endOffset":411},{"placeId":"786017","name":"Thebes","startOffset":468,"endOffset":474},{"placeId":"981503","name":"Egypt","startOffset":478,"endOffset":483},{"placeId":"786017","name":"Thebans","startOffset":499,"endOffset":506},{"placeId":"981503","name":"Egypt","startOffset":640,"endOffset":645},{"placeId":"786017","name":"Thebes","startOffset":690,"endOffset":696}]},{"id":11,"text":"When the Persians had crossed the waterless country and encamped near the Egyptians intending to engage them, the Egyptian mercenaries, Greeks and Carians, devised a plan to punish Phanes, angered at him for leading a foreign army into Egypt. [2] Phanes had left sons in Egypt; these they brought to the camp, into their father's sight, and set a great bowl between the two armies; then they brought the sons one by one and cut their throats over the bowl. [3] When all the sons had been slaughtered, they poured wine and water into the bowl, and the mercenaries drank this and then gave battle. The fighting was fierce, and many of both armies fell; but at last the Egyptians were routed.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":9,"endOffset":17},{"placeId":"981503","name":"Egyptians","startOffset":74,"endOffset":83},{"placeId":"981503","name":"Egyptian","startOffset":114,"endOffset":122},{"placeId":"geonames-390903","name":"Greeks","startOffset":136,"endOffset":142},{"placeId":"991381","name":"Carians","startOffset":147,"endOffset":154},{"placeId":"981503","name":"Egypt","startOffset":236,"endOffset":241},{"placeId":"981503","name":"Egypt","startOffset":271,"endOffset":276},{"placeId":"981503","name":"Egyptians","startOffset":667,"endOffset":676}]},{"id":12,"text":"I saw a strange thing on the site of the battle, of which the people of the country had told me. The bones of those killed on either side in this fight lying scattered separately (for the Persian bones lay in one place and the Egyptian in another, where the armies had first separately stood), the skulls of the Persians are so brittle that if you throw no more than a pebble it will pierce them, but the Egyptian skulls are so strong that a blow of a stone will hardly crack them. [2] And this, the people said (which for my own part I readily believed), is the explanation of it: the Egyptians shave their heads from childhood, and the bone thickens by exposure to the sun. [3] This also is the reason why they do not grow bald; for nowhere can one see so few bald heads as in Egypt. [4] Their skulls then are strong for this reason; while the Persian skulls are weak because they cover their heads throughout their lives with the felt hats (called tiaras) which they wear. Such is the truth of the matter. I saw too the skulls of those Persians at Papremis who were killed with Darius' son Achaemenes by Inaros the Libyan, and they were like the others.","places":[{"placeId":"geonames-130758","name":"Persian","startOffset":188,"endOffset":195},{"placeId":"981503","name":"Egyptian","startOffset":227,"endOffset":235},{"placeId":"geonames-130758","name":"Persians","startOffset":312,"endOffset":320},{"placeId":"981503","name":"Egyptian","startOffset":405,"endOffset":413},{"placeId":"981503","name":"Egyptians","startOffset":586,"endOffset":595},{"placeId":"981503","name":"Egypt","startOffset":779,"endOffset":784},{"placeId":"geonames-130758","name":"Persian","startOffset":846,"endOffset":853},{"placeId":"geonames-130758","name":"Persians","startOffset":1039,"endOffset":1047},{"placeId":"727185","name":"Papremis","startOffset":1051,"endOffset":1059},{"placeId":"716588","name":"Libyan","startOffset":1118,"endOffset":1124}]},{"id":13,"text":"After their rout in the battle the Egyptians fled in disorder; and when they had been overtaken in Memphis, Cambyses sent a Persian herald up the river aboard a Mytilenean boat to invite the Egyptians to an accord. [2] But when they saw the boat coming to Memphis, they sallied out all together from their walls, destroyed the boat, dismembered the crew (like butchers) and carried them within the walls. [3] So the Egyptians were besieged, and after a long while surrendered; but the neighboring Libyans, frightened by what had happened in Egypt, surrendered without a fight, laying tribute on themselves and sending gifts; and so too did the people of Cyrene and Barca, frightened like the Libyans. [4] Cambyses received in all kindness the gifts of the Libyans; but he seized what came from Cyrene and, displeased, I think, because it was so littlefor the Cyrenaeans had sent five hundred silver minaecast it with his own hands among his army.","places":[{"placeId":"981503","name":"Egyptians","startOffset":35,"endOffset":44},{"placeId":"736963","name":"Memphis","startOffset":99,"endOffset":106},{"placeId":"geonames-130758","name":"Persian","startOffset":124,"endOffset":131},{"placeId":"550763","name":"Mytilenean","startOffset":161,"endOffset":171},{"placeId":"981503","name":"Egyptians","startOffset":191,"endOffset":200},{"placeId":"736963","name":"Memphis","startOffset":256,"endOffset":263},{"placeId":"981503","name":"Egyptians","startOffset":416,"endOffset":425},{"placeId":"716588","name":"Libyans","startOffset":497,"endOffset":504},{"placeId":"981503","name":"Egypt","startOffset":541,"endOffset":546},{"placeId":"373778","name":"Cyrene","startOffset":654,"endOffset":660},{"placeId":"373750","name":"Barca","startOffset":665,"endOffset":670},{"placeId":"716588","name":"Libyans","startOffset":692,"endOffset":699},{"placeId":"716588","name":"Libyans","startOffset":756,"endOffset":763},{"placeId":"373778","name":"Cyrene","startOffset":794,"endOffset":800},{"placeId":"373778","name":"Cyrenaeans","startOffset":860,"endOffset":870}]},{"id":14,"text":"On the tenth day after the surrender of the walled city of Memphis, Cambyses took Psammenitus king of Egypt, who had reigned for six months, and confined him in the outer part of the city with other Egyptians, to insult him; having confined him there, he tried Psammenitus' spirit, as I shall show. [2] He dressed the daughter of the king as a slave and sent her out with a pitcher to fetch water, together with other girls from the families of the leading men, dressed like the daughter of the king. [3] So when the girls went out before their fathers' eyes crying and lamenting, all the rest answered with cries and weeping, seeing their children abused; but Psammenitus, having seen with his own eyes and learned all, bowed himself to the ground. [4] After the water-carriers had passed by, Cambyses next made Psammenitus' son go out before him with two thousand Egyptians of the same age, all with ropes bound round their necks and bridle-bits in their mouths; [5] they were led out to be punished for those Mytileneans who had perished with their boat at Memphis; for such was the judgment of the royal judges, that every man's death be paid for by the deaths of ten noble Egyptians. [6] When Psammenitus saw them passing and perceived that his son was being led out to die, and all the Egyptians who sat with him wept and showed their affliction, he did as he had done at the sight of his daughter. [7] After these too had gone out, it happened that there was one of his companions, a man past his prime, who had lost all his possessions, and had only what a poor man might have, and begged of the army; this man now went out before Psammenitus son of Amasis and the Egyptians confined in the outer part of the city. When Psammenitus saw him, he broke into loud weeping, striking his head and calling on his companion by name. [8] Now there were men set to watch Psammenitus, who told Cambyses all that he did as each went forth. Wondering at what the king did, Cambyses made this inquiry of him by a messenger: [9] Psammenitus, Lord Cambyses wants to know why, seeing your daughter abused and your son going to his death, you did not cry out or weep, yet you showed such feeling for the beggar, who (as Cambyses learns from others) is not one of your kindred? So the messenger inquired. Psammenitus answered: [10] Son of Cyrus, my private grief was too great for weeping; but the unhappiness of my companion deserves tearsa man fallen from abundance and prosperity to beggary come to the threshold of old age. When the messenger reported this, Cambyses and his court, it is said, thought the answer good. [11] And, the Egyptians say, Croesus wept (for it happened that he too had come with Cambyses to Egypt) and the Persians that were there wept; Cambyses himself felt some pity, and he ordered that Psammenitus' son be spared from those that were to be executed, and that Psammenitus himself be brought in from the outer part of the city and brought before him.","places":[{"placeId":"736963","name":"Memphis","startOffset":59,"endOffset":66},{"placeId":"766","name":"Egypt","startOffset":102,"endOffset":107},{"placeId":"981503","name":"Egyptians","startOffset":199,"endOffset":208},{"placeId":"981503","name":"Egyptians","startOffset":866,"endOffset":875},{"placeId":"550763","name":"Mytileneans","startOffset":1012,"endOffset":1023},{"placeId":"736963","name":"Memphis","startOffset":1060,"endOffset":1067},{"placeId":"981503","name":"Egyptians","startOffset":1178,"endOffset":1187},{"placeId":"981503","name":"Egyptians","startOffset":1292,"endOffset":1301},{"placeId":"981503","name":"Egyptians","startOffset":1673,"endOffset":1682},{"placeId":"981503","name":"Egyptians","startOffset":2631,"endOffset":2640},{"placeId":"981503","name":"Egypt","startOffset":2714,"endOffset":2719},{"placeId":"geonames-130758","name":"Persians","startOffset":2729,"endOffset":2737}]},{"id":15,"text":"Those that went for him found that the son was no longer alive, but had been the first to be slaughtered; but they brought Psammenitus up and led him to Cambyses; and there he lived, and no violence was done him for the rest of his life. [2] And if he had known how to mind his own business, he would have regained Egypt to govern; for the Persians are inclined to honor kings' sons; even though kings revolt from them, they give back to their sons the sovereign power. [3] There are many instances showing that it is their custom so to do, and notably the giving back of his father's sovereign power to Thannyras son of Inaros, and also to Pausiris son of Amyrtaeus; yet none ever did the Persians more harm than Inaros and Amyrtaeus.6 [4] But as it was, Psammenitus plotted evil and got his reward; for he was caught raising a revolt among the Egyptians; and when Cambyses heard of it, Psammenitus drank bull's blood7 and died. Such was his end.","places":[{"placeId":"766","name":"Egypt","startOffset":315,"endOffset":320},{"placeId":"geonames-130758","name":"Persians","startOffset":340,"endOffset":348},{"placeId":"geonames-130758","name":"Persians","startOffset":690,"endOffset":698},{"placeId":"981503","name":"Egyptians","startOffset":846,"endOffset":855}]},{"id":16,"text":"From Memphis Cambyses went to the city Sais, anxious to do exactly what he did do. Entering the house of Amasis, he had the body of Amasis carried outside from its place of burial; and when this had been done, he gave orders to scourge it and pull out the hair and pierce it with goads, and to desecrate it in every way. [2] When they were weary of doing this (for the body, being embalmed, remained whole and did not fall to pieces), Cambyses gave orders to burn it, a sacrilegious command; for the Persians hold fire to be a god; [3] therefore neither nation thinks it right to burn the dead, the Persians for the reason given, as they say it is wrong to give the dead body of a man to a god; while the Egyptians believe fire to be a living beast that devours all that it catches, and when sated with its meal dies together with that on which it feeds. [4] Now it is by no means their custom to give the dead to beasts; and this is why they embalm the corpse, that it may not lie and feed worms. Thus what Cambyses commanded was contrary to the custom of both peoples. [5] The Egyptians say, however, that it was not Amasis to whom this was done, but another Egyptian of the same age as Amasis, whom the Persians abused thinking that they were abusing Amasis. [6] For their story is that Amasis learned from an oracle what was to be done to him after his death, and so to escape this fate buried this dead man, the one that was scourged, near the door inside his own vault, and ordered his son that he himself should be laid in the farthest corner of the vault. [7] I think that these commands of Amasis, regarding the burial-place and the man, were never given at all, and that the Egyptians believe in them in vain.","places":[{"placeId":"736963","name":"Memphis","startOffset":5,"endOffset":12},{"placeId":"727217","name":"Sais","startOffset":39,"endOffset":43},{"placeId":"geonames-130758","name":"Persians","startOffset":500,"endOffset":508},{"placeId":"geonames-130758","name":"Persians","startOffset":599,"endOffset":607},{"placeId":"981503","name":"Egyptians","startOffset":705,"endOffset":714},{"placeId":"981503","name":"Egyptians","startOffset":1079,"endOffset":1088},{"placeId":"981503","name":"Egyptian","startOffset":1161,"endOffset":1169},{"placeId":"geonames-130758","name":"Persians","startOffset":1206,"endOffset":1214},{"placeId":"981503","name":"Egyptians","startOffset":1685,"endOffset":1694}]},{"id":17,"text":"After this Cambyses planned three expeditions, against the Carchedonians,8 against the Ammonians, and against the long-lived9 Ethiopians, who inhabit that part of Libya that is on the southern sea. [2] He decided after consideration to send his fleet against the Carthaginians and a part of his land army against the Ammonians; to Ethiopia he would first send spies, to see what truth there was in the story of a Table of the Sun in that country, and to spy out all else besides, under the pretext of bringing gifts for the Ethiopian king.","places":[{"placeId":"314921","name":"Carchedonians","startOffset":59,"endOffset":72},{"placeId":"716520","name":"Ammonians","startOffset":87,"endOffset":96},{"placeId":"39274","name":"Ethiopians","startOffset":128,"endOffset":138},{"placeId":"716588","name":"Libya","startOffset":165,"endOffset":170},{"placeId":"314921","name":"Carthaginians","startOffset":265,"endOffset":278},{"placeId":"716520","name":"Ammonians","startOffset":319,"endOffset":328},{"placeId":"39274","name":"Ethiopia","startOffset":333,"endOffset":341},{"placeId":"39274","name":"Ethiopian","startOffset":526,"endOffset":535}]},{"id":18,"text":"Now the Table of the Sun is said to be something of this kind:10 there is a meadow outside the city, filled with the boiled flesh of all four-footed things; here during the night the men of authority among the townsmen are careful to set out the meat, and all day whoever wishes comes and feasts on it. These meats, say the people of the country, are ever produced by the earth of itself. Such is the story of the Sun's Table.","places":[]},{"id":19,"text":"When Cambyses determined to send the spies, he sent for those Fish-eaters from the city of Elephantine who understood the Ethiopian language. [2] While they were fetching them, he ordered his fleet to sail against Carthage. But the Phoenicians said they would not do it; for they were bound, they said, by strong oaths, and if they sailed against their own progeny they would be doing an impious thing; and the Phoenicians being unwilling, the rest were inadequate fighters. [3] Thus the Carthaginians escaped being enslaved by the Persians; for Cambyses would not use force with the Phoenicians, seeing that they had willingly surrendered to the Persians, and the whole fleet drew its strength from them. The Cyprians too had come of their own accord to aid the Persians against Egypt.","places":[{"placeId":"786021","name":"Elephantine","startOffset":91,"endOffset":102},{"placeId":"39274","name":"Ethiopian","startOffset":122,"endOffset":131},{"placeId":"314921","name":"Carthage","startOffset":214,"endOffset":222},{"placeId":"678334","name":"Phoenicians","startOffset":232,"endOffset":243},{"placeId":"678334","name":"Phoenicians","startOffset":411,"endOffset":422},{"placeId":"314921","name":"Carthaginians","startOffset":488,"endOffset":501},{"placeId":"geonames-130758","name":"Persians","startOffset":532,"endOffset":540},{"placeId":"678334","name":"Phoenicians","startOffset":584,"endOffset":595},{"placeId":"geonames-130758","name":"Persians","startOffset":647,"endOffset":655},{"placeId":"707498","name":"Cyprians","startOffset":710,"endOffset":718},{"placeId":"geonames-130758","name":"Persians","startOffset":763,"endOffset":771},{"placeId":"766","name":"Egypt","startOffset":780,"endOffset":785}]},{"id":20,"text":"When the Fish-eaters arrived from Elephantine at Cambyses' summons, he sent them to Ethiopia, with orders what to say, and bearing as gifts a red cloak and a twisted gold necklace and bracelets and an alabaster box of incense and an earthenware jar of palm wine. These Ethiopians, to whom Cambyses sent them, are said to be the tallest and most handsome of all men. [2] Their way of choosing kings is different from that of all others, as (it is said) are all their laws; they consider that man worthy to be their king whom they judge to be tallest and to have strength proportional to his stature.","places":[{"placeId":"786021","name":"Elephantine","startOffset":34,"endOffset":45},{"placeId":"39274","name":"Ethiopia","startOffset":84,"endOffset":92},{"placeId":"39274","name":"Ethiopians","startOffset":269,"endOffset":279}]},{"id":21,"text":"When the Fish-eaters arrived among these men, they gave the gifts to their king and said: Cambyses, the king of the Persians, wishing to become your friend and ally, sent us with orders to address ourselves to you; and he offers you as gifts these things which he enjoys using himself. [2] But the Ethiopian, perceiving that they had come as spies, spoke thus to them: It is not because he values my friendship that the Persian King sends you with gifts, nor do you speak the truth (for you have come to spy on my realm), nor is that man just; for were he just, he would not have coveted a land other than his own, nor would he try to lead into slavery men by whom he has not been injured. Now, give him this bow, and this message: [3] The King of the Ethiopians advises the King of the Persians to bring overwhelming odds to attack the long-lived Ethiopians when the Persians can draw a bow of this length as easily as I do; but until then, to thank the gods who do not incite the sons of the Ethiopians to add other land to their own.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":117,"endOffset":125},{"placeId":"39274","name":"Ethiopian","startOffset":300,"endOffset":309},{"placeId":"geonames-130758","name":"Persian","startOffset":423,"endOffset":430},{"placeId":"39274","name":"Ethiopians","startOffset":756,"endOffset":766},{"placeId":"geonames-130758","name":"Persians","startOffset":791,"endOffset":799},{"placeId":"39274","name":"Ethiopians","startOffset":852,"endOffset":862},{"placeId":"geonames-130758","name":"Persians","startOffset":872,"endOffset":880},{"placeId":"39274","name":"Ethiopians","startOffset":998,"endOffset":1008}]},{"id":22,"text":"So speaking he unstrung the bow and gave it to the men who had come. Then, taking the red cloak, he asked what it was and how it was made; and when the Fish-eaters told him the truth about the color and the process of dyeing, he said that both the men and their garments were full of deceit. [2] Next he inquired about the twisted gold necklace and the bracelets; and when the Fish-eaters told him how they were made, the king smiled, and, thinking them to be fetters, said: We have stronger chains than these. [3] Thirdly he inquired about the incense; and when they described making and applying it, he made the same reply as about the cloak. But when he came to the wine and asked about its making, he was vastly pleased with the drink, and asked further what food their king ate, and what was the greatest age to which a Persian lived. [4] They told him their king ate bread, showing him how wheat grew; and said that the full age to which a man might hope to live was eighty years. Then, said the Ethiopian, it was no wonder that they lived so few years, if they ate dung;11 they would not even have been able to live that many unless they were refreshed by the drinksignifying to the Fish-eaters the winefor in this, he said, the Persians excelled the Ethiopians.","places":[{"placeId":"geonames-130758","name":"Persian","startOffset":827,"endOffset":834},{"placeId":"39274","name":"Ethiopian","startOffset":1004,"endOffset":1013},{"placeId":"geonames-130758","name":"Persians","startOffset":1240,"endOffset":1248},{"placeId":"39274","name":"Ethiopians","startOffset":1262,"endOffset":1272}]},{"id":23,"text":"The Fish-eaters then in turn asking of the Ethiopian length of life and diet, he said that most of them attained to a hundred and twenty years, and some even to more; their food was boiled meat and their drink milk. [2] The spies showed wonder at the tale of years; whereupon he led them, it is said, to a spring, by washing in which they grew sleeker, as though it were of oil; and it smelled of violets. [3] So light, the spies said, was this water, that nothing would float on it, neither wood nor anything lighter than wood, but all sank to the bottom. If this water is truly such as they say, it is likely that their constant use of it makes the people long-lived. [4] When they left the spring, the king led them to a prison where all the men were bound with fetters of gold. Among these Ethiopians there is nothing so scarce and so precious as bronze. Then, having seen the prison, they saw what is called the Table of the Sun.","places":[{"placeId":"39274","name":"Ethiopian","startOffset":43,"endOffset":52},{"placeId":"39274","name":"Ethiopians","startOffset":794,"endOffset":804}]},{"id":24,"text":"Last after this they viewed the Ethiopian coffins; these are said to be made of alabaster, as I shall describe: [2] they cause the dead body to shrink, either as the Egyptians do or in some other way, then cover it with gypsum and paint it all as far as possible in the likeness of the living man; [3] then they set it within a hollow pillar of alabaster, which they dig in abundance from the ground, and it is easily worked; the body can be seen in the pillar through the alabaster, no evil stench nor anything unpleasant proceeding from it, and showing clearly all its parts, as if it were the man himself. [4] The nearest of kin keep the pillar in their house for a year, giving it of the first-fruits and offering it sacrifices; after which they bring the pillars out and set them round about the city.","places":[{"placeId":"39274","name":"Ethiopian","startOffset":32,"endOffset":41},{"placeId":"981503","name":"Egyptians","startOffset":166,"endOffset":175}]},{"id":25,"text":"Having seen everything, the spies departed again. When they reported all this, Cambyses was angry, and marched at once against the Ethiopians, neither giving directions for any provision of food nor considering that he was about to lead his army to the ends of the earth; [2] being not in his right mind but mad, however, he marched at once on hearing from the Fish-eaters, ordering the Greeks who were with him to await him where they were, and taking with him all his land army. [3] When he came in his march to Thebes , he detached about fifty thousand men from his army, and directed them to enslave the Ammonians and burn the oracle of Zeus; and he himself went on towards Ethiopia with the rest of his host. [4] But before his army had accomplished the fifth part of their journey they had come to an end of all there was in the way of provision, and after the food was gone, they ate the beasts of burden until there was none of these left either. [5] Now had Cambyses, when he perceived this, changed his mind and led his army back again, he would have been a wise man at last after his first fault; but as it was, he went ever forward, taking account of nothing. [6] While his soldiers could get anything from the earth, they kept themselves alive by eating grass; but when they came to the sandy desert, some did a terrible thing, taking by lot one man out of ten and eating him. [7] Hearing this, Cambyses feared their becoming cannibals, and so gave up his expedition against the Ethiopians and marched back to Thebes , with the loss of many of his army; from Thebes he came down to Memphis, and sent the Greeks to sail away.","places":[{"placeId":"39274","name":"Ethiopians","startOffset":131,"endOffset":141},{"placeId":"geonames-390903","name":"Greeks","startOffset":387,"endOffset":393},{"placeId":"786017","name":"Thebes","startOffset":514,"endOffset":520},{"placeId":"716520","name":"Ammonians","startOffset":608,"endOffset":617},{"placeId":"39274","name":"Ethiopia","startOffset":678,"endOffset":686},{"placeId":"39274","name":"Ethiopians","startOffset":1492,"endOffset":1502},{"placeId":"786017","name":"Thebes","startOffset":1523,"endOffset":1529},{"placeId":"786017","name":"Thebes","startOffset":1572,"endOffset":1578},{"placeId":"736963","name":"Memphis","startOffset":1595,"endOffset":1602},{"placeId":"geonames-390903","name":"Greeks","startOffset":1617,"endOffset":1623}]},{"id":26,"text":"So fared the expedition against Ethiopia. As for those who were sent to march against the Ammonians, they set out and journeyed from Thebes with guides; and it is known that they came to the city of Oasis,12 inhabited by Samians said to be of the Aeschrionian tribe, seven days' march from Thebes across sandy desert; this place is called, in the Greek language, Islands of the Blest. [2] Thus far, it is said, the army came; after that, except for the Ammonians themselves and those who heard from them, no man can say anything of them; for they neither reached the Ammonians nor returned back. [3] But this is what the Ammonians themselves say: when the Persians were crossing the sand from Oasis to attack them, and were about midway between their country and Oasis, while they were breakfasting a great and violent south wind arose, which buried them in the masses of sand which it bore; and so they disappeared from sight. Such is the Ammonian tale about this army.","places":[{"placeId":"39274","name":"Ethiopia","startOffset":32,"endOffset":40},{"placeId":"716520","name":"Ammonians","startOffset":90,"endOffset":99},{"placeId":"786017","name":"Thebes","startOffset":133,"endOffset":139},{"placeId":"776210","name":"Oasis","startOffset":199,"endOffset":204},{"placeId":"599926","name":"Samians","startOffset":221,"endOffset":228},{"placeId":"786017","name":"Thebes","startOffset":290,"endOffset":296},{"placeId":"geonames-390903","name":"Greek","startOffset":347,"endOffset":352},{"placeId":"149334673","name":"Islands of the Blest","startOffset":363,"endOffset":383},{"placeId":"716520","name":"Ammonians","startOffset":453,"endOffset":462},{"placeId":"716520","name":"Ammonians","startOffset":567,"endOffset":576},{"placeId":"716520","name":"Ammonians","startOffset":621,"endOffset":630},{"placeId":"geonames-130758","name":"Persians","startOffset":656,"endOffset":664},{"placeId":"776210","name":"Oasis","startOffset":693,"endOffset":698},{"placeId":"776210","name":"Oasis","startOffset":763,"endOffset":768},{"placeId":"716520","name":"Ammonian","startOffset":940,"endOffset":948}]},{"id":27,"text":"When Cambyses was back at Memphis, there appeared in Egypt that Apis13 whom the Greeks call Epaphus; at whose epiphany the Egyptians put on their best clothing and held a festival. [2] Seeing the Egyptians so doing, Cambyses was fully persuaded that these signs of joy were for his misfortunes, and summoned the rulers of Memphis; when they came before him, he asked them why the Egyptians behaved so at the moment he returned with so many of his army lost, though they had done nothing like it when he was before at Memphis. [3] The rulers told him that a god, wont to appear after long intervals of time, had now appeared to them; and that all Egypt rejoiced and made holiday whenever he so appeared. At this Cambyses said that they lied, and he punished them with death for their lie.","places":[{"placeId":"736963","name":"Memphis","startOffset":26,"endOffset":33},{"placeId":"766","name":"Egypt","startOffset":53,"endOffset":58},{"placeId":"geonames-390903","name":"Greeks","startOffset":80,"endOffset":86},{"placeId":"981503","name":"Egyptians","startOffset":123,"endOffset":132},{"placeId":"981503","name":"Egyptians","startOffset":196,"endOffset":205},{"placeId":"736963","name":"Memphis","startOffset":322,"endOffset":329},{"placeId":"981503","name":"Egyptians","startOffset":380,"endOffset":389},{"placeId":"736963","name":"Memphis","startOffset":517,"endOffset":524},{"placeId":"981503","name":"Egypt","startOffset":646,"endOffset":651}]},{"id":28,"text":"Having put them to death, he next summoned the priests before him. When they gave him the same account, he said that if a tame god had come to the Egyptians he would know it; and with no more words he bade the priests bring Apis. So they went to fetch and bring him. [2] This Apis, or Epaphus, is a calf born of a cow that can never conceive again. By what the Egyptians say, the cow is made pregnant by a light from heaven, and thereafter gives birth to Apis. [3] The marks of this calf called Apis are these: he is black, and has on his forehead a three-cornered white spot, and the likeness of an eagle on his back; the hairs of the tail are double, and there is a knot under the tongue.","places":[{"placeId":"981503","name":"Egyptians","startOffset":147,"endOffset":156},{"placeId":"981503","name":"Egyptians","startOffset":361,"endOffset":370}]},{"id":29,"text":"When the priests led Apis in, Cambysesfor he was all but maddrew his dagger and, meaning to stab the calf in the belly, stuck the thigh; then laughing he said to the priests: [2] Simpletons, are these your gods, creatures of flesh and blood that can feel weapons of iron? That is a god worthy of the Egyptians. But for you, you shall suffer for making me your laughing-stock. So saying he bade those, whose business it was, to scourge the priests well, and to kill any other Egyptian whom they found holiday-making. [3] So the Egyptian festival ended, and the priests were punished, and Apis lay in the temple and died of the wound in the thigh. When he was dead of the wound, the priests buried him without Cambyses' knowledge.","places":[{"placeId":"981503","name":"Egyptians","startOffset":303,"endOffset":312},{"placeId":"981503","name":"Egyptian","startOffset":479,"endOffset":487},{"placeId":"981503","name":"Egyptian","startOffset":531,"endOffset":539}]},{"id":30,"text":"But Cambyses, the Egyptians say, owing to this wrongful act immediately went mad, although even before he had not been sensible. His first evil act was to destroy his full brother Smerdis, whom he had sent away from Egypt to Persia out of jealousy, because Smerdis alone could draw the bow brought from the Ethiopian by the Fish-eaters as far as two fingerbreadths, but no other Persian could draw it. [2] Smerdis having gone to Persia, Cambyses saw in a dream a vision, in which it seemed to him that a messenger came from Persia and told him that Smerdis sitting on the royal throne touched heaven with his head. [3] Fearing therefore for himself, lest his brother might slay him and so be king, he sent Prexaspes, the most trusted of his Persians, to Persia to kill him. Prexaspes went up to Susa and killed Smerdis; some say that he took Smerdis out hunting, others that he brought him to the Red14 Sea and there drowned him.","places":[{"placeId":"981503","name":"Egyptians","startOffset":18,"endOffset":27},{"placeId":"981503","name":"Egypt","startOffset":216,"endOffset":221},{"placeId":"geonames-130758","name":"Persia","startOffset":225,"endOffset":231},{"placeId":"39274","name":"Ethiopia","startOffset":307,"endOffset":315},{"placeId":"geonames-130758","name":"Persian","startOffset":379,"endOffset":386},{"placeId":"geonames-130758","name":"Persia","startOffset":429,"endOffset":435},{"placeId":"geonames-130758","name":"Persia","startOffset":524,"endOffset":530},{"placeId":"geonames-130758","name":"Persians","startOffset":741,"endOffset":749},{"placeId":"geonames-130758","name":"Persia","startOffset":754,"endOffset":760},{"placeId":"912936","name":"Susa","startOffset":795,"endOffset":799},{"placeId":"39290","name":"Red14 Sea","startOffset":897,"endOffset":906}]},{"id":31,"text":"This, they say, was the first of Cambyses' evil acts; next, he destroyed his full sister, who had come with him to Egypt, and whom he had taken to wife. [2] He married her in this way (for before this, it had by no means been customary for Persians to marry their sisters): Cambyses was infatuated with one of his sisters and when he wanted to marry her, because his intention was contrary to usage, he summoned the royal judges15 and inquired whether there were any law enjoining one, that so desired, to marry his sister. [3] These royal judges are men chosen out from the Persians to function until they die or are detected in some injustice; it is they who decide suits in Persia and interpret the laws of the land; all matters are referred to them. [4] These then replied to Cambyses with an answer which was both just and prudent, namely, that they could find no law enjoining a brother to marry his sister; but that they had found a law permitting the King of Persia to do whatever he liked. [5] Thus, although they feared Cambyses they did not break the law, and, to save themselves from death for keeping it, they found another law abetting one who wished to marry sisters. [6] So Cambyses married the object of his desire; yet not long afterwards he took another sister as well. It was the younger of these who had come with him to Egypt, and whom he now killed.","places":[{"placeId":"766","name":"Egypt","startOffset":115,"endOffset":120},{"placeId":"geonames-130758","name":"Persians","startOffset":240,"endOffset":248},{"placeId":"geonames-130758","name":"Persians","startOffset":575,"endOffset":583},{"placeId":"geonames-130758","name":"Persia","startOffset":677,"endOffset":683},{"placeId":"geonames-130758","name":"Persia","startOffset":967,"endOffset":973},{"placeId":"981503","name":"Egypt","startOffset":1342,"endOffset":1347}]},{"id":32,"text":"There are two tales of her death, as there are of the death of Smerdis. The Greeks say that Cambyses had set a lion cub to fight a puppy, and that this woman was watching too; and that as the puppy was losing, its brother broke its leash and came to help, and the two dogs together got the better of the cub. [2] Cambyses, they say, was pleased with the sight, but the woman wept as she sat by. Cambyses perceiving it asked why she wept, and she said that when she saw the puppy help its brother she had wept, recalling Smerdis and knowing that there would be no avenger for him. [3] For saying this, according to the Greek story, she was killed by Cambyses. But the Egyptian tale is that as the two sat at table the woman took a lettuce and plucked off the leaves, then asked her husband whether he preferred the look of it with or without leaves. With the leaves, he said; whereupon she answered: [4] Yet you have stripped Cyrus' house as bare as this lettuce. Angered at this, they say, he sprang upon her, who was great with child, and she miscarried and died of the hurt he gave her.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":76,"endOffset":82},{"placeId":"geonames-390903","name":"Greek","startOffset":618,"endOffset":623},{"placeId":"981503","name":"Egyptian","startOffset":667,"endOffset":675}]},{"id":33,"text":"Such were Cambyses' mad acts to his own household, whether they were done because of Apis or grew from some of the many troubles that are wont to beset men; for indeed he is said to have been afflicted from his birth with that grievous disease which some call sacred.16 It is not unlikely then that when his body was grievously afflicted his mind too should be diseased.","places":[]},{"id":34,"text":"I will now relate his mad dealings with the rest of Persia. He said, as they report, to Prexaspeswhom he held in particular honor, who brought him all his messages, whose son held the very honorable office of Cambyses' cup-bearerthus, I say, he spoke to Prexaspes: [2] What manner of man, Prexaspes, do the Persians think me to be, and how do they speak of me? Sire, said Prexaspes, for all else they greatly praise you, but they say that you love wine too well. [3] So he reported of the Persians. The king angrily replied: If the Persians now say that it is my fondness for wine that drives me to frenzy and madness, then it would seem that their former saying also was a lie. [4] For it is said that before this, while some Persians and Croesus were sitting with him, Cambyses asked what manner of man they thought him to be in comparison with Cyrus his father; and they answered, Cambyses was the better man; for he had all of Cyrus' possessions and had won Egypt and the sea besides. [5] So said the Persians; but Croesus, who was present, and was dissatisfied with their judgment, spoke thus to Cambyses: To me, son of Cyrus, you do not seem to be the equal of your father; for you have as yet no son such as he left after him in you. This pleased Cambyses, and he praised Croesus' judgment.","places":[{"placeId":"geonames-130758","name":"Persia","startOffset":52,"endOffset":58},{"placeId":"geonames-130758","name":"Persians","startOffset":310,"endOffset":318},{"placeId":"geonames-130758","name":"Persians","startOffset":497,"endOffset":505},{"placeId":"geonames-130758","name":"Persians","startOffset":541,"endOffset":549},{"placeId":"geonames-130758","name":"Persians","startOffset":737,"endOffset":745},{"placeId":"981503","name":"Egypt","startOffset":973,"endOffset":978},{"placeId":"geonames-130758","name":"Persians","startOffset":1017,"endOffset":1025}]},{"id":35,"text":"Remembering this, then, he said to Prexaspes in his anger: Judge then if the Persians speak the truth, or rather are themselves out of their minds when they speak of me so. [2] Yonder stands your son in the porch; now if I shoot and pierce his heart, that will prove the Persians to be wrong; if I miss, then say that they are right and that I am out of my senses. [3] So saying, he strung his bow and hit the boy, and gave orders to open the fallen body and examine the wound: and the arrow being found in the heart, Cambyses laughed in great glee and said to the boy's father: [4] It is plain, Prexaspes, that I am in my right mind and the Persians mad; now tell me: what man in the world did you ever see that shot so true to the mark? Prexaspes, it is said, replied (for he saw that Cambyses was mad, and he feared for his own life), Master, I think that not even the god himself could shoot so true. [5] Thus did Cambyses then; at another time he took twelve Persians, equal to the noblest in the land, convicted them of some minor offense, and buried them alive up to the neck.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":78,"endOffset":86},{"placeId":"geonames-130758","name":"Persians","startOffset":272,"endOffset":280},{"placeId":"geonames-130758","name":"Persians","startOffset":645,"endOffset":653},{"placeId":"geonames-130758","name":"Persians","startOffset":970,"endOffset":978}]},{"id":36,"text":"For these acts Croesus the Lydian thought fit to take him to task, and addressed him thus: Sire, do not sacrifice everything to youth and temper, but restrain and control yourself; prudence is a good thing, forethought is wise. But you kill men of your own country whom you have convicted of some minor offense, and you kill boys. [2] If you do so often, beware lest the Persians revolt from you. As for me, your father Cyrus earnestly begged me to counsel you and to give you such advice as I think to be good. Croesus gave him this counsel out of goodwill; but Cambyses answered: [3] It is very well that you should even dare to counsel me; you, who governed your own country so well, and gave fine advice to my fathertelling him, when the Massagetae were willing to cross over into our lands, to pass the Araxes and attack them; thus you worked your own ruin by misgoverning your country and Cyrus', who trusted you. But you shall regret it; I have long waited for an occasion to deal with you. [4] With that Cambyses took his bow to shoot him dead; but Croesus leapt up and ran out; and Cambyses, being unable to shoot him, ordered his attendants to catch and kill him. [5] They, knowing Cambyses' mood, hid Croesus; intending to reveal him and receive gifts for saving his life, if Cambyses should repent and ask for Croesus, but if he should not repent nor wish Croesus back, then to kill the Lydian. [6] Not long after this Cambyses did wish Croesus back, and the attendants, understanding this, told him that Croesus was alive still. Cambyses said that he was glad of it; but that they, who had saved Croesus, should not escape with impunity, but be killed; and this was done.","places":[{"placeId":"550701","name":"Lydian","startOffset":27,"endOffset":33},{"placeId":"geonames-130758","name":"Persians","startOffset":372,"endOffset":380},{"placeId":"59921","name":"Massagetae","startOffset":746,"endOffset":756},{"placeId":"550701","name":"Lydian","startOffset":1404,"endOffset":1410}]},{"id":37,"text":"Cambyses committed many such mad acts against the Persians and his allies; he stayed at Memphis, and there opened ancient coffins and examined the dead bodies. [2] Thus too he entered the temple of Hephaestus and jeered at the image there. This image of Hephaestus is most like the Phoenician Pataici,17 which the Phoenicians carry on the prows of their triremes. I will describe it for anyone who has not seen these figures: it is the likeness of a dwarf. [3] Also he entered the temple of the Cabeiri, into which no one may enter save the priest; the images here he even burnt, with bitter mockery. These also are like the images of Hephaestus, and are said to be his sons.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":50,"endOffset":58},{"placeId":"736963","name":"Memphis","startOffset":88,"endOffset":95},{"placeId":"678334","name":"Phoenician","startOffset":282,"endOffset":292},{"placeId":"678334","name":"Phoenicians","startOffset":314,"endOffset":325}]},{"id":38,"text":"I hold it then in every way proved that Cambyses was quite insane; or he would never have set himself to deride religion and custom. For if it were proposed to all nations to choose which seemed best of all customs, each, after examination, would place its own first; so well is each convinced that its own are by far the best. [2] It is not therefore to be supposed that anyone, except a madman, would turn such things to ridicule. I will give this one proof among many from which it may be inferred that all men hold this belief about their customs. [3] When Darius was king, he summoned the Greeks who were with him and asked them for what price they would eat their fathers' dead bodies. They answered that there was no price for which they would do it. [4] Then Darius summoned those Indians who are called Callatiae,18 who eat their parents, and asked them (the Greeks being present and understanding through interpreters what was said) what would make them willing to burn their fathers at death. The Indians cried aloud, that he should not speak of so horrid an act. So firmly rooted are these beliefs; and it is, I think, rightly said in Pindar's poem that custom is lord of all.19","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":594,"endOffset":600},{"placeId":"50004","name":"Indians","startOffset":789,"endOffset":796},{"placeId":"geonames-390903","name":"Greeks","startOffset":868,"endOffset":874},{"placeId":"50004","name":"Indians","startOffset":1008,"endOffset":1015}]},{"id":39,"text":"While Cambyses was attacking Egypt, the Lacedaemonians too were making war upon Samos and upon Aeaces' son Polycrates, who had revolted and won Samos.20 [2] And first, dividing the city into three parts, he gave a share in the government to his brothers Pantagnotus and Syloson; but presently he put one of them to death, banished the younger, Syloson, and so made himself lord of all Samos; then he made a treaty with Amasis king of Egypt, sending to him and receiving from him gifts. [2] Very soon after this, Polycrates grew to such power that he was famous in Ionia and all other Greek lands; for all his military affairs succeeded. He had a hundred fifty-oared ships, and a thousand archers. [4] And he pillaged every place, indiscriminately; for he said that he would get more thanks if he gave a friend back what he had taken than if he never took it at all. He had taken many of the islands, and many of the mainland cities. Among others, he conquered the Lesbians; they had brought all their force to aid the Milesians, and Polycrates defeated them in a sea-fight; it was they who, being his captives, dug all the trench around the acropolis of Samos.","places":[{"placeId":"981503","name":"Egypt","startOffset":29,"endOffset":34},{"placeId":"570406","name":"Lacedaemonians","startOffset":40,"endOffset":54},{"placeId":"599925","name":"Samos","startOffset":80,"endOffset":85},{"placeId":"599925","name":"Samos","startOffset":144,"endOffset":149},{"placeId":"599925","name":"Samos","startOffset":385,"endOffset":390},{"placeId":"981503","name":"Egypt","startOffset":434,"endOffset":439},{"placeId":"550597","name":"Ionia","startOffset":564,"endOffset":569},{"placeId":"550696","name":"Lesbians","startOffset":964,"endOffset":972},{"placeId":"599799","name":"Milesians","startOffset":1018,"endOffset":1027},{"placeId":"599925","name":"Samos","startOffset":1154,"endOffset":1159}]},{"id":40,"text":"Now Amasis was somehow aware of Polycrates' great good fortune; and as this continued to increase greatly, he wrote this letter and sent it to Samos: Amasis addresses Polycrates as follows. [2] It is pleasant to learn that a friend and ally is doing well. But I do not like these great successes of yours; for I know the gods, how jealous they are, and I desire somehow that both I and those for whom I care succeed in some affairs, fail in others, and thus pass life faring differently by turns, rather than succeed at everything. [3] For from all I have heard I know of no man whom continual good fortune did not bring in the end to evil, and utter destruction. Therefore if you will be ruled by me do this regarding your successes: [4] consider what you hold most precious and what you will be sorriest to lose, and cast it away so that it shall never again be seen among men; then, if after this the successes that come to you are not mixed with mischances, strive to mend the matter as I have counselled you.","places":[{"placeId":"599925","name":"Samos","startOffset":143,"endOffset":148}]},{"id":41,"text":"Reading this, and perceiving that Amasis' advice was good, Polycrates considered which of his treasures it would most grieve his soul to lose, and came to this conclusion: he wore a seal set in gold, an emerald, crafted by Theodorus son of Telecles of Samos; [2] being resolved to cast this away, he embarked in a fifty-oared ship with its crew, and told them to put out to sea; and when he was far from the island, he took off the seal-ring in sight of all that were on the ship and cast it into the sea. This done, he sailed back and went to his house, where he grieved for the loss.","places":[{"placeId":"599925","name":"Samos","startOffset":252,"endOffset":257}]},{"id":42,"text":"But on the fifth or sixth day from this it happened that a fisherman, who had taken a fine and great fish, and desired to make a gift of it to Polycrates, brought it to the door and said that he wished to see Polycrates. This being granted, he gave the fish, saying: [2] O King, when I caught this fish, I thought best not to take it to market, although I am a man who lives by his hands, but it seemed to me worthy of you and your greatness; and so I bring and offer it to you. Polycrates was pleased with what the fisherman said; You have done very well, he answered, and I give you double thanks, for your words and for the gift; and I invite you to dine with me. [3] Proud of this honor, the fisherman went home; but the servants, cutting up the fish, found in its belly Polycrates' seal-ring. [4] As soon as they saw and seized it, they brought it with joy to Polycrates, and giving the ring to him told him how it had been found. Polycrates saw the hand of heaven in this matter; he wrote a letter and sent it to Egypt, telling all that he had done, and what had happened to him.","places":[{"placeId":"981503","name":"Egypt","startOffset":1025,"endOffset":1030}]},{"id":43,"text":"When Amasis had read Polycrates' letter, he perceived that no man could save another from his destiny, and that Polycrates, being so continually fortunate that he even found what he cast away, must come to an evil end. [2] So he sent a herald to Samos to renounce his friendship, determined that when some great and terrible mischance overtook Polycrates he himself might not have to sadden his heart for a friend.","places":[{"placeId":"599925","name":"Samos","startOffset":246,"endOffset":251}]},{"id":44,"text":"It was against this ever-victorious Polycrates that the Lacedaemonians now made war, invited by the Samians who afterwards founded Cydonia in Crete. Polycrates had without the knowledge of his subjects sent a herald to Cambyses, son of Cyrus, then raising an army against Egypt, inviting Cambyses to send to Samos too and request men from him. [2] At this message Cambyses very readily sent to Samos, asking Polycrates to send a fleet to aid him against Egypt. Polycrates chose those men whom he most suspected of planning a rebellion against him, and sent them in forty triremes, directing Cambyses not to send the men back.","places":[{"placeId":"570406","name":"Lacedaemonians","startOffset":56,"endOffset":70},{"placeId":"599926","name":"Samians","startOffset":100,"endOffset":107},{"placeId":"589886","name":"Cydonia","startOffset":131,"endOffset":138},{"placeId":"589748","name":"Crete","startOffset":142,"endOffset":147},{"placeId":"981503","name":"Egypt","startOffset":272,"endOffset":277},{"placeId":"599925","name":"Samos","startOffset":308,"endOffset":313},{"placeId":"599925","name":"Samos","startOffset":394,"endOffset":399},{"placeId":"981503","name":"Egypt","startOffset":454,"endOffset":459}]},{"id":45,"text":"Some say that these Samians who were sent never came to Egypt, but that when they had sailed as far as Carpathus discussed the matter among themselves and decided to sail no further; others say that they did come to Egypt and there escaped from the guard that was set over them. [2] But as they sailed back to Samos, Polycrates' ships met and engaged them; and the returning Samians were victorious and landed on the island, but were there beaten in a land battle, and so sailed to Lacedaemon. [3] There are those who say that the Samians from Egypt defeated Polycrates; but to my thinking this is untrue; for they need not have invited the Lacedaemonians if in fact they had been able to master Polycrates by themselves. Besides, it is not even reasonable to suppose that he, who had a great army of hired soldiers and bowmen of his own, was beaten by a few men like the returning Samians. [4] Polycrates took the children and wives of the townsmen who were subject to him and shut them up in the boathouses, with intent to burn them and the boathouses too if their men should desert to the returned Samians.","places":[{"placeId":"599926","name":"Samians","startOffset":20,"endOffset":27},{"placeId":"981503","name":"Egypt","startOffset":56,"endOffset":61},{"placeId":"981503","name":"Egypt","startOffset":216,"endOffset":221},{"placeId":"599925","name":"Samos","startOffset":310,"endOffset":315},{"placeId":"599926","name":"Samians","startOffset":375,"endOffset":382},{"placeId":"570406","name":"Lacedaemon","startOffset":482,"endOffset":492},{"placeId":"599926","name":"Samians","startOffset":531,"endOffset":538},{"placeId":"981503","name":"Egypt","startOffset":544,"endOffset":549},{"placeId":"570406","name":"Lacedaemonians","startOffset":641,"endOffset":655},{"placeId":"599926","name":"Samians","startOffset":882,"endOffset":889},{"placeId":"599926","name":"Samians","startOffset":1101,"endOffset":1108}]},{"id":46,"text":"When the Samians who were expelled by Polycrates came to Sparta, they came before the ruling men and made a long speech to show the greatness of their need. But the Spartans at their first sitting answered that they had forgotten the beginning of the speech and could not understand its end. [2] After this the Samians came a second time with a sack, and said nothing but this: The sack wants flour. To this the Spartans replied that they were over-wordy with the sack;21 but they did resolve to help them.","places":[{"placeId":"599926","name":"Samians","startOffset":9,"endOffset":16},{"placeId":"570685","name":"Sparta","startOffset":57,"endOffset":63},{"placeId":"570685","name":"Spartans","startOffset":165,"endOffset":173},{"placeId":"599926","name":"Samians","startOffset":311,"endOffset":318},{"placeId":"570685","name":"Spartans","startOffset":414,"endOffset":422}]},{"id":47,"text":"The Lacedaemonians then equipped and sent an army to Samos, returning a favor, as the Samians say, because they first sent a fleet to help the Lacedaemonians against Messenia; but the Lacedaemonians say that they sent this army less to aid the Samians in their need than to avenge the robbery of the bowl which they had been carrying to Croesus and the breastplate which Amasis King of Egypt had sent them as a gift. [2] This breastplate had been stolen by the Samians in the year before they took the bowl; it was of linen, decked with gold and cotton embroidery, and embroidered with many figures; [3] but what makes it worthy of wonder is that each thread of the breastplate, fine as each is, is made up of three hundred and sixty strands, each plainly seen. It is the exact counterpart of that one which Amasis dedicated to Athena in Lindus.","places":[{"placeId":"570406","name":"Lacedaemonians","startOffset":4,"endOffset":18},{"placeId":"599926","name":"Samos","startOffset":53,"endOffset":58},{"placeId":"599926","name":"Samians","startOffset":86,"endOffset":93},{"placeId":"570406","name":"Lacedaemonians","startOffset":143,"endOffset":157},{"placeId":"570480","name":"Messenia","startOffset":166,"endOffset":174},{"placeId":"570406","name":"Lacedaemonians","startOffset":184,"endOffset":198},{"placeId":"599926","name":"Samians","startOffset":244,"endOffset":251},{"placeId":"981503","name":"Egypt","startOffset":386,"endOffset":391},{"placeId":"599926","name":"Samians","startOffset":461,"endOffset":468},{"placeId":"589913","name":"Lindus","startOffset":838,"endOffset":844}]},{"id":48,"text":"The Corinthians also enthusiastically helped to further the expedition against Samos. For an outrage had been done them by the Samians a generation before this expedition, about the time of the robbery of the bowl. [2] Periander son of Cypselus sent to Alyattes at Sardis three hundred boys, sons of notable men in Corcyra, to be made eunuchs. The Corinthians who brought the boys put in at Samos; and when the Samians heard why the boys were brought, first they instructed them to take sanctuary in the temple of Artemis, [3] then they would not allow the suppliants to be dragged from the temple; and when the Corinthians tried to starve the boys out, the Samians held a festival which they still celebrate in the same fashion; throughout the time that the boys were seeking asylum, they held nightly dances of young men and women to which it was made a custom to bring cakes of sesame and honey, so that the Corcyraean boys might snatch these and have food. [4] This continued to be done until the Corinthian guards left their charge and departed; then the Samians took the boys back to Corcyra.","places":[{"placeId":"570182","name":"Corinthians","startOffset":4,"endOffset":15},{"placeId":"599926","name":"Samos","startOffset":79,"endOffset":84},{"placeId":"599926","name":"Samians","startOffset":127,"endOffset":134},{"placeId":"550867","name":"Sardis","startOffset":265,"endOffset":271},{"placeId":"530834","name":"Corcyra","startOffset":315,"endOffset":322},{"placeId":"570182","name":"Corinthians","startOffset":348,"endOffset":359},{"placeId":"599926","name":"Samos","startOffset":391,"endOffset":396},{"placeId":"599926","name":"Samians","startOffset":411,"endOffset":418},{"placeId":"570182","name":"Corinthians","startOffset":612,"endOffset":623},{"placeId":"599926","name":"Samians","startOffset":658,"endOffset":665},{"placeId":"530834","name":"Corcyraean","startOffset":911,"endOffset":921},{"placeId":"570182","name":"Corinthian","startOffset":1001,"endOffset":1011},{"placeId":"599926","name":"Samians","startOffset":1060,"endOffset":1067},{"placeId":"530834","name":"Corcyra","startOffset":1090,"endOffset":1097}]},{"id":49,"text":"If after the death of Periander, the Corinthians had been friendly towards the Corcyraeans, they would not have taken part in the expedition against Samos for this reason. But as it was, ever since the island was colonized, they have been at odds with each other, despite their kinship. [2] For these reasons then the Corinthians bore a grudge against the Samians.Periander chose the sons of the notable Corcyraeans and sent them to Sardis to be made eunuchs as an act of vengeance; for the Corcyraeans had first begun the quarrel by committing a terrible crime against him.","places":[{"placeId":"570182","name":"Corinthians","startOffset":37,"endOffset":48},{"placeId":"530834","name":"Corcyraeans","startOffset":79,"endOffset":90},{"placeId":"599926","name":"Samos","startOffset":149,"endOffset":154},{"placeId":"570182","name":"Corinthians","startOffset":318,"endOffset":329},{"placeId":"599926","name":"Samians","startOffset":356,"endOffset":363},{"placeId":"530834","name":"Corcyraeans","startOffset":404,"endOffset":415},{"placeId":"550867","name":"Sardis","startOffset":433,"endOffset":439},{"placeId":"530834","name":"Corcyraeans","startOffset":491,"endOffset":502}]},{"id":50,"text":"For after killing his own wife Melissa, Periander suffered yet another calamity on top of what he had already suffered. He had two sons by Melissa, one seventeen and one eighteen years old. [2] Their mother's father, Procles, the sovereign of Epidaurus, sent for the boys and treated them affectionately, as was natural, seeing that they were his own daughter's sons. When they left him, he said as he sent them forth: [3] Do you know, boys, who killed your mother? The elder of them paid no attention to these words; but the younger, whose name was Lycophron, was struck with such horror when he heard them that when he came to Corinth he would not speak to his father, his mother's murderer, nor would he answer him when addressed nor reply to his questions. At last Periander was so angry that he drove the boy from his house.","places":[{"placeId":"570228","name":"Epidaurus","startOffset":243,"endOffset":252},{"placeId":"570182","name":"Corinth","startOffset":631,"endOffset":638}]},{"id":51,"text":"Having driven this one away, he asked the elder son what their grandfather had said to them. The boy told him that Procles had treated them kindly, but did not mention what he had said at parting; for he had paid no attention. Periander said that by no means could Procles not have dropped some hint, and interrogated him persistently; [2] until the boy remembered, and told him. And Periander, comprehending, and wishing to show no weakness, sent a message to those with whom his banished son was living and forbade them to keep him. [3] So when the boy, driven out, would go to another house, he would be driven from this also, since Periander threatened all who received him and ordered them to shut him out; so when driven forth, he would go to some other house of his friends, and they, although he was the son of Periander, and although they were afraid, nonetheless took him in.","places":[]},{"id":52,"text":"In the end Periander made a proclamation, that whoever sheltered the boy in his house or spoke to him, would owe a fine to Apollo, and he set the amount. [2] In view of this proclamation no one wished to address or receive the boy into his house; and besides, the boy himself did not think it right to attempt what was forbidden, but accepting it slept in the open. [3] On the fourth day, when Periander saw him starved and unwashed, he took pity on him, and his anger being softened, he came near and said: My son, which is preferableto follow your present way of life, or by being well-disposed toward your father to inherit my power and the goods which I now possess? [4] Though my son and a prince of prosperous Corinth, you prefer the life of a vagrant, by opposing and being angry with me with whom you least ought to be. For if something has happened as a result of which you have a suspicion about me, it has happened to my disadvantage and I bear the brunt of it, inasmuch as I am the cause. [5] But bearing in mind how much better it is to be envied than to be pitied, and at the same time what sort of thing it is to be angry with your parents and with those that are stronger than you, come back to the house. [6] With these words Periander tried to move his son, but he said nothing else to his father, only told him that because he had conversed with him he owed the fine to Apollo. When Periander saw that his son's stubbornness could not be got around or overcome, he sent him away out of his sight in a ship to Corcyra; for Corcyra too was subject to him. [7] And when he had sent him away, he sent an army against Procles his father-in-law, since he was most to blame for his present troubles; and he took Epidaurus, captured Procles, and imprisoned him.","places":[{"placeId":"570182","name":"Corinth","startOffset":718,"endOffset":725},{"placeId":"530834","name":"Corcyra","startOffset":1531,"endOffset":1538},{"placeId":"530834","name":"Corcyra","startOffset":1544,"endOffset":1551},{"placeId":"570228","name":"Epidaurus","startOffset":1727,"endOffset":1736}]},{"id":53,"text":"As time went on, Periander, now grown past his prime and aware that he could no longer oversee and direct all his affairs, sent to Corcyra inviting Lycophron to be sovereign; for he saw no hope in his eldest son, who seemed to him to be slow-witted. [2] Lycophron did not dignify the invitation with a reply. Then Periander, pressing the young man, sent to him (as the next best way) his daughter, the boy's sister, thinking that he would listen to her. [3] She came and said, Child, would you want the power to fall to others, and our father's house destroyed, rather than to return and have it yourself? Come home and stop punishing yourself. [4] Pride is an unhappy possession. Do not cure evil by evil. Many place the more becoming thing before the just; and many pursuing their mother's business have lost their father's. Power is a slippery thing; many want it, and our father is now old and past his prime; do not lose what is yours to others. [5] So she spoke communicating their father's inducements. But he answered that he would never come to Corinth as long as he knew his father was alive. [6] When she brought this answer back, Periander sent a third messenger, through whom he proposed that he should go to Corcyra, and that the boy should return to Corinth and be the heir of his power. [7] The son consented to this; Periander got ready to go to Corcyra and Lycophron to go to Corinth; but when the Corcyraeans learned of all these matters, they put the young man to death so that Periander would not come to their country. It was for this that Periander desired vengeance on the Corcyraeans.","places":[{"placeId":"530834","name":"Corcyra","startOffset":131,"endOffset":138},{"placeId":"570182","name":"Corinth","startOffset":1056,"endOffset":1063},{"placeId":"530834","name":"Corcyra","startOffset":1224,"endOffset":1231},{"placeId":"570182","name":"Corinth","startOffset":1267,"endOffset":1274},{"placeId":"530834","name":"Corcyra","startOffset":1365,"endOffset":1372},{"placeId":"570182","name":"Corinth","startOffset":1396,"endOffset":1403},{"placeId":"530834","name":"Corcyraeans","startOffset":1418,"endOffset":1429},{"placeId":"530834","name":"Corcyraeans","startOffset":1599,"endOffset":1610}]},{"id":54,"text":"The Lacedaemonians then came with a great army, and besieged Samos. They advanced to the wall and entered the tower that stands by the seaside in the outer part of the city; but then Polycrates himself attacked them with a great force and drove them out. [2] The mercenaries and many of the Samians themselves sallied out near the upper tower on the ridge of the hill and withstood the Lacedaemonian advance for a little while; then they fled back, with the Lacedaemonians pursuing and destroying them.","places":[{"placeId":"570406","name":"Lacedaemonians","startOffset":4,"endOffset":18},{"placeId":"599926","name":"Samos","startOffset":61,"endOffset":66},{"placeId":"599926","name":"Samians","startOffset":291,"endOffset":298},{"placeId":"570406","name":"Lacedaemonian","startOffset":386,"endOffset":399},{"placeId":"570406","name":"Lacedaemonians","startOffset":458,"endOffset":472}]},{"id":55,"text":"Had all the Lacedaemonians there that day been like Archias and Lycopas, Samos would have been taken. These two alone entered the fortress along with the fleeing crowd of Samians, and were cut off and killed in the city of Samos. [2] I myself have met in his native town of Pitana22 another Archias son of Samius, and grandson of the Archias mentioned above, who honored the Samians more than any other of his guest-friends, and told me that his father had borne the name Samius because he was the son of that Archias who was killed fighting bravely at Samos. The reason that he honored the Samians, he said, was that they had given his grandfather a public funeral.","places":[{"placeId":"570406","name":"Lacedaemonians","startOffset":12,"endOffset":26},{"placeId":"599926","name":"Samos","startOffset":73,"endOffset":78},{"placeId":"599926","name":"Samians","startOffset":171,"endOffset":178},{"placeId":"599926","name":"Samos","startOffset":223,"endOffset":228},{"placeId":"599926","name":"Samians","startOffset":375,"endOffset":382},{"placeId":"599926","name":"Samos","startOffset":553,"endOffset":558},{"placeId":"599926","name":"Samians","startOffset":591,"endOffset":598}]},{"id":56,"text":"So when the Lacedaemonians had besieged Samos for forty days with no success, they went away to the Peloponnesus. [2] There is a foolish tale abroad that Polycrates bribed them to depart by making and giving them a great number of gilded lead coins, as a native currency. This was the first expedition to Asia made by Dorians of Lacedaemon.23","places":[{"placeId":"570406","name":"Lacedaemonians","startOffset":12,"endOffset":26},{"placeId":"599926","name":"Samos","startOffset":40,"endOffset":45},{"placeId":"570577","name":"Peloponnesus","startOffset":100,"endOffset":112},{"placeId":"570406","name":"Lacedaemon","startOffset":329,"endOffset":339}]},{"id":57,"text":"When the Lacedaemonians were about to abandon them, the Samians who had brought an army against Polycrates sailed away too, and went to Siphnus; [2] for they were in need of money; and the Siphnians were at this time very prosperous and the richest of the islanders, because of the gold and silver mines on the island. They were so wealthy that the treasure dedicated by them at Delphi, which is as rich as any there, was made from a tenth of their income; and they divided among themselves each year's income. [3] Now when they were putting together the treasure they inquired of the oracle if their present prosperity was likely to last long; whereupon the priestess gave them this answer: [4] When the prytaneum on Siphnus becomes white And white-browed the market, then indeed a shrewd man is wanted Beware a wooden force and a red herald.  At this time the market-place and town-hall of Siphnus were adorned with Parian marble.","places":[{"placeId":"570406","name":"Lacedaemonians","startOffset":9,"endOffset":23},{"placeId":"599926","name":"Samians","startOffset":56,"endOffset":63},{"placeId":"590049","name":"Siphnus","startOffset":136,"endOffset":143},{"placeId":"590049","name":"Siphnians","startOffset":189,"endOffset":198},{"placeId":"540726","name":"Delphi","startOffset":379,"endOffset":385},{"placeId":"590049","name":"Siphnus","startOffset":720,"endOffset":727},{"placeId":"590049","name":"Siphnus","startOffset":896,"endOffset":903},{"placeId":"599868","name":"Parian","startOffset":922,"endOffset":928}]},{"id":58,"text":"They could not understand this oracle either when it was spoken or at the time of the Samians' coming. As soon as the Samians put in at Siphnus, they sent ambassadors to the town in one of their ships; [2] now in ancient times all ships were painted with vermilion;24 and this was what was meant by the warning given by the priestess to the Siphnians, to beware a wooden force and a red herald. [3] The messengers, then, demanded from the Siphnians a loan of ten talents; when the Siphnians refused them, the Samians set about ravaging their lands. [4] Hearing this the Siphnians came out at once to drive them off, but they were defeated in battle, and many of them were cut off from their town by the Samians; who presently exacted from them a hundred talents.","places":[{"placeId":"599926","name":"Samians","startOffset":86,"endOffset":93},{"placeId":"599926","name":"Samians","startOffset":118,"endOffset":125},{"placeId":"590049","name":"Siphnus","startOffset":136,"endOffset":143},{"placeId":"590049","name":"Siphnians","startOffset":341,"endOffset":350},{"placeId":"590049","name":"Siphnians","startOffset":439,"endOffset":448},{"placeId":"590049","name":"Siphnians","startOffset":481,"endOffset":490},{"placeId":"599926","name":"Samians","startOffset":509,"endOffset":516},{"placeId":"590049","name":"Siphnians","startOffset":570,"endOffset":579},{"placeId":"599926","name":"Samians","startOffset":703,"endOffset":710}]},{"id":59,"text":"Then the Samians took from the men of Hermione, instead of money, the island Hydrea which is near to the Peloponnesus, and gave it to men of Troezen for safekeeping; they themselves settled at Cydonia in Crete, though their voyage had been made with no such intent, but rather to drive Zacynthians out of the island. [2] Here they stayed and prospered for five years; indeed, the temples now at Cydonia and the shrine of Dictyna are the Samians' work; [3] but in the sixth year Aeginetans and Cretans came and defeated them in a sea-fight and made slaves of them; moreover they cut off the ships' prows, that were shaped like boars' heads, and dedicated them in the temple of Athena in Aegina. [4] The Aeginetans did this out of a grudge against the Samians; for previously the Samians, in the days when Amphicrates was king of Samos, sailing in force against Aegina, had hurt the Aeginetans and been hurt by them. This was the cause.","places":[{"placeId":"599926","name":"Samians","startOffset":9,"endOffset":16},{"placeId":"570299","name":"Hydrea","startOffset":77,"endOffset":83},{"placeId":"570577","name":"Peloponnesus","startOffset":105,"endOffset":117},{"placeId":"570756","name":"Troezen","startOffset":141,"endOffset":148},{"placeId":"589886","name":"Cydonia","startOffset":193,"endOffset":200},{"placeId":"589748","name":"Crete","startOffset":204,"endOffset":209},{"placeId":"531155","name":"Zacynthians","startOffset":286,"endOffset":297},{"placeId":"589886","name":"Cydonia","startOffset":395,"endOffset":402},{"placeId":"599926","name":"Samians","startOffset":437,"endOffset":444},{"placeId":"579844","name":"Aeginetans","startOffset":478,"endOffset":488},{"placeId":"589748","name":"Cretans","startOffset":493,"endOffset":500},{"placeId":"579853","name":"Aegina","startOffset":686,"endOffset":692},{"placeId":"579844","name":"Aeginetans","startOffset":702,"endOffset":712},{"placeId":"599926","name":"Samians","startOffset":750,"endOffset":757},{"placeId":"599926","name":"Samians","startOffset":778,"endOffset":785},{"placeId":"599926","name":"Samos","startOffset":828,"endOffset":833},{"placeId":"579853","name":"Aegina","startOffset":860,"endOffset":866},{"placeId":"579844","name":"Aeginetans","startOffset":881,"endOffset":891}]},{"id":60,"text":"I have written at such length of the Samians, because the three greatest works of all the Greeks were engineered by them. The first of these is the tunnel with a mouth at either end driven through the base of a hill nine hundred feet high; [2] the whole tunnel is forty-two hundred feet long,25 eight feet high and eight feet wide; and throughout the whole of its length there runs a channel thirty feet deep and three feet wide, through which the water coming from an abundant spring is carried by pipes to the city of Samos. [3] The designer of this work was Eupalinus son of Naustrophus, a Megarian. This is one of the three works; the second is a breakwater in the sea enclosing the harbor, sunk one hundred and twenty feet, and more than twelve hundred feet in length. [4] The third Samian work is the temple, which is the greatest of all the temples of which we know; its first builder was Rhoecus son of Philes, a Samian. It is for this cause that I have expounded at more than ordinary length of Samos.","places":[{"placeId":"599926","name":"Samians","startOffset":37,"endOffset":44},{"placeId":"geonames-390903","name":"Greeks","startOffset":90,"endOffset":96},{"placeId":"599926","name":"Samos","startOffset":520,"endOffset":525},{"placeId":"570468","name":"Megarian","startOffset":593,"endOffset":601},{"placeId":"599926","name":"Samian","startOffset":788,"endOffset":794},{"placeId":"599926","name":"Samian","startOffset":921,"endOffset":927},{"placeId":"599926","name":"Samos","startOffset":1004,"endOffset":1009}]},{"id":61,"text":"Now after Cambyses, son of Cyrus, had lost his mind, while he was still in Egypt, two Magus brothers rebelled against him.26 One of them had been left by Cambyses as steward of his house; this man now revolted from him, perceiving that the death of Smerdis was kept secret, and that few knew of it, most believing him to be still alive. [2] Therefore he plotted to gain the royal power: he had a brother, his partner, as I said, in rebellion; this brother was in appearance very like Cyrus' son Smerdis, whom Cambyses, his brother, had killed; nor was he like him in appearance only, but he bore the same name too, Smerdis. [3] Patizeithes the Magus persuaded this man that he would manage everything for him; he brought his brother and set him on the royal throne; then he sent heralds to all parts, one of whom was to go to Egypt and proclaim to the army that henceforth they must obey not Cambyses but Smerdis, the son of Cyrus.","places":[{"placeId":"981503","name":"Egypt","startOffset":75,"endOffset":80},{"placeId":"981503","name":"Egypt","startOffset":826,"endOffset":831}]},{"id":62,"text":"So this proclamation was made everywhere. The herald appointed to go to Egypt, finding Cambyses and his army at Ecbatana in Syria, came out before them all and proclaimed the message given him by the Magus. [2] When Cambyses heard what the herald said, he supposed that it was the truth, and that Prexaspes, when sent to kill Smerdis, had not done it but had played Cambyses false; and he said, fixing his eyes on Prexaspes, Is it thus, Prexaspes, that you carried out my instructions? [3] No, said Prexaspes, this is not true, sire, that your brother Smerdis has rebelled against you; he cannot have any quarrel with you, small or great; I myself did as you instructed, and I buried him with my own hands. [4] If then the dead can rise, you may expect to see Astyages the Mede rise up against you; but if things are as usual, assuredly no harm to you will arise from Smerdis. Now then this is my opinion, that we pursue this herald and interrogate him, to learn from whom he comes with his proclamation that we must obey Smerdis as our king.","places":[{"placeId":"981503","name":"Egypt","startOffset":72,"endOffset":77},{"placeId":"903021","name":"Ecbatana","startOffset":112,"endOffset":120},{"placeId":"1306","name":"Syria","startOffset":124,"endOffset":129},{"placeId":"903080","name":"Mede","startOffset":778,"endOffset":782}]},{"id":63,"text":"Cambyses liked Prexaspes' advice; the herald was pursued at once and brought; and when he came, Prexaspes put this question to him: Fellow, you say that your message is from Cyrus' son Smerdis; tell me this now, and you may go away unpunished: was it Smerdis who appeared to you and gave you this charge, or was it one of his servants? [2] Since King Cambyses marched to Egypt, answered the herald, I have never seen Smerdis the son of Cyrus; the Magus whom Cambyses made overseer of his house gave me the message, saying that it was the will of Smerdis, son of Cyrus, that I should make it known to you. [3] So spoke the herald, telling the whole truth; and Cambyses said, Prexaspes, having done what you were told like a good man you are free of blame; but who can this Persian be who rebels against me and usurps the name of Smerdis? [4] Prexaspes replied, I think, sire, that I understand what has been done here; the rebels are the Magi, Patizeithes whom you left steward of your house, and his brother Smerdis.","places":[{"placeId":"981503","name":"Egypt","startOffset":374,"endOffset":379},{"placeId":"geonames-130758","name":"Persian","startOffset":779,"endOffset":786}]},{"id":64,"text":"The truth of the words and of a dream struck Cambyses the moment he heard the name Smerdis; for he had dreamt that a message had come to him that Smerdis sitting on the royal throne touched heaven with his head; [2] and perceiving that he had killed his brother without cause, he wept bitterly for Smerdis. Having wept, and grieved by all his misfortune, he sprang upon his horse, with intent to march at once to Susa against the Magus. [3] As he sprang upon his horse, the cap fell off the sheath of his sword, and the naked blade pierced his thigh, wounding him in the same place where he had once wounded the Egyptian god Apis; and believing the wound to be mortal, Cambyses asked what was the name of the town where he was. [4] They told him it was Ecbatana. Now a prophecy had before this come to him from Buto, that he would end his life at Ecbatana; Cambyses supposed this to signify that he would die in old age at the Median Ecbatana, his capital city; but as the event proved, the oracle prophesied his death at Ecbatana of Syria. [5] So when he now inquired and learned the name of the town, the shock of his wound, and of the misfortune that came to him from the Magus, brought him to his senses; he understood the prophecy and said: Here Cambyses son of Cyrus is to die.","places":[{"placeId":"912936","name":"Susa","startOffset":413,"endOffset":417},{"placeId":"981503","name":"Egyptian","startOffset":612,"endOffset":620},{"placeId":"903021","name":"Ecbatana","startOffset":753,"endOffset":761},{"placeId":"727094","name":"Buto","startOffset":811,"endOffset":815},{"placeId":"903021","name":"Ecbatana","startOffset":847,"endOffset":855},{"placeId":"903080","name":"Median","startOffset":927,"endOffset":933},{"placeId":"903021","name":"Ecbatana","startOffset":934,"endOffset":942},{"placeId":"903021","name":"Ecbatana","startOffset":1022,"endOffset":1030},{"placeId":"1306","name":"Syria","startOffset":1034,"endOffset":1039}]},{"id":65,"text":"At this time he said no more. But about twenty days later, he sent for the most prominent of the Persians that were about him, and thus addressed them: Persians, I have to make known to you something which I kept most strictly concealed. [2] When I was in Egypt I had a dream, which I wish I had not had; it seemed to me that a messenger came from home to tell me that Smerdis sitting on the royal throne touched heaven with his head. [3] Then I feared that my brother would take away my sovereignty from me, and I acted with more haste than wisdom; for it is not in the power of human nature to run away from what is to be; but I, blind as I was, sent Prexaspes to Susa to kill Smerdis. When that great wrong was done I lived without fear, for I never thought that when Smerdis was removed another man might rise against me. [4] But I mistook altogether what was to be; I have killed my brother when there was no need, and I have lost my kingdom none the less; for it was the Magus Smerdis that the divinity forewarned in the dream would revolt. [5] Now he has been done for by me, and I would have you believe that Smerdis Cyrus' son no longer lives; the Magi rule the kingdom, the one that I left caretaker of my house, and his brother Smerdis. So then, the man is dead of an unholy destiny at the hands of his relations who ought to have been my avenger for the disgrace I have suffered from the Magi; [6] and as he is no longer alive, necessity constrains me to charge you, men of Persia, in his place, with the last desire of my life. In the name of the gods of my royal house I charge all of you, but chiefly those Achaemenids that are here, not to let the sovereignty fall again into Median hands; if they have it after getting it by trickery, take it back through trickery of your own; if they have got it away by force, then by force all the stronger get it back. [7] And if you do this, may your land bring forth fruit, and your women and your flocks and herds be blessed with offspring, remaining free for all time; but if you do not get the kingdom back or attempt to get it back, then I pray things turn out the opposite for you, and on top of this, that every Persian meet an end such as mine. With that Cambyses wept bitterly for all that had happened to him.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":97,"endOffset":105},{"placeId":"geonames-130758","name":"Persians","startOffset":153,"endOffset":161},{"placeId":"981503","name":"Egypt","startOffset":257,"endOffset":262},{"placeId":"912936","name":"Susa","startOffset":667,"endOffset":671},{"placeId":"geonames-130758","name":"Persia","startOffset":1487,"endOffset":1493},{"placeId":"903080","name":"Median","startOffset":1693,"endOffset":1699},{"placeId":"geonames-130758","name":"Persian","startOffset":2176,"endOffset":2183}]},{"id":66,"text":"When the Persians saw their king weep, they all tore the clothing which they wore and wailed loud and long. [2] But when after this the bone rotted and the thigh rapidly putrefied, it carried off Cambyses son of Cyrus, who had reigned in all seven years and five months, but was altogether childless, without male or female issue. [3] To the Persians who were present it was quite incredible that the Magi were masters of the kingdom; they believed that Cambyses' intent was to deceive them with his story of Smerdis' death, so that all Persia might be embroiled in a war against him.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":9,"endOffset":17},{"placeId":"geonames-130758","name":"Persians","startOffset":342,"endOffset":350},{"placeId":"geonames-130758","name":"Persia","startOffset":537,"endOffset":543}]},{"id":67,"text":"So they believed that it was Cyrus' son Smerdis who had been made king. For Prexaspes stoutly denied that he had killed Smerdis, since now that Cambyses was dead, it was not safe for him to say that he had slain the son of Cyrus with his own hands. [2] Cambyses being dead, the Magus, pretending to be the Smerdis of like name, Cyrus' son, reigned without fear for the seven months by which Cambyses had fallen short of reigning eight years. [3] In this time he benefitted all his subjects to such an extent that after his death all the Asiatics except the Persians wished him back; for he sent to every nation he ruled and proclaimed an exemption for three years from military service and from tribute.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":557,"endOffset":565}]},{"id":68,"text":"Such was his proclamation at the beginning of his reign; but in the eighth month he was exposed in the following manner. There was one Otanes, son of Pharnaspes, as well-born and rich a man as any Persian. [2] This Otanes was the first to guess that the Magus was not Cyrus' son Smerdis and who, in fact, he was; the reason was, that he never left the acropolis nor summoned any notable Persian into his presence. And having formed this suspicion Otanes did as follows: [3] Cambyses had taken his daughter, whose name was Phaedyme; this same girl the Magus had now and he lived with her and with all Cambyses' other wives. Otanes sent to this daughter, asking at what man's side she lay, with Smerdis, Cyrus' son, or with some other? [4] She sent back a message that she did not know; for (she said) she had never seen Cyrus' son Smerdis, nor did she know who her bedfellow was. Then Otanes sent a second message, to this effect: If you do not know Cyrus' son Smerdis yourself, then find out from Atossa who it is that she and you are living with; for surely she knows her own brother. [5] To this his daughter replied: I cannot communicate with Atossa, nor can I see any other of the women of the household; for no sooner had this man, whoever he is, made himself king, than he sent us to live apart, each in her own appointed place.","places":[{"placeId":"geonames-130758","name":"Persian","startOffset":197,"endOffset":204},{"placeId":"geonames-130758","name":"Persian","startOffset":387,"endOffset":394}]},{"id":69,"text":"When Otanes heard that, he saw more clearly how the matter stood; and he sent her this third message: [2] Daughter, your noble birth obliges you to run any risk that your father commands you to face. If this man is not Smerdis son of Cyrus but who I think he is, then he must not get away with sleeping with you and sitting on the throne of Persia, but be punished. [3] Now, then, when he lies with you and you see that he is sleeping, feel his ears; if he has ears, rest assured that you are living with Smerdis son of Cyrus; but if he has none, it is Smerdis the Magus. [4] Phaedyme answered by messenger that she would run a very great risk by so doing; for if it should turn out that he had no ears, and she were caught feeling for them, he would surely kill her; nevertheless she would do it. [5] So she promised to do this for her father. Cyrus son of Cambyses during his reign cut off the ears of this Magus Smerdis for some grave reason. [6] So Phaedyme, daughter of Otanes, performed her promise to her father. When it was her turn to go to the Magus (for their wives go in sequence to the Persians), she came to his bed and felt for the Magus' ears while he slumbered deeply; and having with no great difficulty assured herself that he had no ears, she sent and told this to her father as soon as it was morning.","places":[{"placeId":"geonames-130758","name":"Persia","startOffset":342,"endOffset":348},{"placeId":"geonames-130758","name":"Persians","startOffset":1101,"endOffset":1109}]},{"id":70,"text":"Otanes then took aside two Persians of the highest rank whom he thought worthiest of trust, Aspathines and Gobryas, and told them the whole story. These, it would seem, had themselves suspected that it was so; and now they readily believed what Otanes revealed to them. [2] They resolved that each should take into his confidence that Persian whom he most trusted; Otanes brought in Intaphrenes, Gobryas brought Megabyzus, and Aspathines Hydarnes.27 [3] When they were six, Darius, whose father, Hystaspes, was a subordinate governor of the Persians, arrived at Susa. When he came, then, the six Persians resolved to include Darius too.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":27,"endOffset":35},{"placeId":"geonames-130758","name":"Persian","startOffset":335,"endOffset":342},{"placeId":"geonames-130758","name":"Persians","startOffset":541,"endOffset":549},{"placeId":"912936","name":"Susa","startOffset":562,"endOffset":566},{"placeId":"geonames-130758","name":"Persians","startOffset":596,"endOffset":604}]},{"id":71,"text":"The seven then met and gave each other tokens of good faith and spoke together; and when it was Darius' turn to declare his mind, he spoke as follows: [2] I thought that I alone knew that it was the Magus who was king and that Smerdis son of Cyrus was dead; and it was for this reason that I made haste to come, that I might effect the Magus' death; but since it turns out that you know too and not only I, I think that we should act at once and not put it off. [3] Otanes replied, son of Hystaspes, you have a good father and seem likely yourself to be in no way inferior to your father; do not hurry this undertaking without thinking, but take it up more prudently; there must be more of us to try it. [4] To this Darius answered: You gentlemen who are here, if you do as Otanes says, know that you will die horribly; for someone will inform the Magus, looking to enrich himself alone. [5] You ought to have done it by yourselves; but since you decided to confide in others and have included me, let us either act today or else understand that if the present day passes, nobody else will betray you before I do, for I shall myself betray you to the Magus.","places":[]},{"id":72,"text":"To this Otanes replied, seeing Darius' vehemence, Since you force us to hurry and will tolerate no delay, tell us now yourself how we shall pass into the palace and attack them. For you know yourself, I suppose, if not because you have seen them then you have heard, that guards are stationed all around; how shall we go past the guards? [2] Otanes, answered Darius, there are many things that cannot be described in words, but in deed; and there are other things that can be described in words, but nothing illustrious comes of them. You know well that the guards who are set are easy to go by. [3] There is no one who will not allow us to pass, from respect or from fear, because of who we are; and further, I have myself the best pretext for entering, for I shall say that I have just arrived from Persia and have a message for the king from my father. [4] When it is necessary to lie, lie. For we want the same thing, liars and those who tell the truth; some lie to win credence and advantage by lies, while others tell the truth in order to obtain some advantage by the truth and to be more trusted; thus we approach the same ends by different means. [5] If the hope of advantage were taken away, the truth-teller would be as ready to lie as the liar to tell the truth. Now if any of the watchmen willingly let us pass, it will be better for him later. But if any tries to withstand us, let us note him as an enemy, and so thrust ourselves in and begin our work.","places":[]},{"id":73,"text":"Then Gobryas said, Friends, when shall we have a better chance to win back the kingship, or, if we cannot, to die, since we who are Persians are ruled by a Mede, a Magus, and he a man that has no ears? [2] Those of you that were with Cambyses at his death-bed of course remember the curse which he pronounced as he died on the Persians if they should not try to get back the kingship, although we did not believe Cambyses then, but thought that he spoke to deceive us. [3] Now therefore my vote is that we follow Darius' plan, and not quit this council to do anything else but attack the Magus at once. So spoke Gobryas; and they all consented to what he said.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":133,"endOffset":141},{"placeId":"903080","name":"Mede","startOffset":157,"endOffset":161},{"placeId":"geonames-130758","name":"Persians","startOffset":328,"endOffset":336}]},{"id":74,"text":"While they were making these plans, by coincidence the following happened. The Magi had resolved after consideration to make a friend of Prexaspes, because he had been wronged by Cambyses (who had killed his son with an arrow) and because he alone knew of the death of Cyrus' son Smerdis, having himself been the slayer; but besides this, because he was in great repute among the Persians. [2] For these reasons they summoned him and tried to make him a friend, having bound him by tokens of good faith and oaths to keep to himself and betray to no one their deception of the Persians, and promising to give him all things in great abundance. [3] When Prexaspes agreed to do this, since the Magi importuned him, the Magi made this second proposal to him, that they should call an assembly of all the Persians before the palace wall, and he should go up on to a tower and declare that it was Smerdis son of Cyrus and no other who was king of Persia. [4] They gave him this charge, because they thought him to be the man most trusted by the Persians, and because he had often asserted that Cyrus' son Smerdis was alive, and had denied the murder.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":380,"endOffset":388},{"placeId":"geonames-130758","name":"Persians","startOffset":576,"endOffset":584},{"placeId":"geonames-130758","name":"Persians","startOffset":800,"endOffset":808},{"placeId":"geonames-130758","name":"Persia","startOffset":941,"endOffset":947},{"placeId":"geonames-130758","name":"Persians","startOffset":1039,"endOffset":1047}]},{"id":75,"text":"When Prexaspes said that he was ready to do this too, the Magi summoned the Persians together, and brought him up on to a tower and bade him speak. Then, deliberately forgetting all the Magi's instructions, he traced the lineage of Cyrus from Achaemenes downwards; when he came at last to the name of Cyrus, he recounted all the good which that king had done to Persia, [2] and after he had narrated this, he revealed the truth, saying that he had concealed it before, as it had not been safe for him to tell what had happened, but at the present time necessity forced him to reveal it: and he said that he himself, forced by Cambyses, had killed Smerdis son of Cyrus, and that the Magi were in power. [3] Then, invoking a terrible curse on the Persians if they did not win back the throne and take vengeance on the Magi, he threw himself headlong down from the tower; so Prexaspes, a man who was always well thought of, perished in this way.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":76,"endOffset":84},{"placeId":"geonames-130758","name":"Persia","startOffset":362,"endOffset":368},{"placeId":"geonames-130758","name":"Persians","startOffset":745,"endOffset":753}]},{"id":76,"text":"The seven Persians, when they had decided to attack the Magi at once and not delay, prayed to the gods and set forth, knowing nothing of what had happened to Prexaspes. [2] But when they had gone half way they learned what had happened to Prexaspes. Then they argued there, standing beside the road, Otanes' party demanding that they delay and not attack while events were in flux, and Darius' party that they go directly and do what they had decided and not put it off. [3] While they were arguing, they saw seven pairs of hawks chase and slash and tear to bits two pairs of vultures. And seeing this all seven consented to Darius' opinion, and went on to the palace, encouraged by the birds.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":10,"endOffset":18}]},{"id":77,"text":"When they came to the gate, it turned out as Darius had expected; the guards, out of respect for the leading men in Persia and never suspecting that there would be trouble from them, allowed them to pass, who enjoyed divine guidance, and no one asked any questions. [2] And when they came to the court, they met the eunuchs that carry messages, who asked the seven why they had come; and while they were questioning these, they were threatening the watchmen for letting them pass, and restraining the seven who wanted to go on. [3] These gave each other the word, drew their knives, and stabbing the eunuchs who barred their way, went forward at a run to the men's apartment.","places":[{"placeId":"geonames-130758","name":"Persia","startOffset":116,"endOffset":122}]},{"id":78,"text":"Both the Magi were within, deliberating about the consequences of Prexaspes' act. Seeing the eunuchs in confusion and hearing their cries they both sprang up: and when they realized what was happening they turned to defending themselves. [2] One rushed to take down a bow, the other went for a spear. Then the fighting started. The one that had caught up the bow found it was no use to him, as the antagonists were close and jostling one another; but the other defended himself with his spear, wounding Aspathines in the thigh and Intaphrenes in the eye; Intaphrenes lost his eye from the wound but was not killed. [3] So one of the Magi wounded these; the other, as the bow was no use to him, fled into a chamber adjoining the men's apartment and would have shut its door. [4] Two of the seven flung into the room with him, Darius and Gobryas; as Gobryas and the Magus wrestled together, Darius stood helpless in the darkness, afraid of stabbing Gobryas. [5] Gobryas, seeing Darius stand helpless, asked why he did not lend a hand; and he said, Because I am afraid for you, that I might stab you. And Gobryas answered, Stick your sword even if it goes through us both. So Darius complying stabbed with his knife and somehow stuck the Magus.","places":[]},{"id":79,"text":"When they had killed the Magi and cut off their heads, they left their wounded there because of their infirmity and for the sake of guarding the acropolis, while five of them carrying the Magi's heads ran outside with much shouting and commotion, calling all Persians to aid, telling what they had done and showing the heads; at the same time they killed every Magus that came in their way. [2] The Persians, when they learned what had been done by the seven and how the Magi had tricked them, resolved to follow the example set, and drew their daggers and killed all the Magi they could find; and if nightfall had not stopped them they would not have left one Magus alive. [3] This day is the greatest holy day that all Persians alike keep; they celebrate a great festival on it, which they call the Massacre of the Magi; while the festival lasts no Magus may go outdoors, but during this day the Magi remain in their houses.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":259,"endOffset":267},{"placeId":"geonames-130758","name":"Persians","startOffset":399,"endOffset":407},{"placeId":"geonames-130758","name":"Persians","startOffset":721,"endOffset":729}]},{"id":80,"text":"After the tumult quieted down, and five days passed, the rebels against the Magi held a council on the whole state of affairs, at which sentiments were uttered which to some Greeks seem incredible, but there is no doubt that they were spoken. [2] Otanes was for turning the government over to the Persian people: It seems to me, he said, that there can no longer be a single sovereign over us, for that is not pleasant or good. You saw the insolence of Cambyses, how far it went, and you had your share of the insolence of the Magus. [3] How can monarchy be a fit thing, when the ruler can do what he wants with impunity? Give this power to the best man on earth, and it would stir him to unaccustomed thoughts. Insolence is created in him by the good things to hand, while from birth envy is rooted in man. [4] Acquiring the two he possesses complete evil; for being satiated he does many reckless things, some from insolence, some from envy. And yet an absolute ruler ought to be free of envy, having all good things; but he becomes the opposite of this towards his citizens; he envies the best who thrive and live, and is pleased by the worst of his fellows; and he is the best confidant of slander. [5] Of all men he is the most inconsistent; for if you admire him modestly he is angry that you do not give him excessive attention, but if one gives him excessive attention he is angry because one is a flatter. But I have yet worse to say of him than that; he upsets the ancestral ways and rapes women and kills indiscriminately. [6] But the rule of the multitude has in the first place the loveliest name of all, equality, and does in the second place none of the things that a monarch does. It determines offices by lot, and holds power accountable, and conducts all deliberating publicly. Therefore I give my opinion that we make an end of monarchy and exalt the multitude, for all things are possible for the majority.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":174,"endOffset":180},{"placeId":"geonames-130758","name":"Persian","startOffset":297,"endOffset":304}]},{"id":81,"text":"Such was the judgment of Otanes: but Megabyzus urged that they resort to an oligarchy. I agree, said he, with all that Otanes says against the rule of one; but when he tells you to give the power to the multitude, his judgment strays from the best. Nothing is more foolish and violent than a useless mob; [2] for men fleeing the insolence of a tyrant to fall victim to the insolence of the unguided populace is by no means to be tolerated. Whatever the one does, he does with knowledge, but for the other knowledge is impossible; how can they have knowledge who have not learned or seen for themselves what is best, but always rush headlong and drive blindly onward, like a river in flood? [3] Let those like democracy who wish ill to Persia; but let us choose a group of the best men and invest these with the power. For we ourselves shall be among them, and among the best men it is likely that there will be the best counsels.","places":[{"placeId":"geonames-130758","name":"Persia","startOffset":738,"endOffset":744}]},{"id":82,"text":"Such was the judgment of Megabyzus. Darius was the third to express his opinion. It seems to me, he said, that Megabyzus speaks well concerning democracy but not concerning oligarchy. For if the three are proposed and all are at their best for the sake of argument, the best democracy and oligarchy and monarchy, I hold that monarchy is by far the most excellent. [2] One could describe nothing better than the rule of the one best man; using the best judgment, he will govern the multitude with perfect wisdom, and best conceal plans made for the defeat of enemies. [3] But in an oligarchy, the desire of many to do the state good service often produces bitter hate among them; for because each one wishes to be first and to make his opinions prevail, violent hate is the outcome, from which comes faction and from faction killing, and from killing it reverts to monarchy, and by this is shown how much better monarchy is. [4] Then again, when the people rule it is impossible that wickedness will not occur; and when wickedness towards the state occurs, hatred does not result among the wicked, but strong alliances; for those that want to do the state harm conspire to do it together. This goes on until one of the people rises to stop such men. He therefore becomes the people's idol, and being their idol is made their monarch; and thus he also proves that monarchy is best. [5] But (to conclude the whole matter in one word) tell me, where did freedom come from for us and who gave it, from the people or an oligarchy or a single ruler? I believe, therefore, that we who were liberated through one man should maintain such a government, and, besides this, that we should not alter our ancestral ways that are good; that would not be better.","places":[]},{"id":83,"text":"Having to choose between these three options, four of the seven men preferred the last. Then Otanes, whose proposal to give the Persians equality was defeated, spoke thus among them all: [2] Fellow partisans, it is plain that one of us must be made king (whether by lot, or entrusted with the office by the choice of the Persians, or in some other way), but I shall not compete with you; I desire neither to rule nor to be ruled; but if I waive my claim to be king, I make this condition, that neither I nor any of my descendants shall be subject to any one of you. [3] To these terms the six others agreed; Otanes took no part in the contest but stood aside; and to this day his house (and no other in Persia) remains free, and is ruled only so far as it is willing to be, so long as it does not transgress Persian law.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":128,"endOffset":136},{"placeId":"geonames-130758","name":"Persians","startOffset":322,"endOffset":330},{"placeId":"geonames-130758","name":"Persia","startOffset":705,"endOffset":711},{"placeId":"geonames-130758","name":"Persian","startOffset":810,"endOffset":817}]},{"id":84,"text":"The rest of the seven then considered what was the fairest way of making a king; and they decided that if another of the seven than Otanes should gain the royal power, that Otanes and his descendants should receive a yearly gift of Median clothing and everything else that the Persians hold most valuable. The reason for this decision was that it was he who had first planned the matter and assembled the conspirators. [2] For Otanes, then, they choose this particular honor; but with regard to all of them they decreed that any one of the seven should, if he wished, enter the king's palace unannounced, except when the king was sleeping with a woman; and that the king should be forbidden to take a wife except from the households of the conspirators. [3] As for the making of a king, they decided that he should be elected whose horse, after they were all in their saddles in the suburb of the city, should first be heard to neigh at sunrise.","places":[{"placeId":"903080","name":"Median","startOffset":232,"endOffset":238},{"placeId":"geonames-130758","name":"Persians","startOffset":277,"endOffset":285}]},{"id":85,"text":"Now Darius had a clever groom, whose name was Oebares. When the council broke up, Darius said to him: Oebares, we have resolved to do as follows about the kingship: he shall be elected whose horse, after we are all mounted on our horses in the suburb of the city, neighs first at sunrise. Now if you have any cunning, figure out how we and no one else can win this prize. [2] Master, Oebares answered, if this is to determine whether you become king or not, be confident for this reason and have an easy mind, for no one else shall be king before you, such are the tricks I have. Then, said Darius, if you have any trick such as you say, use it and don't put it off, for tomorrow is the day of decision. [3] When Oebares heard that, he did as follows. At nightfall he brought one of the mares which Darius' horse particularly favored, and tethered her in the suburb of the city; then bringing Darius' horse, he repeatedly led him near the horse, bumping against the mare, and at last let the horse mount.","places":[]},{"id":86,"text":"At dawn of day the six came on horseback as they had agreed. As they rode out through the suburb and came to the place where the mare had been tethered in the past night, Darius' horse trotted forward and whinnied; [2] and as he so did there came lightning and thunder out of a clear sky. These signs given to Darius were thought to be foreordained and made his election perfect; his companions leapt from their horses and bowed to him.","places":[]},{"id":87,"text":"Some say that this was Oebares' plan; but there is another story in Persia besides this: that he rubbed this mare's vulva with his hand, which he then kept inside his clothing until the six were about to let go their horses at sunrise, when he took his hand out and held it to the nostrils of Darius' horse, which at once snorted and whinnied.","places":[{"placeId":"geonames-130758","name":"Persia","startOffset":68,"endOffset":74}]},{"id":88,"text":"So Darius son of Hystaspes was made king,28 and the whole of Asia, which Cyrus first and Cambyses after him had conquered, was subject to him, except the Arabians; these did not yield as of slaves to the Persians, but were united to them by friendship, having given Cambyses passage into Egypt, which the Persians could not enter without the consent of the Arabians. [2] Darius took wives from the noblest houses of Persia, marrying Cyrus' daughters Atossa and Artystone; Atossa had been a wife of her brother Cambyses and afterwards of the Magus; Artystone was a virgin. [3] He also married a daughter of Cyrus' son Smerdis, whose name was Parmys, and the daughter of Otanes who had discovered the truth about the Magus; and everything was full of his power. First he made and set up a carved stone, upon which was cut the figure of a horseman, with this inscription: Darius son of Hystaspes, aided by the excellence of his horse (here followed the horse's name) and of Oebares his groom, got possession of the kingdom of Persia.","places":[{"placeId":"29475","name":"Arabians","startOffset":154,"endOffset":162},{"placeId":"geonames-130758","name":"Persians","startOffset":204,"endOffset":212},{"placeId":"981503","name":"Egypt","startOffset":288,"endOffset":293},{"placeId":"geonames-130758","name":"Persians","startOffset":305,"endOffset":313},{"placeId":"29475","name":"Arabians","startOffset":357,"endOffset":365},{"placeId":"geonames-130758","name":"Persia","startOffset":416,"endOffset":422},{"placeId":"geonames-130758","name":"Persia","startOffset":1026,"endOffset":1032}]},{"id":89,"text":"Having done these things in Persia, he divided his dominions into twenty provinces, which they call satrapies;29 and having divided his dominions and appointed governors, he instructed each people to pay him tribute, consolidating neighboring peoples and distributing outlying peoples among different provinces, passing over those adjoining. [2] I will now show how he divided his provinces and the tributes which were paid him yearly. Those that paid in silver were required to render the weight of a Babylonian talent; those that paid in gold, of a Euboic talent; the Babylonian talent being equal to seventy-eight Euboic minae. [3] In the reigns of Cyrus and Cambyses after him there was no fixed tribute, but payment was made in gifts. It is because of this fixing of tribute, and other similar ordinances, that the Persians called Darius the merchant, Cambyses the master, and Cyrus the father; for Darius made petty profit out of everything, Cambyses was harsh and arrogant, Cyrus was merciful and always worked for their well-being.","places":[{"placeId":"geonames-130758","name":"Persia","startOffset":28,"endOffset":34},{"placeId":"893951","name":"Babylonian","startOffset":502,"endOffset":512},{"placeId":"540775","name":"Euboic","startOffset":551,"endOffset":557},{"placeId":"893951","name":"Babylonian","startOffset":570,"endOffset":580},{"placeId":"540775","name":"Euboic","startOffset":617,"endOffset":623},{"placeId":"geonames-130758","name":"Persians","startOffset":820,"endOffset":828}]},{"id":90,"text":"The Ionians, Magnesians of Asia, Aeolians, Carians, Lycians, Milyans, and Pamphylians, on whom Darius laid one joint tribute, paid a revenue of four hundred talents of silver. This was established as his first province. The Mysians, Lydians, Lasonians, Cabalians, and Hytennians paid five hundred talents; this was the second province. [2] The third comprised the Hellespontians on the right of the entrance of the straits, the Phrygians, Thracians of Asia, Paphlagonians, Mariandynians, and Syrians; these paid three hundred and sixty talents of tribute. [3] The fourth province was Cilicia. This rendered three hundred and sixty white horses, one for each day in the year, and five hundred talents of silver. A hundred and forty of these were expended on the horsemen who were the guard of Cilicia; the three hundred and sixty that remained were paid to Darius.","places":[{"placeId":"550597","name":"Ionians","startOffset":4,"endOffset":11},{"placeId":"599778","name":"Magnesians","startOffset":13,"endOffset":23},{"placeId":"550406","name":"Aeolians","startOffset":33,"endOffset":41},{"placeId":"991381","name":"Carians","startOffset":43,"endOffset":50},{"placeId":"638965","name":"Lycians","startOffset":52,"endOffset":59},{"placeId":"638996","name":"Milyans","startOffset":61,"endOffset":68},{"placeId":"1001913","name":"Pamphylians","startOffset":74,"endOffset":85},{"placeId":"550759","name":"Mysians","startOffset":224,"endOffset":231},{"placeId":"550701","name":"Lydians","startOffset":233,"endOffset":240},{"placeId":"638881","name":"Cabalians","startOffset":253,"endOffset":262},{"placeId":"501434","name":"Hellespontians","startOffset":364,"endOffset":378},{"placeId":"609502","name":"Phrygians","startOffset":428,"endOffset":437},{"placeId":"1001889","name":"Thracians","startOffset":439,"endOffset":448},{"placeId":"845034","name":"Paphlagonians","startOffset":458,"endOffset":471},{"placeId":"845013","name":"Mariandynians","startOffset":473,"endOffset":486},{"placeId":"1306","name":"Syrians","startOffset":492,"endOffset":499},{"placeId":"628957","name":"Cilicia","startOffset":584,"endOffset":591},{"placeId":"628957","name":"Cilicia","startOffset":792,"endOffset":799}]},{"id":91,"text":"The fifth province was the country (except the part belonging to the Arabians, which paid no tribute) between Posideion, a city founded on the Cilician and Syrian border by Amphilochus son of Amphiaraus, and Egypt; this paid three hundred and fifty talents; in this province was all Phoenicia, and the part of Syria called Palestine, and Cyprus. [2] The sixth province was Egypt and the neighboring parts of Libya, and Cyrene and Barca, all of which were included in the province of Egypt. From here came seven hundred talents, besides the income in silver from the fish of the lake Moeris; [3] besides that silver and the assessment of grain that was given also, seven hundred talents were paid; for a hundred and twenty thousand bushels of grain were also assigned to the Persians quartered at the White Wall of Memphis and their allies. [4] The Sattagydae, Gandarii, Dadicae, and Aparytae paid together a hundred and seventy talents; this was the seventh province; the eighth was Susa and the rest of the Cissian country, paying three hundred talents.","places":[{"placeId":"29475","name":"Arabians","startOffset":69,"endOffset":77},{"placeId":"668340","name":"Posideion","startOffset":110,"endOffset":119},{"placeId":"658440","name":"Cilician","startOffset":143,"endOffset":151},{"placeId":"1306","name":"Syrian","startOffset":156,"endOffset":162},{"placeId":"981503","name":"Egypt","startOffset":208,"endOffset":213},{"placeId":"991410","name":"Phoenicia","startOffset":283,"endOffset":292},{"placeId":"1306","name":"Syria","startOffset":310,"endOffset":315},{"placeId":"1001940","name":"Palestine","startOffset":323,"endOffset":332},{"placeId":"707498","name":"Cyprus","startOffset":338,"endOffset":344},{"placeId":"981503","name":"Egypt","startOffset":373,"endOffset":378},{"placeId":"716588","name":"Libya","startOffset":408,"endOffset":413},{"placeId":"373778","name":"Cyrene","startOffset":419,"endOffset":425},{"placeId":"373750","name":"Barca","startOffset":430,"endOffset":435},{"placeId":"981503","name":"Egypt","startOffset":483,"endOffset":488},{"placeId":"736967","name":"lake Moeris","startOffset":578,"endOffset":589},{"placeId":"geonames-130758","name":"Persians","startOffset":774,"endOffset":782},{"placeId":"736963","name":"Memphis","startOffset":814,"endOffset":821},{"placeId":"59716","name":"Sattagydae","startOffset":848,"endOffset":858},{"placeId":"59820","name":"Gandarii","startOffset":860,"endOffset":868},{"placeId":"59787","name":"Dadicae","startOffset":870,"endOffset":877},{"placeId":"59688","name":"Aparytae","startOffset":883,"endOffset":891},{"placeId":"912936","name":"Susa","startOffset":983,"endOffset":987},{"placeId":"906014","name":"Cissian","startOffset":1008,"endOffset":1015}]},{"id":92,"text":"From Babylon and the rest of Assyria came to Darius a thousand talents of silver and five hundred castrated boys; this was the ninth province; Ecbatana and the rest of Media, with the Paricanians and Orthocorybantians, paid four hundred and fifty talents, and was the tenth province. [2] The eleventh comprised the Caspii, Pausicae, Pantimathi, and Daritae, paying jointly two hundred;","places":[{"placeId":"893951","name":"Babylon","startOffset":5,"endOffset":12},{"placeId":"29492","name":"Assyria","startOffset":29,"endOffset":36},{"placeId":"903021","name":"Ecbatana","startOffset":143,"endOffset":151},{"placeId":"903080","name":"Media","startOffset":168,"endOffset":173},{"placeId":"30255","name":"Paricanians","startOffset":184,"endOffset":195},{"placeId":"884887","name":"Caspii","startOffset":315,"endOffset":321},{"placeId":"60628","name":"Pausicae","startOffset":323,"endOffset":331},{"placeId":"944516","name":"Pantimathi","startOffset":333,"endOffset":343},{"placeId":"930181","name":"Daritae","startOffset":349,"endOffset":356}]},{"id":93,"text":"The twelfth, the Bactrians as far as the land of the Aegli; these paid three hundred and sixty. The thirteenth, the Pactyic country and Armenia and the lands adjoining as far as the Euxine sea; these paid four hundred. [2] The fourteenth province was made up of the Sagartii, Sarangeis, Thamanaei, Utii, Myci, and the inhabitants of those islands of the southern sea on which the king settles the so-called displaced people;30 these together paid a tribute of six hundred talents. [3] The Sacae and Caspii were the fifteenth, paying two hundred and fifty. The Parthians, Chorasmians, Sogdi, and Arii were the sixteenth, paying three hundred.","places":[{"placeId":"971705","name":"Bactrians","startOffset":17,"endOffset":26},{"placeId":"60402","name":"Aegli","startOffset":53,"endOffset":58},{"placeId":"59977","name":"Pactyic","startOffset":116,"endOffset":123},{"placeId":"981507","name":"Armenia","startOffset":136,"endOffset":143},{"placeId":"1224","name":"Euxine sea","startOffset":182,"endOffset":192},{"placeId":"29547","name":"Sarangeis","startOffset":276,"endOffset":285},{"placeId":"930223","name":"Utii","startOffset":298,"endOffset":302},{"placeId":"932472","name":"Myci","startOffset":304,"endOffset":308},{"placeId":"60021","name":"Sacae","startOffset":489,"endOffset":494},{"placeId":"884887","name":"Caspii","startOffset":499,"endOffset":505},{"placeId":"952097","name":"Parthians","startOffset":560,"endOffset":569},{"placeId":"60058","name":"Sogdi","startOffset":584,"endOffset":589},{"placeId":"961881","name":"Arii","startOffset":595,"endOffset":599}]},{"id":94,"text":"The Paricanii and Ethiopians of Asia, the seventeenth, paid four hundred; the Matieni, Saspiri, and Alarodii were the eighteenth, and two hundred talents were the appointed tribute. [2] The Moschi, Tibareni, Macrones, Mossynoeci, and Mares, the nineteenth province, were ordered to pay three hundred. The Indians made up the twentieth province. These are more in number than any nation of which we know, and they paid a greater tribute than any other province, namely three hundred and sixty talents of gold dust.","places":[{"placeId":"30255","name":"Paricanii","startOffset":4,"endOffset":13},{"placeId":"39274","name":"Ethiopians","startOffset":18,"endOffset":28},{"placeId":"884179","name":"Matieni","startOffset":78,"endOffset":85},{"placeId":"874314","name":"Alarodii","startOffset":100,"endOffset":108},{"placeId":"863847","name":"Moschi","startOffset":190,"endOffset":196},{"placeId":"857356","name":"Tibareni","startOffset":198,"endOffset":206},{"placeId":"857224","name":"Macrones","startOffset":208,"endOffset":216},{"placeId":"857239","name":"Mossynoeci","startOffset":218,"endOffset":228},{"placeId":"hestia-mares","name":"Mares","startOffset":234,"endOffset":239},{"placeId":"50004","name":"Indians","startOffset":305,"endOffset":312}]},{"id":95,"text":"Now if these Babylonian silver talents be calculated in Euboic money, the sum is seen to be nine thousand eight hundred and eighty Euboic talents: [2] and the gold coin being thirteen times the value of the silver, the gold-dust is found to be worth four thousand six hundred and eighty Euboic talents. Therefore it is seen by adding all together that Darius collected a yearly tribute of fourteen thousand five hundred and sixty talents; I take no account of figures less than ten.","places":[{"placeId":"893951","name":"Babylonian","startOffset":13,"endOffset":23},{"placeId":"540775","name":"Euboic","startOffset":56,"endOffset":62},{"placeId":"540775","name":"Euboic","startOffset":131,"endOffset":137},{"placeId":"540775","name":"Euboic","startOffset":287,"endOffset":293}]},{"id":96,"text":"This was Darius' revenue from Asia and a few parts of Libya. But as time went on he drew tribute also from the islands and the dwellers in Europe, as far as Thessaly. [2] The tribute is stored by the king in this fashion: he melts it down and pours it into earthen vessels; when the vessel is full he breaks the earthenware away, and when he needs money coins as much as serves his purpose.","places":[{"placeId":"716588","name":"Libya","startOffset":54,"endOffset":59},{"placeId":"1332","name":"Thessaly","startOffset":157,"endOffset":165}]},{"id":97,"text":"These were the governments and appointments of tribute. The Persian country is the only one which I have not recorded as tributary; for the Persians live free from all taxes. [2] As for those on whom no tribute was laid, but who rendered gifts instead, they were, firstly, the Ethiopians nearest to Egypt, whom Cambyses conquered in his march towards the long-lived Ethiopians; and also those who dwell about the holy Nysa,31 where Dionysus is the god of their festivals. These Ethiopians and their neighbors use the same seed as the Indian Callantiae, and they live underground. [3] These together brought every other year and still bring a gift of two choenixes32 of unrefined gold, two hundred blocks of ebony, five Ethiopian boys, and twenty great elephants' tusks. [4] Gifts were also required of the Colchians and their neighbors as far as the Caucasus mountains (which is as far as the Persian rule reaches, the country north of the Caucasus paying no regard to the Persians); these were rendered every four years and are still rendered, namely, a hundred boys and as many maids. [5] The Arabians rendered a thousand talents' weight of frankincense yearly. Such were the gifts of these peoples to the king, besides the tribute.","places":[{"placeId":"geonames-130758","name":"Persian","startOffset":60,"endOffset":67},{"placeId":"geonames-130758","name":"Persians","startOffset":140,"endOffset":148},{"placeId":"39274","name":"Ethiopians","startOffset":277,"endOffset":287},{"placeId":"981503","name":"Egypt","startOffset":299,"endOffset":304},{"placeId":"39274","name":"Ethiopians","startOffset":366,"endOffset":376},{"placeId":"60594","name":"Nysa","startOffset":418,"endOffset":422},{"placeId":"39274","name":"Ethiopians","startOffset":478,"endOffset":488},{"placeId":"50004","name":"Indian","startOffset":534,"endOffset":540},{"placeId":"39274","name":"Ethiopian","startOffset":719,"endOffset":728},{"placeId":"863770","name":"Colchians","startOffset":806,"endOffset":815},{"placeId":"863766","name":"Caucasus mountains","startOffset":850,"endOffset":868},{"placeId":"geonames-130758","name":"Persian","startOffset":893,"endOffset":900},{"placeId":"863766","name":"Caucasus","startOffset":940,"endOffset":948},{"placeId":"geonames-130758","name":"Persians","startOffset":973,"endOffset":981},{"placeId":"29475","name":"Arabians","startOffset":1095,"endOffset":1103}]},{"id":98,"text":"All this abundance of gold, from which the Indians send the aforementioned gold-dust to the king, they obtain in the following way. [2] To the east of the Indian country is sand. Of all the people of Asia whom we know - even those about whom something is said with precision - the Indians dwell nearest to the dawn and the rising sun; for on the eastern side of India all is desolate because of the sand. [3] There are many Indian nations, none speaking the same language; some of them are nomads, some not; some dwell in the river marshes and live on raw fish, which they catch from reed boats. Each boat is made of one joint of reed.33 [4] These Indians wear clothes of bullrushes; they mow and cut these from the river, then weave them crosswise like a mat, and wear them like a breastplate.","places":[{"placeId":"50004","name":"Indians","startOffset":43,"endOffset":50},{"placeId":"50004","name":"Indian","startOffset":155,"endOffset":161},{"placeId":"50004","name":"Indians","startOffset":281,"endOffset":288},{"placeId":"50004","name":"India","startOffset":362,"endOffset":367},{"placeId":"50004","name":"Indian","startOffset":424,"endOffset":430},{"placeId":"50004","name":"Indians","startOffset":648,"endOffset":655}]},{"id":99,"text":"Other Indians, to the east of these, are nomads and eat raw flesh; they are called Padaei. It is said to be their custom that when anyone of their fellows, whether man or woman, is sick, a man's closest friends kill him, saying that if wasted by disease he will be lost to them as meat; though he denies that he is sick, they will not believe him, but kill and eat him. [2] When a woman is sick, she is put to death like the men by the women who are her close acquaintances. As for one that has come to old age, they sacrifice him and feast on his flesh; but not many reach this reckoning, for before that everyone who falls ill they kill.","places":[{"placeId":"50004","name":"Indians","startOffset":6,"endOffset":13}]},{"id":100,"text":"There are other Indians, again, who kill no living creature, nor plant anything, nor are accustomed to have houses; they eat grass, and they have a grain growing naturally from the earth in its husk, about the size of a millet-seed, which they gather with the husk and boil and eat. When any one of them falls sick, he goes into the desert and lies there, and no one notices whether he is sick or dies.","places":[{"placeId":"50004","name":"Indians","startOffset":16,"endOffset":23}]},{"id":101,"text":"These Indians whom I have described have intercourse openly like cattle; they are all black-skinned, like the Ethiopians. [2] Their semen too, which they ejaculate into the women, is not white like other men's, but black like their skin, and resembles in this respect that of the Ethiopians. These Indians dwell far away from the Persians southwards, and were not subjects of King Darius.","places":[{"placeId":"50004","name":"Indians","startOffset":6,"endOffset":13},{"placeId":"39274","name":"Ethiopians","startOffset":110,"endOffset":120},{"placeId":"39274","name":"Ethiopians","startOffset":280,"endOffset":290},{"placeId":"50004","name":"Indians","startOffset":298,"endOffset":305},{"placeId":"geonames-130758","name":"Persians","startOffset":330,"endOffset":338}]},{"id":102,"text":"Other Indians dwell near the town of Caspatyrus and the Pactyic country,34 north of the rest of India; these live like the Bactrians; they are of all Indians the most warlike, and it is they who are sent for the gold; for in these parts all is desolate because of the sand. [2] In this sandy desert are ants,35 not as big as dogs but bigger than foxes; the Persian king has some of these, which have been caught there. These ants live underground, digging out the sand in the same way as the ants in Greece, to which they are very similar in shape, and the sand which they carry from the holes is full of gold. [3] It is for this sand that the Indians set forth into the desert. They harness three camels apiece, males on either side sharing the drawing, and a female in the middle: the man himself rides on the female, that when harnessed has been taken away from as young an offspring as may be. Their camels are as swift as horses, and much better able to bear burdens besides.","places":[{"placeId":"50004","name":"Indians","startOffset":6,"endOffset":13},{"placeId":"59993","name":"Caspatyrus","startOffset":37,"endOffset":47},{"placeId":"59977","name":"Pactyic","startOffset":56,"endOffset":63},{"placeId":"50004","name":"India","startOffset":96,"endOffset":101},{"placeId":"971705","name":"Bactrians","startOffset":123,"endOffset":132},{"placeId":"50004","name":"Indians","startOffset":150,"endOffset":157},{"placeId":"geonames-130758","name":"Persian","startOffset":357,"endOffset":364},{"placeId":"geonames-390903","name":"Greece","startOffset":500,"endOffset":506},{"placeId":"50004","name":"Indians","startOffset":644,"endOffset":651}]},{"id":103,"text":"I do not describe the camel's appearance to Greeks, for they know it; but I shall tell them something that they do not know concerning it: the hindlegs of the camel have four thighbones and four knee-joints; its genitals are turned towards the tail between the hindlegs.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":44,"endOffset":50}]},{"id":104,"text":"Thus and with teams so harnessed the Indians ride after the gold, being careful to be engaged in taking it when the heat is greatest; for the ants are then out of sight underground. [2] Now in these parts the sun is hottest in the morning, not at midday as elsewhere, but from sunrise to the hour of market-closing. Through these hours it is much hotter than in Hellas at noon, so that men are said to sprinkle themselves with water at this time. [3] At midday the sun's heat is nearly the same in India as elsewhere. As it goes to afternoon, the sun of India has the power of the morning sun in other lands; as day declines it becomes ever cooler, until at sunset it is exceedingly cold.","places":[{"placeId":"50004","name":"Indians","startOffset":37,"endOffset":44},{"placeId":"geonames-390903","name":"Hellas","startOffset":362,"endOffset":368},{"placeId":"50004","name":"India","startOffset":498,"endOffset":503},{"placeId":"50004","name":"India","startOffset":554,"endOffset":559}]},{"id":105,"text":"So when the Indians come to the place with their sacks, they fill these with the sand and drive back as fast as possible; for the ants at once scent them out, the Persians say, and give chase. They say nothing is equal to them for speed, so that unless the Indians have a headstart while the ants were gathering, not one of them would get away. [2] They cut loose the male trace-camels, which are slower than the females, as they begin to lag, one at a time; the mares never tire, for they remember the young that they have left. Such is the tale. Most of the gold (say the Persians) is got in this way by the Indians; they dig some from mines in their country, too, but it is less abundant.","places":[{"placeId":"50004","name":"Indians","startOffset":12,"endOffset":19},{"placeId":"geonames-130758","name":"Persians","startOffset":163,"endOffset":171},{"placeId":"50004","name":"Indians","startOffset":257,"endOffset":264},{"placeId":"geonames-130758","name":"Persians","startOffset":574,"endOffset":582},{"placeId":"50004","name":"Indians","startOffset":610,"endOffset":617}]},{"id":106,"text":"The most outlying nations of the world have somehow drawn the finest things as their lot, exactly as Greece has drawn the possession of far the best seasons. [2] As I have lately said, India lies at the world's most distant eastern limit; and in India all living creatures four-footed and flying are much bigger than those of other lands, except the horses, which are smaller than the Median horses called Nesaean; moreover, the gold there, whether dug from the earth or brought down by rivers or got as I have described, is very abundant. [3] There, too, wool more beautiful and excellent than the wool of sheep grows on wild trees; these trees supply the Indians with clothing.","places":[{"placeId":"geonames-390903","name":"Greece","startOffset":101,"endOffset":107},{"placeId":"50004","name":"India","startOffset":185,"endOffset":190},{"placeId":"50004","name":"India","startOffset":246,"endOffset":251},{"placeId":"903080","name":"Median","startOffset":385,"endOffset":391},{"placeId":"50004","name":"Indians","startOffset":657,"endOffset":664}]},{"id":107,"text":"Again, Arabia is the most distant to the south of all inhabited countries: and this is the only country which produces frankincense and myrrh and casia and cinnamon and gum-mastich. All these except myrrh are difficult for the Arabians to get. [2] They gather frankincense by burning that storax36 which Phoenicians carry to Hellas; they burn this and so get the frankincense; for the spice-bearing trees are guarded by small winged snakes of varied color, many around each tree; these are the snakes that attack Egypt. Nothing except the smoke of storax will drive them away from the trees.","places":[{"placeId":"981506","name":"Arabia","startOffset":7,"endOffset":13},{"placeId":"29475","name":"Arabians","startOffset":227,"endOffset":235},{"placeId":"678334","name":"Phoenicians","startOffset":304,"endOffset":315},{"placeId":"geonames-390903","name":"Hellas","startOffset":325,"endOffset":331},{"placeId":"981503","name":"Egypt","startOffset":513,"endOffset":518}]},{"id":108,"text":"The Arabians also say that the whole country would be full of these snakes if the same thing did not occur among them that I believe occurs among vipers. [2] Somehow the forethought of God (just as is reasonable) being wise has made all creatures prolific that are timid and edible, so that they do not become extinct through being eaten, whereas few young are born to hardy and vexatious creatures. [3] On the one hand, because the hare is hunted by every beast and bird and man, therefore it is quite prolific; alone of all creatures it conceives during pregnancy; some of the unborn young are hairy, some still naked, some are still forming in the womb while others are just conceived. [4] On the one hand there is this sort of thing, but on the other hand the lioness, that is so powerful and so bold, once in her life bears one cub; for in the act of bearing she casts her uterus out with her cub. The explanation of this is that when the cub first begins to stir in the mother, its claws, much sharper than those of any other creature, tear the uterus, and the more it grows the more it scratches and tears, so that when the hour of birth is near seldom is any of the uterus left intact.","places":[{"placeId":"29475","name":"Arabians","startOffset":4,"endOffset":12}]},{"id":109,"text":"So too if the vipers and the winged serpents of Arabia were born in the natural manner of serpents life would be impossible for men; but as it is, when they copulate, while the male is in the act of procreation and as soon as he has ejaculated his seed, the female seizes him by the neck, and does not let go until she has bitten through. [2] The male dies in the way described, but the female suffers in return for the male the following punishment: avenging their father, the young while they are still within the womb gnaw at their mother and eating through her bowels thus make their way out. [3] Other snakes, that do no harm to men, lay eggs and hatch out a vast number of young. The Arabian winged serpents do indeed seem to be numerous; but that is because (although there are vipers in every land) these are all in Arabia and are found nowhere else.","places":[{"placeId":"981506","name":"Arabia","startOffset":48,"endOffset":54},{"placeId":"29475","name":"Arabian","startOffset":690,"endOffset":697},{"placeId":"29475","name":"Arabia","startOffset":824,"endOffset":830}]},{"id":110,"text":"The Arabians get frankincense in the foregoing way, and casia in the following way: when they go after it they bind oxhides and other skins all over their bodies and faces except for the eyes. Casia grows in a shallow lake; around this and in it live winged creatures, very like bats, that squeak similarly and make a fierce resistance; these have to be kept away from the eyes in order to take the casia.","places":[{"placeId":"29475","name":"Arabians","startOffset":4,"endOffset":12}]},{"id":111,"text":"As for cinnamon, they gather it in an even stranger way. Where it comes from and what land produces it they cannot say, except that it is reported, reasonably enough, to grow in the places where Dionysus was reared. [2] There are great birds, it is said, that take these dry sticks which we have learned from the Phoenicians to call cinnamon and carry them off to nests stuck with mud to precipitous cliffs, where man has no means of approach. [3] The Arabian solution to this is to cut dead oxen and asses and other beasts of burden into the largest possible pieces, then to set these near the eyries and withdraw far off. The birds then fly down (it is said) and carry the pieces of the beasts up to their nests, while these, not being able to bear the weight, break and fall down the mountain side, and then the Arabians come and gather them up. Thus is cinnamon said to be gathered, and so to come from Arabia to other lands.","places":[{"placeId":"678334","name":"Phoenicians","startOffset":313,"endOffset":324},{"placeId":"29475","name":"Arabian","startOffset":452,"endOffset":459},{"placeId":"29475","name":"Arabians","startOffset":815,"endOffset":823},{"placeId":"29475","name":"Arabia","startOffset":907,"endOffset":913}]},{"id":112,"text":"But ledanon, which the Arabians call ladanon, is produced yet more strangely than this. For it is the most fragrant thing produced in the most malodorous; for it is found in he-goats' beards, forming in them like gum among timber. This is used in the manufacture of many perfumes; there is nothing that the Arabians burn so often as incense.","places":[{"placeId":"29475","name":"Arabians","startOffset":23,"endOffset":31},{"placeId":"29475","name":"Arabians","startOffset":307,"endOffset":315}]},{"id":113,"text":"Enough of marvels, and yet the land of Arabia gives off a scent as sweet as if divine. They have besides two marvellous kinds of sheep, found nowhere else. One of these has tails no less than nine feet long. Were the sheep to trail these after them they would suffer by the chafing of the tails on the ground; [2] but every shepherd there knows enough of carpentry to make little carts which they fix under the tails, binding the tail of each sheep on its own cart. The other kind of sheep has a tail a full three feet broad.","places":[{"placeId":"981506","name":"Arabia","startOffset":39,"endOffset":45}]},{"id":114,"text":"Where south inclines westwards, the part of the world stretching farthest towards the sunset is Ethiopia; this produces gold in abundance, and huge elephants, and all sorts of wild trees, and ebony, and the tallest and handsomest and longest-lived people.","places":[{"placeId":"39274","name":"Ethiopia","startOffset":96,"endOffset":104}]},{"id":115,"text":"These then are the most distant lands in Asia and Libya. But concerning those in Europe that are the farthest away towards evening, I cannot speak with assurance; for I do not believe that there is a river called by foreigners Eridanus issuing into the northern sea, where our amber is said to come from, nor do I have any knowledge of Tin Islands, where our tin is brought from. [2] The very name Eridanus betrays itself as not a foreign but a Greek name, invented by some poet; nor for all my diligence have I been able to learn from one who has seen it that there is a sea beyond Europe. All we know is that our tin and amber come from the most distant parts.","places":[{"placeId":"716588","name":"Libya","startOffset":50,"endOffset":55},{"placeId":"geonames-390903","name":"Greek","startOffset":445,"endOffset":450}]},{"id":116,"text":"But in the north of Europe there is by far the most gold. In this matter again I cannot say with assurance how the gold is produced, but it is said that one-eyed men called Arimaspians steal it from griffins. [2] But I do not believe this, that there are one-eyed men who have a nature otherwise the same as other men. [3] The most outlying lands, though, as they enclose and wholly surround all the rest of the world, are likely to have those things which we think the finest and the rarest.","places":[]},{"id":117,"text":"There is a plain in Asia shut in on all sides by mountains through which there are five passes.37 This plain was once the Chorasmians', being at the boundaries of the Chorasmians, the Hyrcanians, Parthians, Sarangians, and Thamanaei, but since the Persians have held power it has been the king's. [2] Now from the encircling mountains flows a great river whose name is the Aces. Its stream divides into five channels and formerly watered the lands of the above-mentioned peoples, going to each through a different pass, but since the beginning of the Persian rule [3] the king has blocked the mountain passes, and closed each passage with a gate; with the water barred from outlet, the plain within the mountains becomes a lake, seeing that the river pours into it and finds no way out. [4] Those therefore who before were accustomed to use the water endure great hardship in not being able to use it; for during the winter, god rains for them just as for the rest of mankind, but in the summer they are in need of the water for their sown millet and sesame. [5] So whenever no water is given to them, they come into Persia with their women, and cry and howl before the door of the king's palace, until the king commands that the river-gate should be opened for those whose need is greatest; [6] then, when this land has drunk its fill of water, that gate is shut, and the king has another opened for those of the rest who most require it. I know by hearsay that he gets a lot of money, over and above the tribute, for opening the gates. So much for these matters.","places":[{"placeId":"942333","name":"Hyrcanians","startOffset":184,"endOffset":194},{"placeId":"952097","name":"Parthians","startOffset":196,"endOffset":205},{"placeId":"29547","name":"Sarangians","startOffset":207,"endOffset":217},{"placeId":"geonames-130758","name":"Persians","startOffset":248,"endOffset":256},{"placeId":"geonames-130758","name":"Persian","startOffset":551,"endOffset":558},{"placeId":"geonames-130758","name":"Persia","startOffset":1117,"endOffset":1123}]},{"id":118,"text":"Of the seven men who revolted against the Magus, one, Intaphrenes, got his death through his own violence immediately after the rebellion. He wanted to enter the palace and speak with the king; and in fact the law was, that the rebels against the Magus could come into the king's presence unannounced, if the king were not having intercourse with one of his wives. [2] Intaphrenes, as one of the seven, claimed his right to enter unannounced; but the gatekeeper and the messenger forbade him, telling him that the king was having intercourse with one of his wives. Intaphrenes thought that they were lying; drawing his scimitar he cut off their noses and ears, then strung these on his horse's bridle and hung it around the men's necks, and so let them go.","places":[]},{"id":119,"text":"They showed themselves to the king and told him why they had been treated so. Darius, fearing that the six had done this by common consent, sent for each and asked his opinion, whether they approved what had been done; [2] and being assured that they had no part in it, he seized Intaphrenes with his sons and all his householdfor he strongly suspected that the man was plotting a rebellion with his kinsmenand imprisoned them with the intention of putting them to death. [3] Then Intaphrenes' wife began coming to the palace gates, weeping and lamenting; and by continuing to do this same thing she persuaded Darius to pity her; and he sent a messenger to tell her, Woman, King Darius will allow one of your imprisoned relatives to survive, whomever you prefer of them all. [4] After considering she answered, If indeed the king gives me the life of one, I chose from them all my brother. [5] Darius was astonished when he heard her answer, and sent someone who asked her: Woman, the king asks you with what in mind you abandon your husband and your children and choose to save the life of your brother, who is less close to you than your children and less dear than your husband? [6] O King, she answered, I may have another husband, if a god is willing, and other children, if I lose these; but since my father and mother are no longer living, there is no way that I can have another brother; I said what I did with that in mind. [7] Darius thought that the woman answered well, and for her sake he released the one for whom she had asked, and the eldest of her sons as well; he put to death all the rest. Thus immediately perished one of the seven.","places":[]},{"id":120,"text":"While Cambyses was still ill, the following events occurred. The governor of Sardis appointed by Cyrus was Oroetes, a Persian. This man had an impious desire; for although he had not been injured or spoken badly of by Polycrates of Samos, and had in fact never even seen him before, he desired to seize and kill him, for the following reason, most people say. [2] As Oroetes and another Persian whose name was Mitrobates, governor of the province at Dascyleium, sat at the king's doors, they fell from talking to quarreling; and as they compared their achievements Mitrobates said to Oroetes, [3] You are not to be reckoned a man; the island of Samos lies close to your province, yet you have not added it to the king's dominionan island so easy to conquer that some native of it revolted against his rulers with fifteen hoplites, and is now lord of it.38 [4] Some say that Oroetes, angered by this reproach, did not so much desire to punish the source of it as to destroy Polycrates utterly, the occasion of the reproach.","places":[{"placeId":"550867","name":"Sardis","startOffset":77,"endOffset":83},{"placeId":"geonames-130758","name":"Persian","startOffset":118,"endOffset":125},{"placeId":"599926","name":"Samos","startOffset":232,"endOffset":237},{"placeId":"geonames-130758","name":"Persian","startOffset":387,"endOffset":394},{"placeId":"511225","name":"Dascyleium","startOffset":450,"endOffset":460},{"placeId":"599926","name":"Samos","startOffset":646,"endOffset":651}]},{"id":121,"text":"A few people, however, say that when Oroetes sent a herald to Samos with some request (it is not said what this was), the herald found Polycrates lying in the men's apartments, in the company of Anacreon of Teos; [2] and, whether on purpose to show contempt for Oroetes, or by mere chance, when Oroetes' herald entered and addressed him, Polycrates, then lying with his face to the wall, never turned or answered him.","places":[{"placeId":"599926","name":"Samos","startOffset":62,"endOffset":67},{"placeId":"550913","name":"Teos","startOffset":207,"endOffset":211}]},{"id":122,"text":"These are the two reasons alleged for Polycrates' death; believe whichever you like. But the consequence was that Oroetes, then at Magnesia which is above the river Maeander, sent Myrsus son of Gyges, a Lydian, with a message to Samos, having learned Polycrates' intention; [2] for Polycrates was the first of the Greeks whom we know to aim at the mastery of the sea, leaving out of account Minos of Cnossus and any others who before him may have ruled the sea; of what may be called the human race Polycrates was the first, and he had great hope of ruling Ionia and the Islands. [3] Learning then that he had this intention, Oroetes sent him this message: Oroetes addresses Polycrates as follows: I find that you aim at great things, but that you have not sufficient money for your purpose. Do then as I direct, and you will succeed yourself and will save me. King Cambyses aims at my death; of this I have clear intelligence. [4] Now if you will transport me and my money, you may take some yourself and let me keep the rest; thus you shall have wealth enough to rule all Hellas. If you mistrust what I tell you about the money, send someone who is most trusted by you and I will prove it to him.","places":[{"placeId":"599778","name":"Magnesia","startOffset":131,"endOffset":139},{"placeId":"599777","name":"Maeander","startOffset":165,"endOffset":173},{"placeId":"550701","name":"Lydian","startOffset":203,"endOffset":209},{"placeId":"599926","name":"Samos","startOffset":229,"endOffset":234},{"placeId":"geonames-390903","name":"Greeks","startOffset":314,"endOffset":320},{"placeId":"589872","name":"Cnossus","startOffset":400,"endOffset":407},{"placeId":"550597","name":"Ionia","startOffset":557,"endOffset":562},{"placeId":"geonames-390903","name":"Hellas","startOffset":1075,"endOffset":1081}]},{"id":123,"text":"Hearing this, Polycrates was pleased and willing; and since he had a great desire for money he first sent one of his townsmen, Maeandrius, son of Maeandrius, to have a look; this man was his scribe; it was he who not long afterwards dedicated in the Heraeum all the splendid furnishings of the men's apartment in Polycrates' house. [2] When Oroetes heard that an inspection was imminent, he filled eight chests with stones, leaving only a very shallow space at the top; then he laid gold on top of the stones, locked the chests, and kept them ready. Maeandrius came and saw, and brought word back to his master.","places":[]},{"id":124,"text":"Polycrates then prepared to visit Oroetes, despite the strong dissuasion of his diviners and friends, and a vision seen by his daughter in a dream; she dreamt that she saw her father in the air overhead being washed by Zeus and anointed by Helios; [2] after this vision she used all means to persuade him not to go on this journey to Oroetes; even as he went to his fifty-oared ship she prophesied evil for him. When Polycrates threatened her that if he came back safe, she would long remain unmarried, she answered with a prayer that his threat might be fulfilled: for she would rather, she said, long remain unmarried than lose her father.","places":[]},{"id":125,"text":"But Polycrates would listen to no advice. He sailed to meet Oroetes, with a great retinue of followers, among whom was Democedes, son of Calliphon, a man of Croton and the most skillful physician of his time. [2] But no sooner had Polycrates come to Magnesia than he was horribly murdered in a way unworthy of him and of his aims; for, except for the sovereigns of Syracuse, no sovereign of Greek race is fit to be compared with Polycrates for magnificence. [3] Having killed him in some way not fit to be told, Oroetes then crucified him; as for those who had accompanied him, he let the Samians go, telling them to thank him that they were free; those who were not Samians, or were servants of Polycrates' followers, he kept for slaves. [4] And Polycrates hanging in the air fulfilled his daughter's vision in every detail; for he was washed by Zeus when it rained, and he was anointed by Helios as he exuded sweat from his body.","places":[{"placeId":"452317","name":"Croton","startOffset":157,"endOffset":163},{"placeId":"599778","name":"Magnesia","startOffset":250,"endOffset":258},{"placeId":"462503","name":"Syracuse","startOffset":365,"endOffset":373},{"placeId":"geonames-390903","name":"Greek","startOffset":391,"endOffset":396},{"placeId":"599926","name":"Samians","startOffset":589,"endOffset":596},{"placeId":"599926","name":"Samians","startOffset":667,"endOffset":674}]},{"id":126,"text":"This was the end of Polycrates' string of successes [as Amasis king of Egypt had forewarned him]. But not long after, atonement for Polycrates overtook Oroetes. After the death of Cambyses and the rule of the Magi, Oroetes stayed in Sardis, where he did not help the Persians in any way to regain the power taken from them by the Medes, [2] but, to the contrary, in this confusion killed two prominent Persians, Mitrobates, the governor from Dascyleium, who had taunted him about Polycrates, and Mitrobates' son Cranaspes; and on top of many other violent acts, he set an ambush down the road after a messenger from Darius came with a message which displeased him and killed that messenger on his homeward journey, and concealed the man's body and horse.","places":[{"placeId":"981503","name":"Egypt","startOffset":71,"endOffset":76},{"placeId":"550867","name":"Sardis","startOffset":233,"endOffset":239},{"placeId":"geonames-130758","name":"Persians","startOffset":267,"endOffset":275},{"placeId":"903080","name":"Medes","startOffset":330,"endOffset":335},{"placeId":"geonames-130758","name":"Persians","startOffset":402,"endOffset":410},{"placeId":"511225","name":"Dascyleium","startOffset":442,"endOffset":452}]},{"id":127,"text":"So when Darius became king, he wanted to punish Oroetes for all his wrongdoing, and especially for killing Mitrobates and his son. But he thought it best not to send an army openly against the satrap, seeing that everything was still in confusion and he was still new to the royal power; moreover he heard that Oroetes was very powerful, having a guard of a thousand Persian spearmen and being governor of the Phrygian and Lydian and Ionian province. [2] He had recourse, then, to the following expedient: having summoned an assembly of the most prominent Persians, he addressed them as follows: Persians, which of you will promise to do this for me, not with force and numbers, but by cunning? Where there is need for cunning, force has no business. [3] So then, which of you would either bring me Oroetes alive or kill him? For he has done the Persians no good, but much harm; he has destroyed two of us, Mitrobates and his son, and is killing my messengers that are sent to recall him, displaying an insolence that is not to be borne. So, then, before he does the Persians some still greater harm, he has to be punished by us with death.","places":[{"placeId":"geonames-130758","name":"Persian","startOffset":367,"endOffset":374},{"placeId":"609502","name":"Phrygian","startOffset":410,"endOffset":418},{"placeId":"550701","name":"Lydian","startOffset":423,"endOffset":429},{"placeId":"550597","name":"Ionian","startOffset":434,"endOffset":440},{"placeId":"geonames-130758","name":"Persians","startOffset":556,"endOffset":564},{"placeId":"geonames-130758","name":"Persians","startOffset":597,"endOffset":605},{"placeId":"geonames-130758","name":"Persians","startOffset":847,"endOffset":855},{"placeId":"geonames-130758","name":"Persians","startOffset":1068,"endOffset":1076}]},{"id":128,"text":"Darius asked this and thirty men promised, each wanting to do it himself. Darius told them not argue but draw lots; they did, and the lot fell to Bagaeus, son of Artontes. [2] Bagaeus, having drawn the lot, did as follows: he had many letters written concerning many things and put the seal of Darius on them, and then went with them to Sardis. [3] When he got there and came into Oroetes' presence, he took out each letter in turn and gave it to one of the royal scribes to read (all of the governors of the King have scribes); Bagaeus gave the letters to test the spearmen, whether they would consent to revolt against Oroetes. [4] Seeing that they were greatly affected by the rolls and yet more by what was written in them, he gave another, in which were these words: Persians! King Darius forbids you to be Oroetes' guard. Hearing this, they lowered their spears for him. [5] When Bagaeus saw that they obeyed the letter so far, he was encouraged and gave the last roll to the scribe, in which was written: King Darius instructs the Persians in Sardis to kill Oroetes. Hearing this the spearmen drew their scimitars and killed him at once. Thus atonement for Polycrates the Samian overtook Oroetes the Persian.","places":[{"placeId":"550867","name":"Sardis","startOffset":337,"endOffset":343},{"placeId":"geonames-130758","name":"Persians","startOffset":773,"endOffset":781},{"placeId":"geonames-130758","name":"Persians","startOffset":1041,"endOffset":1049},{"placeId":"550867","name":"Sardis","startOffset":1053,"endOffset":1059},{"placeId":"599926","name":"Samian","startOffset":1183,"endOffset":1189},{"placeId":"geonames-130758","name":"Persian","startOffset":1211,"endOffset":1218}]},{"id":129,"text":"Oroetes' slaves and other possessions were brought to Susa. Not long after this, it happened that Darius twisted his foot in dismounting from his horse while hunting [2] so violently that the ball of the ankle joint was dislocated from its socket. Darius called in the best physicians of Egypt, whom he had until now kept near his person. But by violently twisting the foot they made the injury worse; [3] and for seven days and nights the king could not sleep because of the pain. On the eighth day, when he was doing poorly, someone who had heard in Sardis of the skill of Democedes of Croton told Darius of him; and he told them to bring him as quickly as possible. When they found him among the slaves of Oroetes, where he was forgotten, they brought him along, dragging his chains and dressed in rags.","places":[{"placeId":"912936","name":"Susa","startOffset":54,"endOffset":58},{"placeId":"981503","name":"Egypt","startOffset":288,"endOffset":293},{"placeId":"550867","name":"Sardis","startOffset":552,"endOffset":558},{"placeId":"452317","name":"Croton","startOffset":588,"endOffset":594}]},{"id":130,"text":"Darius asked him when he was brought in if he were trained in medicine. He refused to admit it, for he was afraid that if he revealed himself he would be cut off from Hellas for good. [2] It was clear to Darius, however, that he was trained in deceit,39 and he ordered those who had brought him to bring along scourges and goads. Then he confessed, saying that his training was not exact, but that he had associated with a physician and had a passing acquaintance with medicine. [3] But when Darius turned the case over to him and Democedes applied Greek remedies and used gentleness instead of the Egyptians' violence, he enabled him to sleep and in a short time had him well, although Darius had had no hope of regaining the use of his foot. [4] After this, Darius rewarded him with a gift of two pairs of golden fetters. Is it your purpose, Democedes asked, to double my pains for making you well? Pleased by the retort, Darius sent him to his own wives. The eunuchs who conducted him told the women that this was the man who had given the king his life back. [5] Each of them took a bowl and dipped it in a chest full of gold, so richly rewarding Democedes that the servant accompanying him, whose name was Sciton, collected a very great sum of gold by picking up the staters that fell from the bowls.","places":[{"placeId":"geonames-390903","name":"Hellas","startOffset":167,"endOffset":173},{"placeId":"geonames-390903","name":"Greek","startOffset":549,"endOffset":554},{"placeId":"981503","name":"Egyptians","startOffset":599,"endOffset":608}]},{"id":131,"text":"Now this is how Democedes had come from Croton to live with Polycrates: he was oppressed by a harsh-tempered father at Croton; since he could not stand him, he left him and went to Aegina. Within the first year after settling there, he excelled the rest of the physicians, although he had no equipment nor any medical implements. [2] In his second year the Aeginetans40 paid him a talent to be their public physician; in the third year the Athenians hired him for a hundred minae, and Polycrates in the fourth year for two talents. Thus he came to Samos, and not least because of this man the physicians of Croton were well-respected [ [3] for at this time the best physicians in Greek countries were those of Croton, and next to them those of Cyrene. About the same time the Argives had the name of being the best musicians].","places":[{"placeId":"452317","name":"Croton","startOffset":40,"endOffset":46},{"placeId":"452317","name":"Croton","startOffset":119,"endOffset":125},{"placeId":"579853","name":"Aegina","startOffset":181,"endOffset":187},{"placeId":"579844","name":"Aeginetans","startOffset":357,"endOffset":367},{"placeId":"579885","name":"Athenians","startOffset":440,"endOffset":449},{"placeId":"599926","name":"Samos","startOffset":548,"endOffset":553},{"placeId":"452317","name":"Croton","startOffset":607,"endOffset":613},{"placeId":"geonames-390903","name":"Greek","startOffset":680,"endOffset":685},{"placeId":"452317","name":"Croton","startOffset":710,"endOffset":716},{"placeId":"373778","name":"Cyrene","startOffset":744,"endOffset":750},{"placeId":"570106","name":"Argive","startOffset":776,"endOffset":782}]},{"id":132,"text":"So now because he had healed Darius at Susa Democedes had a very grand house and ate at the king's table; he had everything, except permission to return to the Greeks. [2] When the Egyptian physicians who until now had attended the king were about to be impaled for being less skilful than a Greek, Democedes interceded with the king for them and saved them; and he saved an Elean seer, too, who had been a retainer of Polycrates' and was forgotten among the slaves. Democedes was a man of considerable influence with the King.","places":[{"placeId":"912936","name":"Susa","startOffset":39,"endOffset":43},{"placeId":"geonames-390903","name":"Greeks","startOffset":160,"endOffset":166},{"placeId":"981503","name":"Egyptian","startOffset":181,"endOffset":189},{"placeId":"geonames-390903","name":"Greek","startOffset":292,"endOffset":297},{"placeId":"570220","name":"Elean","startOffset":375,"endOffset":380}]},{"id":133,"text":"A short time after this, something else occurred; there was a swelling on the breast of Atossa, the daughter of Cyrus and wife of Darius, which broke and spread further. As long as it was small, she hid it out of shame and told no one; but when it got bad, she sent for Democedes and showed it to him. [2] He said he would cure her, but made her swear that she would repay him by granting whatever he asked of her, and said that he would ask nothing shameful.","places":[]},{"id":134,"text":"And after he treated her and did cure her, Atossa addressed Darius in their chamber as she had been instructed by Democedes: O King, although you have so much power you are idle, acquiring no additional people or power for the Persians. [2] The right thing for a man who is both young and the master of great wealth is to be seen aggrandizing himself, so that the Persians know too that they are ruled by a man. On two counts it is in your interest to do this, both so that the Persians know that their leader is a man, and so that they be occupied by war and not have time to plot against you. [3] You should show some industry now, while you are still young: for sense grows with the growing body, but grows old too with the aging body and loses its edge for all purposes. [4] She said this as instructed, but he replied with this: Woman, what you have said is exactly what I had in mind to do. For I have planned to make a bridge from this continent to the other continent and lead an army against the Scythians; and this will be done in a short time. [5] Look, Atossa said, let the Scythians go for the present; you shall have them whenever you like; I tell you, march against Hellas. I have heard of Laconian and Argive and Attic and Corinthian women, and would like to have them as servants. You have a man who is fitter than any other to instruct and guide you in everything concerning Hellas: I mean the physician who healed your foot. [6] Darius answered, Woman, since you think that we should make an attempt on Greece first, it seems to me to be best that we first send Persian spies with the man whom you mention, who shall tell us everything that they learn and observe; and then when I am fully informed I shall rouse myself against them.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":228,"endOffset":236},{"placeId":"geonames-130758","name":"Persians","startOffset":365,"endOffset":373},{"placeId":"geonames-130758","name":"Persians","startOffset":479,"endOffset":487},{"placeId":"1273","name":"Scythians","startOffset":1008,"endOffset":1017},{"placeId":"1273","name":"Scythians","startOffset":1093,"endOffset":1102},{"placeId":"geonames-390903","name":"Hellas","startOffset":1188,"endOffset":1194},{"placeId":"570406","name":"Laconian","startOffset":1212,"endOffset":1220},{"placeId":"570106","name":"Argive","startOffset":1225,"endOffset":1231},{"placeId":"579888","name":"Attic","startOffset":1236,"endOffset":1241},{"placeId":"570182","name":"Corinthian","startOffset":1246,"endOffset":1256},{"placeId":"geonames-390903","name":"Hellas","startOffset":1400,"endOffset":1406},{"placeId":"geonames-390903","name":"Greece","startOffset":1531,"endOffset":1537},{"placeId":"geonames-130758","name":"Persian","startOffset":1590,"endOffset":1597}]},{"id":135,"text":"He said this, and no sooner said than did it. For the next day at dawn he summoned fifteen prominent Persians, and instructed them to go with Democedes and sail along the coast of Hellas; telling them, too, by all means to bring the physician back and not let him escape. [2] Having given these instructions to them, he then sent for Democedes, and asked of him that when he had shown and made clear all of Greece to the Persians, he would come back; and he told him to take all his movable goods to give to his father and siblings, saying that he would give him many times as much in return and would send with him a ship with a cargo of all good things. [3] Darius, I think, made this promise without a treacherous intent, but Democedes was afraid that Darius was testing him; therefore he was in no hurry to accept all that was offered, but answered that he would leave his own possessions where they were, so as to have them when he returned; the ship which Darius promised him to carry the gifts for his siblings, he said he would accept. Having given the same instructions to Democedes too, Darius sent them all to the coast.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":101,"endOffset":109},{"placeId":"geonames-390903","name":"Hellas","startOffset":180,"endOffset":186},{"placeId":"geonames-390903","name":"Greece","startOffset":407,"endOffset":413},{"placeId":"geonames-130758","name":"Persians","startOffset":421,"endOffset":429}]},{"id":136,"text":"They came down to the city of Sidon in Phoenicia, and there chartered two triremes, as well as a great galley laden with all good things; and when everything was ready they set sail for Hellas, where they surveyed and mapped the coasts to which they came; until having viewed the greater and most famous parts they reached Tarentum in Italy. [2] There Aristophilides, king of the Tarentines, out of sympathy for Democedes, took the steering gear off the Median ships and put the Persians under a guard, calling them spies. While they were in this plight, Democedes made his way to Croton; and Aristophilides did not set the Persians free and give them back what he had taken from their ships until the physician was in his own country.","places":[{"placeId":"678393","name":"Sidon","startOffset":30,"endOffset":35},{"placeId":"991410","name":"Phoenicia","startOffset":39,"endOffset":48},{"placeId":"geonames-390903","name":"Hellas","startOffset":186,"endOffset":192},{"placeId":"442810","name":"Tarentum","startOffset":323,"endOffset":331},{"placeId":"452346","name":"Italy","startOffset":335,"endOffset":340},{"placeId":"442810","name":"Tarentines","startOffset":380,"endOffset":390},{"placeId":"903080","name":"Median","startOffset":454,"endOffset":460},{"placeId":"geonames-130758","name":"Persians","startOffset":479,"endOffset":487},{"placeId":"452317","name":"Croton","startOffset":581,"endOffset":587},{"placeId":"geonames-130758","name":"Persians","startOffset":624,"endOffset":632}]},{"id":137,"text":"The Persians sailed from Tarentum and pursued Democedes to Croton, where they found him in the marketplace and tried to seize him. [2] Some Crotoniats, who feared the Persian power, would have given him up; but others resisted and beat the Persians with their sticks. Men of Croton, watch what you do, said the Persians; you are harboring an escaped slave of the King's. [3] How do you think King Darius will like this insolence? What good will it do you if he gets away from us? What city will we attack first here? Which will we try to enslave first? [4] But the men of Croton paid no attention to them; so the Persians lost Democedes and the galley with which they had come, and sailed back for Asia, making no attempt to visit and learn of the further parts of Hellas now that their guide was taken from them. [5] But Democedes gave them a message as they were setting sail; they should tell Darius, he said, that Democedes was engaged to the daughter of Milon. For Darius held the name of Milon the wrestler in great honor; and, to my thinking, Democedes sought this match and paid a great sum for it to show Darius that he was a man of influence in his own country as well as in Persia.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":4,"endOffset":12},{"placeId":"442810","name":"Tarentum","startOffset":25,"endOffset":33},{"placeId":"452317","name":"Croton","startOffset":59,"endOffset":65},{"placeId":"452317","name":"Croton","startOffset":140,"endOffset":146},{"placeId":"geonames-130758","name":"Persian","startOffset":167,"endOffset":174},{"placeId":"geonames-130758","name":"Persians","startOffset":240,"endOffset":248},{"placeId":"452317","name":"Croton","startOffset":276,"endOffset":282},{"placeId":"geonames-130758","name":"Persians","startOffset":313,"endOffset":321},{"placeId":"452317","name":"Croton","startOffset":576,"endOffset":582},{"placeId":"geonames-130758","name":"Persians","startOffset":617,"endOffset":625},{"placeId":"geonames-390903","name":"Hellas","startOffset":769,"endOffset":775},{"placeId":"geonames-130758","name":"Persia","startOffset":1189,"endOffset":1195}]},{"id":138,"text":"The Persians then put out from Croton; but their ships were wrecked on the coast of Iapygia, and they were made slaves in the country until Gillus, an exile from Tarentum, released and restored them to Darius, who was ready to give him whatever he wanted in return. [2] Gillus chose to be restored to Tarentum and told the story of his misfortune; but, so as not to be the occasion of agitating Greece, if on his account a great expedition sailed against Italy, he said that it was enough that the Cnidians alone be his escort; for he supposed that the Tarentines would be the readier to receive him back as the Cnidians were their friends. [3] Darius kept his word, and sent a messenger to the men of Cnidos, telling them to take Gillus back to Tarentum. They obeyed Darius; but they could not persuade the Tarentines, and were not able to apply force. [4] This is what happened, and these Persians were the first who came from Asia into Hellas, and they came to view the country for this reason.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":4,"endOffset":12},{"placeId":"452317","name":"Croton","startOffset":31,"endOffset":37},{"placeId":"442763","name":"Iapygia","startOffset":84,"endOffset":91},{"placeId":"442810","name":"Tarentum","startOffset":162,"endOffset":170},{"placeId":"442810","name":"Tarentum","startOffset":301,"endOffset":309},{"placeId":"geonames-390903","name":"Greece","startOffset":395,"endOffset":401},{"placeId":"1052","name":"Italy","startOffset":455,"endOffset":460},{"placeId":"599575","name":"Cnidians","startOffset":498,"endOffset":506},{"placeId":"442810","name":"Tarentines","startOffset":553,"endOffset":563},{"placeId":"599575","name":"Cnidians","startOffset":612,"endOffset":620},{"placeId":"599575","name":"Cnidos","startOffset":702,"endOffset":708},{"placeId":"442810","name":"Tarentum","startOffset":746,"endOffset":754},{"placeId":"442810","name":"Tarentines","startOffset":808,"endOffset":818},{"placeId":"geonames-130758","name":"Persians","startOffset":891,"endOffset":899},{"placeId":"geonames-390903","name":"Hellas","startOffset":939,"endOffset":945}]},{"id":139,"text":"After this, King Darius conquered Samos, the greatest of all city states, Greek or barbarian, the reason for his conquest being this: when Cambyses, son of Cyrus, invaded Egypt, many Greeks came with the army, some to trade, as was natural, and some to see the country itself; among them was Syloson, son of Aeaces, who was Polycrates' brother and in exile from Samos. [2] This Syloson had a stroke of good luck. He was in the market at Memphis wearing a red cloak, when Darius, at that time one of Cambyses' guard and as yet a man of no great importance, saw him, and coveting the cloak came and tried to buy it. [3] When Syloson saw Darius' eagerness, by good luck he said, I will not sell this for any money, but I give it to you free if you must have it so much. Extolling this, Darius accepted the garment.","places":[{"placeId":"599926","name":"Samos","startOffset":34,"endOffset":39},{"placeId":"geonames-390903","name":"Greek","startOffset":74,"endOffset":79},{"placeId":"981503","name":"Egypt","startOffset":171,"endOffset":176},{"placeId":"geonames-390903","name":"Greeks","startOffset":183,"endOffset":189},{"placeId":"599926","name":"Samos","startOffset":362,"endOffset":367},{"placeId":"736963","name":"Memphis","startOffset":437,"endOffset":444}]},{"id":140,"text":"Syloson supposed that he had lost his cloak out of foolish good nature. But in time Cambyses died, the seven rebelled against the Magus, and Darius of the seven came to the throne; Syloson then learned that the successor to the royal power was the man to whom he had given the garment in Egypt; so he went up to Susa and sat in the king's antechamber, saying that he was one of Darius' benefactors. [2] When the doorkeeper brought word of this to the king, Darius asked But to what Greek benefactor can I owe thanks? In the little time since I have been king hardly one of that nation has come to us, and I have, I may say, no use for any Greek. Nevertheless bring him in, so that I may know what he means. [3] The doorkeeper brought Syloson in and the interpreters asked him as he stood there who he was and what he had done to call himself the king's benefactor. Then Syloson told the story of the cloak, and said that it was he who had given it. [4] Most generous man, said Darius, it was you who gave me a present when I had as yet no power; and if it was a small one, I was none the less grateful then than I am now when I get a big one. In return, I give you gold and silver in abundance so you may never be sorry that you did Darius son of Hystaspes good. [5] Syloson answered, Do not give me gold, O king, or silver, but Samos, my country, which our slave has now that my brother Polycrates has been killed by Oroetes; give me this without killing or enslaving.","places":[{"placeId":"981503","name":"Egypt","startOffset":288,"endOffset":293},{"placeId":"912936","name":"Susa","startOffset":312,"endOffset":316},{"placeId":"geonames-390903","name":"Greek","startOffset":483,"endOffset":488},{"placeId":"geonames-390903","name":"Greek","startOffset":640,"endOffset":645},{"placeId":"599926","name":"Samos","startOffset":1336,"endOffset":1341}]},{"id":141,"text":"Having heard this, Darius sent an army and Otanes, one of the seven, to command it, instructing him to do whatever Syloson asked. So Otanes went down to the coast and got his army ready.","places":[]},{"id":142,"text":"Now Samos was ruled by Maeandrius, son of Maeandrius, who had authority delegated by Polycrates. He wanted to be the justest of men, but that was impossible. [2] For when he learned of Polycrates' death, first he set up an altar to Zeus the Liberator and marked out around it that sacred enclosure which is still to be seen in the suburb of the city; when this had been done, he called an assembly of all the citizens, and addressed them thus: [3] To me, as you know, have come Polycrates' scepter and all of his power, and it is in my power now to rule you. But I, so far as it lies in me, shall not do myself what I blame in my neighbor. I always disliked it that Polycrates or any other man should lord it over men like himself. Polycrates has fulfilled his destiny, and inviting you to share his power I proclaim equality. [4] Only I claim for my own privilege that six talents of Polycrates' wealth be set apart for my use, and that I and my descendants keep the priesthood of Zeus the Liberator, whose temple I have founded, and now I give you freedom. [5] Such was Maeandrius' promise to the Samians. But one of them arose and answered: But you are not even fit to rule us, low-born and vermin, but you had better give an account of the monies that you have handled.","places":[{"placeId":"599926","name":"Samos","startOffset":4,"endOffset":9},{"placeId":"599926","name":"Samians","startOffset":1101,"endOffset":1108}]},{"id":143,"text":"This was the speech of Telesarchus, a man of consequence among the citizens. But Maeandrius, realizing that if he let go of the sovereignty someone else would make himself sovereign instead, resolved not to let it go. Withdrawing into the acropolis, he sent for the citizens individually as if he would give an account of the money; then he seized and bound them. [2] So they were imprisoned, and afterwards Maeandrius fell sick. His brother Lycaretus thought him likely to die, and, so that he might the more easily make himself master of Samos, he put all the prisoners to death. They had, it would seem, no desire to be free.","places":[{"placeId":"599926","name":"Samos","startOffset":540,"endOffset":545}]},{"id":144,"text":"So when the Persians brought Syloson back to Samos, no one raised a hand against them, but Maeandrius and those of his faction offered to evacuate the island under a flag of truce; Otanes agreed to this, and after the treaty was made, the Persians of highest rank sat down on seats facing the acropolis.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":12,"endOffset":20},{"placeId":"599926","name":"Samos","startOffset":45,"endOffset":50},{"placeId":"geonames-130758","name":"Persians","startOffset":239,"endOffset":247}]},{"id":145,"text":"Now Maeandrius the sovereign had a crazy brother named Charilaus, who lay bound in the dungeon for some offense; this man heard what was going on, and by peering through the dungeon window saw the Persians sitting there peaceably; [2] whereupon he cried with a loud voice that he wanted to talk to Maeandrius. His brother, hearing him, had Charilaus loosed and brought before him. No sooner had he been brought than he attempted with reviling and abuse to persuade Maeandrius to attack the Persians. Although I am your brother, you coward, he said, and did no wrong deserving of prison, you have bound and imprisoned me; but when you see the Persians throwing you out of house and home, you have no courage to avenge yourself, though you could so easily beat them? [3] If you are yourself afraid of them, give me your foreign guards, and I will punish them for coming here; as for you, I will give you safe conduct out of the island.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":197,"endOffset":205},{"placeId":"geonames-130758","name":"Persians","startOffset":490,"endOffset":498},{"placeId":"geonames-130758","name":"Persians","startOffset":645,"endOffset":653}]},{"id":146,"text":"This was what Charilaus said; and Maeandrius took his advice, to my thinking not because he was so foolish as to suppose that he would be strong enough to defeat the king, but because he did not want Syloson to recover Samos safe and sound with no trouble. [2] He wanted therefore by provoking the Persians to weaken Samos as much as he could before surrendering it, for he was well aware that if the Persians were hurt they would be furiously angry with the Samians. Besides, he knew that he could get himself safely off the island whenever he liked, having built a secret passage leading from the acropolis to the sea. [3] Maeandrius then set sail from Samos; but Charilaus armed all the guards, opened the acropolis' gates, and attacked the Persians. These supposed that a full agreement had been made, and were taken unawares; the guard fell upon them and killed the Persians of highest rank, those who were carried in litters. [4] They were engaged in this when the rest of the Persian force came up in reinforcement, and, hard-pressed, the guards retreated into the acropolis.","places":[{"placeId":"599926","name":"Samos","startOffset":219,"endOffset":224},{"placeId":"geonames-130758","name":"Persians","startOffset":298,"endOffset":306},{"placeId":"599926","name":"Samos","startOffset":317,"endOffset":322},{"placeId":"geonames-130758","name":"Persians","startOffset":401,"endOffset":409},{"placeId":"599926","name":"Samians","startOffset":459,"endOffset":466},{"placeId":"599926","name":"Samos","startOffset":655,"endOffset":660},{"placeId":"geonames-130758","name":"Persians","startOffset":744,"endOffset":752},{"placeId":"geonames-130758","name":"Persians","startOffset":871,"endOffset":879},{"placeId":"geonames-130758","name":"Persian","startOffset":983,"endOffset":990}]},{"id":147,"text":"The Persian captain Otanes, seeing how big a loss the Persians had suffered, deliberately forgot the command given him at his departure by Darius not to kill or enslave any Samian but to deliver the island intact to Syloson; and he commanded his army to kill everyone they took, men and boys alike. [2] Then, while some of the Persians laid siege to the acropolis, the rest killed everyone they met, inside the temples and outside the temples alike.","places":[{"placeId":"geonames-130758","name":"Persian","startOffset":4,"endOffset":11},{"placeId":"geonames-130758","name":"Persians","startOffset":54,"endOffset":62},{"placeId":"599926","name":"Samian","startOffset":173,"endOffset":179},{"placeId":"geonames-130758","name":"Persians","startOffset":327,"endOffset":335}]},{"id":148,"text":"Maeandrius sailed to Lacedaemon, escaping from Samos; and after he arrived there and brought up the possessions with which he had left his country, it became his habit to make a display of silver and gold drinking cups; while his servants were cleaning these, he would converse with the king of Sparta, Cleomenes son of Anaxandrides, and would bring him to his house. As Cleomenes marvelled greatly at the cups whenever he saw them, Maeandrius would tell him to take as many as he liked. [2] Maeandrius made this offer two or three times; Cleomenes showed his great integrity in that he would not accept; but realizing that there were others in Lacedaemon from whom Maeandrius would get help by offering them the cups, he went to the ephors and told them it would be best for Sparta if this Samian stranger quit the country, lest he persuade Cleomenes himself or some other Spartan to do evil. The ephors listened to his advice and banished Maeandrius by proclamation.","places":[{"placeId":"570406","name":"Lacedaemon","startOffset":21,"endOffset":31},{"placeId":"599926","name":"Samos","startOffset":47,"endOffset":52},{"placeId":"570685","name":"Sparta","startOffset":295,"endOffset":301},{"placeId":"570406","name":"Lacedaemon","startOffset":645,"endOffset":655},{"placeId":"570685","name":"Sparta","startOffset":776,"endOffset":782},{"placeId":"599926","name":"Samian","startOffset":791,"endOffset":797},{"placeId":"570685","name":"Spartan","startOffset":874,"endOffset":881}]},{"id":149,"text":"As for Samos, the Persians swept it clear and turned it over uninhabited to Syloson. But afterwards Otanes, the Persian general, helped to settle the land, prompted by a dream and a disease that he contracted in his genitals.","places":[{"placeId":"599926","name":"Samos","startOffset":7,"endOffset":12},{"placeId":"geonames-130758","name":"Persians","startOffset":18,"endOffset":26},{"placeId":"geonames-130758","name":"Persian","startOffset":112,"endOffset":119}]},{"id":150,"text":"While the fleet was away at Samos, the Babylonians revolted.41 They had made very good preparation; for during the reign of the Magus, and the rebellion of the seven, they had taken advantage of the time and the confusion to provision themselves against the siege; and (I cannot tell how) this went undetected. [2] At last they revolted openly and did this:sending away all the mothers, each chose one woman, whomever he liked of his domestics, as a bread-maker; as for the rest, they gathered them together and strangled them so they would not consume their bread.","places":[{"placeId":"599926","name":"Samos","startOffset":28,"endOffset":33},{"placeId":"893951","name":"Babylonians","startOffset":39,"endOffset":50}]},{"id":151,"text":"When Darius heard of this, he collected all his forces and led them against Babylon, and he marched up to the town and laid siege to it; but the Babylonians thought nothing of the siege. They came up on to the ramparts of the wall and taunted Darius and his army with gesture and word, and one of them uttered this mot: [2] Why loiter there, Persians, and not go away? You will take us when mules give birth. One of the Babylonians said this, by no means expecting that a mule would give birth.","places":[{"placeId":"893951","name":"Babylon","startOffset":76,"endOffset":83},{"placeId":"893951","name":"Babylonians","startOffset":145,"endOffset":156},{"placeId":"geonames-130758","name":"Persians","startOffset":343,"endOffset":351},{"placeId":"893951","name":"Babylonians","startOffset":422,"endOffset":433}]},{"id":152,"text":"A year and seven months passed, and Darius and his whole army were bitter because they could not take Babylon. Yet Darius had used every trick and every device against it. He tried the stratagem by which Cyrus took it, and every other stratagem and device, yet with no success; for the Babylonians kept a vigilant watch, and he could not take them.","places":[{"placeId":"893951","name":"Babylon","startOffset":102,"endOffset":109},{"placeId":"893951","name":"Babylonians","startOffset":286,"endOffset":297}]},{"id":153,"text":"But in the twentieth month of the siege a marvellous thing befell Zopyrus, son of that Megabyzus who was one of the seven destroyers of the Magus: one of his food-carrying mules gave birth. Zopyrus would not believe the news; but when he saw the foal for himself, he told those who had seen it to tell no one; [2] then reflecting he recalled the Babylonian's word at the beginning of the siegethat the city would be taken when mules gave birthand having this utterance in mind he conceived that Babylon might be taken; for the hand of heaven, he supposed, was in the man's word and the birth from his own mule.","places":[{"placeId":"893951","name":"Babylonian","startOffset":346,"endOffset":356},{"placeId":"893951","name":"Babylon","startOffset":497,"endOffset":504}]},{"id":154,"text":"As soon as he thought that it was Babylon's fate to fall, he came and inquired of Darius if taking Babylon were very important to him; and when he was assured that it was, he then cast about for a plan by which the city's fall would be accomplished by him alone; for good service among the Persians is very much esteemed, and rewarded by high preferment. [2] He could think of no other way to bring the city down than to mutilate himself and then desert to the Babylonians; so, making light of it, he mutilated himself beyond repair, and after cutting off his nose and ears and cropping his hair as a disfigurement and scourging himself, he came before Darius.","places":[{"placeId":"893951","name":"Babylon","startOffset":34,"endOffset":41},{"placeId":"893951","name":"Babylon","startOffset":99,"endOffset":106},{"placeId":"geonames-130758","name":"Persians","startOffset":290,"endOffset":298},{"placeId":"893951","name":"Babylonians","startOffset":461,"endOffset":472}]},{"id":155,"text":"The king reacted very violently to seeing a man so well-respected mutilated, and springing from the throne he uttered a cry and asked Zopyrus who it was who had mutilated him and why. [2] There is no man, he said, except you, who has enough power to do this to me, and no one but I myself did this, O King, because I felt it terribly that Assyrians were laughing at Persians. [3] Darius answered, Unfeeling man, you give a pretty name to an ugly act if you say that it was on account of those besieged that you did for yourself past cure. Why, you poor fool, will the enemy surrender sooner because you mutilated yourself? How could you not have been out of your mind to disfigure yourself? [4] Had I told you, said Zopyrus, what I intended to do, you would not have let me; but now I have done it on my own. Now, then, if you do your part we shall take Babylon. I shall desert to the city as I am, and I shall say to them that I suffered this at your hands; and I think that I shall persuade them, and thus gain a command. [5] Now, on the tenth day after I enter the city, take a thousand men from the part of your army about which you will least care if it is lost, and post them before the gate called the gate of Semiramis; on the seventh day after that, post two thousand more before the gate called the gate of the Ninevites; and when twenty days are past after that seventh, lead out four thousand more and post them before the Chaldean gate, as they call it; allow neither these, nor the others that go before them, to carry any weapons except daggers; leave them these. [6] But immediately after the twentieth day command the rest of your army to assault the whole circuit of the walls, and post the Persians before the gate of Belus and the gate called Cissian. For I think that once I have done conspicuous things the Babylonians will give me, among other things, the keys of their gates; then it will depend on me and on the Persians to do what is necessary.","places":[{"placeId":"29492","name":"Assyrians","startOffset":342,"endOffset":351},{"placeId":"geonames-130758","name":"Persians","startOffset":369,"endOffset":377},{"placeId":"893951","name":"Babylon","startOffset":863,"endOffset":870},{"placeId":"geonames-130758","name":"Persians","startOffset":1718,"endOffset":1726},{"placeId":"893951","name":"Babylonians","startOffset":1838,"endOffset":1849},{"placeId":"geonames-130758","name":"Persians","startOffset":1946,"endOffset":1954}]},{"id":156,"text":"Having given these instructions, he went to the gates, turning and looking back as though he were in fact a deserter. When the watch posted on the towers saw him, they ran down, and opening half the gate a little asked him who he was and why he came; he told them that he was Zopyrus and was deserting to them. [2] When they heard this, the gatekeepers brought him before the general assembly of the Babylonians, where he made a pitiful sight, saying that he had suffered at the hands of Darius what he had suffered at his own because he had advised the king to lead his army away, since they could find no way to take the city. [3] Now, he said in his speech to them, I come as a great boon to you, men of Babylon, and as a great bane to Darius and to his army and to the Persians; for he shall not get away with having mutilated me so; and I know all the issues of his plans. This was what he said.","places":[{"placeId":"893951","name":"Babylonians","startOffset":400,"endOffset":411},{"placeId":"893951","name":"Babylon","startOffset":710,"endOffset":717},{"placeId":"geonames-130758","name":"Persians","startOffset":776,"endOffset":784}]},{"id":157,"text":"When the Babylonians saw the most well-respected man in Persia without his nose and ears and all lurid with blood from the scourging, they were quite convinced that he was telling them the truth and came as their ally, and were ready to give him all that he asked; and he asked for a command. [2] When he got this from them, he did exactly as he had arranged with Darius. On the tenth day he led out the Babylonian army, surrounded and slaughtered the thousand whom he had instructed Darius to put in the field first. [3] Seeing that he produced works equal to his words, the Babylonians were overjoyed and ready to serve him in every way. When the agreed number of days was past, he led out once more a chosen body of Babylonians, and slaughtered the two thousand men of Darius' army. [4] When the Babylonians saw this work too, the praise of Zopyrus was on everyone's lips. The agreed number of days once again passing, he led out his men to the place he had named, where he surrounded the four thousand and slaughtered them. And when he had done this, Zopyrus was the one man for Babylon: he was made the commander of their armies and guard of the walls.","places":[{"placeId":"893951","name":"Babylonians","startOffset":9,"endOffset":20},{"placeId":"geonames-130758","name":"Persia","startOffset":56,"endOffset":62},{"placeId":"893951","name":"Babylonian","startOffset":404,"endOffset":414},{"placeId":"893951","name":"Babylonians","startOffset":576,"endOffset":587},{"placeId":"893951","name":"Babylonians","startOffset":719,"endOffset":730},{"placeId":"893951","name":"Babylonians","startOffset":799,"endOffset":810},{"placeId":"893951","name":"Babylon","startOffset":1083,"endOffset":1090}]},{"id":158,"text":"So when Darius assaulted the whole circuit of the walls, according to the agreed plan, then Zopyrus' treason was fully revealed. For while the townsmen were on the wall defending it against Darius' assault, he opened the gates called Cissian and Belian, and let the Persians inside the walls. [2] Those Babylonians who saw what he did fled to the temple of that Zeus whom they call Belus; those who had not seen it remained in position, until they too discovered how they had been betrayed.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":266,"endOffset":274},{"placeId":"893951","name":"Babylonians","startOffset":303,"endOffset":314}]},{"id":159,"text":"Thus Babylon was taken a second time, and when Darius was master of the Babylonians, he destroyed their walls and tore away all their gates, neither of which Cyrus had done at the first taking of Babylon; moreover he impaled about three thousand men that were prominent among them; as for the rest, he gave them back their city to live in. [2] Further, as the Babylonians, fearing for their food, had strangled their own women, as I described above, Darius provided wives to give them a posterity by appointing that each of the neighboring nations should send a certain number of women to Babylon; the sum of the women thus collected was fifty thousand: these were the mothers of those who now inhabit the city.","places":[{"placeId":"893951","name":"Babylon","startOffset":5,"endOffset":12},{"placeId":"893951","name":"Babylonians","startOffset":72,"endOffset":83},{"placeId":"893951","name":"Babylon","startOffset":196,"endOffset":203},{"placeId":"893951","name":"Babylonians","startOffset":360,"endOffset":371},{"placeId":"893951","name":"Babylon","startOffset":589,"endOffset":596}]},{"id":160,"text":"There never was in Darius' judgment any Persian before or after who did better service than Zopyrus, except Cyrus, with whom no Persian could compare himself. Many times Darius is said to have declared that he would rather Zopyrus were free of disfigurement than have twenty Babylons on top of the one he had. [2] He honored him very much; every year he sent him such gifts as the Persians hold most precious, and let him govern Babylon all his life with no tribute to pay, giving him many other things besides. This Zopyrus was the father of Megabyzus, who was general of an army in Egypt against the Athenians and their allies; and Megabyzus' son was that Zopyrus who deserted from the Persians to Athens.HerodotusThe Histories","places":[{"placeId":"geonames-130758","name":"Persian","startOffset":40,"endOffset":47},{"placeId":"geonames-130758","name":"Persian","startOffset":128,"endOffset":135},{"placeId":"893951","name":"Babylons","startOffset":275,"endOffset":283},{"placeId":"geonames-130758","name":"Persians","startOffset":381,"endOffset":389},{"placeId":"893951","name":"Babylon","startOffset":429,"endOffset":436},{"placeId":"981503","name":"Egypt","startOffset":584,"endOffset":589},{"placeId":"579885","name":"Athenians","startOffset":602,"endOffset":611},{"placeId":"geonames-130758","name":"Persians","startOffset":688,"endOffset":696},{"placeId":"579885","name":"Athens","startOffset":700,"endOffset":706}]}]`)},4:{id:4,title:"Book 4: Melpomene",chapters:JSON.parse(`[{"id":1,"text":"After taking Babylon, Darius himself marched against the Scythians. For since Asia was bursting with men and vast revenues were coming in, Darius desired to punish the Scythians for the wrong they had begun when they invaded Media first and defeated those who opposed them in battle. [2] For the Scythians, as I have said before, ruled upper Asia1 for twenty-eight years; they invaded Asia in their pursuit of the Cimmerians, and ended the power of the Medes, who were the rulers of Asia before the Scythians came. [3] But when the Scythians had been away from their homes for twenty-eight years and returned to their country after so long an absence, as much trouble as their Median war awaited them. They found themselves opposed by a great force; for the Scythian women, when their husbands were away for so long, turned to their slaves.","places":[{"placeId":"893951","name":"Babylon","startOffset":13,"endOffset":20},{"placeId":"991379","name":"Scythians","startOffset":57,"endOffset":66},{"placeId":"991379","name":"Scythians","startOffset":168,"endOffset":177},{"placeId":"903080","name":"Media","startOffset":225,"endOffset":230},{"placeId":"1273","name":"Scythians","startOffset":296,"endOffset":305},{"placeId":"854696","name":"Cimmerians","startOffset":414,"endOffset":424},{"placeId":"903080","name":"Medes","startOffset":453,"endOffset":458},{"placeId":"1273","name":"Scythians","startOffset":499,"endOffset":508},{"placeId":"1273","name":"Scythians","startOffset":532,"endOffset":541},{"placeId":"903080","name":"Median","startOffset":677,"endOffset":683},{"placeId":"1273","name":"Scythian","startOffset":758,"endOffset":766}]},{"id":2,"text":"Now the Scythians blind all their slaves, because of the milk2 they drink; and this is how they get it: taking tubes of bone very much like flutes, they insert these into the genitalia of the mares and blow into them, some blowing while others milk. According to them, their reason for doing this is that blowing makes the mare's veins swell and her udder drop. [2] When done milking, they pour the milk into deep wooden buckets, and make their slaves stand around the buckets and shake the milk; they draw off what stands on the surface and value this most; what lies at the bottom is less valued. This is why the Scythians blind all prisoners whom they take: for they do not cultivate the soil, but are nomads.","places":[{"placeId":"991379","name":"Scythians","startOffset":8,"endOffset":17},{"placeId":"1273","name":"Scythians","startOffset":615,"endOffset":624}]},{"id":3,"text":"So it came about that a younger generation grew up, born of these slaves and the women; and when the youths learned of their parentage, they came out to fight the Scythians returning from Media. [2] First they barred the way to their country by digging a wide trench from the Tauric mountains to the broadest part of the Maeetian lake;3 and then, when the Scythians tried to force a passage, they camped opposite them and engaged them in battle. [3] There were many fights, and the Scythians could gain no advantage; at last one of them said, Men of Scythia, look at what we are doing! We are fighting our own slaves; they kill us, and we grow fewer; we kill them, and shall have fewer slaves. [4] Now, then, my opinion is that we should drop our spears and bows, and meet them with horsewhips in our hands. As long as they see us armed, they imagine that they are our equals and the sons of our equals; let them see us with whips and no weapons, and they will perceive that they are our slaves; and taking this to heart they will not face our attack.","places":[{"placeId":"991379","name":"Scythians","startOffset":163,"endOffset":172},{"placeId":"903080","name":"Media","startOffset":188,"endOffset":193},{"placeId":"226778","name":"Tauric mountains","startOffset":276,"endOffset":292},{"placeId":"825318","name":"Maeetian lake","startOffset":321,"endOffset":334},{"placeId":"1273","name":"Scythians","startOffset":356,"endOffset":365},{"placeId":"1273","name":"Scythians","startOffset":482,"endOffset":491},{"placeId":"60677","name":"Scythia","startOffset":551,"endOffset":558}]},{"id":4,"text":"85 in which it is correctly observed that in hot countries the horns grow quickly, whereas in very cold countries beasts hardly grow horns, or not at all.","places":[]},{"id":5,"text":"The Scythians say that their nation is the youngest in the world, and that it came into being in this way. A man whose name was Targitas appeared in this country, which was then desolate. They say that his parents were Zeus and a daughter of the Borysthenes river (I do not believe the story, but it is told).4 [2] Such was Targitas' lineage; and he had three sons: Lipoxas, Arpoxas, and Colaxas, youngest of the three. [3] In the time of their rule (the story goes) certain implementsnamely, a plough, a yoke, a sword, and a flask, all of goldfell down from the sky into Scythia. The eldest of them, seeing these, approached them meaning to take them; but the gold began to burn as he neared, and he stopped. [4] Then the second approached, and the gold did as before. When these two had been driven back by the burning gold, the youngest brother approached and the burning stopped, and he took the gold to his own house. In view of this, the elder brothers agreed to give all the royal power to the youngest.","places":[{"placeId":"991379","name":"Scythians","startOffset":4,"endOffset":13},{"placeId":"226544","name":"Borysthenes river","startOffset":247,"endOffset":264},{"placeId":"60677","name":"Scythia","startOffset":579,"endOffset":586}]},{"id":6,"text":"Lipoxas, it is said, was the father of the Scythian clan called Auchatae; Arpoxas, the second brother, of those called Katiari and Traspians; the youngest, who was king, of those called Paralatae. [2] All these together bear the name of Skoloti, after their king; Scythians is the name given them by Greeks. This, then, is the Scythians' account of their origin,","places":[{"placeId":"60677","name":"Scythian","startOffset":44,"endOffset":52},{"placeId":"1273","name":"Scythians","startOffset":267,"endOffset":276},{"placeId":"geonames-390903","name":"Greeks","startOffset":304,"endOffset":310},{"placeId":"1273","name":"Scythians","startOffset":331,"endOffset":340}]},{"id":7,"text":"and they say that neither more nor less than a thousand years in all passed from the time of their first king Targitas to the entry of Darius into their country. The kings guard this sacred gold very closely, and every year offer solemn sacrifices of propitiation to it. [2] Whoever falls asleep at this festival in the open air, having the sacred gold with him, is said by the Scythians not to live out the year; for which reason5 (they say) as much land as he can ride round in one day is given to him. Because of the great size of the country, the lordships that Colaxas established for his sons were three, one of which, where they keep the gold, was the greatest. [3] Above and north of the neighbors of their country no one (they say) can see or travel further, because of showers of feathers;6 for earth and sky are full of feathers, and these hinder sight.","places":[{"placeId":"991379","name":"Scythians","startOffset":379,"endOffset":388}]},{"id":8,"text":"This is what the Scythians say about themselves and the country north of them. But the story told by the Greeks who live in Pontus is as follows. Heracles, driving the cattle of Geryones, came to this land, which was then desolate, but is now inhabited by the Scythians. [2] Geryones lived west of the Pontus,7 settled in the island called by the Greeks Erythea, on the shore of Ocean near Gadira, outside the pillars of Heracles. As for Ocean, the Greeks say that it flows around the whole world from where the sun rises, but they cannot prove that this is so. [3] Heracles came from there to the country now called Scythia, where, encountering wintry and frosty weather, he drew his lion's skin over him and fell asleep, and while he slept his mares, which were grazing yoked to the chariot, were spirited away by divine fortune.","places":[{"placeId":"991379","name":"Scythians","startOffset":17,"endOffset":26},{"placeId":"geonames-390903","name":"Greeks","startOffset":105,"endOffset":111},{"placeId":"1224","name":"Pontus","startOffset":124,"endOffset":130},{"placeId":"1273","name":"Scythians","startOffset":260,"endOffset":269},{"placeId":"1224","name":"Pontus","startOffset":302,"endOffset":308},{"placeId":"geonames-390903","name":"Greeks","startOffset":347,"endOffset":353},{"placeId":"255978","name":"Erythea","startOffset":354,"endOffset":361},{"placeId":"256177","name":"Gadira","startOffset":390,"endOffset":396},{"placeId":"256198","name":"pillars of Heracles","startOffset":410,"endOffset":429},{"placeId":"geonames-390903","name":"Greeks","startOffset":449,"endOffset":455},{"placeId":"60677","name":"Scythia","startOffset":617,"endOffset":624}]},{"id":9,"text":"When Heracles awoke, he searched for them, visiting every part of the country, until at last he came to the land called the Woodland, and there he found in a cave a creature of double form that was half maiden and half serpent; above the buttocks she was a woman, below them a snake. [2] When he saw her he was astonished, and asked her if she had seen his mares straying; she said that she had them, and would not return them to him before he had intercourse with her; Heracles did, in hope of this reward. [3] But though he was anxious to take the horses and go, she delayed returning them, so that she might have Heracles with her for as long as possible; at last she gave them back, telling him, These mares came, and I kept them safe here for you, and you have paid me for keeping them, for I have three sons by you. [4] Now tell me what I am to do when they are grown up: shall I keep them here (since I am queen of this country), or shall I send them away to you? Thus she inquired, and then (it is said) Heracles answered: [5] When you see the boys are grown up, do as follows and you will do rightly: whichever of them you see bending this bow and wearing this belt so, make him an inhabitant of this land; but whoever falls short of these accomplishments that I require, send him away out of the country. Do so and you shall yourself have comfort, and my will shall be done.","places":[{"placeId":"226628","name":"Woodland","startOffset":124,"endOffset":132}]},{"id":10,"text":"So he drew one of his bows (for until then Heracles always carried two), and showed her the belt, and gave her the bow and the belt, that had a golden vessel on the end of its clasp; and, having given them, he departed. But when the sons born to her were grown men, she gave them names, calling one of them Agathyrsus and the next Gelonus and the youngest Scythes; furthermore, remembering the instructions, she did as she was told. [2] Two of her sons, Agathyrsus and Gelonus, were cast out by their mother and left the country, unable to fulfill the requirements set; but Scythes, the youngest, fulfilled them and so stayed in the land. [3] From Scythes son of Heracles comes the whole line of the kings of Scythia; and it is because of the vessel that the Scythians carry vessels on their belts to this day. This alone his mother did for Scythes. This is what the Greek dwellers in Pontus say.","places":[{"placeId":"60677","name":"Scythia","startOffset":709,"endOffset":716},{"placeId":"991379","name":"Scythians","startOffset":759,"endOffset":768},{"placeId":"geonames-390903","name":"Greek","startOffset":867,"endOffset":872},{"placeId":"1224","name":"Pontus","startOffset":885,"endOffset":891}]},{"id":11,"text":"There is yet another story, to which account I myself especially incline. It is to this effect. The nomadic Scythians inhabiting Asia, when hard pressed in war by the Massagetae, fled across the Araxes8 river to the Cimmerian country (for the country which the Scythians now inhabit is said to have belonged to the Cimmerians before), [2] and the Cimmerians, at the advance of the Scythians, deliberated as men threatened by a great force should. Opinions were divided; both were strongly held, but that of the princes was the more honorable; for the people believed that their part was to withdraw and that there was no need to risk their lives for the dust of the earth; but the princes were for fighting to defend their country against the attackers. [3] Neither side could persuade the other, neither the people the princes nor the princes the people; the one party planned to depart without fighting and leave the country to their enemies, but the princes were determined to lie dead in their own country and not to flee with the people, for they considered how happy their situation had been and what ills were likely to come upon them if they fled from their native land. [4] Having made up their minds, the princes separated into two equal bands and fought with each other until they were all killed by each other's hands; then the Cimmerian people buried them by the Tyras river, where their tombs are still to be seen, and having buried them left the land; and the Scythians came and took possession of the country left empty.","places":[{"placeId":"991379","name":"Scythians","startOffset":108,"endOffset":117},{"placeId":"59921","name":"Massagetae","startOffset":167,"endOffset":177},{"placeId":"884118","name":"Araxes","startOffset":195,"endOffset":201},{"placeId":"854696","name":"Cimmerian","startOffset":216,"endOffset":225},{"placeId":"991379","name":"Scythians","startOffset":261,"endOffset":270},{"placeId":"854696","name":"Cimmerians","startOffset":315,"endOffset":325},{"placeId":"854696","name":"Cimmerians","startOffset":347,"endOffset":357},{"placeId":"1273","name":"Scythians","startOffset":381,"endOffset":390},{"placeId":"854696","name":"Cimmerian","startOffset":1340,"endOffset":1349},{"placeId":"226799","name":"Tyras river","startOffset":1376,"endOffset":1387},{"placeId":"1273","name":"Scythians","startOffset":1475,"endOffset":1484}]},{"id":12,"text":"And to this day there are Cimmerian walls in Scythia, and a Cimmerian ferry, and there is a country Cimmeria9 and a strait named Cimmerian. [2] Furthermore, it is evident that the Cimmerians in their flight from the Scythians into Asia also made a colony on the peninsula where the Greek city of Sinope has since been founded; and it is clear that the Scythians pursued them and invaded Media, missing their way; [3] for the Cimmerians always fled along the coast, and the Scythians pursued with the Caucasus on their right until they came into the Median land, turning inland on their way. That is the other story current among Greeks and foreigners alike.","places":[{"placeId":"854696","name":"Cimmerian","startOffset":26,"endOffset":35},{"placeId":"60677","name":"Scythia","startOffset":45,"endOffset":52},{"placeId":"854696","name":"Cimmerian","startOffset":60,"endOffset":69},{"placeId":"854696","name":"Cimmeria","startOffset":100,"endOffset":108},{"placeId":"854675","name":"strait named Cimmerian","startOffset":116,"endOffset":138},{"placeId":"854696","name":"Cimmerians","startOffset":180,"endOffset":190},{"placeId":"991379","name":"Scythians","startOffset":216,"endOffset":225},{"placeId":"geonames-390903","name":"Greek","startOffset":282,"endOffset":287},{"placeId":"857321","name":"Sinope","startOffset":296,"endOffset":302},{"placeId":"991379","name":"Scythians","startOffset":352,"endOffset":361},{"placeId":"903080","name":"Media","startOffset":387,"endOffset":392},{"placeId":"854696","name":"Cimmerians","startOffset":425,"endOffset":435},{"placeId":"1273","name":"Scythians","startOffset":473,"endOffset":482},{"placeId":"863766","name":"Caucasus","startOffset":500,"endOffset":508},{"placeId":"903080","name":"Median","startOffset":549,"endOffset":555},{"placeId":"geonames-390903","name":"Greeks","startOffset":629,"endOffset":635}]},{"id":13,"text":"There is also a story related in a poem by Aristeas son of Castrobius, a man of Proconnesus. This Aristeas, possessed by Phoebus, visited the Issedones; beyond these (he said) live the one-eyed Arimaspians, beyond whom are the griffins that guard gold, and beyond these again the Hyperboreans, whose territory reaches to the sea. [2] Except for the Hyperboreans, all these nations (and first the Arimaspians) are always at war with their neighbors; the Issedones were pushed from their lands by the Arimaspians, and the Scythians by the Issedones, and the Cimmerians, living by the southern sea, were hard pressed by the Scythians and left their country. Thus Aristeas' story does not agree with the Scythian account about this country.","places":[{"placeId":"511378","name":"Proconnesus","startOffset":81,"endOffset":92},{"placeId":"59853","name":"Issedones","startOffset":143,"endOffset":152},{"placeId":"29482","name":"Arimaspians","startOffset":195,"endOffset":206},{"placeId":"59962","name":"Hyperboreans","startOffset":281,"endOffset":293},{"placeId":"59962","name":"Hyperboreans","startOffset":350,"endOffset":362},{"placeId":"29482","name":"Arimaspians","startOffset":397,"endOffset":408},{"placeId":"59853","name":"Issedones","startOffset":454,"endOffset":463},{"placeId":"29482","name":"Arimaspians","startOffset":500,"endOffset":511},{"placeId":"991379","name":"Scythians","startOffset":521,"endOffset":530},{"placeId":"59853","name":"Issedones","startOffset":538,"endOffset":547},{"placeId":"854696","name":"Cimmerians","startOffset":557,"endOffset":567},{"placeId":"1273","name":"Scythians","startOffset":622,"endOffset":631},{"placeId":"1273","name":"Scythian","startOffset":701,"endOffset":709}]},{"id":14,"text":"Where Aristeas who wrote this came from, I have already said; I will tell the story that I heard about him at Proconnesus and Cyzicus. It is said that this Aristeas, who was as well-born as any of his townsfolk, went into a fuller's shop at Proconnesus and there died; the owner shut his shop and went away to tell the dead man's relatives, [2] and the report of Aristeas' death being spread about in the city was disputed by a man of Cyzicus, who had come from the town of Artace,10 and said that he had met Aristeas going toward Cyzicus and spoken with him. While he argued vehemently, the relatives of the dead man came to the fuller's shop with all that was necessary for burial; [3] but when the place was opened, there was no Aristeas there, dead or alive. But in the seventh year after that, Aristeas appeared at Proconnesus and made that poem which the Greeks now call the Arimaspea, after which he vanished once again.","places":[{"placeId":"511378","name":"Proconnesus","startOffset":110,"endOffset":121},{"placeId":"511218","name":"Cyzicus","startOffset":126,"endOffset":133},{"placeId":"511378","name":"Proconnesus","startOffset":241,"endOffset":252},{"placeId":"511218","name":"Cyzicus","startOffset":435,"endOffset":442},{"placeId":"511218","name":"Cyzicus","startOffset":531,"endOffset":538},{"placeId":"511378","name":"Proconnesus","startOffset":820,"endOffset":831},{"placeId":"geonames-390903","name":"Greeks","startOffset":861,"endOffset":867},{"placeId":"29482","name":"Arimaspea","startOffset":881,"endOffset":890}]},{"id":15,"text":"Such is the tale told in these two towns. But this, I know, happened to the Metapontines in Italy, two hundred and forty years after the second disappearance of Aristeas, as reckoning made at Proconnesus and Metapontum shows me: [2] Aristeas, so the Metapontines say, appeared in their country and told them to set up an altar to Apollo, and set beside it a statue bearing the name of Aristeas the Proconnesian; for, he said, Apollo had come to their country alone of all Italian lands, and hethe man who was now Aristeas, but then when he followed the god had been a crowhad come with him. [3] After saying this, he vanished. The Metapontines, so they say, sent to Delphi and asked the god what the vision of the man could mean; and the Pythian priestess told them to obey the vision, saying that their fortune would be better. [4] They did as instructed. And now there stands beside the image of Apollo a statue bearing the name of Aristeas; a grove of bay-trees surrounds it; the image is set in the marketplace. Let it suffice that I have said this much about Aristeas.","places":[{"placeId":"442658","name":"Metapontines","startOffset":76,"endOffset":88},{"placeId":"452346","name":"Italy","startOffset":92,"endOffset":97},{"placeId":"511378","name":"Proconnesus","startOffset":192,"endOffset":203},{"placeId":"442658","name":"Metapontum","startOffset":208,"endOffset":218},{"placeId":"442658","name":"Metapontines","startOffset":250,"endOffset":262},{"placeId":"511378","name":"Proconnesian","startOffset":398,"endOffset":410},{"placeId":"452346","name":"Italian","startOffset":472,"endOffset":479},{"placeId":"442658","name":"Metapontines","startOffset":633,"endOffset":645},{"placeId":"540726","name":"Delphi","startOffset":668,"endOffset":674}]},{"id":16,"text":"As for the land of which my history has begun to speak, no one exactly knows what lies north of it; for I can find out from no one who claims to know as an eyewitness. For even Aristeas, whom I recently mentionedeven he did not claim to have gone beyond the Issedones, even though a poet; but he spoke by hearsay of what lay north, saying that the Issedones had told him. [2] But all that we have been able to learn for certain by report of the farthest lands shall be told.","places":[{"placeId":"59853","name":"Issedones","startOffset":259,"endOffset":268},{"placeId":"59853","name":"Issedones","startOffset":349,"endOffset":358}]},{"id":17,"text":"North of the port of the Borysthenites,11 which lies midway along the coast of Scythia, the first inhabitants are the Callippidae, who are Scythian Greeks; and beyond them another tribe called Alazones; these and the Callippidae, though in other ways they live like the Scythians, plant and eat grain, onions, garlic, lentils, and millet. [2] Above the Alazones live Scythian farmers, who plant grain not to eat but to sell; north of these, the Neuri; north of the Neuri, the land is uninhabited so far as we know.","places":[{"placeId":"226546","name":"Borysthenites","startOffset":25,"endOffset":38},{"placeId":"60677","name":"Scythia","startOffset":79,"endOffset":86},{"placeId":"60677","name":"Scythian","startOffset":139,"endOffset":147},{"placeId":"geonames-390903","name":"Greeks","startOffset":148,"endOffset":154},{"placeId":"226513","name":"Alazones","startOffset":193,"endOffset":201},{"placeId":"991379","name":"Scythians","startOffset":270,"endOffset":279},{"placeId":"226513","name":"Alazones","startOffset":353,"endOffset":361},{"placeId":"60677","name":"Scythian","startOffset":367,"endOffset":375},{"placeId":"588236458","name":"Neuri","startOffset":445,"endOffset":450},{"placeId":"588236458","name":"Neuri","startOffset":465,"endOffset":470}]},{"id":18,"text":"These are the tribes by the Hypanis river,12 west of the Borysthenes. But on the other side of the Borysthenes, the tribe nearest to the sea is the tribe of the Woodlands; and north of these live Scythian farmers, whom the Greek colonists on the Hypanis river (who call themselves Olbiopolitae) call Borysthenetae. [2] These farming Scythians inhabit a land stretching east a three days' journey to a river called Panticapes,13 and north as far as an eleven days' voyage up the Borysthenes; and north of these the land is desolate for a long way; [3] after the desolation is the country of the Man-eaters, who are a nation apart and by no means Scythian; and beyond them is true desolation, where no nation of men lives, as far as we know.","places":[{"placeId":"226630","name":"Hypanis river","startOffset":28,"endOffset":41},{"placeId":"226544","name":"Borysthenes","startOffset":57,"endOffset":68},{"placeId":"226544","name":"Borysthenes","startOffset":99,"endOffset":110},{"placeId":"674239","name":"Woodlands","startOffset":161,"endOffset":170},{"placeId":"60677","name":"Scythian","startOffset":196,"endOffset":204},{"placeId":"geonames-390903","name":"Greek","startOffset":223,"endOffset":228},{"placeId":"226630","name":"Hypanis river","startOffset":246,"endOffset":259},{"placeId":"226546","name":"Olbiopolitae","startOffset":281,"endOffset":293},{"placeId":"226546","name":"Borysthenetae","startOffset":300,"endOffset":314},{"placeId":"991379","name":"Scythians","startOffset":334,"endOffset":343},{"placeId":"226712","name":"Panticapes","startOffset":415,"endOffset":425},{"placeId":"226544","name":"Borysthenes","startOffset":479,"endOffset":490},{"placeId":"60677","name":"Man-eaters","startOffset":595,"endOffset":605},{"placeId":"60677","name":"Scythian","startOffset":646,"endOffset":654}]},{"id":19,"text":"But to the east of these farming Scythians, across the Panticapes river, you are in the land of nomadic Scythians, who plant nothing, nor plough; and all these lands except the Woodlands are bare of trees. These nomads inhabit a country to the east that stretches fourteen days' journey to the Gerrus river.14","places":[{"placeId":"991379","name":"Scythians","startOffset":33,"endOffset":42},{"placeId":"226712","name":"Panticapes","startOffset":55,"endOffset":65},{"placeId":"1273","name":"Scythians","startOffset":104,"endOffset":113},{"placeId":"674239","name":"Woodlands","startOffset":177,"endOffset":186},{"placeId":"226603","name":"Gerrus river","startOffset":294,"endOffset":306}]},{"id":20,"text":"Across the Gerrus are those lands called Royal, where the best and most numerous of the Scythians are, who consider all other Scythians their slaves; their territory stretches south to the Tauric land, and east to the trench that was dug by the sons of the blind men, and to the port called The Cliffs15 on the Maeetian lake; and part of it stretches to the Tanas river. [2] North of the Royal Scythians live the Blackcloaks, who are of another and not a Scythian stock; and beyond the Blackcloaks the land is all marshes and uninhabited by men, so far as we know.","places":[{"placeId":"226603","name":"Gerrus","startOffset":11,"endOffset":17},{"placeId":"226531","name":"Royal","startOffset":41,"endOffset":46},{"placeId":"991379","name":"Scythians","startOffset":88,"endOffset":97},{"placeId":"1273","name":"Scythians","startOffset":126,"endOffset":135},{"placeId":"226778","name":"Tauric land","startOffset":189,"endOffset":200},{"placeId":"825307","name":"The Cliffs","startOffset":291,"endOffset":301},{"placeId":"825318","name":"Maeetian lake","startOffset":311,"endOffset":324},{"placeId":"825398","name":"Tanas river","startOffset":358,"endOffset":370},{"placeId":"226531","name":"Royal","startOffset":389,"endOffset":394},{"placeId":"1273","name":"Scythians","startOffset":395,"endOffset":404},{"placeId":"1273","name":"Scythian","startOffset":456,"endOffset":464}]},{"id":21,"text":"Across the Tanas it is no longer Scythia; the first of the districts belongs to the Sauromatae, whose country begins at the inner end of the Maeetian lake and stretches fifteen days' journey north, and is quite bare of both wild and cultivated trees. Above these in the second district, the Budini inhabit a country thickly overgrown with trees of all kinds.","places":[{"placeId":"825398","name":"Tanas","startOffset":11,"endOffset":17},{"placeId":"60677","name":"Scythia","startOffset":34,"endOffset":41},{"placeId":"825371","name":"Sauromatae","startOffset":85,"endOffset":95},{"placeId":"825318","name":"Maeetian lake","startOffset":142,"endOffset":155},{"placeId":"543656","name":"Budini","startOffset":292,"endOffset":298}]},{"id":22,"text":"North of the Budini the land is uninhabited for seven days' journey; after this desolation, and somewhat more toward the east wind, live the Thyssagetae, a numerous and a separate nation, who live by hunting. [2] Adjoining these and in the same country live the people called Iyrkae; these also live by hunting, in the way that I will describe. The hunter climbs a tree, and sits there concealed; for trees grow thickly all over the land; and each man has his horse at hand, trained to flatten on its belly for the sake of lowness, and his dog; and when he sees the quarry from the tree, he shoots with the bow and mounts his horse and pursues it, and the dog follows close behind. [3] Beyond these and somewhat to the east live Scythians again, who revolted from the Royal Scythians and came to this country.","places":[{"placeId":"543656","name":"Budini","startOffset":13,"endOffset":19},{"placeId":"828323","name":"Thyssagetae","startOffset":141,"endOffset":152},{"placeId":"991379","name":"Scythians","startOffset":729,"endOffset":738},{"placeId":"226531","name":"Royal","startOffset":768,"endOffset":773},{"placeId":"1273","name":"Scythians","startOffset":774,"endOffset":783}]},{"id":23,"text":"As for the countryside of these Scythians, all the land mentioned up to this point is level and its soil deep; but thereafter it is stony and rough. [2] After a long journey through this rough country, there are men inhabiting the foothills of high mountains, who are said to be bald from birth (male and female alike) and snub-nosed and with long beards; they speak their own language, and wear Scythian clothing, and their food comes from trees. [3] The tree by which they live is called Pontic; it is about the size of a fig-tree, and bears a fruit as big as a bean, with a stone in it. When this fruit is ripe, they strain it through cloth, and a thick black liquid comes from it, which they call aschu;16 they lick this up or drink it mixed with milk, and from the thickest lees of it they make cakes, and eat them. [4] They have few cattle, for the pasture in their land is not good. They each live under a tree, covering it in winter with a white felt cloth, but using no felt in summer. [5] These people are wronged by no man, for they are said to be sacred; nor have they any weapon of war. They judge the quarrels between their neighbors; furthermore, whatever banished man has taken refuge with them is wronged by no one. They are called Argippeans.","places":[{"placeId":"991379","name":"Scythians","startOffset":32,"endOffset":41},{"placeId":"60677","name":"Scythian","startOffset":396,"endOffset":404}]},{"id":24,"text":"Now as far as the land of these bald men, we have full knowledge of the country and the nations on the near side of them; for some of the Scythians make their way to them, from whom it is easy to get knowledge, and from some of the Greeks, too, from the Borysthenes port and the other ports of Pontus; such Scythians as visit them transact their business with seven interpreters and in seven languages.","places":[{"placeId":"991379","name":"Scythians","startOffset":138,"endOffset":147},{"placeId":"geonames-390903","name":"Greeks","startOffset":232,"endOffset":238},{"placeId":"226544","name":"Borysthenes","startOffset":254,"endOffset":265},{"placeId":"1224","name":"Pontus","startOffset":294,"endOffset":300},{"placeId":"1273","name":"Scythians","startOffset":307,"endOffset":316}]},{"id":25,"text":"As far as these men this country is known, then, but what lies north of the bald men no one can say with exact knowledge; for high and impassable mountains bar the way, and no one crosses them. These bald men say (although I do not believe them) that the mountains are inhabited by men with goats' feet, and that beyond these are men who sleep for six months of the twelve. This I cannot accept as true at all. [2] But the country east of the bald-heads is known for certain to be inhabited by the Issedones; however, of what lies north either of the bald-heads or the Issedones we have no knowledge, except what comes from the report of these latter.","places":[{"placeId":"59853","name":"Issedones","startOffset":498,"endOffset":507},{"placeId":"59853","name":"Issedones","startOffset":569,"endOffset":578}]},{"id":26,"text":"It is said to be the custom of the Issedones that, whenever a man's father dies, all the nearest of kin bring beasts of the flock and, having killed these and cut up the flesh, they also cut up the dead father of their host, and set out all the flesh mixed together for a feast. [2] As for his head, they strip it bare and clean and gild it, and keep it for a sacred relic, to which they offer solemn sacrifice yearly. Every son does this for his father, just like the Greeks in their festivals in honor of the dead. In other respects, these are said to be a law-abiding people, too, and the women to have equal power with the men.","places":[{"placeId":"59853","name":"Issedones","startOffset":35,"endOffset":44},{"placeId":"geonames-390903","name":"Greeks","startOffset":469,"endOffset":475}]},{"id":27,"text":"Of these too, then, we have knowledge; but as for what is north of them, it is from the Issedones that the tale comes of the one-eyed men and the griffins that guard gold; this is told by the Scythians, who have heard it from them; and we have taken it as true from the Scythians, and call these people by the Scythian name, Arimaspians; for in the Scythian tongue arima is one, and spou is the eye.","places":[{"placeId":"59853","name":"Issedones","startOffset":88,"endOffset":97},{"placeId":"991379","name":"Scythians","startOffset":192,"endOffset":201},{"placeId":"1273","name":"Scythians","startOffset":270,"endOffset":279},{"placeId":"1273","name":"Scythian","startOffset":310,"endOffset":318},{"placeId":"29482","name":"Arimaspians","startOffset":325,"endOffset":336},{"placeId":"1273","name":"Scythian","startOffset":349,"endOffset":357}]},{"id":28,"text":"All the aforesaid country is exceedingly cold: for eight months of every year there is unbearable frost, and during these you do not make mud by pouring out water but by lighting a fire; the sea freezes, as does all the Cimmerian Bosporus; and the Scythians living on this side of the trench lead armies over the ice, and drive their wagons across to the land of the Sindi. [2] So it is winter for eight months, and cold in that country for the four that remain. Here, there is a different sort of winter than the winters in other lands: for in the season for rain scarcely any falls, but all summer it rains unceasingly; [3] and when there are thunderstorms in other lands, here there are none, but in summer there are plenty of them; if there is a thunderstorm in winter they are apt to wonder at it as at a portent. And so, too, if there is an earthquake summer or winter, it is considered a portent in Scythia. [4] Horses have the endurance to bear the Scythian winter; mules and asses cannot bear it at all; and yet in other lands, while asses and mules can endure frost, horses that stand in it are frostbitten.","places":[{"placeId":"854675","name":"Cimmerian Bosporus","startOffset":220,"endOffset":238},{"placeId":"991379","name":"Scythians","startOffset":248,"endOffset":257},{"placeId":"854735","name":"Sindi","startOffset":367,"endOffset":372},{"placeId":"60677","name":"Scythia","startOffset":906,"endOffset":913},{"placeId":"60677","name":"Scythian","startOffset":957,"endOffset":965}]},{"id":29,"text":"And in my opinion it is for this reason that the hornless kind of cattle grow no horns in Scythia. A verse of Homer in the Odyssey attests to my opinion:Libya, the land where lambs are born with horns on their foreheads, Hom. Od.","places":[{"placeId":"60677","name":"Scythia","startOffset":90,"endOffset":97},{"placeId":"716588","name":"Libya","startOffset":155,"endOffset":160}]},{"id":30,"text":"In Scythia, then, this happens because of the cold. But I think it strange (for it was always the way of my history to investigate excurses) that in the whole of Elis no mules can be conceived although the country is not cold, nor is there any evident cause. The Eleans themselves say that it is because of a curse that mules cannot be conceived among them; [2] but whenever the season is at hand for the mares to conceive, they drive them into the countries of their neighbors, and then send the asses after them, until the mares are pregnant, and then they drive them home again.","places":[{"placeId":"60677","name":"Scythia","startOffset":3,"endOffset":10},{"placeId":"570220","name":"Elis","startOffset":162,"endOffset":166},{"placeId":"570220","name":"Eleans","startOffset":263,"endOffset":269}]},{"id":31,"text":"But regarding the feathers of which the Scythians say that the air is full, so thickly that no one can see or traverse the land beyond, I have this opinion. North of that country snow falls continually, though less in summer than in winter, as is to be expected. [2] Whoever has seen snow falling thickly near him knows himself my meaning; for snow is like feathers; and because of the winter, which is as I have said, the regions to the north of this continent are uninhabited. I think therefore that in this story of feathers the Scythians and their neighbors only speak of snow figuratively. So, then, I have spoken of those parts that are said to be most distant.","places":[{"placeId":"991379","name":"Scythians","startOffset":40,"endOffset":49},{"placeId":"1273","name":"Scythians","startOffset":532,"endOffset":541}]},{"id":32,"text":"Concerning the Hyperborean people, neither the Scythians nor any other inhabitants of these lands tell us anything, except perhaps the Issedones. And, I think, even they say nothing; for if they did, then the Scythians, too, would have told, just as they tell of the one-eyed men. But Hesiod speaks of Hyperboreans, and Homer too in his poem The Heroes' Sons,17 if that is truly the work of Homer.","places":[{"placeId":"59962","name":"Hyperborean","startOffset":15,"endOffset":26},{"placeId":"991379","name":"Scythians","startOffset":47,"endOffset":56},{"placeId":"59853","name":"Issedones","startOffset":135,"endOffset":144},{"placeId":"1273","name":"Scythians","startOffset":209,"endOffset":218},{"placeId":"59962","name":"Hyperboreans","startOffset":302,"endOffset":314}]},{"id":33,"text":"But the Delians18 say much more about them than any others do. They say that offerings wrapped in straw are brought from the Hyperboreans to Scythia; when these have passed Scythia, each nation in turn receives them from its neighbors until they are carried to the Adriatic sea, which is the most westerly limit of their journey; [2] from there, they are brought on to the south, the people of Dodona being the first Greeks to receive them. From Dodona they come down to the Melian gulf, and are carried across to Euboea, and one city sends them on to another until they come to Carystus; after this, Andros is left out of their journey, for Carystians carry them to Tenos, and Tenians to Delos. [3] Thus (they say) these offerings come to Delos. But on the first journey, the Hyperboreans sent two maidens bearing the offerings, to whom the Delians give the names Hyperoche and Laodice, and five men of their people with them as escort for safe conduct, those who are now called Perpherees19 and greatly honored at Delos. [4] But when those whom they sent never returned, they took it amiss that they should be condemned always to be sending people and not getting them back, and so they carry the offerings, wrapped in straw, to their borders, and tell their neighbors to send them on from their own country to the next; [5] and the offerings, it is said, come by this conveyance to Delos. I can say of my own knowledge that there is a custom like these offerings; namely, that when the Thracian and Paeonian women sacrifice to the Royal Artemis, they have straw with them while they sacrifice.","places":[{"placeId":"599588","name":"Delians","startOffset":8,"endOffset":15},{"placeId":"59962","name":"Hyperboreans","startOffset":125,"endOffset":137},{"placeId":"60677","name":"Scythia","startOffset":141,"endOffset":148},{"placeId":"60677","name":"Scythia","startOffset":173,"endOffset":180},{"placeId":"1004","name":"Adriatic sea","startOffset":265,"endOffset":277},{"placeId":"530843","name":"Dodona","startOffset":394,"endOffset":400},{"placeId":"geonames-390903","name":"Greeks","startOffset":417,"endOffset":423},{"placeId":"530843","name":"Dodona","startOffset":446,"endOffset":452},{"placeId":"540929","name":"Melian gulf","startOffset":475,"endOffset":486},{"placeId":"540775","name":"Euboea","startOffset":514,"endOffset":520},{"placeId":"570336","name":"Carystus","startOffset":579,"endOffset":587},{"placeId":"589693","name":"Andros","startOffset":601,"endOffset":607},{"placeId":"570336","name":"Carystians","startOffset":642,"endOffset":652},{"placeId":"590074","name":"Tenos","startOffset":667,"endOffset":672},{"placeId":"590074","name":"Tenians","startOffset":678,"endOffset":685},{"placeId":"599588","name":"Delos","startOffset":689,"endOffset":694},{"placeId":"599588","name":"Delos","startOffset":740,"endOffset":745},{"placeId":"59962","name":"Hyperboreans","startOffset":777,"endOffset":789},{"placeId":"599588","name":"Delians","startOffset":842,"endOffset":849},{"placeId":"599588","name":"Delos","startOffset":1016,"endOffset":1021},{"placeId":"599588","name":"Delos","startOffset":1385,"endOffset":1390},{"placeId":"1001889","name":"Thracian","startOffset":1489,"endOffset":1497},{"placeId":"491680","name":"Paeonian","startOffset":1502,"endOffset":1510}]},{"id":34,"text":"I know that they do this. The Delian girls and boys cut their hair in honor of these Hyperborean maidens, who died at Delos; the girls before their marriage cut off a tress and lay it on the tomb, wound around a spindle [2] (this tomb is at the foot of an olive-tree, on the left hand of the entrance of the temple of Artemis); the Delian boys twine some of their hair around a green stalk, and lay it on the tomb likewise.","places":[{"placeId":"599588","name":"Delian","startOffset":30,"endOffset":36},{"placeId":"59962","name":"Hyperborean","startOffset":85,"endOffset":96},{"placeId":"599588","name":"Delos","startOffset":118,"endOffset":123},{"placeId":"599588","name":"Delian","startOffset":332,"endOffset":338}]},{"id":35,"text":"In this way, then, these maidens are honored by the inhabitants of Delos. These same Delians relate that two virgins, Arge and Opis, came from the Hyperboreans by way of the aforesaid peoples to Delos earlier than Hyperoche and Laodice; [2] these latter came to bring to Eileithyia the tribute which they had agreed to pay for easing child-bearing; but Arge and Opis, they say, came with the gods themselves,20 and received honors of their own from the Delians. [3] For the women collected gifts for them, calling upon their names in the hymn made for them by Olen of Lycia; it was from Delos that the islanders and Ionians learned to sing hymns to Opis and Arge, calling upon their names and collecting gifts (this Olen, after coming from Lycia, also made the other and ancient hymns that are sung at Delos). [4] Furthermore, they say that when the thighbones are burnt in sacrifice on the altar, the ashes are all cast on the burial-place of Opis and Arge, behind the temple of Artemis, looking east, nearest the refectory of the people of Ceos.","places":[{"placeId":"599588","name":"Delos","startOffset":67,"endOffset":72},{"placeId":"599588","name":"Delians","startOffset":85,"endOffset":92},{"placeId":"59962","name":"Hyperboreans","startOffset":147,"endOffset":159},{"placeId":"599588","name":"Delos","startOffset":195,"endOffset":200},{"placeId":"599588","name":"Delians","startOffset":453,"endOffset":460},{"placeId":"638965","name":"Lycia","startOffset":568,"endOffset":573},{"placeId":"599588","name":"Delos","startOffset":587,"endOffset":592},{"placeId":"550597","name":"Ionians","startOffset":616,"endOffset":623},{"placeId":"638965","name":"Lycia","startOffset":740,"endOffset":745},{"placeId":"599588","name":"Delos","startOffset":802,"endOffset":807},{"placeId":"570348","name":"Ceos","startOffset":1042,"endOffset":1046}]},{"id":36,"text":"I have said this much of the Hyperboreans, and let it suffice; for I do not tell the story of that Abaris, alleged to be a Hyperborean, who carried the arrow over the whole world, fasting all the while. But if there are men beyond the north wind, then there are others beyond the south. [2] And I laugh to see how many have before now drawn maps of the world, not one of them reasonably; for they draw the world as round as if fashioned by compasses, encircled by the Ocean river, and Asia and Europe of a like extent. For myself, I will in a few words indicate the extent of the two, and how each should be drawn.","places":[{"placeId":"59962","name":"Hyperboreans","startOffset":29,"endOffset":41},{"placeId":"59962","name":"Hyperborean","startOffset":123,"endOffset":134}]},{"id":37,"text":"The land where the Persians live extends to the southern sea which is called Red; beyond these to the north are the Medes, and beyond the Medes the Saspires, and beyond the Saspires the Colchians, whose country extends to the northern sea21 into which the Phasis river flows; so these four nations live between the one sea and the other.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":19,"endOffset":27},{"placeId":"39290","name":"Red","startOffset":77,"endOffset":80},{"placeId":"903080","name":"Medes","startOffset":116,"endOffset":121},{"placeId":"903080","name":"Medes","startOffset":138,"endOffset":143},{"placeId":"863770","name":"Colchians","startOffset":186,"endOffset":195},{"placeId":"236376","name":"northern sea","startOffset":226,"endOffset":238},{"placeId":"857276","name":"Phasis river","startOffset":256,"endOffset":268}]},{"id":38,"text":"But west of this region two peninsulas stretch out from it into the sea, which I will now describe. [2] On the north side one of the peninsulas begins at the Phasis and stretches seaward along the Pontus and the Hellespont, as far as Sigeum in the Troad; on the south side, the same peninsula has a seacoast beginning at the Myriandric gulf that is near Phoenicia, and stretching seaward as far as the Triopian headland. On this peninsula live thirty nations.","places":[{"placeId":"857276","name":"Phasis","startOffset":158,"endOffset":164},{"placeId":"1224","name":"Pontus","startOffset":197,"endOffset":203},{"placeId":"501434","name":"Hellespont","startOffset":212,"endOffset":222},{"placeId":"550877","name":"Sigeum","startOffset":234,"endOffset":240},{"placeId":"550944","name":"Troad","startOffset":248,"endOffset":253},{"placeId":"678334","name":"Phoenicia","startOffset":354,"endOffset":363},{"placeId":"599989","name":"Triopian headland","startOffset":402,"endOffset":419}]},{"id":39,"text":"This is the first peninsula. But the second, beginning with Persia, stretches to the Red Sea, and is Persian land; and next, the neighboring land of Assyria; and after Assyria, Arabia; this peninsula ends (not truly but only by common consent) at the Arabian Gulf, to which Darius brought a canal from the Nile. [2] Now from the Persian country to Phoenicia there is a wide and vast tract of land; and from Phoenicia this peninsula runs beside our sea by way of the Syrian Palestine and Egypt, which is at the end of it; in this peninsula there are just three nations.","places":[{"placeId":"geonames-130758","name":"Persia","startOffset":60,"endOffset":66},{"placeId":"39290","name":"Red Sea","startOffset":85,"endOffset":92},{"placeId":"geonames-130758","name":"Persian","startOffset":101,"endOffset":108},{"placeId":"29492","name":"Assyria","startOffset":149,"endOffset":156},{"placeId":"29492","name":"Assyria","startOffset":168,"endOffset":175},{"placeId":"29475","name":"Arabia","startOffset":177,"endOffset":183},{"placeId":"29713","name":"Arabian Gulf","startOffset":251,"endOffset":263},{"placeId":"727172","name":"Nile","startOffset":306,"endOffset":310},{"placeId":"geonames-130758","name":"Persian","startOffset":329,"endOffset":336},{"placeId":"678334","name":"Phoenicia","startOffset":348,"endOffset":357},{"placeId":"678334","name":"Phoenicia","startOffset":407,"endOffset":416},{"placeId":"1001943","name":"Egypt","startOffset":487,"endOffset":492}]},{"id":40,"text":"So much for the parts of Asia west of the Persians. But what is beyond the Persians, and Medes, and Saspires, and Colchians, east and toward the rising sun, this is bounded on the one hand by the Red Sea, and to the north by the Caspian Sea and the Araxes river, which flows toward the sun's rising. [2] As far as India, Asia is an inhabited land; but thereafter, all to the east is desolation, nor can anyone say what kind of land is there.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":42,"endOffset":50},{"placeId":"geonames-130758","name":"Persians","startOffset":75,"endOffset":83},{"placeId":"903080","name":"Medes","startOffset":89,"endOffset":94},{"placeId":"863770","name":"Colchians","startOffset":114,"endOffset":123},{"placeId":"39290","name":"Red Sea","startOffset":196,"endOffset":203},{"placeId":"884118","name":"Araxes","startOffset":249,"endOffset":255}]},{"id":41,"text":"Such is Asia, and such its extent. But Libya is on this second peninsula; for Libya comes next after Egypt. The Egyptian part of this peninsula is narrow; for from our sea to the Red Sea it is a distance of a hundred and twenty-five miles; that is, a thousand stades; but after this narrow part, the peninsula which is called Libya is very broad.","places":[{"placeId":"991375","name":"Libya","startOffset":39,"endOffset":44},{"placeId":"991375","name":"Libya","startOffset":78,"endOffset":83},{"placeId":"1001943","name":"Egypt","startOffset":101,"endOffset":106},{"placeId":"981503","name":"Egyptian","startOffset":112,"endOffset":120},{"placeId":"39290","name":"Red Sea","startOffset":179,"endOffset":186},{"placeId":"991375","name":"Libya","startOffset":326,"endOffset":331}]},{"id":42,"text":"I wonder, then, at those who have mapped out and divided the world into Libya, Asia, and Europe; for the difference between them is great, seeing that in length Europe stretches along both the others together, and it appears to me to be wider beyond all comparison. [2] For Libya shows clearly that it is bounded by the sea, except where it borders on Asia. Necos king of Egypt first discovered this and made it known. When he had finished digging the canal which leads from the Nile to the Arabian Gulf, he sent Phoenicians in ships, instructing them to sail on their return voyage past the Pillars of Heracles until they came into the northern sea and so to Egypt. [3] So the Phoenicians set out from the Red Sea and sailed the southern sea; whenever autumn came they would put in and plant the land in whatever part of Libya they had reached, and there await the harvest; [4] then, having gathered the crop, they sailed on, so that after two years had passed, it was in the third that they rounded the pillars of Heracles and came to Egypt. There they said (what some may believe, though I do not) that in sailing around Libya they had the sun on their right hand.22","places":[{"placeId":"991375","name":"Libya","startOffset":72,"endOffset":77},{"placeId":"991375","name":"Libya","startOffset":274,"endOffset":279},{"placeId":"1001943","name":"Egypt","startOffset":372,"endOffset":377},{"placeId":"727172","name":"Nile","startOffset":479,"endOffset":483},{"placeId":"29713","name":"Arabian Gulf","startOffset":491,"endOffset":503},{"placeId":"678334","name":"Phoenicia","startOffset":513,"endOffset":522},{"placeId":"275614","name":"Pillars of Heracles","startOffset":592,"endOffset":611},{"placeId":"236376","name":"northern sea","startOffset":637,"endOffset":649},{"placeId":"981503","name":"Egypt","startOffset":660,"endOffset":665},{"placeId":"678334","name":"Phoenicia","startOffset":678,"endOffset":687},{"placeId":"39290","name":"Red Sea","startOffset":707,"endOffset":714},{"placeId":"716588","name":"Libya","startOffset":822,"endOffset":827},{"placeId":"256198","name":"pillars of Heracles","startOffset":1005,"endOffset":1024},{"placeId":"1001943","name":"Egypt","startOffset":1037,"endOffset":1042},{"placeId":"991375","name":"Libya","startOffset":1124,"endOffset":1129}]},{"id":43,"text":"Thus was the first knowledge of Libya gained. The next story is that of the Carthaginians: for as for Sataspes son of Teaspes, an Achaemenid, he did not sail around Libya, although he was sent for that purpose; but he feared the length and loneliness of the voyage and so returned without accomplishing the task laid upon him by his mother. [2] For he had raped the virgin daughter of Zopyrus son of Megabyzus; and when on this charge he was to be impaled by King Xerxes, Sataspes' mother, who was Darius' sister, interceded for his life, saying that she would impose a heavier punishment on him than Xerxes; [3] for he would be compelled to sail around Libya, until he completed his voyage and came to the Arabian Gulf. Xerxes agreed to this, and Sataspes went to Egypt where he received a ship and a crew from the Egyptians, and sailed past the Pillars of Heracles. [4] Having sailed out beyond them, and rounded the Libyan promontory called Solois,23 he sailed south; but when he had been many months sailing over the sea, and always more before him, he turned back and made sail for Egypt. [5] Coming to King Xerxes from there, he related in his narrative that, when he was farthest distant, he sailed by a country of little men, who wore palm-leaf clothing; these, whenever he and his men put in to land with their ship, left their towns and fled to the hills; he and his men did no harm when they landed, and took nothing from the people except cattle. [6] As to his not sailing completely around Libya, the reason (he said) was that the ship could move no farther, but was stopped. But Xerxes did not believe that Sataspes spoke the truth, and, as the task appointed was unfulfilled, he impaled him, punishing him on the charge first brought against him. [7] This Sataspes had a eunuch, who as soon as he heard of his master's death escaped to Samos, with a great hoard of wealth, of which a man of Samos got possession. I know the man's name but deliberately omit it.","places":[{"placeId":"991375","name":"Libya","startOffset":32,"endOffset":37},{"placeId":"314921","name":"Carthaginians","startOffset":76,"endOffset":89},{"placeId":"716588","name":"Libya","startOffset":165,"endOffset":170},{"placeId":"716588","name":"Libya","startOffset":654,"endOffset":659},{"placeId":"29713","name":"Arabian Gulf","startOffset":707,"endOffset":719},{"placeId":"1001943","name":"Egypt","startOffset":765,"endOffset":770},{"placeId":"981503","name":"Egyptians","startOffset":816,"endOffset":825},{"placeId":"275614","name":"Pillars of Heracles","startOffset":847,"endOffset":866},{"placeId":"716588","name":"Libyan","startOffset":919,"endOffset":925},{"placeId":"981503","name":"Egypt","startOffset":1087,"endOffset":1092},{"placeId":"716588","name":"Libya","startOffset":1503,"endOffset":1508},{"placeId":"599926","name":"Samos","startOffset":1851,"endOffset":1856},{"placeId":"599926","name":"Samos","startOffset":1906,"endOffset":1911}]},{"id":44,"text":"But as to Asia, most of it was discovered by Darius. There is a river, Indus, second of all rivers in the production of crocodiles. Darius, desiring to know where this Indus empties into the sea, sent ships manned by Scylax, a man of Caryanda, and others whose word he trusted; [2] these set out from the city of Caspatyrus and the Pactyic country, and sailed down the river toward the east and the sunrise until they came to the sea; and voyaging over the sea west, they came in the thirtieth month to that place from which the Egyptian king sent the above-mentioned Phoenicians to sail around Libya. [3] After this circumnavigation, Darius subjugated the Indians and made use of this sea. Thus it was discovered that Asia, except the parts toward the rising sun, was in other respects like Libya.","places":[{"placeId":"59851","name":"Indus","startOffset":71,"endOffset":76},{"placeId":"59851","name":"Indus","startOffset":168,"endOffset":173},{"placeId":"599694","name":"Caryanda","startOffset":234,"endOffset":242},{"placeId":"981503","name":"Egyptian","startOffset":529,"endOffset":537},{"placeId":"678334","name":"Phoenicia","startOffset":568,"endOffset":577},{"placeId":"991375","name":"Libya","startOffset":595,"endOffset":600},{"placeId":"716588","name":"Libya","startOffset":792,"endOffset":797}]},{"id":45,"text":"But it is plain that none have obtained knowledge of Europe's eastern or northern regions, so as to be able say if it is bounded by seas; its length is known to be enough to stretch along both Asia and Libya. [2] I cannot guess for what reason the earth, which is one, has three names, all women's, and why the boundary lines set for it are the Egyptian Nile river and the Colchian Phasis river (though some say that the Maeetian Tanas river and the Cimmerian Ferries24 are boundaries); and I cannot learn the names of those who divided the world, or where they got the names which they used. [3] For Libya is said by most Greeks to be named after a native woman of that name, and Asia after the wife of Prometheus;25 yet the Lydians claim a share in the latter name, saying that Asia was not named after Prometheus' wife Asia, but after Asies, the son of Cotys, who was the son of Manes, and that from him the Asiad clan at Sardis also takes its name. [4] But as for Europe, no men have any knowledge whether it is bounded by seas or not, or where it got its name, nor is it clear who gave the name, unless we say that the land took its name from the Tyrian Europa, having been (it would seem) before then nameless like the rest. [5] But it is plain that this woman was of Asiatic birth, and never came to this land which the Greeks now call Europe, but only from Phoenicia to Crete and from Crete to Lycia. Thus much I have said of these matters, and let it suffice; we will use the names established by custom.","places":[{"placeId":"991375","name":"Libya","startOffset":202,"endOffset":207},{"placeId":"981503","name":"Egyptian","startOffset":345,"endOffset":353},{"placeId":"727172","name":"Nile","startOffset":354,"endOffset":358},{"placeId":"857276","name":"Phasis river","startOffset":382,"endOffset":394},{"placeId":"825318","name":"Maeetian","startOffset":421,"endOffset":429},{"placeId":"825398","name":"Tanas river","startOffset":430,"endOffset":442},{"placeId":"854696","name":"Cimmerian","startOffset":451,"endOffset":460},{"placeId":"716588","name":"Libya","startOffset":602,"endOffset":607},{"placeId":"geonames-390903","name":"Greeks","startOffset":624,"endOffset":630},{"placeId":"geonames-390903","name":"Greeks","startOffset":1328,"endOffset":1334},{"placeId":"678334","name":"Phoenicia","startOffset":1366,"endOffset":1375},{"placeId":"589748","name":"Crete","startOffset":1379,"endOffset":1384},{"placeId":"589748","name":"Crete","startOffset":1394,"endOffset":1399},{"placeId":"638965","name":"Lycia","startOffset":1403,"endOffset":1408}]},{"id":46,"text":"Nowhere are men so ignorant as in the lands by the Euxine Pontus (excluding the Scythian nation) into which Darius led his army. For we cannot show that any nation within the region of the Pontus has any cleverness, nor do we know of (overlooking the Scythian nation and Anacharsis) any notable man born there. [2] But the Scythian race has made the cleverest discovery that we know in what is the most important of all human affairs; I do not praise the Scythians in all respects, but in this, the most important: that they have contrived that no one who attacks them can escape, and no one can catch them if they do not want to be found. [3] For when men have no established cities or forts, but are all nomads and mounted archers, not living by tilling the soil but by raising cattle and carrying their dwellings on wagons, how can they not be invincible and unapproachable?","places":[{"placeId":"1224","name":"Euxine Pontus","startOffset":51,"endOffset":64},{"placeId":"60677","name":"Scythian","startOffset":80,"endOffset":88},{"placeId":"1224","name":"Pontus","startOffset":189,"endOffset":195},{"placeId":"60677","name":"Scythian","startOffset":251,"endOffset":259},{"placeId":"1273","name":"Scythian","startOffset":323,"endOffset":331},{"placeId":"60677","name":"Scythians","startOffset":455,"endOffset":464}]},{"id":47,"text":"They have made this discovery in a land that suits their purpose and has rivers that are their allies; for their country is flat and grassy and well-watered, and rivers run through it not very many fewer in number than the canals of Egypt. [2] As many of them as are famous and can be entered from the sea, I shall name. There is the Ister, which has five mouths, and the Tyras, and Hypanis, and Borysthenes, and Panticapes, and Hypacuris, and Gerrhus, and Tanas. Their courses are as I shall indicate.","places":[{"placeId":"1001943","name":"Egypt","startOffset":233,"endOffset":238},{"placeId":"226577","name":"Ister","startOffset":334,"endOffset":339},{"placeId":"226799","name":"Tyras","startOffset":372,"endOffset":377},{"placeId":"226630","name":"Hypanis","startOffset":383,"endOffset":390},{"placeId":"226544","name":"Borysthenes","startOffset":396,"endOffset":407},{"placeId":"226712","name":"Panticapes","startOffset":413,"endOffset":423},{"placeId":"226653","name":"Hypacuris","startOffset":429,"endOffset":438},{"placeId":"226603","name":"Gerrhus","startOffset":444,"endOffset":451},{"placeId":"825398","name":"Tanas","startOffset":457,"endOffset":463}]},{"id":48,"text":"The Ister, the greatest of all rivers which we know, flows with the same volume in summer and winter; it is most westerly Scythian river of all, and the greatest because other rivers are its tributaries. [2] Those that make it great, five flowing through the Scythian country, are these: the river called by Scythians Porata and by Greeks Pyretus,26 and besides this the Tiarantus, the Ararus, the Naparis, and the Ordessus. [3] The first-named of these rivers is a great stream flowing east and uniting its waters with the Ister; the second, the Tiarantus, is more westerly and smaller; the Ararus, Naparis, and Ordessus flow between these two and pour their waters into the Ister.","places":[{"placeId":"226577","name":"Ister","startOffset":4,"endOffset":9},{"placeId":"60677","name":"Scythian","startOffset":122,"endOffset":130},{"placeId":"60677","name":"Scythian country","startOffset":259,"endOffset":275},{"placeId":"991379","name":"Scythians","startOffset":308,"endOffset":317},{"placeId":"216947","name":"Porata","startOffset":318,"endOffset":324},{"placeId":"geonames-390903","name":"Greeks","startOffset":332,"endOffset":338},{"placeId":"216947","name":"Pyretus","startOffset":339,"endOffset":346},{"placeId":"216837","name":"Tiarantus","startOffset":371,"endOffset":380},{"placeId":"216891","name":"Naparis","startOffset":398,"endOffset":405},{"placeId":"226577","name":"Ister","startOffset":524,"endOffset":529},{"placeId":"216837","name":"Tiarantus","startOffset":547,"endOffset":556},{"placeId":"216891","name":"Naparis","startOffset":600,"endOffset":607},{"placeId":"226577","name":"Ister","startOffset":676,"endOffset":681}]},{"id":49,"text":"These are the native-born Scythian rivers that help to swell it; but the Maris river, which commingles with the Ister, flows from the Agathyrsi. The Atlas, Auras, and Tibisis, three other great rivers that pour into it, flow north from the heights of Haemus.27 The Athrys, the Noes, and the Artanes flow into the Ister from the country of the Crobyzi in Thrace; the Cius river, which cuts through the middle of Haemus, from the Paeonians and the mountain range of Rhodope. [2] The Angrus river flows north from Illyria into the Triballic plain and the Brongus river, and the Brongus into the Ister, which receives these two great rivers into itself. The Carpis and another river called Alpis also flow northward, from the country north of the Ombrici, to flow into it; [3] for the Ister traverses the whole of Europe, rising among the Celts, who are the most westerly dwellers in Europe, except for the Cynetes, and flowing thus clean across Europe it issues forth along the borders of Scythia.","places":[{"placeId":"991379","name":"Scythian","startOffset":26,"endOffset":34},{"placeId":"207269","name":"Maris","startOffset":73,"endOffset":78},{"placeId":"226577","name":"Ister","startOffset":112,"endOffset":117},{"placeId":"226511","name":"Agathyrsi","startOffset":134,"endOffset":143},{"placeId":"207496","name":"Tibisis","startOffset":167,"endOffset":174},{"placeId":"216830","name":"Haemus","startOffset":251,"endOffset":257},{"placeId":"216717","name":"Athrys","startOffset":265,"endOffset":271},{"placeId":"221988","name":"Artanes","startOffset":291,"endOffset":298},{"placeId":"226577","name":"Ister","startOffset":313,"endOffset":318},{"placeId":"226574","name":"Crobyzi","startOffset":343,"endOffset":350},{"placeId":"1001889","name":"Thrace","startOffset":354,"endOffset":360},{"placeId":"216908","name":"Cius","startOffset":366,"endOffset":370},{"placeId":"216830","name":"Haemus","startOffset":411,"endOffset":417},{"placeId":"491680","name":"Paeonians","startOffset":428,"endOffset":437},{"placeId":"991370","name":"Rhodope","startOffset":464,"endOffset":471},{"placeId":"481866","name":"Illyria","startOffset":511,"endOffset":518},{"placeId":"207513","name":"Triballic","startOffset":528,"endOffset":537},{"placeId":"207268","name":"Brongus","startOffset":552,"endOffset":559},{"placeId":"207268","name":"Brongus","startOffset":575,"endOffset":582},{"placeId":"226577","name":"Ister","startOffset":592,"endOffset":597},{"placeId":"413360","name":"Ombrici","startOffset":743,"endOffset":750},{"placeId":"226577","name":"Ister","startOffset":781,"endOffset":786},{"placeId":"1273","name":"Scythia","startOffset":986,"endOffset":993}]},{"id":50,"text":"With these rivers aforesaid, and many others, too, as its tributaries, the Ister becomes the greatest river of all, while river for river the Nile surpasses it in volume, since that owes its volume of water to no tributary river or spring. [2] But the Ister is always the same height in summer and winter, the reason for which, I think, is this. In winter it is of its customary size, or only a little greater than is natural to it, for in that country in winter there is very little rain, but snow everywhere. [3] In the summer, the abundant snow that has fallen in winter melts and pours from all sides into the Ister; so this snow-melt pours into the river and helps to swell it and much violent rain besides, as the summer is the season of rain. [4] And in proportion as the sun draws to itself more water in summer than in winter, the water that commingles with the Ister is many times more abundant in summer than it is in winter; these opposites keep the balance true, so that the volume of the river appears always the same.","places":[{"placeId":"226577","name":"Ister","startOffset":75,"endOffset":80},{"placeId":"727172","name":"Nile","startOffset":142,"endOffset":146},{"placeId":"226577","name":"Ister","startOffset":252,"endOffset":257},{"placeId":"226577","name":"Ister","startOffset":614,"endOffset":619},{"placeId":"226577","name":"Ister","startOffset":871,"endOffset":876}]},{"id":51,"text":"One of the rivers of the Scythians, then, is the Ister. The next is the Tyras;28 this comes from the north, flowing at first out of a great lake, which is the boundary between the Scythian and the Neurian countries; at the mouth of the river there is a settlement of Greeks, who are called Tyritae.","places":[{"placeId":"1273","name":"Scythians","startOffset":25,"endOffset":34},{"placeId":"226577","name":"Ister","startOffset":49,"endOffset":54},{"placeId":"226799","name":"Tyras","startOffset":72,"endOffset":77},{"placeId":"1273","name":"Scythian","startOffset":180,"endOffset":188},{"placeId":"588236458","name":"Neurian","startOffset":197,"endOffset":204},{"placeId":"geonames-390903","name":"Greeks","startOffset":267,"endOffset":273}]},{"id":52,"text":"The third river is the Hypanis; this comes from Scythia, flowing out of a great lake, around which wild, white horses graze. This lake is truly called the mother of the Hypanis. [2] Here, then, the Hypanis rises; for five days' journey its waters are shallow and still sweet; after that for four days' journey seaward it is amazingly bitter, [3] for a spring runs into it so bitter that although its volume is small its admixture taints the Hypanis, one of the few great rivers of the world. This spring is on the border between the farming Scythians29 and the Alazones; the name of it and of the place where it rises is in Scythian Exampaeus; in the Greek tongue, Sacred Ways. [4] The Tyras and the Hypanis draw near together in the Alazones' country; after that they flow apart, the intervening space growing wider.","places":[{"placeId":"226630","name":"Hypanis","startOffset":23,"endOffset":30},{"placeId":"991379","name":"Scythia","startOffset":48,"endOffset":55},{"placeId":"226630","name":"Hypanis","startOffset":169,"endOffset":176},{"placeId":"226630","name":"Hypanis","startOffset":198,"endOffset":205},{"placeId":"226630","name":"Hypanis","startOffset":441,"endOffset":448},{"placeId":"1273","name":"Scythians","startOffset":541,"endOffset":550},{"placeId":"226513","name":"Alazones","startOffset":561,"endOffset":569},{"placeId":"1273","name":"Scythian","startOffset":624,"endOffset":632},{"placeId":"229549","name":"Exampaeus","startOffset":633,"endOffset":642},{"placeId":"geonames-390903","name":"Greek","startOffset":651,"endOffset":656},{"placeId":"229549","name":"Sacred Ways","startOffset":665,"endOffset":676},{"placeId":"226799","name":"Tyras","startOffset":686,"endOffset":691},{"placeId":"226630","name":"Hypanis","startOffset":700,"endOffset":707},{"placeId":"226513","name":"Alazones","startOffset":734,"endOffset":742}]},{"id":53,"text":"The fourth is the Borysthenes river. This is the next greatest after the Ister, and the most productive, in our judgment, not only of the Scythian but of all rivers, except the Egyptian Nile, with which no other river can be compared. [2] But of the rest, the Borysthenes is the most productive; it provides the finest and best-nurturing pasture lands for beasts, and the fish in it are beyond all in their excellence and abundance. Its water is most sweet to drink, flowing with a clear current, whereas the other rivers are turbid. There is excellent soil on its banks, and very rich grass where the land is not planted; [3] and self-formed crusts of salt abound at its mouth; it provides great spineless fish, called sturgeons, for salting, and many other wonderful things besides. [4] Its course is from the north, and it is known as far as the Gerrhan land; that is, for forty days' voyage; beyond that, no one can say through what nations it flows; but it is plain that it flows through desolate country to the land of the farming Scythians, who live beside it for a ten days' voyage. [5] This is the only river, besides the Nile, whose source I cannot identify; nor, I think, can any Greek. When the Borysthenes comes near the sea, the Hypanis mingles with it, running into the same marsh; [6] the land between these rivers, where the land projects like a ship's beak, is called Hippolaus' promontory; a temple of Demeter stands there. The settlement of the Borysthenetae is beyond the temple, on the Hypanis.","places":[{"placeId":"226544","name":"Borysthenes river","startOffset":18,"endOffset":35},{"placeId":"226577","name":"Ister","startOffset":73,"endOffset":78},{"placeId":"991379","name":"Scythian","startOffset":138,"endOffset":146},{"placeId":"981503","name":"Egyptian","startOffset":177,"endOffset":185},{"placeId":"727172","name":"Nile","startOffset":186,"endOffset":190},{"placeId":"226544","name":"Borysthenes","startOffset":260,"endOffset":271},{"placeId":"1273","name":"Scythians","startOffset":1037,"endOffset":1046},{"placeId":"727172","name":"Nile","startOffset":1131,"endOffset":1135},{"placeId":"geonames-390903","name":"Greek","startOffset":1191,"endOffset":1196},{"placeId":"226544","name":"Borysthenes","startOffset":1207,"endOffset":1218},{"placeId":"226630","name":"Hypanis","startOffset":1243,"endOffset":1250},{"placeId":"226623","name":"Hippolaus' promontory","startOffset":1386,"endOffset":1407},{"placeId":"226546","name":"Borysthenetae","startOffset":1465,"endOffset":1479},{"placeId":"226630","name":"Hypanis","startOffset":1509,"endOffset":1516}]},{"id":54,"text":"This is the produce of these rivers, and after these there is a fifth river called Panticapas; this also flows from the north out of a lake, and the land between it and the Borysthenes is inhabited by the farming Scythians; it flows into the woodland country, after passing which it mingles with the Borysthenes.","places":[{"placeId":"226712","name":"Panticapas","startOffset":83,"endOffset":93},{"placeId":"226544","name":"Borysthenes","startOffset":173,"endOffset":184},{"placeId":"1273","name":"Scythians","startOffset":213,"endOffset":222},{"placeId":"226628","name":"woodland country","startOffset":242,"endOffset":258},{"placeId":"226544","name":"Borysthenes","startOffset":300,"endOffset":311}]},{"id":55,"text":"The sixth is the Hypacuris river,30 which rises from a lake, and flowing through the midst of the nomadic Scythians flows out near the city of Carcine, bordering on its right the Woodland and the region called the Racecourse of Achilles.","places":[{"placeId":"226653","name":"Hypacuris","startOffset":17,"endOffset":26},{"placeId":"1273","name":"Scythians","startOffset":106,"endOffset":115},{"placeId":"226652","name":"Carcine","startOffset":143,"endOffset":150},{"placeId":"226628","name":"Woodland","startOffset":179,"endOffset":187},{"placeId":"226506","name":"Racecourse of Achilles","startOffset":214,"endOffset":236}]},{"id":56,"text":"The seventh river, the Gerrhus, separates from the Borysthenes at about the place which is the end of our knowledge of that river; at this place it separates, and has the same name as the place itself, Gerrhus; then in its course to the sea it divides the country of the Nomads and the country of the Royal Scythians, and empties into the Hypacuris.","places":[{"placeId":"226603","name":"Gerrhus","startOffset":23,"endOffset":30},{"placeId":"226544","name":"Borysthenes","startOffset":51,"endOffset":62},{"placeId":"226603","name":"Gerrhus","startOffset":202,"endOffset":209},{"placeId":"226531","name":"Royal","startOffset":301,"endOffset":306},{"placeId":"1273","name":"Scythians","startOffset":307,"endOffset":316},{"placeId":"226653","name":"Hypacuris","startOffset":339,"endOffset":348}]},{"id":57,"text":"The eighth is the Tanas river;31 in its upper course, this begins by flowing out of a great lake, and enters a yet greater lake called the Maeetian, which divides the Royal Scythians from the Sauromatae; another river, called Hyrgis,32 is a tributary of this Tanas.","places":[{"placeId":"825398","name":"Tanas river","startOffset":18,"endOffset":30},{"placeId":"825318","name":"Maeetian","startOffset":140,"endOffset":148},{"placeId":"226531","name":"Royal","startOffset":168,"endOffset":173},{"placeId":"1273","name":"Scythians","startOffset":174,"endOffset":183},{"placeId":"825371","name":"Sauromatae","startOffset":193,"endOffset":203},{"placeId":"825398","name":"Tanas","startOffset":260,"endOffset":266}]},{"id":58,"text":"These are the rivers of note with which the Scythians are provided. For rearing cattle, the grass growing in Scythia is the most productive of bile of all pastures which we know; that this is so can be judged by opening up the bodies of the cattle.","places":[{"placeId":"1273","name":"Scythians","startOffset":44,"endOffset":53},{"placeId":"1273","name":"Scythia","startOffset":109,"endOffset":116}]},{"id":59,"text":"The most important things are thus provided them. It remains now to show the customs which are established among them. The only gods whom they propitiate are these: Hestia in particular, and secondly Zeus and Earth, whom they believe to be the wife of Zeus; after these, Apollo, and the Heavenly Aphrodite, and Heracles, and Ares. All the Scythians worship these as gods; the Scythians called Royal sacrifice to Poseidon also. [2] In the Scythian tongue, Hestia is called Tabiti; Zeus (in my judgment most correctly so called) Papaeus;33 Earth is Apia; Apollo Goetosyrus; the Heavenly Aphrodite Argimpasa; Poseidon Thagimasadas. It is their practice to make images and altars and shrines for Ares, but for no other god.","places":[{"placeId":"1273","name":"Scythians","startOffset":339,"endOffset":348},{"placeId":"1273","name":"Scythians","startOffset":376,"endOffset":385},{"placeId":"226531","name":"Royal","startOffset":393,"endOffset":398},{"placeId":"1273","name":"Scythian","startOffset":438,"endOffset":446}]},{"id":60,"text":"In all their sacred rites they follow the same method of sacrifice; this is how it is offered. The victim stands with its forefeet shackled together; the sacrificer stands behind the beast, and throws it down by pulling the end of the rope; [2] as the victim falls, he invokes whatever god it is to whom he sacrifices. Then, throwing a noose around the beast's neck, he thrusts in a stick and twists it and so strangles the victim, lighting no fire nor offering the first-fruits, nor pouring any libation; and having strangled and skinned the beast, he sets about cooking it.","places":[]},{"id":61,"text":"Now as the Scythian land is quite bare of wood, this is how they contrive to cook the meat. When they have skinned the victims, they strip the meat from the bones and throw it into the cauldrons of the country, if they have them: these are most like Lesbian bowls, except that they are much bigger; they throw the meat into these, then, and cook it by lighting a fire beneath with the bones of the victims. But if they have no cauldron, then they put all the meat into the victims' stomachs, adding water, and make a fire of the bones beneath, [2] which burn nicely; the stomachs easily hold the meat when it is stripped from the bones; thus a steer serves to cook itself, and every other victim does likewise. When the flesh is cooked, the sacrificer takes the first-fruits of the flesh and the entrails and casts them before him. They use all grazing animals for sacrifice, but mainly horses.","places":[{"placeId":"991379","name":"Scythian","startOffset":11,"endOffset":19},{"placeId":"550696","name":"Lesbian","startOffset":250,"endOffset":257}]},{"id":62,"text":"This is their way of sacrificing to other gods and these are the beasts offered; but their sacrifices to Ares are of this sort. Every district in each of the governments has a structure sacred to Ares; namely, a pile of bundles of sticks three eighths of a mile wide and long, but of a lesser height, on the top of which there is a flattened four-sided surface; three of its sides are sheer, but the fourth can be ascended. [2] Every year a hundred and fifty wagon-loads of sticks are heaped upon this; for the storms of winter always make it sink down. On this sacred pile an ancient scimitar of iron is set for each people: their image of Ares. They bring yearly sacrifice of sheep and goats and horses to this scimitar, offering to these symbols even more than they do to the other gods. [3] Of enemies that they take alive, they sacrifice one man in every hundred, not as they sacrifice sheep and goats, but differently. They pour wine on the men's heads and cut their throats over a bowl; then they carry the blood up on to the pile of sticks and pour it on the scimitar. [4] They carry the blood up above, but down below by the sacred pile they cut off all the slain men's right arms and hands and throw these into the air, and depart when they have sacrificed the rest of the victims; the arm lies where it has fallen, and the body apart from it.","places":[]},{"id":63,"text":"These then are their established rites of sacrifice; but these Scythians make no offerings of swine; nor are they willing for the most part to rear them in their country.","places":[{"placeId":"1273","name":"Scythians","startOffset":63,"endOffset":72}]},{"id":64,"text":"As to war, these are their customs. A Scythian drinks the blood of the first man whom he has taken down. He carries the heads of all whom he has slain in the battle to his king; for if he brings a head, he receives a share of the booty taken, but not otherwise. [2] He scalps the head by making a cut around it by the ears, then grasping the scalp and shaking the head off. Then he scrapes out the flesh with the rib of a steer, and kneads the skin with his hands, and having made it supple he keeps it for a hand towel, fastening it to the bridle of the horse which he himself rides, and taking pride in it; for he who has most scalps for hand towels is judged the best man. [3] Many Scythians even make garments to wear out of these scalps, sewing them together like coats of skin. Many too take off the skin, nails and all, from their dead enemies' right hands, and make coverings for their quivers;the human skin was, as it turned out, thick and shining, the brightest and whitest skin of all, one might say. [4] Many flay the skin from the whole body, too, and carry it about on horseback stretched on a wooden frame.","places":[{"placeId":"991379","name":"Scythian","startOffset":38,"endOffset":46},{"placeId":"1273","name":"Scythians","startOffset":685,"endOffset":694}]},{"id":65,"text":"The heads themselves, not all of them but those of their bitterest enemies, they treat this way. Each saws off all the part beneath the eyebrows, and cleans the rest. If he is a poor man, then he covers the outside with a piece of raw hide, and so makes use of it; but if he is rich, he covers the head with the raw hide, and gilds the inside of it and uses it for a drinking-cup. [2] Such a cup a man also makes out of the head of his own kinsman with whom he has been feuding, and whom he has defeated in single combat before the king; and if guests whom he honors visit him he will serve them with these heads, and show how the dead were his kinsfolk who fought him and were beaten by him; this they call manly valor.","places":[]},{"id":66,"text":"Furthermore, once a year each governor of a province brews a bowl of wine in his own province, which those Scythians who have slain enemies drink; those who have not achieved this do not taste this wine but sit apart dishonored; and this they consider a very great disgrace; but as many as have slain not one but many enemies have two cups apiece and drink out of both.","places":[{"placeId":"1273","name":"Scythians","startOffset":107,"endOffset":116}]},{"id":67,"text":"There are many diviners among the Scythians, who divine by means of many wi!low wands as I will show. They bring great bundles of wands, which they lay on the ground and unfasten, and utter their divinations as they lay the rods down one by one; and while still speaking, they gather up the rods once more and place them together again; [2] this manner of divination is hereditary among them. The Enarees, who are hermaphrodites, say that Aphrodite gave them the art of divination, which they practise by means of lime-tree bark. They cut this bark into three portions, and prophesy while they braid and unbraid these in their fingers.","places":[{"placeId":"1273","name":"Scythians","startOffset":34,"endOffset":43}]},{"id":68,"text":"Whenever the king of the Scythians falls ill, he sends for the three most reputable diviners, who prophesy in the aforesaid way; and they generally tell him that such and such a man (naming whoever it may be of the people) has sworn falsely by the king's hearth; [2] for when the Scythians will swear their mightiest oath, it is by the king's hearth that they are accustomed to swear. Immediately, the man whom they allege to have sworn falsely is seized and brought in, and when he comes the diviners accuse him, saying that their divination shows him to have sworn falsely by the king's hearth, and that this is the cause of the king's sickness; and the man vehemently denies that he has sworn falsely. [3] When he denies it, the king sends for twice as many diviners: and if they too, consulting their art, prove him guilty of perjury, then he is instantly beheaded, and his goods are divided among the first diviners; [4] but if the later diviners acquit him, then other diviners come, and yet again others. If the greater number of them acquit the man, it is decreed that the first diviners themselves be put to death.","places":[{"placeId":"1273","name":"Scythians","startOffset":25,"endOffset":34},{"placeId":"1273","name":"Scythians","startOffset":280,"endOffset":289}]},{"id":69,"text":"And this is how they die. Men yoke oxen to a wagon laden with sticks and tie the diviners up in these, fettering their legs and binding their hands behind them and gagging them; then they set fire to the sticks and drive the oxen away, stampeding them. [2] Often the oxen are burnt to death with the diviners, and often the yoke-pole of their wagon is burnt through and the oxen escape with a scorching. They burn their diviners for other reasons, too, in the way described, calling them false prophets. [3] When the king puts them to death, he does not leave the sons alive either, but kills all the males of the family; the females he does not harm.","places":[]},{"id":70,"text":"As for giving sworn pledges to those who are to receive them, this is the Scythian way: they take blood from the parties to the agreement by making a little cut in the body with an awl or a knife, and pour it mixed with wine into a big earthenware bowl, into which they then dip a scimitar and arrows and an axe and a javelin; and when this is done those swearing the agreement, and the most honorable of their followers, drink the blood after solemn curses.","places":[{"placeId":"991379","name":"Scythian","startOffset":74,"endOffset":82}]},{"id":71,"text":"The burial-places of the kings are in the land of the Gerrhi, which is the end of the navigation of the Borysthenes. Whenever their king has died, the Scythians dig a great four-cornered pit in the ground there; when this is ready, they take up the dead manhis body enclosed in wax, his belly cut open and cleaned and filled with cut marsh-plants and frankincense, and parsley and anise seed, and sewn up againand transport him on a wagon to another tribe. [2] Then those who receive the dead man on his arrival do the same as do the Royal Scythians: that is, they cut off a part of their ears, shave their heads, make cuts around their arms, tear their foreheads and noses, and pierce their left hands with arrows. [3] From there, the escorts transport the king's body on the wagon to another of the tribes that they rule, and those to whom they have already come follow them; and having carried the dead man to all in turn, they are at the place of burial, in the country of the Gerrhi, the farthest distant tribe of all under their rule. [4] Then, having laid the body on a couch in the tomb, they plant spears on each side of the body and lay wooden planks across them, which they then roof over with braided osiers; in the open space which is left in the tomb they bury one of the king's concubines, his cupbearer, his cook, his groom, his squire, and his messenger, after strangling them, besides horses, and first-fruits of everything else, and golden cups; for the Scythians do not use silver or bronze. [5] Having done this, they all build a great barrow of earth, vying eagerly with one another to make this as great as possible.","places":[{"placeId":"226544","name":"Borysthenes","startOffset":104,"endOffset":115},{"placeId":"1273","name":"Scythians","startOffset":151,"endOffset":160},{"placeId":"226531","name":"Royal","startOffset":536,"endOffset":541},{"placeId":"1273","name":"Scythians","startOffset":542,"endOffset":551},{"placeId":"1273","name":"Scythians","startOffset":1475,"endOffset":1484}]},{"id":72,"text":"After a year has past, they next do as follows. They take the most trusted of the rest of the king's servants (and these are native-born Scythians, for only those whom he tells to do so serve the king, and none of the Scythians have servants bought by money) [2] and strangle fifty of these and fifty of their best horses and empty and clean the bellies of them all, fill them with chaff, and sew them up again. [3] Then they fasten half of a wheel to two posts, the hollow upward, and the other half to another pair of posts, until many posts thus prepared are planted in the ground, and, after driving thick stakes lengthways through the horses' bodies to their necks, they place the horses up on the wheels [4] so that the wheel in front supports the horse's forequarters and the wheel behind takes the weight of the belly by the hindquarters, and the forelegs and hindlegs hang free; and putting bridles and bits in the horses' mouths, they stretch the bridles to the front and fasten them with pegs. [5] Then they take each one of the fifty strangled young men and mount him on the horse; their way of doing it is to drive an upright stake through each body passing up alongside the spine to the neck leaving enough of the stake projecting below to be fixed in a hole made in the other stake, which passes through the horse. So having set horsemen of this fashion around the tomb, they ride away.","places":[{"placeId":"1273","name":"Scythians","startOffset":137,"endOffset":146},{"placeId":"1273","name":"Scythians","startOffset":218,"endOffset":227}]},{"id":73,"text":"This is the way they bury their kings. All other Scythians, when they die, are laid in wagons and carried about among their friends by their nearest of kin; each receives them and entertains the retinue hospitably, setting before the dead man about as much of the fare as he serves to the rest. All but the kings are carried about like this for forty days and then buried. [2] After the burial the Scythians cleanse themselves as follows: they anoint and wash their heads and, for their bodies, set up three poles leaning together to a point and cover these over with wool mats; then, in the space so enclosed to the best of their ability, they make a pit in the center beneath the poles and the mats and throw red-hot stones into it.","places":[{"placeId":"1273","name":"Scythians","startOffset":49,"endOffset":58},{"placeId":"1273","name":"Scythians","startOffset":398,"endOffset":407}]},{"id":74,"text":"They have hemp growing in their country, very like flax, except that the hemp is much thicker and taller. This grows both of itself and also by their cultivation, and the Thracians even make garments of it which are very like linen; no one, unless he were an expert in hemp, could determine whether they were hempen or linen; whoever has never seen hemp before will think the garment linen.","places":[{"placeId":"1001889","name":"Thracians","startOffset":171,"endOffset":180}]},{"id":75,"text":"The Scythians then take the seed of this hemp and, crawling in under the mats, throw it on the red-hot stones, where it smoulders and sends forth such fumes that no Greek vapor-bath could surpass it. [2] The Scythians howl in their joy at the vapor-bath. This serves them instead of bathing, for they never wash their bodies with water. [3] But their women pound cypress and cedar and frankincense wood on a rough stone, adding water also, and with the thick stuff thus pounded they anoint their bodies and faces, as a result of which not only does a fragrant scent come from them, but when on the second day they take off the ointment, their skin becomes clear and shining.","places":[{"placeId":"991379","name":"Scythians","startOffset":4,"endOffset":13},{"placeId":"geonames-390903","name":"Greek","startOffset":165,"endOffset":170},{"placeId":"1273","name":"Scythians","startOffset":208,"endOffset":217}]},{"id":76,"text":"But as regards foreign customs, the Scythians (like others) very much shun practising those of any other country, and particularly of Hellas, as was proved in the case of Anacharsis and also of Scyles. [2] For when Anacharsis was coming back to the Scythian country after having seen much of the world in his travels and given many examples of his wisdom, he sailed through the Hellespont and put in at Cyzicus; [3] where, finding the Cyzicenes celebrating the feast of the Mother of the Gods with great ceremony, he vowed to this same Mother that if he returned to his own country safe and sound he would sacrifice to her as he saw the Cyzicenes doing, and establish a nightly rite of worship. [4] So when he came to Scythia, he hid himself in the country called Woodland (which is beside the Race of Achilles, and is all overgrown with every kind of timber); hidden there, Anacharsis celebrated the goddess' ritual with exactness, carrying a small drum and hanging images about himself. [5] Then some Scythian saw him doing this and told the king, Saulius; who, coming to the place himself and seeing Anacharsis performing these rites, shot an arrow at him and killed him. And now the Scythians, if they are asked about Anacharsis, say they have no knowledge of him; this is because he left his country for Hellas and followed the customs of strangers. [6] But according to what I heard from Tymnes, the deputy for Ariapithes, Anacharsis was an uncle of Idanthyrsus king of Scythia, and he was the son of Gnurus, son of Lycus, son of Spargapithes. Now if Anacharsis was truly of this family, then let him know he was slain by his own brother; for Idanthyrsus was the son of Saulius, and it was Saulius who killed Anacharsis.","places":[{"placeId":"991379","name":"Scythians","startOffset":36,"endOffset":45},{"placeId":"1001896","name":"Hellas","startOffset":134,"endOffset":140},{"placeId":"991379","name":"Scythian country","startOffset":249,"endOffset":265},{"placeId":"501434","name":"Hellespont","startOffset":378,"endOffset":388},{"placeId":"511218","name":"Cyzicus","startOffset":403,"endOffset":410},{"placeId":"511218","name":"Cyzicenes","startOffset":435,"endOffset":444},{"placeId":"511218","name":"Cyzicenes","startOffset":637,"endOffset":646},{"placeId":"1273","name":"Scythia","startOffset":718,"endOffset":725},{"placeId":"226628","name":"Woodland","startOffset":764,"endOffset":772},{"placeId":"226506","name":"Race of Achilles","startOffset":794,"endOffset":810},{"placeId":"1273","name":"Scythian","startOffset":1003,"endOffset":1011},{"placeId":"1273","name":"Scythians","startOffset":1187,"endOffset":1196},{"placeId":"geonames-390903","name":"Hellas","startOffset":1309,"endOffset":1315},{"placeId":"1273","name":"Scythia","startOffset":1476,"endOffset":1483},{"placeId":"825316","name":"Lycus","startOffset":1522,"endOffset":1527}]},{"id":77,"text":"It is true that I have heard another story told by the Peloponnesians; namely, that Anacharsis had been sent by the king of Scythia and had been a student of the ways of Hellas, and after his return told the king who sent him that all Greeks were keen for every kind of learning, except the Lacedaemonians; but that these were the only Greeks who spoke and listened with discretion. [2] But this is a tale pointlessly invented by the Greeks themselves; and be this as it may, the man was put to death as I have said.","places":[{"placeId":"570577","name":"Peloponnesians","startOffset":55,"endOffset":69},{"placeId":"991379","name":"Scythia","startOffset":124,"endOffset":131},{"placeId":"geonames-390903","name":"Hellas","startOffset":170,"endOffset":176},{"placeId":"geonames-390903","name":"Greeks","startOffset":235,"endOffset":241},{"placeId":"570406","name":"Lacedaemonians","startOffset":291,"endOffset":305},{"placeId":"geonames-390903","name":"Greeks","startOffset":336,"endOffset":342},{"placeId":"geonames-390903","name":"Greeks","startOffset":434,"endOffset":440}]},{"id":78,"text":"This, then, was how Anacharsis fared, owing to his foreign ways and consorting with Greeks; and a great many years afterward, Scyles, son of Ariapithes, suffered a like fate. Scyles was one of the sons born to Ariapithes, king of Scythia; but his mother was of Istria,34 and not native-born; and she taught him to speak and read Greek. [2] As time passed, Ariapithes was treacherously killed by Spargapithes, king of the Agathyrsi, and Scyles inherited the kingship and his father's wife, a Scythian woman whose name was Opoea, and she bore Scyles a son, Oricus. [3] So Scyles was king of Scythia; but he was in no way content with the Scythian way of life, and was much more inclined to Greek ways, from the upbringing that he had received. So this is what he would do: he would lead the Scythian army to the city of the Borysthenites (who say that they are Milesians), and when he arrived there would leave his army in the suburb of the city, [4] while he himself, entering within the walls and shutting the gates, would take off his Scythian apparel and put on Greek dress; and in it he would go among the townsfolk unattended by spearmen or any others (who would guard the gates, lest any Scythian see him wearing this apparel), and in every way follow the Greek manner of life, and worship the gods according to Greek usage. [5] When he had spent a month or more like this, he would put on Scythian dress and leave the city. He did this often; and he built a house in Borysthenes, and married a wife of the people of the country and brought her there.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":84,"endOffset":90},{"placeId":"991379","name":"Scythia","startOffset":230,"endOffset":237},{"placeId":"geonames-675471","name":"Istria","startOffset":261,"endOffset":267},{"placeId":"geonames-390903","name":"Greek","startOffset":329,"endOffset":334},{"placeId":"226511","name":"Agathyrsi","startOffset":421,"endOffset":430},{"placeId":"991379","name":"Scythian","startOffset":491,"endOffset":499},{"placeId":"1273","name":"Scythia","startOffset":589,"endOffset":596},{"placeId":"1273","name":"Scythian","startOffset":636,"endOffset":644},{"placeId":"geonames-390903","name":"Greek","startOffset":688,"endOffset":693},{"placeId":"1273","name":"Scythian","startOffset":789,"endOffset":797},{"placeId":"226546","name":"Borysthenites","startOffset":822,"endOffset":835},{"placeId":"599799","name":"Milesians","startOffset":859,"endOffset":868},{"placeId":"1273","name":"Scythian","startOffset":1036,"endOffset":1044},{"placeId":"geonames-390903","name":"Greek","startOffset":1064,"endOffset":1069},{"placeId":"1273","name":"Scythian","startOffset":1193,"endOffset":1201},{"placeId":"geonames-390903","name":"Greek","startOffset":1261,"endOffset":1266},{"placeId":"geonames-390903","name":"Greek","startOffset":1317,"endOffset":1322},{"placeId":"1273","name":"Scythian","startOffset":1395,"endOffset":1403},{"placeId":"226544","name":"Borysthenes","startOffset":1473,"endOffset":1484}]},{"id":79,"text":"But when things had to turn out badly for him, they did so for this reason: he conceived a desire to be initiated into the rites of the Bacchic Dionysus; and when he was about to begin the sacred mysteries, he saw the greatest vision. [2] He had in the city of the Borysthenites a spacious house, grand and costly (the same house I just mentioned), all surrounded by sphinxes and griffins worked in white marble; this house was struck by a thunderbolt. And though the house burnt to the ground, Scyles none the less performed the rite to the end. [3] Now the Scythians reproach the Greeks for this Bacchic revelling, saying that it is not reasonable to set up a god who leads men to madness. [4] So when Scyles had been initiated into the Bacchic rite, some one of the Borysthenites scoffed at the Scythians: You laugh at us, Scythians, because we play the Bacchant and the god possesses us; but now this deity has possessed your own king, so that he plays the Bacchant and is maddened by the god. If you will not believe me, follow me now and I will show him to you. [5] The leading men among the Scythians followed him, and the Borysthenite brought them up secretly onto a tower; from which, when Scyles passed by with his company of worshippers, they saw him playing the Bacchant; thinking it a great misfortune, they left the city and told the whole army what they had seen.","places":[{"placeId":"226546","name":"Borysthenites","startOffset":265,"endOffset":278},{"placeId":"1273","name":"Scythians","startOffset":559,"endOffset":568},{"placeId":"geonames-390903","name":"Greeks","startOffset":582,"endOffset":588},{"placeId":"226546","name":"Borysthenites","startOffset":769,"endOffset":782},{"placeId":"1273","name":"Scythians","startOffset":798,"endOffset":807},{"placeId":"1273","name":"Scythians","startOffset":827,"endOffset":836},{"placeId":"1273","name":"Scythians","startOffset":1100,"endOffset":1109},{"placeId":"226547","name":"Borysthenite","startOffset":1132,"endOffset":1144}]},{"id":80,"text":"After this Scyles rode off to his own place; but the Scythians rebelled against him, setting up his brother Octamasades, son of the daughter of Teres, for their king. [2] Scyles, learning what had happened concerning him and the reason why it had happened, fled into Thrace; and when Octamasades heard this he led his army there. But when he was beside the Ister, the Thracians barred his way; and when the armies were about to engage, Sitalces sent this message to Octamasades: [3] Why should we try each other's strength? You are my sister's son, and you have my brother with you; give him back to me, and I will give up your Scyles to you; and let us not endanger our armies. [4] Such was the offer Sitalces sent to him; for Sitalces' brother had fled from him and was with Octamasades. The Scythian agreed to this, and took his brother Scyles, giving up his own uncle to Sitalces. [5] Sitalces then took his brother and carried him away, but Octamasades beheaded Scyles on the spot. This is how closely the Scythians guard their customs, and these are the penalties they inflict on those who add foreign customs to their own.","places":[{"placeId":"1273","name":"Scythians","startOffset":53,"endOffset":62},{"placeId":"1001889","name":"Thrace","startOffset":267,"endOffset":273},{"placeId":"226577","name":"Ister","startOffset":357,"endOffset":362},{"placeId":"1001889","name":"Thracians","startOffset":368,"endOffset":377},{"placeId":"1273","name":"Scythian","startOffset":796,"endOffset":804},{"placeId":"1273","name":"Scythians","startOffset":1013,"endOffset":1022}]},{"id":81,"text":"How numerous the Scythians are, I was not able to learn exactly, and the accounts that I heard did not tally, some saying that they are very numerous, and some that they are few, so far as they are true Scythians. [2] But this much they let me see for myself: there is a region between the Borysthenes and Hypanis rivers, whose name is Exampaeus; this is the land that I mentioned when I said that there is a spring of salt water in it, whose water makes the Hypanis unfit to drink. [3] In this region is a bronze vessel, as much as six times greater than the cauldron dedicated by Pausanias son of Cleombrotus at the entrance of the Pontus.35 [4] For anyone who has not yet seen the latter, I will make my meaning plain: the Scythian bronze vessel easily contains five thousand four hundred gallons, and it is of six fingers' thickness. This vessel (so the people of the country said) was made out of arrowheads. [5] For their king, whose name was Ariantas, desiring to know the census of the Scythians, commanded every Scythian to bring him the point from an arrow, threatening death to all who did not. [6] So a vast number of arrow-heads was brought, and he decided to make and leave a memorial out of them; and he made of these this bronze vessel, and set it up in this country Exampaeus. This much I heard about the number of the Scythians.","places":[{"placeId":"1273","name":"Scythians","startOffset":17,"endOffset":26},{"placeId":"1273","name":"Scythians","startOffset":203,"endOffset":212},{"placeId":"226544","name":"Borysthenes","startOffset":290,"endOffset":301},{"placeId":"226630","name":"Hypanis river","startOffset":306,"endOffset":319},{"placeId":"229549","name":"Exampaeus","startOffset":336,"endOffset":345},{"placeId":"226630","name":"Hypanis","startOffset":459,"endOffset":466},{"placeId":"1224","name":"Pontus","startOffset":634,"endOffset":640},{"placeId":"1273","name":"Scythian","startOffset":726,"endOffset":734},{"placeId":"1273","name":"Scythians","startOffset":994,"endOffset":1003},{"placeId":"1273","name":"Scythian","startOffset":1021,"endOffset":1029},{"placeId":"229549","name":"Exampaeus","startOffset":1283,"endOffset":1292},{"placeId":"1273","name":"Scythians","startOffset":1336,"endOffset":1345}]},{"id":82,"text":"As for marvels, there are none in the land, except that it has by far the greatest and the most numerous rivers in the world; and over and above the rivers and the great extent of the plains there is one most marvellous thing for me to mention: they show a footprint of Heracles by the Tyras river stamped on rock, like the mark of a man's foot, but forty inches in length. Having described this, I will now return to the story which I began to tell.36","places":[{"placeId":"226799","name":"Tyras river","startOffset":286,"endOffset":297}]},{"id":83,"text":"While Darius was making preparations37 against the Scythians, and sending messengers to direct some to furnish infantry and some to furnish ships, and others again to bridge the Thracian Bosporus, Artabanus, son of Hystaspes and Darius' brother, by no means wanted him to make an expedition against the Scythians, telling him how hard that people were to deal with. [2] But when, for all his good advice, he could not deter the king, Artabanus ceased to advise, and Darius, all his preparations made, led his army from Susa.","places":[{"placeId":"1273","name":"Scythians","startOffset":51,"endOffset":60},{"placeId":"520977","name":"Thracian Bosporus","startOffset":178,"endOffset":195},{"placeId":"1273","name":"Scythians","startOffset":303,"endOffset":312},{"placeId":"912936","name":"Susa","startOffset":519,"endOffset":523}]},{"id":84,"text":"Then the Persian Oeobazus, who had three sons, all with the army, asked Darius that one be left behind. You are my friend, said the king, and your request is reasonable; I will leave all your sons. [2] Oeobazus was very happy, supposing his sons released from service; but Darius told those whose job it was to execute all of Oeobazus' sons. So their throats were cut, and they were left there.","places":[{"placeId":"geonames-130758","name":"Persian","startOffset":9,"endOffset":16}]},{"id":85,"text":"But Darius, when he came to that place in his march from Susa where the Bosporus was bridged in the territory of Calchedon, went aboard ship and sailed to the Dark Rocks38 (as they are called), which the Greeks say formerly moved; there, he sat on a headland and viewed the Pontus, a marvellous sight. [2] For it is the most wonderful sea of all. Its length is eleven thousand one hundred stades, and its breadth three thousand three hundred stades at the place where it is widest.39 [3] The channel at the entrance of this sea is four stades across; the narrow neck of the channel, called Bosporus, across which the bridge was thrown, is about one hundred and twenty stades long. The Bosporus reaches as far as to the Propontis; [4] and the Propontis is five hundred stades wide and one thousand four hundred long; its outlet is the Hellespont, which is no wider than seven stades and four hundred long. The Hellespont empties into a gulf of the sea which we call Aegean.","places":[{"placeId":"912936","name":"Susa","startOffset":57,"endOffset":61},{"placeId":"520977","name":"Bosporus","startOffset":72,"endOffset":80},{"placeId":"520988","name":"Calchedon","startOffset":113,"endOffset":122},{"placeId":"521160","name":"Dark Rocks","startOffset":159,"endOffset":169},{"placeId":"geonames-390903","name":"Greeks","startOffset":204,"endOffset":210},{"placeId":"1224","name":"Pontus","startOffset":274,"endOffset":280},{"placeId":"520977","name":"Bosporus","startOffset":590,"endOffset":598},{"placeId":"520977","name":"Bosporus","startOffset":685,"endOffset":693},{"placeId":"511381","name":"Propontis","startOffset":719,"endOffset":728},{"placeId":"511381","name":"Propontis","startOffset":742,"endOffset":751},{"placeId":"501434","name":"Hellespont","startOffset":834,"endOffset":844},{"placeId":"501434","name":"Hellespont","startOffset":909,"endOffset":919},{"placeId":"560221","name":"Aegean","startOffset":965,"endOffset":971}]},{"id":86,"text":"These measurements have been made in this way: a ship will generally accomplish seventy thousand orguiae 40 in a long day's voyage, and sixty thousand by night. [2] This being granted, seeing that from the Pontus' mouth to the Phasis (which is the greatest length of the sea) it is a voyage of nine days and eight nights, the length of it will be one million one hundred and ten thousand orguiai, which make eleven thousand stades. [3] From the Sindic region to Themiscura on the Thermodon river (the greatest width of the Pontus) it is a voyage of three days and two nights; that is, of three hundred and thirty thousand orguiai, or three thousand three hundred stades. [4] Thus have I measured the Pontus and the Bosporus and Hellespont, and they are as I have said. Furthermore, a lake is seen issuing into the Pontus and not much smaller than the sea itself; it is called the Maeetian lake, and the mother of the Pontus.","places":[{"placeId":"1224","name":"Pontus","startOffset":206,"endOffset":212},{"placeId":"857276","name":"Phasis","startOffset":227,"endOffset":233},{"placeId":"854735","name":"Sindic","startOffset":445,"endOffset":451},{"placeId":"857350","name":"Themiscura","startOffset":462,"endOffset":472},{"placeId":"857352","name":"Thermodon","startOffset":480,"endOffset":489},{"placeId":"1224","name":"Pontus","startOffset":523,"endOffset":529},{"placeId":"1224","name":"Pontus","startOffset":700,"endOffset":706},{"placeId":"520977","name":"Bosporus","startOffset":715,"endOffset":723},{"placeId":"501434","name":"Hellespont","startOffset":728,"endOffset":738},{"placeId":"1224","name":"Pontus","startOffset":814,"endOffset":820},{"placeId":"825318","name":"Maeetian lake","startOffset":880,"endOffset":893},{"placeId":"1224","name":"Pontus","startOffset":917,"endOffset":923}]},{"id":87,"text":"After having viewed the Pontus, Darius sailed back to the bridge, whose architect was Mandrocles of Samos; and when he had viewed the Bosporus also, he set up two pillars of white marble by it, engraving on the one in Assyrian and on the other in Greek characters the names of all the nations that were in his army: all the nations subject to him. The full census of these, over and above the fleet, was seven hundred thousand men, including horsemen, and the number of ships assembled was six hundred. [2] These pillars were afterward carried by the Byzantines into their city and there used to build the altar of Orthosian41 Artemis, except for one column covered with Assyrian writing that was left beside the temple of Dionysus at Byzantium. Now if my reckoning is correct, the place where king Darius bridged the Bosporus was midway between Byzantium and the temple at the entrance of the sea.","places":[{"placeId":"1224","name":"Pontus","startOffset":24,"endOffset":30},{"placeId":"599926","name":"Samos","startOffset":100,"endOffset":105},{"placeId":"520977","name":"Bosporus","startOffset":134,"endOffset":142},{"placeId":"29492","name":"Assyrian","startOffset":218,"endOffset":226},{"placeId":"geonames-390903","name":"Greek","startOffset":247,"endOffset":252},{"placeId":"520985","name":"Byzantines","startOffset":551,"endOffset":561},{"placeId":"599839","name":"Orthosian","startOffset":615,"endOffset":624},{"placeId":"29492","name":"Assyrian","startOffset":671,"endOffset":679},{"placeId":"520985","name":"Byzantium","startOffset":735,"endOffset":744},{"placeId":"520977","name":"Bosporus","startOffset":818,"endOffset":826},{"placeId":"520985","name":"Byzantium","startOffset":846,"endOffset":855}]},{"id":88,"text":"After this, being pleased with his bridge of boats, Darius made a gift of ten of everything42 to Mandrocles the Samian, the architect of it; Mandrocles took the first-fruits of these and had a picture made with them, showing the whole bridge of the Bosporus, and Darius sitting aloft on his throne and his army crossing; he set this up in the temple of Hera, with this inscription: [2] After bridging the Bosporus that teems with fish, Mandrocles dedicated a memorial of the floating bridge to Hera, Having won a crown for himself, and fame for the Samians, Doing the will of King Darius.  This memorialized the builder of the bridge.","places":[{"placeId":"599926","name":"Samian","startOffset":112,"endOffset":118},{"placeId":"520977","name":"Bosporus","startOffset":249,"endOffset":257},{"placeId":"520977","name":"Bosporus","startOffset":407,"endOffset":415},{"placeId":"599926","name":"Samians","startOffset":551,"endOffset":558}]},{"id":89,"text":"Darius, after rewarding Mandrocles, crossed over to Europe; he had told the Ionians to sail into the Pontus as far as the Ister river, and when they got to the Ister, to wait there for him, bridging the river meanwhile; for the fleet was led by Ionians and Aeolians and men of the Hellespont. [2] So the fleet passed between the Dark Rocks and sailed straight for the Ister and, after a two days' voyage up the river from the sea, set about bridging the narrow channel of the river where its various mouths separate. [3] But Darius, passing over the Bosporus on the floating bridge of ships, journeyed through Thrace to the sources of the Tearus river, where he camped for three days.","places":[{"placeId":"550597","name":"Ionians","startOffset":76,"endOffset":83},{"placeId":"1224","name":"Pontus","startOffset":101,"endOffset":107},{"placeId":"226577","name":"Ister","startOffset":122,"endOffset":127},{"placeId":"226577","name":"Ister","startOffset":160,"endOffset":165},{"placeId":"550597","name":"Ionians","startOffset":245,"endOffset":252},{"placeId":"550406","name":"Aeolians","startOffset":257,"endOffset":265},{"placeId":"501434","name":"Hellespont","startOffset":281,"endOffset":291},{"placeId":"521160","name":"Dark Rocks","startOffset":329,"endOffset":339},{"placeId":"226577","name":"Ister","startOffset":368,"endOffset":373},{"placeId":"520977","name":"Bosporus","startOffset":550,"endOffset":558},{"placeId":"1001889","name":"Thrace","startOffset":610,"endOffset":616},{"placeId":"511432","name":"Tearus","startOffset":639,"endOffset":645}]},{"id":90,"text":"The Tearus is said by those living on it to be the best river of all for purposes of healing, especially for healing mange in men and horses. Its springs are thirty-eight in number, some cold and some hot, all flowing from the same rock. [2] There are two roads to the place, one from the town of Heraeum near Perinthus, one from Apollonia on the Euxine sea; each is a two days' journey. This Tearus is a tributary of the Contadesdus river, and that of the Agrianes, and that of the Hebrus, which empties into the sea near the city of Aenus.","places":[{"placeId":"511432","name":"Tearus","startOffset":4,"endOffset":10},{"placeId":"511271","name":"Heraeum","startOffset":297,"endOffset":304},{"placeId":"511357","name":"Perinthus","startOffset":310,"endOffset":319},{"placeId":"511446","name":"Apollonia","startOffset":330,"endOffset":339},{"placeId":"1224","name":"Euxine","startOffset":347,"endOffset":353},{"placeId":"511432","name":"Tearus","startOffset":393,"endOffset":399},{"placeId":"511294","name":"Contadesdus","startOffset":422,"endOffset":433},{"placeId":"511142","name":"Agrianes","startOffset":457,"endOffset":465},{"placeId":"501432","name":"Hebrus","startOffset":483,"endOffset":489},{"placeId":"501337","name":"Aenus","startOffset":535,"endOffset":540}]},{"id":91,"text":"Having come to this river and camped there, then, Darius was pleased with the sight of it, and set up yet another pillar there, cut with this inscription: [2] From the headwaters of the river Tearus flows the best and finest water of all; and to them came, leading an army against the Scythians, the best and finest man of all, Darius son of Hystaspes, king of Persia and all the continent. Such was the inscription.","places":[{"placeId":"511432","name":"Tearus","startOffset":193,"endOffset":199},{"placeId":"1273","name":"Scythians","startOffset":286,"endOffset":295},{"placeId":"geonames-130758","name":"Persia","startOffset":362,"endOffset":368}]},{"id":92,"text":"From there, Darius set out and came to another river called Artescus, which flows through the country of the Odrysae; and having reached this river, he pointed out a spot to the army, and told every man to lay one stone as he passed in this spot that he pointed out. After his army did this, he led it away, leaving behind there great piles of stones.","places":[{"placeId":"216906","name":"Odrysae","startOffset":109,"endOffset":116}]},{"id":93,"text":"But before he came to the Ister, he first took the Getae, who pretend to be immortal. The Thracians of Salmydessus and of the country above the towns of Apollonia and Mesambria, who are called Cyrmianae and Nipsaei, surrendered without a fight to Darius; but the Getae resisted stubbornly, and were enslaved at once, the bravest and most just Thracians of all.","places":[{"placeId":"226577","name":"Ister","startOffset":26,"endOffset":31},{"placeId":"216817","name":"Getae","startOffset":51,"endOffset":56},{"placeId":"1001889","name":"Thracians","startOffset":90,"endOffset":99},{"placeId":"511405","name":"Salmydessus","startOffset":103,"endOffset":114},{"placeId":"511446","name":"Apollonia","startOffset":153,"endOffset":162},{"placeId":"501516","name":"Mesambria","startOffset":167,"endOffset":176},{"placeId":"216817","name":"Getae","startOffset":263,"endOffset":268},{"placeId":"1001889","name":"Thracians","startOffset":343,"endOffset":352}]},{"id":94,"text":"Their belief in their immortality is as follows: they believe that they do not die, but that one who perishes goes to the deity Salmoxis, or Gebelezis, as some of them call him. [2] Once every five years they choose one of their people by lot and send him as a messenger to Salmoxis, with instructions to report their needs; and this is how they send him: three lances are held by designated men; others seize the messenger to Salmoxis by his hands and feet, and swing and toss him up on to the spear-points. [3] If he is killed by the toss, they believe that the god regards them with favor; but if he is not killed, they blame the messenger himself, considering him a bad man, and send another messenger in place of him. It is while the man still lives that they give him the message. [4] Furthermore, when there is thunder and lightning these same Thracians shoot arrows skyward as a threat to the god, believing in no other god but their own.","places":[{"placeId":"1001889","name":"Thracians","startOffset":852,"endOffset":861}]},{"id":95,"text":"I understand from the Greeks who live beside the Hellespont and Pontus, that this Salmoxis was a man who was once a slave in Samos, his master being Pythagoras son of Mnesarchus; [2] then, after being freed and gaining great wealth, he returned to his own country. Now the Thracians were a poor and backward people, but this Salmoxis knew Ionian ways and a more advanced way of life than the Thracian; for he had consorted with Greeks, and moreover with one of the greatest Greek teachers, Pythagoras; [3] therefore he made a hall, where he entertained and fed the leaders among his countrymen, and taught them that neither he nor his guests nor any of their descendants would ever die, but that they would go to a place where they would live forever and have all good things. [4] While he was doing as I have said and teaching this doctrine, he was meanwhile making an underground chamber. When this was finished, he vanished from the sight of the Thracians, and went down into the underground chamber, where he lived for three years, [5] while the Thracians wished him back and mourned him for dead; then in the fourth year he appeared to the Thracians, and thus they came to believe what Salmoxis had told them. Such is the Greek story about him.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":22,"endOffset":28},{"placeId":"501434","name":"Hellespont","startOffset":49,"endOffset":59},{"placeId":"1224","name":"Pontus","startOffset":64,"endOffset":70},{"placeId":"599926","name":"Samos","startOffset":125,"endOffset":130},{"placeId":"1001889","name":"Thracians","startOffset":273,"endOffset":282},{"placeId":"550597","name":"Ionian","startOffset":339,"endOffset":345},{"placeId":"1001889","name":"Thracian","startOffset":392,"endOffset":400},{"placeId":"geonames-390903","name":"Greeks","startOffset":428,"endOffset":434},{"placeId":"geonames-390903","name":"Greek","startOffset":474,"endOffset":479},{"placeId":"1001889","name":"Thracians","startOffset":949,"endOffset":958},{"placeId":"1001889","name":"Thracians","startOffset":1050,"endOffset":1059},{"placeId":"1001889","name":"Thracians","startOffset":1145,"endOffset":1154},{"placeId":"geonames-390903","name":"Greek","startOffset":1227,"endOffset":1232}]},{"id":96,"text":"Now I neither disbelieve nor entirely believe the tale about Salmoxis and his underground chamber; but I think that he lived many years before Pythagoras; [2] and as to whether there was a man called Salmoxis or this is some deity native to the Getae, let the question be dismissed.","places":[{"placeId":"216817","name":"Getae","startOffset":245,"endOffset":250}]},{"id":97,"text":"Such were the ways of the Getae, who were subdued by the Persians and followed their army. When Darius and the land army with him had come to the Ister, and all had crossed, he had the Ionians break the bridge and follow him in his march across the mainland, together with the men of the fleet. [2] So the Ionians were preparing to break the bridge and do Darius' bidding; but Ces son of Erxander, the general of the Mytilenaeans, after first asking if Darius were willing to listen to advice from one who wanted to give it, said, [3] Since, O King, you are about to march against a country where you will not find tilled lands or inhabited cities, let this bridge stay where it is, leaving those who made it to guard it. [4] Thus, if we find the Scythians and do what we want, we have a way of return; and even if we do not find them, at least our way back is safe; for my fear has never been that we shall be overcome by the Scythians in the field, but rather that we may not be able to find them, and so go astray to our harm. [5] Now it may perhaps be said that I say this for my own sake, because I want to remain behind; but it is not so; I only declare publicly the opinion that I think best for you, and I will follow you and do not want to be left here. [6] Darius was very pleased with this advice, and he answered Ces thus: My friend from Lesbos, do not fail to show yourself to me when I return to my house safe, so that I may make you a good return for your good advice.","places":[{"placeId":"216817","name":"Getae","startOffset":26,"endOffset":31},{"placeId":"geonames-130758","name":"Persians","startOffset":57,"endOffset":65},{"placeId":"226577","name":"Ister","startOffset":146,"endOffset":151},{"placeId":"550597","name":"Ionians","startOffset":185,"endOffset":192},{"placeId":"550597","name":"Ionians","startOffset":306,"endOffset":313},{"placeId":"550763","name":"Mytilenaeans","startOffset":418,"endOffset":430},{"placeId":"1273","name":"Scythians","startOffset":749,"endOffset":758},{"placeId":"1273","name":"Scythians","startOffset":929,"endOffset":938},{"placeId":"550696","name":"Lesbos","startOffset":1355,"endOffset":1361}]},{"id":98,"text":"After saying this, he tied sixty knots in a thong, and summoning the Ionian sovereigns to an audience said to them: [2] Gentlemen of Ionia, I take back the decision which I delivered before about the bridge; now, take this thong and do as follows. Begin to reckon from the day when you see me march away against the Scythians, and untie one knot each day: and if the days marked by the knots have all passed and I have not returned, embark for your own homes. [3] But until then, since the plan is changed, guard the bridge, making every effort to keep and watch it. You will please me very much if you do this. Having said this, Darius hastened to march further.","places":[{"placeId":"550597","name":"Ionian","startOffset":69,"endOffset":75},{"placeId":"550597","name":"Ionia","startOffset":134,"endOffset":139},{"placeId":"1273","name":"Scythians","startOffset":317,"endOffset":326}]},{"id":99,"text":"Thrace runs farther out into the sea than Scythia; and Scythia begins where a bay is formed in its coast, and the mouth of the Ister, facing southeast, is in that country. [2] Now I am going to describe the coast of the true Scythia from the Ister, and give its measurements. The ancient Scythian land begins at the Ister and faces south and the south wind, as far as the city called Carcinitis. [3] Beyond this place, the country fronting the same sea is hilly and projects into the Pontus; it is inhabited by the Tauric nation as far as what is called the Rough Peninsula; and this ends in the eastern sea.43 [4] For the sea to the south and the sea to the east are two of the four boundary lines of Scythia, just as seas are boundaries of Attica; and the Tauri inhabit a part of Scythia like Attica, as though some other people, not Attic, were to inhabit the heights of Sunium from Thoricus to the town of Anaphlystus, if Sunium jutted farther out into the sea. [5] I mean, so to speak, to compare small things with great. Such a land is the Tauric country. But those who have not sailed along that part of Attica may understand from this other analogy: it is as though in Calabria some other people, not Calabrian, were to live on the promontory within a line drawn from the harbor of Brundisium to Tarentum. I am speaking of these two countries, but there are many others of a similar kind that Tauris resembles.44","places":[{"placeId":"1001889","name":"Thrace","startOffset":0,"endOffset":6},{"placeId":"991379","name":"Scythia","startOffset":42,"endOffset":49},{"placeId":"991379","name":"Scythia","startOffset":55,"endOffset":62},{"placeId":"226577","name":"Ister","startOffset":127,"endOffset":132},{"placeId":"1273","name":"Scythia","startOffset":225,"endOffset":232},{"placeId":"226577","name":"Ister","startOffset":242,"endOffset":247},{"placeId":"991379","name":"Scythian","startOffset":288,"endOffset":296},{"placeId":"226577","name":"Ister","startOffset":316,"endOffset":321},{"placeId":"226658","name":"Carcinitis","startOffset":384,"endOffset":394},{"placeId":"1224","name":"Pontus","startOffset":484,"endOffset":490},{"placeId":"226778","name":"Tauric","startOffset":515,"endOffset":521},{"placeId":"226793","name":"Rough Peninsula","startOffset":558,"endOffset":573},{"placeId":"1273","name":"Scythia","startOffset":702,"endOffset":709},{"placeId":"579888","name":"Attica","startOffset":742,"endOffset":748},{"placeId":"226778","name":"Tauri","startOffset":758,"endOffset":763},{"placeId":"1273","name":"Scythia","startOffset":782,"endOffset":789},{"placeId":"579888","name":"Attica","startOffset":795,"endOffset":801},{"placeId":"579888","name":"Attic","startOffset":836,"endOffset":841},{"placeId":"580107","name":"Sunium","startOffset":874,"endOffset":880},{"placeId":"580119","name":"Thoricus","startOffset":886,"endOffset":894},{"placeId":"579866","name":"Anaphlystus","startOffset":910,"endOffset":921},{"placeId":"580107","name":"Sunium","startOffset":926,"endOffset":932},{"placeId":"226778","name":"Tauric","startOffset":1046,"endOffset":1052},{"placeId":"579888","name":"Attica","startOffset":1111,"endOffset":1117},{"placeId":"442518","name":"Calabria","startOffset":1177,"endOffset":1185},{"placeId":"442518","name":"Calabrian","startOffset":1209,"endOffset":1218},{"placeId":"442509","name":"Brundisium","startOffset":1290,"endOffset":1300},{"placeId":"442810","name":"Tarentum","startOffset":1304,"endOffset":1312},{"placeId":"226778","name":"Tauris","startOffset":1401,"endOffset":1407}]},{"id":100,"text":"Beyond the Tauric country the Scythians begin, living north of the Tauri and beside the eastern sea, west of the Cimmerian Bosporus and the Maeetian lake, as far as the Tanas river, which empties into the end of that lake. [2] Now it has been seen that on its northern and inland side, running from the Ister, Scythia is bounded first by the Agathyrsi, next by the Neuri, next by the Man-eaters, and last by the Black-cloaks.","places":[{"placeId":"226778","name":"Tauric","startOffset":11,"endOffset":17},{"placeId":"1273","name":"Scythians","startOffset":30,"endOffset":39},{"placeId":"226778","name":"Tauri","startOffset":67,"endOffset":72},{"placeId":"854696","name":"Cimmerian","startOffset":113,"endOffset":122},{"placeId":"520977","name":"Bosporus","startOffset":123,"endOffset":131},{"placeId":"825318","name":"Maeetian lake","startOffset":140,"endOffset":153},{"placeId":"825398","name":"Tanas river","startOffset":169,"endOffset":181},{"placeId":"226577","name":"Ister","startOffset":304,"endOffset":309},{"placeId":"1273","name":"Scythia","startOffset":311,"endOffset":318},{"placeId":"226511","name":"Agathyrsi","startOffset":343,"endOffset":352},{"placeId":"588236458","name":"Neuri","startOffset":366,"endOffset":371},{"placeId":"60677","name":"Man-eaters","startOffset":385,"endOffset":395}]},{"id":101,"text":"Scythia, then, is a four-sided country, two of whose sides are coastline, the frontiers running inland and those that are by the sea making it a perfect square; [2] for it is a ten days' journey from the Ister to the Borysthenes, and the same from the Borysthenes to the Maeetian lake; and it is a twenty days' journey from the sea inland to the country of the Black-cloaks who live north of Scythia. [3] Now, as I reckon a day's journey at two hundred stades, the cross-measurement of Scythia would be a distance of five hundred miles, and the line drawn straight up inland the same. Such then is the extent of this land.","places":[{"placeId":"991379","name":"Scythia","startOffset":0,"endOffset":7},{"placeId":"226577","name":"Ister","startOffset":204,"endOffset":209},{"placeId":"226544","name":"Borysthenes","startOffset":217,"endOffset":228},{"placeId":"226544","name":"Borysthenes","startOffset":252,"endOffset":263},{"placeId":"825318","name":"Maeetian lake","startOffset":271,"endOffset":284},{"placeId":"991379","name":"Scythia","startOffset":392,"endOffset":399},{"placeId":"1273","name":"Scythia","startOffset":486,"endOffset":493}]},{"id":102,"text":"Convinced that they alone were not able to repel Darius' army in open warfare, the Scythians sent messengers to their neighbors, whose kings had already gathered and were deliberating on the presumption that a great army was marching against them. [2] The assembled kings were those of the Tauri, Agathyrsi, Neuri, Maneaters, Black-cloaks, Geloni, Budini, and Sauromatae.","places":[{"placeId":"1273","name":"Scythians","startOffset":83,"endOffset":92},{"placeId":"226778","name":"Tauri","startOffset":290,"endOffset":295},{"placeId":"226511","name":"Agathyrsi","startOffset":297,"endOffset":306},{"placeId":"588236458","name":"Neuri","startOffset":308,"endOffset":313},{"placeId":"60677","name":"Maneaters","startOffset":315,"endOffset":324},{"placeId":"543656","name":"Budini","startOffset":348,"endOffset":354},{"placeId":"825371","name":"Sauromatae","startOffset":360,"endOffset":370}]},{"id":103,"text":"Among these, the Tauri have the following customs: all ship-wrecked men, and any Greeks whom they capture in their sea-raids, they sacrifice to the Virgin goddess45 as I will describe: after the first rites of sacrifice, they strike the victim on the head with a club; [2] according to some, they then place the head on a pole and throw the body off the cliff on which their temple stands; others agree as to the head, but say that the body is buried, not thrown off the cliff. The Tauri themselves say that this deity to whom they sacrifice is Agamemnon's daughter Iphigenia. [3] As for enemies whom they defeat, each cuts his enemy's head off and carries it away to his house, where he places it on a tall pole and stands it high above the dwelling, above the smoke-vent for the most part. These heads, they say, are set up to guard the whole house. The Tauri live by plundering and war.","places":[{"placeId":"226778","name":"Tauri","startOffset":17,"endOffset":22},{"placeId":"geonames-390903","name":"Greeks","startOffset":81,"endOffset":87},{"placeId":"226778","name":"Tauri","startOffset":482,"endOffset":487},{"placeId":"226778","name":"Tauri","startOffset":856,"endOffset":861}]},{"id":104,"text":"The Agathyrsi are the most refined of men and especially given to wearing gold. Their intercourse with women is promiscuous, so that they may be consanguine with one another and, all being relations, not harbor jealousy or animosity toward one another. In the rest of their customs they are like the Thracians.","places":[{"placeId":"226511","name":"Agathyrsi","startOffset":4,"endOffset":13},{"placeId":"1001889","name":"Thracians","startOffset":300,"endOffset":309}]},{"id":105,"text":"The Neuri follow Scythian customs; but one generation before the advent of Darius' army, they happened to be driven from their country by snakes; for their land produced great numbers of these, and still more came down on them out of the desolation on the north, until at last the Neuri were so afflicted that they left their own country and lived among the Budini. It may be that these people are wizards; [2] for the Scythians, and the Greeks settled in Scythia, say that once a year every one of the Neuri becomes a wolf for a few days and changes back again to his former shape. Those who tell this tale do not convince me; but they tell it nonetheless, and swear to its truth.","places":[{"placeId":"588236458","name":"Neuri","startOffset":4,"endOffset":9},{"placeId":"991379","name":"Scythian","startOffset":17,"endOffset":25},{"placeId":"588236458","name":"Neuri","startOffset":281,"endOffset":286},{"placeId":"543656","name":"Budini","startOffset":358,"endOffset":364},{"placeId":"1273","name":"Scythians","startOffset":419,"endOffset":428},{"placeId":"geonames-390903","name":"Greeks","startOffset":438,"endOffset":444},{"placeId":"1273","name":"Scythia","startOffset":456,"endOffset":463},{"placeId":"588236458","name":"Neuri","startOffset":503,"endOffset":508}]},{"id":106,"text":"The Man-eaters are the most savage of all men in their way of life; they know no justice and obey no law. They are nomads, wearing a costume like the Scythian, but speaking a language of their own; of all these, they are the only people that eat men.","places":[{"placeId":"60677","name":"Man-eaters","startOffset":4,"endOffset":14},{"placeId":"991379","name":"Scythian","startOffset":150,"endOffset":158}]},{"id":107,"text":"The Black-cloaks all wear black clothing, from which they get their name; their customs are Scythian.","places":[{"placeId":"991379","name":"Scythian","startOffset":92,"endOffset":100}]},{"id":108,"text":"The Budini are a great and populous nation; the eyes of them all are very bright, and they are ruddy. They have a city built of wood, called Gelonus. The wall of it is three and three quarters miles in length on each side of the city; this wall is high and all of wood; and their houses are wooden, and their temples; [2] for there are temples of Greek gods among them, furnished in Greek style with images and altars and shrines of wood; and they honor Dionysus every two years with festivals and revelry. For the Geloni are by their origin Greeks, who left their trading ports to settle among the Budini; and they speak a language half Greek and half Scythian. But the Budini do not speak the same language as the Geloni, nor is their manner of life the same.","places":[{"placeId":"543656","name":"Budini","startOffset":4,"endOffset":10},{"placeId":"geonames-390903","name":"Greek","startOffset":347,"endOffset":352},{"placeId":"geonames-390903","name":"Greek","startOffset":383,"endOffset":388},{"placeId":"geonames-390903","name":"Greeks","startOffset":542,"endOffset":548},{"placeId":"543656","name":"Budini","startOffset":599,"endOffset":605},{"placeId":"geonames-390903","name":"Greek","startOffset":638,"endOffset":643},{"placeId":"991379","name":"Scythian","startOffset":653,"endOffset":661},{"placeId":"543656","name":"Budini","startOffset":671,"endOffset":677}]},{"id":109,"text":"The Budini are indigenous; they are nomads, and the only people in these parts that eat fir-cones; the Geloni are farmers, eating grain and cultivating gardens; they are altogether unlike the Budini in form and in coloring. Yet the Greeks call the Budini too Geloni; but this is wrong. [2] Their whole country is thickly wooded with every kind of tree; in the depth of the forest there is a great, wide lake and a marsh surrounded by reeds; otter is trapped in it, and beaver, besides certain square-faced creatures whose skins are used to trim mantles, and their testicles are used by the people to heal sicknesses of the womb.","places":[{"placeId":"543656","name":"Budini","startOffset":4,"endOffset":10},{"placeId":"543656","name":"Budini","startOffset":192,"endOffset":198},{"placeId":"geonames-390903","name":"Greeks","startOffset":232,"endOffset":238},{"placeId":"543656","name":"Budini","startOffset":248,"endOffset":254}]},{"id":110,"text":"About the Sauromatae, the story is as follows. When the Greeks were at war with the Amazons (whom the Scythians call Oiorpata, a name signifying in our tongue killers of men, for in Scythian a man is oior and to kill is pata), the story runs that after their victory on the Thermodon they sailed away carrying in three ships as many Amazons as they had been able to take alive; and out at sea the Amazons attacked the crews and killed them. [2] But they knew nothing about ships, or how to use rudder or sail or oar; and with the men dead, they were at the mercy of waves and winds, until they came to the Cliffs by the Maeetian lake; this place is in the country of the free Scythians. The Amazons landed there, and set out on their journey to the inhabited country, and seizing the first troop of horses they met, they mounted them and raided the Scythian lands.","places":[{"placeId":"825371","name":"Sauromatae","startOffset":10,"endOffset":20},{"placeId":"geonames-390903","name":"Greeks","startOffset":56,"endOffset":62},{"placeId":"1273","name":"Scythians","startOffset":102,"endOffset":111},{"placeId":"1273","name":"Scythian","startOffset":182,"endOffset":190},{"placeId":"857352","name":"Thermodon","startOffset":278,"endOffset":287},{"placeId":"825307","name":"Cliffs","startOffset":610,"endOffset":616},{"placeId":"825318","name":"Maeetian lake","startOffset":624,"endOffset":637},{"placeId":"1273","name":"Scythians","startOffset":680,"endOffset":689},{"placeId":"1273","name":"Scythian","startOffset":853,"endOffset":861}]},{"id":111,"text":"The Scythians could not understand the business; for they did not recognize the women's speech or their dress or their nation, but wondered where they had come from, and imagined them to be men all of the same age; and they met the Amazons in battle. The result of the fight was that the Scythians got possession of the dead, and so came to learn that their foes were women. [2] Therefore, after deliberation they resolved by no means to slay them as before, but to send their youngest men to them, of a number corresponding (as they guessed) to the number of the women. They directed these youths to camp near the Amazons and to imitate all that they did; if the women pursued them, not to fight, but to flee; and when the pursuit stopped, to return and camp near them. This was the plan of the Scythians, for they desired that children be born of the women. The young men who were sent did as they were directed.","places":[{"placeId":"1273","name":"Scythians","startOffset":4,"endOffset":13},{"placeId":"1273","name":"Scythians","startOffset":288,"endOffset":297},{"placeId":"1273","name":"Scythians","startOffset":796,"endOffset":805}]},{"id":112,"text":"When the Amazons perceived that the youths meant them no harm, they let them be; but every day the two camps drew nearer to each other. Now the young men, like the Amazons, had nothing but their arms and their horses, and lived as did the women, by hunting and plunder.","places":[]},{"id":113,"text":"At midday the Amazons would scatter and go apart from each other singly or in pairs, roaming apart for greater comfort. The Scythians noticed this and did likewise; and as the women wandered alone, a young man laid hold of one of them, and the woman did not resist but let him do his will; [2] and since they did not understand each other's speech and she could not speak to him, she signed with her hand that he should come the next day to the same place and bring another youth with him (showing by signs that there should be two), and she would bring another woman with her. [3] The youth went away and told his comrades; and the next day he came himself with another to the place, where he found the Amazon and another with her awaiting them. When the rest of the young men learned of this, they had intercourse with the rest of the Amazons.","places":[{"placeId":"1273","name":"Scythians","startOffset":124,"endOffset":133}]},{"id":114,"text":"Presently they joined their camps and lived together, each man having for his wife the woman with whom he had had intercourse at first. Now the men could not learn the women's language, but the women mastered the speech of the men; [2] and when they understood each other, the men said to the Amazons, We have parents and possessions; therefore, let us no longer live as we do, but return to our people and be with them; and we will still have you, and no others, for our wives. To this the women replied: [3] We could not live with your women; for we and they do not have the same customs. We shoot the bow and throw the javelin and ride, but have never learned women's work; and your women do none of the things of which we speak, but stay in their wagons and do women's work, and do not go out hunting or anywhere else. [4] So we could never agree with them. If you want to keep us for wives and to have the name of fair men, go to your parents and let them give you the allotted share of their possessions, and after that let us go and live by ourselves. The young men agreed and did this.","places":[]},{"id":115,"text":"So when they had been given the allotted share of possessions that fell to them, and returned to the Amazons, the women said to them: [2] We are worried and frightened how we are to live in this country after depriving you of your fathers and doing a lot of harm to your land. [3] Since you propose to have us for wives, do this with us: come, let us leave this country and live across the Tanas river.","places":[{"placeId":"825398","name":"Tanas river","startOffset":391,"endOffset":403}]},{"id":116,"text":"To this too the youths agreed; and crossing the Tanas, they went a three days' journey east from the river, and a three days' journey north from lake Maeetis; and when they came to the region in which they now live, they settled there. [2] Ever since then the women of the Sauromatae have followed their ancient ways; they ride out hunting, with their men or without them; they go to war, and dress the same as the men.","places":[{"placeId":"825398","name":"Tanas","startOffset":48,"endOffset":54},{"placeId":"825318","name":"lake Maeetis","startOffset":146,"endOffset":158},{"placeId":"825371","name":"Sauromatae","startOffset":274,"endOffset":284}]},{"id":117,"text":"The language of the Sauromatae is Scythian, but not spoken in its ancient purity, since the Amazons never learned it correctly. In regard to marriage, it is the custom that no maiden weds until she has killed a man of the enemy; and some of them grow old and die unmarried, because they cannot fulfill the law.","places":[{"placeId":"825371","name":"Sauromatae","startOffset":20,"endOffset":30},{"placeId":"991379","name":"Scythian","startOffset":34,"endOffset":42}]},{"id":118,"text":"The kings of the aforesaid nations having gathered, then, the Scythian messengers came and laid everything before them, explaining how the Persian, now that the whole of the other continent was subject to him, had crossed over to their continent by a bridge thrown across the neck of the Bosporus, and how having crossed it and subjugated the Thracians he was now bridging the Ister, so as to make that whole region subject to him like the others. [2] By no means stand aside and let us be destroyed, they said; rather, let us unite and oppose this invader. If you will not, then we shall either be driven out of our country or stay and make terms. [3] For what is to become of us if you will not help us? And afterward it will not be easy for you, either; for the Persian has come to attack you no less than us, and when he has subjugated us he will not be content to leave you alone. [4] We will give you a convincing proof of what we say: if indeed the Persian were marching against us alone, wanting vengeance for our former enslavement of his country, he ought to leave others alone and make straight for us, and would show everyone that Scythia and no other country was his goal. [5] But as it is, from the day he crossed over to this continent, he has been taming all that come in his way, and he holds in subjection not only the rest of Thrace, but also our neighbors the Getae.","places":[{"placeId":"991379","name":"Scythian","startOffset":62,"endOffset":70},{"placeId":"geonames-130758","name":"Persian","startOffset":139,"endOffset":146},{"placeId":"520977","name":"Bosporus","startOffset":288,"endOffset":296},{"placeId":"1001889","name":"Thracians","startOffset":343,"endOffset":352},{"placeId":"226577","name":"Ister","startOffset":377,"endOffset":382},{"placeId":"geonames-130758","name":"Persian","startOffset":768,"endOffset":775},{"placeId":"geonames-130758","name":"Persian","startOffset":959,"endOffset":966},{"placeId":"1273","name":"Scythia","startOffset":1146,"endOffset":1153},{"placeId":"1001889","name":"Thrace","startOffset":1348,"endOffset":1354},{"placeId":"216817","name":"Getae","startOffset":1383,"endOffset":1388}]},{"id":119,"text":"After the Scythians had made this speech, the kings who had come from the nations deliberated, and their opinions were divided. The kings of the Geloni and the Budini and the Sauromatae were of one mind and promised to help the Scythians; but the kings of the Agathyrsi and Neuri and Maneaters and Black-cloaks and Tauri gave this answer to the messengers: [2] Had it not been you who wronged the Persians first and began the war, what you now ask would seem to us right, and we would listen and act together with you. [3] But as it is, you invaded their land without us and ruled the Persians for as long as god granted; and the Persians, urged on by the same god, are only repaying you in kind. [4] But we did these men no wrong at that former time, nor do we intend now to wrong them first; but if the Persian comes against our land too and begins the wrong-doing, then we will not accept it, either; but until we see that, we shall keep to ourselves. For in our judgment the Persians have not come for us but for those who were the agents of wrong.","places":[{"placeId":"1273","name":"Scythians","startOffset":10,"endOffset":19},{"placeId":"543656","name":"Budini","startOffset":160,"endOffset":166},{"placeId":"825371","name":"Sauromatae","startOffset":175,"endOffset":185},{"placeId":"1273","name":"Scythians","startOffset":228,"endOffset":237},{"placeId":"226511","name":"Agathyrsi","startOffset":260,"endOffset":269},{"placeId":"588236458","name":"Neuri","startOffset":274,"endOffset":279},{"placeId":"60677","name":"Maneaters","startOffset":284,"endOffset":293},{"placeId":"226778","name":"Tauri","startOffset":315,"endOffset":320},{"placeId":"geonames-130758","name":"Persians","startOffset":398,"endOffset":406},{"placeId":"geonames-130758","name":"Persians","startOffset":586,"endOffset":594},{"placeId":"geonames-130758","name":"Persians","startOffset":631,"endOffset":639},{"placeId":"geonames-130758","name":"Persian","startOffset":806,"endOffset":813},{"placeId":"geonames-130758","name":"Persians","startOffset":980,"endOffset":988}]},{"id":120,"text":"When this answer was brought back to the Scythians, they determined not to meet their enemy in the open field, since they could not get the allies that they sought, but rather to fall back driving off their herds, choking the wells and springs on their way and destroying the grass from the earth; and they divided themselves into two companies. [2] It was their decision that to one of their divisions, which Scopasis ruled, the Sauromatae be added; if the Persian marched that way, this group was to retire before him and fall back toward the Tanas river, by the Maeetian lake, and if the Persian turned to go back, then they were to pursue and attack him. This was one of the divisions of the royal people, and it was appointed to follow this course; [3] their two other divisions, namely, the greater whose ruler was Idanthyrsus, and the third whose king was Taxakis, were to unite, and taking with them also the Geloni and Budini, to draw off like the others at the Persian approach, always keeping one day's march ahead of the enemy, avoiding a confrontation and doing what had been determined. [4] First, then, they were to retreat in a straight line toward the countries which refused their alliance, so as to involve these, too, in the war; for if they did not of their own accord support the war against the Persians, they must be involved against their will; and after that, the division was to turn back to its own country, and attack the enemy, if in deliberation they thought this best.","places":[{"placeId":"1273","name":"Scythians","startOffset":41,"endOffset":50},{"placeId":"825371","name":"Sauromatae","startOffset":430,"endOffset":440},{"placeId":"geonames-130758","name":"Persian","startOffset":458,"endOffset":465},{"placeId":"825398","name":"Tanas river","startOffset":545,"endOffset":557},{"placeId":"825318","name":"Maeetian lake","startOffset":566,"endOffset":579},{"placeId":"geonames-130758","name":"Persian","startOffset":592,"endOffset":599},{"placeId":"543656","name":"Budini","startOffset":929,"endOffset":935},{"placeId":"geonames-130758","name":"Persian","startOffset":972,"endOffset":979},{"placeId":"geonames-130758","name":"Persians","startOffset":1319,"endOffset":1327}]},{"id":121,"text":"Determined on this plan, the Scythians sent an advance guard of their best horsemen to meet Darius' army. As for the wagons in which their children and wives lived, all these they sent forward, with instructions to drive always northward; and they sent all their flocks with the wagons, keeping none back except what was required for their food.","places":[{"placeId":"1273","name":"Scythians","startOffset":29,"endOffset":38}]},{"id":122,"text":"After this convoy was first sent on its way, the advance guard of the Scythians found the Persians about a three days' march distant from the Ister; and having found them they camped a day's march ahead of the enemy and set about scorching the earth of all living things. [2] When the Persians saw the Scythian cavalry appear, they marched on its track, the horsemen always withdrawing before them; and then, making for the one Scythian division, the Persians held on in pursuit toward the east and the Tanas river; [3] when the horsemen crossed this, the Persians crossed also, and pursued until they had marched through the land of the Sauromatae to the land of the Budini.","places":[{"placeId":"1273","name":"Scythians","startOffset":70,"endOffset":79},{"placeId":"geonames-130758","name":"Persians","startOffset":90,"endOffset":98},{"placeId":"226577","name":"Ister","startOffset":142,"endOffset":147},{"placeId":"geonames-130758","name":"Persians","startOffset":285,"endOffset":293},{"placeId":"1273","name":"Scythian","startOffset":302,"endOffset":310},{"placeId":"1273","name":"Scythian","startOffset":428,"endOffset":436},{"placeId":"geonames-130758","name":"Persians","startOffset":451,"endOffset":459},{"placeId":"825398","name":"Tanas river","startOffset":503,"endOffset":515},{"placeId":"geonames-130758","name":"Persians","startOffset":557,"endOffset":565},{"placeId":"825371","name":"Sauromatae","startOffset":639,"endOffset":649},{"placeId":"543656","name":"Budini","startOffset":669,"endOffset":675}]},{"id":123,"text":"As long as the Persians were traversing the Scythian and Sauromatic territory there was nothing for them to harm, as the land was dry and barren. But when they entered the country of the Budini, they found themselves before the wooden-walled town; the Budini had abandoned it and left nothing in it, and the Persians burnt the town. [2] Then going forward still on the horsemen's track, they passed through this country into desolation, which is inhabited by no one; it lies to the north of the Budini and its breadth is a seven days' march. [3] Beyond this desolation live the Thyssagetae; four great rivers flow from their country through the land of the Maeetians, and issue into the lake called the Maeetian; their names are Lycus, Oarus, Tanas, Syrgis.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":15,"endOffset":23},{"placeId":"991379","name":"Scythian","startOffset":44,"endOffset":52},{"placeId":"543656","name":"Budini","startOffset":187,"endOffset":193},{"placeId":"543656","name":"Budini","startOffset":252,"endOffset":258},{"placeId":"geonames-130758","name":"Persians","startOffset":308,"endOffset":316},{"placeId":"543656","name":"Budini","startOffset":495,"endOffset":501},{"placeId":"828323","name":"Thyssagetae","startOffset":578,"endOffset":589},{"placeId":"825318","name":"Maeetians","startOffset":657,"endOffset":666},{"placeId":"825318","name":"Maeetian","startOffset":703,"endOffset":711},{"placeId":"825316","name":"Lycus","startOffset":729,"endOffset":734},{"placeId":"825398","name":"Tanas","startOffset":743,"endOffset":749}]},{"id":124,"text":"When Darius came into the desolate country, he halted in his pursuit and camped on the Oarus river, where he built eight great forts, the ruins of which were standing even in my lifetime, all at an equal distance of about seven miles from one another. [2] While he was occupied with these, the Scythians whom he was pursuing doubled north and turned back into Scythia. Then, when they had altogether vanished and were no longer within the Persians' sight, Darius left those forts only half finished, and he too doubled about and marched west, thinking that those Scythians were the whole army, and that they were fleeing toward the west.","places":[{"placeId":"1273","name":"Scythians","startOffset":294,"endOffset":303},{"placeId":"1273","name":"Scythia","startOffset":360,"endOffset":367},{"placeId":"geonames-130758","name":"Persians","startOffset":439,"endOffset":447},{"placeId":"1273","name":"Scythians","startOffset":563,"endOffset":572}]},{"id":125,"text":"But when he came by forced marches into Scythia, he met the two divisions of the Scythians, and pursued them, who always kept a day's march away from him; [2] and because Darius would not stop pursuing them, the Scythians, according to the plan they had made, fell back before him to the countries of those who had refused their alliance, to the land of the Black-cloaks first. [3] The Scythians and Persians burst into their land, agitating them; and from there, the Scythians led the Persians into the country of the Man-eaters, agitating them too; from there, they drew off into the country of the Neuri and, agitating them also, fled to the Agathyrsi. [4] But the Agathyrsi, seeing their neighbors fleeing panic-stricken at the Scythians' approach, before the Scythians could break into their land sent a herald to forbid them to set foot across their borders, warning the Scythians that if they tried to break through they would have to fight with the Agathyrsi first. [5] With this warning, the Agathyrsi mustered on their borders, intending to stop the invaders. When the Persians and the Scythians broke into their lands, the Blackcloaks and Man-eaters and Neuri put up no resistance, but forgot their threats and fled panic-stricken north into the desolate country. [6] But warned off by the Agathyrsi, the Scythians made no second attempt on that country, but led the Persians from the lands of the Neuri into Scythia.","places":[{"placeId":"991379","name":"Scythia","startOffset":40,"endOffset":47},{"placeId":"1273","name":"Scythians","startOffset":81,"endOffset":90},{"placeId":"1273","name":"Scythians","startOffset":212,"endOffset":221},{"placeId":"1273","name":"Scythians","startOffset":386,"endOffset":395},{"placeId":"geonames-130758","name":"Persians","startOffset":400,"endOffset":408},{"placeId":"1273","name":"Scythians","startOffset":468,"endOffset":477},{"placeId":"geonames-130758","name":"Persians","startOffset":486,"endOffset":494},{"placeId":"60677","name":"Man-eaters","startOffset":519,"endOffset":529},{"placeId":"588236458","name":"Neuri","startOffset":601,"endOffset":606},{"placeId":"226511","name":"Agathyrsi","startOffset":645,"endOffset":654},{"placeId":"226511","name":"Agathyrsi","startOffset":668,"endOffset":677},{"placeId":"1273","name":"Scythians","startOffset":732,"endOffset":741},{"placeId":"1273","name":"Scythians","startOffset":764,"endOffset":773},{"placeId":"1273","name":"Scythians","startOffset":877,"endOffset":886},{"placeId":"226511","name":"Agathyrsi","startOffset":957,"endOffset":966},{"placeId":"226511","name":"Agathyrsi","startOffset":1001,"endOffset":1010},{"placeId":"geonames-130758","name":"Persians","startOffset":1079,"endOffset":1087},{"placeId":"1273","name":"Scythians","startOffset":1096,"endOffset":1105},{"placeId":"60677","name":"Man-eaters","startOffset":1150,"endOffset":1160},{"placeId":"588236458","name":"Neuri","startOffset":1165,"endOffset":1170},{"placeId":"226511","name":"Agathyrsi","startOffset":1301,"endOffset":1310},{"placeId":"1273","name":"Scythians","startOffset":1316,"endOffset":1325},{"placeId":"geonames-130758","name":"Persians","startOffset":1378,"endOffset":1386},{"placeId":"588236458","name":"Neuri","startOffset":1409,"endOffset":1414},{"placeId":"1273","name":"Scythia","startOffset":1420,"endOffset":1427}]},{"id":126,"text":"As this went on for a long time and did not stop, Darius sent a horseman to Idanthyrsus the Scythian king, with this message: You crazy man, why do you always run, when you can do otherwise? If you believe yourself strong enough to withstand my power, stand and fight and stop running; but if you know you are the weaker, then stop running like this and come to terms with your master, bringing gifts of earth and water.","places":[{"placeId":"991379","name":"Scythian","startOffset":92,"endOffset":100}]},{"id":127,"text":"Idanthyrsus the Scythian king replied: It is like this with me, Persian: I never ran from any man before out of fear, and I am not running from you now; I am not doing any differently now than I am used to doing in time of peace, too. [2] As to why I do not fight with you at once, I will tell you why. We Scythians have no towns or cultivated land, out of fear for which, that the one might be taken or the other wasted, we would engage you sooner in battle. But if all you want is to come to that quickly, we have the graves of our fathers. [3] Come on, find these and try to destroy them: you shall know then whether we will fight you for the graves or whether we will not fight. Until then, unless we have reason, we will not engage with you. [4] As to fighting, enough; as to masters, I acknowledge Zeus my forefather and Hestia queen of the Scythians only. As for you, instead of gifts of earth and water I shall send such as ought to come to you; and for your boast that you are my master, I say Weep! Such is the proverbial Scythian speech.","places":[{"placeId":"991379","name":"Scythian","startOffset":16,"endOffset":24},{"placeId":"geonames-130758","name":"Persian","startOffset":65,"endOffset":72},{"placeId":"1273","name":"Scythians","startOffset":307,"endOffset":316},{"placeId":"1273","name":"Scythians","startOffset":848,"endOffset":857},{"placeId":"1273","name":"Scythian","startOffset":1037,"endOffset":1045}]},{"id":128,"text":"So the herald went to carry this message to Darius; but the Scythian kings were filled with anger when they heard the word slavery. [2] They then sent the division of the Scythians to which the Sauromatae were attached, and which was led by Scopasis, to speak with those Ionians guarding the bridge over the Ister; as for those of the Scythians who remained behind, it was decided that they should no longer decoy the Persians, but attack them whenever they were foraging for provision. So they watched for the time when Darius' men were foraging, and did as they had planned. [3] The Scythian horse always routed the Persian horse, and when the Persian cavalry would fall back in flight on their infantry, the infantry would come up to their aid; and the Scythians, once they had driven in the horse, turned back for fear of the infantry. The Scythians attacked in this fashion by night as well as by day.","places":[{"placeId":"991379","name":"Scythian","startOffset":60,"endOffset":68},{"placeId":"1273","name":"Scythians","startOffset":173,"endOffset":182},{"placeId":"825371","name":"Sauromatae","startOffset":196,"endOffset":206},{"placeId":"550597","name":"Ionians","startOffset":273,"endOffset":280},{"placeId":"226577","name":"Ister","startOffset":310,"endOffset":315},{"placeId":"1273","name":"Scythians","startOffset":337,"endOffset":346},{"placeId":"geonames-130758","name":"Persians","startOffset":420,"endOffset":428},{"placeId":"1273","name":"Scythian","startOffset":587,"endOffset":595},{"placeId":"geonames-130758","name":"Persian","startOffset":620,"endOffset":627},{"placeId":"geonames-130758","name":"Persian","startOffset":648,"endOffset":655},{"placeId":"1273","name":"Scythians","startOffset":758,"endOffset":767},{"placeId":"1273","name":"Scythians","startOffset":846,"endOffset":855}]},{"id":129,"text":"Very strange to say, what aided the Persians and thwarted the Scythians in their attacks on Darius' army was the braying of the asses and the appearance of the mules. [2] For, as I have before indicated, Scythia produces no asses or mules; and there is not in most of Scythia an ass or a mule, because of the cold. Therefore the asses frightened the Scythian horses when they brayed loudly; [3] and often, when they were in the act of charging the Persians, the horses would shy in fear if they heard the asses bray or would stand still with ears erect, never having heard a noise like it or seen a like creature.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":36,"endOffset":44},{"placeId":"1273","name":"Scythians","startOffset":62,"endOffset":71},{"placeId":"1273","name":"Scythia","startOffset":204,"endOffset":211},{"placeId":"1273","name":"Scythia","startOffset":268,"endOffset":275},{"placeId":"1273","name":"Scythian","startOffset":350,"endOffset":358},{"placeId":"geonames-130758","name":"Persians","startOffset":448,"endOffset":456}]},{"id":130,"text":"The Persians thus gained very little in the war, for when the Scythians saw that the Persians were shaken, they formed a plan to have them remain longer in Scythia and, remaining, be distressed by lack of necessities: they would leave some of their flocks behind with the shepherds, moving away themselves to another place; and the Persians would come and take the sheep, and be encouraged by this achievement.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":4,"endOffset":12},{"placeId":"1273","name":"Scythians","startOffset":62,"endOffset":71},{"placeId":"geonames-130758","name":"Persians","startOffset":85,"endOffset":93},{"placeId":"1273","name":"Scythia","startOffset":156,"endOffset":163},{"placeId":"geonames-130758","name":"Persians","startOffset":332,"endOffset":340}]},{"id":131,"text":"After such a thing had happened several times, Darius was finally at a loss; and when they perceived this, the Scythian kings sent a herald to Darius with the gift of a bird, a mouse, a frog, and five arrows. [2] The Persians asked the bearer of these gifts what they meant; but he said that he had only been told to give the gifts and then leave at once; he told the Persians to figure out what the presents meant themselves, if they were smart enough.","places":[{"placeId":"991379","name":"Scythian","startOffset":111,"endOffset":119},{"placeId":"geonames-130758","name":"Persians","startOffset":217,"endOffset":225},{"placeId":"geonames-130758","name":"Persians","startOffset":368,"endOffset":376}]},{"id":132,"text":"When they heard this, the Persians deliberated. Darius' judgment was that the Scythians were surrendering themselves and their earth and their water to him; for he reasoned that a mouse is a creature found in the earth and eating the same produce as men, and a frog is a creature of the water and a bird particularly like a horse; and the arrows signified that the Scythians surrendered their fighting power. [2] This was the opinion declared by Darius; but the opinion of Gobryas, one of the seven who had slain the Magus, was contrary to it. He reasoned that the meaning of the gifts was, [3] Unless you become birds, Persians, and fly up into the sky, or mice and hide in the earth, or frogs and leap into the lakes, you will be shot by these arrows and never return home.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":26,"endOffset":34},{"placeId":"1273","name":"Scythians","startOffset":78,"endOffset":87},{"placeId":"1273","name":"Scythians","startOffset":365,"endOffset":374},{"placeId":"geonames-130758","name":"Persians","startOffset":621,"endOffset":629}]},{"id":133,"text":"The Persians reasoned thus about the gifts. But when the first division of the Scythians came to the bridgethe division that had first been appointed to stand on guard by the Maeetian lake and had now been sent to the Ister to speak with the Ioniansthey said, [2] Ionians, we have come to bring you freedom, if you will only listen to us. We understand that Darius has directed you to guard the bridge for sixty days only, and if he does not come within that time, then to go away to your homes. [3] Now then, do what will leave you guiltless in his eyes as in ours: stay here for the time appointed; and after that, leave. So the Ionians promised to do this, and the Scythians made their way back with all haste.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":4,"endOffset":12},{"placeId":"1273","name":"Scythians","startOffset":79,"endOffset":88},{"placeId":"825318","name":"Maeetian lake","startOffset":176,"endOffset":189},{"placeId":"226577","name":"Ister","startOffset":219,"endOffset":224},{"placeId":"550597","name":"Ionians","startOffset":243,"endOffset":250},{"placeId":"550597","name":"Ionians","startOffset":267,"endOffset":274},{"placeId":"550597","name":"Ionians","startOffset":635,"endOffset":642},{"placeId":"1273","name":"Scythians","startOffset":672,"endOffset":681}]},{"id":134,"text":"But after sending the gifts to Darius, the Scythians who had remained there came out with foot and horse and offered battle to the Persians. But when the Scythian ranks were set in order, a rabbit ran out between the armies; and every Scythian that saw it gave chase. So there was confusion and shouting among the Scythians; Darius asked about the clamor among the enemy; and when he heard that they were chasing a rabbit, he said to those with whom he was accustomed to speak, [2] These men hold us in deep contempt; and I think now that Gobryas' opinion of the Scythian gifts was true. Since, then, my own judgment agrees with his, we need to consider carefully how we shall return safely. To this Gobryas said : O King, I understood almost by reason alone how difficult it would be to deal with these Scythians; but when I came here, I understood even better, watching them toying with us. [3] Now then, my advice is that at nightfall we kindle our campfires in the usual way, deceive those in our army who are least fit to endure hardship, and tether all our asses here, and ourselves depart, before the Scythians can march straight to the Ister to break up the bridge, or the Ionians take some action by which we may well be ruined.","places":[{"placeId":"1273","name":"Scythians","startOffset":43,"endOffset":52},{"placeId":"geonames-130758","name":"Persians","startOffset":131,"endOffset":139},{"placeId":"1273","name":"Scythian","startOffset":154,"endOffset":162},{"placeId":"1273","name":"Scythian","startOffset":235,"endOffset":243},{"placeId":"1273","name":"Scythians","startOffset":314,"endOffset":323},{"placeId":"1273","name":"Scythian","startOffset":564,"endOffset":572},{"placeId":"1273","name":"Scythians","startOffset":807,"endOffset":816},{"placeId":"1273","name":"Scythians","startOffset":1111,"endOffset":1120},{"placeId":"226577","name":"Ister","startOffset":1147,"endOffset":1152},{"placeId":"550597","name":"Ionians","startOffset":1184,"endOffset":1191}]},{"id":135,"text":"This was Gobryas' advice, and at nightfall Darius followed it. He left the men who were worn out, and those whose loss mattered least to him, there in the camp, and all the asses, too, tethered. [2] His reasons for leaving the asses, and the infirm among his soldiers, were the following: the asses, so that they would bray; the men, who were left because of their infirmity, he pretended were to guard the camp while he attacked the Scythians with the fit part of his army. [3] Giving this order to those who were left behind, and lighting campfires, Darius made all haste to reach the Ister. When the asses found themselves deserted by the multitude, they brayed the louder for it; and the Scythians heard them and assumed that the Persians were in the place.","places":[{"placeId":"1273","name":"Scythians","startOffset":434,"endOffset":443},{"placeId":"226577","name":"Ister","startOffset":587,"endOffset":592},{"placeId":"1273","name":"Scythians","startOffset":692,"endOffset":701},{"placeId":"geonames-130758","name":"Persians","startOffset":734,"endOffset":742}]},{"id":136,"text":"But when it was day, the men left behind perceived that Darius had betrayed them, and they held out their hands to the Scythians and explained the circumstances; they, when they heard this, assembled their power in haste, the two divisions of their horde and the one division that was with the Sauromatae and Budini and Geloni, and made straight for the Ister in pursuit of the Persians. [2] And as the Persian army was for the most part infantry and did not know the roads (which were not marked), while the Scythians were horsemen and knew the short cuts, they went wide of each other, and the Scythians reached the bridge long before the Persians. [3] There, perceiving that the Persians had not yet come, they said to the Ionians, who were in their ships, Ionians, the days have exceeded the number, and you are wrong to be here still. [4] Since it was fear that kept you here, now break the bridge in haste and go, free and happy men, thanking the gods and the Scythians. The one that was your master we shall impress in such a way that he will never lead an army against anyone again.","places":[{"placeId":"1273","name":"Scythians","startOffset":119,"endOffset":128},{"placeId":"825371","name":"Sauromatae","startOffset":294,"endOffset":304},{"placeId":"543656","name":"Budini","startOffset":309,"endOffset":315},{"placeId":"226577","name":"Ister","startOffset":354,"endOffset":359},{"placeId":"geonames-130758","name":"Persians","startOffset":378,"endOffset":386},{"placeId":"geonames-130758","name":"Persian","startOffset":403,"endOffset":410},{"placeId":"1273","name":"Scythians","startOffset":509,"endOffset":518},{"placeId":"1273","name":"Scythians","startOffset":596,"endOffset":605},{"placeId":"geonames-130758","name":"Persians","startOffset":641,"endOffset":649},{"placeId":"geonames-130758","name":"Persians","startOffset":682,"endOffset":690},{"placeId":"550597","name":"Ionians","startOffset":726,"endOffset":733},{"placeId":"550597","name":"Ionians","startOffset":761,"endOffset":768},{"placeId":"1273","name":"Scythians","startOffset":967,"endOffset":976}]},{"id":137,"text":"Then the Ionians held a council. Miltiades the Athenian, general and sovereign of the Chersonesites of the Hellespont, advised that they do as the Scythians said and set Ionia free. [2] But Histiaeus of Miletus advised the opposite. He said, It is owing to Darius that each of us is sovereign of his city; if Darius' power is overthrown, we shall no longer be able to rule, I in Miletus or any of you elsewhere; for all the cities will choose democracy rather than despotism. [3] When Histiaeus explained this, all of them at once inclined to his view, although they had first sided with Miltiades.","places":[{"placeId":"550597","name":"Ionians","startOffset":9,"endOffset":16},{"placeId":"579885","name":"Athenian","startOffset":47,"endOffset":55},{"placeId":"501386","name":"Chersonesites","startOffset":86,"endOffset":99},{"placeId":"501434","name":"Hellespont","startOffset":107,"endOffset":117},{"placeId":"1273","name":"Scythians","startOffset":147,"endOffset":156},{"placeId":"550597","name":"Ionia","startOffset":170,"endOffset":175},{"placeId":"599799","name":"Miletus","startOffset":203,"endOffset":210},{"placeId":"599799","name":"Miletus","startOffset":380,"endOffset":387}]},{"id":138,"text":"Those high in Darius' favor who gave their vote were Daphnis of Abydos, Hippoclus of Lampsacus, Herophantus of Parium, Metrodorus of Proconnesus, Aristagoras of Cyzicus, Ariston of Byzantium, [2] all from the Hellespont and sovereigns of cities there; and from Ionia, Strattis of Chios, Aiaces of Samos, Laodamas of Phocaea, and Histiaeus of Miletus who opposed the plan of Miltiades. As for the Aeolians, their only notable man present was Aristagoras of Cymae.","places":[{"placeId":"501325","name":"Abydos","startOffset":64,"endOffset":70},{"placeId":"501570","name":"Lampsacus","startOffset":85,"endOffset":94},{"placeId":"511354","name":"Parium","startOffset":111,"endOffset":117},{"placeId":"511378","name":"Proconnesus","startOffset":133,"endOffset":144},{"placeId":"511218","name":"Cyzicus","startOffset":161,"endOffset":168},{"placeId":"520985","name":"Byzantium","startOffset":181,"endOffset":190},{"placeId":"501434","name":"Hellespont","startOffset":209,"endOffset":219},{"placeId":"550597","name":"Ionia","startOffset":261,"endOffset":266},{"placeId":"550497","name":"Chios","startOffset":280,"endOffset":285},{"placeId":"599926","name":"Samos","startOffset":297,"endOffset":302},{"placeId":"550823","name":"Phocaea","startOffset":316,"endOffset":323},{"placeId":"599799","name":"Miletus","startOffset":342,"endOffset":349},{"placeId":"550406","name":"Aeolians","startOffset":396,"endOffset":404},{"placeId":"550506","name":"Cymae","startOffset":456,"endOffset":461}]},{"id":139,"text":"When these accepted Histiaeus' view, they decided to act upon it in the following way: to break as much of the bridge on the Scythian side as a bowshot from there carried, so that they seem to be doing something when in fact they were doing nothing, and that the Scythians not try to force their way across the bridge over the Ister; and to say while they were breaking the portion of the bridge on the Scythian side, that they would do all that the Scythians desired. [2] This was the plan they adopted; and then Histiaeus answered for them all, and said, You have come with good advice, Scythians, and your urgency is timely: you guide us well and we do you a convenient service; for, as you see, we are breaking the bridge, and will be diligent about it, as we want to be free. [3] But while we are breaking the bridge, this is your opportunity to go and find the Persians, and when you have found them, punish them as they deserve on our behalf and on your own.","places":[{"placeId":"991379","name":"Scythian","startOffset":125,"endOffset":133},{"placeId":"1273","name":"Scythians","startOffset":263,"endOffset":272},{"placeId":"226577","name":"Ister","startOffset":327,"endOffset":332},{"placeId":"1273","name":"Scythian","startOffset":403,"endOffset":411},{"placeId":"1273","name":"Scythians","startOffset":450,"endOffset":459},{"placeId":"1273","name":"Scythians","startOffset":590,"endOffset":599},{"placeId":"geonames-130758","name":"Persians","startOffset":868,"endOffset":876}]},{"id":140,"text":"So the Scythians, trusting the Ionians' word once more, turned back to look for the Persians; but they missed the way by which their enemies returned. The Scythians themselves were to blame for this, because they had destroyed the horses' pasturage in that region and blocked the wells. [2] Had they not done, they could, if they had wished, easily have found the Persians. But as it was, that part of their plan which they had thought the best was the very cause of their going astray. [3] So the Scythians went searching for their enemies through the parts of their own country where there was forage for the horses and water, supposing that they, too, were heading for such places in their flight; but the Persians kept to their own former tracks, and so with much trouble they found the crossing. [4] But as they arrived at night and found the bridge broken, they were in great alarm lest the Ionians had abandoned them.","places":[{"placeId":"1273","name":"Scythians","startOffset":7,"endOffset":16},{"placeId":"550597","name":"Ionians","startOffset":31,"endOffset":38},{"placeId":"geonames-130758","name":"Persians","startOffset":84,"endOffset":92},{"placeId":"1273","name":"Scythians","startOffset":155,"endOffset":164},{"placeId":"geonames-130758","name":"Persians","startOffset":364,"endOffset":372},{"placeId":"1273","name":"Scythians","startOffset":498,"endOffset":507},{"placeId":"geonames-130758","name":"Persians","startOffset":709,"endOffset":717},{"placeId":"550597","name":"Ionians","startOffset":897,"endOffset":904}]},{"id":141,"text":"There was an Egyptian with Darius whose voice was the loudest in the world; Darius had this man stand on the bank of the Ister and call to Histiaeus the Milesian. This the Egyptian did; Histiaeus heard and answered the first shout, and sent all the ships to ferry the army over, and repaired the bridge.","places":[{"placeId":"981503","name":"Egyptian","startOffset":13,"endOffset":21},{"placeId":"226577","name":"Ister","startOffset":121,"endOffset":126},{"placeId":"599799","name":"Milesian","startOffset":153,"endOffset":161},{"placeId":"981503","name":"Egyptian","startOffset":172,"endOffset":180}]},{"id":142,"text":"Thus the Persians escaped. The Scythians sought the Persians, but missed them again. Their judgment of the Ionians is that if they are regarded as free men they are the basest and most craven in the world; but if they are reckoned as slaves, none love their masters more, or desire less to escape. Thus have the Scythians taunted the Ionians.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":9,"endOffset":17},{"placeId":"1273","name":"Scythians","startOffset":31,"endOffset":40},{"placeId":"geonames-130758","name":"Persians","startOffset":52,"endOffset":60},{"placeId":"550597","name":"Ionians","startOffset":107,"endOffset":114},{"placeId":"1273","name":"Scythians","startOffset":312,"endOffset":321},{"placeId":"550597","name":"Ionians","startOffset":334,"endOffset":341}]},{"id":143,"text":"Darius marched through Thrace to Sestos on the Chersonesus; from there, he crossed over with his ships to Asia, leaving Megabazus as his commander in Europe, a Persian whom he once honored by saying among the Persians what I note here: [2] Darius was about to eat pomegranates, and no sooner had he opened the first of them than his brother Artabanus asked him what he would like to have as many of as there were seeds in his pomegranate; then Darius said that he would rather have that many men like Megabazus than make all Hellas subject to him. [3] By speaking thus among Persians, the king honored Megabazus; and now he left him behind as his commander, at the head of eighty thousand of his army.","places":[{"placeId":"1001889","name":"Thrace","startOffset":23,"endOffset":29},{"placeId":"501609","name":"Sestos","startOffset":33,"endOffset":39},{"placeId":"501386","name":"Chersonesus","startOffset":47,"endOffset":58},{"placeId":"geonames-130758","name":"Persian","startOffset":160,"endOffset":167},{"placeId":"geonames-130758","name":"Persians","startOffset":209,"endOffset":217},{"placeId":"geonames-390903","name":"Hellas","startOffset":525,"endOffset":531},{"placeId":"geonames-130758","name":"Persians","startOffset":575,"endOffset":583}]},{"id":144,"text":"This Megabazus is forever remembered by the people of the Hellespont for replying, [2] when he was told at Byzantium that the people of Calchedon had founded their town seventeen years before the Byzantines had founded theirs, that the Calchedonians must at that time have been blind, for had they not been, they would never have chosen the worse site for their city when they might have had the better. [3] This Megabazus, left now as commander in the country, subjugated all the people of the Hellespont who did not take the side of the Persians.","places":[{"placeId":"501434","name":"Hellespont","startOffset":58,"endOffset":68},{"placeId":"520985","name":"Byzantium","startOffset":107,"endOffset":116},{"placeId":"520988","name":"Calchedon","startOffset":136,"endOffset":145},{"placeId":"520985","name":"Byzantines","startOffset":196,"endOffset":206},{"placeId":"520988","name":"Calchedonians","startOffset":236,"endOffset":249},{"placeId":"501434","name":"Hellespont","startOffset":495,"endOffset":505},{"placeId":"geonames-130758","name":"Persians","startOffset":539,"endOffset":547}]},{"id":145,"text":"At the same time that he was doing this, another great force was sent against Libya, for the reason that I shall give after I finish the story that I am going to tell now. [2] The descendants of the crew of the Argo were driven out by the Pelasgians who carried off the Athenian women from Brauron; after being driven out of Lemnos by them, they sailed away to Lacedaemon, and there camped on Tegetum and kindled a fire. [3] Seeing it, the Lacedaemonians sent a messenger to inquire who they were and where they came from. They answered the messenger that they were Minyae, descendants of the heroes who had sailed in the Argo and put in at Lemnos and there begot their race. [4] Hearing the story of the lineage of the Minyae, the Lacedaemonians sent a second time and asked why they had come into Laconia and kindled a fire. They replied that, having been expelled by the Pelasgians, they had come to the land of their fathers, as was most just; and their wish was to live with their fathers' people, sharing in their rights and receiving allotted pieces of land. [5] The Lacedaemonians were happy to receive the Minyae46 on the terms which their guests desired; the chief cause of their consenting was that the Tyndaridae47 had been in the ship's company of the Argo; so they received the Minyae and gave them land and distributed them among their own tribes. The Minyae immediately married, and gave in marriage to others the women they had brought from Lemnos.","places":[{"placeId":"991375","name":"Libya","startOffset":78,"endOffset":83},{"placeId":"570102","name":"Pelasgians","startOffset":239,"endOffset":249},{"placeId":"579885","name":"Athenian","startOffset":270,"endOffset":278},{"placeId":"579879","name":"Brauron","startOffset":290,"endOffset":297},{"placeId":"550693","name":"Lemnos","startOffset":325,"endOffset":331},{"placeId":"570406","name":"Lacedaemon","startOffset":361,"endOffset":371},{"placeId":"570706","name":"Tegetum","startOffset":393,"endOffset":401},{"placeId":"570406","name":"Lacedaemonians","startOffset":441,"endOffset":455},{"placeId":"550693","name":"Lemnos","startOffset":642,"endOffset":648},{"placeId":"570406","name":"Lacedaemonians","startOffset":733,"endOffset":747},{"placeId":"570406","name":"Laconia","startOffset":800,"endOffset":807},{"placeId":"570102","name":"Pelasgians","startOffset":875,"endOffset":885},{"placeId":"570406","name":"Lacedaemonians","startOffset":1075,"endOffset":1089},{"placeId":"550693","name":"Lemnos","startOffset":1459,"endOffset":1465}]},{"id":146,"text":"But in no time these Minyae became imperious, demanding an equal right to the kingship, and doing other impious things; [2] hence the Lacedaemonians resolved to kill them, and they seized them and cast them into prison. (When the Lacedaemonians execute, they do it by night, never by day.) [3] Now when they were about to kill the prisoners, the wives of the Minyae, who were natives of the country, daughters of leading Spartans, asked permission to enter the prison and each converse with her husband; the Lacedamonians granted this, not expecting that there would be any treachery from them. [4] But when the wives came into the prison, they gave their husbands all their own garments, and themselves put on the men's clothing; so the Minyae passed out in the guise of women dressed in women's clothing; and thus escaping, once more camped on Tegetum.","places":[{"placeId":"570406","name":"Lacedaemonians","startOffset":134,"endOffset":148},{"placeId":"570406","name":"Lacedaemonians","startOffset":230,"endOffset":244},{"placeId":"570685","name":"Spartans","startOffset":421,"endOffset":429},{"placeId":"570406","name":"Lacedamonians","startOffset":508,"endOffset":521},{"placeId":"570706","name":"Tegetum","startOffset":846,"endOffset":854}]},{"id":147,"text":"Now, about this same time, Theras, a descendant of Polynices through Thersander, Tisamenus, and Autesion, was preparing to lead out colonists from Lacedaemon. [2] This Theras was of the line of Cadmus and was an uncle on their mother's side to Aristodemus' sons Eurysthenes and Procles; and while these boys were yet children he held the royal power of Sparta as regent; [3] but when his nephews grew up and became kings, then Theras could not endure to be a subject when he had had a taste of supreme power, and said he would no longer stay in Lacedaemon but would sail away to his family. [4] On the island now called Thera, but then Calliste, there were descendants of Membliarus the son of Poeciles, a Phoenician; for Cadmus son of Agenor had put in at the place now called Thera during his search for Europa; and having put in, either because the land pleased him, or because for some other reason he desired to do so, he left on this island his own relation Membliarus together with other Phoenicians. [5] These dwelt on the island of Calliste for eight generations before Theras came from Lacedaemon.","places":[{"placeId":"570406","name":"Lacedaemon","startOffset":147,"endOffset":157},{"placeId":"570685","name":"Sparta","startOffset":353,"endOffset":359},{"placeId":"570406","name":"Lacedaemon","startOffset":545,"endOffset":555},{"placeId":"599973","name":"Thera","startOffset":620,"endOffset":625},{"placeId":"808255902","name":"Calliste","startOffset":636,"endOffset":644},{"placeId":"678334","name":"Phoenician","startOffset":706,"endOffset":716},{"placeId":"599973","name":"Thera","startOffset":778,"endOffset":783},{"placeId":"678334","name":"Phoenicians","startOffset":995,"endOffset":1006},{"placeId":"808255902","name":"Calliste","startOffset":1041,"endOffset":1049},{"placeId":"570406","name":"Lacedaemon","startOffset":1096,"endOffset":1106}]},{"id":148,"text":"It was these that Theras was preparing to join, taking with him a company of people from the tribes; his intention was to settle among the people of Calliste and not drive them out but claim them as in fact his own people. [2] So when the Minyae escaped from prison and camped on Tegetum, and the Lacedaemonians were planning to put them to death, Theras interceded for their lives, that there might be no killing, promising to lead them out of the country himself. [3] The Lacedaemonians consented to this, and Theras sailed with three thirty-oared ships to join the descendants of Membliarus, taking with him not all the Minyae but only a few; [4] for the greater part of them made their way to the lands of the Paroreatae and Caucones, and after having driven these out of their own country, they divided themselves into six companies and established the cities of Lepreum, Macistus, Phrixae, Pyrgus, Epium, and Nudium in the land they had won;48 most of these were in my time taken and sacked by the Eleans. As for the island Calliste, it was called Thera after its colonist.","places":[{"placeId":"808255902","name":"Calliste","startOffset":149,"endOffset":157},{"placeId":"570706","name":"Tegetum","startOffset":280,"endOffset":288},{"placeId":"570406","name":"Lacedaemonians","startOffset":298,"endOffset":312},{"placeId":"570406","name":"Lacedaemonians","startOffset":475,"endOffset":489},{"placeId":"573426","name":"Paroreatae","startOffset":715,"endOffset":725},{"placeId":"570343","name":"Caucones","startOffset":730,"endOffset":738},{"placeId":"570423","name":"Lepreum","startOffset":869,"endOffset":876},{"placeId":"570453","name":"Macistus","startOffset":878,"endOffset":886},{"placeId":"570609","name":"Phrixae","startOffset":888,"endOffset":895},{"placeId":"570641","name":"Pyrgus","startOffset":897,"endOffset":903},{"placeId":"570226","name":"Epium","startOffset":905,"endOffset":910},{"placeId":"573390","name":"Nudium","startOffset":916,"endOffset":922},{"placeId":"570220","name":"Eleans","startOffset":1005,"endOffset":1011},{"placeId":"808255902","name":"Calliste","startOffset":1031,"endOffset":1039},{"placeId":"599973","name":"Thera","startOffset":1055,"endOffset":1060}]},{"id":149,"text":"But as Theras' son would not sail with him, his father said that he would leave him behind as a sheep among wolves; after which saying the boy got the nickname of Oeolycus,49 and it so happened that this became his customary name. He had a son, Aegeus, from whom the Aegidae, a great Spartan clan, take their name. [2] The men of this clan, finding that none of their children lived, set up a temple of the avenging spirits of Laus and Oedipus, by the instruction of an oracle,50 after which their children lived. It fared thus, too, with the children of the Aegidae at Thera.","places":[{"placeId":"570685","name":"Spartan","startOffset":284,"endOffset":291},{"placeId":"599973","name":"Thera","startOffset":571,"endOffset":576}]},{"id":150,"text":"So far in the story the Lacedaemonian and Theraean records agree; for the rest, we have only the word of the Theraeans. [2] Grinnus son of Aesanius, king of Thera, a descendant of this same Theras, came to Delphi bringing a hecatomb from his city; among others of his people, Battus son of Polymnestus came with him, a descendant of Euphemus of the Minyan clan. [3] When Grinnus king of Thera asked the oracle about other matters, the priestess' answer was that he should found a city in Libya. Lord, I am too old and heavy to stir; command one of these younger men to do this, answered Grinnus, pointing to Battus as he spoke. [4] No more was said then. But when they departed, they neglected to obey the oracle, since they did not know where Libya was, and were afraid to send a colony out to an uncertain destination.","places":[{"placeId":"570406","name":"Lacedaemonian","startOffset":24,"endOffset":37},{"placeId":"599973","name":"Theraean","startOffset":42,"endOffset":50},{"placeId":"599973","name":"Theraeans","startOffset":109,"endOffset":118},{"placeId":"599973","name":"Thera","startOffset":157,"endOffset":162},{"placeId":"540726","name":"Delphi","startOffset":206,"endOffset":212},{"placeId":"599973","name":"Thera","startOffset":387,"endOffset":392},{"placeId":"991375","name":"Libya","startOffset":488,"endOffset":493},{"placeId":"716588","name":"Libya","startOffset":746,"endOffset":751}]},{"id":151,"text":"For seven years after this there was no rain in Thera; all the trees in the island except one withered. The Theraeans inquired at Delphi again, and the priestess mentioned the colony they should send to Libya. [2] So, since there was no remedy for their ills, they sent messengers to Crete to find any Cretan or traveller there who had travelled to Libya. In their travels about the island, these came to the town of Itanus, where they met a murex fisherman named Corobius, who told them that he had once been driven off course by winds to Libya, to an island there called Platea.51 [3] They hired this man to come with them to Thera; from there, just a few men were sent aboard ship to spy out the land first; guided by Corobius to the aforesaid island Platea, these left him there with provision for some months, and themselves sailed back with all speed to Thera to bring news of the island.","places":[{"placeId":"599973","name":"Theraeans","startOffset":108,"endOffset":117},{"placeId":"540726","name":"Delphi","startOffset":130,"endOffset":136},{"placeId":"991375","name":"Libya","startOffset":203,"endOffset":208},{"placeId":"589748","name":"Crete","startOffset":284,"endOffset":289},{"placeId":"589748","name":"Cretan","startOffset":302,"endOffset":308},{"placeId":"716588","name":"Libya","startOffset":349,"endOffset":354},{"placeId":"589824","name":"Itanus","startOffset":417,"endOffset":423},{"placeId":"716588","name":"Libya","startOffset":540,"endOffset":545},{"placeId":"560720","name":"Platea","startOffset":573,"endOffset":579},{"placeId":"599973","name":"Thera","startOffset":628,"endOffset":633},{"placeId":"560720","name":"Platea","startOffset":754,"endOffset":760},{"placeId":"599973","name":"Thera","startOffset":860,"endOffset":865}]},{"id":152,"text":"But after they had been away for longer than the agreed time, and Corobius had no provisions left, a Samian ship sailing for Egypt, whose captain was Colaeus, was driven off her course to Platea, where the Samians heard the whole story from Corobius and left him provisions for a year; [2] they then put out to sea from the island and would have sailed to Egypt, but an easterly wind drove them from their course, and did not abate until they had passed through the Pillars of Heracles and came providentially to Tartessus. [3] Now this was at that time an untapped52 market; hence, the Samians, of all the Greeks whom we know with certainty, brought back from it the greatest profit on their wares except Sostratus of Aegina, son of Laodamas; no one could compete with him. [4] The Samians took six talents, a tenth of their profit, and made a bronze vessel with it, like an Argolic cauldron, with griffins' heads projecting from the rim all around; they set this up in their temple of Hera, supporting it with three colossal kneeling figures of bronze, each twelve feet high. [5] What the Samians had done was the beginning of a close friendship between them and the men of Cyrene and Thera.","places":[{"placeId":"599926","name":"Samian","startOffset":101,"endOffset":107},{"placeId":"1001943","name":"Egypt","startOffset":125,"endOffset":130},{"placeId":"560720","name":"Platea","startOffset":188,"endOffset":194},{"placeId":"599926","name":"Samians","startOffset":206,"endOffset":213},{"placeId":"981503","name":"Egypt","startOffset":356,"endOffset":361},{"placeId":"275614","name":"Pillars of Heracles","startOffset":466,"endOffset":485},{"placeId":"256468","name":"Tartessus","startOffset":513,"endOffset":522},{"placeId":"599926","name":"Samians","startOffset":587,"endOffset":594},{"placeId":"geonames-390903","name":"Greeks","startOffset":607,"endOffset":613},{"placeId":"579853","name":"Aegina","startOffset":719,"endOffset":725},{"placeId":"599926","name":"Samians","startOffset":783,"endOffset":790},{"placeId":"570106","name":"Argolic","startOffset":876,"endOffset":883},{"placeId":"599926","name":"Samians","startOffset":1091,"endOffset":1098},{"placeId":"373778","name":"Cyrene","startOffset":1176,"endOffset":1182},{"placeId":"599973","name":"Thera","startOffset":1187,"endOffset":1192}]},{"id":153,"text":"As for the Theraeans, when they came to Thera after leaving Corobius on the island, they brought word that they had established a settlement on an island off Libya. The Theraeans determined to send out men from their seven regions, taking by lot one of every pair of brothers, and making Battus leader and king of all. Then they manned two fifty-oared ships and sent them to Platea.","places":[{"placeId":"599973","name":"Theraeans","startOffset":11,"endOffset":20},{"placeId":"599973","name":"Thera","startOffset":40,"endOffset":45},{"placeId":"991375","name":"Libya","startOffset":158,"endOffset":163},{"placeId":"599973","name":"Theraeans","startOffset":169,"endOffset":178},{"placeId":"560720","name":"Platea","startOffset":375,"endOffset":381}]},{"id":154,"text":"This is what the Theraeans say; and now begins the part in which the Theraean and Cyrenaean stories agree, but not until now, for the Cyrenaeans tell a wholly different story about Battus, which is this. There is a town in Crete called Oaxus, of which one Etearchus became ruler. He was a widower with a daughter whose name was Phronime, and he married a second wife. [2] When the second wife came into his house, she thought fit to be the proverbial stepmother to Phronime, ill-treating her and devising all sorts of evil against her; at last she accused the girl of lewdness, and persuaded her husband that the charge was true. So Etearchus was persuaded by his wife and contrived a great sin against his daughter. [3] There was at Oaxus a Theraean trader, one Themison; Etearchus made this man his guest and friend, and got him to swear that he would do him whatever service he desired; then he gave the man his own daughter, telling him to take her away and throw her into the sea. [4] But Themison was very angry at being thus tricked on his oath and renounced his friendship with Etearchus; presently, he took the girl and sailed away, and so as to fulfill the oath that he had sworn to Etearchus, when he was on the high seas he bound her with ropes and let her down into the sea and drew her up again, and presently arrived at Thera.","places":[{"placeId":"599973","name":"Theraeans","startOffset":17,"endOffset":26},{"placeId":"599973","name":"Theraean","startOffset":69,"endOffset":77},{"placeId":"373778","name":"Cyrenaean","startOffset":82,"endOffset":91},{"placeId":"373778","name":"Cyrenaeans","startOffset":134,"endOffset":144},{"placeId":"589748","name":"Crete","startOffset":223,"endOffset":228},{"placeId":"590095","name":"Oaxus","startOffset":236,"endOffset":241},{"placeId":"590095","name":"Oaxus","startOffset":734,"endOffset":739},{"placeId":"599973","name":"Theraean","startOffset":742,"endOffset":750},{"placeId":"599973","name":"Thera","startOffset":1335,"endOffset":1340}]},{"id":155,"text":"There Polymnestus, a notable Theraean, took Phronime and made her his concubine. In time, a son of weak and stammering speech was born to him, to whom he gave the name Battus,53 as the Theraeans and Cyrenaeans say; but in my opinion the boy was given some other name, [2] and changed it to Battus on his coming to Libya, taking this new name because of the oracle given to him at Delphi and the honorable office which he received. For the Libyan word for king is Battus, and this (I believe) is why the Pythian priestess called him so in her prophecy, using a Libyan name because she knew that he was to be king in Libya. [3] For when he grew to adulthood, he went to Delphi to inquire about his voice; and the priestess in answer gave him this: Battus, you have come for a voice; but Lord Phoebus Apollo Sends you to found a city in Libya, nurse of sheep,  just as if she addressed him using the Greek word for king, Basileus, you have come for a voice, et cetera. [4] But he answered: Lord, I came to you to ask about my speech; but you talk of other matters, things impossible to do; you tell me to plant a colony in Libya; where shall I get the power or strength of hand for it? Battus spoke thus, but as the god would not give him another oracle and kept answering as before, he departed while the priestess was still speaking, and went away to Thera.","places":[{"placeId":"599973","name":"Theraeans","startOffset":185,"endOffset":194},{"placeId":"373778","name":"Cyrenaeans","startOffset":199,"endOffset":209},{"placeId":"991375","name":"Libya","startOffset":314,"endOffset":319},{"placeId":"540726","name":"Delphi","startOffset":380,"endOffset":386},{"placeId":"716588","name":"Libyan","startOffset":439,"endOffset":445},{"placeId":"716588","name":"Libyan","startOffset":562,"endOffset":568},{"placeId":"716588","name":"Libya","startOffset":617,"endOffset":622},{"placeId":"540726","name":"Delphi","startOffset":670,"endOffset":676},{"placeId":"991375","name":"Libya","startOffset":838,"endOffset":843},{"placeId":"geonames-390903","name":"Greek","startOffset":903,"endOffset":908},{"placeId":"991375","name":"Libya","startOffset":1131,"endOffset":1136},{"placeId":"599973","name":"Thera","startOffset":1362,"endOffset":1367}]},{"id":156,"text":"But afterward things turned out badly for Battus and the rest of the Theraeans; and when, ignorant of the cause of their misfortunes, they sent to Delphi to ask about their present ills, [2] the priestess declared that they would fare better if they helped Battus plant a colony at Cyrene in Libya. Then the Theraeans sent Battus with two fifty-oared ships; these sailed to Libya, but, not knowing what else to do, presently returned to Thera. [3] There, the Theraeans shot at them as they came to land and would not let the ship put in, telling them to sail back; which they did under constraint of necessity, and planted a colony on an island off the Libyan coast called (as I have said already) Platea. This island is said to be as big as the city of Cyrene is now.","places":[{"placeId":"599973","name":"Theraeans","startOffset":69,"endOffset":78},{"placeId":"540726","name":"Delphi","startOffset":147,"endOffset":153},{"placeId":"373778","name":"Cyrene","startOffset":282,"endOffset":288},{"placeId":"991375","name":"Libya","startOffset":292,"endOffset":297},{"placeId":"599973","name":"Theraeans","startOffset":308,"endOffset":317},{"placeId":"716588","name":"Libya","startOffset":374,"endOffset":379},{"placeId":"599973","name":"Theraeans","startOffset":459,"endOffset":468},{"placeId":"716588","name":"Libyan","startOffset":653,"endOffset":659},{"placeId":"560720","name":"Platea","startOffset":698,"endOffset":704},{"placeId":"373778","name":"Cyrene","startOffset":754,"endOffset":760}]},{"id":157,"text":"Here they lived for two years; but as everything went wrong, the rest sailed to Delphi leaving one behind, and on their arrival questioned the oracle, and said that they were living in Libya, but that they were no better off for that. [2] Then the priestess gave them this reply: If you know Libya nurse of sheep better than I, Though I have been there and you have not, then I am very much astonished at your knowledge. Hearing this, Battus and his men sailed back again; for the god would not let them do anything short of colonizing Libya itself; [3] and having come to the island and taken aboard the one whom they had left there, they made a settlement at a place in Libya itself, opposite the island which was called Aziris. This is a place enclosed on both sides by the fairest of groves, with a river flowing along one side of it.","places":[{"placeId":"540726","name":"Delphi","startOffset":80,"endOffset":86},{"placeId":"991375","name":"Libya","startOffset":185,"endOffset":190},{"placeId":"716588","name":"Libya","startOffset":294,"endOffset":299},{"placeId":"991375","name":"Libya","startOffset":540,"endOffset":545},{"placeId":"716588","name":"Libya","startOffset":676,"endOffset":681},{"placeId":"373746","name":"Aziris","startOffset":727,"endOffset":733}]},{"id":158,"text":"Here they dwelt for six years; but in the seventh, the Libyans got them to leave the place, saying that they would lead them to a better; [2] and they brought the Greeks from Aziris and led them west, so calculating the hours of daylight that they led the Greeks past the fairest place in their country, called Irasa, at night, lest the Greeks see it in their journey. [3] Then they brought the Greeks to what is called the Fountain of Apollo, and said to them: Here, Greeks, it is suitable for you to live; for here the sky is torn.54","places":[{"placeId":"716588","name":"Libyans","startOffset":55,"endOffset":62},{"placeId":"geonames-390903","name":"Greeks","startOffset":163,"endOffset":169},{"placeId":"373746","name":"Aziris","startOffset":175,"endOffset":181},{"placeId":"geonames-390903","name":"Greeks","startOffset":256,"endOffset":262},{"placeId":"geonames-390903","name":"Greeks","startOffset":337,"endOffset":343},{"placeId":"geonames-390903","name":"Greeks","startOffset":395,"endOffset":401},{"placeId":"geonames-390903","name":"Greeks","startOffset":469,"endOffset":475}]},{"id":159,"text":"Now in the time of Battus the founder of the colony, who ruled for forty years, and of his son Arcesilaus who ruled for sixteen, the inhabitants of Cyrene were no more in number than when they had first gone out to the colony. [2] But in the time of the third ruler, Battus, who was called the Fortunate, the Pythian priestess warned all Greeks by an oracle to cross the sea and live in Libya with the Cyrenaeans; for the Cyrenaeans invited them, promising a distribution of land; [3] and this was the oracle: Whoever goes to beloved Libya after The fields are divided, I say shall be sorry afterward.  [4] So a great multitude gathered at Cyrene, and cut out great tracts of land from the territory of the neighboring Libyans. Robbed of their lands and treated violently by the Cyrenaeans, these then sent to Egypt together with their king, whose name was Adicran, and put their affairs in the hands of Apries, the king of that country. [5] Apries mustered a great force of Egyptians and sent it against Cyrene; the Cyrenaeans marched out to Irasa and the Thestes spring, and there fought with the Egyptians and beat them; [6] for the Egyptians had as yet had no experience of Greeks, and despised their enemy; as a result of which, they were so utterly destroyed that few of them returned to Egypt. Because of this misfortune, and because they blamed him for it, the Egyptians revolted from Apries.55","places":[{"placeId":"373778","name":"Cyrene","startOffset":148,"endOffset":154},{"placeId":"geonames-390903","name":"Greeks","startOffset":338,"endOffset":344},{"placeId":"991375","name":"Libya","startOffset":387,"endOffset":392},{"placeId":"373778","name":"Cyrenaeans","startOffset":402,"endOffset":412},{"placeId":"373778","name":"Cyrenaeans","startOffset":422,"endOffset":432},{"placeId":"716588","name":"Libya","startOffset":536,"endOffset":541},{"placeId":"373778","name":"Cyrene","startOffset":644,"endOffset":650},{"placeId":"716588","name":"Libyans","startOffset":723,"endOffset":730},{"placeId":"373778","name":"Cyrenaeans","startOffset":783,"endOffset":793},{"placeId":"1001943","name":"Egypt","startOffset":814,"endOffset":819},{"placeId":"981503","name":"Egyptians","startOffset":979,"endOffset":988},{"placeId":"373778","name":"Cyrene","startOffset":1009,"endOffset":1015},{"placeId":"373778","name":"Cyrenaeans","startOffset":1021,"endOffset":1031},{"placeId":"981503","name":"Egyptians","startOffset":1103,"endOffset":1112},{"placeId":"981503","name":"Egyptians","startOffset":1140,"endOffset":1149},{"placeId":"geonames-390903","name":"Greeks","startOffset":1182,"endOffset":1188},{"placeId":"981503","name":"Egypt","startOffset":1298,"endOffset":1303},{"placeId":"981503","name":"Egyptians","startOffset":1373,"endOffset":1382}]},{"id":160,"text":"This Battus had a son Arcesilaus; on his first coming to reign, he quarrelled with his brothers, until they left him and went away to another place in Libya, where they founded a city for themselves, which was then and is now called Barce; and while they were founding it, they persuaded the Libyans to revolt from the Cyrenaeans. [2] Then Arcesilaus led an army into the country of the Libyans who had received his brothers and had also revolted; and they fled in fear of him to the eastern Libyans. [3] Arcesilaus pursued them until he came in his pursuit to Leucon in Libya, where the Libyans resolved to attack him; they engaged, and so wholly overcame the Cyrenaeans that seven thousand Cyrenaean soldiers were killed there. [4] After this disaster, Arcesilaus, being worn down and having taken a drug, was strangled by his brother Learchus; Learchus was deftly killed by Arcesilaus' wife, Eryxo.","places":[{"placeId":"991375","name":"Libya","startOffset":151,"endOffset":156},{"placeId":"373750","name":"Barce","startOffset":233,"endOffset":238},{"placeId":"716588","name":"Libyans","startOffset":292,"endOffset":299},{"placeId":"373778","name":"Cyrenaeans","startOffset":319,"endOffset":329},{"placeId":"716588","name":"Libyans","startOffset":387,"endOffset":394},{"placeId":"716588","name":"Libyans","startOffset":492,"endOffset":499},{"placeId":"716588","name":"Libya","startOffset":571,"endOffset":576},{"placeId":"716588","name":"Libyans","startOffset":588,"endOffset":595},{"placeId":"373778","name":"Cyrenaeans","startOffset":661,"endOffset":671},{"placeId":"373778","name":"Cyrenaean","startOffset":692,"endOffset":701}]},{"id":161,"text":"Arcesilaus' kingship passed to his son Battus, who was lame and infirm in his feet. The Cyrenaeans, in view of the affliction that had overtaken them, sent to Delphi to ask what political arrangement would enable them to live best; [2] the priestess told them bring a mediator from Mantinea in Arcadia. When the Cyrenaeans sent their request, the Mantineans gave them their most valued citizen, whose name was Demonax. [3] When this man came to Cyrene and learned everything, he divided the people into three tribes;56 of which the Theraeans and dispossessed Libyans were one, the Peloponnesians and Cretans the second, and all the islanders the third; furthermore, he set apart certain domains and priesthoods for their king Battus, but all the rest, which had belonged to the kings, were now to be held by the people in common.","places":[{"placeId":"373778","name":"Cyrenaeans","startOffset":88,"endOffset":98},{"placeId":"540726","name":"Delphi","startOffset":159,"endOffset":165},{"placeId":"570459","name":"Mantinea","startOffset":282,"endOffset":290},{"placeId":"570102","name":"Arcadia","startOffset":294,"endOffset":301},{"placeId":"373778","name":"Cyrenaeans","startOffset":312,"endOffset":322},{"placeId":"570459","name":"Mantineans","startOffset":347,"endOffset":357},{"placeId":"373778","name":"Cyrene","startOffset":445,"endOffset":451},{"placeId":"599973","name":"Theraeans","startOffset":532,"endOffset":541},{"placeId":"716588","name":"Libyans","startOffset":559,"endOffset":566},{"placeId":"570577","name":"Peloponnesians","startOffset":581,"endOffset":595},{"placeId":"589748","name":"Cretans","startOffset":600,"endOffset":607}]},{"id":162,"text":"During the life of this Battus, these ordinances held good, but in the time of his son Arcesilaus much contention arose about the king's rights. [2] Arcesilaus, son of the lame Battus and Pheretime, would not abide by the ordinances of Demonax, but demanded back the prerogatives of his forefathers, and made himself head of a faction; but he was defeated and banished to Samos, and his mother fled to Salamis in Cyprus. [3] Now Salamis at this time was ruled by Evelthon, who dedicated that marvellous censer at Delphi which stands in the treasury of the Corinthians. Pheretime came to him, asking him for an army to bring her and her son back to Cyrene; [4] Evelthon was willing to give her everything else, only not an army, and when she accepted what he gave her, she said that it was fine, but it would be better to give her an army as she asked. [5] This she said whatever the gift, until at last Evelthon sent her a golden spindle and distaff, and wool, and when Pheretime uttered the same words as before, he answered that these, and not armies, were gifts for women.","places":[{"placeId":"599926","name":"Samos","startOffset":372,"endOffset":377},{"placeId":"707617","name":"Salamis","startOffset":402,"endOffset":409},{"placeId":"707498","name":"Cyprus","startOffset":413,"endOffset":419},{"placeId":"707617","name":"Salamis","startOffset":429,"endOffset":436},{"placeId":"540726","name":"Delphi","startOffset":513,"endOffset":519},{"placeId":"570182","name":"Corinthians","startOffset":556,"endOffset":567},{"placeId":"373778","name":"Cyrene","startOffset":648,"endOffset":654}]},{"id":163,"text":"Meanwhile Arcesilaus was in Samos, collecting all the men that he could and promising them a new division of land; and while a great army was thus gathering, he made a journey to Delphi, to ask the oracle about his return. [2] The priestess gave him this answer: For the lifetimes of four Battuses and four Arcesilauses, eight generations of men, Loxias grants to your house the kingship of Cyrene; more than this he advises you not even to try. [3] But you, return to your country and live there in peace. But if you find the oven full of amphora, do not bake the amphora, but let them go unscathed. And if you bake them in the oven, do not go into the tidal place; for if you do, then you shall be killed yourself, and also the bull that is fairest of the herd. This was the oracle given by the priestess to Arcesilaus.","places":[{"placeId":"599926","name":"Samos","startOffset":28,"endOffset":33},{"placeId":"540726","name":"Delphi","startOffset":179,"endOffset":185},{"placeId":"373778","name":"Cyrene","startOffset":393,"endOffset":399}]},{"id":164,"text":"But he returned to Cyrene with the men from Samos, and having made himself master of it he forgot the oracle, and demanded justice upon his enemies for his banishment. [2] Some of these left the country altogether; others, Arcesilaus seized and sent away to Cyprus to be killed there. These were carried off their course to Cnidus, where the Cnidians saved them and sent them to Thera. Others of the Cyrenaeans fled for refuge into a great tower that belonged to one Aglomachus, a private man, and Arcesilaus piled wood around it and burnt them there. [3] Then, perceiving too late that this was the meaning of the Delphic oracle which forbade him to bake the amphora if he found them in the oven, he deliberately refrained from going into the city of the Cyrenaeans, fearing the death prophesied and supposing the tidal place to be Cyrene. [4] Now he had a wife who was a relation of his, a daughter of Alazir king of the Barcaeans, and Arcesilaus went to Alazir; but men of Barce and some of the exiles from Cyrene were aware of him and killed him as he walked in the town, and Alazir his father-in-law too. So Arcesilaus whether with or without meaning to missed the meaning of the oracle and fulfilled his destiny.","places":[{"placeId":"373778","name":"Cyrene","startOffset":19,"endOffset":25},{"placeId":"599926","name":"Samos","startOffset":44,"endOffset":49},{"placeId":"707498","name":"Cyprus","startOffset":258,"endOffset":264},{"placeId":"599575","name":"Cnidus","startOffset":324,"endOffset":330},{"placeId":"599575","name":"Cnidians","startOffset":342,"endOffset":350},{"placeId":"599973","name":"Thera","startOffset":379,"endOffset":384},{"placeId":"373778","name":"Cyrenaeans","startOffset":400,"endOffset":410},{"placeId":"540726","name":"Delphic","startOffset":615,"endOffset":622},{"placeId":"373778","name":"Cyrenaeans","startOffset":756,"endOffset":766},{"placeId":"373778","name":"Cyrene","startOffset":833,"endOffset":839},{"placeId":"373750","name":"Barcaeans","startOffset":923,"endOffset":932},{"placeId":"373750","name":"Barce","startOffset":976,"endOffset":981},{"placeId":"373778","name":"Cyrene","startOffset":1010,"endOffset":1016}]},{"id":165,"text":"While Arcesilaus was living at Barce, accomplishing his own destruction, his mother Pheretime held her son's prerogative at Cyrene, where she administered all his business and sat with others in council. [2] But when she learned of her son's death at Barce, she made her escape to Egypt, trusting to the good service which Arcesilaus had done Cambyses the son of Cyrus; for this was the Arcesilaus who gave Cyrene to Cambyses and agreed to pay tribute. [3] So, on her arrival in Egypt, Pheretime supplicated Aryandes, asking that he avenge her, on the plea that her son had been killed for allying himself with the Medes.","places":[{"placeId":"373750","name":"Barce","startOffset":31,"endOffset":36},{"placeId":"373778","name":"Cyrene","startOffset":124,"endOffset":130},{"placeId":"373750","name":"Barce","startOffset":251,"endOffset":256},{"placeId":"1001943","name":"Egypt","startOffset":281,"endOffset":286},{"placeId":"373778","name":"Cyrene","startOffset":407,"endOffset":413},{"placeId":"981503","name":"Egypt","startOffset":479,"endOffset":484},{"placeId":"903080","name":"Medes","startOffset":615,"endOffset":620}]},{"id":166,"text":"This Aryandes had been appointed viceroy of Egypt by Cambyses; at a later day, he was put to death for making himself equal to Darius. For, learning and seeing that Darius desired to leave a memorial of himself such as no king ever had, Aryandes imitated him, until he got his reward; [2] for Darius had coined money out of gold refined to an extreme purity,57 and Aryandes, then ruling Egypt, made a similar silver coinage; and now there is no silver money so pure as is the Aryandic. But when Darius heard that Aryandes was doing so, he put him to death, not on this charge but as a rebel.","places":[{"placeId":"1001943","name":"Egypt","startOffset":44,"endOffset":49},{"placeId":"981503","name":"Egypt","startOffset":387,"endOffset":392}]},{"id":167,"text":"At this time, Aryandes took pity on Pheretime and gave her all the Egyptian land and sea forces, appointing Amasis, a Maraphian, general of the army, and Badres of the tribe of the Pasargadae, admiral of the fleet. [2] But before despatching the troops, Aryandes sent a herald to Barce to ask who it was who had killed Arcesilaus. The Barcaeans answered that it was the deed of the whole city, for the many wrongs that Arcesilaus had done them; when he heard this, Aryandes sent his troops with Pheretime. [3] This was the pretext; but I myself think that the troops were sent to subjugate Libya. For the Libyan tribes are many and of different kinds, and though a few of them were the king's subjects, the greater part cared nothing for Darius.","places":[{"placeId":"981503","name":"Egyptian","startOffset":67,"endOffset":75},{"placeId":"930213","name":"Maraphian","startOffset":118,"endOffset":127},{"placeId":"922693","name":"Pasargadae","startOffset":181,"endOffset":191},{"placeId":"373750","name":"Barce","startOffset":280,"endOffset":285},{"placeId":"373750","name":"Barcaeans","startOffset":335,"endOffset":344},{"placeId":"991375","name":"Libya","startOffset":590,"endOffset":595},{"placeId":"716588","name":"Libyan","startOffset":605,"endOffset":611}]},{"id":168,"text":"Now, concerning the lands inhabited by Libyans, the Adyrmachidae are the people that live nearest to Egypt; they follow Egyptian customs for the most part, but dress like other Libyans. Their women wear twisted bronze ornaments on both legs; their hair is long; each catches her own lice, then bites and throws them away. [2] They are the only Libyans that do this, and who show the king all virgins that are to be married; the king then takes the virginity of whichever of these pleases him. These Adyrmachidae extend from Egypt to the harbor called Plynus.","places":[{"placeId":"716588","name":"Libyans","startOffset":39,"endOffset":46},{"placeId":"716502","name":"Adyrmachidae","startOffset":52,"endOffset":64},{"placeId":"1001943","name":"Egypt","startOffset":101,"endOffset":106},{"placeId":"981503","name":"Egyptian","startOffset":120,"endOffset":128},{"placeId":"716588","name":"Libyans","startOffset":177,"endOffset":184},{"placeId":"716588","name":"Libyans","startOffset":344,"endOffset":351},{"placeId":"716502","name":"Adyrmachidae","startOffset":499,"endOffset":511},{"placeId":"981503","name":"Egypt","startOffset":524,"endOffset":529},{"placeId":"716540","name":"Plynus","startOffset":551,"endOffset":557}]},{"id":169,"text":"Next to them are the Giligamae, who inhabit the country to the west as far as the island of Aphrodisias; in between lies the island of Platea, which the Cyrenaeans colonized, and on the mainland is the harbor called Menelaus, and the Aziris which was a settlement of the Cyrenaeans. Here the country of silphium begins, [2] which reaches from the island of Platea to the entrance of the Syrtis. This people is like the others in its customs.","places":[{"placeId":"716563","name":"Giligamae","startOffset":21,"endOffset":30},{"placeId":"560720","name":"Platea","startOffset":135,"endOffset":141},{"placeId":"373778","name":"Cyrenaeans","startOffset":153,"endOffset":163},{"placeId":"716599","name":"Menelaus","startOffset":216,"endOffset":224},{"placeId":"373746","name":"Aziris","startOffset":234,"endOffset":240},{"placeId":"373778","name":"Cyrenaeans","startOffset":271,"endOffset":281},{"placeId":"560720","name":"Platea","startOffset":357,"endOffset":363},{"placeId":"344491","name":"Syrtis","startOffset":387,"endOffset":393}]},{"id":170,"text":"The next people west of the Giligamae are the Asbystae, who live inland of Cyrene, not coming down to the coast, for that is Cyrenaean territory. These drive four-horse chariots to a greater extent than any other Libyans; it is their practice to imitate most of the Cyrenaean customs.","places":[{"placeId":"716563","name":"Giligamae","startOffset":28,"endOffset":37},{"placeId":"373738","name":"Asbystae","startOffset":46,"endOffset":54},{"placeId":"373778","name":"Cyrene","startOffset":75,"endOffset":81},{"placeId":"373778","name":"Cyrenaean","startOffset":125,"endOffset":134},{"placeId":"716588","name":"Libyans","startOffset":213,"endOffset":220},{"placeId":"373778","name":"Cyrenaean","startOffset":266,"endOffset":275}]},{"id":171,"text":"Next west of the Asbystae are the Auschisae, dwelling inland of Barce, and touching the coast at Euhesperidae. About the middle of the land of the Auschisae lives the little tribe of the Bacales, whose territory comes down to the sea at Tauchira, a town in the Barcaean country; their customs are the same as those of the dwellers inland of Cyrene.","places":[{"placeId":"373738","name":"Asbystae","startOffset":17,"endOffset":25},{"placeId":"373744","name":"Auschisae","startOffset":34,"endOffset":43},{"placeId":"373750","name":"Barce","startOffset":64,"endOffset":69},{"placeId":"373827","name":"Euhesperidae","startOffset":97,"endOffset":109},{"placeId":"373744","name":"Auschisae","startOffset":147,"endOffset":156},{"placeId":"373748","name":"Bacales","startOffset":187,"endOffset":194},{"placeId":"373736","name":"Tauchira","startOffset":237,"endOffset":245},{"placeId":"373750","name":"Barcaean","startOffset":261,"endOffset":269},{"placeId":"373778","name":"Cyrene","startOffset":341,"endOffset":347}]},{"id":172,"text":"Next west of these Auschisae is the populous country of the Nasamones, who in summer leave their flocks by the sea and go up to the land called Augila to gather dates from the palm-trees that grow there in great abundance and all bear fruit. They hunt locusts, which they dry in the sun, and after grinding sprinkle them into milk and drink it. [2] It is their custom for every man to have many wives; their intercourse with women is promiscuous, as among the Massagetae; a staff is placed before the dwelling, and then they have intercourse. When a man of the Nasamones weds, on the first night the bride must by custom lie with each of the whole company in turn; and each man after intercourse gives her whatever gift he has brought from his house. [3] As for their manner of swearing and divination, they lay their hands on the graves of the men reputed to have been the most just and good among them, and by these men they swear; their practice of divination is to go to the tombs of their ancestors, where after making prayers they lie down to sleep, and take for oracles whatever dreams come to them. [4] They give and receive pledges by each drinking from the hand of the other party; and if they have nothing liquid, they take the dust of the earth and lick it up.","places":[{"placeId":"373744","name":"Auschisae","startOffset":19,"endOffset":28},{"placeId":"373861","name":"Nasamones","startOffset":60,"endOffset":69},{"placeId":"373742","name":"Augila","startOffset":144,"endOffset":150},{"placeId":"59921","name":"Massagetae","startOffset":460,"endOffset":470},{"placeId":"373861","name":"Nasamones","startOffset":561,"endOffset":570}]},{"id":173,"text":"On the borders of the Nasamones is the country of the Psylli, who perished in this way: the force of the south wind dried up their water-tanks, and all their country, lying in the region of the Syrtis, was waterless. After deliberating together, they marched south (I tell the story as it is told by the Libyans), and when they came into the sandy desert, a strong south wind buried them. So they perished utterly, and the Nasamones have their country.","places":[{"placeId":"373861","name":"Nasamones","startOffset":22,"endOffset":31},{"placeId":"364004","name":"Psylli","startOffset":54,"endOffset":60},{"placeId":"344491","name":"Syrtis","startOffset":194,"endOffset":200},{"placeId":"716588","name":"Libyans","startOffset":304,"endOffset":311},{"placeId":"373861","name":"Nasamones","startOffset":423,"endOffset":432}]},{"id":174,"text":"Inland of these to the south, the Garamantes live in wild beast country. They shun the sight and fellowship of men, and have no weapons of war, nor know how to defend themselves.","places":[{"placeId":"354116","name":"Garamantes","startOffset":34,"endOffset":44}]},{"id":175,"text":"These live inland of the Nasamones; the neighboring seaboard to the west is the country of the Macae, who shave their hair to a crest, leaving that on the top of their heads to grow and shaving clean off what is on either side; in war they carry shields made of ostrich skins. [2] The Cinyps river empties into their sea through their country from a hill called the Hill of the Graces. This hill is thickly wooded, while the rest of Libya of which I have spoken is bare of trees; it is twenty-five miles from the sea.","places":[{"placeId":"373861","name":"Nasamones","startOffset":25,"endOffset":34},{"placeId":"344428","name":"Macae","startOffset":95,"endOffset":100},{"placeId":"344414","name":"Cinyps","startOffset":285,"endOffset":291},{"placeId":"991375","name":"Libya","startOffset":433,"endOffset":438}]},{"id":176,"text":"Next to these Macae are the Gindanes, where every woman wears many leather anklets, because (so it is said) she puts on an anklet for every man with whom she has had intercourse; and she who wears the most is reputed to be the best, because she has been loved by the most men.","places":[{"placeId":"344428","name":"Macae","startOffset":14,"endOffset":19},{"placeId":"344381","name":"Gindanes","startOffset":28,"endOffset":36}]},{"id":177,"text":"There is a headland jutting out into the sea from the land of the Gindanes; on it live the Lotus Eaters, whose only fare is the lotus.58 The lotus fruit is the size of a mastich-berry: it has a sweet taste like the fruit of a date-palm; the Lotus Eaters not only eat it, but make wine of it.","places":[{"placeId":"344381","name":"Gindanes","startOffset":66,"endOffset":74},{"placeId":"344425","name":"Lotus Eaters","startOffset":91,"endOffset":103},{"placeId":"344425","name":"Lotus Eaters","startOffset":241,"endOffset":253}]},{"id":178,"text":"Next to these along the coast are the Machlyes, who also use the lotus, but less than the aforesaid people. Their country reaches to a great river called the Triton,59 which empties into the great Tritonian lake, in which is an island called Phla. It is said that the Lacedaemonians were told by an oracle to plant a settlement on this island.","places":[{"placeId":"828285","name":"Machlyes","startOffset":38,"endOffset":46},{"placeId":"334616","name":"Tritonian lake","startOffset":197,"endOffset":211},{"placeId":"570406","name":"Lacedaemonians","startOffset":268,"endOffset":282}]},{"id":179,"text":"The following story is also told: it is said that Jason, when the Argo had been built at the foot of Pelion, put aboard besides a hecatomb a bronze tripod, and set out to sail around the Peloponnese, to go to Delphi. [2] But when he was off Malea, a north wind caught and carried him away to Libya; and before he saw land, he came into the shallows of the Tritonian lake. There, while he could find no way out yet, Triton (the story goes) appeared to him and told Jason to give him the tripod, promising to show the sailors the channel and send them on their way unharmed. [3] Jason did, and Triton then showed them the channel out of the shallows and set the tripod in his own temple; but first he prophesied over it, declaring the whole matter to Jason's comrades: namely, that should any descendant of the Argo's crew take away the tripod, then a hundred Greek cities would be founded on the shores of the Tritonian lake. Hearing this (it is said) the Libyan people of the country hid the tripod.","places":[{"placeId":"481955","name":"Pelion","startOffset":101,"endOffset":107},{"placeId":"570577","name":"Peloponnese","startOffset":187,"endOffset":198},{"placeId":"540726","name":"Delphi","startOffset":209,"endOffset":215},{"placeId":"570455","name":"Malea","startOffset":241,"endOffset":246},{"placeId":"991375","name":"Libya","startOffset":292,"endOffset":297},{"placeId":"334616","name":"Tritonian lake","startOffset":356,"endOffset":370},{"placeId":"geonames-390903","name":"Greek","startOffset":858,"endOffset":863},{"placeId":"334616","name":"Tritonian lake","startOffset":909,"endOffset":923},{"placeId":"716588","name":"Libyan","startOffset":955,"endOffset":961}]},{"id":180,"text":"Next to these Machlyes are the Auseans; these and the Machlyes, separated by the Triton, live on the shores of the Tritonian lake. The Machlyes wear their hair long behind, the Auseans in front. [2] They celebrate a yearly festival of Athena, where their maidens are separated into two bands and fight each other with stones and sticks, thus (they say) honoring in the way of their ancestors that native goddess whom we call Athena. Maidens who die of their wounds are called false virgins. [3] Before the girls are set fighting, the whole people choose the fairest maid, and arm her with a Corinthian helmet and Greek panoply, to be then mounted on a chariot and drawn all along the lake shore. [4] With what armor they equipped their maidens before Greeks came to live near them, I cannot say; but I suppose the armor was Egyptian; for I maintain that the Greeks took their shield and helmet from Egypt. [5] As for Athena, they say that she was daughter of Poseidon and the Tritonian lake, and that, being for some reason angry at her father, she gave herself to Zeus, who made her his own daughter. Such is their tale. The intercourse of men and women there is promiscuous; they do not cohabit but have intercourse like cattle. [6] When a woman's child is well grown, the men assemble within three months and the child is adjudged to be that man's whom it is most like.","places":[{"placeId":"828285","name":"Machlyes","startOffset":14,"endOffset":22},{"placeId":"376760","name":"Auseans","startOffset":31,"endOffset":38},{"placeId":"828285","name":"Machlyes","startOffset":54,"endOffset":62},{"placeId":"334616","name":"Tritonian lake","startOffset":115,"endOffset":129},{"placeId":"828285","name":"Machlyes","startOffset":135,"endOffset":143},{"placeId":"376760","name":"Auseans","startOffset":177,"endOffset":184},{"placeId":"570182","name":"Corinthian","startOffset":591,"endOffset":601},{"placeId":"geonames-390903","name":"Greek","startOffset":613,"endOffset":618},{"placeId":"geonames-390903","name":"Greeks","startOffset":751,"endOffset":757},{"placeId":"981503","name":"Egyptian","startOffset":824,"endOffset":832},{"placeId":"geonames-390903","name":"Greeks","startOffset":858,"endOffset":864},{"placeId":"981503","name":"Egypt","startOffset":899,"endOffset":904},{"placeId":"334616","name":"Tritonian lake","startOffset":976,"endOffset":990}]},{"id":181,"text":"I have now described all the nomadic Libyans who live on the coast. Farther inland than these is that Libyan country which is haunted by wild beasts, and beyond this wild beasts' haunt runs a ridge of sand that stretches from Thebes of Egypt to the Pillars of Heracles.60 [2] At intervals of about ten days' journey along this ridge there are masses of great lumps of salt in hills; on the top of every hill, a fountain of cold sweet water shoots up from the midst of the salt; men live around it who are farthest away toward the desert and inland from the wild beasts' country. The first on the journey from Thebes , ten days distant from there, are the Ammonians, who follow the worship of the Zeus of Thebes ; for, as I have said before, the image of Zeus at Thebes has the head of a ram. [3] They have another spring of water besides, which is warm at dawn, and colder at market-time, and very cold at noon; [4] and it is then that they water their gardens; as the day declines, the coldness abates, until at sunset the water grows warm. It becomes ever hotter and hotter until midnight, and then it boils and bubbles; after midnight it becomes ever cooler until dawn. This spring is called the Spring of the Sun.","places":[{"placeId":"716588","name":"Libyans","startOffset":37,"endOffset":44},{"placeId":"716588","name":"Libyan","startOffset":102,"endOffset":108},{"placeId":"786017","name":"Thebes","startOffset":226,"endOffset":232},{"placeId":"1001943","name":"Egypt","startOffset":236,"endOffset":241},{"placeId":"275614","name":"Pillars of Heracles","startOffset":249,"endOffset":268},{"placeId":"786017","name":"Thebes","startOffset":609,"endOffset":615},{"placeId":"716520","name":"Ammonians","startOffset":655,"endOffset":664},{"placeId":"786017","name":"Thebes","startOffset":704,"endOffset":710},{"placeId":"786017","name":"Thebes","startOffset":762,"endOffset":768}]},{"id":182,"text":"At a distance of ten days' journey again from the Ammonians along the sandy ridge, there is a hill of salt like that of the Ammonians, and springs of water, where men live; this place is called Augila; it is to this that the Nasamones come to gather palm-fruit.","places":[{"placeId":"716520","name":"Ammonians","startOffset":50,"endOffset":59},{"placeId":"716520","name":"Ammonians","startOffset":124,"endOffset":133},{"placeId":"373742","name":"Augila","startOffset":194,"endOffset":200},{"placeId":"373861","name":"Nasamones","startOffset":225,"endOffset":234}]},{"id":183,"text":"After ten days' journey again from Augila there is yet another hill of salt and springs of water and many fruit-bearing palms, as at the other places; men live there called Garamantes, an exceedingly great nation, who sow in earth which they have laid on the salt. [2] The shortest way to the Lotus Eaters' country is from here, thirty days' journey distant. Among the Garamantes are the cattle that go backward as they graze, the reason being that their horns curve forward; [3] therefore, not being able to go forward, since the horns would stick in the ground, they walk backward grazing. Otherwise, they are like other cattle, except that their hide is thicker and harder to the touch. [4] These Garamantes go in their four-horse chariots chasing the cave-dwelling Ethiopians: for the Ethiopian cave-dwellers are swifter of foot than any men of whom tales are brought to us. They live on snakes and lizards and such-like creeping things. Their speech is like no other in the world: it is like the squeaking of bats.","places":[{"placeId":"373742","name":"Augila","startOffset":35,"endOffset":41},{"placeId":"354116","name":"Garamantes","startOffset":173,"endOffset":183},{"placeId":"344425","name":"Lotus Eaters","startOffset":293,"endOffset":305},{"placeId":"354116","name":"Garamantes","startOffset":369,"endOffset":379},{"placeId":"354116","name":"Garamantes","startOffset":700,"endOffset":710},{"placeId":"334481","name":"Ethiopians","startOffset":769,"endOffset":779},{"placeId":"334481","name":"Ethiopian","startOffset":789,"endOffset":798}]},{"id":184,"text":"Another ten days' journey from the Garamantes there is again a salt hill and water, where men live called Atarantes. These are the only men whom we know who have no names; for the whole people are called Atarantes, but no man has a name of his own. [2] When the sun is high, they curse and very foully revile him, because his burning heat afflicts their people and their land. [3] After another ten days' journey there is again a hill of salt, and water, and men living there. Near to this salt is a mountain called Atlas, whose shape is slender and conical; and it is said to be so high that its heights cannot be seen, for clouds are always on them winter and summer. The people of the country call it the pillar of heaven. [4] These men get their name, which is Atlantes, from this mountain. It is said that they eat no living creature, and see no dreams in their sleep.","places":[{"placeId":"354116","name":"Garamantes","startOffset":35,"endOffset":45},{"placeId":"hestia-atlas","name":"Atlas","startOffset":516,"endOffset":521}]},{"id":185,"text":"I know and can tell the names of all the peoples that live on the ridge as far as the Atlantes, but no farther than that. But I know this, that the ridge reaches as far as the Pillars of Heracles and beyond them. [2] There is a mine of salt on it every ten days' journey, and men live there. Their houses are all built of blocks of the salt; for these are parts of Libya where no rain falls; for the walls, being of salt, could not stand firm if there were rain. [3] The salt there is both white and purple. Beyond this ridge, the southern and inland parts of Libya are desolate and waterless: there are no wild beasts, no rain, no forests; this region is wholly without moisture.","places":[{"placeId":"275614","name":"Pillars of Heracles","startOffset":176,"endOffset":195},{"placeId":"991375","name":"Libya","startOffset":365,"endOffset":370},{"placeId":"716588","name":"Libya","startOffset":560,"endOffset":565}]},{"id":186,"text":"Thus from Egypt to the Tritonian lake, the Libyans are nomads that eat meat and drink milk; for the same reason as the Egyptians too profess, they will not touch the flesh of cows; and they rear no swine. [2] The women of Cyrene, too, consider it wrong to eat cows' flesh, because of the Isis of Egypt; and they even honor her with fasts and festivals; and the Barcaean women refuse to eat swine too, as well as cows.","places":[{"placeId":"1001943","name":"Egypt","startOffset":10,"endOffset":15},{"placeId":"334616","name":"Tritonian lake","startOffset":23,"endOffset":37},{"placeId":"716588","name":"Libyans","startOffset":43,"endOffset":50},{"placeId":"981503","name":"Egyptians","startOffset":119,"endOffset":128},{"placeId":"373778","name":"Cyrene","startOffset":222,"endOffset":228},{"placeId":"981503","name":"Egypt","startOffset":296,"endOffset":301},{"placeId":"373750","name":"Barcaean","startOffset":361,"endOffset":369}]},{"id":187,"text":"Thus it is with this region. But west of the Tritonian lake the Libyans are not nomads; they do not follow the same customs, or treat their children as the nomads do. [2] For the practice of many Libyan nomads (I cannot say absolutely whether it is the practice of all) is to take their children when four years old, and to burn the veins of their scalps or sometimes of their temples with grease of sheep's wool, so that the children may never afterward be afflicted by phlegm draining from the head. [3] They say that this makes their children quite healthy. In fact, the Libyans are the healthiest of all men whom we know; whether it is because of this practice, I cannot say absolutely; but they certainly are healthy. When the children smart from the pain of the burning, the Libyans have found a remedy; they soothe them by applications of goats' urine. This is what the Libyans themselves say.","places":[{"placeId":"334616","name":"Tritonian lake","startOffset":45,"endOffset":59},{"placeId":"716588","name":"Libyans","startOffset":64,"endOffset":71},{"placeId":"716588","name":"Libyan","startOffset":196,"endOffset":202},{"placeId":"716588","name":"Libyans","startOffset":574,"endOffset":581},{"placeId":"716588","name":"Libyans","startOffset":781,"endOffset":788},{"placeId":"716588","name":"Libyans","startOffset":877,"endOffset":884}]},{"id":188,"text":"The nomads' way of sacrificing is to cut a piece from the victim's ear for first-fruits and throw it over the house; then they wring the victim's neck. They sacrifice to no gods except the sun and moon; that is, this is the practice of the whole nation; but the dwellers by the Tritonian lake sacrifice to Athena chiefly, and next to Triton and Poseidon.","places":[{"placeId":"334616","name":"Tritonian lake","startOffset":278,"endOffset":292}]},{"id":189,"text":"It would seem that the robe and aegis of the images of Athena were copied by the Greeks from the Libyan women; for except that Libyan women dress in leather, and that the tassels of their goatskin cloaks are not snakes but thongs of hide, in everything else their equipment is the same. [2] And in fact, the very name betrays that the attire of the statues of Pallas has come from Libya; for Libyan women wear the hairless tasselled aegea over their dress, colored with madder, and the Greeks have changed the name of these aegeae into their aegides.61 [3] Furthermore, in my opinion the ceremonial chant62 first originated in Libya: for the women of that country chant very tunefully. And it is from the Libyans that the Greeks have learned to drive four-horse chariots.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":81,"endOffset":87},{"placeId":"716588","name":"Libyan","startOffset":97,"endOffset":103},{"placeId":"716588","name":"Libyan","startOffset":127,"endOffset":133},{"placeId":"716588","name":"Libya","startOffset":381,"endOffset":386},{"placeId":"716588","name":"Libyan","startOffset":392,"endOffset":398},{"placeId":"geonames-390903","name":"Greeks","startOffset":488,"endOffset":494},{"placeId":"716588","name":"Libya","startOffset":631,"endOffset":636},{"placeId":"716588","name":"Libyans","startOffset":709,"endOffset":716},{"placeId":"geonames-390903","name":"Greeks","startOffset":726,"endOffset":732}]},{"id":190,"text":"The dead are buried by the nomads in Greek fashion, except by the Nasamones. They bury their dead sitting, being careful to make the dying man sit when he releases his spirit, and not die lying supine. Their dwellings are constructed of asphodel stalks63 twined about reeds; they can be carried here and there. Such are the Libyan customs.","places":[{"placeId":"geonames-390903","name":"Greek","startOffset":37,"endOffset":42},{"placeId":"373861","name":"Nasamones","startOffset":66,"endOffset":75},{"placeId":"716588","name":"Libyan","startOffset":324,"endOffset":330}]},{"id":191,"text":"West of the Triton river and next to the Aseans begins the country of Libyans who cultivate the soil and possess houses; they are called Maxyes; they wear their hair long on the right side of their heads and shave the left, and they paint their bodies with vermilion. [2] These claim descent from the men who came from Troy. Their country, and the rest of the western part of Libya, is much fuller of wild beasts and more wooded than the country of the nomads. [3] For the eastern region of Libya, which the nomads inhabit, is low-lying and sandy as far as the Triton river; but the land west of this, where the farmers live, is exceedingly mountainous and wooded and full of wild beasts. [4] In that country are the huge snakes and the lions, and the elephants and bears and asps, the horned asses, the dog-headed and the headless men that have their eyes in their chests, as the Libyans say, and the wild men and women, besides many other creatures not fabulous.","places":[{"placeId":"716588","name":"Libyans","startOffset":70,"endOffset":77},{"placeId":"716588","name":"Libya","startOffset":376,"endOffset":381},{"placeId":"716588","name":"Libya","startOffset":491,"endOffset":496},{"placeId":"716588","name":"Libyans","startOffset":881,"endOffset":888}]},{"id":192,"text":"But in the nomads' country there are none of these; but there are others, white-rumped antelopes, gazelles, hartebeest, asses, not the horned asses, but those that are called undrinking (for indeed they never drink), the oryx, whose horns are made the horns of the lyre (this is a beast the size of a bull), [2] foxes, hyenas, porcupines, wild rams, the dictys, jackals, panthers, the borys,64 land crocodiles sixty inches long, very like lizards, and ostriches and little one-horned serpents; all these beasts besides those that are elsewhere too, except deer and wild boar; of these two kinds there are none at all in Libya. [3] There are in this country three kinds of mice, the two-footed,65 the zegeries (this is a Libyan word, meaning in our language hills), and the bristly-haired, as they are called. There are also weasels found in the silphium, very like to the weasels of Tartessus. So many are the wild creatures of the nomads' country, as far as by our utmost enquiry we have been able to learn.","places":[{"placeId":"991375","name":"Libya","startOffset":622,"endOffset":627},{"placeId":"716588","name":"Libyan","startOffset":724,"endOffset":730},{"placeId":"256468","name":"Tartessus","startOffset":889,"endOffset":898}]},{"id":193,"text":"Next to the Maxyes of Libya are the Zauekes, whose women drive their chariots to war.","places":[{"placeId":"991375","name":"Libya","startOffset":22,"endOffset":27},{"placeId":"329253","name":"Zauekes","startOffset":36,"endOffset":43}]},{"id":194,"text":"Next to these are the Gyzantes, where much honey is made by bees, and much more yet (so it is said) by craftsmen.66 It is certain that they all paint themselves with vermilion and eat apes, with which their mountains swarm.","places":[{"placeId":"329215","name":"Gyzantes","startOffset":22,"endOffset":30}]},{"id":195,"text":"Off their coast (the Carthaginians say) lies an island called Cyrauis, twenty-five miles long and narrow across, accessible from the mainland; it is full of olives and vines. [2] It is said that there is a lake on this island from which the maidens of the country draw gold-dust out of the mud on feathers smeared with pitch. I do not know whether this is true; I just write what is said. But all things are possible; for I myself saw pitch drawn from the water of a pool in Zacynthus. [3] The pools there are numerous; the greatest of them is seventy feet long and broad, and twelve feet deep. Into this they drop a pole with a myrtle branch fastened to its end, and bring up pitch on the myrtle, smelling like asphalt, and for the rest better than the pitch of Pieria. Then they pour it into a pit that they have dug near the pool; and when a fair amount is collected there, they fill their vessels from the pit. [4] Whatever falls into the pool is carried under the ground and appears again in the sea, which is about a half a mile distant from the pool. So, then, the story that comes from the island lying off the Libyan coast is like the truth, too.","places":[{"placeId":"314921","name":"Carthaginians","startOffset":21,"endOffset":34},{"placeId":"531154","name":"Zacynthus","startOffset":475,"endOffset":484},{"placeId":"491696","name":"Pieria","startOffset":763,"endOffset":769},{"placeId":"716588","name":"Libyan","startOffset":1119,"endOffset":1125}]},{"id":196,"text":"Another story is told by the Carthaginians. There is a place in Libya, they say, where men live beyond the Pillars of Heracles; they come here and unload their cargo; then, having laid it in order along the beach, they go aboard their ships and light a smoking fire. The people of the country see the smoke, and, coming to the sea, they lay down gold to pay for the cargo, and withdraw from the wares. [2] Then the Carthaginians disembark and examine the gold; if it seems to them a fair price for their cargo, they take it and go away; but if not, they go back aboard and wait, and the people come back and add more gold until the sailors are satisfied. [3] In this transaction, it is said, neither party defrauds the other: the Carthaginians do not touch the gold until it equals the value of their cargo, nor do the people touch the cargo until the sailors have taken the gold.","places":[{"placeId":"314921","name":"Carthaginians","startOffset":29,"endOffset":42},{"placeId":"991375","name":"Libya","startOffset":64,"endOffset":69},{"placeId":"275614","name":"Pillars of Heracles","startOffset":107,"endOffset":126},{"placeId":"314921","name":"Carthaginians","startOffset":415,"endOffset":428},{"placeId":"314921","name":"Carthaginians","startOffset":730,"endOffset":743}]},{"id":197,"text":"These are all the Libyans whom we can name, and the majority of their kings cared nothing for the king of the Medes at the time of which I write, nor do they care for him now. [2] I have this much further to say of this country: four nations and no more, as far as we know, inhabit it, two of which are aboriginal and two not; the Libyans in the north and the Ethiopians in the south of Libya are aboriginal; the Phoenicians and Greeks are later settlers.","places":[{"placeId":"716588","name":"Libyans","startOffset":18,"endOffset":25},{"placeId":"903080","name":"Medes","startOffset":110,"endOffset":115},{"placeId":"716588","name":"Libyans","startOffset":331,"endOffset":338},{"placeId":"39274","name":"Ethiopians","startOffset":360,"endOffset":370},{"placeId":"716588","name":"Libya","startOffset":387,"endOffset":392},{"placeId":"678334","name":"Phoenicians","startOffset":413,"endOffset":424},{"placeId":"geonames-390903","name":"Greeks","startOffset":429,"endOffset":435}]},{"id":198,"text":"In my opinion, there is in no part of Libya any great excellence for which it should be compared to Asia or Europe, except in the region which is called by the same name as its river, Cinyps. [2] But this region is a match for the most fertile farmland in the world, nor is it at all like to the rest of Libya. For the soil is black and well-watered by springs, and has no fear of drought, nor is it harmed by drinking excessive showers (there is rain in this part of Libya). Its yield of grain is of the same measure as in the land of Babylon. [3] The land inhabited by the Euhesperitae is also good; it yields at the most a hundredfold; but the land of the Cinyps region yields three hundredfold.","places":[{"placeId":"991375","name":"Libya","startOffset":38,"endOffset":43},{"placeId":"344414","name":"Cinyps","startOffset":184,"endOffset":190},{"placeId":"991375","name":"Libya","startOffset":304,"endOffset":309},{"placeId":"716588","name":"Libya","startOffset":468,"endOffset":473},{"placeId":"893951","name":"Babylon","startOffset":536,"endOffset":543},{"placeId":"344414","name":"Cinyps","startOffset":659,"endOffset":665}]},{"id":199,"text":"The country of Cyrene, which is the highest part of the Libya that the nomads inhabit, has the marvellous advantage of three harvest seasons. The fruits of the earth are ripe for reaping and picking on the coast first; when these have been gathered, the middle region above the coast, which they call the Hills, is ripe for gathering; [2] and no sooner has this yield of the middle country been gathered than the highest-lying crops are mellow and ripe, so that the latest fruits of the earth are coming in when the earliest are already spent by way of food and drink. Thus the Cyrenaeans have a harvest lasting eight months. Enough of these matters, then.","places":[{"placeId":"373778","name":"Cyrene","startOffset":15,"endOffset":21},{"placeId":"991375","name":"Libya","startOffset":56,"endOffset":61},{"placeId":"373778","name":"Cyrenaeans","startOffset":578,"endOffset":588}]},{"id":200,"text":"Now when the Persians that Aryandes sent from Egypt to avenge Pheretime came to Barce,67 they laid siege to the city, demanding the surrender of those who were guilty of the murder of Arcesilaus: but the Barcaeans, whose whole people were accessory to the deed, would not yield. [2] The Persians besieged Barce for nine months, digging underground passages leading to the walls, and making violent assaults. As for the tunnels, a blacksmith discovered them by the means of a bronze shield, and this is how he found them: carrying the shield around the inner side of the walls, he struck it against the ground of the city; [3] all the other places which he struck returned a dull sound; but where there were tunnels, the bronze of the shield rang clear. Here the Barcaeans made a counter-tunnel and killed those Persians who were digging underground. Thus the tunnels were discovered, and the assaults were repelled by the townsfolk.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":13,"endOffset":21},{"placeId":"1001943","name":"Egypt","startOffset":46,"endOffset":51},{"placeId":"373750","name":"Barce","startOffset":80,"endOffset":85},{"placeId":"373750","name":"Barcaeans","startOffset":204,"endOffset":213},{"placeId":"geonames-130758","name":"Persians","startOffset":287,"endOffset":295},{"placeId":"373750","name":"Barce","startOffset":305,"endOffset":310},{"placeId":"373750","name":"Barcaeans","startOffset":762,"endOffset":771},{"placeId":"geonames-130758","name":"Persians","startOffset":811,"endOffset":819}]},{"id":201,"text":"When much time had been spent and many on both sides (not less of the Persians than of their enemies) slain, Amasis the general of the foot soldiers devised a plot, knowing that Barce could not be taken by force but might be taken by guile: he dug by night a wide trench and laid frail planks across it, which he then covered over with a layer of earth level with the ground about it. [2] Then when day came, he invited the Barcaeans to confer with him, and they readily consented; at last all agreed to conditions of peace. This was done thus: standing on the hidden trench, they gave and accepted a sworn assurance that their treaty would hold good while the ground where they stood was unchanged; the Barcaeans promised to pay a due sum to the king, and the Persians to do the Barcaeans no harm. [3] When the sworn agreement was made, the townsfolk, trusting in it and opening all their gates, themselves came out of the city, and let all their enemies who so desired enter within the walls. But the Persians broke down the hidden bridge and ran into the city. They broke down the bridge that they had made, so that they might keep the oath which they had sworn to the Barcaeans: namely, that this treaty would hold good for as long as the ground remained as it was; but if they broke the bridge the treaty held good no longer.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":70,"endOffset":78},{"placeId":"373750","name":"Barce","startOffset":178,"endOffset":183},{"placeId":"373750","name":"Barcaeans","startOffset":424,"endOffset":433},{"placeId":"373750","name":"Barcaeans","startOffset":704,"endOffset":713},{"placeId":"geonames-130758","name":"Persians","startOffset":761,"endOffset":769},{"placeId":"373750","name":"Barcaeans","startOffset":780,"endOffset":789},{"placeId":"geonames-130758","name":"Persians","startOffset":1003,"endOffset":1011},{"placeId":"373750","name":"Barcaeans","startOffset":1172,"endOffset":1181}]},{"id":202,"text":"When they were delivered to her by the Persians, Pheretime took the most guilty of the Barcaeans and set them impaled around the top of the wall; the breasts of their women she cut off and planted around the wall in like manner. [2] As for the rest of the Barcaeans, she told the Persians to take them as their booty, except those who were of the house of Battus and not accessory to the murder: to these she turned over the city.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":39,"endOffset":47},{"placeId":"373750","name":"Barcaeans","startOffset":87,"endOffset":96},{"placeId":"373750","name":"Barcaeans","startOffset":256,"endOffset":265},{"placeId":"geonames-130758","name":"Persians","startOffset":280,"endOffset":288}]},{"id":203,"text":"The Persians thus enslaved the rest of the Barcaeans, and went home. When they appeared before the city of Cyrene, the Cyrenaeans let them pass through their city, so that a certain oracle might be fulfilled. [2] As the army was passing through, Badres the admiral of the fleet was for taking the city, but Amasis the general of the land army would not consent, saying that he had been sent against Barce and no other Greek city; at last they passed through Cyrene and camped on the hill of Lycaean Zeus; there they regretted not having taken the city, and tried to enter it again, but the Cyrenaeans would not let them. Then, although no one attacked them, panic seized the Persians, and they fled to a place seven miles distant and camped there; and while they were there, a messenger from Aryandes came to the camp asking them to return. The Persians asked and received from the Cyrenaeans provisions for their march, after which they left to go to Egypt; [4] but then they fell into the hands of the Libyans, who killed the laggards and stragglers of the army for the sake of their garments and possessions; until at last they came to Egypt.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":4,"endOffset":12},{"placeId":"373750","name":"Barcaeans","startOffset":43,"endOffset":52},{"placeId":"373778","name":"Cyrene","startOffset":107,"endOffset":113},{"placeId":"373778","name":"Cyrenaeans","startOffset":119,"endOffset":129},{"placeId":"373750","name":"Barce","startOffset":399,"endOffset":404},{"placeId":"geonames-390903","name":"Greek","startOffset":418,"endOffset":423},{"placeId":"373778","name":"Cyrene","startOffset":458,"endOffset":464},{"placeId":"373778","name":"Cyrenaeans","startOffset":590,"endOffset":600},{"placeId":"geonames-130758","name":"Persians","startOffset":675,"endOffset":683},{"placeId":"geonames-130758","name":"Persians","startOffset":845,"endOffset":853},{"placeId":"373778","name":"Cyrenaeans","startOffset":882,"endOffset":892},{"placeId":"1001943","name":"Egypt","startOffset":952,"endOffset":957},{"placeId":"716588","name":"Libyans","startOffset":1004,"endOffset":1011},{"placeId":"981503","name":"Egypt","startOffset":1139,"endOffset":1144}]},{"id":204,"text":"This Persian force advanced as far as Euhesperidae in Libya and no farther. As for the Barcaeans whom they had taken for slaves, they carried them from Egypt into banishment and brought them to the king, and Darius gave them a town of Bactria to live in. They gave this town the name Barce, and it remained an inhabited place in Bactria until my own lifetime.","places":[{"placeId":"geonames-130758","name":"Persian","startOffset":5,"endOffset":12},{"placeId":"373827","name":"Euhesperidae","startOffset":38,"endOffset":50},{"placeId":"991375","name":"Libya","startOffset":54,"endOffset":59},{"placeId":"373750","name":"Barcaeans","startOffset":87,"endOffset":96},{"placeId":"1001943","name":"Egypt","startOffset":152,"endOffset":157},{"placeId":"971705","name":"Bactria","startOffset":235,"endOffset":242},{"placeId":"373750","name":"Barce","startOffset":284,"endOffset":289},{"placeId":"971705","name":"Bactria","startOffset":329,"endOffset":336}]},{"id":205,"text":"But Pheretime did not end well, either. For as soon as she had revenged herself on the Barcaeans and returned to Egypt, she met an awful death. For while still alive she teemed with maggots: thus does over-brutal human revenge invite retribution from the gods. That of Pheretime, daughter of Battus, against the Barcaeans was revenge of this nature and this brutality.HerodotusThe Histories","places":[{"placeId":"373750","name":"Barcaeans","startOffset":87,"endOffset":96},{"placeId":"1001943","name":"Egypt","startOffset":113,"endOffset":118},{"placeId":"373750","name":"Barcaeans","startOffset":312,"endOffset":321}]}]`)},5:{id:5,title:"Book 5: Terpsichore",chapters:JSON.parse(`[{"id":1,"text":"Those Persians whom Darius had left in Europe under the command of Megabazus, finding the Perinthians unwilling to be Darius' subjects, subdued them before any others of the people of the Hellespont. These Perinthians had already been roughly handled by the Paeonians. [2] For the oracle of the god ordered the Paeonians from the Strymon to march against Perinthus, and if the Perinthians, who were encamped opposite them, should call to them, crying out their name, then to attack them. If, however, there were no such call, they were not to attack. The Paeonians acted accordingly. When the Perinthians set up camp in front of their city, the armies then challenged each other to a threefold duel, in which man was matched against man, horse against horse, and dog against dog. [3] The Perinthians were victorious in two of the combats and raised the cry of Paean in their joy. The Paeonians reasoned that this was what the oracle had spoken of and must have said to each other, This is surely the fulfillment of the prophecy; now it is time for us to act. Accordingly, the Paeonians set upon the Perinthians and won a great victory, leaving few of their enemies alive.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":6,"endOffset":14},{"placeId":"491701","name":"Perinthians","startOffset":90,"endOffset":101},{"placeId":"501434","name":"Hellespont","startOffset":188,"endOffset":198},{"placeId":"511357","name":"Perinthians","startOffset":206,"endOffset":217},{"placeId":"491680","name":"Paeonians","startOffset":258,"endOffset":267},{"placeId":"491680","name":"Paeonians","startOffset":311,"endOffset":320},{"placeId":"501629","name":"Strymon","startOffset":330,"endOffset":337},{"placeId":"511357","name":"Perinthus","startOffset":355,"endOffset":364},{"placeId":"511357","name":"Perinthians","startOffset":377,"endOffset":388},{"placeId":"491680","name":"Paeonians","startOffset":555,"endOffset":564},{"placeId":"511357","name":"Perinthians","startOffset":593,"endOffset":604},{"placeId":"511357","name":"Perinthians","startOffset":788,"endOffset":799},{"placeId":"491680","name":"Paeonians","startOffset":886,"endOffset":895},{"placeId":"491680","name":"Paeonians","startOffset":1080,"endOffset":1089},{"placeId":"511357","name":"Perinthians","startOffset":1103,"endOffset":1114}]},{"id":2,"text":"This, then, is what the Perinthians had previously suffered at the hands of the Paeonians. Now they fought like brave men for their liberty, but Megabazus and the Persians overcame them by weight of numbers. [2] When Perinthus had been taken, Megabazus marched his army through Thrace, subduing to the king's will every city and every people of that region. For this, the conquest of Thrace, was the charge given him by Darius.","places":[{"placeId":"511357","name":"Perinthians","startOffset":24,"endOffset":35},{"placeId":"491680","name":"Paeonians","startOffset":80,"endOffset":89},{"placeId":"geonames-130758","name":"Persians","startOffset":163,"endOffset":171},{"placeId":"511357","name":"Perinthus","startOffset":217,"endOffset":226},{"placeId":"1001889","name":"Thrace","startOffset":278,"endOffset":284},{"placeId":"1001889","name":"Thrace","startOffset":384,"endOffset":390}]},{"id":3,"text":"The Thracians are the biggest nation in the world, next to the Indians. If they were under one ruler, or united, they would, in my judgment, be invincible and the strongest nation on earth. Since, however, there is no way or means to bring this about, they are weak. [2] The Thracians have many names, each tribe according to its region, but they are very similar in all their customs, save the Getae, the Trausi, and those who dwell above the Crestonaeans.","places":[{"placeId":"1001889","name":"Thracians","startOffset":4,"endOffset":13},{"placeId":"50004","name":"Indians","startOffset":63,"endOffset":70},{"placeId":"1001889","name":"Thracians","startOffset":275,"endOffset":284},{"placeId":"216817","name":"Getae","startOffset":395,"endOffset":400},{"placeId":"491643","name":"Crestonaeans","startOffset":444,"endOffset":456}]},{"id":4,"text":"As for the Getae, who claim to be immortal, I have already given an account of their practices.1 The Trausi, who in all else conform to the customs of other Thracians, do as I will show at the times of birth and death. [2] When a child is born, the kinsmen sit around it and lament all the ills that it must endure from its birth onward, recounting all the sorrows of men. The dead, however, they bury with celebration and gladness, asserting that he is rid of so many ills and has achieved a state of complete blessedness.","places":[{"placeId":"216817","name":"Getae","startOffset":11,"endOffset":16},{"placeId":"1001889","name":"Thracians","startOffset":157,"endOffset":166}]},{"id":5,"text":"Those who dwell above the Crestonaeans have yet other practices. Each man has many wives, and at his death there is both great rivalry among his wives and eager contention on their friends' part to prove which wife was best loved by her husband. She to whom the honor is adjudged is praised by men and women alike and then slain over the tomb by her nearest of kin. After the slaying she is buried with the husband. The rest of the wives are greatly displeased by this, believing themselves to be deeply dishonored.","places":[{"placeId":"491643","name":"Crestonaeans","startOffset":26,"endOffset":38}]},{"id":6,"text":"Among the rest of the Thracians, it is the custom to sell their children for export and to take no care of their maidens, allowing them to have intercourse with any man they wish. Their wives, however, they strictly guard, and buy them for a price from the parents. [2] To be tattooed is a sign of noble birth, while to bear no such marks is for the baser sort. The idler is most honored, the tiller of the soil most scorned; he is held in highest honor who lives by war and robbery.","places":[{"placeId":"1001889","name":"Thracians","startOffset":22,"endOffset":31}]},{"id":7,"text":"These are most notable of their usages. They worship no gods but Ares, Dionysus, and Artemis.2 Their princes, however, unlike the rest of their countrymen, worship Hermes above all gods and swear only by him, claiming him for their ancestor.","places":[]},{"id":8,"text":"The wealthy have the following funeral practices. First they lay out the dead for three days, and after killing all kinds of victims and making lamentation, they feast. After that they do away with the body either by fire or else by burial in the earth, and when they have built a barrow, they initiate all kinds of contests, in which the greatest prizes are offered for the hardest type of single combat. Such are the Thracian funeral rites.","places":[{"placeId":"1001889","name":"Thracian","startOffset":419,"endOffset":427}]},{"id":9,"text":"As for the region which lies north of this country, none can tell with certainty what men dwell there, but what lies beyond the Ister is a desolate and infinitely large tract of land. I can learn of no men dwelling beyond the Ister save certain that are called Sigynnae and wear Median dress. [2] Their horses are said to be covered all over with shaggy hair3 five fingers' breadth long, and to be small, blunt-nosed, and unable to bear men on their backs, but very swift when yoked to chariots. It is for this reason that driving chariots is the usage of the country. These men's borders, it is said, reach almost as far as the Eneti on the Adriatic Sea. [3] They call themselves colonists from Media. How this has come about I myself cannot understand, but all is possible in the long passage of time. However that may be, we know that the Ligyes who dwell inland of Massalia use the word sigynnae for hucksters, and the Cyprians use it for spears.","places":[{"placeId":"226577","name":"Ister","startOffset":128,"endOffset":133},{"placeId":"226577","name":"Ister","startOffset":226,"endOffset":231},{"placeId":"903080","name":"Median","startOffset":279,"endOffset":285},{"placeId":"393374","name":"Eneti","startOffset":629,"endOffset":634},{"placeId":"903080","name":"Media","startOffset":696,"endOffset":701},{"placeId":"383698","name":"Ligyes","startOffset":842,"endOffset":848},{"placeId":"148127","name":"Massalia","startOffset":869,"endOffset":877},{"placeId":"707498","name":"Cyprians","startOffset":925,"endOffset":933}]},{"id":10,"text":"According to the Thracians, all the land beyond the Ister is full of bees, and that by reason of these none can travel there. This, to my mind, is not a credible tale, for those creatures are ill able to bear cold. It appears to me rather that it is by reason of the cold that the northern lands are not inhabited. Such, then, are the stories about this region. Whatever the truth may be, Megabazus made its coastal area subject to the Persians.","places":[{"placeId":"1001889","name":"Thracians","startOffset":17,"endOffset":26},{"placeId":"226577","name":"Ister","startOffset":52,"endOffset":57},{"placeId":"geonames-130758","name":"Persians","startOffset":436,"endOffset":444}]},{"id":11,"text":"As soon as Darius had crossed the Hellespont and come to Sardis,4 he remembered the good service done him by Histiaeus of Miletus and the counsel of Coes the Mytilenaean, and after sending for them to come to Sardis, he offered them a choice of whatever they wanted. [2] Histiaeus, seeing that he was tyrant of Miletus, desired no further sovereignty than that, but asked for Myrcinus5 in the Edonian land so that he might build a city there. This, then, was Histiaeus' choice, but Coes, inasmuch as he was no tyrant but a plain citizen, asked that he might be made tyrant of Mytilene.","places":[{"placeId":"501434","name":"Hellespont","startOffset":34,"endOffset":44},{"placeId":"550867","name":"Sardis","startOffset":57,"endOffset":63},{"placeId":"599799","name":"Miletus","startOffset":122,"endOffset":129},{"placeId":"550763","name":"Mytilenaean","startOffset":158,"endOffset":169},{"placeId":"550867","name":"Sardis","startOffset":209,"endOffset":215},{"placeId":"599799","name":"Miletus","startOffset":311,"endOffset":318},{"placeId":"501520","name":"Myrcinus","startOffset":376,"endOffset":384},{"placeId":"501409","name":"Edonian","startOffset":393,"endOffset":400},{"placeId":"geonames-256866","name":"Mytilene","startOffset":576,"endOffset":584}]},{"id":12,"text":"When the wishes of each had been granted, they made their way to the places of their choice, but Darius, as it fell out, saw a sight which put it in his mind to bid Megabazus take the Paeonians and take them from their homes out of Europe into Asia. There were two Paeonians, Pigres and Mantyes, who themselves desired to be rulers of their countrymen. When Darius had crossed into Asia, they came to Sardis, bringing with them their sister, a tall and beautiful woman. [2] There, waiting till Darius should be sitting in state in the suburb of the Lydian city, they put on their sister the best adornment they had, and sent her to draw water, bearing a vessel on her head, leading a horse by the bridle and spinning flax at the same time. [3] Darius took note of the woman as she passed by him, for what she did was not in the manner of the Persians or Lydians or any of the peoples of Asia. Having taken note of this, he sent some of his guards, bidding them watch what the woman would do with the horse. [4] They, accordingly, followed behind her, and she, coming to the river, watered the horse. When she had done this and had filled her vessel with water, she passed back again by the same way, bearing the water on her head, leading the horse on her arm, and plying her distaff.","places":[{"placeId":"491680","name":"Paeonians","startOffset":184,"endOffset":193},{"placeId":"491680","name":"Paeonians","startOffset":265,"endOffset":274},{"placeId":"550867","name":"Sardis","startOffset":401,"endOffset":407},{"placeId":"550701","name":"Lydian","startOffset":549,"endOffset":555},{"placeId":"geonames-130758","name":"Persians","startOffset":842,"endOffset":850},{"placeId":"550701","name":"Lydians","startOffset":854,"endOffset":861}]},{"id":13,"text":"Marvelling at what he heard from his watchers and what he saw for himself, Darius bade the woman be brought before him. When she had been brought, her brothers, who watched all this from a place nearby, came too. Darius asked of what nation she was, and the young man told him that they were Paeonians and that she was their sister. [2] But who, he answered, are the Paeonians, and where do they dwell, and with what intent have you come to Sardis? They told him, that they had come to be his men, that the towns of Paeonia lay on the Strymon, a river not far from the Hellespont, and that they were colonists from the Teucrians of Troy. [3] So they told him all this, and the king asked them if all the women of their country were so industrious. To this too they very readily answered (for it was for this very purpose that they had come), that it was indeed so.","places":[{"placeId":"491680","name":"Paeonians","startOffset":292,"endOffset":301},{"placeId":"491680","name":"Paeonians","startOffset":370,"endOffset":379},{"placeId":"550867","name":"Sardis","startOffset":444,"endOffset":450},{"placeId":"491680","name":"Paeonia","startOffset":520,"endOffset":527},{"placeId":"501629","name":"Strymon","startOffset":539,"endOffset":546},{"placeId":"501434","name":"Hellespont","startOffset":573,"endOffset":583},{"placeId":"550547","name":"Teucrians","startOffset":623,"endOffset":632},{"placeId":"550595","name":"Troy","startOffset":636,"endOffset":640}]},{"id":14,"text":"Then Darius wrote a letter to Megabazus, whom he had left as his general in Thrace, bidding him take the Paeonians from their houses, and bring them to him, men, women, and children. [2] Immediately a horseman sped with this message to the Hellespont, and upon crossing it, gave the letter to Megabazus, who, after reading it, took guides from Thrace and led his army to Paeonia.","places":[{"placeId":"1001889","name":"Thrace","startOffset":76,"endOffset":82},{"placeId":"491680","name":"Paeonians","startOffset":105,"endOffset":114},{"placeId":"501434","name":"Hellespont","startOffset":240,"endOffset":250},{"placeId":"1001889","name":"Thrace","startOffset":344,"endOffset":350},{"placeId":"491680","name":"Paeonia","startOffset":371,"endOffset":378}]},{"id":15,"text":"When the Paeonians learned that the Persians were coming against them, they gathered together and marched away to the sea, thinking that the Persians would attempt to attack them by that way. [2] So the Paeonians were ready to withstand the onset of Megabazus' army, but the Persians, learning that the Paeonians had gathered their forces and were guarding the coast route into their country, got guides and marched instead by the highland road. They accordingly took the Paeonians unaware and won entrance into their cities, which were left without men, and finding these empty at their attack, they easily gained them. [3] The Paeonians, learning that their towns had been taken, straightway disbanded, each going his own way, and surrendered themselves to the Persians. Thus of the Paeonians the Siriopaeones and Paeoplae and all who lived as far as the Prasiad lake were taken away from their homes and led into Asia.","places":[{"placeId":"491680","name":"Paeonians","startOffset":9,"endOffset":18},{"placeId":"geonames-130758","name":"Persians","startOffset":36,"endOffset":44},{"placeId":"560221","name":"sea","startOffset":118,"endOffset":121},{"placeId":"geonames-130758","name":"Persians","startOffset":141,"endOffset":149},{"placeId":"491680","name":"Paeonians","startOffset":203,"endOffset":212},{"placeId":"geonames-130758","name":"Persians","startOffset":275,"endOffset":283},{"placeId":"491680","name":"Paeonians","startOffset":303,"endOffset":312},{"placeId":"491680","name":"Paeonians","startOffset":472,"endOffset":481},{"placeId":"491680","name":"Paeonians","startOffset":629,"endOffset":638},{"placeId":"geonames-130758","name":"Persians","startOffset":763,"endOffset":771},{"placeId":"491680","name":"Paeonians","startOffset":785,"endOffset":794},{"placeId":"501614","name":"Siriopaeones","startOffset":799,"endOffset":811},{"placeId":"507440","name":"Paeoplae","startOffset":816,"endOffset":824},{"placeId":"501579","name":"Prasiad lake","startOffset":857,"endOffset":869}]},{"id":16,"text":"But those near the Pangaean6 mountains and the country of the Doberes and the Agrianes and the Odomanti and the Prasiad lake itself were never subdued at all by Megabazus. He did in fact try to take the lake-dwellers7 and did so in the following manner. There is set in the midst of the lake a platform made fast on tall piles, to which one bridge gives a narrow passage from the land. [2] In olden times all the people working together set the piles which support the platform there, but they later developed another method of setting them. The men bring the piles from a mountain called Orbelus,8 and every man plants three for each of the three women that he weds. [3] Each man has both a hut on the platform and a trap-door in the platform leading down into the lake. They make a cord fast to the feet of their little children out of fear that they will fall into the water. [4] They give fish as fodder to their horses and beasts of burden, and there is such an abundance of fish that a man can open his trap-door, let down an empty basket by a line into the lake, and draw it up after a short time full of fish. There are two kinds of these, some called paprakes, some tilones.","places":[{"placeId":"501551","name":"Pangaean","startOffset":19,"endOffset":27},{"placeId":"507399","name":"Doberes","startOffset":62,"endOffset":69},{"placeId":"481704","name":"Agrianes","startOffset":78,"endOffset":86},{"placeId":"876670","name":"Odomanti","startOffset":95,"endOffset":103},{"placeId":"501579","name":"Prasiad lake","startOffset":112,"endOffset":124},{"placeId":"501539","name":"Orbelus","startOffset":589,"endOffset":596}]},{"id":17,"text":"So those of the Paeonians who had been captured were taken into Asia. Then Megabazus, having made the Paeonians captive, sent as messengers into Macedonia9 the seven Persians who (after himself) were the most honorable in his army. These were sent to Amyntas to demand earth and water for Darius the king. [2] Now there is a very straight way from the Prasiad lake to Macedonia. First there is near the lake that mine from which Alexander later drew a daily revenue of a talent of silver, and when a person has passed the mine, he need only cross the mountain called Dysorum10 to be in Macedonia.","places":[{"placeId":"491680","name":"Paeonians","startOffset":16,"endOffset":25},{"placeId":"491680","name":"Paeonians","startOffset":102,"endOffset":111},{"placeId":"491656","name":"Macedonia","startOffset":145,"endOffset":154},{"placeId":"geonames-130758","name":"Persians","startOffset":166,"endOffset":174},{"placeId":"501579","name":"Prasiad lake","startOffset":352,"endOffset":364},{"placeId":"491656","name":"Macedonia","startOffset":368,"endOffset":377},{"placeId":"491582","name":"Dysorum","startOffset":567,"endOffset":574},{"placeId":"491656","name":"Macedonia","startOffset":586,"endOffset":595}]},{"id":18,"text":"The Persians who had been sent as envoys came to Amyntas and demanded earth and water for Darius the king. He readily gave to them what they asked and invited them to be his guests, preparing a dinner of great splendor and receiving them hospitably. [2] After dinner, the Persians said to Amyntas as they sat drinking together, Macedonian, our host, it is our custom in Persia to bring in also the concubines and wedded wives to sit by the men after the giving of any great banquet. We ask you, then, (since you have received us heartily, are entertaining us nobly and are giving Darius our king earth and water) to follow our custom. [3] To this Amyntas replied,  We have no such custom, Persians. Among us, men and women sit apart, but since you are our masters and are making this request, it shall be as you desire. With that, Amyntas sent for the women. Upon being called, the women entered and sat down in a row opposite the Persians. [4] Then the Persians, seeing beautiful women before them, spoke to Amyntas and said that there was no sense in what he had done. It would be better if the women had never come at all than that they should come and not sit beside the men, but sit opposite them to torment their eyes. [5] Amyntas, now feeling compelled to do so, bade the women sit beside them. When the women had done as they were bidden, the Persians, flushed as they were with excess of wine, at once laid hands on the women's breasts, and one or another tried to kiss them.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":4,"endOffset":12},{"placeId":"geonames-130758","name":"Persians","startOffset":272,"endOffset":280},{"placeId":"491656","name":"Macedonian","startOffset":329,"endOffset":339},{"placeId":"geonames-130758","name":"Persia","startOffset":371,"endOffset":377},{"placeId":"geonames-130758","name":"Persians","startOffset":692,"endOffset":700},{"placeId":"geonames-130758","name":"Persians","startOffset":935,"endOffset":943},{"placeId":"geonames-130758","name":"Persians","startOffset":958,"endOffset":966},{"placeId":"geonames-130758","name":"Persians","startOffset":1355,"endOffset":1363}]},{"id":19,"text":"This Amyntas saw, but held his peace despite his anger because he greatly feared the Persians. Amyntas' son Alexander, however, because of his youth and ignorance of ill deeds, could not bear it longer and said to Amyntas in great wrath, My father, do as your age demands. Leave us and take your rest; do not continue drinking. I will stay here and give our guests all that is needful. [2] At this Amyntas saw that Alexander had some wild deed in mind and said, My son, you are angered, and if I guess your meaning correctly, you are sending me away so that you may do some violent deed. I for my part, for fear that you will bring about our undoing, entreat you not to act rashly against these men, but to bear patiently the sight of what they do. If you want me to leave, to that I consent.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":85,"endOffset":93}]},{"id":20,"text":"When Amyntas made this request and had gone his way, Alexander said to the Persians, Sirs, you have full freedom to deal with these women, and may have intercourse with all or any of them. [2] As to that, you may make your own decision, but now, since the hour of your rest is drawing near and I see that you are all completely drunk, allow these women to depart and wash, if this is your desire. When they have washed, wait for them to come to you again. [3] When he had said this and the Persians had given their consent, he sent the women out and away to their apartments. Alexander then took as many beardless men as there were women, dressed them in the women's clothes, and gave them daggers. These he brought in, and said to the Persians, [4] I believe, men of Persia, that you have feasted to your hearts' content. All that we had and all besides that we could find to give you has been set before you, and now we make you a free gift of our best and most valued possession, our own mothers and sisters. Be aware that in so doing we are giving you all the honor that you deserve, and tell your king who sent you how his Greek viceroy of Macedonia has received you hospitably, providing food and bedfellows. [5] With that, Alexander seated each of his Macedonians next to a Persian, as though they were women, and when the Persians began to lay hands on them, they were killed by the Macedonians.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":75,"endOffset":83},{"placeId":"geonames-130758","name":"Persians","startOffset":492,"endOffset":500},{"placeId":"geonames-130758","name":"Persians","startOffset":738,"endOffset":746},{"placeId":"geonames-390903","name":"Greek","startOffset":1131,"endOffset":1136},{"placeId":"491656","name":"Macedonia","startOffset":1148,"endOffset":1157},{"placeId":"491656","name":"Macedonians","startOffset":1263,"endOffset":1274},{"placeId":"geonames-130758","name":"Persian","startOffset":1285,"endOffset":1292},{"placeId":"geonames-130758","name":"Persians","startOffset":1334,"endOffset":1342},{"placeId":"491656","name":"Macedonians","startOffset":1395,"endOffset":1406}]},{"id":21,"text":"This was the way in which they perished, they and all their retinue. Carriages too had come with them, and servants, and all the great train they had. The Macedonians made away with all that, as well as with all the envoys themselves. [2] No long time afterwards the Persians made a great search for these men, but Alexander had cunning enough to put an end to it by the gift of a great sum and his own sister Gygaea to Bubares, a Persian and the general of those who were looking for the slain men. It was in this way, then, that the death of these Persians was kept silent.","places":[{"placeId":"491656","name":"Macedonians","startOffset":155,"endOffset":166},{"placeId":"geonames-130758","name":"Persians","startOffset":267,"endOffset":275},{"placeId":"geonames-130758","name":"Persian","startOffset":431,"endOffset":438},{"placeId":"geonames-130758","name":"Persians","startOffset":550,"endOffset":558}]},{"id":22,"text":"Now that these descendants of Perdiccas are Greeks, as they themselves say, I myself chance to know and will prove it in the later part of my history. Furthermore, the Hellenodicae11 who manage the contest at Olympia determined that it is so, [2] for when Alexander chose to contend and entered the lists for that purpose, the Greeks who were to run against him wanted to bar him from the race, saying that the contest should be for Greeks and not for foreigners. Alexander, however, proving himself to be an Argive, was judged to be a Greek. He accordingly competed in the furlong race and tied step for first place. This, then, is approximately what happened.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":44,"endOffset":50},{"placeId":"570531","name":"Olympia","startOffset":209,"endOffset":216},{"placeId":"geonames-390903","name":"Greeks","startOffset":327,"endOffset":333},{"placeId":"geonames-390903","name":"Greeks","startOffset":433,"endOffset":439},{"placeId":"570106","name":"Argive","startOffset":509,"endOffset":515},{"placeId":"geonames-390903","name":"Greek","startOffset":536,"endOffset":541}]},{"id":23,"text":"Megabazus, bringing with him the Paeonians, came to the Hellespont, and after crossing it from there, he came to Sardis. Histiaeus the Milesian was by this time fortifying the place which he hadasked of Darius as his reward for guarding the bridge, a place called Myrcinus by the river Strymon. Megabazus discovered what he was doing, and upon his arrival at Sardis with the Paeonians, he said to Darius, [2]  Sire, what is this that you have done? You have permitted a clever and cunning Greek to build a city in Thrace, where there are abundant forests for ship-building, much wood for oars, mines of silver, and many people both Greek and foreign dwelling around, who, when they have a champion to lead them, will carry out all his orders by day or by night. [3] Stop this man, then, from doing these things so that you will not be entangled in a war with your own subjects, but use gentle means to do so. When you have him in your grasp, see to it that he never returns to Hellas.","places":[{"placeId":"491680","name":"Paeonians","startOffset":33,"endOffset":42},{"placeId":"501434","name":"Hellespont","startOffset":56,"endOffset":66},{"placeId":"550867","name":"Sardis","startOffset":113,"endOffset":119},{"placeId":"599799","name":"Milesian","startOffset":135,"endOffset":143},{"placeId":"501520","name":"Myrcinus","startOffset":264,"endOffset":272},{"placeId":"501629","name":"Strymon","startOffset":286,"endOffset":293},{"placeId":"550867","name":"Sardis","startOffset":359,"endOffset":365},{"placeId":"491680","name":"Paeonians","startOffset":375,"endOffset":384},{"placeId":"geonames-390903","name":"Greek","startOffset":490,"endOffset":495},{"placeId":"1001889","name":"Thrace","startOffset":515,"endOffset":521},{"placeId":"geonames-390903","name":"Greek","startOffset":633,"endOffset":638},{"placeId":"geonames-390903","name":"Hellas","startOffset":978,"endOffset":984}]},{"id":24,"text":"Megabazus easily persuaded Darius, who believed that his vision of the future was correct. Presently the king sent a message to Myrcinus which read as follows:  Histiaeus, these are the words of Darius the king: my thoughts can show me no man who is more devoted to me and my affairs. Not words but deeds have proven this to me. [2] Now, therefore, let nothing prevent you from coming to me so that I may inform you of certain great purposes which I have in mind. Trusting these words, and proud, moreover, that he would be the king's counsellor, Histiaeus came to Sardis. [3] When he had come, Darius said to him, Histiaeus, I will tell you the reason why I sent for you. As soon as I returned from Scythia and you were gone from my sight, there was nothing which I longed for so much as seeing you and speaking with you, for I knew that the most precious of all possessions is a wise and loyal friend. That you are such I can bear witness to as regards my affairs. [4] Now, since you have done well in coming here, I make you this proposal. Leave Miletus and your newly founded Thracian city and follow me to Susa, where you will have all that is mine, sharing my table and my counsels.","places":[{"placeId":"501520","name":"Myrcinus","startOffset":128,"endOffset":136},{"placeId":"550867","name":"Sardis","startOffset":567,"endOffset":573},{"placeId":"1273","name":"Scythia","startOffset":703,"endOffset":710},{"placeId":"599799","name":"Miletus","startOffset":1052,"endOffset":1059},{"placeId":"1001889","name":"Thracian","startOffset":1083,"endOffset":1091},{"placeId":"912936","name":"Susa","startOffset":1114,"endOffset":1118}]},{"id":25,"text":"This, then, is what Darius said, and after appointing Artaphrenes, his father's son, to be viceroy of Sardis, he rode away to Susa, taking Histiaeus with him. First, however, he made Otanes governor of the people on the coast. Otanes' father Sisamnes had been one of the royal judges,12 and Cambyses had cut his throat and flayed off all his skin because he had been bribed to give an unjust judgment. Then he cut leather strips of the skin which had been torn away and with these he covered the seat upon which Sisamenes had sat to give judgment. [2] After doing this, Cambyses appointed the son of this slain and flayed Sisamnes to be judge in his place, admonishing him to keep in mind the nature of the throne on which he was sitting.","places":[{"placeId":"550867","name":"Sardis","startOffset":102,"endOffset":108},{"placeId":"912936","name":"Susa","startOffset":126,"endOffset":130}]},{"id":26,"text":"This Otanes, then, who sat upon that seat, was now made successor to Megabazus in his governorship. He captured Byzantium, Calchedon, Antandrus in the Troad, and Lamponium, and with ships he had taken from the Lesbians, he took Lemnos and Imbros, both of which were still inhabited by Pelasgians.","places":[{"placeId":"520985","name":"Byzantium","startOffset":112,"endOffset":121},{"placeId":"520988","name":"Calchedon","startOffset":123,"endOffset":132},{"placeId":"550433","name":"Antandrus","startOffset":134,"endOffset":143},{"placeId":"550944","name":"Troad","startOffset":151,"endOffset":156},{"placeId":"550678","name":"Lamponium","startOffset":162,"endOffset":171},{"placeId":"550696","name":"Lesbians","startOffset":210,"endOffset":218},{"placeId":"550693","name":"Lemnos","startOffset":228,"endOffset":234},{"placeId":"501439","name":"Imbros","startOffset":239,"endOffset":245},{"placeId":"570102","name":"Pelasgians","startOffset":285,"endOffset":295}]},{"id":27,"text":"The Lemnians fought well and defended themselves, till at last they were brought to evil plight, and the Persians set as governor over those that were left of them Lycaretus the brother of Maeandrius who had been king of Samos. [2] This Lycaretus met his end while ruling in Lemnos because he tried to enslave and subdue all the people, accusing some of shunning service against the Scythians and others of plundering Darius' army on its way back from Scythia.","places":[{"placeId":"550693","name":"Lemnians","startOffset":4,"endOffset":12},{"placeId":"geonames-130758","name":"Persians","startOffset":105,"endOffset":113},{"placeId":"599926","name":"Samos","startOffset":221,"endOffset":226},{"placeId":"550693","name":"Lemnos","startOffset":275,"endOffset":281},{"placeId":"1273","name":"Scythians","startOffset":383,"endOffset":392},{"placeId":"1273","name":"Scythia","startOffset":452,"endOffset":459}]},{"id":28,"text":"All this Otanes achieved when he had been made governor. After only a short period of time without evils, trouble began once more to come on the Ionians, and this from Naxos and Miletus. Naxos surpassed all the other islands in prosperity, and at about the same time Miletus, at the height of her fortunes, was the glory of Ionia. Two generations before this, however, she had been very greatly troubled by factional strife, till the Parians, chosen out of all the Greeks by the Milesians for this purpose, made peace among them,","places":[{"placeId":"550597","name":"Ionians","startOffset":145,"endOffset":152},{"placeId":"599822","name":"Naxos","startOffset":168,"endOffset":173},{"placeId":"599799","name":"Miletus","startOffset":178,"endOffset":185},{"placeId":"599822","name":"Naxos","startOffset":187,"endOffset":192},{"placeId":"599799","name":"Miletus","startOffset":267,"endOffset":274},{"placeId":"550597","name":"Ionia","startOffset":324,"endOffset":329},{"placeId":"599868","name":"Parians","startOffset":434,"endOffset":441},{"placeId":"geonames-390903","name":"Greeks","startOffset":465,"endOffset":471},{"placeId":"599799","name":"Milesians","startOffset":479,"endOffset":488}]},{"id":29,"text":"The Parians reconciled them in the following manner. Their best men came to Miletus, and seeing the Milesian households sadly wasted, they said that they desired to go about the country. They then made their way through all the territory of Miletus, and whenever they found any well-tilled farm in the desolation of the land, they wrote down the name of the owner of that farm. [2] After travelling over the whole country and finding only a few such men, they assembled the people immediately upon their return to the city and appointed as rulers of the state those whose lands they had found well tilled. This they did in the belief that these men were likely to take as good care of public affairs as they had of their own, and they ordained that the rest of the Milesians who had been at feud should obey these men.","places":[{"placeId":"599868","name":"Parians","startOffset":4,"endOffset":11},{"placeId":"599799","name":"Miletus","startOffset":76,"endOffset":83},{"placeId":"599799","name":"Milesian","startOffset":100,"endOffset":108},{"placeId":"599799","name":"Miletus","startOffset":241,"endOffset":248},{"placeId":"599799","name":"Milesians","startOffset":765,"endOffset":774}]},{"id":30,"text":"It was in this way that the Parians made peace in Miletus, but now these cities began to bring trouble upon Ionia. Certain men of substance who had been banished by the common people, went in exile to Miletus. [2] Now it chanced that the deputy ruling Miletus was Aristagoras son of Molpagoras, son-in-law and cousin of that Histiaeus son of Lysagoras whom Darius kept with him at Susa. Histiaeus was tyrant of Miletus but was at Susa when the Naxians, who had been his guests and friends, arrived. [3] When the Naxians came to Miletus, they asked Aristagoras if he could give them enough power to return to their own country. Believing that he would become ruler of Naxos if they were restored to their city with his help and using as a pretext their friendship with Histiaeus, he made them this proposal: [4] I myself do not have the authority to give you such power as will restore you against the will of the Naxians who hold your city, for I know that the Naxians have eight thousand men that bear shields, and many ships of war. Nevertheless, I will do everything I can to realize your request. [5] This is my plan. Artaphrenes is my friend, and he is not only Hystaspes' son and brother to Darius the king but also governor of all the coastal peoples of Asia. He accordingly has a great army and many ships at his disposal. This man, then, will, I think, do whatever we desire. [6] Hearing this, the Naxians left the matter for Aristagoras to deal with as best he could, asking him to promise gifts and the costs of the army, for which they themselves would pay since they had great hope that when they should appear off Naxos, the Naxians would obey all their commands. The rest of the islanders, they expected, would do likewise since none of these Cycladic islands was as yet subject to Darius.","places":[{"placeId":"599868","name":"Parians","startOffset":28,"endOffset":35},{"placeId":"599799","name":"Miletus","startOffset":50,"endOffset":57},{"placeId":"550597","name":"Ionia","startOffset":108,"endOffset":113},{"placeId":"599799","name":"Miletus","startOffset":201,"endOffset":208},{"placeId":"599799","name":"Miletus","startOffset":252,"endOffset":259},{"placeId":"912936","name":"Susa","startOffset":381,"endOffset":385},{"placeId":"599799","name":"Miletus","startOffset":411,"endOffset":418},{"placeId":"912936","name":"Susa","startOffset":430,"endOffset":434},{"placeId":"599822","name":"Naxians","startOffset":444,"endOffset":451},{"placeId":"599822","name":"Naxians","startOffset":512,"endOffset":519},{"placeId":"599799","name":"Miletus","startOffset":528,"endOffset":535},{"placeId":"599822","name":"Naxos","startOffset":667,"endOffset":672},{"placeId":"599822","name":"Naxians","startOffset":914,"endOffset":921},{"placeId":"599822","name":"Naxians","startOffset":962,"endOffset":969},{"placeId":"599822","name":"Naxians","startOffset":1409,"endOffset":1416},{"placeId":"599822","name":"Naxos","startOffset":1630,"endOffset":1635},{"placeId":"599822","name":"Naxians","startOffset":1641,"endOffset":1648}]},{"id":31,"text":"Aristagoras came to Sardis and told Artaphrenes that Naxos was indeed an island of no great size, but that it was otherwise a beautiful and noble island lying near Ionia. Furthermore it had a store of wealth and slaves. Therefore send an army against that country, he said,  and bring back the men who have been banished from there. [2] If you so do, I have a great sum of money at your disposal, over and above the costs of the force, for it is only fair that we, who bring you, should furnish that. Furthermore, you will win new dominions for the king, Naxos itself and the islands which are its dependents, Paros, Andros, and the rest of those that are called Cyclades. [3] Making these your starting point, you will easily attack Euboea, which is a great and a wealthy island, no smaller than Cyprus and very easy to take. A hundred ships suffice for the conquest of all these. [4] This plan which you set forth, Artaphrenes answered, is profitable for the king's house, and all your advice is good except as regards the number of the ships. Not one hundred but two hundred ships will be ready for you when the spring comes. The king too, however, must himself consent to this.","places":[{"placeId":"550867","name":"Sardis","startOffset":20,"endOffset":26},{"placeId":"599822","name":"Naxos","startOffset":53,"endOffset":58},{"placeId":"550597","name":"Ionia","startOffset":164,"endOffset":169},{"placeId":"599822","name":"Naxos","startOffset":558,"endOffset":563},{"placeId":"599868","name":"Paros","startOffset":613,"endOffset":618},{"placeId":"589693","name":"Andros","startOffset":620,"endOffset":626},{"placeId":"560353","name":"Cyclades","startOffset":666,"endOffset":674},{"placeId":"540775","name":"Euboea","startOffset":737,"endOffset":743},{"placeId":"707498","name":"Cyprus","startOffset":800,"endOffset":806}]},{"id":32,"text":"When Aristagoras heard that, he went away to Miletus in great joy. Artaphrenes sent a messenger to Susa with the news of what Aristagoras said, and when Darius himself too had consented to the plan, he equipped two hundred triremes and a very great company of Persians and their allies in addition. For their general he appointed Megabates, a Persian of the Achaemenid family, cousin to himself and to Darius. This was he whose daughter (if indeed the tale is true) Pausanias the Lacedaemonian, son of Cleombrotus, at a later day betrothed to himself, since it was his wish to possess the sovereignty of Hellas. After appointing Megabates general, Artaphrenes sent his army away to Aristagoras.","places":[{"placeId":"599799","name":"Miletus","startOffset":45,"endOffset":52},{"placeId":"912936","name":"Susa","startOffset":99,"endOffset":103},{"placeId":"geonames-130758","name":"Persians","startOffset":260,"endOffset":268},{"placeId":"geonames-130758","name":"Persian","startOffset":343,"endOffset":350},{"placeId":"570406","name":"Lacedaemonian","startOffset":480,"endOffset":493},{"placeId":"geonames-390903","name":"Hellas","startOffset":604,"endOffset":610}]},{"id":33,"text":"Then Megabates,13 bringing Aristagoras from Miletus, the Ionian army, and the Naxians, pretended to be sailing to the Hellespont, but when he came to Chios, he put in with his ships at Caucasa14 so that he might cross with a north wind to Naxos. [2] Since it was not fated that the Naxians were to be destroyed by this force, the following things took place. As Megabates was making his rounds among the ships' watches, it chanced that there was no watch on the ship of Myndus. Megabates, very angry at this, ordered his guards to find the captain of this ship, whose name was Scylax, and thrust him partly through an oar-hole of the ship and bound him there so that his head was outside the ship and his body inside. [3] When Scylax had been bound, someone brought word to Aristagoras, that his Myndian friend was bound and being disgracefully treated by Megabates. Aristagoras then went and pleaded with the Persian for Scylax, but since he obtained nothing that he requested, he went and released the man himself. When Megabates learned this, he took it very badly and was angry at Aristagoras. [4] Aristagoras, however, said, But you, what have you to do with these matters? Did not Artaphrenes send you to obey me and to sail wherever I bid you? Why are you so meddlesome? This response on the part of Aristagoras enraged Megabates, who, went night fell, sent men in a boat to Naxos to tell the Naxians of the trouble in store for them.","places":[{"placeId":"599799","name":"Miletus","startOffset":44,"endOffset":51},{"placeId":"550597","name":"Ionian","startOffset":57,"endOffset":63},{"placeId":"599822","name":"Naxians","startOffset":78,"endOffset":85},{"placeId":"501434","name":"Hellespont","startOffset":118,"endOffset":128},{"placeId":"550497","name":"Chios","startOffset":150,"endOffset":155},{"placeId":"550631","name":"Caucasa","startOffset":185,"endOffset":192},{"placeId":"599822","name":"Naxos","startOffset":239,"endOffset":244},{"placeId":"599822","name":"Naxians","startOffset":282,"endOffset":289},{"placeId":"599811","name":"Myndus","startOffset":470,"endOffset":476},{"placeId":"599811","name":"Myndian","startOffset":796,"endOffset":803},{"placeId":"geonames-130758","name":"Persian","startOffset":910,"endOffset":917},{"placeId":"599822","name":"Naxos","startOffset":1384,"endOffset":1389},{"placeId":"599822","name":"Naxians","startOffset":1402,"endOffset":1409}]},{"id":34,"text":"Now the Naxians had no suspicion at all that it was they who were to be attacked by that force. However, when they learned the truth, they immediately brought inside their walls all that was in their fields, stored both meat and drink in case of a siege, and strengthened their walls. [2] The Naxians, then, made all preparations to face the onset of war. When their enemies had brought their ships over from Chios to Naxos, it was a fortified city that they attacked, and for four months they besieged it. [3] When the Persians had exhausted all the money with which they had come, and Aristagoras himself had spent much beside, they built a stronghold for the banished Naxians, and went off to the mainland in poor spirits since still more money was needed for the siege.","places":[{"placeId":"599822","name":"Naxians","startOffset":8,"endOffset":15},{"placeId":"599822","name":"Naxians","startOffset":293,"endOffset":300},{"placeId":"550497","name":"Chios","startOffset":409,"endOffset":414},{"placeId":"599822","name":"Naxos","startOffset":418,"endOffset":423},{"placeId":"geonames-130758","name":"Persians","startOffset":520,"endOffset":528},{"placeId":"599822","name":"Naxians","startOffset":671,"endOffset":678}]},{"id":35,"text":"Aristagoras had no way of fulfilling his promise to Artaphrenes, and he was hard-pressed by demands for the costs of the force. Furthermore he feared what might come of the failure of the army and Megabates' displeasure against him. It was likely, he thought, that his lordship of Miletus would be taken away from him. [2] With all these fears in his mind, he began to plan revolt, for it chanced that at that very time there came from Susa Histiaeus' messenger, the man with the marked head, signifying that Aristagoras should revolt from the king. [3] Since Histiaeus desired to give word to Aristagoras that he should revolt and had no other safe way of doing so because the roads were guarded, he shaved and branded the head of his most trustworthy slave. He waited till the hair had grown again, and as soon as it was grown, he sent the man to Miletus with no other message except that when he came to Miletus he must bid Aristagoras shave his hair and examine his head. The writing branded on it signified revolt, as I have already said. [4] This Histiaeus did because he greatly disliked his detention at Susa and fully expected to be sent away to the coast in the case that there should be a revolt. If, however, Miletus remained at peace, he calculated that he would never return there.","places":[{"placeId":"599799","name":"Miletus","startOffset":281,"endOffset":288},{"placeId":"912936","name":"Susa","startOffset":436,"endOffset":440},{"placeId":"599799","name":"Miletus","startOffset":849,"endOffset":856},{"placeId":"599799","name":"Miletus","startOffset":907,"endOffset":914},{"placeId":"912936","name":"Susa","startOffset":1112,"endOffset":1116},{"placeId":"599799","name":"Miletus","startOffset":1221,"endOffset":1228}]},{"id":36,"text":"With this intent, then, Histiaeus sent his messenger, and it chanced that all these things came upon Aristagoras at one and the same time. He accordingly took counsel with the members of his faction, stating his own opinion as well as the message which had come to him from Histiaeus. [2] All the rest spoke their minds to the same effect, favoring revolt, with the exception of Hecataeus the historian who, listing all the nations subject to Darius and all his power, advised them that they should not make war on the king of Persia. When, however, he failed to persuade them, he counselled them that their next best plan was to make themselves masters of the sea. [3] This, he said, could only be accomplished in one way (Miletus, he knew, was a city of no great wealth), namely if they took away from the temple at Branchidae15 the treasure which Croesus the Lydian had dedicated there. With this at their disposal, he fully expected them to gain the mastery of the sea. They would then have the use of that treasure and their enemies would not be able to plunder it. [4] The treasure was very great, as I have shown in the beginning of my account. This plan was not approved, and they resolved that they would revolt. One out of their number was to sail to Myus, to the army which had left Naxos and was there, and attempt to seize the generals who were aboard the ships.","places":[{"placeId":"599799","name":"Miletus","startOffset":724,"endOffset":731},{"placeId":"599593","name":"Branchidae","startOffset":818,"endOffset":828},{"placeId":"550701","name":"Lydian","startOffset":862,"endOffset":868},{"placeId":"599822","name":"Naxos","startOffset":1294,"endOffset":1299}]},{"id":37,"text":"Iatragoras, who had been sent for this very purpose, craftily seized Oliatus of Mylasa son of Ibanollis; Histiaeus of Termera son of Tymnes; Coes son of Erxandrus, to whom Darius gave Mytilene; Aristagoras of Cyme, son of Heraclides; and many others besides. Then Aristagoras revolted openly, devising all he could to harm Darius. [2] First he made pretence of giving up his tyranny and gave Miletus equality of government so that the Milesians might readily join in his revolt. Then he proceeded to do the same things in the rest of Ionia. Some of the tyrants he banished, and as for those tyrants whom he had taken out of the ships that sailed with him against Naxos, he handed them each over to their respective cities, which he wished to please.","places":[{"placeId":"geonames-256866","name":"Mytilene","startOffset":184,"endOffset":192},{"placeId":"550506","name":"Cyme","startOffset":209,"endOffset":213},{"placeId":"599799","name":"Miletus","startOffset":392,"endOffset":399},{"placeId":"599799","name":"Milesians","startOffset":435,"endOffset":444},{"placeId":"550597","name":"Ionia","startOffset":534,"endOffset":539},{"placeId":"599822","name":"Naxos","startOffset":663,"endOffset":668}]},{"id":38,"text":"Coes, when the Mytilenaeans received him, was taken out and stoned, but the Cymaeans, as well as most of the others, let their own man go. [2] In this way, then, an end was made of tyrants in the cities. After doing away with the tyrants, Aristagoras of Miletus ordered all the peoples to set up governors in each city. Then he went on an embassy in a trireme to Lacedaemon, for it was necessary for him to find some strong ally.16","places":[{"placeId":"550763","name":"Mytilenaeans","startOffset":15,"endOffset":27},{"placeId":"550506","name":"Cymaeans","startOffset":76,"endOffset":84},{"placeId":"599799","name":"Miletus","startOffset":254,"endOffset":261},{"placeId":"570406","name":"Lacedaemon","startOffset":363,"endOffset":373}]},{"id":39,"text":"At Sparta, Anaxandrides the son of Leon, who had been king, was now no longer alive but was dead, and Cleomenes son of Anaxandrides held the royal power. This he had won not by manly merit but by right of birth. Anaxandrides had as his wife his own sister's daughter, and although he was content with her, no children were born to him. [2] Since this was the case, the Ephors called him to them and said, Even if you have no interest in caring for yourself, we cannot allow the house of Eurysthenes to perish. Therefore send away the wife that you have, seeing that she bears you no children, and wed another. If you do this, you will please the Spartans. Anaxandrides, however, said in response that he would do neither of these things and that they were not giving him good advice in bidding him to get rid of his present wife, who was blameless, and to marry another.","places":[{"placeId":"570685","name":"Sparta","startOffset":3,"endOffset":9},{"placeId":"570685","name":"Spartans","startOffset":647,"endOffset":655}]},{"id":40,"text":"Then the Ephors and Elders took counsel, and placed this proposal before Anaxandrides: Since, as we see, you cling to the wife that you have, carry out our command, and do not hold out against it, bearing in mind that the Spartans will certainly find some other way of dealing with you. [2] As for the wife that you have, we do not ask that you send her away. Keep providing her with all that you give her now and marry another woman in addition who can give you children. So they spoke, and Anaxandrides consented. Presently he had two wives and kept two households, a thing which is not at all customary at Sparta.","places":[{"placeId":"570685","name":"Spartans","startOffset":223,"endOffset":231},{"placeId":"570685","name":"Sparta","startOffset":611,"endOffset":617}]},{"id":41,"text":"After no long time the second wife gave birth to Cleomenes. She, then, gave the Spartans an heir to the royal power, and as luck would have it, the first wife, who had been barren before, conceived at that very time. [2] When the friends of the new wife learned that the other woman was pregnant, they began to make trouble for her. They said that she was making an empty boast, so that she might substitute a child. The Ephors were angry, and when her time drew near, they sat around to watch her in childbirth because of their skepticism. [3] She gave birth first to Dorieus, then straightway to Leonidas, and right after him to Cleombrotus. Some, however, say that Cleombrotus and Leonidas were twins. As for the later wife, the mother of Cleomenes and the daughter of Prinetadas son of Demarmenus, she bore no more children.","places":[{"placeId":"570685","name":"Spartans","startOffset":80,"endOffset":88}]},{"id":42,"text":"Now Cleomenes, as the story goes, was not in his right mind and really quite mad, while Dorieus was first among all of his peers and fully believed that he would be made king for his manly worth. [2] Since he was of this opinion, Dorieus was very angry when at Anaxandrides' death the Lacedaemonians followed their custom and made Cleomenes king by right of age. Since he would not tolerate being made subject to Cleomenes, he asked the Spartans for a group of people whom he took away as colonists. He neither inquired of the oracle at Delphi in what land he should establish his settlement, nor did anything else that was customary but set sail in great anger for Libya, with men of Thera to guide him. [3] When he arrived there, he settled by the Cinyps river in the fairest part of Libya, but in the third year he was driven out by the Macae, the Libyans and the Carchedonians and returned to the Peloponnesus.","places":[{"placeId":"570406","name":"Lacedaemonians","startOffset":285,"endOffset":299},{"placeId":"570685","name":"Spartans","startOffset":437,"endOffset":445},{"placeId":"540726","name":"Delphi","startOffset":537,"endOffset":543},{"placeId":"716588","name":"Libya","startOffset":666,"endOffset":671},{"placeId":"599973","name":"Thera","startOffset":685,"endOffset":690},{"placeId":"344414","name":"Cinyps","startOffset":750,"endOffset":756},{"placeId":"716588","name":"Libya","startOffset":786,"endOffset":791},{"placeId":"344428","name":"Macae","startOffset":840,"endOffset":845},{"placeId":"716588","name":"Libyans","startOffset":851,"endOffset":858},{"placeId":"314921","name":"Carchedonians","startOffset":867,"endOffset":880},{"placeId":"570577","name":"Peloponnesus","startOffset":901,"endOffset":913}]},{"id":43,"text":"There Antichares, a man of Eleon,17 advised him, on the basis of the oracles of Laius, to plant a colony at Heraclea in Sicily, for Heracles18 himself, said Antichares, had won all the region of Eryx, which accordingly belonged to his descendants. When Dorieus heard that, he went away to Delphi to enquire of the oracle if he should seize the place to which he was preparing to go. The priestess responded that it should be so, and he took with him the company that he had led to Libya and went to Italy.","places":[{"placeId":"579946","name":"Eleon","startOffset":27,"endOffset":32},{"placeId":"462237","name":"Heraclea","startOffset":108,"endOffset":116},{"placeId":"462492","name":"Sicily","startOffset":120,"endOffset":126},{"placeId":"462202","name":"Eryx","startOffset":195,"endOffset":199},{"placeId":"540726","name":"Delphi","startOffset":289,"endOffset":295},{"placeId":"716588","name":"Libya","startOffset":481,"endOffset":486},{"placeId":"452346","name":"Italy","startOffset":499,"endOffset":504}]},{"id":44,"text":"Now at this time,19 as the Sybarites say, they and their king Telys were making ready to march against Croton, and the men of Croton, who were very much afraid, entreated Dorieus to come to their aid. Their request was granted, and Dorieus marched with them to Sybaris helping them to take it. [2] This is the story which the Sybarites tell of Dorieus and his companions, but the Crotoniats say that they were aided by no stranger in their war with Sybaris with the exception of Callias, an Elean diviner of the Iamid clan. About him there was a story that he had fled to Croton from Telys, the tyrant of Sybaris, because as he was sacrificing for victory over Croton, he could obtain no favorable omens.","places":[{"placeId":"452457","name":"Sybarites","startOffset":27,"endOffset":36},{"placeId":"452317","name":"Croton","startOffset":103,"endOffset":109},{"placeId":"452317","name":"Croton","startOffset":126,"endOffset":132},{"placeId":"452457","name":"Sybaris","startOffset":261,"endOffset":268},{"placeId":"452457","name":"Sybarites","startOffset":326,"endOffset":335},{"placeId":"452317","name":"Crotoniats","startOffset":380,"endOffset":390},{"placeId":"452457","name":"Sybaris","startOffset":449,"endOffset":456},{"placeId":"452488","name":"Elean","startOffset":491,"endOffset":496},{"placeId":"452317","name":"Croton","startOffset":572,"endOffset":578},{"placeId":"452457","name":"Sybaris","startOffset":605,"endOffset":612},{"placeId":"452317","name":"Croton","startOffset":661,"endOffset":667}]},{"id":45,"text":"This is their tale, and both cities have proof of the truth of what they say. The Sybarites point to a precinct and a temple beside the dry bed of the Crathis, which, they say, Dorieus founded in honor of Athena of Crathis after he had helped to take their city. and find their strongest proof in his death. He perished through doing more than the oracle bade him, for if he had accomplished no more than that which he set out to do, he would have taken and held the Erycine region without bringing about the death of himself and his army. [2] The Crotoniats, on the other hand, show many plots of land which had been set apart for and given to Callias of Elis and on which Callias' posterity dwelt even to my time but show no gift to Dorieus and his descendants. They claim, however,that if Dorieus had aided them in their war with Sybaris, he would have received a reward many times greater than what was given to Callias. This, then is the evidence brought forward by each party, and each may side with that which seems to him to deserve more credence.","places":[{"placeId":"452457","name":"Sybarites","startOffset":82,"endOffset":91},{"placeId":"452315","name":"Crathis","startOffset":151,"endOffset":158},{"placeId":"452315","name":"Crathis","startOffset":215,"endOffset":222},{"placeId":"462202","name":"Erycine","startOffset":467,"endOffset":474},{"placeId":"452317","name":"Crotoniats","startOffset":548,"endOffset":558},{"placeId":"570220","name":"Elis","startOffset":656,"endOffset":660},{"placeId":"452457","name":"Sybaris","startOffset":833,"endOffset":840}]},{"id":46,"text":"Other Spartans too sailed with Dorieus to found his colony, namely, Thessalus, Paraebates, Celees, and Euryleon. When these men had come to Sicily with all their company, they were all overcome and slain in battle by the Phoenicians and Egestans, all, that is, except Euryleon, who was the only settler that survived this disaster. [2] He mustered the remnant of his army and took Minoa, the colony from Selinus, and aided in freeing the people of Selinus from their monarch Pithagoras. After deposing this man, he himself attempted to become tyrant of Selinus but was monarch there for only a little while since the people of the place rose against him and slew him at the altar of Zeus of the marketplace, to which he had fled for refuge.","places":[{"placeId":"570685","name":"Spartans","startOffset":6,"endOffset":14},{"placeId":"462492","name":"Sicily","startOffset":140,"endOffset":146},{"placeId":"678334","name":"Phoenicians","startOffset":221,"endOffset":232},{"placeId":"462487","name":"Egestans","startOffset":237,"endOffset":245},{"placeId":"462237","name":"Minoa","startOffset":381,"endOffset":386},{"placeId":"462489","name":"Selinus","startOffset":404,"endOffset":411},{"placeId":"462489","name":"Selinus","startOffset":448,"endOffset":455},{"placeId":"462489","name":"Selinus","startOffset":553,"endOffset":560}]},{"id":47,"text":"Philippus of Croton, son of Butacides, was among those who followed Dorieus and were slain with him. He had been betrothed to the daughter of Telys of Sybaris but was banished from Croton. Cheated out of his marriage, he sailed away to Cyrene, from where he set forth and followed Dorieus, bringing his own trireme and covering all expenses for his men. This Philippus was a victor at Olympia and the fairest Greek of his day. [2] For his physical beauty he received from the Egestans honors accorded to no one else. They built a hero's shrine by his grave and offer him sacrifices of propitiation.","places":[{"placeId":"452317","name":"Croton","startOffset":13,"endOffset":19},{"placeId":"452457","name":"Sybaris","startOffset":151,"endOffset":158},{"placeId":"452317","name":"Croton","startOffset":181,"endOffset":187},{"placeId":"570531","name":"Olympia","startOffset":385,"endOffset":392},{"placeId":"geonames-390903","name":"Greek","startOffset":409,"endOffset":414},{"placeId":"462487","name":"Egestans","startOffset":476,"endOffset":484}]},{"id":48,"text":"Such, then, was the manner of Dorieus' death. Had he endured Cleomenes' rule and stayed at Sparta he would have been king of Lacedaemon, for Cleomenes reigned no long time, and died leaving no son but one only daughter, whose name was Gorgo.","places":[{"placeId":"570685","name":"Sparta","startOffset":91,"endOffset":97},{"placeId":"570406","name":"Lacedaemon","startOffset":125,"endOffset":135}]},{"id":49,"text":"It was in the reign of Cleomenes that Aristagoras the tyrant of Miletus came to Sparta. When he had an audience with the king, as the Lacedaemonians report, he brought with him a bronze tablet on which the map of all the earth was engraved, and all the sea and all the rivers. [2] Having been admitted to converse with Cleomenes, Aristagoras spoke thus to him: Do not wonder, Cleomenes, that I have been so eager to come here, for our present situation is such that the sons of the Ionians are slaves and not free men, which is shameful and grievous particularly to ourselves but also, of all others, to you, inasmuch as you are the leaders of Hellas. [3] Now, therefore, we entreat you by the gods of Hellas to save your Ionian kinsmen from slavery. This is a thing which you can easily achieve, for the strangers are not valiant men while your valor in war is preeminent. As for their manner of fighting, they carry bows and short spears, and they go to battle with trousers on their legs and turbans on their heads. [4] Accordingly, they are easy to overcome. Furthermore, the inhabitants of that continent have more good things than all other men together, gold first but also silver, bronze, colored cloth, beasts of burden, and slaves. All this you can have to your heart's desire. [5] The lands in which they dwell lie next to each other, as I shall show: next to the Ionians are the Lydians, who inhabit a good land and have great store of silver. (This he said pointing to the map of the earth which he had brought engraved on the tablet.) Next to the Lydians, said Aristagoras, you see the Phrygians to the east, men that of all known to me are the richest in flocks and in the fruits of the earth. [6] Close by them are the Cappadocians, whom we call Syrians, and their neighbors are the Cilicians, whose land reaches to the sea over there, in which you see the island of Cyprus lying. The yearly tribute which they pay to the king is five hundred talents. Next to the Cilicians, are the Armenians, another people rich in flocks, and after the Armenians, the Matieni, whose country I show you. [7] Adjoining these you see the Cissian land, in which, on the Choaspes, lies that Susa where the great king lives and where the storehouses of his wealth are located. Take that city, and you need not fear to challenge Zeus for riches. [8] You should suspend your war, then, for strips of land of no great worthfor that fight with with Messenians, who are matched in strength with you, and Arcadians and Argives, men who have nothing in the way of gold or silver (for which things many are spurred by zeal to fight and die). Yet when you can readily be masters of all Asia, will you refuse to attempt it? [9] Thus spoke Aristagoras, and Cleomenes replied: Milesian, my guest, wait till the third day for my answer.","places":[{"placeId":"599799","name":"Miletus","startOffset":64,"endOffset":71},{"placeId":"570685","name":"Sparta","startOffset":80,"endOffset":86},{"placeId":"570406","name":"Lacedaemonians","startOffset":134,"endOffset":148},{"placeId":"550597","name":"Ionians","startOffset":483,"endOffset":490},{"placeId":"geonames-390903","name":"Hellas","startOffset":645,"endOffset":651},{"placeId":"geonames-390903","name":"Hellas","startOffset":703,"endOffset":709},{"placeId":"550597","name":"Ionian","startOffset":723,"endOffset":729},{"placeId":"550597","name":"Ionians","startOffset":1376,"endOffset":1383},{"placeId":"550701","name":"Lydians","startOffset":1392,"endOffset":1399},{"placeId":"550701","name":"Lydians","startOffset":1564,"endOffset":1571},{"placeId":"609502","name":"Phrygians","startOffset":1605,"endOffset":1614},{"placeId":"991402","name":"Cappadocians","startOffset":1740,"endOffset":1752},{"placeId":"1306","name":"Syrians","startOffset":1767,"endOffset":1774},{"placeId":"658440","name":"Cilicians","startOffset":1804,"endOffset":1813},{"placeId":"707498","name":"Cyprus","startOffset":1888,"endOffset":1894},{"placeId":"658440","name":"Cilicians","startOffset":1985,"endOffset":1994},{"placeId":"874350","name":"Armenians","startOffset":2004,"endOffset":2013},{"placeId":"874350","name":"Armenians","startOffset":2060,"endOffset":2069},{"placeId":"884179","name":"Matieni","startOffset":2075,"endOffset":2082},{"placeId":"906014","name":"Cissian","startOffset":2142,"endOffset":2149},{"placeId":"912935","name":"Choaspes","startOffset":2173,"endOffset":2181},{"placeId":"912936","name":"Susa","startOffset":2193,"endOffset":2197},{"placeId":"570480","name":"Messenians","startOffset":2447,"endOffset":2457},{"placeId":"570102","name":"Arcadians","startOffset":2501,"endOffset":2510},{"placeId":"570106","name":"Argives","startOffset":2515,"endOffset":2522},{"placeId":"599799","name":"Milesian","startOffset":2769,"endOffset":2777}]},{"id":50,"text":"At that time, then, they got so far. When, on the day appointed for the answer, they came to the place upon which they had agreed, Cleomenes asked Aristagoras how many days' journey it was from the Ionian sea to the king. [2] Till now, Aristagoras had been cunning and fooled the Spartan well, but here he made a false step. If he desired to take the Spartans away into Asia he should never have told the truth, but he did tell it, and said that it was a three months' journey inland. [3] At that, Cleomenes cut short Aristagoras' account of the prospective journey. He then bade his Milesian guest depart from Sparta before sunset, for never, he said, would the Lacedaemonians listen to the plan, if Aristagoras desired to lead them a three months' journey from the sea.","places":[{"placeId":"1046","name":"Ionian sea","startOffset":198,"endOffset":208},{"placeId":"570685","name":"Spartan","startOffset":280,"endOffset":287},{"placeId":"570685","name":"Spartans","startOffset":351,"endOffset":359},{"placeId":"599799","name":"Milesian","startOffset":584,"endOffset":592},{"placeId":"570685","name":"Sparta","startOffset":611,"endOffset":617},{"placeId":"570406","name":"Lacedaemonians","startOffset":663,"endOffset":677},{"placeId":"560221","name":"sea","startOffset":767,"endOffset":770}]},{"id":51,"text":"Cleomenes went to his house after this exchange, but Aristagoras took a suppliant's garb and followed him there. Upon entering, he used a suppliant's right to beg Cleomenes to listen to him. He first asked Cleomenes to send away the child, his daughter Gorgo, who was standing by him. She was his only child, and was about eight or nine years of age. Cleomenes bade him say whatever he wanted and not let the child's presence hinder him. [2] Then Aristagoras began to promise Cleomenes from ten talents upwards, if he would grant his request. When Cleomenes refused, Aristagoras offered him ever more and more. When he finally promised fifty talents the child cried out, Father, the stranger will corrupt you, unless you leave him and go away. [3] Cleomenes was pleased with the child's counsel and went into another room while Aristagoras departed from Sparta, finding no further occasion for telling of the journey inland to the king's palace.","places":[{"placeId":"570685","name":"Sparta","startOffset":856,"endOffset":862}]},{"id":52,"text":"Now the nature of this road20 is as I will show. All along it are the king's road stations and very good resting places, and the whole of it passes through country that is inhabited and safe. Its course through Lydia and Phrygia is of the length of twenty stages, and ninety-four and a half parasangs. [2] Next after Phrygia it comes to the river Halys, where there is both a defile which must be passed before the river can be crossed and a great fortress to guard it. After the passage into Cappadocia, the road in that land as far as the borders of Cilicia is of twenty-eight stages and one hundred and four parasangs. On this frontier you must ride through two defiles and pass two fortresses. [3] Ride past these, and you will have a journey through Cilica of three stages and fifteen and a half parasangs. The boundary of Cilicia and Armenia is a navigable river, the name of which is the Euphrates. In Armenia there are fifteen resting-stages and fifty-six and a half parasangs. Here too there is a fortress. From Armenia the road enters the Matienian land, in which there are thirty-four stages and one hundred and thirty-seven parasangs. [4] Through this land flow four navigable rivers which must be passed by ferries, first the Tigris, then a second and a third of the same name, yet not the same stream nor flowing from the same source. The first-mentioned of them flows from the Armenians and the second from the Matieni. [5] The fourth river is called Gyndes, that Gyndes which Cyrus parted once into three hundred and sixty channels.21 [6] When this country is passed, the road is in the Cissian land, where there are eleven stages and forty-two and a half parasangs, as far as yet another navigable river, the Choaspes, on the banks of which stands the city of Susa.","places":[{"placeId":"550701","name":"Lydia","startOffset":211,"endOffset":216},{"placeId":"609502","name":"Phrygia","startOffset":221,"endOffset":228},{"placeId":"609502","name":"Phrygia","startOffset":317,"endOffset":324},{"placeId":"857148","name":"Halys","startOffset":347,"endOffset":352},{"placeId":"991402","name":"Cappadocia","startOffset":493,"endOffset":503},{"placeId":"628957","name":"Cilicia","startOffset":552,"endOffset":559},{"placeId":"658440","name":"Cilica","startOffset":755,"endOffset":761},{"placeId":"628957","name":"Cilicia","startOffset":828,"endOffset":835},{"placeId":"981507","name":"Armenia","startOffset":840,"endOffset":847},{"placeId":"912849","name":"Euphrates","startOffset":895,"endOffset":904},{"placeId":"981507","name":"Armenia","startOffset":909,"endOffset":916},{"placeId":"981507","name":"Armenia","startOffset":1021,"endOffset":1028},{"placeId":"884179","name":"Matienian","startOffset":1049,"endOffset":1058},{"placeId":"874545","name":"Tigris","startOffset":1239,"endOffset":1245},{"placeId":"874350","name":"Armenians","startOffset":1392,"endOffset":1401},{"placeId":"884179","name":"Matieni","startOffset":1426,"endOffset":1433},{"placeId":"897772","name":"Gyndes","startOffset":1466,"endOffset":1472},{"placeId":"897772","name":"Gyndes","startOffset":1479,"endOffset":1485},{"placeId":"906014","name":"Cissian","startOffset":1603,"endOffset":1610},{"placeId":"912935","name":"Choaspes","startOffset":1726,"endOffset":1734},{"placeId":"912936","name":"Susa","startOffset":1777,"endOffset":1781}]},{"id":53,"text":"Thus the sum total of stages is one hundred and eleven. So many resting-stages, then, are there in the journey up from Sardis to Susa. If I have accurately counted the parasangs of the royal road, and the parasang is of thirty furlongs' length, which assuredly it is, then between Sardis and the king's abode called Memnonian22 there are thirteen thousand and five hundred furlongs, the number of parasangs being four hundred and fifty. If each day's journey is one hundred and fifty furlongs, then the sum of days spent is ninety, neither more nor less.","places":[{"placeId":"550867","name":"Sardis","startOffset":119,"endOffset":125},{"placeId":"912936","name":"Susa","startOffset":129,"endOffset":133},{"placeId":"550867","name":"Sardis","startOffset":281,"endOffset":287},{"placeId":"912936","name":"Memnonian","startOffset":316,"endOffset":325}]},{"id":54,"text":"Aristagoras of Miletus accordingly spoke the truth to Cleomenes the Lacedaemonian when he said that the journey inland was three months long. If anyone should desire a more exact measurement, I will give him that too, for the journey from Ephesus to Sardis must be added to the rest. [2] So, then, from the Greek sea to Susa, which is the city called Memnonian, it is a journey of fourteen thousand and forty stages, for there are five hundred and forty furlongs from Ephesus to Sardis. The three months' journey is accordingly made longer by three days.","places":[{"placeId":"599799","name":"Miletus","startOffset":15,"endOffset":22},{"placeId":"570406","name":"Lacedaemonian","startOffset":68,"endOffset":81},{"placeId":"599612","name":"Ephesus","startOffset":239,"endOffset":246},{"placeId":"550867","name":"Sardis","startOffset":250,"endOffset":256},{"placeId":"560221","name":"Greek sea","startOffset":307,"endOffset":316},{"placeId":"912936","name":"Susa","startOffset":320,"endOffset":324},{"placeId":"912936","name":"Memnonian","startOffset":351,"endOffset":360},{"placeId":"599612","name":"Ephesus","startOffset":468,"endOffset":475},{"placeId":"550867","name":"Sardis","startOffset":479,"endOffset":485}]},{"id":55,"text":"When he was forced to leave Sparta, Aristagoras went to Athens, which had been freed from its ruling tyrants in the manner that I will show. First Hipparchus, son of Pisistratus and brother of the tyrant Hippias, had been slain by Aristogiton and Harmodius, men of Gephyraean descent. This was in fact an evil of which he had received a premonition in a dream. After this the Athenians were subject for four years to a tyranny not less but even more absolute than before.","places":[{"placeId":"570685","name":"Sparta","startOffset":28,"endOffset":34},{"placeId":"579885","name":"Athens","startOffset":56,"endOffset":62},{"placeId":"491600","name":"Gephyraean","startOffset":265,"endOffset":275},{"placeId":"579885","name":"Athenians","startOffset":376,"endOffset":385}]},{"id":56,"text":"Now this was the vision which Hipparchus saw in a dream: in the night before the Panathenaea he thought that a tall and handsome man stood over him uttering these riddling verses: O lion, endure the unendurable with a lion's heart. No man on earth does wrong without paying the penalty.  [2]As soon as it was day, he imparted this to the interpreters of dreams, and presently putting the vision from his mind, he led the procession in which he met his death.23","places":[]},{"id":57,"text":"Now the Gephyraean clan, of which the slayers of Hipparchus were members, claim to have come at first from Eretria, but my own enquiry shows that they were among the Phoenicians24 who came with Cadmus to the country now called Boeotia. In that country the lands of Tanagra were allotted to them, and this is where they settled. [2] The Cadmeans had first been expelled from there by the Argives,25 and these Gephyraeans were forced to go to Athens after being expelled in turn by the Boeotians. The Athenians received them as citizens of their own on set terms, debarring them from many practices not deserving of mention here.","places":[{"placeId":"658472","name":"Gephyraean","startOffset":8,"endOffset":18},{"placeId":"579925","name":"Eretria","startOffset":107,"endOffset":114},{"placeId":"678334","name":"Phoenicians","startOffset":166,"endOffset":177},{"placeId":"540689","name":"Boeotia","startOffset":227,"endOffset":234},{"placeId":"580114","name":"Tanagra","startOffset":265,"endOffset":272},{"placeId":"678334","name":"Cadmeans","startOffset":336,"endOffset":344},{"placeId":"570106","name":"Argives","startOffset":387,"endOffset":394},{"placeId":"658472","name":"Gephyraeans","startOffset":408,"endOffset":419},{"placeId":"579885","name":"Athens","startOffset":441,"endOffset":447},{"placeId":"540689","name":"Boeotians","startOffset":484,"endOffset":493},{"placeId":"579885","name":"Athenians","startOffset":499,"endOffset":508}]},{"id":58,"text":"These Phoenicians who came with Cadmus and of whom the Gephyraeans were a part brought with them to Hellas, among many other kinds of learning, the alphabet, which had been unknown before this, I think, to the Greeks. As time went on the sound and the form of the letters were changed. [2] At this time the Greeks who were settled around them were for the most part Ionians, and after being taught the letters by the Phoenicians, they used them with a few changes of form. In so doing, they gave to these characters the name of Phoenician, as was quite fair seeing that the Phoenicians had brought them into Greece.26 [3] The Ionians have also from ancient times called sheets of papyrus skins, since they formerly used the skins of sheep and goats due to the lack of papyrus. Even to this day there are many foreigners who write on such skins.","places":[{"placeId":"678334","name":"Phoenicians","startOffset":6,"endOffset":17},{"placeId":"658472","name":"Gephyraeans","startOffset":55,"endOffset":66},{"placeId":"geonames-390903","name":"Hellas","startOffset":100,"endOffset":106},{"placeId":"geonames-390903","name":"Greeks","startOffset":210,"endOffset":216},{"placeId":"geonames-390903","name":"Greeks","startOffset":307,"endOffset":313},{"placeId":"550597","name":"Ionians","startOffset":366,"endOffset":373},{"placeId":"678334","name":"Phoenicians","startOffset":417,"endOffset":428},{"placeId":"678334","name":"Phoenician","startOffset":528,"endOffset":538},{"placeId":"678334","name":"Phoenicians","startOffset":574,"endOffset":585},{"placeId":"geonames-390903","name":"Greece","startOffset":608,"endOffset":614},{"placeId":"550597","name":"Ionians","startOffset":626,"endOffset":633}]},{"id":59,"text":"I have myself seen Cadmean writing in the temple of Ismenian Apollo at Thebes of Boeotia engraved on certain tripods and for the most part looking like Ionian letters. On one of the tripods there is this inscription: Amphitryon dedicated me from the spoils of27 Teleboae. This would date from about the time of Laius the son of Labdacus, grandson of Polydorus and great-grandson of Cadmus.","places":[{"placeId":"678334","name":"Cadmean","startOffset":19,"endOffset":26},{"placeId":"541138","name":"Thebes","startOffset":71,"endOffset":77},{"placeId":"540689","name":"Boeotia","startOffset":81,"endOffset":88},{"placeId":"550597","name":"Ionian","startOffset":152,"endOffset":158}]},{"id":60,"text":"A second tripod says, in hexameter verse: Scaeus the boxer, victorious in the contest, Gave me to Apollo, the archer god, a lovely offering. Scaeus the son of Hippocoon, if he is indeed the dedicator and not another of the same name, would have lived at the time of Oedipus son of Laius.","places":[]},{"id":61,"text":"The third tripod says, in hexameter verse again: Laodamas, while he reigned, dedicated this cauldron To Apollo, the sure of aim, as a lovely offering.  [2]During the rule of this Laodamas son of Eteocles, the Cadmeans were expelled by the Argives and went away to the Encheleis. The Gephyraeans were left behind but were later compelled by the Boeotians to withdraw to Athens. They have certain set forms of worship at Athens in which the rest of the Athenians take no part, particularly the rites and mysteries of Achaean Demeter.","places":[{"placeId":"678334","name":"Cadmeans","startOffset":211,"endOffset":219},{"placeId":"570106","name":"Argives","startOffset":241,"endOffset":248},{"placeId":"481829","name":"Encheleis","startOffset":270,"endOffset":279},{"placeId":"491600","name":"Gephyraeans","startOffset":285,"endOffset":296},{"placeId":"540689","name":"Boeotians","startOffset":346,"endOffset":355},{"placeId":"579885","name":"Athens","startOffset":371,"endOffset":377},{"placeId":"579885","name":"Athens","startOffset":421,"endOffset":427},{"placeId":"579885","name":"Athenians","startOffset":453,"endOffset":462},{"placeId":"981502","name":"Achaean","startOffset":517,"endOffset":524}]},{"id":62,"text":"I have told both of the vision of Hipparchus' dream and of the first origin of the Gephyreans, to whom the slayers of Hipparchus belonged. Now I must go further and return to the story which I began to tell, namely how the Athenians were freed from their tyrants. [2] Hippias, their tyrant, was growing ever more bitter in enmity against the Athenians because of Hipparchus' death, and the Alcmeonidae, a family of Athenian stock banished by the sons of Pisistratus, attempted with the rest of the exiled Athenians to make their way back by force and free Athens. They were not successful in their return and suffered instead a great reverse. After fortifying Lipsydrium north of Paeonia, they, in their desire to use all devices against the sons of Pisistratus, hired themselves to the Amphictyons for the building of the temple at Delphi which exists now but was not there yet then. [3] Since they were wealthy and like their fathers men of reputation, they made the temple more beautiful than the model showed. In particular, whereas they had agreed to build the temple of tufa, they made its front of Parian marble.","places":[{"placeId":"658472","name":"Gephyreans","startOffset":83,"endOffset":93},{"placeId":"579885","name":"Athenians","startOffset":223,"endOffset":232},{"placeId":"579885","name":"Athenians","startOffset":342,"endOffset":351},{"placeId":"579885","name":"Athenian","startOffset":415,"endOffset":423},{"placeId":"579885","name":"Athenians","startOffset":505,"endOffset":514},{"placeId":"579885","name":"Athens","startOffset":556,"endOffset":562},{"placeId":"580011","name":"Lipsydrium","startOffset":660,"endOffset":670},{"placeId":"491680","name":"Paeonia","startOffset":680,"endOffset":687},{"placeId":"540726","name":"Delphi","startOffset":833,"endOffset":839},{"placeId":"599868","name":"Parian","startOffset":1105,"endOffset":1111}]},{"id":63,"text":"These men, as the Athenians say, established themselves at Delphi and bribed the Pythian priestess to bid any Spartans who should come to inquire of her on a private or a public account to set Athens free. [2] Then the Lacedaemonians, when the same command was ever revealed to them, sent Anchimolius the son of Aster, a citizen of repute, to drive out the sons of Pisistratus with an army despite the fact that the Pisistratidae were their close friends, for the god's will weighed with them more than the will of man. [3] They sent these men by sea on shipboard. Anchimolius put in at Phalerum and disembarked his army there. The sons of Pisistratus, however, had received word of the plan already, and sent to ask help from the Thessalians with whom they had an alliance. The Thessalians, at their entreaty, joined together and sent their own king, Cineas of Conium, with a thousand horsemen. When the Pisistratidae got these allies, they devised the following plan. [4] First they laid waste the plain of Phalerum so that all that land could be ridden over and then launched their cavalry against the enemy's army. Then the horsemen charged and slew Anchimolius and many more of the Lacedaemonians, and drove those that survived to their ships. Accordingly, the first Lacedaemonian army drew off, and Anchimolius' tomb is at Alopecae in Attica, near to the Heracleum in Cynosarges.28","places":[{"placeId":"579885","name":"Athenians","startOffset":18,"endOffset":27},{"placeId":"540726","name":"Delphi","startOffset":59,"endOffset":65},{"placeId":"570685","name":"Spartans","startOffset":110,"endOffset":118},{"placeId":"579885","name":"Athens","startOffset":193,"endOffset":199},{"placeId":"570406","name":"Lacedaemonians","startOffset":219,"endOffset":233},{"placeId":"580072","name":"Phalerum","startOffset":587,"endOffset":595},{"placeId":"1332","name":"Thessalians","startOffset":731,"endOffset":742},{"placeId":"1332","name":"Thessalians","startOffset":779,"endOffset":790},{"placeId":"614635","name":"Conium","startOffset":862,"endOffset":868},{"placeId":"580072","name":"Phalerum","startOffset":1009,"endOffset":1017},{"placeId":"570406","name":"Lacedaemonians","startOffset":1187,"endOffset":1201},{"placeId":"570406","name":"Lacedaemonian","startOffset":1272,"endOffset":1285},{"placeId":"579858","name":"Alopecae","startOffset":1329,"endOffset":1337},{"placeId":"579888","name":"Attica","startOffset":1341,"endOffset":1347},{"placeId":"580002","name":"Cynosarges","startOffset":1374,"endOffset":1384}]},{"id":64,"text":"After this the Lacedaemonians sent out a greater army to attack Athens, appointing as its general their king Cleomenes son of Anaxandrides. This army they sent not by sea but by land. [2] When they broke into Attica, the Thessalian horsemen were the first to meet them. They were routed after only a short time, and more than forty men were slain. Those who were left alive made off for Thessaly by the nearest way they could. Then Cleomenes, when he and the Athenians who desired freedom came into the city, drove the tyrants' family within the Pelasgic wall29 and besieged them there.","places":[{"placeId":"570406","name":"Lacedaemonians","startOffset":15,"endOffset":29},{"placeId":"579885","name":"Athens","startOffset":64,"endOffset":70},{"placeId":"579888","name":"Attica","startOffset":209,"endOffset":215},{"placeId":"1332","name":"Thessalian","startOffset":221,"endOffset":231},{"placeId":"1332","name":"Thessaly","startOffset":387,"endOffset":395},{"placeId":"579885","name":"Athenians","startOffset":459,"endOffset":468}]},{"id":65,"text":"The Lacedaemonians would never have taken the Pisistratid stronghold. First of all they had no intention to blockade it, and secondly the Pisistratidae were well furnished with food and drink. The Lacedaemonians would only have besieged the place for a few days and then returned to Sparta. As it was, however, there was a turn of fortune which harmed the one party and helped the other, for the sons of the Pisistratid family were taken as they were being secretly carried out of the country. [2] When this happened, all their plans were confounded, and they agreed to depart from Attica within five days on the terms prescribed to them by the Athenians in return for the recovery of their children. [3] Afterwards they departed to Sigeum on the Scamander. They had ruled the Athenians for thirty-six years30 and were in lineage of the house of Pylos and Neleus, born of the same ancestors as the families of Codrus and Melanthus, who had formerly come from foreign parts to be kings of Athens. [4] It was for this reason that Hippocrates gave his son the name Pisistratus as a remembrance, calling him after Pisistratus the son of Nestor. [5] This is the way, then, that the Athenians got rid of their tyrants. As regards all the noteworthy things which they did or endured after they were freed and before Ionia revolted from Darius and Aristagoras of Miletus came to Athens to ask help of its people, of these I will first give an account.","places":[{"placeId":"570406","name":"Lacedaemonians","startOffset":4,"endOffset":18},{"placeId":"570406","name":"Lacedaemonians","startOffset":197,"endOffset":211},{"placeId":"570685","name":"Sparta","startOffset":283,"endOffset":289},{"placeId":"579888","name":"Attica","startOffset":582,"endOffset":588},{"placeId":"579885","name":"Athenians","startOffset":645,"endOffset":654},{"placeId":"550877","name":"Sigeum","startOffset":733,"endOffset":739},{"placeId":"550871","name":"Scamander","startOffset":747,"endOffset":756},{"placeId":"579885","name":"Athenians","startOffset":777,"endOffset":786},{"placeId":"579885","name":"Athens","startOffset":988,"endOffset":994},{"placeId":"579885","name":"Athenians","startOffset":1177,"endOffset":1186},{"placeId":"550597","name":"Ionia","startOffset":1309,"endOffset":1314},{"placeId":"599799","name":"Miletus","startOffset":1355,"endOffset":1362},{"placeId":"579885","name":"Athens","startOffset":1371,"endOffset":1377}]},{"id":66,"text":"Athens, which had been great before, now grew even greater when her tyrants had been removed. The two principal holders of power were Cleisthenes an Alcmaeonid, who was reputed to have bribed the Pythian priestess, and Isagoras son of Tisandrus, a man of a notable house but his lineage I cannot say. His kinsfolk, at any rate, sacrifice to Zeus of Caria. [2] These men with their factions fell to contending for power, Cleisthenes was getting the worst of it in this dispute and took the commons into his party.31 Presently he divided the Athenians into ten tribes instead of four as formerly. He called none after the names of the sons of IonGeleon, Aegicores, Argades, and Hoplesbut invented for them names taken from other heroes, all native to the country except Aias. Him he added despite the fact that he was a stranger because he was a neighbor and an ally.","places":[{"placeId":"579885","name":"Athens","startOffset":0,"endOffset":6},{"placeId":"991381","name":"Caria","startOffset":349,"endOffset":354},{"placeId":"579885","name":"Athenians","startOffset":540,"endOffset":549}]},{"id":67,"text":"In doing this, to my thinking, this Cleisthenes was imitating his own mother's father, Cleisthenes the tyrant of Sicyon,32 for Cleisthenes, after going to war with the Argives, made an end of minstrels' contests at Sicyon by reason of the Homeric poems, in which it is the Argives and Argos which are primarily the theme of the songs. Furthermore, he conceived the desire to cast out from the land Adrastus son of Talaus, the hero whose shrine stood then as now in the very marketplace of Sicyon because he was an Argive. [2] He went then to Delphi, and asked the oracle if he should cast Adrastus out, but the priestess said in response: Adrastus is king of Sicyon, and you but a stone thrower. When the god would not permit him to do as he wished in this matter, he returned home and attempted to devise some plan which might rid him of Adrastus. When he thought he had found one, he sent to Boeotian Thebes saying that he would gladly bring Melanippus son of Astacus into his country, and the Thebans handed him over. [3] When Cleisthenes had brought him in, he consecrated a sanctuary for him in the government house itself, where he was established in the greatest possible security. Now the reason why Cleisthenes brought in Melanippus, a thing which I must relate, was that Melanippus was Adrastus' deadliest enemy, for Adrastus had slain his brother Mecisteus and his son-in-law Tydeus. [4] Having then designated the precinct for him, Cleisthenes took away all Adrastus' sacrifices and festivals and gave them to Melanippus. The Sicyonians had been accustomed to pay very great honor to Adrastus because the country had once belonged to Polybus, his maternal grandfather, who died without an heir and bequeathed the kingship to him. [5] Besides other honors paid to Adrastus by the Sicyonians, they celebrated his lamentable fate with tragic choruses in honor not of Dionysus but of Adrastus. Cleisthenes, however, gave the choruses back to Dionysus and the rest of the worship to Melanippus.","places":[{"placeId":"570668","name":"Sicyon","startOffset":113,"endOffset":119},{"placeId":"570106","name":"Argives","startOffset":168,"endOffset":175},{"placeId":"570668","name":"Sicyon","startOffset":215,"endOffset":221},{"placeId":"570106","name":"Argives","startOffset":273,"endOffset":280},{"placeId":"570106","name":"Argos","startOffset":285,"endOffset":290},{"placeId":"570668","name":"Sicyon","startOffset":489,"endOffset":495},{"placeId":"570106","name":"Argive","startOffset":514,"endOffset":520},{"placeId":"540726","name":"Delphi","startOffset":542,"endOffset":548},{"placeId":"570668","name":"Sicyon","startOffset":660,"endOffset":666},{"placeId":"540689","name":"Boeotian","startOffset":896,"endOffset":904},{"placeId":"541138","name":"Thebes","startOffset":905,"endOffset":911},{"placeId":"541138","name":"Thebans","startOffset":998,"endOffset":1005},{"placeId":"570668","name":"Sicyonians","startOffset":1540,"endOffset":1550},{"placeId":"570668","name":"Sicyonians","startOffset":1793,"endOffset":1803}]},{"id":68,"text":"This, then, is what he did regarding Adrastus, but as for the tribes of the Dorians, he changed their names so that these tribes should not be shared by Sicyonians and Argives. In this especially he made a laughing-stock of the Sicyonians, for he gave the tribes names derived from the words donkey and pig changing only the endings. The name of his own tribe, however, he did not change in this way, but rather gave it a name indicating his own rule, calling it Archelaoi, rulers of the people. The rest were Swinites, Assites and Porkites. [2] These were the names of the tribes which the Sicyonians used under Cleisthenes' rule and for sixty years more after his death. Afterwards, however, they took counsel together and both changed the names of three to Hylleis, Pamphyli, and Dymanatae, and added a fourth which they called Aegialeis after Aegialeus son of Adrastus.","places":[{"placeId":"570668","name":"Sicyonians","startOffset":153,"endOffset":163},{"placeId":"570106","name":"Argives","startOffset":168,"endOffset":175},{"placeId":"570668","name":"Sicyonians","startOffset":228,"endOffset":238},{"placeId":"570668","name":"Sicyonians","startOffset":595,"endOffset":605}]},{"id":69,"text":"This is what the Sicyonian Cleisthenes had done, and the Athenian Cleisthenes, following the lead of his grandfather and namesake, decided out of contempt, I imagine, for the Ionians, that his tribes should not be the same as theirs. [2] When he had drawn into his own party the Athenian people, which was then debarred from all rights, he gave the tribes new names and increased their number, making ten tribe-wardens in place of four, and assigning ten districts to each tribe. When he had won over the people, he was stronger by far than the rival faction.","places":[{"placeId":"570668","name":"Sicyonian","startOffset":17,"endOffset":26},{"placeId":"579885","name":"Athenian","startOffset":57,"endOffset":65},{"placeId":"550597","name":"Ionians","startOffset":175,"endOffset":182},{"placeId":"579885","name":"Athenian","startOffset":279,"endOffset":287}]},{"id":70,"text":"Isagoras, who was on the losing side, devised a counter-plot, and invited the aid of Cleomenes, who had been his friend since the besieging of the Pisistratidae. It was even said of Cleomenes that he regularly went to see Isagoras' wife. [2] Then Cleomenes first sent a herald to Athens demanding the banishment of Cleisthenes and many other Athenians with him, the Accursed, as he called them. This he said in his message by Isagoras' instruction, for the Alcmeonidae and their faction were held to be guilty of that bloody deed while Isagoras and his friends had no part in it.","places":[{"placeId":"579885","name":"Athens","startOffset":280,"endOffset":286},{"placeId":"579885","name":"Athenians","startOffset":342,"endOffset":351}]},{"id":71,"text":"How the Accursed at Athens had received their name, I will now relate. There was an Athenian named Cylon, who had been a winner at Olympia. This man put on the air of one who aimed at tyranny, and gathering a company of men of like age, he attempted to seize the citadel. When he could not win it, he took sanctuary by the goddess' statue. [2] He and his men were then removed from their position by the presidents of the naval boards,33 the rulers of Athens at that time. Although they were subject to any penalty save death, they were slain, and their death was attributed to the Alcmaeonidae. All this took place before the time of Pisistratus.34","places":[{"placeId":"579885","name":"Athens","startOffset":20,"endOffset":26},{"placeId":"579885","name":"Athenian","startOffset":84,"endOffset":92},{"placeId":"570531","name":"Olympia","startOffset":131,"endOffset":138},{"placeId":"579885","name":"Athens","startOffset":452,"endOffset":458}]},{"id":72,"text":"When Cleomenes had sent for and demanded the banishment of Cleisthenes and the Accursed, Cleisthenes himself secretly departed. Afterwards, however, Cleomenes appeared in Athens with no great force. Upon his arrival, he, in order to take away the curse, banished seven hundred Athenian families named for him by Isagoras. Having so done he next attempted to dissolve the Council,35 entrusting the offices of government to Isagoras' faction. [2] The Council, however, resisted him, whereupon Cleomenes and Isagoras and his partisans seized the acropolis. The rest of the Athenians united and besieged them for two days. On the third day as many of them as were Lacedaemonians left the country under truce. [3] The prophetic voice that Cleomenes heard accordingly had its fulfillment, for when he went up to the acropolis with the intention of taking possession of it, he approached the shrine of the goddess to address himself to her. The priestess rose up from her seat, and before he had passed through the door-way, she said, Go back, Lacedaemonian stranger, and do not enter the holy place since it is not lawful that Dorians should pass in here. My lady, he answered, I am not a Dorian, but an Achaean. [4] So without taking heed of the omen, he tried to do as he pleased and was, as I have said, then again cast out together with his Lacedaemonians. As for the rest, the Athenians imprisoned them under sentence of death. Among the prisoners was Timesitheus the Delphian, whose achievements of strength and courage were quite formidable.","places":[{"placeId":"579885","name":"Athens","startOffset":171,"endOffset":177},{"placeId":"579885","name":"Athenian","startOffset":277,"endOffset":285},{"placeId":"579885","name":"Athenians","startOffset":570,"endOffset":579},{"placeId":"570406","name":"Lacedaemonians","startOffset":660,"endOffset":674},{"placeId":"570406","name":"Lacedaemonian","startOffset":1038,"endOffset":1051},{"placeId":"981502","name":"Achaean","startOffset":1202,"endOffset":1209},{"placeId":"570406","name":"Lacedaemonians","startOffset":1344,"endOffset":1358},{"placeId":"579885","name":"Athenians","startOffset":1381,"endOffset":1390},{"placeId":"540726","name":"Delphian","startOffset":1472,"endOffset":1480}]},{"id":73,"text":"These men, then, were bound and put to death. After that, the Athenians sent to bring back Cleisthenes and the seven hundred households banished by Cleomenes. Then, desiring to make an alliance with the Persians, they despatched envoys to Sardis, for they knew that they had provoked the Lacedaemonians and Cleomenes to war. [2] When the envoys came to Sardis and spoke as they had been bidden, Artaphrenes son of Hystaspes, viceroy of Sardis, asked them, What men are you and where do you live, who desire alliance with the Persians? When he had received the information he wanted from the envoys, he gave them an answer the substance of which was that if the Athenians gave king Darius earth and water, then he would make an alliance with them, but if not, his command was that they should depart. [3] The envoys consulted together, and in their desire to make the alliance, they consented to give what was asked. They then returned to their own country and were there greatly blamed for what they had done.","places":[{"placeId":"579885","name":"Athenians","startOffset":62,"endOffset":71},{"placeId":"geonames-130758","name":"Persians","startOffset":203,"endOffset":211},{"placeId":"550867","name":"Sardis","startOffset":239,"endOffset":245},{"placeId":"570406","name":"Lacedaemonians","startOffset":288,"endOffset":302},{"placeId":"550867","name":"Sardis","startOffset":353,"endOffset":359},{"placeId":"550867","name":"Sardis","startOffset":436,"endOffset":442},{"placeId":"geonames-130758","name":"Persians","startOffset":526,"endOffset":534},{"placeId":"579885","name":"Athenians","startOffset":663,"endOffset":672}]},{"id":74,"text":"Cleomenes, however, fully aware that the Athenians had done him wrong in word and deed, mustered an army from the whole of the Peloponnesus. He did not declare the purpose for which he mustered it, namely to avenge himself on the Athenian people and set up Isagoras, who had come with him out of the acropolis, as tyrant. [2] Cleomenes broke in as far as Eleusis with a great host, and the Boeotians, by a concerted plan, took Oenoe and Hysiae, districts on the borders of Attica, while the Chalcidians attacked on another side and raided lands in Attica. The Athenians, who were now caught in a ring of foes, decided to oppose the Spartans at Eleusis and to deal with the Boeotians and Chalcidians later.","places":[{"placeId":"579885","name":"Athenians","startOffset":41,"endOffset":50},{"placeId":"570577","name":"Peloponnesus","startOffset":127,"endOffset":139},{"placeId":"579885","name":"Athenian","startOffset":230,"endOffset":238},{"placeId":"579920","name":"Eleusis","startOffset":355,"endOffset":362},{"placeId":"540689","name":"Boeotians","startOffset":390,"endOffset":399},{"placeId":"580039","name":"Oenoe","startOffset":427,"endOffset":432},{"placeId":"540831","name":"Hysiae","startOffset":437,"endOffset":443},{"placeId":"579888","name":"Attica","startOffset":473,"endOffset":479},{"placeId":"540703","name":"Chalcidians","startOffset":491,"endOffset":502},{"placeId":"579888","name":"Attica","startOffset":548,"endOffset":554},{"placeId":"579885","name":"Athenians","startOffset":560,"endOffset":569},{"placeId":"570685","name":"Spartans","startOffset":632,"endOffset":640},{"placeId":"579920","name":"Eleusis","startOffset":644,"endOffset":651},{"placeId":"540689","name":"Boeotians","startOffset":673,"endOffset":682},{"placeId":"540703","name":"Chalcidians","startOffset":687,"endOffset":698}]},{"id":75,"text":"When the armies were about to join battle, the Corinthians, coming to the conclusion that they were acting wrongly, changed their minds and departed. Later Demaratus son of Ariston, the other king of Sparta, did likewise, despite the fact that he had come with Cleomenes from Lacedaemon in joint command of the army and had not till now been at variance with him. [2] As a result of this dissension, a law was made at Sparta that when an army was despatched, both kings would not be permitted to go with it. Until that time they had both gone together, but now one of the kings was released from service and one of the sons of Tyndarus too could be left at home. Before that time, both of these also were asked to give aid and went with the army. [3] So now at Eleusis, when the rest of the allies saw that the Lacedaemonian kings were not of one mind and that the Corinthians had left their host, they too went off.","places":[{"placeId":"570182","name":"Corinthians","startOffset":47,"endOffset":58},{"placeId":"570685","name":"Sparta","startOffset":200,"endOffset":206},{"placeId":"570406","name":"Lacedaemon","startOffset":276,"endOffset":286},{"placeId":"570685","name":"Sparta","startOffset":418,"endOffset":424},{"placeId":"579920","name":"Eleusis","startOffset":761,"endOffset":768},{"placeId":"570406","name":"Lacedaemonian","startOffset":811,"endOffset":824},{"placeId":"570182","name":"Corinthians","startOffset":865,"endOffset":876}]},{"id":76,"text":"This was the fourth time that Dorians had come into Attica. They had come twice as invaders in war and twice as helpers of the Athenian people. The first time was when they planted a settlement at Megara36(this expedition may rightly be said to have been in the reign of Codrus), the second and third when they set out from Sparta to drive out the sons of Pisistratus, and the fourth was now, when Cleomenes broke in as far as Eleusis with his following of Peloponnesians. This was accordingly the fourth Dorian invasion of Athens.","places":[{"placeId":"579888","name":"Attica","startOffset":52,"endOffset":58},{"placeId":"579885","name":"Athenian","startOffset":127,"endOffset":135},{"placeId":"570468","name":"Megara","startOffset":197,"endOffset":203},{"placeId":"570685","name":"Sparta","startOffset":324,"endOffset":330},{"placeId":"579920","name":"Eleusis","startOffset":427,"endOffset":434},{"placeId":"570577","name":"Peloponnesians","startOffset":457,"endOffset":471},{"placeId":"579885","name":"Athens","startOffset":524,"endOffset":530}]},{"id":77,"text":"When this force then had been ingloriously scattered, the Athenians first marched against the Chalcidians to punish them. The Boeotians came to the Euripus to help the Chalcidians and as soon as the Athenians saw these allies, they resolved to attack the Boeotians before the Chalcidians. [2] When they met the Boeotians in battle, they won a great victory, slaying very many and taking seven hundred of them prisoner. On that same day the Athenians crossed to Euboea where they met the Chalcidians too in battle, and after overcoming them as well, they left four thousand tenant farmers37 on the lands of the horse-breeders. [3] Horse-breeders was the name given to the men of substance among the Chalcidians. They fettered as many of these as they took alive and kept them imprisoned with the captive Boeotians. In time, however, they set them free, each for an assessed ransom of two minae. The fetters in which the prisoners had been bound they hung up in the acropolis, where they could still be seen in my time hanging from walls which the Persians' fire had charred, opposite the temple which faces west. [4] Moreover, they made a dedication of a tenth part of the ransom, and this money was used for the making of a four-horse chariot which stands on the left hand of the entrance into the outer porch of the acropolis and38 bears this inscription: Athens with Chalcis and Boeotia fought, Bound them in chains and brought their pride to naught. Prison was grief, and ransom cost them dear- One tenth to Pallas raised this chariot here. ","places":[{"placeId":"579885","name":"Athenians","startOffset":58,"endOffset":67},{"placeId":"540703","name":"Chalcidians","startOffset":94,"endOffset":105},{"placeId":"540689","name":"Boeotians","startOffset":126,"endOffset":135},{"placeId":"540783","name":"Euripus","startOffset":148,"endOffset":155},{"placeId":"540703","name":"Chalcidians","startOffset":168,"endOffset":179},{"placeId":"579885","name":"Athenians","startOffset":199,"endOffset":208},{"placeId":"540689","name":"Boeotians","startOffset":255,"endOffset":264},{"placeId":"540703","name":"Chalcidians","startOffset":276,"endOffset":287},{"placeId":"540689","name":"Boeotians","startOffset":311,"endOffset":320},{"placeId":"579885","name":"Athenians","startOffset":440,"endOffset":449},{"placeId":"540775","name":"Euboea","startOffset":461,"endOffset":467},{"placeId":"540703","name":"Chalcidians","startOffset":487,"endOffset":498},{"placeId":"540703","name":"Chalcidians","startOffset":698,"endOffset":709},{"placeId":"540689","name":"Boeotians","startOffset":803,"endOffset":812},{"placeId":"geonames-130758","name":"Persians","startOffset":1046,"endOffset":1054},{"placeId":"579885","name":"Athens","startOffset":1358,"endOffset":1364},{"placeId":"540703","name":"Chalcis","startOffset":1370,"endOffset":1377},{"placeId":"540689","name":"Boeotia","startOffset":1382,"endOffset":1389}]},{"id":78,"text":"So the Athenians grew in power and proved, not in one respect only but in all, that equality is a good thing. Evidence for this is the fact that while they were under tyrannical rulers, the Athenians were no better in war than any of their neighbors, yet once they got rid of their tyrants, they were by far the best of all. This, then, shows that while they were oppressed, they were, as men working for a master, cowardly, but when they were freed, each one was eager to achieve for himself.","places":[{"placeId":"579885","name":"Athenians","startOffset":7,"endOffset":16},{"placeId":"579885","name":"Athenians","startOffset":190,"endOffset":199}]},{"id":79,"text":"This, then, is the course of action which the Athenians took, and the Thebans, desiring vengeance on Athens, afterwards appealed to Delphi for advice. The Pythian priestess said that the Thebans themselves would not be able to obtain the vengeance they wanted and that they should lay the matter before the many-voiced and entreat their nearest. [2] Upon the return of the envoys, an assembly was called and the oracle put before it. When the Thebans heard that they must entreat their nearest, they said, If this is so, our nearest neighbors are the men of Tanagra and Coronea and Thespiae. These are always our comrades in battle and zealously wage our wars. What need, then, is there to entreat them? Perhaps this is the meaning of the oracle.","places":[{"placeId":"579885","name":"Athenians","startOffset":46,"endOffset":55},{"placeId":"541138","name":"Thebans","startOffset":70,"endOffset":77},{"placeId":"579885","name":"Athens","startOffset":101,"endOffset":107},{"placeId":"540726","name":"Delphi","startOffset":132,"endOffset":138},{"placeId":"541138","name":"Thebans","startOffset":187,"endOffset":194},{"placeId":"541138","name":"Thebans","startOffset":447,"endOffset":454},{"placeId":"580114","name":"Tanagra","startOffset":565,"endOffset":572},{"placeId":"540717","name":"Coronea","startOffset":577,"endOffset":584},{"placeId":"541141","name":"Thespiae","startOffset":589,"endOffset":597}]},{"id":80,"text":"They reasoned in this way, till at last one understood, and said: I think that I perceive what the oracle is trying to tell us. Thebe and Aegina, it is said, were daughters of Asopus and sisters. The god's answer is, I think, that we should ask the Aeginetans to be our avengers. [2] Seeing that there seemed to be no better opinion before them than this, they sent straightaway to entreat the Aeginetans and invite their aid, since this was the oracle's bidding, and the Aeginetans were their nearest. These replied to their demand that they were sending the Sons of Aeacus in aid.","places":[{"placeId":"579844","name":"Aegina","startOffset":139,"endOffset":145},{"placeId":"579844","name":"Aeginetans","startOffset":250,"endOffset":260},{"placeId":"579844","name":"Aeginetans","startOffset":396,"endOffset":406},{"placeId":"579844","name":"Aeginetans","startOffset":474,"endOffset":484}]},{"id":81,"text":"The Thebans took the field on the strength of their alliance with that family but were soundly beaten by the Athenians. Thereupon they sent a second message to Aegina, giving back the sons of Aeacus and asking for some men instead. [2] The Aeginetans, who were enjoying great prosperity and remembered their old feud with Athens, accordingly made war on the Athenians at the entreaty of the Thebans without sending a herald. [3] While the Athenians were busy with the Boeotians, they descended on Attica in ships of war, and ravaged Phaleron and many other seaboard townships. By so doing they dealt the Athenians a very shrewd blow.","places":[{"placeId":"541138","name":"Thebans","startOffset":4,"endOffset":11},{"placeId":"579885","name":"Athenians","startOffset":109,"endOffset":118},{"placeId":"579844","name":"Aegina","startOffset":160,"endOffset":166},{"placeId":"579844","name":"Aeginetans","startOffset":240,"endOffset":250},{"placeId":"579885","name":"Athens","startOffset":322,"endOffset":328},{"placeId":"579885","name":"Athenians","startOffset":358,"endOffset":367},{"placeId":"541138","name":"Thebans","startOffset":391,"endOffset":398},{"placeId":"579885","name":"Athenians","startOffset":439,"endOffset":448},{"placeId":"540689","name":"Boeotians","startOffset":468,"endOffset":477},{"placeId":"579888","name":"Attica","startOffset":497,"endOffset":503},{"placeId":"580072","name":"Phaleron","startOffset":533,"endOffset":541},{"placeId":"579885","name":"Athenians","startOffset":604,"endOffset":613}]},{"id":82,"text":"This was the beginning of the Aeginetans' long-standing debt of enmity against the Athenians. The Epidaurians' land bore no produce. For this reason they inquired at Delphi concerning this calamity, and the priestess bade them set up images of Damia and Auxesia,39 saying that if they so did their luck would be better. The Epidaurians then asked in addition whether they should make the images of bronze or of stone, and the priestess bade them do neither, but make them of the wood of the cultivated olive. [2] So the men of Epidaurus asked the Athenians to permit them to cut down some olive trees, supposing the olives there to be the holiest. Indeed it is said that at that time there were no olives anywhere save at Athens. [3] The Athenians consented to give the trees, if the Epidaurians would pay yearly sacred dues to Athena, the city's goddess, and to Erechtheus. The Epidaurians agreed to this condition, and their request was granted. When they set up images made of these olive trees, their land brought forth fruit, and they fulfilled their agreement with the Athenians.","places":[{"placeId":"579844","name":"Aeginetans","startOffset":30,"endOffset":40},{"placeId":"579885","name":"Athenians","startOffset":83,"endOffset":92},{"placeId":"570228","name":"Epidaurians","startOffset":98,"endOffset":109},{"placeId":"540726","name":"Delphi","startOffset":166,"endOffset":172},{"placeId":"570228","name":"Epidaurians","startOffset":324,"endOffset":335},{"placeId":"570228","name":"Epidaurus","startOffset":527,"endOffset":536},{"placeId":"579885","name":"Athenians","startOffset":547,"endOffset":556},{"placeId":"579885","name":"Athens","startOffset":722,"endOffset":728},{"placeId":"579885","name":"Athenians","startOffset":738,"endOffset":747},{"placeId":"570228","name":"Epidaurians","startOffset":784,"endOffset":795},{"placeId":"570228","name":"Epidaurians","startOffset":879,"endOffset":890},{"placeId":"579885","name":"Athenians","startOffset":1075,"endOffset":1084}]},{"id":83,"text":"Now at this time, as before it, the Aeginetans were in all matters still subject to the Epidaurians and even crossed to Epidaurus for the hearing of their own private lawsuits. From this time, however, they began to build ships, and stubbornly revolted from the Epidaurians. [2] In the course of this struggle, they did the Epidaurians much damage and stole their images of Damia and Auxesia. These they took away and set them up in the middle of their own country at a place called Oea, about twenty furlongs distant from their city. [3] Having set them up in this place they sought their favor with sacrifices and female choruses in the satirical and abusive mode. Ten men were appointed providers of a chorus for each of the deities, and the choruses aimed their raillery not at any men but at the women of the country. The Epidaurians too had the same rites, and they have certain secret rites as well.","places":[{"placeId":"579844","name":"Aeginetans","startOffset":36,"endOffset":46},{"placeId":"570228","name":"Epidaurians","startOffset":88,"endOffset":99},{"placeId":"570228","name":"Epidaurus","startOffset":120,"endOffset":129},{"placeId":"570228","name":"Epidaurians","startOffset":262,"endOffset":273},{"placeId":"570228","name":"Epidaurians","startOffset":324,"endOffset":335},{"placeId":"585935","name":"Oea","startOffset":483,"endOffset":486},{"placeId":"570228","name":"Epidaurians","startOffset":827,"endOffset":838}]},{"id":84,"text":"When these images were stolen, the Epidaurians ceased from fulfilling their agreement with the Athenians. Then the Athenians sent an angry message to the Epidaurians who pleaded in turn that they were doing no wrong. For as long, they said, as we had the images in our country, we fulfilled our agreement. Now that we are deprived of them, it is not just that we should still be paying. Ask your dues of the men of Aegina, who have the images. [2] The Athenians therefore sent to Aegina and demanded that the images be restored, but the Aeginetans answered that they had nothing to do with the Athenians.","places":[{"placeId":"570228","name":"Epidaurians","startOffset":35,"endOffset":46},{"placeId":"579885","name":"Athenians","startOffset":95,"endOffset":104},{"placeId":"579885","name":"Athenians","startOffset":115,"endOffset":124},{"placeId":"570228","name":"Epidaurians","startOffset":154,"endOffset":165},{"placeId":"579844","name":"Aegina","startOffset":418,"endOffset":424},{"placeId":"579885","name":"Athenians","startOffset":456,"endOffset":465},{"placeId":"579844","name":"Aegina","startOffset":484,"endOffset":490},{"placeId":"579844","name":"Aeginetans","startOffset":541,"endOffset":551},{"placeId":"579885","name":"Athenians","startOffset":598,"endOffset":607}]},{"id":85,"text":"The Athenians report that after making this demand, they despatched one trireme with certain of their citizens who, coming in the name of the whole people to Aegina, attempted to tear the images, as being made of Attic wood, from their bases so that they might carry them away. [2] When they could not obtain possession of them in this manner, they tied cords around the images with which they could be dragged. While they were attempting to drag them off, they were overtaken both by a thunderstorm and an earthquake. This drove the trireme's crew to such utter madness that they began to slay each other as if they were enemies. At last only one of all was left, who returned by himself to Phalerum.","places":[{"placeId":"579885","name":"Athenians","startOffset":4,"endOffset":13},{"placeId":"579844","name":"Aegina","startOffset":158,"endOffset":164},{"placeId":"579888","name":"Attic","startOffset":213,"endOffset":218},{"placeId":"580072","name":"Phalerum","startOffset":692,"endOffset":700}]},{"id":86,"text":"This is the Athenian version of the matter, but the Aeginetans say that the Athenians came not in one ship only, for they could easily have kept off a single ship, or several, for that matter, even if they had no navy themselves. The truth was, they said, that the Athenians descended upon their coasts with many ships and that they yielded to them without making a fight of it at sea. [2] They are not able to determine clearly whether it was because they admitted to being weaker at sea-fighting that they yielded, or because they were planning what they then actually did. [3] When, as the Aeginetans say, no man came out to fight with them, the Athenians disembarked from their ships and turned their attention to the images. Unable to drag them from the bases, they fastened cords on them and dragged them until they boththis I cannot believe, but another mightfell on their knees. Both have remained in this position ever since. [4] This is what the Athenians did, but the Aeginetans say that they discovered that the Athenians were about to make war upon them and therefore assured themselves of help from the Argives. So when the Athenians disembarked on the land of Aegina, the Argives came to aid the Aeginetans, crossing over from Epidaurus to the island secretly. They then fell upon the Athenians unaware and cut them off from their ships. It was at this moment that the thunderstorm and earthquake came upon them 87.This, then, is the story told by the Argives and Aeginetans, and the Athenians too acknowledge that only one man of their number returned safely to Attica. [2] The Argives, however, say that he escaped after they had destroyed the rest of the Athenian force, while the Athenians claim that the whole thing was to be attributed to divine power. This one man did not survive but perished in the following manner. It would seem that he made his way to Athens and told of the mishap. When the wives of the men who had gone to attack Aegina heard this, they were very angry that he alone should be safe. They gathered round him and stabbed him with the brooch-pins of their garments, each asking him where her husband was. [3] This is how this man met his end, and the Athenians found the action of their women to be more dreadful than their own misfortune. They could find, it is said, no other way to punish the women than changing their dress to the Ionian fashion. Until then the Athenian women had worn Dorian dress, which is very like the Corinthian. It was changed, therefore, to the linen tunic, so that they might have no brooch-pins to use.","places":[{"placeId":"579885","name":"Athenian","startOffset":12,"endOffset":20},{"placeId":"579844","name":"Aeginetans","startOffset":52,"endOffset":62},{"placeId":"579885","name":"Athenians","startOffset":76,"endOffset":85},{"placeId":"579885","name":"Athenians","startOffset":265,"endOffset":274},{"placeId":"579844","name":"Aeginetans","startOffset":593,"endOffset":603},{"placeId":"579885","name":"Athenians","startOffset":649,"endOffset":658},{"placeId":"579885","name":"Athenians","startOffset":958,"endOffset":967},{"placeId":"579844","name":"Aeginetans","startOffset":981,"endOffset":991},{"placeId":"579885","name":"Athenians","startOffset":1026,"endOffset":1035},{"placeId":"570106","name":"Argives","startOffset":1119,"endOffset":1126},{"placeId":"579885","name":"Athenians","startOffset":1140,"endOffset":1149},{"placeId":"579844","name":"Aegina","startOffset":1177,"endOffset":1183},{"placeId":"570106","name":"Argives","startOffset":1189,"endOffset":1196},{"placeId":"579844","name":"Aeginetans","startOffset":1213,"endOffset":1223},{"placeId":"570228","name":"Epidaurus","startOffset":1244,"endOffset":1253},{"placeId":"579885","name":"Athenians","startOffset":1302,"endOffset":1311},{"placeId":"570106","name":"Argives","startOffset":1469,"endOffset":1476},{"placeId":"579844","name":"Aeginetans","startOffset":1481,"endOffset":1491},{"placeId":"579885","name":"Athenians","startOffset":1501,"endOffset":1510},{"placeId":"579888","name":"Attica","startOffset":1580,"endOffset":1586},{"placeId":"570106","name":"Argives","startOffset":1596,"endOffset":1603},{"placeId":"579885","name":"Athenian","startOffset":1675,"endOffset":1683},{"placeId":"579885","name":"Athenians","startOffset":1701,"endOffset":1710},{"placeId":"579885","name":"Athens","startOffset":1881,"endOffset":1887},{"placeId":"579844","name":"Aegina","startOffset":1961,"endOffset":1967},{"placeId":"579885","name":"Athenians","startOffset":2196,"endOffset":2205},{"placeId":"550597","name":"Ionian","startOffset":2380,"endOffset":2386},{"placeId":"579885","name":"Athenian","startOffset":2411,"endOffset":2419},{"placeId":"570182","name":"Corinthian","startOffset":2472,"endOffset":2482}]},{"id":88,"text":"The truth of the matter, however, is that this form of dress is not in its origin Ionian, but Carian, for in ancient times all women in Greece wore the costume now known as Dorian. [2] As for the Argives and Aeginetans, this was the reason of their passing a law in both their countries that brooch-pins should be made half as long as they used to be and that brooches should be the principal things offered by women in the shrines of these two goddesses. Furthermore, nothing else Attic should be brought to the temple, not even pottery, and from that time on only drinking vessels made in the country should be used.","places":[{"placeId":"550597","name":"Ionian","startOffset":82,"endOffset":88},{"placeId":"991381","name":"Carian","startOffset":94,"endOffset":100},{"placeId":"geonames-390903","name":"Greece","startOffset":136,"endOffset":142},{"placeId":"570106","name":"Argives","startOffset":196,"endOffset":203},{"placeId":"579844","name":"Aeginetans","startOffset":208,"endOffset":218},{"placeId":"579888","name":"Attic","startOffset":482,"endOffset":487}]},{"id":89,"text":"Ever since that day even to my time the women of Argos and Aegina wore brooch-pins longer than before, by reason of the feud with the Athenians. The enmity of the Athenians against the Aeginetans began as I have told, and now at the Thebans' call the Aeginetans came readily to the aid of the Boeotians, remembering the matter of the images. [2] While the Aeginetans were laying waste to the seaboard of Attica, the Athenians were setting out to march against them, but an oracle from Delphi came to them bidding them to restrain themselves for thirty years after the wrongdoing of the Aeginetans, and in the thirty-first to mark out a precinct for Aeacus and begin the war with Aegina. In this way their purpose would prosper. If, however, they sent an army against their enemies straightaway, they would indeed subdue them in the end but would in the meantime both suffer and do many things. [3] When the Athenians heard this reported to them, they marked out for Aeacus that precinct which is now set in their marketplace, but they could not stomach the order that they must hold their hand for thirty years, seeing that the Aeginetans had dealt them a foul blow.","places":[{"placeId":"570106","name":"Argos","startOffset":49,"endOffset":54},{"placeId":"579844","name":"Aegina","startOffset":59,"endOffset":65},{"placeId":"579885","name":"Athenians","startOffset":134,"endOffset":143},{"placeId":"579885","name":"Athenians","startOffset":163,"endOffset":172},{"placeId":"579844","name":"Aeginetans","startOffset":185,"endOffset":195},{"placeId":"541138","name":"Thebans","startOffset":233,"endOffset":240},{"placeId":"579844","name":"Aeginetans","startOffset":251,"endOffset":261},{"placeId":"540689","name":"Boeotians","startOffset":293,"endOffset":302},{"placeId":"579844","name":"Aeginetans","startOffset":356,"endOffset":366},{"placeId":"579888","name":"Attica","startOffset":404,"endOffset":410},{"placeId":"579885","name":"Athenians","startOffset":416,"endOffset":425},{"placeId":"540726","name":"Delphi","startOffset":485,"endOffset":491},{"placeId":"579844","name":"Aeginetans","startOffset":586,"endOffset":596},{"placeId":"579844","name":"Aegina","startOffset":679,"endOffset":685},{"placeId":"579885","name":"Athenians","startOffset":907,"endOffset":916},{"placeId":"579844","name":"Aeginetans","startOffset":1128,"endOffset":1138}]},{"id":90,"text":"As they were making ready for vengeance, a matter which took its rise in Lacedaemon hindered them, for when the Lacedaemonians learned of the plot of the Alcmaeonids with the Pythian priestess40 and of her plot against themselves and the Pisistratidae, they were very angry for two reasons, namely that they had driven their own guests and friends from the country they dwelt in, and that the Athenians showed them no gratitude for their doing so. [2] Furthermore, they were spurred on by the oracles41 which foretold that many deeds of enmity would be perpetrated against them by the Athenians. Previously they had had no knowledge of these oracles but now Cleomenes brought them to Sparta, and the Lacedaemonians learned their contents. It was from the Athenian acropolis that Cleomenes took the oracles, which had been in the possession of the Pisistratidae earlier. When they were exiled, they left them in the temple from where they were retrieved by Cleomenes.","places":[{"placeId":"570406","name":"Lacedaemon","startOffset":73,"endOffset":83},{"placeId":"570406","name":"Lacedaemonians","startOffset":112,"endOffset":126},{"placeId":"579885","name":"Athenians","startOffset":393,"endOffset":402},{"placeId":"579885","name":"Athenians","startOffset":585,"endOffset":594},{"placeId":"570685","name":"Sparta","startOffset":684,"endOffset":690},{"placeId":"570406","name":"Lacedaemonians","startOffset":700,"endOffset":714},{"placeId":"579885","name":"Athenian","startOffset":755,"endOffset":763}]},{"id":91,"text":"Now the Lacedaemonians, when they regained the oracles and saw the Athenians increasing in power and in no way inclined to obey them, realized that if the Athenians remained free, they would be equal in power with themselves, but that if they were held down under tyranny, they would be weak and ready to serve a master. Perceiving all this, they sent to bring Pisistratus' son Hippias from Sigeum on the Hellespont, the Pisistratidae's place of refuge. [2] When Hippias arrived, the Spartans sent for envoys from the rest of their allies and spoke to them as follows: Sirs, our allies, we do acknowledge that we have acted wrongly, for, led astray by lying divinations, we drove from their native land men who were our close friends and promised to make Athens subject to us. Then we handed that city over to a thankless people which had no sooner lifted up its head in the freedom which we gave it, than it insolently cast out us and our king. Now it has bred such a spirit of pride and is growing so much in power, that its neighbors in Boeotia and Chalcis have really noticed it, and others too will soon recognize their error. [3] Since we erred in doing what we did, we will now attempt with your aid to avenge ourselves on them. It is on this account and no other that we have sent for Hippias, whom you see, and have brought you from your cities, namely that uniting our counsels and our power, we may bring him to Athens and restore that which we took away.","places":[{"placeId":"570406","name":"Lacedaemonians","startOffset":8,"endOffset":22},{"placeId":"579885","name":"Athenians","startOffset":67,"endOffset":76},{"placeId":"579885","name":"Athenians","startOffset":155,"endOffset":164},{"placeId":"550877","name":"Sigeum","startOffset":391,"endOffset":397},{"placeId":"501434","name":"Hellespont","startOffset":405,"endOffset":415},{"placeId":"570685","name":"Spartans","startOffset":484,"endOffset":492},{"placeId":"579885","name":"Athens","startOffset":756,"endOffset":762},{"placeId":"540689","name":"Boeotia","startOffset":1041,"endOffset":1048},{"placeId":"540703","name":"Chalcis","startOffset":1053,"endOffset":1060},{"placeId":"579885","name":"Athens","startOffset":1424,"endOffset":1430}]},{"id":92,"text":"These were the words of the Lacedaemonians, but their words were ill-received by the greater part of their allies. The rest then keeping silence, Socles, a Corinthian, said, 92A. In truth heaven will be beneath the earth and the earth aloft above the heaven, and men will dwell in the sea and fishes where men dwelt before, now that you, Lacedaemonians, are destroying the rule of equals and making ready to bring back tyranny into the cities, tyranny, a thing more unrighteous and bloodthirsty than anything else on this earth. [2] If indeed it seems to you to be a good thing that the cities be ruled by tyrants, set up a tyrant among yourselves first and then seek to set up such for the rest. As it is, however, you, who have never made trial of tyrants and take the greatest precautions that none will arise at Sparta, deal wrongfully with your allies. If you had such experience of that thing as we have, you would be more prudent advisers concerning it than you are now. 92B. The Corinthian state was ordered in such manner as I will show.There was an oligarchy, and this group of men, called the Bacchiadae, held sway in the city, marrying and giving in marriage among themselves. Now Amphion, one of these men, had a crippled daughter, whose name was Labda.42 Since none of the Bacchiadae would marry her, she was wedded to Eetion son of Echecrates, of the township of Petra, a Lapith by lineage and of the posterity of Caeneus. [2] When no sons were born to him by this wife or any other, he set out to Delphi to enquire concerning the matter of acquiring offspring. As soon as he entered, the Pythian priestess spoke these verses to him: Eetion,worthy of honor, no man honors you. Labda is with child, and her child will be a millstone Which will fall upon the rulers and will bring justice to Corinth.  [3] This oracle which was given to Eetion was in some way made known to the Bacchiadae. The earlier oracle sent to Corinth had not been understood by them, despite the fact that its meaning was the same as the meaning of the oracle of Eetion, and it read as follows: An eagle in the rocks has conceived, and will bring forth a lion, Strong and fierce. The knees of many will it loose. This consider well, Corinthians, You who dwell by lovely Pirene and the overhanging heights of Corinth.  92C.This earlier prophecy had been unintelligible to the Bacchiadae, but as soon as they heard the one which was given to Eetion, they understood it at once, recognizing its similarity with the oracle of Eetion. Now understanding both oracles, they kept quiet but resolved to do away with the offspring of Eetion. Then, as soon as his wife had given birth, they sent ten men of their clan to the township where Eetion dwelt to kill the child. [2] These men came to Petra and passing into Eetion's courtyard, asked for the child. Labda, knowing nothing of the purpose of their coming and thinking that they wished to see the baby out of affection for its father, brought it and placed it into the hands of one of them. Now they had planned on their way that the first of them who received the child should dash it to the ground. [3] When, however, Labda brought and handed over the child, by divine chance it smiled at the man who took it. This he saw, and compassion prevented him from killing it. Filled with pity, he handed it to a second, and this man again to a third.In fact it passed from hand to hand to each of the ten, for none would make an end of it. [4] They then gave the child back to its mother, and after going out, they stood before the door reproaching and upbraiding one another, but chiefly him who had first received it since he had not acted in accordance with their agreement. Finally they resolved to go in again and all have a hand in the killing. 92D. Fate, however, had decreed that Eetion's offspring should be the source of ills for Corinth, for Labda, standing close to this door, heard all this. Fearing that they would change their minds and that they would take and actually kill the child, she took it away and hid it where she thought it would be hardest to find, in a chest, for she knew that if they returned and set about searching they would seek in every placewhich in fact they did. [2] They came and searched, but when they did not find it, they resolved to go off and say to those who had sent them that they had carried out their orders. They then went away and said this. 92E. Eetion's son, however, grew up, and because of his escape from that danger, he was called Cypselus, after the chest. When he had reached manhood and was seeking a divination, an oracle of double meaning was given him at Delphi. Putting faith in this, he made an attempt on Corinth and won it. [2] The oracle was as follows: That man is fortunate who steps into my house, Cypselus, son of Eetion, the king of noble Corinth, He himself and his children, but not the sons of his sons. Such was the oracle. Cypselus, however, when he had gained the tyranny, conducted himself in this way: many of the Corinthians he drove into exile, many he deprived of their wealth, and by far the most he had killed. 92F. After a reign of thirty years,43 he died in the height of prosperity, and was succeeded by his son Periander. Now Periander was to begin with milder than his father, but after he had held converse by messenger with Thrasybulus the tyrant of Miletus, he became much more bloodthirsty than Cypselus. [2] He had sent a herald to Thrasybulus and inquired in what way he would best and most safely govern his city. Thrasybulus led the man who had come from Periander outside the town, and entered into a sown field. As he walked through the corn, continually asking why the messenger had come to him from Corinth, he kept cutting off all the tallest ears of wheat which he could see, and throwing them away, until he had destroyed the best and richest part of the crop. [3] Then, after passing through the place and speaking no word of counsel, he sent the herald away. When the herald returned to Corinth, Periander desired to hear what counsel he brought, but the man said that Thrasybulus had given him none. The herald added that it was a strange man to whom he had been sent, a madman and a destroyer of his own possessions, telling Periander what he had seen Thrasybulus do. 92G. Periander, however, understood what had been done, and perceived that Thrasybulus had counselled him to slay those of his townsmen who were outstanding in influence or ability; with that he began to deal with his citizens in an evil manner. Whatever act of slaughter or banishment Cypselus had left undone, that Periander brought to accomplishment. In a single day he stripped all the women of Corinth naked, because of his own wife Melissa.44 [2] Periander had sent messengers to the Oracle of the Dead on the river Acheron in Thesprotia to enquire concerning a deposit that a friend had left, but Melissa, in an apparition, said that she would tell him nothing, nor reveal where the deposit lay, for she was cold and naked. The garments, she said, with which Periander had buried with her had never been burnt, and were of no use to her. Then, as evidence for her husband that she spoke the truth, she added that Periander had put his loaves into a cold oven. [3] When this message was brought back to Periander (for he had had intercourse with the dead body of Melissa and knew her token for true), immediately after the message he made a proclamation that all the Corinthian women should come out into the temple of Hera. They then came out as to a festival, wearing their most beautiful garments, and Periander set his guards there and stripped them all alike, ladies and serving-women, and heaped all the clothes in a pit, where, as he prayed to Melissa, he burnt them. [4] When he had done this and sent a second message, the ghost of Melissa told him where the deposit of the friend had been laid. This, then, Lacedaimonians, is the nature of tyranny, and such are its deeds. [5] We Corinthians marvelled greatly when we saw that you were sending for Hippias, and now we marvel yet more at your words to us. We entreat you earnestly in the name of the gods of Hellas not to establish tyranny in the cities, but if you do not cease from so doing and unrighteously attempt to bring Hippias back, be assured that you are proceeding without the Corinthians' consent.","places":[{"placeId":"570406","name":"Lacedaemonians","startOffset":28,"endOffset":42},{"placeId":"570182","name":"Corinthian","startOffset":156,"endOffset":166},{"placeId":"570406","name":"Lacedaemonians","startOffset":339,"endOffset":353},{"placeId":"570685","name":"Sparta","startOffset":817,"endOffset":823},{"placeId":"570182","name":"Corinthian","startOffset":989,"endOffset":999},{"placeId":"540726","name":"Delphi","startOffset":1515,"endOffset":1521},{"placeId":"570182","name":"Corinth","startOffset":1808,"endOffset":1815},{"placeId":"570182","name":"Corinth","startOffset":1934,"endOffset":1941},{"placeId":"570182","name":"Corinthians","startOffset":2225,"endOffset":2236},{"placeId":"570182","name":"Corinth","startOffset":2300,"endOffset":2307},{"placeId":"570182","name":"Corinth","startOffset":3873,"endOffset":3880},{"placeId":"540726","name":"Delphi","startOffset":4654,"endOffset":4660},{"placeId":"570182","name":"Corinth","startOffset":4707,"endOffset":4714},{"placeId":"570182","name":"Corinth","startOffset":4849,"endOffset":4856},{"placeId":"570182","name":"Corinthians","startOffset":5033,"endOffset":5044},{"placeId":"599799","name":"Miletus","startOffset":5381,"endOffset":5388},{"placeId":"570182","name":"Corinth","startOffset":5740,"endOffset":5747},{"placeId":"570182","name":"Corinth","startOffset":6033,"endOffset":6040},{"placeId":"570182","name":"Corinth","startOffset":6715,"endOffset":6722},{"placeId":"570030","name":"Acheron","startOffset":6838,"endOffset":6845},{"placeId":"531117","name":"Thesprotia","startOffset":6849,"endOffset":6859},{"placeId":"570182","name":"Corinthian","startOffset":7489,"endOffset":7499},{"placeId":"570406","name":"Lacedaimonians","startOffset":7940,"endOffset":7954},{"placeId":"570182","name":"Corinthians","startOffset":8013,"endOffset":8024},{"placeId":"geonames-390903","name":"Hellas","startOffset":8190,"endOffset":8196},{"placeId":"570182","name":"Corinthians","startOffset":8371,"endOffset":8382}]},{"id":93,"text":"These were the words of Socles, the envoy from Corinth, and Hippias answered, calling the same gods as Socles had invoked to witness, that the Corinthians would be the first to wish the Pisistratidae back, when the time appointed should come for them to be vexed by the Athenians. [2] Hippias made this answer, inasmuch as he had more exact knowledge of the oracles than any man, but the rest of the allies, who had till now kept silence, spoke out when they heard the free speech of Socles and sided with the opinion of the Corinthians, entreating the Lacedaemonians not to harm a Greek city.","places":[{"placeId":"570182","name":"Corinth","startOffset":47,"endOffset":54},{"placeId":"570182","name":"Corinthians","startOffset":143,"endOffset":154},{"placeId":"579885","name":"Athenians","startOffset":270,"endOffset":279},{"placeId":"570182","name":"Corinthians","startOffset":525,"endOffset":536},{"placeId":"570406","name":"Lacedaemonians","startOffset":553,"endOffset":567},{"placeId":"geonames-390903","name":"Greek","startOffset":582,"endOffset":587}]},{"id":94,"text":"His plan, then, came to nothing, and Hippias was forced to depart. Amyntas king of the Macedonians offered him Anthemus, and the Thessalians Iolcus, but he would have neither. He withdrew to Sigeum, which Pisistratus had taken at the spear's point from the Mytilenaeans and where he then established as tyrant Hegesistratus, his own bastard son by an Argive woman. Hegesistratus, however, could not keep what Pisistratus had given him without fighting, [2] for there was constant war over a long period of time45 between the Athenians at Sigeum and the Mytilenaeans at Achilleum. The Mytilenaeans were demanding the place back, and the Athenians, bringing proof to show that the Aeolians had no more part or lot in the land of Ilium than they themselves and all the other Greeks who had aided Menelaus to avenge the rape of Helen, would not consent.","places":[{"placeId":"491656","name":"Macedonians","startOffset":87,"endOffset":98},{"placeId":"1332","name":"Thessalians","startOffset":129,"endOffset":140},{"placeId":"550877","name":"Sigeum","startOffset":191,"endOffset":197},{"placeId":"550763","name":"Mytilenaeans","startOffset":257,"endOffset":269},{"placeId":"570106","name":"Argive","startOffset":351,"endOffset":357},{"placeId":"579885","name":"Athenians","startOffset":525,"endOffset":534},{"placeId":"550877","name":"Sigeum","startOffset":538,"endOffset":544},{"placeId":"550763","name":"Mytilenaeans","startOffset":553,"endOffset":565},{"placeId":"550401","name":"Achilleum","startOffset":569,"endOffset":578},{"placeId":"550763","name":"Mytilenaeans","startOffset":584,"endOffset":596},{"placeId":"579885","name":"Athenians","startOffset":636,"endOffset":645},{"placeId":"550406","name":"Aeolians","startOffset":679,"endOffset":687},{"placeId":"550595","name":"Ilium","startOffset":727,"endOffset":732},{"placeId":"geonames-390903","name":"Greeks","startOffset":772,"endOffset":778}]},{"id":95,"text":"Among the various incidents of this war, one in particular is worth mention; In the course of a battle in which the Athenians had the upper hand, Alcaeus the poet took to flight and escaped, but his armor was taken by the Athenians and hung up in the temple of Athena at Sigeum. [2] Alcaeus wrote a poem about this and sent it to Mytilene. In it he relates his own misfortune to his friend Melanippus. As for the Mytilenaeans and Athenians, however, peace was made between them by Periander son of Cypselus, to whose arbitration they committed the matter, and the terms of peace were that each party should keep what it had.","places":[{"placeId":"579885","name":"Athenians","startOffset":116,"endOffset":125},{"placeId":"579885","name":"Athenians","startOffset":222,"endOffset":231},{"placeId":"550877","name":"Sigeum","startOffset":271,"endOffset":277},{"placeId":"geonames-256866","name":"Mytilene","startOffset":330,"endOffset":338},{"placeId":"550763","name":"Mytilenaeans","startOffset":413,"endOffset":425},{"placeId":"579885","name":"Athenians","startOffset":430,"endOffset":439}]},{"id":96,"text":"It was in this way, then, that Sigeum came to be under Athenian rule, but Hippias, having come from Lacedaemon into Asia, left no stone unturned, maligning the Athenians to Artaphrenes, and doing all he could to bring Athens into subjection to himself and Darius. [2] While Hippias was engaged in these activities, the Athenians heard of it and sent messengers to Sardis, warning the Persians not to believe banished Athenians. Artaphrenes, however, bade them receive Hippias back, if they wanted to be safe.When his words were brought back to the Athenians, they would not consent to them, and since they would not consent, it was resolved that they should be openly at war with Persia.","places":[{"placeId":"550877","name":"Sigeum","startOffset":31,"endOffset":37},{"placeId":"579885","name":"Athenian","startOffset":55,"endOffset":63},{"placeId":"570406","name":"Lacedaemon","startOffset":100,"endOffset":110},{"placeId":"579885","name":"Athenians","startOffset":160,"endOffset":169},{"placeId":"579885","name":"Athens","startOffset":218,"endOffset":224},{"placeId":"579885","name":"Athenians","startOffset":319,"endOffset":328},{"placeId":"550867","name":"Sardis","startOffset":364,"endOffset":370},{"placeId":"geonames-130758","name":"Persians","startOffset":384,"endOffset":392},{"placeId":"579885","name":"Athenians","startOffset":417,"endOffset":426},{"placeId":"579885","name":"Athenians","startOffset":548,"endOffset":557},{"placeId":"geonames-130758","name":"Persia","startOffset":680,"endOffset":686}]},{"id":97,"text":"It was when the Athenians had made their decision and were already on bad terms with Persia, that Aristagoras the Milesian, driven from Sparta by Cleomenes the Lacedaemonian, came to Athens, since that city was more powerful than any of the rest. Coming before the people, Aristagoras spoke to the same effect as at Sparta, of the good things of Asia, and how the Persians carried neither shield nor spear in war and could easily be overcome. [2] This he said adding that the Milesians were settlers from Athens, whom it was only right to save seeing that they themselves were a very powerful people. There was nothing which he did not promise in the earnestness of his entreaty, till at last he prevailed upon them. It seems, then, that it is easier to deceive many than one, for he could not deceive Cleomenes of Lacedaemon, one single man, but thirty thousand46 Athenians he could. [3] The Athenians, now persuaded, voted to send twenty ships to aid the Ionians, appointing for their admiral Melanthius, a citizen of Athens who had an unblemished reputation. These ships were the beginning of troubles for both Greeks and foreigners.","places":[{"placeId":"579885","name":"Athenians","startOffset":16,"endOffset":25},{"placeId":"geonames-130758","name":"Persia","startOffset":85,"endOffset":91},{"placeId":"599799","name":"Milesian","startOffset":114,"endOffset":122},{"placeId":"570685","name":"Sparta","startOffset":136,"endOffset":142},{"placeId":"570406","name":"Lacedaemonian","startOffset":160,"endOffset":173},{"placeId":"579885","name":"Athens","startOffset":183,"endOffset":189},{"placeId":"570685","name":"Sparta","startOffset":316,"endOffset":322},{"placeId":"geonames-130758","name":"Persians","startOffset":364,"endOffset":372},{"placeId":"599799","name":"Milesians","startOffset":476,"endOffset":485},{"placeId":"579885","name":"Athens","startOffset":505,"endOffset":511},{"placeId":"570406","name":"Lacedaemon","startOffset":815,"endOffset":825},{"placeId":"579885","name":"Athenians","startOffset":865,"endOffset":874},{"placeId":"579885","name":"Athenians","startOffset":893,"endOffset":902},{"placeId":"550597","name":"Ionians","startOffset":957,"endOffset":964},{"placeId":"579885","name":"Athens","startOffset":1020,"endOffset":1026},{"placeId":"geonames-390903","name":"Greeks","startOffset":1114,"endOffset":1120}]},{"id":98,"text":"Aristagoras sailed before the rest, and when he came to Miletus, he devised a plan from which no advantage was to accrue to the Ionians (nor indeed was that the purpose of his plan, but rather to vex king Darius). He sent a man into Phrygia, to the Paeonians who had been led captive from the Strymon by Megabazus, and now dwelt in a Phrygian territory and village by themselves. When the man came to the Paeonians, he spoke as follows: [2] Men of Paeonia, I have been sent by Aristagoras, tyrant of Miletus, to show you the way to deliverance, if you are disposed to obey. All Ionia is now in revolt against the king, and it is possible for you to win your own way back safely to your own land, but afterwards we will take care of you. [3] The Paeonians were very glad when they heard that, and although some of them remained where they were for fear of danger, the rest took their children and women and fled to the sea. After arriving there, the Paeonians crossed over to Chios. [4] They were already in Chios, when a great host of Persian horsemen came after them in pursuit. Unable to overtake them, the Persians sent to Chios, commanding the Paeonians to go back. The Paeonians would not consent to this, but were brought from Chios by the Chians to Lesbos and carried by the Lesbians to Doriscus, from where they made their way by land to Paeonia.","places":[{"placeId":"599799","name":"Miletus","startOffset":56,"endOffset":63},{"placeId":"550597","name":"Ionians","startOffset":128,"endOffset":135},{"placeId":"609502","name":"Phrygia","startOffset":233,"endOffset":240},{"placeId":"491680","name":"Paeonians","startOffset":249,"endOffset":258},{"placeId":"501629","name":"Strymon","startOffset":293,"endOffset":300},{"placeId":"609502","name":"Phrygian","startOffset":334,"endOffset":342},{"placeId":"491680","name":"Paeonians","startOffset":405,"endOffset":414},{"placeId":"491680","name":"Paeonia","startOffset":449,"endOffset":456},{"placeId":"599799","name":"Miletus","startOffset":501,"endOffset":508},{"placeId":"550597","name":"Ionia","startOffset":579,"endOffset":584},{"placeId":"491680","name":"Paeonians","startOffset":747,"endOffset":756},{"placeId":"560221","name":"sea","startOffset":920,"endOffset":923},{"placeId":"491680","name":"Paeonians","startOffset":951,"endOffset":960},{"placeId":"550497","name":"Chios","startOffset":977,"endOffset":982},{"placeId":"550497","name":"Chios","startOffset":1009,"endOffset":1014},{"placeId":"geonames-130758","name":"Persian","startOffset":1037,"endOffset":1044},{"placeId":"geonames-130758","name":"Persians","startOffset":1111,"endOffset":1119},{"placeId":"550497","name":"Chios","startOffset":1128,"endOffset":1133},{"placeId":"491680","name":"Paeonians","startOffset":1150,"endOffset":1159},{"placeId":"491680","name":"Paeonians","startOffset":1176,"endOffset":1185},{"placeId":"550497","name":"Chios","startOffset":1235,"endOffset":1240},{"placeId":"550497","name":"Chians","startOffset":1248,"endOffset":1254},{"placeId":"550696","name":"Lesbos","startOffset":1258,"endOffset":1264},{"placeId":"550696","name":"Lesbians","startOffset":1284,"endOffset":1292},{"placeId":"501402","name":"Doriscus","startOffset":1296,"endOffset":1304},{"placeId":"491680","name":"Paeonia","startOffset":1348,"endOffset":1355}]},{"id":99,"text":"The Athenians came with their twenty ships as well as five triremes of the Eretrians who came to the war to please not the Athenians but the Milesians themselves, thereby repaying their debt (for the Milesians had once been the allies of the Eretrians in the war against Chalcis, when the Samians came to aid the Chalcidians against the Eretrians and Milesians). When these, then, and the rest of the allies had arrived, Aristagoras planned a march against Sardis. [2] He himself did not go with the army but remained at Miletus, and appointed others to be generals of the Milesians, namely his own brother Charopinus and another citizen named Hermophantus.","places":[{"placeId":"579885","name":"Athenians","startOffset":4,"endOffset":13},{"placeId":"579925","name":"Eretrians","startOffset":75,"endOffset":84},{"placeId":"579885","name":"Athenians","startOffset":123,"endOffset":132},{"placeId":"599799","name":"Milesians","startOffset":141,"endOffset":150},{"placeId":"599799","name":"Milesians","startOffset":200,"endOffset":209},{"placeId":"579925","name":"Eretrians","startOffset":242,"endOffset":251},{"placeId":"540703","name":"Chalcis","startOffset":271,"endOffset":278},{"placeId":"540703","name":"Chalcidians","startOffset":313,"endOffset":324},{"placeId":"579925","name":"Eretrians","startOffset":337,"endOffset":346},{"placeId":"599799","name":"Milesians","startOffset":351,"endOffset":360},{"placeId":"550867","name":"Sardis","startOffset":457,"endOffset":463},{"placeId":"599799","name":"Miletus","startOffset":521,"endOffset":528},{"placeId":"599799","name":"Milesians","startOffset":573,"endOffset":582}]},{"id":100,"text":"When the Ionians had come to Ephesus with this force, they left their ships at Coresus47 in the Ephesian territory and marched inland with a great host, taking Ephesians to guide them on their way. They made their way along the river Caicus, and after crossing the Tmolus, they came to Sardis and captured it without any resistance. They took all of it except the citadel, which was held by Artaphrenes himself with a great force of men.","places":[{"placeId":"550597","name":"Ionians","startOffset":9,"endOffset":16},{"placeId":"599612","name":"Ephesus","startOffset":29,"endOffset":36},{"placeId":"599725","name":"Coresus","startOffset":79,"endOffset":86},{"placeId":"599612","name":"Ephesian","startOffset":96,"endOffset":104},{"placeId":"599612","name":"Ephesians","startOffset":160,"endOffset":169},{"placeId":"550491","name":"Caicus","startOffset":234,"endOffset":240},{"placeId":"550937","name":"Tmolus","startOffset":265,"endOffset":271},{"placeId":"550867","name":"Sardis","startOffset":286,"endOffset":292}]},{"id":101,"text":"They were prevented from plundering the city by the fact that most of the houses in Sardis were made of reeds, and those made of brick had roofs of reeds. Accordingly, when one of these was seton fire by a soldier, the flames spread from house to house all over the whole city. [2] While the city was burning, the Lydians and all the Persians who were in the citadel, being hemmed in on every side since the fire was consuming the outer parts and having no exit from the city, came thronging into the marketplace and to the river Pactolus, which flows through the marketplace carrying down gold dust from Tmolus and issues into the river Hermus, which in turn issues into the sea. They assembled in the marketplace by this Pactolus and were forced to defend themselves there. [3] When the Ionians saw some of their enemies defending themselves and a great multitude of others approaching, they were afraid and withdrew to the mountain called Tmolus, from where they departed to their ships at nightfall.","places":[{"placeId":"550867","name":"Sardis","startOffset":84,"endOffset":90},{"placeId":"550701","name":"Lydians","startOffset":314,"endOffset":321},{"placeId":"geonames-130758","name":"Persians","startOffset":334,"endOffset":342},{"placeId":"550794","name":"Pactolus","startOffset":530,"endOffset":538},{"placeId":"550937","name":"Tmolus","startOffset":605,"endOffset":611},{"placeId":"550575","name":"Hermus","startOffset":638,"endOffset":644},{"placeId":"560221","name":"sea","startOffset":676,"endOffset":679},{"placeId":"550794","name":"Pactolus","startOffset":723,"endOffset":731},{"placeId":"550597","name":"Ionians","startOffset":789,"endOffset":796},{"placeId":"550937","name":"Tmolus","startOffset":942,"endOffset":948}]},{"id":102,"text":"In the fire at Sardis,48 a temple of Cybebe,49 the goddess of that country, was burnt, and the Persians afterwards made this their pretext for burning the temples of Hellas. At this time, the Persians of the provinces this side50 of the Halys, on hearing of these matters, gathered together and came to aid the Lydians. [2] It chanced that they found the Ionians no longer at Sardis, but following on their tracks, they caught them at Ephesus. There the Ionians stood arrayed to meet them, but were utterly routed in the battle. [3] The Persians put to the sword many men of renown including Eualcides the general of the Eretrians who had won crowns as victor in the games and been greatly praised by Simonides of Ceos. Those of the Ionians who escaped from the battle fled, each to his city.","places":[{"placeId":"550867","name":"Sardis","startOffset":15,"endOffset":21},{"placeId":"geonames-130758","name":"Persians","startOffset":95,"endOffset":103},{"placeId":"geonames-390903","name":"Hellas","startOffset":166,"endOffset":172},{"placeId":"geonames-130758","name":"Persians","startOffset":192,"endOffset":200},{"placeId":"857148","name":"Halys","startOffset":237,"endOffset":242},{"placeId":"550701","name":"Lydians","startOffset":311,"endOffset":318},{"placeId":"550597","name":"Ionians","startOffset":355,"endOffset":362},{"placeId":"550867","name":"Sardis","startOffset":376,"endOffset":382},{"placeId":"599612","name":"Ephesus","startOffset":435,"endOffset":442},{"placeId":"550597","name":"Ionians","startOffset":454,"endOffset":461},{"placeId":"geonames-130758","name":"Persians","startOffset":537,"endOffset":545},{"placeId":"579925","name":"Eretrians","startOffset":621,"endOffset":630},{"placeId":"570348","name":"Ceos","startOffset":714,"endOffset":718},{"placeId":"550597","name":"Ionians","startOffset":733,"endOffset":740}]},{"id":103,"text":"This, then is how they fared in their fighting. Presently, however, the Athenians wholly separated themselves from the Ionians and refused to aid them, although Aristagoras sent messages of earnest entreaty. Despite the fact that they had been deprived of their Athenian allies, the Ionians fervently continued their war against the king (for they remained committed by what they had done to Darius). [2] They sailed to the Hellespont and made Byzantium and all the other cities of that region subject to themselves. Then sailing out from the Hellespont they gained to their cause the greater part of Caria, for even Caunus, which till then had not wanted to be their ally, now joined itself to them after the burning of Sardis.","places":[{"placeId":"579885","name":"Athenians","startOffset":72,"endOffset":81},{"placeId":"550597","name":"Ionians","startOffset":119,"endOffset":126},{"placeId":"579885","name":"Athenian","startOffset":262,"endOffset":270},{"placeId":"550597","name":"Ionians","startOffset":283,"endOffset":290},{"placeId":"501434","name":"Hellespont","startOffset":424,"endOffset":434},{"placeId":"520985","name":"Byzantium","startOffset":444,"endOffset":453},{"placeId":"981526","name":"Hellespont","startOffset":543,"endOffset":553},{"placeId":"991381","name":"Caria","startOffset":601,"endOffset":606},{"placeId":"638796","name":"Caunus","startOffset":617,"endOffset":623},{"placeId":"550867","name":"Sardis","startOffset":721,"endOffset":727}]},{"id":104,"text":"The Cyprians did likewise of their own free will, all save the people of Amathus, for these too revolted from the Medes in such manner as I will show. There was a certain Onesilus, a younger brother of Gorgus king of the Salaminians,51 son of Chersis, whose father was Siromus, and grandson of Euelthon. [2] This man had often before advised Gorgus to revolt from Darius, and now when he heard that the Ionians too had revolted, he was insistent in striving to move him. When, however, he could not persuade Gorgus, he and his faction waited till his brother had gone out of the city of Salamis, and shut him out of the gates. [3] Gorgus, after having lost his city, took refuge with the Medes, and Onesilus, now king of Salamis, persuaded all Cyprus to revolt with him, all save the Amathusians, who would not consent. He accordingly stationed his forces in front of their city and besieged it.","places":[{"placeId":"707498","name":"Cyprians","startOffset":4,"endOffset":12},{"placeId":"707462","name":"Amathus","startOffset":73,"endOffset":80},{"placeId":"903080","name":"Medes","startOffset":114,"endOffset":119},{"placeId":"707617","name":"Salaminians","startOffset":221,"endOffset":232},{"placeId":"550597","name":"Ionians","startOffset":403,"endOffset":410},{"placeId":"707617","name":"Salamis","startOffset":587,"endOffset":594},{"placeId":"903080","name":"Medes","startOffset":688,"endOffset":693},{"placeId":"707617","name":"Salamis","startOffset":721,"endOffset":728},{"placeId":"707498","name":"Cyprus","startOffset":744,"endOffset":750},{"placeId":"707462","name":"Amathusians","startOffset":784,"endOffset":795}]},{"id":105,"text":"Onesilus, then, besieged Amathus. When it was reported to Darius that Sardis had been taken and burnt by the Athenians and Ionians and that Aristagoras the Milesian had been leader of the conspiracy for the making of this plan, he at first, it is said, took no account of the Ionians since he was sure that they would not go unpunished for their rebellion. Darius did, however, ask who the Athenians were, and after receiving the answer, he called for his bow. This he took and, placing an arrow on it, and shot it into the sky, praying as he sent it aloft, [2] O Zeus, grant me vengeance on the Athenians. Then he ordered one of his servants to say to him three times whenever dinner was set before him, Master, remember the Athenians.","places":[{"placeId":"707462","name":"Amathus","startOffset":25,"endOffset":32},{"placeId":"550867","name":"Sardis","startOffset":70,"endOffset":76},{"placeId":"579885","name":"Athenians","startOffset":109,"endOffset":118},{"placeId":"550597","name":"Ionians","startOffset":123,"endOffset":130},{"placeId":"599799","name":"Milesian","startOffset":156,"endOffset":164},{"placeId":"550597","name":"Ionians","startOffset":276,"endOffset":283},{"placeId":"579885","name":"Athenians","startOffset":390,"endOffset":399},{"placeId":"579885","name":"Athenians","startOffset":597,"endOffset":606},{"placeId":"579885","name":"Athenians","startOffset":729,"endOffset":738}]},{"id":106,"text":"After giving this order, he called before him Histiaeus the Milesian, whom Darius had kept with him for a long time now, and said, I hear, Histiaeus, that the viceregent whom you put in charge of Miletus has done me wrong. He has brought men from the mainland overseas, and persuaded certain Ionianswho shall yet pay me the penalty for their deedsto follow them and has robbed me of Sardis. [2] Now then, I ask you, do you think that this state of affairs is good? How did such things come to pass without any advice from your side? See to it that you do not have cause to blame yourself hereafter. [3] To this Histiaeus answered: My lord, what is this you saythat I and none other should devise a plan as a result of which any harm, great or small, was likely to come to you? What desire or feeling of deprivation would prompt me to do such a thing? All that you have is mine, and I am regarded worthy of hearing all your deliberations. [4] If my vicegerent is indeed doing what you say, be assured that he has acted of his own accord. For myself, I cannot even go so far as to believe the report that the Milesians and my vicegerent are doing you some dreadful wrong. If, however,it is true that they are engaged in such activities and what you, O king, have heard has a basis in fact, then you can see how unwisely you acted when you forced me to leave the coast. [5] It would seem, then, that as soon as I was out of sight, the Ionians did exactly what their hearts had long been set on. If I had been in Ionia no city would have stirred. Now send me off to Ionia right away, so that I may restore that country to peace and deliver into your hands that vicegerent of Miletus who has devised all this. [6] Then, when I have done this to your satisfaction, I swear by the gods of your royal house52 that I will not take off the tunic I am wearing on my arrival in Ionia until I have made Sardo,53 the largest of the islands, tributary to you.","places":[{"placeId":"599799","name":"Milesian","startOffset":60,"endOffset":68},{"placeId":"599799","name":"Miletus","startOffset":197,"endOffset":204},{"placeId":"550597","name":"Ionians","startOffset":293,"endOffset":300},{"placeId":"550867","name":"Sardis","startOffset":386,"endOffset":392},{"placeId":"599799","name":"Milesians","startOffset":1113,"endOffset":1122},{"placeId":"550597","name":"Ionians","startOffset":1438,"endOffset":1445},{"placeId":"550597","name":"Ionia","startOffset":1515,"endOffset":1520},{"placeId":"550597","name":"Ionia","startOffset":1568,"endOffset":1573},{"placeId":"599799","name":"Miletus","startOffset":1677,"endOffset":1684},{"placeId":"550597","name":"Ionia","startOffset":1872,"endOffset":1877},{"placeId":"472014","name":"Sardo","startOffset":1896,"endOffset":1901}]},{"id":107,"text":"With these words Histiaeus successfully deceived Darius who gave his consent and let him go, charging Histiaeus to appear before him at Susa when he had achieved what he promised.","places":[{"placeId":"912936","name":"Susa","startOffset":136,"endOffset":140}]},{"id":108,"text":"Now while the message concerning Sardis was making its way to the king, and Darius, having done as I said with his bow, held converse with Histiaeus and permitted him to go to the sea, the following events took place. When Onesilus of Salamis was besieging the Amathusians, news was brought him that Artybius, a Persian, was thought to be coming to Cyprus with a great Persian host. [2] Upon hearing this, Onesilus sent heralds all through Ionia to summon the people, and the Ionians, after no long deliberation, came with a great force. So the Ionians were in Cyprus when the Persians, crossing from Cilicia, marched to Salamis by land, and the Phoenicians were sailing around the headland which is called the keys of Cyprus.54","places":[{"placeId":"550867","name":"Sardis","startOffset":33,"endOffset":39},{"placeId":"560221","name":"sea","startOffset":180,"endOffset":183},{"placeId":"707617","name":"Salamis","startOffset":235,"endOffset":242},{"placeId":"707462","name":"Amathusians","startOffset":261,"endOffset":272},{"placeId":"geonames-130758","name":"Persian","startOffset":312,"endOffset":319},{"placeId":"707498","name":"Cyprus","startOffset":349,"endOffset":355},{"placeId":"geonames-130758","name":"Persian","startOffset":369,"endOffset":376},{"placeId":"550597","name":"Ionia","startOffset":440,"endOffset":445},{"placeId":"550597","name":"Ionians","startOffset":476,"endOffset":483},{"placeId":"550597","name":"Ionians","startOffset":545,"endOffset":552},{"placeId":"707498","name":"Cyprus","startOffset":561,"endOffset":567},{"placeId":"geonames-130758","name":"Persians","startOffset":577,"endOffset":585},{"placeId":"628957","name":"Cilicia","startOffset":601,"endOffset":608},{"placeId":"707617","name":"Salamis","startOffset":621,"endOffset":628},{"placeId":"678334","name":"Phoenicians","startOffset":646,"endOffset":657},{"placeId":"707498","name":"Cyprus","startOffset":719,"endOffset":725}]},{"id":109,"text":"In this turn of affairs, the tyrants of Cyprus called together the generals of the Ionians, and said to them: Ionians, we Cyprians offer you the choice of engaging either the Persians or the Phoenicians. [2] If you want to draw up your army on land and try your strength against the Persians, then it is time for you to disembark and array yourselves on land and for us to embark in your ships to contend with the Phoenicians. If, however, you desire rather to engage the Phoenicians, do so, but whichever you choose, see to it that Ionia and Cyprus become free. [3] To this the Ionians answered, We were sent by the common voice of Ionia to guard the seas, not to deliver our ships to men of Cyprus and encounter the Persians on land. We will attempt then to bear ourselves bravely in the task which was given us. It is for you to prove yourselves valiant men, remembering what you suffered when you were enslaved by the Medians.","places":[{"placeId":"707498","name":"Cyprus","startOffset":40,"endOffset":46},{"placeId":"550597","name":"Ionians","startOffset":83,"endOffset":90},{"placeId":"550597","name":"Ionians","startOffset":111,"endOffset":118},{"placeId":"707498","name":"Cyprians","startOffset":123,"endOffset":131},{"placeId":"geonames-130758","name":"Persians","startOffset":176,"endOffset":184},{"placeId":"678334","name":"Phoenicians","startOffset":192,"endOffset":203},{"placeId":"geonames-130758","name":"Persians","startOffset":284,"endOffset":292},{"placeId":"678334","name":"Phoenicians","startOffset":415,"endOffset":426},{"placeId":"678334","name":"Phoenicians","startOffset":473,"endOffset":484},{"placeId":"550597","name":"Ionia","startOffset":534,"endOffset":539},{"placeId":"707498","name":"Cyprus","startOffset":544,"endOffset":550},{"placeId":"550597","name":"Ionians","startOffset":581,"endOffset":588},{"placeId":"550597","name":"Ionia","startOffset":636,"endOffset":641},{"placeId":"707498","name":"Cyprus","startOffset":696,"endOffset":702},{"placeId":"geonames-130758","name":"Persians","startOffset":721,"endOffset":729},{"placeId":"903080","name":"Medians","startOffset":925,"endOffset":932}]},{"id":110,"text":"This was the Ionians' response, and when the Persian army afterwards arrived on the plain of Salamis, the Cyprian kings ordered their battle line. They drew up the best of the Salaminians and Solians against the Persians, leaving the remaining Cyprians to face the rest of the enemy's army. Onesilus placed himself opposite Artybius, the Persian general.","places":[{"placeId":"550597","name":"Ionians","startOffset":13,"endOffset":20},{"placeId":"geonames-130758","name":"Persian","startOffset":45,"endOffset":52},{"placeId":"707617","name":"Salamis","startOffset":93,"endOffset":100},{"placeId":"707498","name":"Cyprian","startOffset":106,"endOffset":113},{"placeId":"707617","name":"Salaminians","startOffset":176,"endOffset":187},{"placeId":"707624","name":"Solians","startOffset":192,"endOffset":199},{"placeId":"geonames-130758","name":"Persians","startOffset":212,"endOffset":220},{"placeId":"707498","name":"Cyprians","startOffset":244,"endOffset":252},{"placeId":"geonames-130758","name":"Persian","startOffset":338,"endOffset":345}]},{"id":111,"text":"Now the horse which Artybius rode was trained to fight with infantrymen by rearing up. Hearing this, Onesilus said to his attendant, a Carian of great renown in war and a valiant man , [2] I learn that Artybius' horse rears up and kicks and bites to death whomever he encounters. In light of this decide and tell me straightway which you will watch and strike down, Artybius himself or his horse. [3] To this his henchman answered, My King, ready am I to do either or both, whatever you desire. Nevertheless, I will tell you what I think is in your best interest. [4] To my mind, a king and general should be met in battle by a king and general (For if you lay low a man who is a general, you have achieved a great feat. Failing that, if he lays you low, as I pray he may not, it is but half the misfortune to be slain by a noble enemy). For us servants it is fitting that we fight with servants like ourselves and with that horse. Do not fear his tricks, for I promise that he will never again do battle with any man.","places":[{"placeId":"991381","name":"Carian","startOffset":135,"endOffset":141}]},{"id":112,"text":"This, then, was his response, and immediately afterwards war broke out on land and sea. The Ionians in their ships, displaying surpassing excellence that day, overcame the Phoenicians, and it was the Samnians who were most brave. On land, when the armies met, they charged and fought. [2] As for the two generals, Artybius rode against Onesilus who as he had agreed with his attendant, dealt Artybius a blow as he bore down upon him. When the horse struck his hooves on Onesilus' shield, the Carian shore away the horse's legs with a stroke of his curved sword.","places":[{"placeId":"550597","name":"Ionians","startOffset":92,"endOffset":99},{"placeId":"678334","name":"Phoenicians","startOffset":172,"endOffset":183},{"placeId":"599926","name":"Samnians","startOffset":200,"endOffset":208},{"placeId":"991381","name":"Carian","startOffset":492,"endOffset":498}]},{"id":113,"text":"It was in this way that Artybius the Persian general, together with his horse, fell. While the rest were still fighting, Stesenor the ruler of Curium, allegedly an Argive settlement, played the traitor with great company of men under him. The war-chariots of the Salaminians immediately followed their lead, and the Persians accordingly gained the upper hand over the Cyprians. [2] So the army was routed, and many were slain, among them Onesilus, son of Chersis, who had contrived the Cyprian revolt, as well as the king of the Solians, Aristocyprus son of Philocyprus, that Philocyprus whom Solon of Athens, when he came to Cyprus, extolled in a poem above all other tyrants.","places":[{"placeId":"geonames-130758","name":"Persian","startOffset":37,"endOffset":44},{"placeId":"707549","name":"Curium","startOffset":143,"endOffset":149},{"placeId":"570106","name":"Argive","startOffset":164,"endOffset":170},{"placeId":"707617","name":"Salaminians","startOffset":263,"endOffset":274},{"placeId":"geonames-130758","name":"Persians","startOffset":316,"endOffset":324},{"placeId":"707498","name":"Cyprians","startOffset":368,"endOffset":376},{"placeId":"707498","name":"Cyprian","startOffset":486,"endOffset":493},{"placeId":"707624","name":"Solians","startOffset":529,"endOffset":536},{"placeId":"579885","name":"Athens","startOffset":602,"endOffset":608},{"placeId":"707498","name":"Cyprus","startOffset":626,"endOffset":632}]},{"id":114,"text":"As for Onesilus, the Amathusians cut off his head and brought it to Amathus, where they hung it above their gates, because he had besieged their city. When this head became hollow, a swarm of bees entered it and filled it with their honeycomb. [2] In consequence of this the Amathusians, who had inquired concerning the matter, received an oracle which stated that they should take the head down and bury it, and offer yearly sacrifice to Onesilus as to a hero. If they did this, things would go better for them.","places":[{"placeId":"707462","name":"Amathusians","startOffset":21,"endOffset":32},{"placeId":"707462","name":"Amathus","startOffset":68,"endOffset":75},{"placeId":"707462","name":"Amathusians","startOffset":275,"endOffset":286}]},{"id":115,"text":"This the Amathusians did, and have done to this day. When, however, the Ionians engaged in the sea-battle off Cyprus learned that Onesilus' cause was lost and that the cities of Cyprus, with the exception of Salamis which the Salaminians had handed over to their former king Gorgus, were besieged, they sailed off to Ionia without delay. [2] Soli was the Cyprian city which withstood siege longest; the Persians took it in the fifth month by digging a mine under its walls.","places":[{"placeId":"707462","name":"Amathusians","startOffset":9,"endOffset":20},{"placeId":"550597","name":"Ionians","startOffset":72,"endOffset":79},{"placeId":"707498","name":"Cyprus","startOffset":110,"endOffset":116},{"placeId":"707498","name":"Cyprus","startOffset":178,"endOffset":184},{"placeId":"707617","name":"Salamis","startOffset":208,"endOffset":215},{"placeId":"707617","name":"Salaminians","startOffset":226,"endOffset":237},{"placeId":"550597","name":"Ionia","startOffset":317,"endOffset":322},{"placeId":"707498","name":"Cyprian","startOffset":355,"endOffset":362},{"placeId":"geonames-130758","name":"Persians","startOffset":403,"endOffset":411}]},{"id":116,"text":"So the Cyprians, after winning freedom for a year, were enslaved once more.55 Daurises, Hymaees, and Otanes, all of them Persian generals and married to daughters of Darius, pursued those Ionians who had marched to Sardis, and drove them to their ships. After this victory they divided the cities among themselves and sacked them.","places":[{"placeId":"707498","name":"Cyprians","startOffset":7,"endOffset":15},{"placeId":"geonames-130758","name":"Persian","startOffset":121,"endOffset":128},{"placeId":"550597","name":"Ionians","startOffset":188,"endOffset":195},{"placeId":"550867","name":"Sardis","startOffset":215,"endOffset":221}]},{"id":117,"text":"Daurises made for the cities of the Hellespont and took Dardanus, Abydus, Percote, Lampsacus, and Paesus, each in a single day. Then as he marched from Paesus against Parius, news came to him that the Carians had made common cause with the Ionians and revolted from the Persians. For this reason he turned aside from the Hellespont and marched his army to Caria.","places":[{"placeId":"501434","name":"Hellespont","startOffset":36,"endOffset":46},{"placeId":"501393","name":"Dardanus","startOffset":56,"endOffset":64},{"placeId":"501325","name":"Abydus","startOffset":66,"endOffset":72},{"placeId":"501556","name":"Percote","startOffset":74,"endOffset":81},{"placeId":"501570","name":"Lampsacus","startOffset":83,"endOffset":92},{"placeId":"501544","name":"Paesus","startOffset":98,"endOffset":104},{"placeId":"501544","name":"Paesus","startOffset":152,"endOffset":158},{"placeId":"511354","name":"Parius","startOffset":167,"endOffset":173},{"placeId":"991381","name":"Carians","startOffset":201,"endOffset":208},{"placeId":"550597","name":"Ionians","startOffset":240,"endOffset":247},{"placeId":"geonames-130758","name":"Persians","startOffset":270,"endOffset":278},{"placeId":"981526","name":"Hellespont","startOffset":321,"endOffset":331},{"placeId":"991381","name":"Caria","startOffset":356,"endOffset":361}]},{"id":118,"text":"It so happened that news of this was brought to the Carians before Daurises' coming, and when the Carians heard, they mustered at the place called the White Pillars by the river Marsyas56 which flows from the region of Idria and issues into the Maeander. [2] When they had gathered together, many plans were laid before them, the best of which, in my judgment, was that of Pixodarus of Cindya, the son of Mausolus and husband of the daughter of Syennesis, king of Cilicia. He proposed that the Carians should cross the Maeander and fight with the river at their back, so that being unable to flee and compelled to stand their ground they might prove themselves even braver than nature made them. [3] This opinion, however, did not prevail, and it was decided instead that the Persians and not the Cilicians should have the Maeander at their back, the intent being that if the Persians were overcome in the battle and put to flight, they would not escape but be hurled into the river.","places":[{"placeId":"991381","name":"Carians","startOffset":52,"endOffset":59},{"placeId":"991381","name":"Carians","startOffset":98,"endOffset":105},{"placeId":"599789","name":"Marsyas","startOffset":178,"endOffset":185},{"placeId":"599665","name":"Idria","startOffset":219,"endOffset":224},{"placeId":"599777","name":"Maeander","startOffset":245,"endOffset":253},{"placeId":"599716","name":"Cindya","startOffset":386,"endOffset":392},{"placeId":"628957","name":"Cilicia","startOffset":464,"endOffset":471},{"placeId":"991381","name":"Carians","startOffset":494,"endOffset":501},{"placeId":"599777","name":"Maeander","startOffset":519,"endOffset":527},{"placeId":"geonames-130758","name":"Persians","startOffset":776,"endOffset":784},{"placeId":"658440","name":"Cilicians","startOffset":797,"endOffset":806},{"placeId":"599777","name":"Maeander","startOffset":823,"endOffset":831},{"placeId":"geonames-130758","name":"Persians","startOffset":876,"endOffset":884}]},{"id":119,"text":"Presently, when the Persians had come and had crossed the Maeander, they and the Carians joined battle by the river Marsyas. The Carians fought obstinately and for a long time, but at the last they were overcome by the odds. Of the Persians, as many as two thousand men fell, and of the Carians ten thousand. [2] Those of them who escaped were driven into the precinct of Zeus of Armies at Labraunda,57 a large and a holy grove of plane-trees. (The Carians are the only people whom we know who offer sacrifices to Zeus by this name.) When they had been driven there, they deliberated how best to save themselves, whether it would be better for them to surrender to the Persians or to depart from Asia.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":20,"endOffset":28},{"placeId":"599777","name":"Maeander","startOffset":58,"endOffset":66},{"placeId":"991381","name":"Carians","startOffset":81,"endOffset":88},{"placeId":"668310","name":"Marsyas","startOffset":116,"endOffset":123},{"placeId":"991381","name":"Carians","startOffset":129,"endOffset":136},{"placeId":"geonames-130758","name":"Persians","startOffset":232,"endOffset":240},{"placeId":"991381","name":"Carians","startOffset":287,"endOffset":294},{"placeId":"599745","name":"Labraunda","startOffset":390,"endOffset":399},{"placeId":"991381","name":"Carians","startOffset":449,"endOffset":456},{"placeId":"geonames-130758","name":"Persians","startOffset":669,"endOffset":677}]},{"id":120,"text":"While they took counsel, the Milesians and their allies came to their aid, whereupon the Carians put aside their former plans, and prepared to wage a new war over again. They met the Persian attack and suffered a heavier defeat in the battle than the first; many of their whole army fell, but the Milesians were hardest stricken.","places":[{"placeId":"599799","name":"Milesians","startOffset":29,"endOffset":38},{"placeId":"991381","name":"Carians","startOffset":89,"endOffset":96},{"placeId":"geonames-130758","name":"Persian","startOffset":183,"endOffset":190},{"placeId":"599799","name":"Milesians","startOffset":297,"endOffset":306}]},{"id":121,"text":"The Carians, however, rallied and fought again after this disaster, for learning that the Persians had set forth to march against their cities, they beset the road with an ambush at Pedasus. The Persians fell into this by night and perished, they and their generals, Daurises and Amorges and Sisimaces. With these fell also Myrsus, son of Gyges. The leader of this ambush was Heraclides of Mylasas, son of Ibanollis.","places":[{"placeId":"991381","name":"Carians","startOffset":4,"endOffset":11},{"placeId":"geonames-130758","name":"Persians","startOffset":90,"endOffset":98},{"placeId":"599873","name":"Pedasus","startOffset":182,"endOffset":189},{"placeId":"geonames-130758","name":"Persians","startOffset":195,"endOffset":203},{"placeId":"599809","name":"Mylasas","startOffset":390,"endOffset":397}]},{"id":122,"text":"This, then, is how these Persians perished. Hymaees, who had been one of those who went in pursuit of the Ionians who marched on Sardis, now turned towards the Propontis, and there took Cius in Mysia. [2] When he had taken this place and heard that Daurises had left the Hellespont and was marching towards Caria, he left the Propontis and led his army to the Hellespont, making himself master of all the Aeolians who dwell in the territory of Ilium, and of the Gergithae, a remnant of the ancient Trojans. While he was conquering these nations, however, Hymaees himself died of a sickness in the Troad.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":25,"endOffset":33},{"placeId":"550597","name":"Ionians","startOffset":106,"endOffset":113},{"placeId":"550867","name":"Sardis","startOffset":129,"endOffset":135},{"placeId":"511381","name":"Propontis","startOffset":160,"endOffset":169},{"placeId":"511291","name":"Cius","startOffset":186,"endOffset":190},{"placeId":"511328","name":"Mysia","startOffset":194,"endOffset":199},{"placeId":"501434","name":"Hellespont","startOffset":271,"endOffset":281},{"placeId":"991381","name":"Caria","startOffset":307,"endOffset":312},{"placeId":"511381","name":"Propontis","startOffset":326,"endOffset":335},{"placeId":"981526","name":"Hellespont","startOffset":360,"endOffset":370},{"placeId":"550406","name":"Aeolians","startOffset":405,"endOffset":413},{"placeId":"550595","name":"Ilium","startOffset":444,"endOffset":449},{"placeId":"550548","name":"Gergithae","startOffset":462,"endOffset":471},{"placeId":"550595","name":"ancient Trojans","startOffset":490,"endOffset":505},{"placeId":"550944","name":"Troad","startOffset":597,"endOffset":602}]},{"id":123,"text":"This is how he met his end, and Artaphrenes, viceroy of Sardis, and Otanes, the third general, were appointed to lead the army against Ionia and the Aeolian territory on its borders. They took Clazomenae in Ionia, and Cyme in Aeolia.","places":[{"placeId":"550867","name":"Sardis","startOffset":56,"endOffset":62},{"placeId":"550597","name":"Ionia","startOffset":135,"endOffset":140},{"placeId":"550406","name":"Aeolian","startOffset":149,"endOffset":156},{"placeId":"550650","name":"Clazomenae","startOffset":193,"endOffset":203},{"placeId":"550597","name":"Ionia","startOffset":207,"endOffset":212},{"placeId":"550506","name":"Cyme","startOffset":218,"endOffset":222}]},{"id":124,"text":"Aristagoras the Milesian, as he clearly demonstrated, was a man of little courage, for after he had disturbed Ionia and thrown all into utter confusion, he, perceiving what he had done, began to deliberate flight. Moreover, it seemed to him to be impossible to overcome Darius. [2] While the cities were being taken, he accordingly called his fellow-rebels together and took counsel with them, saying that it was best for them to have some place of refuge in case they should be thrown out of Miletus. He also asked them whether he should lead them from there to a settlement in Sardo, or Myrcinus in Edonia, which Histiaeus had received as a gift from Darius and fortified.","places":[{"placeId":"599799","name":"Milesian","startOffset":16,"endOffset":24},{"placeId":"550597","name":"Ionia","startOffset":110,"endOffset":115},{"placeId":"599799","name":"Miletus","startOffset":493,"endOffset":500},{"placeId":"472014","name":"Sardo","startOffset":579,"endOffset":584},{"placeId":"501520","name":"Myrcinus","startOffset":589,"endOffset":597},{"placeId":"501409","name":"Edonia","startOffset":601,"endOffset":607}]},{"id":125,"text":"Hecataeus the historian, son of Hegesander, was of the opinion that they should set forth to neither of these places, but that Aristagoras should build a fortress in the island of Leros and reside there, if he were driven from Miletus. Afterwards, with this as a base, he could return to Miletus.","places":[{"placeId":"599764","name":"Leros","startOffset":180,"endOffset":185},{"placeId":"599799","name":"Miletus","startOffset":227,"endOffset":234},{"placeId":"599799","name":"Miletus","startOffset":288,"endOffset":295}]},{"id":126,"text":"Such was the advice of Hecataeus, but Aristagoras himself thought it best to depart for Myrcinus. He accordingly entrusted Miletus to Pythagoras, a citizen of repute, and himself sailed to Thrace with any that would follow him and then took possession of the place to which he had come. [2] After this he was put to the sword by the Thracians, he and his army, as he was besieging a town, even though the Thracians were ready to depart from it under treaty.HerodotusThe Histories","places":[{"placeId":"501520","name":"Myrcinus","startOffset":88,"endOffset":96},{"placeId":"599799","name":"Miletus","startOffset":123,"endOffset":130},{"placeId":"1001889","name":"Thrace","startOffset":189,"endOffset":195},{"placeId":"1001889","name":"Thracians","startOffset":333,"endOffset":342},{"placeId":"1001889","name":"Thracians","startOffset":405,"endOffset":414}]}]`)},6:{id:6,title:"Book 6: Erato",chapters:JSON.parse(`[{"id":1,"text":"This was the end of Aristagoras, after he had brought about the Ionian revolt. Histiaeus, the tyrant of Miletus, arrived in Sardis after he was let go by Darius. When he came there from Susa, Artaphrenes, the governor of Sardis, asked him for what reason he supposed the Ionians had rebelled; Histiaeus said that he did not know and marvelled at what had happened, pretending to have no knowledge of the present troubles. [2] But Artaphrenes saw that he dissembled and, knowing the exact story of the revolt, said: I will tell you, Histiaeus, the truth of this business: it was you who stitched this shoe, and Aristagoras who put it on.","places":[{"placeId":"550597","name":"Ionian","startOffset":64,"endOffset":70},{"placeId":"599799","name":"Miletus","startOffset":104,"endOffset":111},{"placeId":"550867","name":"Sardis","startOffset":124,"endOffset":130},{"placeId":"912936","name":"Susa","startOffset":186,"endOffset":190},{"placeId":"550867","name":"Sardis","startOffset":221,"endOffset":227},{"placeId":"550597","name":"the Ionians","startOffset":267,"endOffset":278}]},{"id":2,"text":"Thus spoke Artaphrenes regarding the revolt. Histiaeus was frightened by Artaphrenes' understanding of the matter and fled the next night to the sea, for he had deceived Darius by promising to subdue Sardo, the greatest of the islands, while secretly intending to make himself leader of the Ionians in their war against Darius. [2] Crossing over to Chios, he was taken and bound by the Chians, because they judged him to have been sent by Darius to make trouble for them. But when they learned the whole story of his hostility to the king, they set him free.","places":[{"placeId":"472014","name":"Sardo","startOffset":200,"endOffset":205},{"placeId":"550597","name":"the Ionians","startOffset":287,"endOffset":298},{"placeId":"550497","name":"Chios","startOffset":349,"endOffset":354},{"placeId":"550497","name":"the Chians","startOffset":382,"endOffset":392}]},{"id":3,"text":"Then Histiaeus was asked by the Ionians why he had so zealously ordered Aristagoras to revolt from the king and done the Ionians such great harm. He did not at all reveal the true reason to them, telling them instead that king Darius had planned to remove the Phoenicians and settle them in Ionia, and the Ionians in Phoenicia; for this reason, he said, he had sent the order. The king had made no such plan, but Histiaeus wanted to frighten the Ionians.","places":[{"placeId":"550597","name":"the Ionians","startOffset":28,"endOffset":39},{"placeId":"550597","name":"the Ionians","startOffset":117,"endOffset":128},{"placeId":"678334","name":"Phoenicians","startOffset":260,"endOffset":271},{"placeId":"550597","name":"Ionia","startOffset":291,"endOffset":296},{"placeId":"550597","name":"the Ionians","startOffset":302,"endOffset":313},{"placeId":"678334","name":"Phoenicia","startOffset":317,"endOffset":326},{"placeId":"550597","name":"the Ionians","startOffset":442,"endOffset":453}]},{"id":4,"text":"Then Histiaeus, using Hermippus, a man of Atarneus, as messenger, sent letters to the Persians at Sardis, because they had previously talked with him about revolt. But Hermippus did not give the letters to the men to whom he was sent, and went and delivered them to Artaphrenes instead. [2] Artaphrenes, learning all that was afoot, bade Hermippus carry Histiaeus' letters to those for whom he was bringing them, and give him those which the Persians sent in answer to Histiaeus. Thus these men became known, and then Artaphrenes put many Persians to death.","places":[{"placeId":"550469","name":"Atarneus","startOffset":42,"endOffset":50},{"placeId":"geonames-130758","name":"Persians","startOffset":86,"endOffset":94},{"placeId":"550867","name":"Sardis","startOffset":98,"endOffset":104},{"placeId":"geonames-130758","name":"Persians","startOffset":442,"endOffset":450},{"placeId":"geonames-130758","name":"Persians","startOffset":539,"endOffset":547}]},{"id":5,"text":"So troubles arose in Sardis. Since he failed in this hope, the Chians brought Histiaeus back to Miletus at his own request. But the Milesians were glad enough to be rid of Aristagoras himself, and they had no wish to receive another tyrant into their country now that they had tasted freedom. [2] When Histiaeus tried to force his way into Miletus by night, he was wounded in the thigh by a Milesian. Since he was thrust out from his own city, he went back to Chios; when he could not persuade the Chians to give him ships, he then crossed over to Mytilene and persuaded the Lesbians to give him ships. [3] They manned eight triremes, and sailed with Histiaeus to Byzantium; there they encamped, and seized all the ships that were sailing out of the Euxine, except when the crews consented to serve Histiaeus.","places":[{"placeId":"550867","name":"Sardis","startOffset":21,"endOffset":27},{"placeId":"550497","name":"the Chians","startOffset":59,"endOffset":69},{"placeId":"599799","name":"Miletus","startOffset":96,"endOffset":103},{"placeId":"599799","name":"Milesians","startOffset":132,"endOffset":141},{"placeId":"550742","name":"Miletus","startOffset":340,"endOffset":347},{"placeId":"599799","name":"Milesian","startOffset":391,"endOffset":399},{"placeId":"550497","name":"Chios","startOffset":460,"endOffset":465},{"placeId":"550497","name":"the Chians","startOffset":494,"endOffset":504},{"placeId":"550763","name":"Mytilene","startOffset":548,"endOffset":556},{"placeId":"550696","name":"Lesbians","startOffset":575,"endOffset":583},{"placeId":"520985","name":"Byzantium","startOffset":664,"endOffset":673},{"placeId":"1224","name":"Euxine","startOffset":750,"endOffset":756}]},{"id":6,"text":"Such were the doings of Histiaeus and the Mytilenaeans. Against Miletus itself a great fleet and army were expected, for the Persian generals had joined their power together and made one army, which they led against Miletus, taking less account of the other fortresses. Of the fleet, the Phoenicians were the most eager to fight, and there came with them to the war the newly subdued Cyprians, and the Cilicians and Egyptians.","places":[{"placeId":"550763","name":"Mytilenaeans","startOffset":42,"endOffset":54},{"placeId":"599799","name":"Miletus","startOffset":64,"endOffset":71},{"placeId":"geonames-130758","name":"Persian","startOffset":125,"endOffset":132},{"placeId":"550742","name":"Miletus","startOffset":216,"endOffset":223},{"placeId":"678334","name":"Phoenicians","startOffset":288,"endOffset":299},{"placeId":"707498","name":"Cyprians","startOffset":384,"endOffset":392},{"placeId":"658440","name":"Cilicians","startOffset":402,"endOffset":411},{"placeId":"981503","name":"Egyptians","startOffset":416,"endOffset":425}]},{"id":7,"text":"These were coming to attack Miletus and the rest of Ionia. When the Ionians learned of it, they sent deputies to take counsel for them in the Panionium.1 When they came to that place and consulted, they resolved not to collect a land army to meet the Persians, but to leave the Milesians to defend their walls themselves, and to man their fleet to the last ship and gather as quickly as possible at Lade to fight for Miletus at sea. This Lade is a small island lying off the city of Miletus.","places":[{"placeId":"599799","name":"Miletus","startOffset":28,"endOffset":35},{"placeId":"550597","name":"Ionia","startOffset":52,"endOffset":57},{"placeId":"550597","name":"the Ionians","startOffset":64,"endOffset":75},{"placeId":"599855","name":"Panionium","startOffset":142,"endOffset":151},{"placeId":"geonames-130758","name":"Persians","startOffset":251,"endOffset":259},{"placeId":"599799","name":"Milesians","startOffset":278,"endOffset":287},{"placeId":"599746","name":"Lade","startOffset":399,"endOffset":403},{"placeId":"550742","name":"Miletus","startOffset":417,"endOffset":424},{"placeId":"599746","name":"Lade","startOffset":438,"endOffset":442},{"placeId":"599799","name":"Miletus","startOffset":483,"endOffset":490}]},{"id":8,"text":"The Ionians then came there with their ships manned, and with them the Aeolians who dwell in Lesbos. This was their order of battle: The Milesians themselves had the eastern wing, bringing eighty ships; next to them were the Prieneans with twelve ships, and the Myesians with three; next to the Myesians were the Teians with seventeen ships; next to these the Chians with a hundred; near these in the line were the Erythraeans, bringing eight ships, and the Phocaeans with three, and next to these the Lesbians with seventy; last of all in the line were the Samians, holding the western wing with sixty ships. [2] The total number of all these together was three hundred and fifty-three triremes.","places":[{"placeId":"550597","name":"The Ionians","startOffset":0,"endOffset":11},{"placeId":"550406","name":"Aeolians","startOffset":71,"endOffset":79},{"placeId":"550696","name":"Lesbos","startOffset":93,"endOffset":99},{"placeId":"599799","name":"Milesians","startOffset":137,"endOffset":146},{"placeId":"599905","name":"Prieneans","startOffset":225,"endOffset":234},{"placeId":"599813","name":"Myesians","startOffset":262,"endOffset":270},{"placeId":"599813","name":"Myesians","startOffset":295,"endOffset":303},{"placeId":"550913","name":"Teians","startOffset":313,"endOffset":319},{"placeId":"550497","name":"the Chians","startOffset":356,"endOffset":366},{"placeId":"550535","name":"Erythraeans","startOffset":415,"endOffset":426},{"placeId":"550823","name":"Phocaeans","startOffset":458,"endOffset":467},{"placeId":"550696","name":"Lesbians","startOffset":502,"endOffset":510},{"placeId":"599926","name":"Samians","startOffset":558,"endOffset":565}]},{"id":9,"text":"These were the Ionian ships; the ships of the foreigners were six hundred. When these, too, reached the Milesian shore, and all their land power was present, the Persian generals, learning the number of the Ionian ships, feared they would be too weak to overcome the Greeks. If they did not have mastery of the sea, they would not be able to take Miletus, and would be in danger of some evil treatment by Darius. [2] With this in mind, they gathered the tyrants of the Ionians who had been deposed from their governments by Aristagoras of Miletus and had fled to the Medes, and who now were with the army that was led against Miletus. They gathered as many of these men as were with them and said to them: [3] Men of Ionia, let each one of you now show that he has done good service to the king's house; let each one of you try to separate your own countrymen from the rest of the allied power. Set this promise before them: they will suffer no harm for their rebellion, neither their temples nor their houses will be burnt, nor will they in any way be treated more violently than before. [4] But if they will not do so and are set on fighting, then utter a threat that will restrain them: if they are defeated in battle, they will be enslaved; we will make eunuchs of their boys, and carry their maidens captive to Bactra, and hand over their land to others.","places":[{"placeId":"550597","name":"Ionian","startOffset":15,"endOffset":21},{"placeId":"599799","name":"Milesian","startOffset":104,"endOffset":112},{"placeId":"geonames-130758","name":"Persian","startOffset":162,"endOffset":169},{"placeId":"550597","name":"Ionian","startOffset":207,"endOffset":213},{"placeId":"geonames-390903","name":"Greeks","startOffset":267,"endOffset":273},{"placeId":"599799","name":"Miletus","startOffset":347,"endOffset":354},{"placeId":"550597","name":"the Ionians","startOffset":465,"endOffset":476},{"placeId":"550742","name":"Miletus","startOffset":539,"endOffset":546},{"placeId":"903080","name":"Medes","startOffset":567,"endOffset":572},{"placeId":"599799","name":"Miletus","startOffset":626,"endOffset":633},{"placeId":"550597","name":"Ionia","startOffset":718,"endOffset":723},{"placeId":"961886","name":"Bactra","startOffset":1317,"endOffset":1323}]},{"id":10,"text":"So they spoke; the Ionian tyrants sent their messages by night, each to his own countrymen. But the Ionians to whom these messages came were stubborn and would have no part of the treachery, each thinking that the Persians made this offer to them alone. This happened immediately after the Persians arrived at Miletus.","places":[{"placeId":"550597","name":"Ionian","startOffset":19,"endOffset":25},{"placeId":"550597","name":"the Ionians","startOffset":96,"endOffset":107},{"placeId":"geonames-130758","name":"Persians","startOffset":214,"endOffset":222},{"placeId":"geonames-130758","name":"Persians","startOffset":290,"endOffset":298},{"placeId":"599799","name":"Miletus","startOffset":310,"endOffset":317}]},{"id":11,"text":"Then the Ionians who had gathered at Lade held assemblies; among those whom I suppose to have addressed them was Dionysius, the Phocaean general, who spoke thus: [2] Our affairs, men of Ionia, stand on the edge of a razor, whether to be free men or slaves, and runaway slaves at that. If you now consent to endure hardships, you will have toil for the present time, but it will be in your power to overcome your enemies and gain freedom; but if you will be weak and disorderly, I see nothing that can save you from paying the penalty to the king for your rebellion. [4] Believe me and entrust yourselves to me; I promise you that (if the gods deal fairly with us) either our enemies shall not meet us in battle, or if they do they shall be utterly vanquished.","places":[{"placeId":"550597","name":"the Ionians","startOffset":5,"endOffset":16},{"placeId":"599746","name":"Lade","startOffset":37,"endOffset":41},{"placeId":"550823","name":"Phocaean","startOffset":128,"endOffset":136},{"placeId":"550597","name":"Ionia","startOffset":187,"endOffset":192}]},{"id":12,"text":"When the Ionians heard this, they put themselves in Dionysius' hands. He then each day put out to sea with ships in column, using the rowers to pierce each other's line of ships,2 and arming the fighting men on board; for the rest of the day he kept the fleet at anchor; all day he made the Ionians work. [2] For seven days they obeyed him and did his bidding; but on the next day, untried as they were in such labor and worn out by hard work and by the sun, the Ionians began to say each to other: [3] Against what god have we sinned that we have to fulfill this task? We have lost our minds and launched out into folly, committing ourselves into the hands of this Phocaean braggart, who brings but three ships; and having got us he afflicts us with afflictions incurable. Many of us have fallen sick already, and many are likely to suffer the same thing; instead of these ills, it would be better for us to suffer anything, and endure this coming slavery, whatever it will be, rather than be oppressed by that which is now upon us. Come, let us obey him no longer! [4] So they spoke, and from then on no man would obey. As if they were an army, they raised tents on the island where they stayed in the shade, and they were unwilling to embark upon their ships or to continue their exercises.","places":[{"placeId":"550597","name":"the Ionians","startOffset":5,"endOffset":16},{"placeId":"550597","name":"the Ionians","startOffset":287,"endOffset":298},{"placeId":"550597","name":"the Ionians","startOffset":459,"endOffset":470},{"placeId":"550823","name":"Phocaean","startOffset":667,"endOffset":675}]},{"id":13,"text":"When the generals of the Samians learned what the Ionians were doing, they recalled that message which Aeaces son of Syloson had already sent them at the Persians' bidding, entreating them to desert the Ionian alliance; seeing great disorder on the Ionian side, they consented to the message; moreover, it seemed impossible to them to overcome the king's power, and they were well assured that if they overcame Darius' present fleet, another one five times as large would come. [2] Therefore, as soon as they saw the Ionians refusing to be useful, they took up that for a pretext, considering it advantageous to save their own temples and houses. This Aeaces, from whom they received the message, was the son of Syloson son of Aeaces, and had been tyrant of Samos until he was deposed from his rule by Aristagoras of Miletus, just like the other Ionian tyrants.","places":[{"placeId":"599926","name":"Samians","startOffset":25,"endOffset":32},{"placeId":"550597","name":"the Ionians","startOffset":46,"endOffset":57},{"placeId":"geonames-130758","name":"Persians","startOffset":154,"endOffset":162},{"placeId":"550597","name":"Ionian","startOffset":203,"endOffset":209},{"placeId":"550597","name":"Ionian","startOffset":249,"endOffset":255},{"placeId":"550597","name":"the Ionians","startOffset":513,"endOffset":524},{"placeId":"599926","name":"Samos","startOffset":758,"endOffset":763},{"placeId":"599799","name":"Miletus","startOffset":817,"endOffset":824},{"placeId":"550597","name":"Ionian","startOffset":846,"endOffset":852}]},{"id":14,"text":"Now when the Phoenician fleet came sailing against them, the Ionians put out to sea against them with their ships in column. When they drew near and met each other in battle, which of the Ionians were brave men or cowards then in that sea-fight I cannot exactly say; for they all blame each other. [2] The Samians are said, according to their agreement with Aeaces, to have raised their sails and gone off to Samos, leaving their post, all except eleven ships. [3] The captains of these stood their ground and fought, disobeying their admirals. For this deed the Samian people granted that their names and patronymics should be engraved on a pillar as brave men; this pillar now stands in their market-place. But the Lesbians, seeing their neighbors fleeing, did the same as the Samians; and most of the Ionians did likewise.","places":[{"placeId":"678334","name":"Phoenician","startOffset":13,"endOffset":23},{"placeId":"550597","name":"the Ionians","startOffset":57,"endOffset":68},{"placeId":"550597","name":"the Ionians","startOffset":184,"endOffset":195},{"placeId":"599926","name":"Samians","startOffset":306,"endOffset":313},{"placeId":"599926","name":"Samos","startOffset":409,"endOffset":414},{"placeId":"599926","name":"Samian","startOffset":563,"endOffset":569},{"placeId":"550696","name":"Lesbians","startOffset":717,"endOffset":725},{"placeId":"599926","name":"Samians","startOffset":779,"endOffset":786},{"placeId":"550597","name":"the Ionians","startOffset":800,"endOffset":811}]},{"id":15,"text":"The most roughly handled of those that stood their ground in the sea-fight were the Chians, since they refused to be cowards and achieved deeds of renown. They brought a hundred ships to the fleet, as was mentioned above, and on each ship were forty picked men of their citizens. [2] Seeing themselves betrayed by the greater part of their allies, they did not think it right to act like the worst among them; with only a few allies to aid them they fought on and broke the enemy's line, until they had taken many ships but lost most of their own.","places":[{"placeId":"550497","name":"the Chians","startOffset":80,"endOffset":90}]},{"id":16,"text":"The Chians escaped to their own country with their remaining ships, but the crews of the Chian ships that were damaged and disabled were pursued and took refuge in Mykale. There the men beached and left their ships, and made their way across the mainland. [2] But when the Chians entered the lands of Ephesus on their march, they came by night while the women were celebrating the Thesmophoria; then the Ephesians, never having heard the story of the Chians and seeing an army invading their country, were fully persuaded that these were robbers come after their women; so they mustered all their force and killed the Chians.","places":[{"placeId":"550497","name":"Chians","startOffset":4,"endOffset":10},{"placeId":"550497","name":"Chian","startOffset":89,"endOffset":94},{"placeId":"599805","name":"Mykale","startOffset":164,"endOffset":170},{"placeId":"550497","name":"the Chians","startOffset":269,"endOffset":279},{"placeId":"599612","name":"Ephesus","startOffset":301,"endOffset":308},{"placeId":"599612","name":"Ephesians","startOffset":404,"endOffset":413},{"placeId":"550497","name":"the Chians","startOffset":447,"endOffset":457},{"placeId":"550497","name":"the Chians","startOffset":614,"endOffset":624}]},{"id":17,"text":"So these men met with such a fate. As for Dionysius the Phocaean, when he saw that the Ionian cause was lost, he sailed away with the three enemy ships that he had captured; but not to Phocaea, now that he knew well that it would be enslaved with the rest of Ionia; he right away sailed straight to Phoenicia instead, sunk some merchant ships, took a lot of money, and sailed to Sicily; from this base he set himself up as a pirate, robbing Carthaginians and Tyrrhenians, but no Greeks.","places":[{"placeId":"550823","name":"Phocaean","startOffset":56,"endOffset":64},{"placeId":"550597","name":"Ionian","startOffset":87,"endOffset":93},{"placeId":"550823","name":"Phocaea","startOffset":185,"endOffset":192},{"placeId":"550597","name":"Ionia","startOffset":259,"endOffset":264},{"placeId":"678334","name":"Phoenicia","startOffset":299,"endOffset":308},{"placeId":"462492","name":"Sicily","startOffset":379,"endOffset":385},{"placeId":"314921","name":"Carthaginians","startOffset":441,"endOffset":454},{"placeId":"413122","name":"Tyrrhenians","startOffset":459,"endOffset":470},{"placeId":"geonames-390903","name":"Greeks","startOffset":479,"endOffset":485}]},{"id":18,"text":"When the Persians had conquered the Ionians by sea, they laid siege to Miletus by sea and land, mining the walls and using every device against it, until they utterly captured it in the sixth year after the revolt of Aristagoras.3 They enslaved the city, and thus the calamity agreed with the oracle concerning Miletus.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":9,"endOffset":17},{"placeId":"550597","name":"the Ionians","startOffset":32,"endOffset":43},{"placeId":"599799","name":"Miletus","startOffset":71,"endOffset":78},{"placeId":"550742","name":"Miletus","startOffset":311,"endOffset":318}]},{"id":19,"text":"When the Argives inquired at Delphi about the safety of their city, a common response was given, one part regarding the Argives themselves, but there was an additional response for the Milesians. [2] I will mention the part concerning the Argives when I come to that part of my history; this was the prophecy given to the Milesians in their absence: Then, Miletus, contriver of evil deeds, For many will you become a banquet and glorious gifts; Your wives will wash the feet of many long-haired men; Other ministers will tend my Didyman4 shrine!  [3] All this now came upon the Milesians, since most of their men were slain by the Persians, who wore long hair, and their women and children were accounted as slaves, and the temple at Didyma with its shrine and place of divination was plundered and burnt. Of the wealth that was in this temple I have often spoken elsewhere in my history.","places":[{"placeId":"570106","name":"Argives","startOffset":9,"endOffset":16},{"placeId":"540726","name":"Delphi","startOffset":29,"endOffset":35},{"placeId":"570106","name":"Argives","startOffset":120,"endOffset":127},{"placeId":"599799","name":"Milesians","startOffset":185,"endOffset":194},{"placeId":"570106","name":"Argives","startOffset":239,"endOffset":246},{"placeId":"599799","name":"Milesians","startOffset":322,"endOffset":331},{"placeId":"599799","name":"Miletus","startOffset":357,"endOffset":364},{"placeId":"599593","name":"Didyman","startOffset":530,"endOffset":537},{"placeId":"599799","name":"Milesians","startOffset":580,"endOffset":589},{"placeId":"geonames-130758","name":"Persians","startOffset":633,"endOffset":641},{"placeId":"599593","name":"Didyma","startOffset":736,"endOffset":742}]},{"id":20,"text":"After that, the captive Milesians were brought to Susa. King Darius did them no further harm, settling them by the sea called Red, in the city of Ampe, by which the river Tigris flows as it issues into the sea. Of the Milesian land the Persians themselves held what was nearest to the city, and the plain, giving the hill country into the possession of Carians from Pedasa.","places":[{"placeId":"599799","name":"Milesians","startOffset":24,"endOffset":33},{"placeId":"912936","name":"Susa","startOffset":50,"endOffset":54},{"placeId":"39290","name":"sea called Red","startOffset":115,"endOffset":129},{"placeId":"915825","name":"Ampe","startOffset":146,"endOffset":150},{"placeId":"912964","name":"the river Tigris","startOffset":161,"endOffset":177},{"placeId":"599799","name":"Milesian","startOffset":218,"endOffset":226},{"placeId":"geonames-130758","name":"Persians","startOffset":236,"endOffset":244},{"placeId":"991381","name":"Carians","startOffset":353,"endOffset":360},{"placeId":"599873","name":"Pedasa","startOffset":366,"endOffset":372}]},{"id":21,"text":"Now when the Milesians suffered all this at the hands of the Persians, the Sybarites (who had lost their city and dwelt in Laus and Scidrus) did not give them equal return for what they had done. When Sybaris was taken by the Crotoniates, all the people of Miletus, young and old, shaved their heads and made great public lamentation; no cities which we know were ever so closely joined in friendship as these. [2] The Athenians acted very differently. The Athenians made clear their deep grief for the taking of Miletus in many ways, but especially in this: when Phrynichus wrote a play entitled The Fall of Miletus and produced it, the whole theater fell to weeping; they fined Phrynichus a thousand drachmas for bringing to mind a calamity that affected them so personally, and forbade the performance of that play forever.","places":[{"placeId":"599799","name":"Milesians","startOffset":13,"endOffset":22},{"placeId":"geonames-130758","name":"Persians","startOffset":61,"endOffset":69},{"placeId":"452457","name":"Sybarites","startOffset":75,"endOffset":84},{"placeId":"452361","name":"Laus","startOffset":123,"endOffset":127},{"placeId":"452452","name":"Scidrus","startOffset":132,"endOffset":139},{"placeId":"452457","name":"Sybaris","startOffset":201,"endOffset":208},{"placeId":"452317","name":"Crotoniates","startOffset":226,"endOffset":237},{"placeId":"599799","name":"Miletus","startOffset":257,"endOffset":264},{"placeId":"579885","name":"Athenians","startOffset":419,"endOffset":428},{"placeId":"579885","name":"Athenians","startOffset":457,"endOffset":466},{"placeId":"550742","name":"Miletus","startOffset":513,"endOffset":520},{"placeId":"599799","name":"Miletus","startOffset":610,"endOffset":617}]},{"id":22,"text":"Miletus then was left empty of Milesians. The men of property among the Samians were displeased by the dealings of their generals with the Medes, so after the sea-fight they took counsel immediately and resolved that before Aeaces the tyrant came to their country they would sail to a colony, rather than remain and be slaves of the Medes and Aeaces. [2] The people of Zancle5 in Sicily about this time sent messengers to Ionia inviting the Ionians to the Fair Coast, desiring there to found an Ionian city. This Fair Coast, as it is called, is in Sicily, in that part which looks towards Tyrrhenia. At this invitation, the Samians alone of the Ionians, with those Milesians who had escaped, set forth.","places":[{"placeId":"599799","name":"Miletus","startOffset":0,"endOffset":7},{"placeId":"599799","name":"Milesians","startOffset":31,"endOffset":40},{"placeId":"599926","name":"Samians","startOffset":72,"endOffset":79},{"placeId":"903080","name":"Medes","startOffset":139,"endOffset":144},{"placeId":"903080","name":"Medes","startOffset":333,"endOffset":338},{"placeId":"462538","name":"Zancle","startOffset":369,"endOffset":375},{"placeId":"462492","name":"Sicily","startOffset":380,"endOffset":386},{"placeId":"550597","name":"Ionia","startOffset":422,"endOffset":427},{"placeId":"550597","name":"the Ionians","startOffset":437,"endOffset":448},{"placeId":"462267","name":"Fair Coast","startOffset":456,"endOffset":466},{"placeId":"550597","name":"Ionian","startOffset":495,"endOffset":501},{"placeId":"462267","name":"Fair Coast","startOffset":513,"endOffset":523},{"placeId":"462492","name":"Sicily","startOffset":548,"endOffset":554},{"placeId":"413122","name":"Tyrrhenia","startOffset":589,"endOffset":598},{"placeId":"599926","name":"Samians","startOffset":624,"endOffset":631},{"placeId":"550597","name":"the Ionians","startOffset":641,"endOffset":652},{"placeId":"599799","name":"Milesians","startOffset":665,"endOffset":674}]},{"id":23,"text":"In their journey a thing happened to them such as I will show. As they voyaged to Sicily, the Samians came to the country of the Epizephyrian6 Locrians at a time when the people of Zancle and their king (whose name was Scythes) were besieging a Sicilian town desiring to take it. [2] Learning this, Anaxilaus the tyrant of Rhegium, being then in a feud with the Zanclaeans, joined forces with the Samians and persuaded them to leave off their voyage to the Fair Coast and seize Zancle while it was deserted by its men. [3] The Samians consented and seized Zancle; when they learned that their city was taken, the Zanclaeans came to deliver it, calling to their aid Hippocrates the tyrant of Gela, who was their ally. [4] But Hippocrates, when he came bringing his army to aid them, put Scythes the monarch of Zancle and his brother Pythogenes in chains for losing the city, and sent them away to the city of Inyx. He betrayed the rest of the Zanclaeans to the Samians, with whom he had made an agreement and exchanged oaths. [5] The price which the Samians agreed to give him was that Hippocrates should take for his share half of the movable goods and slaves in the city, and all that was in the country. [6] Most of the Zanclaeans were kept in chains as slaves by Hippocrates himself; he gave three hundred chief men to the Samians to be put to death, but the Samians did not do so.","places":[{"placeId":"462492","name":"Sicily","startOffset":82,"endOffset":88},{"placeId":"599926","name":"Samians","startOffset":94,"endOffset":101},{"placeId":"452369","name":"Epizephyrian6 Locrians","startOffset":129,"endOffset":151},{"placeId":"462538","name":"Zancle","startOffset":181,"endOffset":187},{"placeId":"462492","name":"Sicilian","startOffset":245,"endOffset":253},{"placeId":"452416","name":"Rhegium","startOffset":323,"endOffset":330},{"placeId":"462538","name":"Zanclaeans","startOffset":362,"endOffset":372},{"placeId":"599926","name":"Samians","startOffset":397,"endOffset":404},{"placeId":"462267","name":"Fair Coast","startOffset":457,"endOffset":467},{"placeId":"462538","name":"Zancle","startOffset":478,"endOffset":484},{"placeId":"599926","name":"Samians","startOffset":527,"endOffset":534},{"placeId":"462538","name":"Zancle","startOffset":556,"endOffset":562},{"placeId":"462538","name":"Zanclaeans","startOffset":613,"endOffset":623},{"placeId":"462214","name":"Gela","startOffset":691,"endOffset":695},{"placeId":"462538","name":"Zancle","startOffset":809,"endOffset":815},{"placeId":"465923","name":"Inyx","startOffset":908,"endOffset":912},{"placeId":"462538","name":"Zanclaeans","startOffset":942,"endOffset":952},{"placeId":"599926","name":"Samians","startOffset":960,"endOffset":967},{"placeId":"599926","name":"Samians","startOffset":1049,"endOffset":1056},{"placeId":"462538","name":"Zanclaeans","startOffset":1222,"endOffset":1232},{"placeId":"599926","name":"Samians","startOffset":1326,"endOffset":1333},{"placeId":"599926","name":"Samians","startOffset":1362,"endOffset":1369}]},{"id":24,"text":"Scythes the monarch of Zancle escaped from Inyx to Himera, and from there he came to Asia and went up country to king Darius. Darius considered him the most honest man of all who had come up to him from Hellas; [2] for he returned by the king's permission to Sicily and from Sicily back again to Darius, until in old age he ended his life in Persia in great wealth. Without trouble the Samians planted themselves in that most excellent city of Zancle, after they had escaped from the Medes.","places":[{"placeId":"462538","name":"Zancle","startOffset":23,"endOffset":29},{"placeId":"465923","name":"Inyx","startOffset":43,"endOffset":47},{"placeId":"462244","name":"Himera","startOffset":51,"endOffset":57},{"placeId":"geonames-390903","name":"Hellas","startOffset":203,"endOffset":209},{"placeId":"462492","name":"Sicily","startOffset":259,"endOffset":265},{"placeId":"462492","name":"Sicily","startOffset":275,"endOffset":281},{"placeId":"geonames-130758","name":"Persia","startOffset":342,"endOffset":348},{"placeId":"599926","name":"Samians","startOffset":386,"endOffset":393},{"placeId":"462538","name":"Zancle","startOffset":444,"endOffset":450},{"placeId":"903080","name":"Medes","startOffset":484,"endOffset":489}]},{"id":25,"text":"After the fight at sea for Miletus, the Phoenicians at the Persians' bidding brought Aeaces son of Syloson back to Samos, for the high worth of his service to them and for his great achievements. Because of the desertion of their ships in the sea-fight, the Samians were the only rebel people whose city and temples were not burnt. [2] After Miletus was captured, the Persians at once gained possession of Caria. Some of the towns submitted voluntarily; others were brought over by force.","places":[{"placeId":"599799","name":"Miletus","startOffset":27,"endOffset":34},{"placeId":"678334","name":"Phoenicians","startOffset":40,"endOffset":51},{"placeId":"geonames-130758","name":"Persians","startOffset":59,"endOffset":67},{"placeId":"599926","name":"Samos","startOffset":115,"endOffset":120},{"placeId":"599926","name":"Samians","startOffset":258,"endOffset":265},{"placeId":"550742","name":"Miletus","startOffset":342,"endOffset":349},{"placeId":"geonames-130758","name":"Persians","startOffset":368,"endOffset":376},{"placeId":"991381","name":"Caria","startOffset":406,"endOffset":411}]},{"id":26,"text":"All this happened so. Histiaeus the Milesian was at Byzantium, seizing the Ionian merchant ships as they sailed out of the Euxine, when he had news of the business of Miletus. Leaving all matters concerning the Hellespont in charge of Bisaltes of Abydos, son of Apollophanes, he himself sailed with the Lesbians to Chios and, when the Chian guardships would not receive him, fought in the Hollows of Chios (as they are called). [2] Many of their crews he killed; the rest of the people of the country, since they were crippled by the sea-fight, were mastered by Histiaeus with his Lesbians, setting out from Polichne in Chios.","places":[{"placeId":"599799","name":"Milesian","startOffset":36,"endOffset":44},{"placeId":"520985","name":"Byzantium","startOffset":52,"endOffset":61},{"placeId":"550597","name":"Ionian","startOffset":75,"endOffset":81},{"placeId":"1224","name":"Euxine","startOffset":123,"endOffset":129},{"placeId":"599799","name":"Miletus","startOffset":167,"endOffset":174},{"placeId":"501434","name":"Hellespont","startOffset":211,"endOffset":221},{"placeId":"501325","name":"Abydos","startOffset":247,"endOffset":253},{"placeId":"550696","name":"Lesbians","startOffset":303,"endOffset":311},{"placeId":"550497","name":"Chios","startOffset":315,"endOffset":320},{"placeId":"550497","name":"Chian","startOffset":335,"endOffset":340},{"placeId":"550497","name":"Chios","startOffset":400,"endOffset":405},{"placeId":"550696","name":"Lesbians","startOffset":581,"endOffset":589},{"placeId":"550838","name":"Polichne","startOffset":608,"endOffset":616},{"placeId":"550497","name":"Chios","startOffset":620,"endOffset":625}]},{"id":27,"text":"It is common for some sign to be given when great ills threaten cities or nations; for before all this plain signs had been sent to the Chians. [2] Of a band of a hundred youths whom they had sent to Delphi only two returned, ninety-eight being caught and carried off by pestilence; moreover, at about this same time, a little before the sea-fight, the roof fell in on boys learning their letters: of one hundred and twenty of them one alone escaped. [3] These signs a god showed to them; then the sea-fight broke upon them and beat the city to its knees; on top of the sea-fight came Histiaeus and the Lesbians. Since the Chians were in such a bad state, he easily subdued them.","places":[{"placeId":"550497","name":"the Chians","startOffset":132,"endOffset":142},{"placeId":"540726","name":"Delphi","startOffset":200,"endOffset":206},{"placeId":"550696","name":"Lesbians","startOffset":603,"endOffset":611},{"placeId":"550497","name":"the Chians","startOffset":619,"endOffset":629}]},{"id":28,"text":"Then Histiaeus brought a great force of Ionians and Aeolians against Thasos. While he was besieging Thasos a message came that the Phoenicians were putting out to sea from Miletus to attack the rest of Ionia. When he learned this, he left Thasos unsacked, and hastened instead with all his army to Lesbos. [2] From there, since his army suffered from hunger, he crossed over to reap from Atarneus the corn there and the Mysian corn of the Caicus plain. Now it chanced that in that region was Harpagus, a Persian, with no small force under him; when Histiaeus landed, Harpagus met him in battle and took Histiaeus himself alive and killed most of his army.","places":[{"placeId":"550597","name":"Ionians","startOffset":40,"endOffset":47},{"placeId":"550406","name":"Aeolians","startOffset":52,"endOffset":60},{"placeId":"501635","name":"Thasos","startOffset":69,"endOffset":75},{"placeId":"501635","name":"Thasos","startOffset":100,"endOffset":106},{"placeId":"678334","name":"Phoenicians","startOffset":131,"endOffset":142},{"placeId":"599799","name":"Miletus","startOffset":172,"endOffset":179},{"placeId":"550597","name":"Ionia","startOffset":202,"endOffset":207},{"placeId":"501635","name":"Thasos","startOffset":239,"endOffset":245},{"placeId":"550696","name":"Lesbos","startOffset":298,"endOffset":304},{"placeId":"550469","name":"Atarneus","startOffset":388,"endOffset":396},{"placeId":"550710","name":"Mysian","startOffset":420,"endOffset":426},{"placeId":"550491","name":"Caicus plain","startOffset":439,"endOffset":451},{"placeId":"geonames-130758","name":"Persian","startOffset":504,"endOffset":511}]},{"id":29,"text":"Histiaeus was taken prisoner in this way: the Greeks fought with the Persians at Malene in the country of Atarneus; the armies fought for a long time, until the Persian cavalry charged and fell upon the Greeks. So this was the accomplishment of the cavalry; when the Greeks were routed, Histiaeus, supposing that the king would not put him to death for his present transgression, did what showed that he loved his life too well. [2] He was overtaken in his flight by a Persian, and when he was caught and about to be stabbed, he cried out in the Persian language and revealed himself to be Histiaeus the Milesian.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":46,"endOffset":52},{"placeId":"geonames-130758","name":"Persians","startOffset":69,"endOffset":77},{"placeId":"550714","name":"Malene","startOffset":81,"endOffset":87},{"placeId":"550469","name":"Atarneus","startOffset":106,"endOffset":114},{"placeId":"geonames-130758","name":"Persian","startOffset":161,"endOffset":168},{"placeId":"geonames-390903","name":"Greeks","startOffset":203,"endOffset":209},{"placeId":"geonames-390903","name":"Greeks","startOffset":267,"endOffset":273},{"placeId":"geonames-130758","name":"Persian","startOffset":469,"endOffset":476},{"placeId":"geonames-130758","name":"Persian","startOffset":546,"endOffset":553},{"placeId":"599799","name":"Milesian","startOffset":604,"endOffset":612}]},{"id":30,"text":"Now if he had been taken prisoner and brought to king Darius, he would have suffered no harm (to my thinking) and the king would have forgiven his guilt; but as it was, when Histiaeus was brought to Sardis, both because of what he had done, and for fear that he might escape and again win power at the court, Artaphrenes, governor of Sardis, and Harpagus, who had captured him, impaled his body on the spot, and sent his head embalmed to king Darius at Susa. [2] When Darius learned of this, he blamed those who had done it because they had not brought Histiaeus before him alive, and he commanded that the head should be washed and buried with due ceremony, as of a man who had done great good to Darius himself and to Persia.","places":[{"placeId":"550867","name":"Sardis","startOffset":199,"endOffset":205},{"placeId":"550867","name":"Sardis","startOffset":334,"endOffset":340},{"placeId":"912936","name":"Susa","startOffset":453,"endOffset":457},{"placeId":"geonames-130758","name":"Persia","startOffset":720,"endOffset":726}]},{"id":31,"text":"Thus it fared with Histiaeus. The Persian fleet wintered at Miletus, and putting out to sea in the next year easily subdued the islands that lie off the mainland, Chios and Lesbos and Tenedos. Whenever they took an island, the foreigners would (net) the people. [2] This is the manner of their doing it: the men link hands and make a line reaching from the northern sea to the southern, and then advance over the whole island hunting the people down. They also captured the Ionian cities of the mainland in the same way, but not by netting the people; for that was not possible.","places":[{"placeId":"geonames-130758","name":"Persian","startOffset":34,"endOffset":41},{"placeId":"599799","name":"Miletus","startOffset":60,"endOffset":67},{"placeId":"550497","name":"Chios","startOffset":163,"endOffset":168},{"placeId":"550696","name":"Lesbos","startOffset":173,"endOffset":179},{"placeId":"550912","name":"Tenedos","startOffset":184,"endOffset":191},{"placeId":"550597","name":"Ionian","startOffset":474,"endOffset":480}]},{"id":32,"text":"Then the Persian generals were not false to the threats they had made against the Ionians when they were encamped opposite them. When they had gained mastery over the cities, they chose out the most handsome boys and castrated them, making them eunuchs instead of men, and they carried the fairest maidens away to the king; they did all this, and they burnt the cities with their temples. Thus three times had the Ionians been enslaved, first by the Lydians and now twice in a row by the Persians.","places":[{"placeId":"geonames-130758","name":"Persian","startOffset":9,"endOffset":16},{"placeId":"550597","name":"the Ionians","startOffset":78,"endOffset":89},{"placeId":"550597","name":"the Ionians","startOffset":410,"endOffset":421},{"placeId":"550701","name":"Lydians","startOffset":450,"endOffset":457},{"placeId":"geonames-130758","name":"Persians","startOffset":488,"endOffset":496}]},{"id":33,"text":"Then the fleet departed from Ionia and captured everything which lies to the left of one sailing up the Hellespont; the right side had been subdued by the Persians themselves from the mainland. These are the regions of Europe that belong to the Hellespont: the Chersonese, in which there are many cities; Perinthus, and the forts that lie towards Thrace, and Selymbria and Byzantium. [2] The Byzantines and the Calchedonians beyond them did not even wait for the attack of the Phoenicians, but left their own land and fled away into the Euxine, and there settled in the city of Mesambria. The Phoenicians burnt the aforementioned places and turned against Proconnesus and Artace; after giving these also to the flames they sailed back to the Chersonese to finish off the remaining cities, as many as they had not destroyed at their former landing. [3] But they did not sail against Cyzicus at all; the Cyzicenes had already made themselves the king's subjects before the Phoenician expedition, by an agreement with the governor at Dascyleum, Oebares son of Megabazus.","places":[{"placeId":"550597","name":"Ionia","startOffset":29,"endOffset":34},{"placeId":"501434","name":"Hellespont","startOffset":104,"endOffset":114},{"placeId":"geonames-130758","name":"Persians","startOffset":155,"endOffset":163},{"placeId":"501434","name":"Hellespont","startOffset":245,"endOffset":255},{"placeId":"226564","name":"Chersonese","startOffset":261,"endOffset":271},{"placeId":"511357","name":"Perinthus","startOffset":305,"endOffset":314},{"placeId":"1001889","name":"Thrace","startOffset":347,"endOffset":353},{"placeId":"511414","name":"Selymbria","startOffset":359,"endOffset":368},{"placeId":"520985","name":"Byzantium","startOffset":373,"endOffset":382},{"placeId":"520985","name":"Byzantines","startOffset":392,"endOffset":402},{"placeId":"520988","name":"Calchedonians","startOffset":411,"endOffset":424},{"placeId":"678334","name":"Phoenicians","startOffset":477,"endOffset":488},{"placeId":"1224","name":"Euxine","startOffset":537,"endOffset":543},{"placeId":"501516","name":"Mesambria","startOffset":578,"endOffset":587},{"placeId":"678334","name":"Phoenicians","startOffset":593,"endOffset":604},{"placeId":"511378","name":"Proconnesus","startOffset":656,"endOffset":667},{"placeId":"511158","name":"Artace","startOffset":672,"endOffset":678},{"placeId":"226564","name":"Chersonese","startOffset":742,"endOffset":752},{"placeId":"511218","name":"Cyzicus","startOffset":882,"endOffset":889},{"placeId":"511218","name":"Cyzicenes","startOffset":902,"endOffset":911},{"placeId":"678334","name":"Phoenician","startOffset":971,"endOffset":981},{"placeId":"511225","name":"Dascyleum","startOffset":1031,"endOffset":1040}]},{"id":34,"text":"The Phoenicians subdued all the cities in the Chersonese except Cardia. Miltiades son of Cimon son of Stesagoras was tyrant there. Miltiades son of Cypselus had gained the rule earlier in the following manner: the Thracian Dolonci held possession of this Chersonese. They were crushed in war by the Apsinthians, so they sent their kings to Delphi to inquire about the war. [2] The Pythia answered that they should bring to their land as founder the first man who offered them hospitality after they left the sacred precinct. But as the Dolonci passed through Phocis and Boeotia, going along the Sacred Way,7 no one invited them, so they turned toward Athens.","places":[{"placeId":"678334","name":"Phoenicians","startOffset":4,"endOffset":15},{"placeId":"226564","name":"Chersonese","startOffset":46,"endOffset":56},{"placeId":"501458","name":"Cardia","startOffset":64,"endOffset":70},{"placeId":"1001889","name":"Thracian","startOffset":214,"endOffset":222},{"placeId":"226564","name":"Chersonese","startOffset":255,"endOffset":265},{"placeId":"501356","name":"Apsinthians","startOffset":299,"endOffset":310},{"placeId":"540726","name":"Delphi","startOffset":340,"endOffset":346},{"placeId":"541048","name":"Phocis","startOffset":559,"endOffset":565},{"placeId":"540689","name":"Boeotia","startOffset":570,"endOffset":577},{"placeId":"hestia-sacred-way","name":"Sacred Way","startOffset":595,"endOffset":605},{"placeId":"579885","name":"Athens","startOffset":651,"endOffset":657}]},{"id":35,"text":"At that time in Athens, Pisistratus held all power, but Miltiades son of Cypselus also had great influence. His household was rich enough to maintain a four-horse chariot, and he traced his earliest descent to Aeacus and Aegina, though his later ancestry was Athenian. Philaeus son of Ajax was the first of that house to be an Athenian. [2] Miltiades was sitting on his porch when he saw the Dolonci go by with their foreign clothing and spears, so he called out to them, and when they came over, he invited them in for lodging and hospitality. They accepted, and after he entertained them, they revealed the whole story of the oracle to him and asked him to obey the god. [3] He was persuaded as soon as he heard their speech, for he was tired of Pisistratus' rule and wanted to be away from it. He immediately set out for Delphi to ask the oracle if he should do what the Dolonci asked of him.","places":[{"placeId":"579885","name":"Athens","startOffset":16,"endOffset":22},{"placeId":"579844","name":"Aegina","startOffset":221,"endOffset":227},{"placeId":"579885","name":"Athenian","startOffset":259,"endOffset":267},{"placeId":"579885","name":"Athenian","startOffset":327,"endOffset":335},{"placeId":"540726","name":"Delphi","startOffset":824,"endOffset":830}]},{"id":36,"text":"The Pythia also bade him do so. Then Miltiades son of Cypselus, previously an Olympic victor in the four-horse chariot, recruited any Athenian who wanted to take part in the expedition, sailed off with the Dolonci, and took possession of their land. Those who brought him appointed him tyrant. [2] His first act was to wall off the isthmus of the Chersonese from the city of Cardia across to Pactye,8 so that the Apsinthians would not be able to harm them by invading their land. The isthmus is thirty-six stadia across, and to the south of the isthmus the Chersonese is four hundred and twenty stadia in length.","places":[{"placeId":"570531","name":"Olympic","startOffset":78,"endOffset":85},{"placeId":"579885","name":"Athenian","startOffset":134,"endOffset":142},{"placeId":"226564","name":"Chersonese","startOffset":347,"endOffset":357},{"placeId":"501458","name":"Cardia","startOffset":375,"endOffset":381},{"placeId":"501546","name":"Pactye","startOffset":392,"endOffset":398},{"placeId":"501356","name":"Apsinthians","startOffset":413,"endOffset":424},{"placeId":"226564","name":"Chersonese","startOffset":557,"endOffset":567}]},{"id":37,"text":"After Miltiades had pushed away the Apsinthians by walling off the neck of the Chersonese, he made war first on the people of Lampsacus, but the Lampsacenes laid an ambush and took him prisoner. However, Miltiades stood high in the opinion of Croesus the Lydian, and when Croesus heard what had happened, he sent to the Lampsacenes and commanded them to release Miltiades. If they did not do so, he threatened to cut them down like a pine tree. [2] The Lampsacenes went astray in their counsels as to what the utterance meant which Croesus had threatened them with, saying he would devastate them like a pine tree, until at last one of the elders understood and said what it was: the pine is the only tree that once cut down never sends out any shoots; it is utterly destroyed. So out of fear of Croesus the Lampsacenes released Miltiades and let him go.","places":[{"placeId":"501356","name":"Apsinthians","startOffset":36,"endOffset":47},{"placeId":"226564","name":"Chersonese","startOffset":79,"endOffset":89},{"placeId":"501570","name":"Lampsacus","startOffset":126,"endOffset":135},{"placeId":"501570","name":"Lampsacenes","startOffset":145,"endOffset":156},{"placeId":"550701","name":"Lydian","startOffset":255,"endOffset":261},{"placeId":"501570","name":"Lampsacenes","startOffset":320,"endOffset":331},{"placeId":"501570","name":"Lampsacenes","startOffset":453,"endOffset":464},{"placeId":"501570","name":"Lampsacenes","startOffset":808,"endOffset":819}]},{"id":38,"text":"So he escaped by the intervention of Croesus, but he later died childless and left his rule and possessions to Stesagoras, the son of his half-brother Cimon. Since his death, the people of the Chersonese offer sacrifices to him as their founder in the customary manner, instituting a contest of horse races and gymnastics. No one from Lampsacus is allowed to compete. [2] But in the war against the Lampsacenes Stesagoras too met his end and died childless; he was struck on the head with an axe in the town-hall by a man who pretended to be a deserter but in truth was an enemy and a man of violence.","places":[{"placeId":"226564","name":"Chersonese","startOffset":193,"endOffset":203},{"placeId":"501570","name":"Lampsacus","startOffset":335,"endOffset":344},{"placeId":"501570","name":"Lampsacenes","startOffset":399,"endOffset":410}]},{"id":39,"text":"Stesagoras met his end in this way. The sons of Pisistratus sent Miltiades, son of Cimon and brother of the dead Stesagoras, in a trireme to the Chersonese to take control of the country; they had already treated him well at Athens, feigning that they had not been accessory to the death of Cimon his father, which I will relate in another place. [2] Reaching the Chersonese, Miltiades kept himself within his house, professing thus to honor the memory of his brother Stesagoras. When the people of the Chersonese learned this, their ruling men gathered together from all the cities on every side, and came together in a group to show fellow-feeling with his mourning; but he put them in bonds. So Miltiades made himself master of the Chersonese; there he maintained a guard of five hundred men, and married Hegesipyle the daughter of Olorus, king of Thrace.","places":[{"placeId":"226564","name":"Chersonese","startOffset":145,"endOffset":155},{"placeId":"579885","name":"Athens","startOffset":225,"endOffset":231},{"placeId":"226564","name":"Chersonese","startOffset":364,"endOffset":374},{"placeId":"226564","name":"Chersonese","startOffset":503,"endOffset":513},{"placeId":"226564","name":"Chersonese","startOffset":735,"endOffset":745},{"placeId":"1001889","name":"Thrace","startOffset":851,"endOffset":857}]},{"id":40,"text":"But not long after this Miltiades son of Cimon had come to the Chersonese, greater difficulties than the present afflictions overtook him. He had been driven from the country three years before this9 by the Scythians. The nomadic Scythians, provoked by Darius, gathered themselves together and rode as far as the Chersonese. [2] Miltiades did not await their attack and fled from the Chersonese, until the Scythians departed and the Dolonci brought him back again. All this had happened three years before the matters that now engaged him.","places":[{"placeId":"226564","name":"Chersonese","startOffset":63,"endOffset":73},{"placeId":"1273","name":"Scythians","startOffset":207,"endOffset":216},{"placeId":"1273","name":"Scythians","startOffset":230,"endOffset":239},{"placeId":"226564","name":"Chersonese","startOffset":313,"endOffset":323},{"placeId":"226564","name":"Chersonese","startOffset":384,"endOffset":394},{"placeId":"1273","name":"Scythians","startOffset":406,"endOffset":415}]},{"id":41,"text":"But now, learning that the Phoenicians were in Tenedos, he sailed away to Athens with five triremes loaded with the possessions that he had nearby. He set out from Cardia and crossed the Black Bay, and as he was sailing along the Chersonese the Phoenicians fell upon him with their ships. [2] Miltiades himself escaped with four of his ships to Imbros, but the fifth was pursued and overtaken by the Phoenicians. It happened that the captain of this ship was Metiochus, the eldest son of Miltiades by another wife, not the daughter of Olorus the Thracian. [3] The Phoenicians took this man captive with his ship; and when they heard that he was Miltiades' son, they brought him up to the king, thinking that this would be a very favorable service, because Miltiades had declared his opinion among the Ionians that they should obey the Scythians in their demand to break the bridge of boats and sail away to their homes. [4] But when the Phoenicians brought Miltiades' son Metiochus before him, Darius did him no harm but much good, giving him a house and possessions and a Persian wife, who bore him children who were reckoned as Persians. Miltiades made his way from Imbros to Athens.","places":[{"placeId":"678334","name":"Phoenicians","startOffset":27,"endOffset":38},{"placeId":"550912","name":"Tenedos","startOffset":47,"endOffset":54},{"placeId":"579885","name":"Athens","startOffset":74,"endOffset":80},{"placeId":"501458","name":"Cardia","startOffset":164,"endOffset":170},{"placeId":"501513","name":"Black Bay","startOffset":187,"endOffset":196},{"placeId":"226564","name":"Chersonese","startOffset":230,"endOffset":240},{"placeId":"678334","name":"Phoenicians","startOffset":245,"endOffset":256},{"placeId":"501439","name":"Imbros","startOffset":345,"endOffset":351},{"placeId":"678334","name":"Phoenicians","startOffset":400,"endOffset":411},{"placeId":"1001889","name":"Thracian","startOffset":546,"endOffset":554},{"placeId":"678334","name":"Phoenicians","startOffset":564,"endOffset":575},{"placeId":"550597","name":"the Ionians","startOffset":797,"endOffset":808},{"placeId":"1273","name":"Scythians","startOffset":835,"endOffset":844},{"placeId":"678334","name":"Phoenicians","startOffset":937,"endOffset":948},{"placeId":"geonames-130758","name":"Persian","startOffset":1073,"endOffset":1080},{"placeId":"geonames-130758","name":"Persians","startOffset":1130,"endOffset":1138},{"placeId":"501439","name":"Imbros","startOffset":1168,"endOffset":1174},{"placeId":"579885","name":"Athens","startOffset":1178,"endOffset":1184}]},{"id":42,"text":"In this year10 the Persians caused no further trouble for the Ionians, and at this same time certain things happened which greatly benefited the Ionians. Artaphrenes governor of Sardis summoned ambassadors from the cities and compelled the Ionians to make agreements among themselves that they would abide by the law and not rob and plunder each other. [2] He compelled them to do this, and he measured their lands by parasangs, which is the Persian name for a distance of thirty stadia, and ordered that each people should according to this measurement pay a tribute which has remained fixed as assessed by Artaphrenes ever since that time up to this day; the sum appointed was about the same as that which they had rendered before. This then kept them peaceable.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":19,"endOffset":27},{"placeId":"550597","name":"the Ionians","startOffset":58,"endOffset":69},{"placeId":"550597","name":"the Ionians","startOffset":141,"endOffset":152},{"placeId":"550867","name":"Sardis","startOffset":178,"endOffset":184},{"placeId":"550597","name":"the Ionians","startOffset":236,"endOffset":247},{"placeId":"geonames-130758","name":"Persian","startOffset":442,"endOffset":449}]},{"id":43,"text":"But at the beginning of spring11 the other generals were deposed by the king from their offices, and Mardonius son of Gobryas, a man young in years and recently married to Darius' daughter Artozostre, came down to the coast at the head of a very great army and fleet. [2] When Mardonius reached Cilicia at the head of this army, he himself embarked on shipboard and sailed with the rest of his ships, while other captains led the land army to the Hellespont. [3] When Mardonius arrived in Ionia in his voyage along the coast of Asia, he did a thing which I here set down for the wonder of those Greeks who will not believe Otanes to have declared his opinion among the Seven that democracy was best for Persia:12 Mardonius deposed all the Ionian tyrants and set up democracies in their cities. [4] He did this and hurried to the Hellespont. When a great multitude of ships and a great army were assembled, the Persians crossed the Hellespont on shipboard and marched through Europe, with Eretria and Athens as their goal.","places":[{"placeId":"628957","name":"Cilicia","startOffset":295,"endOffset":302},{"placeId":"501434","name":"Hellespont","startOffset":447,"endOffset":457},{"placeId":"550597","name":"Ionia","startOffset":489,"endOffset":494},{"placeId":"geonames-390903","name":"Greeks","startOffset":595,"endOffset":601},{"placeId":"geonames-130758","name":"Persia","startOffset":703,"endOffset":709},{"placeId":"550597","name":"Ionian","startOffset":739,"endOffset":745},{"placeId":"501434","name":"Hellespont","startOffset":829,"endOffset":839},{"placeId":"geonames-130758","name":"Persians","startOffset":910,"endOffset":918},{"placeId":"501434","name":"Hellespont","startOffset":931,"endOffset":941},{"placeId":"579925","name":"Eretria","startOffset":988,"endOffset":995},{"placeId":"579885","name":"Athens","startOffset":1000,"endOffset":1006}]},{"id":44,"text":"This was the stated end of their expedition, but they intended to subdue as many of the Greek cities as they could. Their fleet subdued the Thasians, who did not so much as lift up their hands against it; their land army added the Macedonians to the slaves that they had already, for all the nations nearer to them than Macedonia had been made subject to the Persians before this. [2] Crossing over from Thasos they travelled near the land as far as Acanthus, and putting out from there they tried to round Athos. But a great and irresistible north wind fell upon them as they sailed past and dealt very roughly with them, driving many of their ships upon Athos. [3] It is said that about three hundred ships were lost, and more than twenty thousand men. Since the coasts of Athos abound in wild beasts, some men were carried off by beasts and so perished; others were dashed against the rocks; those who could not swim perished because of that, and still others by the cold.","places":[{"placeId":"geonames-390903","name":"Greek","startOffset":88,"endOffset":93},{"placeId":"501635","name":"Thasians","startOffset":140,"endOffset":148},{"placeId":"491656","name":"Macedonians","startOffset":231,"endOffset":242},{"placeId":"491656","name":"Macedonia","startOffset":320,"endOffset":329},{"placeId":"geonames-130758","name":"Persians","startOffset":359,"endOffset":367},{"placeId":"501635","name":"Thasos","startOffset":404,"endOffset":410},{"placeId":"501339","name":"Acanthus","startOffset":450,"endOffset":458},{"placeId":"501365","name":"Athos","startOffset":507,"endOffset":512},{"placeId":"501365","name":"Athos","startOffset":656,"endOffset":661},{"placeId":"501365","name":"Athos","startOffset":775,"endOffset":780}]},{"id":45,"text":"Thus it fared with the fleet; as for Mardonius and his land army, while they were encamped in Macedonia, the Brygi of Thrace attacked them by night and killed many of them, wounding Mardonius himself. But not even these could escape being enslaved by the Persians; Mardonius did not depart from those lands before he had subjugated them. [2] After conquering them, he led his army away homewards, since the Brygi had dealt a heavy blow to his army and Athos an even heavier blow to his fleet. This expedition after an inglorious adventure returned back to Asia.","places":[{"placeId":"491656","name":"Macedonia","startOffset":94,"endOffset":103},{"placeId":"481774","name":"Brygi","startOffset":109,"endOffset":114},{"placeId":"1001889","name":"Thrace","startOffset":118,"endOffset":124},{"placeId":"geonames-130758","name":"Persians","startOffset":255,"endOffset":263},{"placeId":"481774","name":"Brygi","startOffset":407,"endOffset":412},{"placeId":"501365","name":"Athos","startOffset":452,"endOffset":457}]},{"id":46,"text":"In the next year after this,13 Darius first sent a message bidding the Thasians, who were falsely reported by their neighbors to be planning rebellion, to destroy their walls and bring their ships to Abdera. [2] Since they had been besieged by Histiaeus of Miletus and had great revenues, the Thasians had used their wealth to build ships of war and surround themselves with stronger walls. [3] Their revenue came from the mainland and from the mines. About eighty talents on average came in from the gold-mines of the Dug Forest,14 and less from the mines of Thasos itself, yet so much that the Thasians, paying no tax on their crops, drew a yearly revenue from the mainland and the mines of two hundred talents on average, and three hundred when the revenue was greatest.","places":[{"placeId":"501635","name":"Thasians","startOffset":71,"endOffset":79},{"placeId":"501323","name":"Abdera","startOffset":200,"endOffset":206},{"placeId":"599799","name":"Miletus","startOffset":257,"endOffset":264},{"placeId":"501635","name":"Thasians","startOffset":293,"endOffset":301},{"placeId":"507463","name":"Dug Forest","startOffset":520,"endOffset":530},{"placeId":"501635","name":"Thasos","startOffset":562,"endOffset":568},{"placeId":"501635","name":"Thasians","startOffset":598,"endOffset":606}]},{"id":47,"text":"I myself have seen these mines; by far the most marvellous were those that were found by the Phoenicians who with Thasos colonized this island, which is now called after that Phoenician Thasos. [2] These Phoenician mines are between the place called Aenyra and Coenyra in Thasos, opposite Samothrace; they are in a great hill that has been dug up in the searching. So much for that. The Thasians at the king's command destroyed their walls and brought all their ships to Abdera.","places":[{"placeId":"678334","name":"Phoenicians","startOffset":93,"endOffset":104},{"placeId":"501635","name":"Thasos","startOffset":114,"endOffset":120},{"placeId":"678334","name":"Phoenician","startOffset":175,"endOffset":185},{"placeId":"501635","name":"Thasos","startOffset":186,"endOffset":192},{"placeId":"678334","name":"Phoenician","startOffset":204,"endOffset":214},{"placeId":"501338","name":"Aenyra","startOffset":250,"endOffset":256},{"placeId":"501473","name":"Coenyra","startOffset":261,"endOffset":268},{"placeId":"501635","name":"Thasos","startOffset":272,"endOffset":278},{"placeId":"501596","name":"Samothrace","startOffset":289,"endOffset":299},{"placeId":"501635","name":"Thasians","startOffset":387,"endOffset":395},{"placeId":"501323","name":"Abdera","startOffset":471,"endOffset":477}]},{"id":48,"text":"Then Darius attempted to learn whether the Greeks intended to wage war against him or to surrender themselves. He sent heralds this way and that throughout Hellas, bidding them demand a gift of earth and water for the king. [2] He despatched some to Hellas, and he sent others to his own tributary cities of the coast, commanding that ships of war and transports for horses be built.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":43,"endOffset":49},{"placeId":"geonames-390903","name":"Hellas","startOffset":156,"endOffset":162},{"placeId":"geonames-390903","name":"Hellas","startOffset":250,"endOffset":256}]},{"id":49,"text":"So the cities set about these preparations. The heralds who went to Hellas received what the king's proclamation demanded from many of those dwelling on the mainland and from all the islanders to whom they came with the demand. Among the islanders who gave earth and water to Darius were the Aeginetans. [3] The Athenians immediately came down upon them for doing this, for they supposed the Aeginetans to have given the gift out of enmity for Athens, so they might join with the Persians in attacking the Athenians. Gladly laying hold of this pretext, they went to Sparta and there accused the Aeginetans of acting to betray Hellas.","places":[{"placeId":"geonames-390903","name":"Hellas","startOffset":68,"endOffset":74},{"placeId":"579844","name":"Aeginetans","startOffset":292,"endOffset":302},{"placeId":"579885","name":"Athenians","startOffset":312,"endOffset":321},{"placeId":"579844","name":"Aeginetans","startOffset":392,"endOffset":402},{"placeId":"579885","name":"Athens","startOffset":444,"endOffset":450},{"placeId":"geonames-130758","name":"Persians","startOffset":480,"endOffset":488},{"placeId":"579885","name":"Athenians","startOffset":506,"endOffset":515},{"placeId":"570685","name":"Sparta","startOffset":566,"endOffset":572},{"placeId":"579844","name":"Aeginetans","startOffset":595,"endOffset":605},{"placeId":"geonames-390903","name":"Hellas","startOffset":626,"endOffset":632}]},{"id":50,"text":"Regarding this accusation, Cleomenes son of Anaxandrides, king of Sparta, crossed over to Aegina intending to arrest the most culpable of its people. [2] But when he attempted to make the arrests, the Aeginetans opposed him, especially Crius son of Polycritus, who told him he would not take away any Aeginetan with impunity, for he had no authority from the Spartans for what he was doing; instead he had been bribed by the Athenians; otherwise he would have come to make the arrests with the other king. He said this because of a letter from Demaratus. [3] Driven from Aegina, Cleomenes asked Crius his name; and when Crius told him what it was, Cleomenes said to him, Now is the time to put bronze on your horns, Mr. Ram,15 for great calamity will confront you.","places":[{"placeId":"570685","name":"Sparta","startOffset":66,"endOffset":72},{"placeId":"579844","name":"Aegina","startOffset":90,"endOffset":96},{"placeId":"579844","name":"Aeginetans","startOffset":201,"endOffset":211},{"placeId":"579844","name":"Aeginetan","startOffset":301,"endOffset":310},{"placeId":"570685","name":"Spartans","startOffset":359,"endOffset":367},{"placeId":"579885","name":"Athenians","startOffset":425,"endOffset":434},{"placeId":"579844","name":"Aegina","startOffset":571,"endOffset":577}]},{"id":51,"text":"All this time Demaratus son of Ariston remained at Sparta and spread evil reports of Cleomenes. This Demaratus was also king of Sparta, but of the inferior house; not indeed inferior in any other regard (for they have a common ancestor), but the house of Eurysthenes has in some sort the greater honor by right of primogeniture.16","places":[{"placeId":"570685","name":"Sparta","startOffset":51,"endOffset":57},{"placeId":"570685","name":"Sparta","startOffset":128,"endOffset":134}]},{"id":52,"text":"The Lacedaemonians say (but no poet agrees) that it was Aristodemus son of Aristomachus son of Cleodaeus son of Hyllus, and not his sons, who led them to that land which they now possess. [2] After no long time Aristodemus' wife, whose name was Argeia, bore him offspring; they say she was daughter of Autesion son of Tisamenus son of Thersander son of Polynices; she bore him twins; Aristodemus lived to see the children, then died of a sickness. [3] The Lacedaemonians of that day planned to follow their custom and make the eldest of the children king. But the children were identical in all respects, so the Lacedaemonians did not know which to choose; when they could not judge between them, or perhaps even before this, they asked the mother. [4] She said she knew no better than the Lacedaemonians which was the elder; she knew perfectly well, but she said this because she desired that by some means both might be made kings. The Lacedaemonians were at a loss, so they sent to Delphi to inquire how they should deal with the matter. [5] The priestess bade them make both children kings but give greater honor to the elder. When the priestess gave this response, the Lacedaemonians knew no better than before how to discover the elder child, and a man of Messenia, whose name was Panites, gave them advice: [6] he advised them to watch the mother and see which of the children she washed and fed before the other; if she was seen to do this always in the same order, they would then have all that they sought and desired to discover; but if she changed her practice haphazardly, then it would be manifest to the Lacedaemonians that she know no more than they did, and they must have recourse to some other means. [7] Then the Spartans did as the Messenian advised; as they watched the mother of Aristodemus' children, they found her always preferring the elder when she fed and washed them, since she did not know why she was being watched. So they took the child that was preferred by its mother and brought it up at public expense as the first-born; and they called it Eurysthenes, and the other Procles. [8] They say that when these two brothers grew to manhood, they feuded with each other as long as they lived, and their descendants continued to do likewise.","places":[{"placeId":"570406","name":"Lacedaemonians","startOffset":4,"endOffset":18},{"placeId":"570406","name":"Lacedaemonians","startOffset":456,"endOffset":470},{"placeId":"570406","name":"Lacedaemonians","startOffset":612,"endOffset":626},{"placeId":"570406","name":"Lacedaemonians","startOffset":790,"endOffset":804},{"placeId":"570406","name":"Lacedaemonians","startOffset":938,"endOffset":952},{"placeId":"540726","name":"Delphi","startOffset":985,"endOffset":991},{"placeId":"570406","name":"Lacedaemonians","startOffset":1174,"endOffset":1188},{"placeId":"570480","name":"Messenia","startOffset":1262,"endOffset":1270},{"placeId":"570406","name":"Lacedaemonians","startOffset":1619,"endOffset":1633},{"placeId":"570685","name":"Sparta","startOffset":1733,"endOffset":1739},{"placeId":"570480","name":"Messenia","startOffset":1753,"endOffset":1761}]},{"id":53,"text":"The Lacedaemonians are the only Greeks who tell this story. But in what I write I follow the Greek report, and hold that the Greeks correctly recount these kings of the Dorians as far back as Perseus son of Danaethey make no mention of the god17 and prove these kings to be Greek; for by that time they had come to be classified as Greeks. [2] I said as far back as Perseus, and I took the matter no further than that, because no one is named as the mortal father of Perseus, as Amphitryon is named father of Heracles. So I used correct reasoning when I said that the Greek record is correct as far back as Perseus; farther back than that, if the king's ancestors in each generation, from Danae daughter of Acrisius upward, be reckoned, then the leaders of the Dorians will be shown to be true-born Egyptians.","places":[{"placeId":"570406","name":"Lacedaemonians","startOffset":4,"endOffset":18},{"placeId":"geonames-390903","name":"Greeks","startOffset":32,"endOffset":38},{"placeId":"geonames-390903","name":"Greek","startOffset":93,"endOffset":98},{"placeId":"geonames-390903","name":"Greeks","startOffset":125,"endOffset":131},{"placeId":"geonames-390903","name":"Greek","startOffset":276,"endOffset":281},{"placeId":"geonames-390903","name":"Greeks","startOffset":334,"endOffset":340},{"placeId":"geonames-390903","name":"Greek","startOffset":570,"endOffset":575},{"placeId":"981503","name":"Egyptians","startOffset":801,"endOffset":810}]},{"id":54,"text":"Thus have I traced their lineage according to the Greek story; but the Persian tale is that Perseus himself was an Assyrian, and became a Greek, which his forebears had not been; the Persians say that the ancestors of Acrisius18 had no bond of kinship with Perseus, and they indeed were, as the Greeks say, Egyptians.","places":[{"placeId":"geonames-390903","name":"Greek","startOffset":50,"endOffset":55},{"placeId":"geonames-130758","name":"Persian","startOffset":71,"endOffset":78},{"placeId":"29492","name":"Assyrian","startOffset":115,"endOffset":123},{"placeId":"geonames-390903","name":"Greek","startOffset":138,"endOffset":143},{"placeId":"geonames-130758","name":"Persians","startOffset":183,"endOffset":191},{"placeId":"geonames-390903","name":"Greeks","startOffset":295,"endOffset":301},{"placeId":"981503","name":"Egyptians","startOffset":307,"endOffset":316}]},{"id":55,"text":"Enough of these matters. Why and for what achievements these men, being Egyptian, won the kingship of the Dorians has been told by others, so I will let it go, and will make mention of matters which others have not touched.","places":[{"placeId":"981503","name":"Egyptian","startOffset":72,"endOffset":80}]},{"id":56,"text":"These privileges the Spartans have given to their kings: two priesthoods, of Zeus called Lacedaemon19 and of Zeus of Heaven; they wage war against whatever land they wish, and no Spartan can hinder them in this on peril of being put under a curse; when the armies go forth the kings go out first and return last; one hundred chosen men guard them in their campaigns; they sacrifice as many sheep and goats as they wish at the start of their expeditions, and take the hides and backs of all sacrificed beasts.","places":[{"placeId":"570685","name":"Spartans","startOffset":21,"endOffset":29},{"placeId":"570406","name":"Lacedaemon","startOffset":89,"endOffset":99},{"placeId":"570685","name":"Spartan","startOffset":179,"endOffset":186}]},{"id":57,"text":"Such are their rights in war; in peace the powers given them are as follows: at all public sacrifices the kings first sit down to the banquet and are first served, each of them receiving a portion double of what is given to the rest of the company; they make the first libations, and the hides of the sacrificed beasts are theirs. [2] At each new moon and each seventh day of the first part of the month, a full-grown victim for Apollo's temple, a bushel of barley-meal, and a Laconian quart20 of wine are given to each from the public store, and chief seats are set apart for them at the games. [3] It is their right to appoint whatever citizens they wish to be protectors of foreigners;21 and they each choose two Pythians. (The Pythians are the ambassadors to Delphi and eat with the kings at the public expense.) If the kings do not come to the public dinner, two choenixes of barley-meal and half a pint of wine are sent to their houses, but when they come, they receive a double share of everything; and the same honor shall be theirs when they are invited by private citizens to dinner. [4] They keep all oracles that are given, though the Pythians also know them. The kings alone judge cases concerning the rightful possessor of an unwedded heiress, if her father has not betrothed her, and cases concerning public roads. [5] If a man desires to adopt a son, it is done in the presence of the kings. They sit with the twenty-eight elders in council; if they do not come, the elders most closely related to them hold the king's privilege, giving two votes over and above the third which is their own.22","places":[{"placeId":"570406","name":"Laconian","startOffset":477,"endOffset":485},{"placeId":"540726","name":"Delphi","startOffset":763,"endOffset":769}]},{"id":58,"text":"The kings are granted these rights from the Spartan commonwealth while they live; when they die, their rights are as follows: Horsemen proclaim their death in all parts of Laconia, and in the city women go about beating on cauldrons. When this happens, two free persons from each house, a man and a woman, are required to wear mourning, or incur heavy penalties if they fail to do so. [2] The Lacedaemonians have the same custom at the deaths of their kings as the foreigners in Asia; most foreigners use the same custom at their kings' deaths. When a king of the Lacedaemonians dies, a fixed number of their subject neighbors must come to the funeral from all Lacedaemon, besides the Spartans. [6] When these and the helots and the Spartans themselves have assembled in one place to the number of many thousands, together with the women, they zealously beat their foreheads and make long and loud lamentation, calling that king that is most recently dead the best of all their kings. Whenever a king dies in war, they make an image of him and carry it out on a well-spread bier. For ten days after the burial there are no assemblies or elections, and they mourn during these days.","places":[{"placeId":"570685","name":"Spartan","startOffset":44,"endOffset":51},{"placeId":"570406","name":"Laconia","startOffset":172,"endOffset":179},{"placeId":"570406","name":"Lacedaemonians","startOffset":393,"endOffset":407},{"placeId":"570406","name":"Lacedaemonians","startOffset":564,"endOffset":578},{"placeId":"570406","name":"Lacedaemon","startOffset":661,"endOffset":671},{"placeId":"570685","name":"Spartans","startOffset":685,"endOffset":693},{"placeId":"570685","name":"Spartans","startOffset":733,"endOffset":741}]},{"id":59,"text":"The Lacedaemonians also resemble the Persians in this: when one king is dead and another takes his office, this successor releases from debt any Spartan who owes a debt to the king or to the commonwealth. Among the Persians the king at the beginning of his reign forgives all cities their arrears of tribute.","places":[{"placeId":"570406","name":"Lacedaemonians","startOffset":4,"endOffset":18},{"placeId":"geonames-130758","name":"Persians","startOffset":37,"endOffset":45},{"placeId":"570685","name":"Spartan","startOffset":145,"endOffset":152},{"placeId":"geonames-130758","name":"Persians","startOffset":215,"endOffset":223}]},{"id":60,"text":"The Lacedaemonians resemble the Egyptians in that their heralds and flute-players and cooks inherit the craft from their fathers, a flute-player's son being a flute-player, and a cook's son a cook, and a herald's son a herald; no others usurp their places, making themselves heralds by loudness of voice; they ply their craft by right of birth. Such is the way of these matters.","places":[{"placeId":"570406","name":"Lacedaemonians","startOffset":4,"endOffset":18},{"placeId":"981503","name":"Egyptians","startOffset":32,"endOffset":41}]},{"id":61,"text":"While Cleomenes was in Aegina working for the common good of Hellas, Demaratus slandered him, not out of care for the Aeginetans, but out of jealousy and envy. Once Cleomenes returned home from Aegina, he planned to remove Demaratus from his kingship, using the following affair as a pretext against him: Ariston, king of Sparta, had married twice but had no children. [2] He did not admit that he himself was responsible, so he married a third time. This is how it came about: he had among the Spartans a friend to whom he was especially attached. This man's wife was by far the most beautiful woman in Sparta, but she who was now most beautiful had once been the ugliest. [3] Her nurse considered her inferior looks and how she was of wealthy people yet unattractive, and, seeing how the parents felt her appearance to be a great misfortune, she contrived to carry the child every day to the sacred precinct of Helen, which is in the place called Therapne,23 beyond the sacred precinct of Phoebus. Every time the nurse carried the child there, she set her beside the image and beseeched the goddess to release the child from her ugliness. [4] Once as she was leaving the sacred precinct, it is said that a woman appeared to her and asked her what she was carrying in her arms. The nurse said she was carrying a child and the woman bade her show it to her, but she refused, saying that the parents had forbidden her to show it to anyone. But the woman strongly bade her show it to her, [5] and when the nurse saw how important it was to her, she showed her the child. The woman stroked the child's head and said that she would be the most beautiful woman in all Sparta. From that day her looks changed, and when she reached the time for marriage, Agetus son of Alcidas married her. This man was Ariston's friend.","places":[{"placeId":"579844","name":"Aegina","startOffset":23,"endOffset":29},{"placeId":"geonames-390903","name":"Hellas","startOffset":61,"endOffset":67},{"placeId":"579844","name":"Aeginetans","startOffset":118,"endOffset":128},{"placeId":"579844","name":"Aegina","startOffset":194,"endOffset":200},{"placeId":"570685","name":"Sparta","startOffset":322,"endOffset":328},{"placeId":"570685","name":"Spartans","startOffset":495,"endOffset":503},{"placeId":"570685","name":"Sparta","startOffset":604,"endOffset":610},{"placeId":"570723","name":"Therapne","startOffset":949,"endOffset":957},{"placeId":"570685","name":"Sparta","startOffset":1663,"endOffset":1669}]},{"id":62,"text":"So love for this woman pricked Ariston, and he contrived as follows: He promised to give to his comrade any one thing out of all he owned, whatever Agetus might choose, and he bade his comrade make him the same promise. Agetus had no fear about his wife, seeing that Ariston was already married, so he agreed and they took oaths on these terms. [2] Ariston gave Agetus whatever it was that he chose out of all his treasures, and then, seeking equal recompense from him, tried to take the wife of his comrade. Agetus said that he had agreed to anything but that, but he was forced by his oath and by the deceitful trick to let his wife be taken.","places":[]},{"id":63,"text":"In this way Ariston married his third wife, after divorcing the second one. But his new wife gave birth to Demaratus too soon, before ten lunar months had passed. [2] When one of his servants announced to him as he sat in council with the ephors that he had a son, Ariston, knowing the time of the marriage, counted up the months on his fingers and swore on oath, It's not mine. The ephors heard this but did not make anything of it. When the boy grew up, Ariston regretted having said that, for he firmly believed Demaratus to be his own son. [3] He named him Demaratus because before his birth all the Spartan populace had prayed that Ariston, the man most highly esteemed out of all the kings of Sparta, might have a son. Thus he was named Demaratus, which means answer to the people's prayer.","places":[{"placeId":"570685","name":"Spartan","startOffset":606,"endOffset":613},{"placeId":"570685","name":"Sparta","startOffset":701,"endOffset":707}]},{"id":64,"text":"Time passed and Ariston died, so Demaratus held the kingship. But it seems that these matters had to become known and cause Demaratus to lose his kingship. He had already fallen out with Cleomenes when he had brought the army back from Eleusis, and now they were even more at odds when Cleomenes crossed over after the Aeginetans who were Medizing.","places":[{"placeId":"579920","name":"Eleusis","startOffset":236,"endOffset":243},{"placeId":"579844","name":"Aeginetans","startOffset":319,"endOffset":329}]},{"id":65,"text":"Cleomenes wanted revenge, so he made a deal with Leotychides son of Menares son of Agis, of the same family as Demaratus. The deal was that Leotychides would go with Cleomenes against the Aeginetans if he became king. [2] Leotychides had already become strongly hostile to Demaratus for the following reason: Leotychides was betrothed to Percalus, daughter of Demarmenus, but Demaratus plotted and robbed him of his marriage, stealing Percalus and marrying her first. [3] From this affair Leotychides was hostile toward Demaratus, so at Cleomenes' instigation he took an oath against him, saying that he was not king of the Spartans by right, since he was not Ariston's son. After making this oath, he prosecuted him, recalling that utterance which Ariston had made when the servant told him he had a son, and he counted up the months and swore that it was not his. [4] Taking his stand on this remark, Leotychides declared that Demaratus was not Ariston's son and that he was not rightly king of Sparta, bringing as witnesses the ephors who had been sitting beside Ariston and heard him say this.","places":[{"placeId":"579844","name":"Aeginetans","startOffset":188,"endOffset":198},{"placeId":"570685","name":"Spartans","startOffset":624,"endOffset":632},{"placeId":"570685","name":"Sparta","startOffset":997,"endOffset":1003}]},{"id":66,"text":"Disputes arose over it, so the Spartans resolved to ask the oracle at Delphi if Demaratus was the son of Ariston. [2] At Cleomenes' instigation this was revealed to the Pythia. He had won over a man of great influence among the Delphians, Cobon son of Aristophantus, and Cobon persuaded the priestess, Periallus, to say what Cleomenes wanted her to. [3] When the ambassadors asked if Demaratus was the son of Ariston, the Pythia gave judgment that he was not. All this came to light later; Cobon was exiled from Delphi, and Periallus was deposed from her position.","places":[{"placeId":"570685","name":"Spartans","startOffset":31,"endOffset":39},{"placeId":"540726","name":"Delphi","startOffset":70,"endOffset":76},{"placeId":"540726","name":"Delphians","startOffset":228,"endOffset":237},{"placeId":"540726","name":"Delphi","startOffset":512,"endOffset":518}]},{"id":67,"text":"So it was concerning Demaratus' loss of the kingship, and from Sparta he went into exile among the Medes because of the following reproach: after he was deposed from the kingship, he was elected to office. [2] When it was the time of the Gymnopaidia,24 Leotychides, now king in his place, saw him in the audience and, as a joke and an insult, sent a messenger to him to ask what it was like to hold office after being king. [3] He was grieved by the question and said that he had experience of both, while Leotychides did not, and that this question would be the beginning for Sparta of either immense evil or immense good fortune. He said this, covered his head, left the theater, and went home, where he immediately made preparations and sacrificed an ox to Zeus. Then he summoned his mother.","places":[{"placeId":"570685","name":"Sparta","startOffset":63,"endOffset":69},{"placeId":"903080","name":"Medes","startOffset":99,"endOffset":104},{"placeId":"570685","name":"Sparta","startOffset":577,"endOffset":583}]},{"id":68,"text":"When she came in, he put some of the entrails in her hands and entreated her, saying, Mother, appealing to Zeus of the household and to all the other gods, I beseech you to tell me the truth. Who is my father? Tell me truly. [2] Leotychides said in the disputes that you were already pregnant by your former husband when you came to Ariston. Others say more foolishly that you approached to one of the servants, the ass-keeper, and that I am his son. [3] I adjure you by the gods to speak what is true. If you have done anything of what they say, you are not the only one; you are in company with many women. There is much talk at Sparta that Ariston did not have child-bearing seed in him, or his former wives would have given him children.","places":[{"placeId":"570685","name":"Sparta","startOffset":632,"endOffset":638}]},{"id":69,"text":"Thus he spoke. His mother answered, My son, since you adjure me by entreaties to speak the truth, I will speak out to you all that is true. On the third night after Ariston brought me to his house, a phantom resembling him came to me. It came and lay with me and then put on me the garlands which it had. [2] It went away, and when Ariston came in later and saw me with the garlands, he asked who gave them to me. I said he did, but he denied it. I swore an oath that just a little while before he had come in and lain with me and given me the garlands, and I said it was not good of him to deny it. [3] When he saw me swearing, he perceived that this was some divine affair. For the garlands had clearly come from the hero's precinct which is established at the courtyard doors, which they call the precinct of Astrabacus, and the seers responded that this was the same hero who had come to me. Thus, my son, you have all you want to know. [4] Either you are from this hero and Astrabacus the hero is your father, or Ariston is, for I conceived you that night. As for how your enemies chiefly attack you, saying that Ariston himself, when your birth was announced, denied in front of a large audience that you were his because the ten months had not yet been completed, he spoke an idle word, out of ignorance of such things. [5] Some women give birth after nine months or seven months; not all complete the ten months. I gave birth to you, my son, after seven months. A little later Ariston himself recognized that he had blurted out that speech because of foolishness. Do not believe other stories about your manner of birth. You have heard the whole truth. May the wife of Leotychides himself, and the wives of the others who say these things, give birth to children fathered by ass-keepers.","places":[]},{"id":70,"text":"Thus his mother spoke. After learning what he desired, Demaratus took provisions and travelled to Elis, pretending that he was going to Delphi to inquire of the oracle. But the Lacedaemonians suspected that he planned to escape and went in pursuit. [2] Demaratus somehow went across to Zacynthus from Elis before them; the Lacedaemonians crossed over after him and laid hands on him, carrying off his servants. But the Zacynthians refused to give him up, and later he crossed from there to Asia and went to king Darius, who received him in grand style and gave him lands and cities. [3] So Demaratus reached Asia through such chances, a man who had gained much renown in Lacedaemon by his many achievements and his wisdom, and by conferring on the state the victory in a chariot-race he had won at Olympia; he was the only king of Sparta who did this.","places":[{"placeId":"570220","name":"Elis","startOffset":98,"endOffset":102},{"placeId":"540726","name":"Delphi","startOffset":136,"endOffset":142},{"placeId":"570406","name":"Lacedaemonians","startOffset":177,"endOffset":191},{"placeId":"531155","name":"Zacynthus","startOffset":286,"endOffset":295},{"placeId":"570220","name":"Elis","startOffset":301,"endOffset":305},{"placeId":"570406","name":"Lacedaemonians","startOffset":323,"endOffset":337},{"placeId":"531155","name":"Zacynthians","startOffset":419,"endOffset":430},{"placeId":"570406","name":"Lacedaemon","startOffset":671,"endOffset":681},{"placeId":"570531","name":"Olympia","startOffset":798,"endOffset":805},{"placeId":"570685","name":"Sparta","startOffset":831,"endOffset":837}]},{"id":71,"text":"Leutychides son of Menares succeeded to the kingship after Demaratus was deposed. A son was born to him, Zeuxidemus, called by some of the Spartans Cyniscus. This Zeuxidemus never became king of Sparta, for he died before Leutychides, leaving his son Archidemus. [2] After the loss of Zeuxidemus, Leutychides married a second wife, Eurydame, sister of Menius and daughter of Diactorides; by her he had no male offspring, but a daughter, Lampito, to whom Archidemus son of Zeuxidemus was married by Leutychides.","places":[{"placeId":"570685","name":"Spartans","startOffset":139,"endOffset":147},{"placeId":"570685","name":"Sparta","startOffset":195,"endOffset":201}]},{"id":72,"text":"But Leutychides also did not come to old age in Sparta; he was punished for his dealings with Demaratus as I will show. He led a Lacedaemonian army to Thessaly,25 and when he could have subdued all the country he took a great bribe. [2] After being caught in the act of hoarding a sleeve full of silver there in the camp, he was brought before a court and banished from Sparta, and his house was destroyed. He went into exile at Tegea and died in that country.","places":[{"placeId":"570685","name":"Sparta","startOffset":48,"endOffset":54},{"placeId":"570406","name":"Lacedaemonian","startOffset":129,"endOffset":142},{"placeId":"1332","name":"Thessaly","startOffset":151,"endOffset":159},{"placeId":"570685","name":"Sparta","startOffset":370,"endOffset":376},{"placeId":"570707","name":"Tegea","startOffset":429,"endOffset":434}]},{"id":73,"text":"This happened long afterwards. When Cleomenes' dealings with Demaratus came off successfully, he immediately took Leutychides with him and went to punish the Aeginetans, with whom he was terribly angry because of their insulting behavior. [2] When the Aeginetans saw that both kings had come after them, they now deemed it best to offer no further resistance; the kings chose ten men of Aegina who were most honored for wealth and lineage, among them Crius son of Polycritus and Casambus son of Aristocrates, the two most powerful men in Aegina; they carried them to Attica and gave them into the keeping of the Athenians, the bitterest foes of the Aeginetans.","places":[{"placeId":"579844","name":"Aeginetans","startOffset":158,"endOffset":168},{"placeId":"579844","name":"Aeginetans","startOffset":252,"endOffset":262},{"placeId":"579844","name":"Aegina","startOffset":387,"endOffset":393},{"placeId":"579844","name":"Aegina","startOffset":538,"endOffset":544},{"placeId":"579888","name":"Attica","startOffset":567,"endOffset":573},{"placeId":"579885","name":"Athenians","startOffset":612,"endOffset":621},{"placeId":"579844","name":"Aeginetans","startOffset":649,"endOffset":659}]},{"id":74,"text":"Later Cleomenes' treacherous plot against Demaratus became known; he was seized with fear of the Spartans and secretly fled to Thessaly. From there he came to Arcadia and stirred up disorder, uniting the Arcadians against Sparta; among his methods of binding them by oath to follow him wherever he led was his zeal to bring the chief men of Arcadia to the city of Nonacris and make them swear by the water of the Styx.26 [2] Near this city is said to be the Arcadian water of the Styx, and this is its nature: it is a stream of small appearance, dropping from a cliff into a pool; a wall of stones runs round the pool. Nonacris, where this spring rises, is a city of Arcadia near Pheneus.","places":[{"placeId":"570685","name":"Spartan","startOffset":97,"endOffset":104},{"placeId":"1332","name":"Thessaly","startOffset":127,"endOffset":135},{"placeId":"570102","name":"Arcadia","startOffset":159,"endOffset":166},{"placeId":"570102","name":"Arcadians","startOffset":204,"endOffset":213},{"placeId":"570685","name":"Sparta","startOffset":222,"endOffset":228},{"placeId":"570102","name":"Arcadia","startOffset":341,"endOffset":348},{"placeId":"570510","name":"Nonacris","startOffset":364,"endOffset":372},{"placeId":"570698","name":"Styx","startOffset":413,"endOffset":417},{"placeId":"570102","name":"Arcadian","startOffset":458,"endOffset":466},{"placeId":"570698","name":"Styx","startOffset":480,"endOffset":484},{"placeId":"570510","name":"Nonacris","startOffset":619,"endOffset":627},{"placeId":"570102","name":"Arcadia","startOffset":667,"endOffset":674},{"placeId":"570595","name":"Pheneus","startOffset":680,"endOffset":687}]},{"id":75,"text":"When the Lacedaemonians learned that Cleomenes was doing this, they took fright and brought him back to Sparta to rule on the same terms as before. Cleomenes had already been not entirely in his right mind, and on his return from exile a mad sickness fell upon him: any Spartan that he happened to meet he would hit in the face with his staff. [2] For doing this, and because he was out of his mind, his relatives bound him in the stocks. When he was in the stocks and saw that his guard was left alone, he demanded a dagger; the guard at first refused to give it, but Cleomenes threatened what he would do to him when he was freed, until the guard, who was a helot, was frightened by the threats and gave him the dagger. [3] Cleomenes took the weapon and set about slashing himself from his shins upwards; from the shin to the thigh he cut his flesh lengthways, then from the thigh to the hip and the sides, until he reached the belly, and cut it into strips; thus he died, as most of the Greeks say, because he persuaded the Pythian priestess to tell the tale of Demaratus. The Athenians alone say it was because he invaded Eleusis and laid waste the precinct of the gods. The Argives say it was because when Argives had taken refuge after the battle in their temple of Argus27 he brought them out and cut them down, then paid no heed to the sacred grove and set it on fire.","places":[{"placeId":"570406","name":"Lacedaemonians","startOffset":9,"endOffset":23},{"placeId":"570685","name":"Sparta","startOffset":104,"endOffset":110},{"placeId":"570685","name":"Spartan","startOffset":270,"endOffset":277},{"placeId":"geonames-390903","name":"Greeks","startOffset":990,"endOffset":996},{"placeId":"579885","name":"Athenians","startOffset":1080,"endOffset":1089},{"placeId":"579920","name":"Eleusis","startOffset":1126,"endOffset":1133},{"placeId":"570106","name":"Argives","startOffset":1179,"endOffset":1186},{"placeId":"570106","name":"Argives","startOffset":1211,"endOffset":1218}]},{"id":76,"text":"As Cleomenes was seeking divination at Delphi, the oracle responded that he would take Argos. When he came with Spartans to the river Erasinus, which is said to flow from the Stymphalian28 lake (this lake issues into a cleft out of sight and reappears at Argos, and from that place onwards the stream is called by the Argives Erasinuswhen Cleomenes came to this river he offered sacrifices to it. [2] The omens were in no way favorable for his crossing, so he said that he honored the Erasinus for not betraying its countrymen, but even so the Argives would not go unscathed. Then he withdrew and led his army seaward to Thyrea, where he sacrificed a bull to the sea and carried his men on shipboard to the region of Tiryns and to Nauplia.","places":[{"placeId":"540726","name":"Delphi","startOffset":39,"endOffset":45},{"placeId":"570106","name":"Argos","startOffset":87,"endOffset":92},{"placeId":"570685","name":"Spartans","startOffset":112,"endOffset":120},{"placeId":"570233","name":"Erasinus","startOffset":134,"endOffset":142},{"placeId":"324369908","name":"Stymphalian","startOffset":175,"endOffset":186},{"placeId":"570106","name":"Argos","startOffset":255,"endOffset":260},{"placeId":"570106","name":"Argives","startOffset":318,"endOffset":325},{"placeId":"570233","name":"Erasinus","startOffset":326,"endOffset":334},{"placeId":"570233","name":"Erasinus","startOffset":487,"endOffset":495},{"placeId":"570106","name":"Argives","startOffset":546,"endOffset":553},{"placeId":"570736","name":"Thyrea","startOffset":623,"endOffset":629},{"placeId":"570740","name":"Tiryns","startOffset":719,"endOffset":725},{"placeId":"570501","name":"Nauplia","startOffset":733,"endOffset":740}]},{"id":77,"text":"The Argives heard of this and came to the coast to do battle with him. When they had come near Tiryns and were at the place called Hesipeia, they encamped opposite the Lacedaemonians, leaving only a little space between the armies. There the Argives had no fear of fair fighting, but rather of being captured by a trick. [2] This was the affair referred to by that oracle which the Pythian priestess gave to the Argives and Milesians in common, which ran thus: When the female defeats the male29 And drives him away, winning glory in Argos, She will make many Argive women tear their cheeks. As someday one of men to come will say: The dread thrice-coiled serpent died tamed by the spear.  [3] All these things coming together spread fear among the Argives. Therefore they resolved to defend themselves by making use of the enemies' herald, and they performed their resolve in this way: whenever the Spartan herald signalled anything to the Lacedaemonians, the Argives did the same thing.","places":[{"placeId":"570106","name":"Argives","startOffset":4,"endOffset":11},{"placeId":"570740","name":"Tiryns","startOffset":95,"endOffset":101},{"placeId":"573513","name":"Hesipeia","startOffset":131,"endOffset":139},{"placeId":"570406","name":"Lacedaemonians","startOffset":168,"endOffset":182},{"placeId":"570106","name":"Argives","startOffset":242,"endOffset":249},{"placeId":"570106","name":"Argives","startOffset":412,"endOffset":419},{"placeId":"599799","name":"Milesians","startOffset":424,"endOffset":433},{"placeId":"570106","name":"Argos","startOffset":535,"endOffset":540},{"placeId":"570106","name":"Argive","startOffset":561,"endOffset":567},{"placeId":"570106","name":"Argives","startOffset":751,"endOffset":758},{"placeId":"570685","name":"Spartan","startOffset":902,"endOffset":909},{"placeId":"570406","name":"Lacedaemonians","startOffset":943,"endOffset":957},{"placeId":"570106","name":"Argives","startOffset":963,"endOffset":970}]},{"id":78,"text":"When Cleomenes saw that the Argives did whatever was signalled by his herald, he commanded that when the herald cried the signal for breakfast, they should then put on their armor and attack the Argives. [2] The Lacedaemonians performed this command, and when they assaulted the Argives they caught them at breakfast in obedience to the herald's signal; they killed many of them, and far more fled for refuge into the grove of Argus, which the Lacedaemonians encamped around and guarded.","places":[{"placeId":"570106","name":"Argives","startOffset":28,"endOffset":35},{"placeId":"570106","name":"Argives","startOffset":195,"endOffset":202},{"placeId":"570406","name":"Lacedaemonians","startOffset":212,"endOffset":226},{"placeId":"570106","name":"Argives","startOffset":279,"endOffset":286},{"placeId":"570406","name":"Lacedaemonians","startOffset":444,"endOffset":458}]},{"id":79,"text":"Then Cleomenes' plan was this: He had with him some deserters from whom he learned the names, then he sent a herald calling by name the Argives that were shut up in the sacred precinct and inviting them to come out, saying that he had their ransom. (Among the Peloponnesians there is a fixed ransom of two minae to be paid for every prisoner.) So Cleomenes invited about fifty Argives to come out one after another and murdered them. [2] Somehow the rest of the men in the temple precinct did not know this was happening, for the grove was thick and those inside could not see how those outside were faring, until one of them climbed a tree and saw what was being done. Thereafter they would not come out at the herald's call.","places":[{"placeId":"570106","name":"Argives","startOffset":136,"endOffset":143},{"placeId":"570577","name":"Peloponnesians","startOffset":260,"endOffset":274},{"placeId":"570106","name":"Argives","startOffset":377,"endOffset":384}]},{"id":80,"text":"Then Cleomenes bade all the helots pile wood about the grove; they obeyed, and he burnt the grove. When the fire was now burning, he asked of one of the deserters to what god the grove belonged; the man said it was of Argos. When he heard that, he groaned aloud, Apollo, god of oracles, you have gravely deceived me by saying that I would take Argos; this, I guess, is the fulfillment of that prophecy.","places":[{"placeId":"570106","name":"Argos","startOffset":218,"endOffset":223},{"placeId":"570106","name":"Argos","startOffset":345,"endOffset":350}]},{"id":81,"text":"Then Cleomenes sent most of his army back to Sparta, while he himself took a thousand of the best warriors and went to the temple of Hera30 to sacrifice. When he wished to sacrifice at the altar the priest forbade him, saying that it was not holy for a stranger to sacrifice there. Cleomenes ordered the helots to carry the priest away from the altar and whip him, and he performed the sacrifice. After doing this, he returned to Sparta.","places":[{"placeId":"570685","name":"Sparta","startOffset":45,"endOffset":51},{"placeId":"570685","name":"Sparta","startOffset":430,"endOffset":436}]},{"id":82,"text":"But after his return his enemies brought him before the ephors, saying that he had been bribed not to take Argos when he might have easily taken it. Cleomenes alleged (whether falsely or truly, I cannot rightly say; but this he alleged in his speech) that he had supposed the god's oracle to be fulfilled by his taking of the temple of Argus; therefore he had thought it best not to make any attempt on the city before he had learned from the sacrifices whether the god would deliver it to him or withstand him; [2] when he was taking omens in Hera's temple a flame of fire had shone forth from the breast of the image, and so he learned the truth of the matter, that he would not take Argos. If the flame had come out of the head of the image, he would have taken the city from head to foot utterly; but its coming from the breast signified that he had done as much as the god willed to happen. This plea of his seemed to the Spartans to be credible and reasonable, and he far outdistanced the pursuit of his accusers.","places":[{"placeId":"570106","name":"Argos","startOffset":107,"endOffset":112},{"placeId":"570106","name":"Argos","startOffset":686,"endOffset":691},{"placeId":"570685","name":"Spartans","startOffset":927,"endOffset":935}]},{"id":83,"text":"But Argos was so wholly deprived of men that their slaves took possession of all affairs, ruling and governing until the sons of the slain men grew up. Then they recovered Argos for themselves and cast out the slaves; when they were driven out, the slaves took possession of Tiryns by force. [2] For a while they were at peace with each other; but then there came to the slaves a prophet, Cleander, a man of Phigalea in Arcadia by birth; he persuaded the slaves to attack their masters. From that time there was a long-lasting war between them, until with difficulty the Argives got the upper hand.31","places":[{"placeId":"570106","name":"Argos","startOffset":4,"endOffset":9},{"placeId":"570106","name":"Argos","startOffset":172,"endOffset":177},{"placeId":"570740","name":"Tiryns","startOffset":275,"endOffset":281},{"placeId":"570598","name":"Phigalea","startOffset":408,"endOffset":416},{"placeId":"570102","name":"Arcadia","startOffset":420,"endOffset":427},{"placeId":"570106","name":"Argives","startOffset":571,"endOffset":578}]},{"id":84,"text":"The Argives say this was the reason Cleomenes went mad and met an evil end; the Spartans themselves say that Cleomenes' madness arose from no divine agent, but that by consorting with Scythians he became a drinker of strong wine, and the madness came from this. [2] The nomadic Scythians, after Darius had invaded their land, were eager for revenge, so they sent to Sparta and made an alliance. They agreed that the Scythians would attempt to invade Media by way of the river Phasis, and they urged the Spartans to set out and march inland from Ephesus and meet the Scythians. [3] They say that when the Scythians had come for this purpose, Cleomenes kept rather close company with them, and by consorting with them more than was fitting he learned from them to drink strong wine. The Spartans consider him to have gone mad from this. Ever since, as they themselves say, whenever they desire a strong drink they call for a Scythian cup. Such is the Spartan story of Cleomenes; but to my thinking it was for what he did to Demaratus that he was punished thus.","places":[{"placeId":"570106","name":"Argives","startOffset":4,"endOffset":11},{"placeId":"570685","name":"Spartans","startOffset":80,"endOffset":88},{"placeId":"1273","name":"Scythians","startOffset":184,"endOffset":193},{"placeId":"1273","name":"Scythians","startOffset":278,"endOffset":287},{"placeId":"570685","name":"Sparta","startOffset":366,"endOffset":372},{"placeId":"1273","name":"Scythians","startOffset":416,"endOffset":425},{"placeId":"903080","name":"Media","startOffset":450,"endOffset":455},{"placeId":"857276","name":"Phasis","startOffset":476,"endOffset":482},{"placeId":"570685","name":"Spartans","startOffset":503,"endOffset":511},{"placeId":"599612","name":"Ephesus","startOffset":545,"endOffset":552},{"placeId":"1273","name":"Scythians","startOffset":566,"endOffset":575},{"placeId":"1273","name":"Scythians","startOffset":604,"endOffset":613},{"placeId":"570685","name":"Spartans","startOffset":785,"endOffset":793},{"placeId":"1273","name":"Scythian","startOffset":924,"endOffset":932},{"placeId":"570685","name":"Spartan","startOffset":951,"endOffset":958}]},{"id":85,"text":"When the Aeginetans heard that Cleomenes was dead, they sent messengers to Sparta to cry out against Leutychides concerning the hostages that were held at Athens. The Lacedaemonians then assembled a court and gave judgment that Leutychides had done violence to the Aeginetans; and they condemned him to be given up and carried to Aegina in requital for the men that were held at Athens. [2] But when the Aeginetans were about to carry Leutychides away, a man of repute at Sparta, Theasides son of Leoprepes, said to them, Men of Aegina, what are you planning to do? To have the king of the Spartans given up to you by the citizens and carry him away? If the Spartans have now so judged in their anger, see that they do not bring utter destruction upon your country if you do this. [3] The Aeginetans heard this and refrained from carrying the king away, and made an agreement that Leutychides should go with them to Athens and restore the men to the Aeginetans.","places":[{"placeId":"579844","name":"Aeginetans","startOffset":9,"endOffset":19},{"placeId":"570685","name":"Sparta","startOffset":75,"endOffset":81},{"placeId":"579885","name":"Athens","startOffset":155,"endOffset":161},{"placeId":"570406","name":"Lacedaemonians","startOffset":167,"endOffset":181},{"placeId":"579844","name":"Aeginetans","startOffset":265,"endOffset":275},{"placeId":"579844","name":"Aegina","startOffset":330,"endOffset":336},{"placeId":"579885","name":"Athens","startOffset":379,"endOffset":385},{"placeId":"579844","name":"Aeginetans","startOffset":404,"endOffset":414},{"placeId":"570685","name":"Sparta","startOffset":472,"endOffset":478},{"placeId":"579844","name":"Aegina","startOffset":530,"endOffset":536},{"placeId":"570685","name":"Spartans","startOffset":591,"endOffset":599},{"placeId":"570685","name":"Spartans","startOffset":659,"endOffset":667},{"placeId":"579844","name":"Aeginetans","startOffset":791,"endOffset":801},{"placeId":"579885","name":"Athens","startOffset":918,"endOffset":924},{"placeId":"579844","name":"Aeginetans","startOffset":952,"endOffset":962}]},{"id":86,"text":"When Leutychides came to Athens and demanded back the hostages, the Athenians were unwilling to give them back and made excuses, saying that two kings had given them the trust and they deemed it wrong to restore it to one without the other. 86A. When the Athenians refused to give them back, Leutychides said to them: Men of Athens, do whichever thing you desire. If you give them back, you do righteously; if you do not give them back, you do the opposite. But I want to tell you the story of what happened at Sparta in the matter of a trust. [2] We Spartans say that three generations ago there was at Lacedaemon one Glaucus, the son of Epicydes. We say that this man added to his other excellences a reputation for justice above all men who at that time dwelt in Lacedaemon. [3] But we say that at the fitting time this befell him: There came to Sparta a certain man of Miletus, who desired to have a talk with Glaucus and made him this offer: I am a Milesian, and I have come to have the benefit of your justice, Glaucus. [4] Since there is much talk about your justice throughout all the rest of Hellas, and even in Ionia, I considered the fact that Ionia is always in danger while the Peloponnese is securely established, and nowhere in Ionia are the same men seen continuing in possession of wealth. [5] Considering and taking counsel concerning these matters, I resolved to turn half of my property into silver and deposit it with you, being well assured that it will lie safe for me in your keeping. Accept the money for me, and take and keep these tokens; restore the money to whoever comes with the same tokens and demands it back. 86B. Thus spoke the stranger who had come from Miletus, and Glaucus received the trust according to the agreement. After a long time had passed, the sons of the man who had deposited the money came to Sparta; they spoke with Glaucus, showing him the tokens and demanding the money back. [2] But Glaucus put them off and answered in turn: I do not remember the matter, and nothing of what you say carries my mind back. Let me think; I wish to do all that is just. If I took the money, I will duly restore it; if I never took it at all, I will deal with you according to the customs of the Greeks. I will put off making my decision for you until the fourth month from this day. 86C. So the Milesians went away in sorrow, as men robbed of their possessions; but Glaucus journeyed to Delphi to question the oracle. When he asked the oracle whether he should seize the money under oath, the Pythian priestess threatened him in these verses: [2] Glaucus son of Epicydes, it is more profitable now To prevail by your oath and seize the money. Swear, for death awaits even the man who swears true. But Oath has a son, nameless; he is without hands Or feet, but he pursues swiftly, until he catches And destroys all the family and the entire house. The line of a man who swears true is better later on.  When Glaucus heard this, he entreated the god to pardon him for what he had said. The priestess answered that to tempt the god and to do the deed had the same effect. 86D. So Glaucus summoned the Milesian strangers and gave them back their money. But hear now, Athenians, why I began to tell you this story: there is today no descendant of Glaucus, nor any household that bears Glaucus' name; he has been utterly rooted out of Sparta. So good is it not even to think anything concerning a trust except giving it back on demand!","places":[{"placeId":"579885","name":"Athens","startOffset":25,"endOffset":31},{"placeId":"579885","name":"Athenians","startOffset":68,"endOffset":77},{"placeId":"579885","name":"Athenians","startOffset":255,"endOffset":264},{"placeId":"579885","name":"Athens","startOffset":326,"endOffset":332},{"placeId":"570685","name":"Sparta","startOffset":512,"endOffset":518},{"placeId":"570685","name":"Spartans","startOffset":552,"endOffset":560},{"placeId":"570406","name":"Lacedaemon","startOffset":605,"endOffset":615},{"placeId":"570406","name":"Lacedaemon","startOffset":767,"endOffset":777},{"placeId":"570685","name":"Sparta","startOffset":850,"endOffset":856},{"placeId":"599799","name":"Miletus","startOffset":874,"endOffset":881},{"placeId":"599799","name":"Milesian","startOffset":956,"endOffset":964},{"placeId":"geonames-390903","name":"Hellas","startOffset":1103,"endOffset":1109},{"placeId":"550597","name":"Ionia","startOffset":1123,"endOffset":1128},{"placeId":"550597","name":"Ionia","startOffset":1157,"endOffset":1162},{"placeId":"570577","name":"Peloponnese","startOffset":1193,"endOffset":1204},{"placeId":"550597","name":"Ionia","startOffset":1245,"endOffset":1250},{"placeId":"550742","name":"Miletus","startOffset":1693,"endOffset":1700},{"placeId":"570685","name":"Sparta","startOffset":1847,"endOffset":1853},{"placeId":"geonames-390903","name":"Greeks","startOffset":2235,"endOffset":2241},{"placeId":"599799","name":"Milesians","startOffset":2336,"endOffset":2345},{"placeId":"540726","name":"Delphi","startOffset":2428,"endOffset":2434},{"placeId":"599799","name":"Milesian","startOffset":3141,"endOffset":3149},{"placeId":"579885","name":"Athenians","startOffset":3206,"endOffset":3215},{"placeId":"570685","name":"Sparta","startOffset":3372,"endOffset":3378}]},{"id":87,"text":"Thus spoke Leutychides; but even so the Athenians would not listen to him, and he departed. The Aeginetans, before paying the penalty for the violence they had done to the Athenians to please the Thebans, acted as follows: blaming the Athenians and deeming themselves wronged, they prepared to take vengeance on the Athenians, who were now celebrating a quinquennial festival at Sunium. The Aeginetans set an ambush and captured the sacred ship, with many leading Athenians on board, and put in prison the men they seized.","places":[{"placeId":"579885","name":"Athenians","startOffset":40,"endOffset":49},{"placeId":"579844","name":"Aeginetans","startOffset":96,"endOffset":106},{"placeId":"579885","name":"Athenians","startOffset":172,"endOffset":181},{"placeId":"541138","name":"Thebans","startOffset":196,"endOffset":203},{"placeId":"579885","name":"Athenians","startOffset":235,"endOffset":244},{"placeId":"579885","name":"Athenians","startOffset":316,"endOffset":325},{"placeId":"599943","name":"Sunium","startOffset":379,"endOffset":385},{"placeId":"579844","name":"Aeginetans","startOffset":391,"endOffset":401},{"placeId":"579885","name":"Athenians","startOffset":464,"endOffset":473}]},{"id":88,"text":"Suffering this from the Aeginetans, the Athenians no longer put off devising all mischief against Aegina. There was a notable man in Aegina, Nicodromus son of Cnoethus by name, who held a grudge against the Aeginetans for his former banishment from the island. When he learned that the Athenians were now set upon harming the Aeginetans, he agreed to betray Aegina to the Athenians, naming the day when he would make the attempt and when they must come to aid him.","places":[{"placeId":"579844","name":"Aeginetans","startOffset":24,"endOffset":34},{"placeId":"579885","name":"Athenians","startOffset":40,"endOffset":49},{"placeId":"579844","name":"Aegina","startOffset":98,"endOffset":104},{"placeId":"579844","name":"Aegina","startOffset":133,"endOffset":139},{"placeId":"579844","name":"Aeginetans","startOffset":207,"endOffset":217},{"placeId":"579885","name":"Athenians","startOffset":286,"endOffset":295},{"placeId":"579844","name":"Aeginetans","startOffset":326,"endOffset":336},{"placeId":"579844","name":"Aegina","startOffset":358,"endOffset":364},{"placeId":"579885","name":"Athenians","startOffset":372,"endOffset":381}]},{"id":89,"text":"Later Nicodromus, according to his agreement with the Athenians, took possession of the Old City, as it was called; but the Athenians were not there at the right time, for they did not have ships worthy to fight the Aeginetans. While they were asking the Corinthians to lend them ships, the affair was ruined. The Corinthians at that time were their close friends, so they consented to the Athenians' plea and gave them twenty ships, at a price of five drachmas apiece; by their law they could not make a free gift of them. Taking these ships and their own, the Athenians manned seventy in all and sailed for Aegina, but they came a day later than the time agreed.","places":[{"placeId":"579885","name":"Athenians","startOffset":54,"endOffset":63},{"placeId":"579853","name":"Old City","startOffset":88,"endOffset":96},{"placeId":"579885","name":"Athenians","startOffset":124,"endOffset":133},{"placeId":"579844","name":"Aeginetans","startOffset":216,"endOffset":226},{"placeId":"570182","name":"Corinthians","startOffset":255,"endOffset":266},{"placeId":"570182","name":"Corinthians","startOffset":314,"endOffset":325},{"placeId":"579885","name":"Athenians","startOffset":390,"endOffset":399},{"placeId":"579885","name":"Athenians","startOffset":562,"endOffset":571},{"placeId":"579844","name":"Aegina","startOffset":609,"endOffset":615}]},{"id":90,"text":"When the Athenians did not show up at the right time, Nicodromus took ship and escaped from Aegina. Other Aeginetans followed him, and the Athenians gave them Sunium to dwell in; setting out from there they harried the Aeginetans of the island.","places":[{"placeId":"579885","name":"Athenians","startOffset":9,"endOffset":18},{"placeId":"579844","name":"Aegina","startOffset":92,"endOffset":98},{"placeId":"579844","name":"Aeginetans","startOffset":106,"endOffset":116},{"placeId":"579885","name":"Athenians","startOffset":139,"endOffset":148},{"placeId":"599943","name":"Sunium","startOffset":159,"endOffset":165},{"placeId":"579844","name":"Aeginetans","startOffset":219,"endOffset":229}]},{"id":91,"text":"But this happened later.32 The rich men of Aegina gained mastery over the people, who had risen against them with Nicodromus, then made them captive and led them out to be killed. Because of this a curse fell upon them, which despite all their efforts they could not get rid of by sacrifice, and they were driven out of their island before the goddess would be merciful to them. [2] They had taken seven hundred of the people alive; as they led these out for slaughter one of them escaped from his bonds and fled to the temple gate of Demeter the Lawgiver, where he laid hold of the door-handles and clung to them. They could not tear him away by force, so they cut off his hands and carried him off, and those hands were left clinging fast to the door-handles.","places":[{"placeId":"579844","name":"Aegina","startOffset":43,"endOffset":49}]},{"id":92,"text":"Thus the Aeginetans dealt with each other. When the Athenians came, they fought them at sea with seventy ships; the Aeginetans were defeated in the sea-fight and asked for help from the Argives, as they had done before. But this time the Argives would not aid them, holding a grudge because ships of Aegina had been taken by force by Cleomenes and put in on the Argolid coast, where their crews landed with the Lacedaemonians; men from ships of Sicyon also took part in the same invasion. [2] The Argives laid on them the payment of a fine of a thousand talents, five hundred each. The Sicyonians confessed that they had done wrong and agreed to go free with a payment of a hundred talents, but the Aeginetans made no such confession and remained stubborn. For this cause the Argive state sent no one to aid them at their request, but about a thousand came voluntarily, led by a captain whose name was Eurybates, a man who practiced the pentathlon.33 [3] Most of these never returned, meeting their death at the hands of the Athenians in Aegina; Eurybates himself, their captain, fought in single combat and thus killed three men, but was slain by the fourth, Sophanes the son of Deceles.","places":[{"placeId":"579844","name":"Aeginetans","startOffset":9,"endOffset":19},{"placeId":"579885","name":"Athenians","startOffset":52,"endOffset":61},{"placeId":"579844","name":"Aeginetans","startOffset":116,"endOffset":126},{"placeId":"570106","name":"Argives","startOffset":186,"endOffset":193},{"placeId":"570106","name":"Argives","startOffset":238,"endOffset":245},{"placeId":"579844","name":"Aegina","startOffset":300,"endOffset":306},{"placeId":"570104","name":"Argolid coast","startOffset":362,"endOffset":375},{"placeId":"570406","name":"Lacedaemonians","startOffset":411,"endOffset":425},{"placeId":"570668","name":"Sicyon","startOffset":445,"endOffset":451},{"placeId":"570106","name":"Argives","startOffset":497,"endOffset":504},{"placeId":"570668","name":"Sicyonians","startOffset":586,"endOffset":596},{"placeId":"579844","name":"Aeginetans","startOffset":699,"endOffset":709},{"placeId":"570106","name":"Argive","startOffset":776,"endOffset":782},{"placeId":"579885","name":"Athenians","startOffset":1025,"endOffset":1034},{"placeId":"579844","name":"Aegina","startOffset":1038,"endOffset":1044}]},{"id":93,"text":"The Aeginetan ships found the Athenians in disarray and attacked and overcame them, taking four Athenian ships and their crews.","places":[{"placeId":"579844","name":"Aeginetan","startOffset":4,"endOffset":13},{"placeId":"579885","name":"Athenians","startOffset":30,"endOffset":39},{"placeId":"579885","name":"Athenian","startOffset":96,"endOffset":104}]},{"id":94,"text":"Thus Athens and Aegina grappled together in war. The Persian was going about his own business, for his servant was constantly reminding him to remember the Athenians,34 and the Pisistratidae were at his elbow maligning the Athenians; moreover, Darius desired to take this pretext for subduing all the men of Hellas who had not given him earth and water. [2] He dismissed from command Mardonius, who had fared so badly on his expedition, and appointed other generals to lead his armies against Athens and Eretria, Datis, a Mede by birth, and his own nephew Artaphrenes son of Artaphrenes; the order he gave them at their departure was to enslave Athens and Eretria and bring the slaves into his presence.","places":[{"placeId":"579885","name":"Athens","startOffset":5,"endOffset":11},{"placeId":"579844","name":"Aegina","startOffset":16,"endOffset":22},{"placeId":"geonames-130758","name":"Persian","startOffset":53,"endOffset":60},{"placeId":"579885","name":"Athenians","startOffset":156,"endOffset":165},{"placeId":"579885","name":"Athenians","startOffset":223,"endOffset":232},{"placeId":"geonames-390903","name":"Hellas","startOffset":308,"endOffset":314},{"placeId":"579885","name":"Athens","startOffset":493,"endOffset":499},{"placeId":"579925","name":"Eretria","startOffset":504,"endOffset":511},{"placeId":"903080","name":"Mede","startOffset":522,"endOffset":526},{"placeId":"579885","name":"Athens","startOffset":645,"endOffset":651},{"placeId":"579925","name":"Eretria","startOffset":656,"endOffset":663}]},{"id":95,"text":"When these appointed generals on their way from the king reached the Aleian plain in Cilicia, bringing with them a great and well-furnished army, they camped there and were overtaken by all the fleet that was assigned to each; there also arrived the transports for horses, which in the previous year Darius had bidden his tributary subjects to make ready. [2] Having loaded the horses into these, and embarked the land army in the ships, they sailed to Ionia with six hundred triremes. From there they held their course not by the mainland and straight towards the Hellespont and Thrace, but setting forth from Samos they sailed by the Icarian sea and from island to island; this, to my thinking, was because they feared above all the voyage around Athos, seeing that in the previous year they had come to great disaster by holding their course that way; moreover, Naxos was still unconquered and constrained them.","places":[{"placeId":"648554","name":"Aleian plain","startOffset":69,"endOffset":81},{"placeId":"628957","name":"Cilicia","startOffset":85,"endOffset":92},{"placeId":"550597","name":"Ionia","startOffset":453,"endOffset":458},{"placeId":"501434","name":"Hellespont","startOffset":565,"endOffset":575},{"placeId":"1001889","name":"Thrace","startOffset":580,"endOffset":586},{"placeId":"599926","name":"Samos","startOffset":611,"endOffset":616},{"placeId":"599668","name":"Icarian sea","startOffset":636,"endOffset":647},{"placeId":"501365","name":"Athos","startOffset":749,"endOffset":754},{"placeId":"599822","name":"Naxos","startOffset":865,"endOffset":870}]},{"id":96,"text":"When they approached Naxos from the Icarian sea and came to land (for it was Naxos which the Persians intended to attack first), the Naxians, remembering what had happened before,35 fled away to the mountains instead of waiting for them. The Persians enslaved all of them that they caught, and burnt their temples and their city. After doing this, they set sail for the other islands.","places":[{"placeId":"599822","name":"Naxos","startOffset":21,"endOffset":26},{"placeId":"599668","name":"Icarian sea","startOffset":36,"endOffset":47},{"placeId":"599822","name":"Naxos","startOffset":77,"endOffset":82},{"placeId":"geonames-130758","name":"Persians","startOffset":93,"endOffset":101},{"placeId":"599822","name":"Naxians","startOffset":133,"endOffset":140},{"placeId":"geonames-130758","name":"Persians","startOffset":242,"endOffset":250}]},{"id":97,"text":"While they did this, the Delians also left Delos and fled away to Tenos. As his expedition was sailing landwards, Datis went on ahead and bade his fleet anchor not off Delos, but across the water off Rhenaea. Learning where the Delians were, he sent a herald to them with this proclamation: [2] Holy men, why have you fled away, and so misjudged my intent? It is my own desire, and the king's command to me, to do no harm to the land where the two gods36 were born, neither to the land itself nor to its inhabitants. So return now to your homes and dwell on your island. He made this proclamation to the Delians, and then piled up three hundred talents of frankincense on the altar and burnt it.","places":[{"placeId":"599588","name":"Delians","startOffset":25,"endOffset":32},{"placeId":"599588","name":"Delos","startOffset":43,"endOffset":48},{"placeId":"590074","name":"Tenos","startOffset":66,"endOffset":71},{"placeId":"599588","name":"Delos","startOffset":168,"endOffset":173},{"placeId":"599919","name":"Rhenaea","startOffset":200,"endOffset":207},{"placeId":"599588","name":"Delians","startOffset":228,"endOffset":235},{"placeId":"599588","name":"Delians","startOffset":606,"endOffset":613}]},{"id":98,"text":"After doing this, Datis sailed with his army against Eretria first, taking with him Ionians and Aeolians; and after he had put out from there, Delos was shaken by an earthquake, the first and last, as the Delians say, before my time. This portent was sent by heaven, as I suppose, to be an omen of the ills that were coming on the world. [2] For in three generations, that is, in the time of Darius son of Hystaspes and Xerxes son of Darius and Artaxerxes son of Xerxes,37 more ills happened to Hellas than in twenty generations before Darius; some coming from the Persians, some from the wars for preeminence among the chief of the nations themselves. [3] Thus it was no marvel that there should be an earthquake in Delos when there had been none before. Also there was an oracle concerning Delos, where it was written: I will shake Delos, though unshaken before.  In the Greek language these names have the following meanings: Darius is the Doer, Xerxes the Warrior, Artaxerxes the Great Warrior. The Greeks would rightly call the kings thus in their language.","places":[{"placeId":"579925","name":"Eretria","startOffset":53,"endOffset":60},{"placeId":"550597","name":"Ionian","startOffset":84,"endOffset":90},{"placeId":"550406","name":"Aeolians","startOffset":96,"endOffset":104},{"placeId":"599588","name":"Delos","startOffset":143,"endOffset":148},{"placeId":"599588","name":"Delians","startOffset":205,"endOffset":212},{"placeId":"geonames-390903","name":"Hellas","startOffset":495,"endOffset":501},{"placeId":"geonames-130758","name":"Persians","startOffset":565,"endOffset":573},{"placeId":"599588","name":"Delos","startOffset":717,"endOffset":722},{"placeId":"599588","name":"Delos","startOffset":792,"endOffset":797},{"placeId":"599588","name":"Delos","startOffset":835,"endOffset":840},{"placeId":"geonames-390903","name":"Greek","startOffset":875,"endOffset":880},{"placeId":"geonames-390903","name":"Greeks","startOffset":1005,"endOffset":1011}]},{"id":99,"text":"Launching out to sea from Delos, the foreigners put in at the islands and gathered an army from there, taking the sons of the islanders for hostages. [2] When in their voyage about the islands they put in at Carystos, the Carystians gave them no hostages and refused to join them against neighboring cities, meaning Eretria and Athens; the Persians besieged them and laid waste their land, until the Carystians too came over to their side.","places":[{"placeId":"599588","name":"Delos","startOffset":26,"endOffset":31},{"placeId":"570336","name":"Carystos","startOffset":208,"endOffset":216},{"placeId":"570336","name":"Carystians","startOffset":222,"endOffset":232},{"placeId":"579925","name":"Eretria","startOffset":316,"endOffset":323},{"placeId":"579885","name":"Athens","startOffset":328,"endOffset":334},{"placeId":"geonames-130758","name":"Persians","startOffset":340,"endOffset":348},{"placeId":"570336","name":"Carystians","startOffset":400,"endOffset":410}]},{"id":100,"text":"When the Eretrians learned that the Persian expedition was sailing to attack them, they asked for help from the Athenians. The Athenians did not refuse the aid, but gave them for defenders the four thousand tenant farmers who held the land of the Chalcidian horse-breeders.38 But it seems that all the plans of the Eretrians were unsound; they sent to the Athenians for aid, but their counsels were divided. [2] Some of them planned to leave the city and make for the heights of Euboea; others plotted treason in hope of winning advantages from the Persians. [3] When Aeschines son of Nothon, a leading man in Eretria, learned of both designs, he told the Athenians who had come how matters stood, and asked them to depart to their own country so they would not perish like the rest. The Athenians followed Aeschines' advice.","places":[{"placeId":"579925","name":"Eretrians","startOffset":9,"endOffset":18},{"placeId":"geonames-130758","name":"Persian","startOffset":36,"endOffset":43},{"placeId":"579885","name":"Athenians","startOffset":112,"endOffset":121},{"placeId":"579885","name":"Athenians","startOffset":127,"endOffset":136},{"placeId":"540703","name":"Chalcidian","startOffset":247,"endOffset":257},{"placeId":"579925","name":"Eretrians","startOffset":315,"endOffset":324},{"placeId":"579885","name":"Athenians","startOffset":356,"endOffset":365},{"placeId":"540775","name":"Euboea","startOffset":479,"endOffset":485},{"placeId":"geonames-130758","name":"Persians","startOffset":549,"endOffset":557},{"placeId":"579925","name":"Eretria","startOffset":610,"endOffset":617},{"placeId":"579885","name":"Athenians","startOffset":656,"endOffset":665},{"placeId":"579885","name":"Athenians","startOffset":788,"endOffset":797}]},{"id":101,"text":"So they saved themselves by crossing over to Oropus; the Persians sailed holding their course for Temenos and Choereae and Aegilea, all in Eretrian territory. Landing at these places, they immediately unloaded their horses and made preparation to attack their enemies. [2] The Eretrians had no intention of coming out and fighting; all their care was to guard their walls if they could, since it was the prevailing counsel not to leave the city. The walls were strongly attacked, and for six days many fell on both sides; but on the seventh two Eretrians of repute, Euphorbus son of Alcimachus and Philagrus son of Cineas, betrayed the city to the Persians. [3] They entered the city and plundered and burnt the temples, in revenge for the temples that were burnt at Sardis; moreover, they enslaved the townspeople, according to Darius' command.","places":[{"placeId":"580044","name":"Oropus","startOffset":45,"endOffset":51},{"placeId":"geonames-130758","name":"Persians","startOffset":57,"endOffset":65},{"placeId":"541121","name":"Temenos","startOffset":98,"endOffset":105},{"placeId":"543672","name":"Choereae","startOffset":110,"endOffset":118},{"placeId":"540605","name":"Aegilea","startOffset":123,"endOffset":130},{"placeId":"579925","name":"Eretrian","startOffset":139,"endOffset":147},{"placeId":"579925","name":"Eretrians","startOffset":277,"endOffset":286},{"placeId":"579925","name":"Eretrians","startOffset":545,"endOffset":554},{"placeId":"geonames-130758","name":"Persians","startOffset":648,"endOffset":656},{"placeId":"550867","name":"Sardis","startOffset":767,"endOffset":773}]},{"id":102,"text":"After subduing Eretria, the Persians waited a few days and then sailed away to the land of Attica, pressing ahead in expectation of doing to the Athenians exactly what they had done to the Eretrians. Marathon39 was the place in Attica most suitable for riding horses and closest to Eretria, so Hippias son of Pisistratus led them there.","places":[{"placeId":"579925","name":"Eretria","startOffset":15,"endOffset":22},{"placeId":"geonames-130758","name":"Persians","startOffset":28,"endOffset":36},{"placeId":"579888","name":"Attica","startOffset":91,"endOffset":97},{"placeId":"579885","name":"Athenians","startOffset":145,"endOffset":154},{"placeId":"579925","name":"Eretrians","startOffset":189,"endOffset":198},{"placeId":"580021","name":"Marathon","startOffset":200,"endOffset":208},{"placeId":"579888","name":"Attica","startOffset":228,"endOffset":234},{"placeId":"579925","name":"Eretria","startOffset":282,"endOffset":289}]},{"id":103,"text":"When the Athenians learned this, they too marched out to Marathon, with ten generals leading them. The tenth was Miltiades, and it had befallen his father Cimon son of Stesagoras to be banished from Athens by Pisistratus son of Hippocrates. [2] While in exile he happened to take the Olympic prize in the four-horse chariot, and by taking this victory he won the same prize as his half-brother Miltiades. At the next Olympic games he won with the same horses but permitted Pisistratus to be proclaimed victor, and by resigning the victory to him he came back from exile to his own property under truce. [3] After taking yet another Olympic prize with the same horses, he happened to be murdered by Pisistratus' sons, since Pisistratus was no longer living. They murdered him by placing men in ambush at night near the town-hall. Cimon was buried in front of the city, across the road called Through the Hollow, and buried opposite him are the mares who won the three Olympic prizes. [4] The mares of Evagoras the Laconian did the same as these, but none others. Stesagoras, the elder of Cimon's sons, was then being brought up with his uncle Miltiades in the Chersonese. The younger was with Cimon at Athens, and he took the name Miltiades from Miltiades the founder of the Chersonese.","places":[{"placeId":"579885","name":"Athenians","startOffset":9,"endOffset":18},{"placeId":"580021","name":"Marathon","startOffset":57,"endOffset":65},{"placeId":"579885","name":"Athens","startOffset":199,"endOffset":205},{"placeId":"570531","name":"Olympic","startOffset":284,"endOffset":291},{"placeId":"570531","name":"Olympic","startOffset":417,"endOffset":424},{"placeId":"570531","name":"Olympic","startOffset":632,"endOffset":639},{"placeId":"570531","name":"Olympic","startOffset":969,"endOffset":976},{"placeId":"570406","name":"Laconian","startOffset":1015,"endOffset":1023},{"placeId":"226564","name":"Chersonese","startOffset":1161,"endOffset":1171},{"placeId":"579885","name":"Athens","startOffset":1203,"endOffset":1209},{"placeId":"226564","name":"Chersonese","startOffset":1276,"endOffset":1286}]},{"id":104,"text":"It was this Miltiades who was now the Athenian general, after coming from the Chersonese and escaping a two-fold death. The Phoenicians pursued him as far as Imbros, considering it of great importance to catch him and bring him to the king. [2] He escaped from them, but when he reached his own country and thought he was safe, then his enemies met him. They brought him to court and prosecuted him for tyranny in the Chersonese, but he was acquitted and appointed Athenian general, chosen by the people.","places":[{"placeId":"579885","name":"Athenian","startOffset":38,"endOffset":46},{"placeId":"226564","name":"Chersonese","startOffset":78,"endOffset":88},{"placeId":"678334","name":"Phoenicians","startOffset":124,"endOffset":135},{"placeId":"501439","name":"Imbros","startOffset":158,"endOffset":164},{"placeId":"226564","name":"Chersonese","startOffset":418,"endOffset":428},{"placeId":"579885","name":"Athenian","startOffset":465,"endOffset":473}]},{"id":105,"text":"While still in the city, the generals first sent to Sparta the herald Philippides, an Athenian and a long-distance runner who made that his calling. As Philippides himself said when he brought the message to the Athenians, when he was in the Parthenian mountain above Tegea he encountered Pan. [2] Pan called out Philippides' name and bade him ask the Athenians why they paid him no attention, though he was of goodwill to the Athenians, had often been of service to them, and would be in the future. [3] The Athenians believed that these things were true, and when they became prosperous they established a sacred precinct of Pan beneath the Acropolis. Ever since that message they propitiate him with annual sacrifices and a torch-race.","places":[{"placeId":"570685","name":"Sparta","startOffset":52,"endOffset":58},{"placeId":"579885","name":"Athenian","startOffset":86,"endOffset":94},{"placeId":"579885","name":"Athenians","startOffset":212,"endOffset":221},{"placeId":"570566","name":"Parthenian","startOffset":242,"endOffset":252},{"placeId":"570707","name":"Tegea","startOffset":268,"endOffset":273},{"placeId":"579885","name":"Athenians","startOffset":352,"endOffset":361},{"placeId":"579885","name":"Athenians","startOffset":427,"endOffset":436},{"placeId":"579885","name":"Athenians","startOffset":509,"endOffset":518},{"placeId":"638356144","name":"Acropolis","startOffset":643,"endOffset":652}]},{"id":106,"text":"This Philippides was in Sparta on the day after leaving the city of Athens,40 that time when he was sent by the generals and said that Pan had appeared to him. He came to the magistrates and said, [2] Lacedaemonians, the Athenians ask you to come to their aid and not allow the most ancient city among the Hellenes to fall into slavery at the hands of the foreigners. Even now Eretria has been enslaved, and Hellas has become weaker by an important city. [3] He told them what he had been ordered to say, and they resolved to send help to the Athenians, but they could not do this immediately, for they were unwilling to break the law. It was the ninth day of the rising month, and they said that on the ninth they could not go out to war until the moon's circle was full.41","places":[{"placeId":"570685","name":"Sparta","startOffset":24,"endOffset":30},{"placeId":"579885","name":"Athens","startOffset":68,"endOffset":74},{"placeId":"570406","name":"Lacedaemonians","startOffset":202,"endOffset":216},{"placeId":"579885","name":"Athenians","startOffset":222,"endOffset":231},{"placeId":"geonames-390903","name":"Hellenes","startOffset":307,"endOffset":315},{"placeId":"579925","name":"Eretria","startOffset":378,"endOffset":385},{"placeId":"geonames-390903","name":"Hellas","startOffset":409,"endOffset":415},{"placeId":"579885","name":"Athenians","startOffset":545,"endOffset":554}]},{"id":107,"text":"So they waited for the full moon, while the foreigners were guided to Marathon by Hippias son of Pisistratus. The previous night Hippias had a dream in which he slept with his mother. [2] He supposed from the dream that he would return from exile to Athens, recover his rule, and end his days an old man in his own country. Thus he reckoned from the dream. Then as guide he unloaded the slaves from Eretria onto the island of the Styrians called Aegilia, and brought to anchor the ships that had put ashore at Marathon, then marshalled the foreigners who had disembarked onto land. [3] As he was tending to this, he happened to sneeze and cough more violently than usual. Since he was an elderly man, most of his teeth were loose, and he lost one of them by the force of his cough. It fell into the sand and he expended much effort in looking for it, but the tooth could not be found. [4] He groaned aloud and said to those standing by him: This land is not ours and we will not be able to subdue it. My tooth holds whatever share of it was mine.","places":[{"placeId":"580021","name":"Marathon","startOffset":70,"endOffset":78},{"placeId":"579885","name":"Athens","startOffset":250,"endOffset":256},{"placeId":"geonames-8133902","name":"Eretria","startOffset":399,"endOffset":406},{"placeId":"541117","name":"Styrians","startOffset":430,"endOffset":438},{"placeId":"540605","name":"Aegilia","startOffset":446,"endOffset":453},{"placeId":"580021","name":"Marathon","startOffset":510,"endOffset":518}]},{"id":108,"text":"Hippias supposed that the dream had in this way come true. As the Athenians were marshalled in the precinct of Heracles, the Plataeans came to help them in full force. The Plataeans had put themselves under the protection of the Athenians,42 and the Athenians had undergone many labors on their behalf. This is how they did it: [2] when the Plataeans were pressed by the Thebans, they first tried to put themselves under the protection of Cleomenes son of Anaxandrides and the Lacedaemonians, who happened to be there. But they did not accept them, saying, We live too far away, and our help would be cold comfort to you. You could be enslaved many times over before any of us heard about it. [3] We advise you to put yourselves under the protection of the Athenians, since they are your neighbors and not bad men at giving help. The Lacedaemonians gave this advice not so much out of goodwill toward the Plataeans as wishing to cause trouble for the Athenians with the Boeotians. [4] So the Lacedaemonians gave this advice to the Plataeans, who did not disobey it. When the Athenians were making sacrifices to the twelve gods,43 they sat at the altar as suppliants and put themselves under protection. When the Thebans heard this, they marched against the Plataeans, but the Athenians came to their aid. [5] As they were about to join battle, the Corinthians, who happened to be there, prevented them and brought about a reconciliation. Since both sides desired them to arbitrate, they fixed the boundaries of the country on condition that the Thebans leave alone those Boeotians who were unwilling to be enrolled as Boeotian. After rendering this decision, the Corinthians departed. The Boeotians attacked the Athenians as they were leaving but were defeated in battle. [6] The Athenians went beyond the boundaries the Corinthians had made for the Plataeans, fixing the Asopus river as the boundary for the Thebans in the direction of Plataea and Hysiae. So the Plataeans had put themselves under the protection of the Athenians in the aforesaid manner, and now came to help at Marathon.","places":[{"placeId":"579885","name":"Athenians","startOffset":66,"endOffset":75},{"placeId":"541063","name":"Plataeans","startOffset":125,"endOffset":134},{"placeId":"541063","name":"Plataeans","startOffset":172,"endOffset":181},{"placeId":"579885","name":"Athenians","startOffset":229,"endOffset":238},{"placeId":"579885","name":"Athenians","startOffset":250,"endOffset":259},{"placeId":"541063","name":"Plataeans","startOffset":341,"endOffset":350},{"placeId":"541138","name":"Thebans","startOffset":371,"endOffset":378},{"placeId":"570406","name":"Lacedaemonians","startOffset":477,"endOffset":491},{"placeId":"579885","name":"Athenians","startOffset":758,"endOffset":767},{"placeId":"570406","name":"Lacedaemonians","startOffset":836,"endOffset":850},{"placeId":"541063","name":"Plataeans","startOffset":907,"endOffset":916},{"placeId":"579885","name":"Athenians","startOffset":953,"endOffset":962},{"placeId":"540689","name":"Boeotians","startOffset":972,"endOffset":981},{"placeId":"570406","name":"Lacedaemonians","startOffset":994,"endOffset":1008},{"placeId":"541063","name":"Plataeans","startOffset":1033,"endOffset":1042},{"placeId":"579885","name":"Athenians","startOffset":1077,"endOffset":1086},{"placeId":"541138","name":"Thebans","startOffset":1214,"endOffset":1221},{"placeId":"541063","name":"Plataeans","startOffset":1259,"endOffset":1268},{"placeId":"579885","name":"Athenians","startOffset":1278,"endOffset":1287},{"placeId":"570182","name":"Corinthians","startOffset":1350,"endOffset":1361},{"placeId":"541138","name":"Thebans","startOffset":1547,"endOffset":1554},{"placeId":"540689","name":"Boeotians","startOffset":1573,"endOffset":1582},{"placeId":"540689","name":"Boeotian","startOffset":1620,"endOffset":1628},{"placeId":"570182","name":"Corinthians","startOffset":1665,"endOffset":1676},{"placeId":"540689","name":"Boeotians","startOffset":1691,"endOffset":1700},{"placeId":"579885","name":"Athenians","startOffset":1714,"endOffset":1723},{"placeId":"579885","name":"Athenians","startOffset":1782,"endOffset":1791},{"placeId":"570182","name":"Corinthians","startOffset":1823,"endOffset":1834},{"placeId":"541063","name":"Plataeans","startOffset":1852,"endOffset":1861},{"placeId":"540672","name":"Asopus river","startOffset":1874,"endOffset":1886},{"placeId":"541138","name":"Thebans","startOffset":1911,"endOffset":1918},{"placeId":"541063","name":"Plataea","startOffset":1939,"endOffset":1946},{"placeId":"540831","name":"Hysiae","startOffset":1951,"endOffset":1957},{"placeId":"541063","name":"Plataeans","startOffset":1966,"endOffset":1975},{"placeId":"579885","name":"Athenians","startOffset":2023,"endOffset":2032},{"placeId":"580021","name":"Marathon","startOffset":2082,"endOffset":2090}]},{"id":109,"text":"The Athenian generals were of divided opinion, some advocating not fighting because they were too few to attack the army of the Medes; others, including Miltiades, advocating fighting. [2] Thus they were at odds, and the inferior plan prevailed. An eleventh man had a vote, chosen by lot to be polemarch44 of Athens, and by ancient custom the Athenians had made his vote of equal weight with the generals. Callimachus of Aphidnae was polemarch at this time. Miltiades approached him and said, [3] Callimachus, it is now in your hands to enslave Athens or make her free, and thereby leave behind for all posterity a memorial such as not even Harmodius and Aristogeiton left. Now the Athenians have come to their greatest danger since they first came into being, and, if we surrender, it is clear what we will suffer when handed over to Hippias. But if the city prevails, it will take first place among Hellenic cities. [4] I will tell you how this can happen, and how the deciding voice on these matters has devolved upon you. The ten generals are of divided opinion, some urging to attack, others urging not to. [5] If we do not attack now, I expect that great strife will fall upon and shake the spirit of the Athenians, leading them to medize. But if we attack now, before anything unsound corrupts the Athenians, we can win the battle, if the gods are fair. [6] All this concerns and depends on you in this way: if you vote with me, your country will be free and your city the first in Hellas. But if you side with those eager to avoid battle, you will have the opposite to all the good things I enumerated.","places":[{"placeId":"579885","name":"Athenian","startOffset":4,"endOffset":12},{"placeId":"903080","name":"Medes","startOffset":128,"endOffset":133},{"placeId":"579885","name":"Athens","startOffset":309,"endOffset":315},{"placeId":"579885","name":"Athenians","startOffset":343,"endOffset":352},{"placeId":"579873","name":"Aphidnae","startOffset":421,"endOffset":429},{"placeId":"579885","name":"Athens","startOffset":546,"endOffset":552},{"placeId":"579885","name":"Athenians","startOffset":683,"endOffset":692},{"placeId":"geonames-390903","name":"Hellenic","startOffset":902,"endOffset":910},{"placeId":"579885","name":"Athenians","startOffset":1212,"endOffset":1221},{"placeId":"579885","name":"Athenians","startOffset":1306,"endOffset":1315},{"placeId":"geonames-390903","name":"Hellas","startOffset":1490,"endOffset":1496}]},{"id":110,"text":"By saying this Miltiades won over Callimachus. The polemarch's vote was counted in, and the decision to attack was resolved upon. Thereafter the generals who had voted to fight turned the presidency over to Miltiades as each one's day came in turn.45 He accepted the office but did not make an attack until it was his own day to preside.","places":[]},{"id":111,"text":"When the presidency came round to him, he arrayed the Athenians for battle, with the polemarch Callimachus commanding the right wing, since it was then the Athenian custom for the polemarch to hold the right wing. He led, and the other tribes were numbered out in succession next to each other.46 The Plataeans were marshalled last, holding the left wing. [2] Ever since that battle, when the Athenians are conducting sacrifices at the festivals every fourth year,47 the Athenian herald prays for good things for the Athenians and Plataeans together. [3] As the Athenians were marshalled at Marathon, it happened that their line of battle was as long as the line of the Medes. The center, where the line was weakest, was only a few ranks deep, but each wing was strong in numbers.","places":[{"placeId":"579885","name":"Athenians","startOffset":54,"endOffset":63},{"placeId":"579885","name":"Athenian","startOffset":156,"endOffset":164},{"placeId":"541063","name":"Plataeans","startOffset":301,"endOffset":310},{"placeId":"579885","name":"Athenians","startOffset":393,"endOffset":402},{"placeId":"579885","name":"Athenian","startOffset":471,"endOffset":479},{"placeId":"579885","name":"Athenians","startOffset":517,"endOffset":526},{"placeId":"541063","name":"Plataeans","startOffset":531,"endOffset":540},{"placeId":"579885","name":"Athenians","startOffset":562,"endOffset":571},{"placeId":"580021","name":"Marathon","startOffset":591,"endOffset":599},{"placeId":"903080","name":"Medes","startOffset":670,"endOffset":675}]},{"id":112,"text":"When they had been set in order and the sacrifices were favorable, the Athenians were sent forth and charged the foreigners at a run. The space between the armies was no less than eight stadia. [2] The Persians saw them running to attack and prepared to receive them, thinking the Athenians absolutely crazy, since they saw how few of them there were and that they ran up so fast without either cavalry or archers. [3] So the foreigners imagined, but when the Athenians all together fell upon the foreigners they fought in a way worthy of record. These are the first Hellenes whom we know of to use running against the enemy. They are also the first to endure looking at Median dress and men wearing it, for up until then just hearing the name of the Medes caused the Hellenes to panic.","places":[{"placeId":"579885","name":"Athenians","startOffset":71,"endOffset":80},{"placeId":"geonames-130758","name":"Persians","startOffset":202,"endOffset":210},{"placeId":"579885","name":"Athenians","startOffset":281,"endOffset":290},{"placeId":"579885","name":"Athenians","startOffset":460,"endOffset":469},{"placeId":"geonames-390903","name":"Hellenes","startOffset":567,"endOffset":575},{"placeId":"903080","name":"Median","startOffset":671,"endOffset":677},{"placeId":"903080","name":"Medes","startOffset":751,"endOffset":756},{"placeId":"geonames-390903","name":"Hellenes","startOffset":768,"endOffset":776}]},{"id":113,"text":"They fought a long time at Marathon. In the center of the line the foreigners prevailed, where the Persians and Sacae were arrayed. The foreigners prevailed there and broke through in pursuit inland, but on each wing the Athenians and Plataeans prevailed. [2] In victory they let the routed foreigners flee, and brought the wings together to fight those who had broken through the center. The Athenians prevailed, then followed the fleeing Persians and struck them down. When they reached the sea they demanded fire and laid hold of the Persian ships.","places":[{"placeId":"580021","name":"Marathon","startOffset":27,"endOffset":35},{"placeId":"geonames-130758","name":"Persians","startOffset":99,"endOffset":107},{"placeId":"579885","name":"Athenians","startOffset":221,"endOffset":230},{"placeId":"541063","name":"Plataeans","startOffset":235,"endOffset":244},{"placeId":"579885","name":"Athenians","startOffset":393,"endOffset":402},{"placeId":"geonames-130758","name":"Persians","startOffset":440,"endOffset":448},{"placeId":"geonames-130758","name":"Persian","startOffset":537,"endOffset":544}]},{"id":114,"text":"In this labor Callimachus the polemarch was slain, a brave man, and of the generals Stesilaus son of Thrasylaus died. Cynegirus48 son of Euphorion fell there, his hand cut off with an ax as he grabbed a ship's figurehead. Many other famous Athenians also fell there.","places":[{"placeId":"579885","name":"Athenians","startOffset":240,"endOffset":249}]},{"id":115,"text":"In this way the Athenians overpowered seven ships. The foreigners pushed off with the rest, picked up the Eretrian slaves from the island where they had left them, and sailed around Sunium hoping to reach the city before the Athenians. There was an accusation at Athens that they devised this by a plan of the Alcmaeonidae, who were said to have arranged to hold up a shield as a signal once the Persians were in their ships.","places":[{"placeId":"579885","name":"Athenians","startOffset":16,"endOffset":25},{"placeId":"579925","name":"Eretrian","startOffset":106,"endOffset":114},{"placeId":"599943","name":"Sunium","startOffset":182,"endOffset":188},{"placeId":"579885","name":"Athenians","startOffset":225,"endOffset":234},{"placeId":"geonames-130758","name":"Persians","startOffset":396,"endOffset":404}]},{"id":116,"text":"They sailed around Sunium, but the Athenians marched back to defend the city as fast as their feet could carry them and got there ahead of the foreigners. Coming from the sacred precinct of Heracles in Marathon, they pitched camp in the sacred precinct of Heracles in Cynosarges. The foreigners lay at anchor off Phalerum, the Athenian naval port at that time. After riding anchor there, they sailed their ships back to Asia.","places":[{"placeId":"241002","name":"Sunium","startOffset":19,"endOffset":25},{"placeId":"579885","name":"Athenians","startOffset":35,"endOffset":44},{"placeId":"580021","name":"Marathon","startOffset":202,"endOffset":210},{"placeId":"580072","name":"Phalerum","startOffset":313,"endOffset":321},{"placeId":"579885","name":"Athenian","startOffset":327,"endOffset":335},{"placeId":"570122","name":"Asia","startOffset":420,"endOffset":424}]},{"id":117,"text":"In the battle at Marathon about six thousand four hundred men of the foreigners were killed, and one hundred and ninety-two Athenians; that many fell on each side. [2] The following marvel happened there: an Athenian, Epizelus son of Couphagoras, was fighting as a brave man in the battle when he was deprived of his sight, though struck or hit nowhere on his body, and from that time on he spent the rest of his life in blindness. [3] I have heard that he tells this story about his misfortune: he saw opposing him a tall armed man, whose beard overshadowed his shield, but the phantom passed him by and killed the man next to him. I learned by inquiry that this is the story Epizelus tells.","places":[{"placeId":"668306","name":"Marathon","startOffset":17,"endOffset":25},{"placeId":"579885","name":"Athenians","startOffset":124,"endOffset":133},{"placeId":"579885","name":"Athenian","startOffset":208,"endOffset":216}]},{"id":118,"text":"Datis journeyed with his army to Asia, and when he arrived at Myconos he saw a vision in his sleep. What that vision was is not told, but as soon as day broke Datis made a search of his ships. He found in a Phoenician ship a gilded image of Apollo, and asked where this plunder had been taken. Learning from what temple it had come, he sailed in his own ship to Delos. [2] The Delians had now returned to their island, and Datis set the image in the temple, instructing the Delians to carry it away to Theban Delium, on the coast opposite Chalcis. [3] Datis gave this order and sailed away, but the Delians never carried that statue away; twenty years later the Thebans brought it to Delium by command of an oracle.","places":[{"placeId":"geonames-8133933","name":"Myconos","startOffset":62,"endOffset":69},{"placeId":"678334","name":"Phoenician","startOffset":207,"endOffset":217},{"placeId":"599588","name":"Delos","startOffset":362,"endOffset":367},{"placeId":"599588","name":"Delians","startOffset":377,"endOffset":384},{"placeId":"599588","name":"Delians","startOffset":474,"endOffset":481},{"placeId":"geonames-3219021","name":"Theban Delium","startOffset":502,"endOffset":515},{"placeId":"540703","name":"Chalcis","startOffset":539,"endOffset":546},{"placeId":"599588","name":"Delians","startOffset":599,"endOffset":606},{"placeId":"541138","name":"Thebans","startOffset":662,"endOffset":669},{"placeId":"geonames-3219021","name":"Delium","startOffset":684,"endOffset":690}]},{"id":119,"text":"When Datis and Artaphrenes reached Asia in their voyage, they carried the enslaved Eretrians inland to Susa. [2] Before the Eretrians were taken captive, king Darius had been terribly angry with them for doing him unprovoked wrong; but when he saw them brought before him and subject to him, he did them no harm, but settled them in a domain of his own called Ardericca in the Cissian land; this place is two hundred and ten stadia distant from Susa, and forty from the well that is of three kinds. [3] Asphalt and salt and oil are drawn from it in the following way: a windlass is used in the drawing, with half a skin tied to it in place of a bucket; this is dipped into the well and then poured into a tank; then what is drawn is poured into another tank and goes three ways: the asphalt and the salt congeal immediately; the oil,49 which the Persians call rhadinace, is dark and evil-smelling. [4] There king Darius settled the Eretrians, and they dwelt in that place until my time, keeping their ancient language. Such was the fate of the Eretrians.","places":[{"placeId":"570122","name":"Asia","startOffset":35,"endOffset":39},{"placeId":"579925","name":"Eretrians","startOffset":83,"endOffset":92},{"placeId":"hestia-susa","name":"Susa","startOffset":103,"endOffset":107},{"placeId":"579925","name":"Eretrians","startOffset":124,"endOffset":133},{"placeId":"hestia-susa","name":"Susa","startOffset":445,"endOffset":449},{"placeId":"geonames-130758","name":"Persians","startOffset":846,"endOffset":854},{"placeId":"579925","name":"Eretrians","startOffset":932,"endOffset":941},{"placeId":"579925","name":"Eretrians","startOffset":1044,"endOffset":1053}]},{"id":120,"text":"After the full moon two thousand Lacedaemonians came to Athens, making such great haste to reach it that they were in Attica on the third day after leaving Sparta. Although they came too late for the battle, they desired to see the Medes, so they went to Marathon and saw them. Then they departed again, praising the Athenians and their achievement.","places":[{"placeId":"570406","name":"Lacedaemonians","startOffset":33,"endOffset":47},{"placeId":"579888","name":"Attica","startOffset":118,"endOffset":124},{"placeId":"570685","name":"Sparta","startOffset":156,"endOffset":162},{"placeId":"903080","name":"Medes","startOffset":232,"endOffset":237},{"placeId":"668306","name":"Marathon","startOffset":255,"endOffset":263},{"placeId":"579885","name":"Athenians","startOffset":317,"endOffset":326}]},{"id":121,"text":"It is a wonder to me, and I do not believe the story, that the Alcmeonidae would ever have agreed to hold up a shield as a sign for the Persians out of a desire to make Athens subject to foreigners and to Hippias; for it is plain to see that they were tyrant-haters as much as Callias (son of Phaenippus and father of Hipponicus), or even more so. [2] Callias was the only Athenian who dared to buy Pisistratus' possessions when they were put up for sale by the state after Pisistratus' banishment from Athens; and he devised other acts of bitter hatred against him.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":136,"endOffset":144},{"placeId":"579885","name":"Athenian","startOffset":373,"endOffset":381},{"placeId":"579885","name":"Athens","startOffset":503,"endOffset":509}]},{"id":122,"text":"50 [This Callias is worthy of all men's remembrance for many reasons: first, because he so excellently freed his country, as I have said; second, for what he did at Olympia, where he won a horserace, and was second in a four-horse chariot, after already winning a Pythian prize, and was the cynosure of all Hellas for the lavishness of his spending; [2] and third, for his behavior regarding his three daughters. When they were of marriageable age, he gave them a most splendid gift and one very pleasant to them, promising that each would wed that man whom she chose for herself from all the Athenians.] 123.The Alcmeonidae were tyrant-haters as much as Callias, or not less so. Therefore I find it a strange and unbelievable accusation that they of all men should have held up a shield; at all times they shunned tyrants, and it was by their contrivance that the sons of Pisistratus were deposed from their tyranny. [2] Thus in my judgment it was they who freed Athens much more than did Harmodius and Aristogeiton. These only enraged the remaining sons of Pisistratus by killing Hipparchus, and did nothing to end the tyranny of the rest of them; but the Alcmeonidae plainly liberated their country, if they truly were the ones who persuaded the Pythian priestess to signify to the Lacedaemonians that they should free Athens, as I have previously shown.","places":[{"placeId":"570531","name":"Olympia","startOffset":165,"endOffset":172},{"placeId":"geonames-390903","name":"Hellas","startOffset":307,"endOffset":313},{"placeId":"579885","name":"Athenians","startOffset":593,"endOffset":602},{"placeId":"570406","name":"Lacedaemonians","startOffset":1285,"endOffset":1299},{"placeId":"579885","name":"Athens","startOffset":1322,"endOffset":1328}]},{"id":124,"text":"Perhaps out of some grudge against the Athenian people they betrayed their country. But there were no others at Athens more esteemed or more honored than they; [2] therefore plain reason forbids believing that they of all men could have held up the shield for any such cause. A shield was held up; this cannot be denied, for it happened; but who did it I do not know, and I can say no further.","places":[{"placeId":"579885","name":"Athenian","startOffset":39,"endOffset":47}]},{"id":125,"text":"The Alcmeonidae had been men of renown at Athens even in the old days, and from the time of Alcmeon51 and then Megacles their renown increased. [2] When the Lydians from Sardis came from Croesus to the Delphic oracle, Alcmeon son of Megacles worked with them and zealously aided them; when Croesus heard from the Lydians who visited the oracle of Alcmeon's benefits to him, he summoned Alcmeon to Sardis, and there made him a gift of as much gold as he could carry away at one time on his person. [3] Considering the nature of the gift, Alcmeon planned and employed this device: he donned a wide tunic, leaving a deep fold in it, and put on the most spacious boots that he could find, then went into the treasury to which they led him. [4] Falling upon a heap of gold-dust, first he packed next to his legs as much gold as his boots would contain; then he filled all the fold of his tunic with gold and strewed the dust among the hair of his head, and took more of it into his mouth; when he came out of the treasury, hardly dragging the weight of his boots, he was like anything rather than a human being, with his mouth crammed full and all his body swollen. [5] Croesus burst out laughing at the sight and gave him all the gold he already had and that much more again. Thus the family grew very rich; Alcmeon came to keep four-horse chariots and won with them at Olympia.","places":[{"placeId":"550701","name":"Lydians","startOffset":157,"endOffset":164},{"placeId":"550867","name":"Sardis","startOffset":170,"endOffset":176},{"placeId":"540726","name":"Delphi","startOffset":202,"endOffset":208},{"placeId":"550701","name":"Lydians","startOffset":313,"endOffset":320},{"placeId":"550867","name":"Sardis","startOffset":397,"endOffset":403},{"placeId":"570531","name":"Olympia","startOffset":1366,"endOffset":1373}]},{"id":126,"text":"In the next generation Cleisthenes52 the tyrant of Sicyon raised that house still higher, so that it grew much more famous in Hellas than it had formerly been. Cleisthenes son of Aristonymus son of Myron son of Andreas had one daughter, whose name was Agariste. He desired to wed her to the best man he could find in Hellas. [2] It was the time of the Olympian games, and when he was victor there with a four-horse chariot, Cleisthenes made a proclamation that whichever Greek thought himself worthy to be his son-in-law should come on the sixtieth day from then or earlier to Sicyon, and Cleisthenes would make good his promise of marriage in a year from that sixtieth day. [3] Then all the Greeks who were proud of themselves and their country came as suitors, and to that end Cleisthenes had them compete in running and wrestling contests.","places":[{"placeId":"570668","name":"Sicyon","startOffset":51,"endOffset":57},{"placeId":"geonames-390903","name":"Hellas","startOffset":126,"endOffset":132},{"placeId":"geonames-390903","name":"Hellas","startOffset":317,"endOffset":323},{"placeId":"570531","name":"Olympia","startOffset":352,"endOffset":359},{"placeId":"geonames-390903","name":"Greek","startOffset":471,"endOffset":476},{"placeId":"570668","name":"Sicyon","startOffset":577,"endOffset":583},{"placeId":"geonames-390903","name":"Greeks","startOffset":692,"endOffset":698}]},{"id":127,"text":"From Italy came Smindyrides of Sybaris, son of Hippocrates, the most luxurious liver of his day (and Sybaris was then at the height of its prosperity), and Damasus of Siris, son of that Amyris who was called the Wise. [2] These came from Italy; from the Ionian Gulf, Amphimnestus son of Epistrophus, an Epidamnian; he was from the Ionian Gulf. From Aetolia came Males, the brother of that Titormus who surpassed all the Greeks in strength, and fled from the sight of men to the farthest parts of the Aetolian land. [3] From the Peloponnese came Leocedes, son of Phidon the tyrant of Argos, that Phidon who made weights and measures for the Peloponnesians53 and acted more arrogantly than any other Greek; he drove out the Elean contest-directors and held the contests at Olympia himself. This man's son now came, and Amiantus, an Arcadian from Trapezus, son of Lycurgus; and an Azenian from the town of Paeus, Laphanes, son of that Euphorion who, as the Arcadian tale relates, gave lodging to the Dioscuri, and ever since kept open house for all men; and Onomastus from Elis, son of Agaeus. [4] These came from the Peloponnese itself; from Athens Megacles, son of that Alcmeon who visited Croesus, and also Hippocleides son of Tisandrus, who surpassed the Athenians in wealth and looks. From Eretria, which at that time was prosperous, came Lysanias; he was the only man from Euboea. From Thessaly came a Scopad, Diactorides of Crannon; and from the Molossians, Alcon.","places":[{"placeId":"452457","name":"Sybaris","startOffset":31,"endOffset":38},{"placeId":"452457","name":"Sybaris","startOffset":101,"endOffset":108},{"placeId":"550597","name":"Ionian","startOffset":254,"endOffset":260},{"placeId":"550597","name":"Ionian","startOffset":331,"endOffset":337},{"placeId":"geonames-390903","name":"Greeks","startOffset":420,"endOffset":426},{"placeId":"570577","name":"Peloponnese","startOffset":528,"endOffset":539},{"placeId":"570106","name":"Argos","startOffset":583,"endOffset":588},{"placeId":"570577","name":"Peloponnesians","startOffset":640,"endOffset":654},{"placeId":"geonames-390903","name":"Greek","startOffset":698,"endOffset":703},{"placeId":"570531","name":"Olympia","startOffset":771,"endOffset":778},{"placeId":"570102","name":"Arcadia","startOffset":830,"endOffset":837},{"placeId":"570102","name":"Arcadia","startOffset":954,"endOffset":961},{"placeId":"570220","name":"Elis","startOffset":1070,"endOffset":1074},{"placeId":"570577","name":"Peloponnese","startOffset":1115,"endOffset":1126},{"placeId":"579885","name":"Athenians","startOffset":1256,"endOffset":1265},{"placeId":"579925","name":"Eretria","startOffset":1292,"endOffset":1299},{"placeId":"540775","name":"Euboea","startOffset":1376,"endOffset":1382},{"placeId":"1332","name":"Thessaly","startOffset":1389,"endOffset":1397}]},{"id":128,"text":"These were the suitors. When they arrived on the appointed day, Cleisthenes first inquired the country and lineage of each; then he kept them with him for a year, testing their manliness and temper and upbringing and manner of life; this he did by consorting with them alone and in company, putting the younger of them to contests of strength, but especially watching their demeanor at the common meal; for as long as he kept them with him, he did everything for them and entertained them with magnificence. [2] The suitors that most pleased him were the ones who had come from Athens, and of these Hippocleides son of Tisandrus was judged foremost, both for his manliness and because in ancestry he was related to the Cypselids of Corinth.","places":[]},{"id":129,"text":"When the appointed day came for the marriage feast and for Cleisthenes' declaration of whom he had chosen out of them all, Cleisthenes sacrificed a hundred oxen and gave a feast to the suitors and to the whole of Sicyon. [2] After dinner the suitors vied with each other in music and in anecdotes for all to hear. As they sat late drinking, Hippocleides, now far outdoing the rest, ordered the flute-player to play him a dance-tune; the flute-player obeyed and he began to dance. I suppose he pleased himself with his dancing, but Cleisthenes saw the whole business with much disfavor. [3] Hippocleides then stopped for a while and ordered a table to be brought in; when the table arrived, he danced Laconian figures on it first, and then Attic; last of all he rested his head on the table and made gestures with his legs in the air. [4] Now Cleisthenes at the first and the second bout of dancing could no more bear to think of Hippocleides as his son-in-law, because of his dancing and his shamelessness, but he had held himself in check, not wanting to explode at Hippocleides; but when he saw him making gestures with his legs, he could no longer keep silence and said, son of Tisandrus, you have danced away your marriage. Hippocleides said in answer, It does not matter to Hippocleides! Since then this is proverbial.","places":[{"placeId":"570668","name":"Sicyon","startOffset":213,"endOffset":219},{"placeId":"570406","name":"Laconian","startOffset":700,"endOffset":708}]},{"id":130,"text":"Then Cleisthenes bade them all be silent and spoke to the company at large: Suitors for my daughter's hand, I thank you one and all; if it were possible I would grant each of you his wish, neither choosing out one to set him above another nor disparaging the rest. [2] But since I have but one maiden to plan for and so cannot please all of you, to those of you whose suit is rejected I make a gift of a talent of silver to each, for his desire to take a wife from my house and for his sojourn away from his home; and to Megacles son of Alcmeon do I betroth my daughter Agariste, by the laws of the Athenians. Megacles accepted the betrothal, and Cleisthenes brought the marriage to pass.","places":[{"placeId":"579885","name":"Athenians","startOffset":600,"endOffset":609}]},{"id":131,"text":"Such is the tale of the choice among the suitors; and thus the fame of the Alcmeonidae resounded throughout Hellas. From this marriage was born that Cleisthenes, named after his mother's father from Sicyon, who gave the Athenians their tribes and their democracy; [2] he and Hippocrates were born to Megacles; Hippocrates was father of another Megacles and another Agariste, called after Agariste who was Cleisthenes' daughter. She was married to Xanthippus son of Ariphron, and when she was pregnant she saw in her sleep a vision in which she thought she gave birth to a lion. In a few days she bore Xanthippus a son, Pericles.","places":[{"placeId":"geonames-390903","name":"Hellas","startOffset":108,"endOffset":114},{"placeId":"570668","name":"Sicyon","startOffset":199,"endOffset":205},{"placeId":"579885","name":"Athenians","startOffset":220,"endOffset":229}]},{"id":132,"text":"After the Persian disaster at Marathon, the reputation of Miltiades, already great at Athens, very much increased. He asked the Athenians for seventy ships, an army, and money, not revealing against what country he would lead them, but saying that he would make them rich if they followed him; he would bring them to a country from which they could easily carry away an abundance of gold; so he said when he asked for the ships. The Athenians were induced by these promises and granted his request.","places":[{"placeId":"geonames-130758","name":"Persian","startOffset":10,"endOffset":17},{"placeId":"580021","name":"Marathon","startOffset":30,"endOffset":38},{"placeId":"579885","name":"Athenians","startOffset":128,"endOffset":137},{"placeId":"579885","name":"Athenians","startOffset":433,"endOffset":442}]},{"id":133,"text":"Miltiades took his army and sailed for Paros, on the pretext that the Parians had brought this on themselves by first sending triremes with the Persian fleet to Marathon. Such was the pretext of his argument, but he had a grudge against the Parians because Lysagoras son of Tisias, a man of Parian descent, had slandered him to Hydarnes the Persian. [2] When he reached his voyage's destination, Miltiades with his army drove the Parians inside their walls and besieged them; he sent in a herald and demanded a hundred talents, saying that if they did not give it to him, his army would not return home before it had stormed their city. [3] The Parians had no intention of giving Miltiades any money at all, and they contrived how to defend their city. They did this by building their wall at night to double its former height where it was most assailable, and also by other devices.","places":[{"placeId":"geonames-130758","name":"Persian","startOffset":144,"endOffset":151},{"placeId":"580021","name":"Marathon","startOffset":161,"endOffset":169},{"placeId":"geonames-130758","name":"Persian","startOffset":341,"endOffset":348}]},{"id":134,"text":"All the Greeks tell the same story up to this point; after this the Parians themselves say that the following happened: as Miltiades was in a quandary, a captive woman named Timo, Parian by birth and an under-priestess of the goddesses of the dead, came to talk with him. [2] Coming before Miltiades, she advised him, if taking Paros was very important to him, to do whatever she suggested. Then, following her advice, he passed through to the hill in front of the city and jumped over the fence of the precinct of Demeter the Lawgiver, since he was unable to open the door. After leaping over, he went to the shrine, whether to move something that should not be moved, or with some other intention. When he was right at the doors, he was immediately seized with panic and hurried back by the same route; leaping down from the wall he twisted his thigh, but some say he hit his knee.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":8,"endOffset":14}]},{"id":135,"text":"So Miltiades sailed back home in a sorry condition, neither bringing money for the Athenians nor having won Paros; he had besieged the town for twenty-six days and ravaged the island. [2] The Parians learned that Timo the under-priestess of the goddesses had been Miltiades' guide and desired to punish her for this. Since they now had respite from the siege, they sent messengers to Delphi to ask if they should put the under-priestess to death for guiding their enemies to the capture of her native country, and for revealing to Miltiades the rites that no male should know. [3] But the Pythian priestess forbade them, saying that Timo was not responsible: Miltiades was doomed to make a bad end, and an apparition had led him in these evils.","places":[{"placeId":"579885","name":"Athenians","startOffset":83,"endOffset":92},{"placeId":"540726","name":"Delphi","startOffset":384,"endOffset":390}]},{"id":136,"text":"Such was the priestess' reply to the Parians. The Athenians had much to say about Miltiades on his return from Paros, especially Xanthippus son of Ariphron, who prosecuted Miltiades before the people for deceiving the Athenians and called for the death penalty. [2] Miltiades was present but could not speak in his own defense, since his thigh was festering; he was laid before the court on a couch, and his friends spoke for him, often mentioning the fight at Marathon and the conquest of Lemnos: how Miltiades had punished the Pelasgians and taken Lemnos, delivering it to the Athenians. [3] The people took his side as far as not condemning him to death, but they fined him fifty talents for his wrongdoing. Miltiades later died of gangrene and rot in his thigh, and the fifty talents were paid by his son Cimon.","places":[{"placeId":"579885","name":"Athenians","startOffset":50,"endOffset":59},{"placeId":"579885","name":"Athenians","startOffset":218,"endOffset":227},{"placeId":"668306","name":"Marathon","startOffset":461,"endOffset":469},{"placeId":"579885","name":"Athenians","startOffset":579,"endOffset":588}]},{"id":137,"text":"Miltiades son of Cimon took possession of Lemnos in this way: When the Pelasgians54 were driven out of Attica by the Athenians, whether justly or unjustly I cannot say, beyond what is told; namely, that Hecataeus the son of Hegesandrus declares in his history that the act was unjust; [2] for when the Athenians saw the land under Hymettus, formerly theirs, which they had given to the Pelasgians as a dwelling-place in reward for the wall that had once been built around the acropoliswhen the Athenians saw how well this place was tilled which previously had been bad and worthless, they were envious and coveted the land, and so drove the Pelasgians out on this and no other pretext. But the Athenians themselves say that their reason for expelling the Pelasgians was just. [3] The Pelasgians set out from their settlement at the foot of Hymettus and wronged the Athenians in this way: Neither the Athenians nor any other Hellenes had servants yet at that time, and their sons and daughters used to go to the Nine Wells55 for water; and whenever they came, the Pelasgians maltreated them out of mere arrogance and pride. And this was not enough for them; finally they were caught in the act of planning to attack Athens. [4] The Athenians were much better men than the Pelasgians, since when they could have killed them, caught plotting as they were, they would not so do, but ordered them out of the country. The Pelasgians departed and took possession of Lemnos, besides other places. This is the Athenian story; the other is told by Hecataeus.","places":[{"placeId":"579888","name":"Attica","startOffset":103,"endOffset":109},{"placeId":"579885","name":"Athenians","startOffset":117,"endOffset":126},{"placeId":"579885","name":"Athenians","startOffset":302,"endOffset":311},{"placeId":"579885","name":"Athenians","startOffset":495,"endOffset":504},{"placeId":"579885","name":"Athenians","startOffset":695,"endOffset":704},{"placeId":"579885","name":"Athenians","startOffset":866,"endOffset":875},{"placeId":"579885","name":"Athenians","startOffset":901,"endOffset":910},{"placeId":"geonames-390903","name":"Hellenes","startOffset":925,"endOffset":933},{"placeId":"579885","name":"Athenians","startOffset":1232,"endOffset":1241},{"placeId":"579885","name":"Athenian","startOffset":1502,"endOffset":1510}]},{"id":138,"text":"These Pelasgians dwelt at that time in Lemnos and desired vengeance on the Athenians. Since they well knew the time of the Athenian festivals, they acquired fifty-oared ships and set an ambush for the Athenian women celebrating the festival of Artemis at Brauron. They seized many of the women, then sailed away with them and brought them to Lemnos to be their concubines. [2] These women bore more and more children, and they taught their sons the speech of Attica and Athenian manners. These boys would not mix with the sons of the Pelasgian women; if one of them was beaten by one of the others, they would all run to his aid and help each other; these boys even claimed to rule the others, and were much stronger. [3] When the Pelasgians perceived this, they took counsel together; it troubled them much in their deliberations to think what the boys would do when they grew to manhood, if they were resolved to help each other against the sons of the lawful wives and attempted to rule them already. [4] Thereupon the Pelasgians resolved to kill the sons of the Attic women; they did this, and then killed the boys' mothers also. From this deed and the earlier one which was done by the women when they killed their own husbands who were Thoas' companions, a Lemnian crime has been a proverb in Hellas for any deed of cruelty.","places":[{"placeId":"579885","name":"Athenians","startOffset":75,"endOffset":84},{"placeId":"579885","name":"Athenian","startOffset":123,"endOffset":131},{"placeId":"579885","name":"Athenian","startOffset":201,"endOffset":209},{"placeId":"579888","name":"Attica","startOffset":459,"endOffset":465},{"placeId":"579885","name":"Athenian","startOffset":470,"endOffset":478},{"placeId":"geonames-390903","name":"Hellas","startOffset":1301,"endOffset":1307}]},{"id":139,"text":"But when the Pelasgians had murdered their own sons and women, their land brought forth no fruit, nor did their wives and their flocks and herds bear offspring as before. Crushed by hunger and childlessness, they sent to Delphi to ask for some release from their present ills. [2] The Pythian priestess ordered them to pay the Athenians whatever penalty the Athenians themselves judged. The Pelasgians went to Athens and offered to pay the penalty for all their wrongdoing. [3] The Athenians set in their town-hall a couch adorned as finely as possible, and placed beside it a table covered with all manner of good things, then ordered the Pelasgians to deliver their land to them in the same condition. [4] The Pelasgians answered, We will deliver it when a ship with a north wind accomplishes the voyage from your country to ours in one day; they supposed that this was impossible, since Attica is far to the south of Lemnos.","places":[{"placeId":"540726","name":"Delphi","startOffset":221,"endOffset":227},{"placeId":"579885","name":"Athenians","startOffset":327,"endOffset":336},{"placeId":"579885","name":"Athenians","startOffset":358,"endOffset":367},{"placeId":"579885","name":"Athenians","startOffset":482,"endOffset":491},{"placeId":"579888","name":"Attica","startOffset":892,"endOffset":898}]},{"id":140,"text":"At the time that was all. But a great many years later, when the Chersonese on the Hellespont was made subject to Athens, Miltiades son of Cimon accomplished the voyage from Elaeus on the Chersonese to Lemnos with the Etesian56 winds then constantly blowing; he proclaimed that the Pelasgians must leave their island, reminding them of the oracle which the Pelasgians thought would never be fulfilled. [2] The Hephaestians obeyed, but the Myrinaeans would not agree that the Chersonese was Attica and were besieged, until they too submitted. Thus did Miltiades and the Athenians take possession of Lemnos.HerodotusThe Histories","places":[{"placeId":"226564","name":"Chersonese","startOffset":65,"endOffset":75},{"placeId":"501434","name":"Hellespont","startOffset":83,"endOffset":93},{"placeId":"226564","name":"Chersonese","startOffset":188,"endOffset":198},{"placeId":"226564","name":"Chersonese","startOffset":475,"endOffset":485},{"placeId":"579888","name":"Attica","startOffset":490,"endOffset":496},{"placeId":"579885","name":"Athenians","startOffset":569,"endOffset":578}]}]`)},7:{id:7,title:"Book 7: Polymnia",chapters:JSON.parse(`[{"id":1,"text":"When the message concerning the fight at Marathon came to Darius son of Hystaspes, already greatly angry against the Athenians for their attack upon Sardis, he was now much more angry and eager to send an expedition against Hellas. [2] Immediately he sent messengers to all the cities and commanded them to equip an army, instructing each to provide many more ships and horses and provisions and transport vessels than they had before. Asia was in commotion with these messages for three years,1 as the best men were enrolled for service against Hellas and made preparations. [3] In the fourth year the Egyptians, whom Cambyses had enslaved, revolted from the Persians; thereupon Darius was even more eager to send expeditions against both.","places":[{"placeId":"580021","name":"Marathon","startOffset":41,"endOffset":49},{"placeId":"579885","name":"Athenians","startOffset":117,"endOffset":126},{"placeId":"550867","name":"Sardis","startOffset":149,"endOffset":155},{"placeId":"geonames-390903","name":"Hellas","startOffset":224,"endOffset":230},{"placeId":"geonames-390903","name":"Hellas","startOffset":546,"endOffset":552},{"placeId":"981503","name":"Egyptians","startOffset":603,"endOffset":612},{"placeId":"geonames-130758","name":"Persians","startOffset":660,"endOffset":668}]},{"id":2,"text":"But while Darius was making preparations against Egypt and Athens, a great quarrel arose among his sons concerning the chief power in the land. They held that before his army marched he must declare an heir to the kingship according to Persian law. [2] Three sons had been born to Darius before he became king by his first wife, the daughter of Gobryas, and four more after he became king by Atossa daughter of Cyrus. Artobazanes was the oldest of the earlier sons, Xerxes of the later; [3] and as sons of different mothers they were rivals. Artobazanes pleaded that he was the oldest of all Darius' offspring and that it was everywhere customary that the eldest should rule; Xerxes argued that he was the son of Cyrus' daughter Atossa and that it was Cyrus who had won the Persians their freedom.","places":[{"placeId":"981503","name":"Egypt","startOffset":49,"endOffset":54},{"placeId":"579885","name":"Athens","startOffset":59,"endOffset":65},{"placeId":"geonames-130758","name":"Persian","startOffset":236,"endOffset":243},{"placeId":"geonames-130758","name":"Persians","startOffset":774,"endOffset":782}]},{"id":3,"text":"While Darius delayed making his decision, it chanced that at this time Demaratus son of Ariston had come up to Susa, in voluntary exile from Lacedaemonia after he had lost the kingship of Sparta. [2] Learning of the contention between the sons of Darius, this man, as the story goes, came and advised Xerxes to add this to what he said: that he had been born when Darius was already king and ruler of Persia, but Artobazanes when Darius was yet a subject; [3] therefore it was neither reasonable nor just that anyone should have the royal privilege before him. At Sparta too (advised Demaratus) it was customary that if sons were born before their father became king, and another son born later when the father was king, the succession to the kingship belongs to the later-born. [4] Xerxes followed Demaratus advice, and Darius judged his plea to be just and declared him king. But to my thinking Xerxes would have been made king even without this advice, for Atossa held complete sway.","places":[{"placeId":"912936","name":"Susa","startOffset":111,"endOffset":115},{"placeId":"570406","name":"Lacedaemonia","startOffset":141,"endOffset":153},{"placeId":"570685","name":"Sparta","startOffset":188,"endOffset":194},{"placeId":"geonames-130758","name":"Persia","startOffset":401,"endOffset":407},{"placeId":"570685","name":"Sparta","startOffset":564,"endOffset":570}]},{"id":4,"text":"After declaring Xerxes king, Darius was intent on his expedition. But in the year after this and the revolt of Egypt, death came upon him in the midst of his preparations, after a reign of six and thirty years2 in all, and it was not granted to him to punish either the revolted Egyptians or the Athenians.","places":[{"placeId":"981503","name":"Egypt","startOffset":111,"endOffset":116},{"placeId":"981503","name":"Egyptians","startOffset":279,"endOffset":288},{"placeId":"579885","name":"Athenians","startOffset":296,"endOffset":305}]},{"id":5,"text":"After Darius' death, the royal power descended to his son Xerxes. Now Xerxes was at first by no means eager to march against Hellas; it was against Egypt that he mustered his army. But Mardonius son of Gobryas, Xerxes cousin and the son of Darius' sister, was with the king and had more influence with him than any Persian. He argued as follows: Master, it is not fitting that the Athenians should go unpunished for their deeds, after all the evil they have done to the Persians. [2] For now you should do what you have in hand; then, when you have tamed the insolence of Egypt, lead your armies against Athens, so that you may have fair fame among men, and others may beware of invading your realm in the future. [3] This argument was for vengeance,3 but he kept adding that Europe was an extremely beautiful land, one that bore all kinds of orchard trees, a land of highest excellence, worthy of no mortal master but the king.","places":[{"placeId":"geonames-390903","name":"Hellas","startOffset":125,"endOffset":131},{"placeId":"981503","name":"Egypt","startOffset":148,"endOffset":153},{"placeId":"geonames-130758","name":"Persian","startOffset":315,"endOffset":322},{"placeId":"579885","name":"Athenians","startOffset":382,"endOffset":391},{"placeId":"geonames-130758","name":"Persians","startOffset":471,"endOffset":479},{"placeId":"981503","name":"Egypt","startOffset":573,"endOffset":578},{"placeId":"579885","name":"Athens","startOffset":605,"endOffset":611}]},{"id":6,"text":"He said this because he desired adventures and wanted to be governor of Hellas. Finally he worked on Xerxes and persuaded him to do this, and other things happened that helped him to persuade Xerxes. [2] Messengers came from Thessaly from the Aleuadae (who were princes of Thessaly) and invited the king into Hellas with all earnestness; the Pisistratidae who had come up to Susa used the same pleas as the Aleuadae, offering Xerxes even more than they did. [3] They had come up to Sardis with Onomacritus, an Athenian diviner4 who had set in order the oracles of Musaeus. They had reconciled their previous hostility with him; Onomacritus had been banished from Athens by Pisistratus' son Hipparchus, when he was caught by Lasus5 of Hermione in the act of interpolating into the writings of Musaeus an oracle showing that the islands off Lemnos would disappear into the sea. [4] Because of this Hipparchus banished him, though they had previously been close friends. Now he had arrived at Susa with the Pisistratidae, and whenever he came into the king's presence they used lofty words concerning him and he recited from his oracles; all that portended disaster to the Persian he left unspoken, choosing and reciting such prophecies as were most favorable, telling how the Hellespont must be bridged by a man of Persia and describing the expedition. [5] So he brought his oracles to bear, while the Pisistratidae and Aleuadae gave their opinions.","places":[{"placeId":"geonames-390903","name":"Hellas","startOffset":72,"endOffset":78},{"placeId":"1332","name":"Thessaly","startOffset":225,"endOffset":233},{"placeId":"1332","name":"Thessaly","startOffset":273,"endOffset":281},{"placeId":"geonames-390903","name":"Hellas","startOffset":309,"endOffset":315},{"placeId":"912936","name":"Susa","startOffset":375,"endOffset":379},{"placeId":"550867","name":"Sardis","startOffset":482,"endOffset":488},{"placeId":"579885","name":"Athenian","startOffset":510,"endOffset":518},{"placeId":"579885","name":"Athens","startOffset":663,"endOffset":669},{"placeId":"550693","name":"Lemnos","startOffset":839,"endOffset":845},{"placeId":"912936","name":"Susa","startOffset":990,"endOffset":994},{"placeId":"geonames-130758","name":"Persian","startOffset":1170,"endOffset":1177},{"placeId":"501434","name":"Hellespont","startOffset":1274,"endOffset":1284},{"placeId":"geonames-130758","name":"Persia","startOffset":1313,"endOffset":1319}]},{"id":7,"text":"After being persuaded to send an expedition against Hellas, Xerxes first marched against the rebels in the year after Darius death. He subdued them and laid Egypt under a much harder slavery than in the time of Darius, and he handed it over to Achaemenes, his own brother and Darius' son. While governing Egypt, this Achaemenes was at a later time6 slain by a Libyan, Inaros son of Psammetichus.","places":[{"placeId":"geonames-390903","name":"Hellas","startOffset":52,"endOffset":58},{"placeId":"981503","name":"Egypt","startOffset":157,"endOffset":162},{"placeId":"981503","name":"Egypt","startOffset":305,"endOffset":310},{"placeId":"716588","name":"Libyan","startOffset":360,"endOffset":366}]},{"id":8,"text":"After the conquest of Egypt, intending now to take in hand the expedition against Athens, Xerxes held a special assembly of the noblest among the Persians, so he could learn their opinions and declare his will before them all. When they were assembled, Xerxes spoke to them as follows: 8A. Men of Persia, I am not bringing in and establishing a new custom, but following one that I have inherited. As I learn from our elders, we have never yet remained at peace ever since Cyrus deposed Astyages and we won this sovereignty from the Medes. It is the will of heaven; and we ourselves win advantage by our many enterprises. No one needs to tell you, who already know them well, which nations Cyrus and Cambyses and Darius my father subdued and added to our realm. [2] Ever since I came to this throne, I have considered how I might not fall short of my predecessors in this honor, and not add less power to the Persians; and my considerations persuade me that we may win not only renown, but a land neither less nor worse, and more fertile, than that which we now possess; and we would also gain vengeance and requital. For this cause I have now summoned you together, that I may impart to you what I intend to do. 8B. It is my intent to bridge the Hellespont and lead my army through Europe to Hellas, so I may punish the Athenians for what they have done to the Persians and to my father. [2] You saw that Darius my father was set on making an expedition against these men. But he is dead, and it was not granted him to punish them. On his behalf and that of all the Persians, I will never rest until I have taken Athens and burnt it, for the unprovoked wrong that its people did to my father and me. [3] First they came to Sardis with our slave Aristagoras the Milesian and burnt the groves and the temples; next, how they dealt with us when we landed on their shores, when Datis and Artaphrenes were our generals, I suppose you all know. 8C. For these reasons I am resolved to send an army against them; and I reckon that we will find the following benefits among them: if we subdue those men, and their neighbors who dwell in the land of Pelops the Phrygian, we will make the borders of Persian territory and of the firmament of heaven be the same. [2] No land that the sun beholds will border ours, but I will make all into one country, when I have passed over the whole of Europe. [3] I learn that this is the situation: no city of men or any human nation which is able to meet us in battle will be left, if those of whom I speak are taken out of our way. Thus the guilty and the innocent will alike bear the yoke of slavery. 8D. This is how you would best please me: when I declare the time for your coming, every one of you must eagerly appear; and whoever comes with his army best equipped will receive from me such gifts as are reckoned most precious among us. [2] Thus it must be done; but so that I not seem to you to have my own way, I lay the matter before you all, and bid whoever wishes to declare his opinion. So spoke Xerxes and ceased.","places":[{"placeId":"981503","name":"Egypt","startOffset":22,"endOffset":27},{"placeId":"579885","name":"Athens","startOffset":82,"endOffset":88},{"placeId":"geonames-130758","name":"Persians","startOffset":146,"endOffset":154},{"placeId":"geonames-130758","name":"Persia","startOffset":298,"endOffset":304},{"placeId":"903080","name":"Medes","startOffset":534,"endOffset":539},{"placeId":"geonames-130758","name":"Persians","startOffset":910,"endOffset":918},{"placeId":"501434","name":"Hellespont","startOffset":1248,"endOffset":1258},{"placeId":"579885","name":"Athenians","startOffset":1322,"endOffset":1331},{"placeId":"geonames-130758","name":"Persians","startOffset":1363,"endOffset":1371},{"placeId":"geonames-130758","name":"Persians","startOffset":1568,"endOffset":1576},{"placeId":"579885","name":"Athens","startOffset":1615,"endOffset":1621},{"placeId":"550867","name":"Sardis","startOffset":1725,"endOffset":1731},{"placeId":"599799","name":"Milesian","startOffset":1763,"endOffset":1771},{"placeId":"609502","name":"Phrygian","startOffset":2153,"endOffset":2161},{"placeId":"geonames-130758","name":"Persian","startOffset":2191,"endOffset":2198}]},{"id":9,"text":"After him Mardonius said: Master, you surpass not only all Persians that have been but also all that shall be; besides having dealt excellently and truly with all other matters, you will not suffer the Ionians7 who dwell in Europe to laugh at us, which they have no right to do. [2] It would be strange indeed if we who have subdued and made slaves of Sacae and Indians and Ethiopians and Assyrians and many other great nations, for no wrong done to the Persians but of mere desire to add to our power, will not take vengeance on the Greeks for unprovoked wrongs. 9A. What have we to fear from them? Have they a massive population or abundance of wealth? Their manner of fighting we know, and we know how weak their power is; we have conquered and hold their sons, those who dwell in our land and are called Ionians and Aeolians and Dorians. [2] I myself have made trial of these men, when by your father's command I marched against them. I marched as far as Macedonia and almost to Athens itself, yet none came out to meet me in battle. 9B. Yet the Greeks are accustomed to wage wars, as I learn, and they do it most senselessly in their wrongheadedness and folly. When they have declared war against each other, they come down to the fairest and most level ground that they can find and fight there, so that the victors come off with great harm; of the vanquished I say not so much as a word, for they are utterly destroyed. [2] Since they speak the same language, they should end their disputes by means of heralds or messengers, or by any way rather than fighting; if they must make war upon each other, they should each discover where they are in the strongest position and make the attempt there. The Greek custom, then, is not good; and when I marched as far as the land of Macedonia, it had not come into their minds to fight. 9C. But against you, O king, who shall make war? You will bring the multitudes of Asia, and all your ships. I think there is not so much boldness in Hellas as that; but if time should show me wrong in my judgment, and those men prove foolhardy enough to do battle with us, they would be taught that we are the greatest warriors on earth. Let us leave nothing untried; for nothing happens by itself, and all men's gains are the fruit of adventure.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":60,"endOffset":68},{"placeId":"550597","name":"Ionians","startOffset":203,"endOffset":210},{"placeId":"60021","name":"Sacae","startOffset":353,"endOffset":358},{"placeId":"50004","name":"Indians","startOffset":363,"endOffset":370},{"placeId":"39274","name":"Ethiopians","startOffset":375,"endOffset":385},{"placeId":"29492","name":"Assyrians","startOffset":390,"endOffset":399},{"placeId":"geonames-130758","name":"Persians","startOffset":455,"endOffset":463},{"placeId":"geonames-390903","name":"Greeks","startOffset":535,"endOffset":541},{"placeId":"550597","name":"Ionians","startOffset":809,"endOffset":816},{"placeId":"550406","name":"Aeolians","startOffset":821,"endOffset":829},{"placeId":"491656","name":"Macedonia","startOffset":960,"endOffset":969},{"placeId":"579885","name":"Athens","startOffset":984,"endOffset":990},{"placeId":"geonames-390903","name":"Greeks","startOffset":1051,"endOffset":1057},{"placeId":"geonames-390903","name":"Greek","startOffset":1708,"endOffset":1713},{"placeId":"491656","name":"Macedonia","startOffset":1782,"endOffset":1791},{"placeId":"geonames-390903","name":"Hellas","startOffset":1985,"endOffset":1991}]},{"id":10,"text":"Thus Mardonius smoothed Xerxes' resolution and stopped. The rest of the Persians held their peace, not daring to utter any opinion contrary to what had been put forward; then Artabanus son of Hystaspes, the king's uncle, spoke. Relying on his position, he said, 10A. O king, if opposite opinions are not uttered, it is impossible for someone to choose the better; the one which has been spoken must be followed. If they are spoken, the better can be found; just as the purity of gold cannot be determined by itself, but when gold is compared with gold by rubbing,8 we then determine the better. [2] Now I advised Darius, your father and my brother, not to lead his army against the Scythians, who have no cities anywhere to dwell in. But he hoped to subdue the nomadic Scythians and would not obey me; he went on the expedition and returned after losing many gallant men from his army. [3] You, O king, are proposing to lead your armies against far better men than the Scythiansmen who are said to be excellent warriors by sea and land. It is right that I should show you what danger there is in this. 10B. You say that you will bridge the Hellespont and march your army through Europe to Hellas. Now suppose you happen to be defeated either by land or by sea, or even both; the men are said to be valiant, and we may well guess that it is so, since the Athenians alone destroyed the great army that followed Datis and Artaphrenes to Attica. [2] Suppose they do not succeed in both ways; but if they attack with their ships and prevail in a sea-fight, and then sail to the Hellespont and destroy your bridge, that, O king, is the hour of peril. 10C. It is from no wisdom of my own that I thus conjecture; it is because I know what disaster once almost overtook us, when your father, making a highway over the Thracian Bosporus and bridging the river Ister, crossed over to attack the Scythians. At that time the Scythians used every means of entreating the Ionians, who had been charged to guard the bridges of the Ister, to destroy the way of passage.9 [2] If Histiaeus the tyrant of Miletus had consented to the opinion of the other tyrants instead of opposing it, the power of Persia would have perished. Yet it is dreadful even in the telling, that one man should hold in his hand all the king's fortunes. 10D. So do not plan to run the risk of any such danger when there is no need for it. Listen to me instead: for now dismiss this assembly; consider the matter by yourself and, whenever you so please, declare what seems best to you. [2] A well-laid plan is always to my mind most profitable; even if it is thwarted later, the plan was no less good, and it is only chance that has baffled the design; but if fortune favor one who has planned poorly, then he has gotten only a prize of chance, and his plan was no less bad. 10E. You see how the god smites with his thunderbolt creatures of greatness and does not suffer them to display their pride, while little ones do not move him to anger; and you see how it is always on the tallest buildings and trees that his bolts fall; for the god loves to bring low all things of surpassing greatness. Thus a large army is destroyed by a smaller, when the jealous god sends panic or the thunderbolt among them, and they perish unworthily; for the god suffers pride in none but himself. 10F. Now haste is always the parent of failure, and great damages are likely to arise; but in waiting there is good, and in time this becomes clear, even though it does not seem so in the present. 10G. This, O king, is my advice to you. But you, Mardonius son of Gobryas, cease your foolish words about the Greeks, for they do not deserve to be maligned. By slandering the Greeks you incite the king to send this expedition; that is the end to which you press with all eagerness. Let it not be so. [2] Slander is a terrible business; there are two in it who do wrong and one who suffers wrong. The slanderer wrongs another by accusing an absent man, and the other does wrong in that he is persuaded before he has learned the whole truth; the absent man does not hear what is said of him and suffers wrong in the matter, being maligned by the one and condemned by the other. 10H. If an army must by all means be sent against these Greeks, hear me now: let the king himself remain in the Persian land, and let us two stake our children's lives upon it; you lead out the army, choosing whatever men you wish and taking as great an army as you desire. [2] If the king's fortunes fare as you say, let my sons be slain, and myself with them; but if it turns out as I foretell, let your sons be so treated, and you likewise, if you return. [3] But if you are unwilling to submit to this and will at all hazards lead your army overseas to Hellas, then I think that those left behind in this place will hear that Mardonius has done great harm to Persia, and has been torn apart by dogs and birds in the land of Athens or of Lacedaemon, if not even before that on the way there; and that you have learned what kind of men you persuade the king to attack.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":72,"endOffset":80},{"placeId":"1273","name":"Scythians","startOffset":683,"endOffset":692},{"placeId":"1273","name":"Scythians","startOffset":770,"endOffset":779},{"placeId":"1273","name":"Scythians","startOffset":970,"endOffset":979},{"placeId":"501434","name":"Hellespont","startOffset":1142,"endOffset":1152},{"placeId":"geonames-390903","name":"Hellas","startOffset":1191,"endOffset":1197},{"placeId":"579885","name":"Athenians","startOffset":1356,"endOffset":1365},{"placeId":"579888","name":"Attica","startOffset":1436,"endOffset":1442},{"placeId":"501434","name":"Hellespont","startOffset":1575,"endOffset":1585},{"placeId":"1001889","name":"Thracian","startOffset":1811,"endOffset":1819},{"placeId":"520977","name":"Bosporus","startOffset":1820,"endOffset":1828},{"placeId":"226577","name":"Ister","startOffset":1852,"endOffset":1857},{"placeId":"1273","name":"Scythians","startOffset":1886,"endOffset":1895},{"placeId":"1273","name":"Scythians","startOffset":1914,"endOffset":1923},{"placeId":"550597","name":"Ionians","startOffset":1959,"endOffset":1966},{"placeId":"226577","name":"Ister","startOffset":2017,"endOffset":2022},{"placeId":"599799","name":"Miletus","startOffset":2087,"endOffset":2094},{"placeId":"geonames-130758","name":"Persia","startOffset":2182,"endOffset":2188},{"placeId":"geonames-390903","name":"Greeks","startOffset":3644,"endOffset":3650},{"placeId":"geonames-390903","name":"Greeks","startOffset":3710,"endOffset":3716},{"placeId":"geonames-390903","name":"Greeks","startOffset":4267,"endOffset":4273},{"placeId":"geonames-130758","name":"Persian","startOffset":4323,"endOffset":4330},{"placeId":"geonames-390903","name":"Hellas","startOffset":4768,"endOffset":4774},{"placeId":"geonames-130758","name":"Persia","startOffset":4874,"endOffset":4880},{"placeId":"579885","name":"Athens","startOffset":4939,"endOffset":4945},{"placeId":"570406","name":"Lacedaemon","startOffset":4952,"endOffset":4962}]},{"id":11,"text":"Thus spoke Artabanus. Xerxes answered angrily, Artabanus, you are my father's brother; that will save you from receiving the fitting reward of foolish words. But for your cowardly lack of spirit I lay upon you this disgrace, that you will not go with me and my army against Hellas, but will stay here with the women; I myself will accomplish all that I have said, with no help from you. [2] May I not be the son of Darius son of Hystaspes son of Arsames son of Ariaramnes son of Teispes son of Cyrus son of Cambyses son of Teispes son of Achaemenes,10 if I do not have vengeance on the Athenians; I well know that if we remain at peace they will not; they will assuredly invade our country, if we may infer from what they have done already, for they burnt Sardis and marched into Asia. [3] It is not possible for either of us to turn back: to do or to suffer is our task, so that what is ours be under the Greeks, or what is theirs under the Persians; there is no middle way in our quarrel. [4] Honor then demands that we avenge ourselves for what has been done to us; thus will I learn what is this evil that will befall me when I march against these Greeksmen that even Pelops the Phrygian, the slave of my forefathers, did so utterly subdue that to this day they and their country are called by the name of their conqueror.","places":[{"placeId":"geonames-390903","name":"Hellas","startOffset":275,"endOffset":281},{"placeId":"579885","name":"Athenians","startOffset":587,"endOffset":596},{"placeId":"550867","name":"Sardis","startOffset":757,"endOffset":763},{"placeId":"geonames-390903","name":"Greeks","startOffset":907,"endOffset":913},{"placeId":"geonames-130758","name":"Persians","startOffset":943,"endOffset":951},{"placeId":"geonames-390903","name":"Greeks","startOffset":1153,"endOffset":1159},{"placeId":"609502","name":"Phrygian","startOffset":1185,"endOffset":1193}]},{"id":12,"text":"The discussion went that far; then night came, and Xerxes was pricked by the advice of Artabanus. Thinking it over at night, he saw clearly that to send an army against Hellas was not his affair. He made this second resolve and fell asleep; then (so the Persians say) in the night he saw this vision: It seemed to Xerxes that a tall and handsome man stood over him and said, [2] Are you then changing your mind, Persian, and will not lead the expedition against Hellas, although you have proclaimed the mustering of the army? It is not good for you to change your mind, and there will be no one here to pardon you for it; let your course be along the path you resolved upon yesterday.","places":[{"placeId":"geonames-390903","name":"Hellas","startOffset":169,"endOffset":175},{"placeId":"geonames-130758","name":"Persians","startOffset":254,"endOffset":262},{"placeId":"geonames-130758","name":"Persian","startOffset":413,"endOffset":420},{"placeId":"geonames-390903","name":"Hellas","startOffset":463,"endOffset":469}]},{"id":13,"text":"So the vision spoke, and seemed to Xerxes to vanish away. When day dawned, the king took no account of this dream, and he assembled the Persians whom he had before gathered together and addressed them thus: [2] Persians, forgive me for turning and twisting in my purpose; I am not yet come to the fullness of my wisdom, and I am never free from people who exhort me to do as I said. It is true that when I heard Artabanus' opinion my youthful spirit immediately boiled up, and I burst out with an unseemly and wrongful answer to one older than myself; but now I see my fault and will follow his judgment. [3] Be at peace, since I have changed my mind about marching against Hellas.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":136,"endOffset":144},{"placeId":"geonames-130758","name":"Persians","startOffset":212,"endOffset":220},{"placeId":"geonames-390903","name":"Hellas","startOffset":675,"endOffset":681}]},{"id":14,"text":"When the Persians heard that, they rejoiced and made obeisance to him. But when night came on, the same vision stood again over Xerxes as he slept, and said, Son of Darius, have you then plainly renounced your army's march among the Persians, and made my words of no account, as though you had not heard them? Know for certain that, if you do not lead out your army immediately, this will be the outcome of it: as you became great and mighty in a short time, so in a moment will you be brought low again.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":9,"endOffset":17},{"placeId":"geonames-130758","name":"Persians","startOffset":234,"endOffset":242}]},{"id":15,"text":"Greatly frightened by the vision, Xerxes leapt up from his bed, and sent a messenger to summon Artabanus. When he came, Xerxes said, Artabanus, for a moment I was of unsound mind, and I answered your good advice with foolish words; but after no long time I repented, and saw that it was right for me to follow your advice. [2] Yet, though I desire to, I cannot do it; ever since I turned back and repented, a vision keeps coming to haunt my sight, and it will not allow me to do as you advise; just now it has threatened me and gone. [3] Now if a god is sending the vision, and it is his full pleasure that there this expedition against Hellas take place, that same dream will hover about you and give you the same command it gives me. I believe that this is most likely to happen, if you take all my apparel and sit wearing it upon my throne, and then lie down to sleep in my bed.","places":[{"placeId":"geonames-390903","name":"Hellas","startOffset":638,"endOffset":644}]},{"id":16,"text":"Xerxes said this, but Artabanus would not obey the first command, thinking it was not right for him to sit on the royal throne; at last he was compelled and did as he was bid, saying first: 16A. O king, I judge it of equal worth whether a man is wise or is willing to obey good advice; to both of these you have attained, but the company of bad men trips you up; just as they say that sea, of all things the most serviceable to men, is hindered from following its nature by the blasts of winds that fall upon it. [2] It was not that I heard harsh words from you that stung me so much as that, when two opinions were laid before the Persians, one tending to the increase of pride, the other to its abatement, showing how evil a thing it is to teach the heart continual desire of more than it has, of these two opinions you preferred that one which was more fraught with danger to yourself and to the Persians. 16B. Now when you have turned to the better opinion, you say that, while intending to abandon the expedition against the Greeks, you are haunted by a dream sent by some god, which forbids you to disband the expedition. [2] But this is none of heaven's working, my son. The roving dreams that visit men are of such nature as I shall teach you, since I am many years older than you. Those visions that rove about us in dreams are for the most part the thoughts of the day; and in these recent days we have been very busy with this expedition. 16C. But if this is not as I determine and it has something divine to it, then you have spoken the conclusion of the matter; let it appear to me just as it has to you, and utter its command. If it really wishes to appear, it should do so to me no more by virtue of my wearing your dress instead of mine, and my sleeping in your bed rather than in my own. [2] Whatever it is that appears to you in your sleep, surely it has not come to such folly as to infer from your dress that I am you when it sees me. We now must learn if it will take no account of me and not deign to appear and haunt me, whether I am wearing your robes or my own, but will come to you; if it comes continually, I myself would say that it is something divine. [3] If you are determined that this must be done and there is no averting it, and I must lie down to sleep in your bed, so be it; this duty I will fulfill, and let the vision appear also to me. But until then I will keep my present opinion.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":633,"endOffset":641},{"placeId":"geonames-130758","name":"Persians","startOffset":900,"endOffset":908},{"placeId":"geonames-390903","name":"Greeks","startOffset":1031,"endOffset":1037}]},{"id":17,"text":"So spoke Artabanus and did as he was bid, hoping to prove Xerxes' words vain; he put on Xerxes' robes and sat on the king's throne. Then while he slept there came to him in his sleep the same dream that had haunted Xerxes; it stood over him and spoke thus: [2] Are you the one who dissuades Xerxes from marching against Hellas, because you care for him? Neither in the future nor now will you escape with impunity for striving to turn aside what must be. To Xerxes himself it has been declared what will befall him if he disobeys.","places":[{"placeId":"geonames-390903","name":"Hellas","startOffset":321,"endOffset":327}]},{"id":18,"text":"With this threat (so it seemed to Artabanus) the vision was about to burn his eyes with hot irons. He leapt up with a loud cry, then sat by Xerxes and told him the whole story of what he had seen in his dream, and next he said: [2] O King, since I have seen, as much as a man may, how the greater has often been brought low by the lesser, I forbade you to always give rein to your youthful spirit, knowing how evil a thing it is to have many desires, and remembering the end of Cyrus' expedition against the Massagetae and of Cambyses' against the Ethiopians, and I myself marched with Darius against the Scythians. [3] Knowing this, I judged that you had only to remain in peace for all men to deem you fortunate. But since there is some divine motivation, and it seems that the gods mark Hellas for destruction, I myself change and correct my judgment. Now declare the gods' message to the Persians, and bid them obey your first command for all due preparation. Do this, so that nothing on your part be lacking to the fulfillment of the gods' commission. [4] After this was said, they were incited by the vision, and when daylight came Xerxes imparted all this to the Persians. Artabanus now openly encouraged that course which he alone had before openly discouraged.","places":[{"placeId":"59921","name":"Massagetae","startOffset":509,"endOffset":519},{"placeId":"39274","name":"Ethiopians","startOffset":549,"endOffset":559},{"placeId":"1273","name":"Scythians","startOffset":606,"endOffset":615},{"placeId":"geonames-390903","name":"Hellas","startOffset":791,"endOffset":797},{"placeId":"geonames-130758","name":"Persians","startOffset":893,"endOffset":901},{"placeId":"geonames-130758","name":"Persians","startOffset":1172,"endOffset":1180}]},{"id":19,"text":"Xerxes was now intent on the expedition and then saw a third vision in his sleep, which the Magi interpreted to refer to the whole earth and to signify that all men should be his slaves. This was the vision: Xerxes thought that he was crowned with an olive bough, of which the shoots spread over the whole earth, and then the crown vanished from off his head where it was set. [3] The Magi interpreted it in this way, and immediately every single man of the Persians who had been assembled rode away to his own province and there used all zeal to fulfill the kings command, each desiring to receive the promised gifts. Thus it was that Xerxes mustered his army, searching out every part of the continent.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":458,"endOffset":466}]},{"id":20,"text":"For full four years11 after the conquest of Egypt he was equipping his force and preparing all that was needed for it; before the fifth year was completed, he set forth on his march with the might of a great multitude. [2] This was by far the greatest of all expeditions that we know of. The one that Darius led against the Scythians is nothing compared to it; neither is the Scythian expedition when they burst into Media12 in pursuit of the Cimmerians and subdued and ruled almost all the upper lands of Asia (it was for this that Darius afterwards attempted to punish them). According to the reports, the expedition led by the sons of Atreus against Troy is also nothing by comparison; neither is the one of the Mysians and Teucrians which before the Trojan war crossed the Bosporus into Europe,13 subdued all the Thracians, and came down to the Ionian sea, marching southward as far as the river Peneus.","places":[{"placeId":"981503","name":"Egypt","startOffset":44,"endOffset":49},{"placeId":"1273","name":"Scythians","startOffset":324,"endOffset":333},{"placeId":"1273","name":"Scythian","startOffset":376,"endOffset":384},{"placeId":"903080","name":"Media","startOffset":417,"endOffset":422},{"placeId":"550595","name":"Troy","startOffset":653,"endOffset":657},{"placeId":"550710","name":"Mysians","startOffset":715,"endOffset":722},{"placeId":"550547","name":"Teucrians","startOffset":727,"endOffset":736},{"placeId":"550595","name":"Trojan","startOffset":754,"endOffset":760},{"placeId":"520977","name":"Bosporus","startOffset":777,"endOffset":785},{"placeId":"1001889","name":"Thracians","startOffset":817,"endOffset":826},{"placeId":"1046","name":"Ionian sea","startOffset":849,"endOffset":859},{"placeId":"541022","name":"Peneus","startOffset":900,"endOffset":906}]},{"id":21,"text":"All these expeditions and whatever others have happened in addition could not together be compared with this single one. For what nation did Xerxes not lead from Asia against Hellas? What water did not fail when being drunk up, except only the greatest rivers? [2] Some people supplied him with ships, some were enrolled in his infantry, some were assigned the provision of horsemen, others of horse-bearing transports to follow the army, and others again of warships for the bridges, or of food and ships.","places":[{"placeId":"geonames-390903","name":"Hellas","startOffset":175,"endOffset":181}]},{"id":22,"text":"Since those who had earlier attempted to sail around Athos had suffered shipwreck, for about three years preparations had been underway there. Triremes were anchored off Elaeus in the Chersonese; with these for their headquarters, all sorts of men in the army were compelled by whippings to dig a canal, coming by turns to the work; the inhabitants about Athos also dug. [2] Bubares son of Megabazus and Artachaees son of Artaeus, both Persians, were the overseers of the workmen. Athos is a great and famous mountain, running out into the sea and inhabited by men. At the mountain's landward end it is in the form of a peninsula, and there is an isthmus about twelve stadia wide; here is a place of level ground or little hills, from the sea by Acanthus to the sea opposite Torone. [3] On this isthmus which is at the end of Athos, there stands a Greek town, Sane; there are others situated seaward of Sane and landward of Athos, and the Persian now intended to make them into island and not mainland towns; they are Dion, Olophyxus, Acrothoum, Thyssus, and Cleonae.","places":[{"placeId":"501365","name":"Athos","startOffset":53,"endOffset":58},{"placeId":"501411","name":"Elaeus","startOffset":170,"endOffset":176},{"placeId":"501386","name":"Chersonese","startOffset":184,"endOffset":194},{"placeId":"501365","name":"Athos","startOffset":355,"endOffset":360},{"placeId":"geonames-130758","name":"Persians","startOffset":436,"endOffset":444},{"placeId":"501365","name":"Athos","startOffset":481,"endOffset":486},{"placeId":"501339","name":"Acanthus","startOffset":746,"endOffset":754},{"placeId":"501646","name":"Torone","startOffset":775,"endOffset":781},{"placeId":"501365","name":"Athos","startOffset":826,"endOffset":831},{"placeId":"geonames-390903","name":"Greek","startOffset":848,"endOffset":853},{"placeId":"491715","name":"Sane","startOffset":860,"endOffset":864},{"placeId":"491715","name":"Sane","startOffset":903,"endOffset":907},{"placeId":"501365","name":"Athos","startOffset":924,"endOffset":929},{"placeId":"geonames-130758","name":"Persian","startOffset":939,"endOffset":946},{"placeId":"491572","name":"Dion","startOffset":1018,"endOffset":1022},{"placeId":"501535","name":"Olophyxus","startOffset":1024,"endOffset":1033},{"placeId":"501343","name":"Acrothoum","startOffset":1035,"endOffset":1044},{"placeId":"501643","name":"Thyssus","startOffset":1046,"endOffset":1053},{"placeId":"501469","name":"Cleonae","startOffset":1059,"endOffset":1066}]},{"id":23,"text":"These are the towns situated on Athos. The foreigners dug as follows,14 dividing up the ground by nation: they made a straight line near the town of Sane; when the channel had been dug to some depth, some men stood at the bottom of it and dug, others took the dirt as it was dug out and delivered it to yet others that stood higher on stages, and they again to others as they received it, until they came to those that were highest; these carried it out and threw it away. [2] For all except the Phoenicians, the steep sides of the canal caved in, doubling their labor; since they made the span the same breadth at its mouth and at the bottom, this was bound to happen. [3] But the Phoenicians showed the same skill in this as in all else they do; taking in hand the portion that fell to them, they dug by making the topmost span of the canal as wide again as the canal was to be, and narrowed it as they worked lower, until at the bottom their work was of the same span as that of the others. [4] There is a meadow there, where they made a place for buying and marketing; much ground grain frequently came to them from Asia.","places":[{"placeId":"501365","name":"Athos","startOffset":32,"endOffset":37},{"placeId":"491715","name":"Sane","startOffset":149,"endOffset":153},{"placeId":"678334","name":"Phoenicians","startOffset":496,"endOffset":507},{"placeId":"678334","name":"Phoenicians","startOffset":682,"endOffset":693}]},{"id":24,"text":"As far as I can judge by conjecture, Xerxes gave the command for this digging out of pride, wishing to display his power and leave a memorial; with no trouble they could have drawn their ships across the isthmus, yet he ordered them to dig a canal from sea to sea, wide enough to float two triremes rowed abreast. The same men who were assigned the digging were also assigned to join the banks of the river Strymon by a bridge.","places":[{"placeId":"501629","name":"Strymon","startOffset":407,"endOffset":414}]},{"id":25,"text":"Thus Xerxes did this. He assigned the Phoenicians and Egyptians to make ropes of papyrus and white flax for the bridges,15 and to store provisions for his army, so that neither the army nor the beasts of burden would starve on the march to Hellas. [2] After making inquiry, he ordered them to store it in the most fitting places, carrying it to the various places from all parts of Asia in cargo ships and transports. They brought most of it to the White Headland (as it is called) in Thrace; some were dispatched to Tyrodiza in the Perinthian country or to Doriscus, others to Eion on the Strymon or to Macedonia.","places":[{"placeId":"678334","name":"Phoenicians","startOffset":38,"endOffset":49},{"placeId":"981503","name":"Egyptians","startOffset":54,"endOffset":63},{"placeId":"geonames-390903","name":"Hellas","startOffset":240,"endOffset":246},{"placeId":"501629","name":"Strymon","startOffset":590,"endOffset":597},{"placeId":"491656","name":"Macedonia","startOffset":604,"endOffset":613}]},{"id":26,"text":"While these worked at their appointed task, all the land force had been mustered and was marching with Xerxes to Sardis, setting forth from Critalla in Cappadocia, which was the place appointed for gathering all the army that was to march with Xerxes himself by land. [2] Now which of his governors received the promised gifts from the king for bringing the best-equipped army, I cannot say; I do not even know if the matter was ever determined. [3] When they had crossed the river Halys and entered Phrygia, they marched through that country to Celaenae,16 where rises the source of the river Maeander and of another river no smaller, which is called Cataractes; it rises right in the market-place of Celaenae and issues into the Maeander. The skin of Marsyas the Silenus also hangs there; the Phrygian story tells that it was flayed off him and hung up by Apollo.17","places":[{"placeId":"550867","name":"Sardis","startOffset":113,"endOffset":119},{"placeId":"609502","name":"Phrygian","startOffset":795,"endOffset":803}]},{"id":27,"text":"In this city Pythius son of Atys, a Lydian, sat awaiting them; he entertained Xerxes himself and all the king's army with the greatest hospitality, and declared himself willing to provide money for the war. [2] When Pythius offered the money, Xerxes asked the Persians present who this Pythius was and how much wealth he possessed in making the offer. They said, O king, this is the one who gave your father Darius the gift of a golden plane-tree and vine; he is now the richest man we know of after you.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":260,"endOffset":268}]},{"id":28,"text":"Xerxes marvelled at this last saying and next himself asked Pythius how much wealth he had. O king, said Pythius, I will not conceal the quantity of my property from you, nor pretend that I do not know; I know and will tell you the exact truth. [2] As soon as I learned that you were coming down to the Greek sea, I wanted to give you money for the war, so I inquired into the matter, and my reckoning showed me that I had two thousand talents of silver, and four million Daric staters of gold,18 lacking seven thousand. [3] All this I freely give to you; for myself, I have a sufficient livelihood from my slaves and my farms.","places":[{"placeId":"geonames-390903","name":"Greek","startOffset":306,"endOffset":311}]},{"id":29,"text":"Thus he spoke. Xerxes was pleased with what he said and replied: My Lydian friend, since I came out of Persia I have so far met with no man who was willing to give hospitality to my army, nor who came into my presence unsummoned and offered to furnish money for the war, besides you. [2] But you have entertained my army nobly and offer me great sums. In return for this I give you these privileges: I make you my friend, and out of my own wealth I give you the seven thousand staters which will complete your total of four million, so that your four million not lack the seven thousand and the even number be reached by my completing it. [3] Remain in possession of what you now possess, and be mindful to be always such as you are; neither for the present nor in time will you regret what you now do.","places":[{"placeId":"geonames-130758","name":"Persia","startOffset":104,"endOffset":110}]},{"id":30,"text":"Xerxes said this and made good his words, then journeyed ever onward. Passing by the Phrygian town called Anaua, and the lake from which salt is obtained, he came to Colossae, a great city in Phrygia; there the river Lycus plunges into a cleft in the earth and disappears,19 until it reappears about five stadia away; this river issues into the Maeander. [2] From Colossae the army held its course for the borders of Phrygia and Lydia, and came to the city of Cydrara, where there stands a pillar set up by Croesus which marks the boundary with an inscription.","places":[{"placeId":"609502","name":"Phrygian","startOffset":85,"endOffset":93}]},{"id":31,"text":"Passing from Phrygia into Lydia, he came to the place where the roads part; the road on the left leads to Caria, the one on the right to Sardis; on the latter the traveller must cross the river Maeander and pass by the city of Callatebus, where craftsmen make honey out of wheat and tamarisks. Xerxes went by this road and found a plane-tree, which he adorned with gold because of its beauty, and he assigned one of his immortals to guard it. On the next day he reached the city of the Lydians.","places":[{"placeId":"550867","name":"Sardis","startOffset":137,"endOffset":143}]},{"id":32,"text":"After he arrived in Sardis, he first sent heralds to Hellas to demand earth and water and to command the preparation of meals for the king. He sent demands for earth everywhere except to Athens and Lacedaemon. The reason for his sending for earth and water the second time was this: he fully believed that whoever had not previously given it to Darius' messengers would now be compelled to give by fear; so he sent out of desire to know this for certain.","places":[{"placeId":"550867","name":"Sardis","startOffset":20,"endOffset":26},{"placeId":"579885","name":"Athens","startOffset":187,"endOffset":193},{"placeId":"570406","name":"Lacedaemon","startOffset":198,"endOffset":208}]},{"id":33,"text":"After this he prepared to march to Abydos; meanwhile his men were bridging the Hellespont from Asia to Europe. On the Chersonese, which is on the Hellespont, between the city of Sestus and Madytus there is a broad headland20 running out into the sea opposite Abydos. It was here that not long afterwards the Athenians, when Xanthippus son of Ariphron was their general, took Artayctes, a Persian and the governor of Sestus, and crucified him alive; he had been in the habit of bringing women right into the temple of Protesilaus at Elaeus and doing impious deeds there.","places":[{"placeId":"501434","name":"Hellespont","startOffset":79,"endOffset":89},{"placeId":"501386","name":"Chersonese","startOffset":118,"endOffset":128},{"placeId":"501434","name":"Hellespont","startOffset":146,"endOffset":156},{"placeId":"579885","name":"Athenians","startOffset":308,"endOffset":317},{"placeId":"geonames-130758","name":"Persian","startOffset":388,"endOffset":395},{"placeId":"501411","name":"Elaeus","startOffset":532,"endOffset":538}]},{"id":34,"text":"The men who had been given this assignment made bridges starting from Abydos across to that headland; the Phoenicians one of flaxen cables, and the Egyptians a papyrus one. From Abydos to the opposite shore it is a distance of seven stadia.21 But no sooner had the strait been bridged than a great storm swept down, breaking and scattering everything.","places":[{"placeId":"678334","name":"Phoenicians","startOffset":106,"endOffset":117},{"placeId":"981503","name":"Egyptians","startOffset":148,"endOffset":157}]},{"id":35,"text":"When Xerxes heard of this, he was very angry and commanded that the Hellespont be whipped with three hundred lashes, and a pair of fetters be thrown into the sea. I have even heard that he sent branders with them to brand the Hellespont. [2] He commanded them while they whipped to utter words outlandish and presumptuous, Bitter water, our master thus punishes you, because you did him wrong though he had done you none. Xerxes the king will pass over you, whether you want it or not; in accordance with justice no one offers you sacrifice, for you are a turbid and briny river. [3] He commanded that the sea receive these punishments and that the overseers of the bridge over the Hellespont be beheaded.","places":[{"placeId":"501434","name":"Hellespont","startOffset":68,"endOffset":78},{"placeId":"501434","name":"Hellespont","startOffset":226,"endOffset":236},{"placeId":"501434","name":"Hellespont","startOffset":684,"endOffset":694}]},{"id":36,"text":"So this was done by those who were appointed to the thankless honor, and new engineers set about making the bridges. They made the bridges as follows: in order to lighten the strain of the cables, they placed fifty-oared ships and triremes alongside each other, three hundred and sixty to bear the bridge nearest the Euxine sea, and three hundred and fourteen to bear the other; all lay obliquely to the line of the Pontus and parallel with the current of the Hellespont.22 [2] After putting the ships together they let down very great anchors, both from the end of the ships on the Pontus side to hold fast against the winds blowing from within that sea, and from the other end, towards the west and the Aegean, to hold against the west and south winds. They left a narrow opening to sail through in the line of fifty-oared ships and triremes, that so whoever wanted to could sail by small craft to the Pontus or out of it. [3] After doing this, they stretched the cables from the land, twisting them taut with wooden windlasses; they did not as before keep the two kinds apart, but assigned for each bridge two cables of flax and four of papyrus. [4] All these had the same thickness and fine appearance, but the flaxen were heavier in proportion, for a cubit of them weighed a talent.23 [5] When the strait was thus bridged, they sawed logs of wood to a length equal to the breadth of the floating supports,24 and laid them in order on the taut cables; after placing them together they then made them fast. After doing this, they carried brushwood onto the bridge; when this was all laid in order they heaped earth on it and stamped it down; then they made a fence on either side, so that the beasts of burden and horses not be frightened by the sight of the sea below them.","places":[{"placeId":"501434","name":"Hellespont","startOffset":460,"endOffset":470}]},{"id":37,"text":"When the bridges and the work at Athos were ready, and both the dikes at the canal's entrances, built to prevent the surf from silting up the entrances of the dug passage, and the canal itself were reported to be now completely finished, the army then wintered. At the beginning of spring25 the army made ready and set forth from Sardis to march to Abydos. [2] As it was setting out, the sun left his place in the heaven and was invisible, although the sky was without clouds and very clear, and the day turned into night. When Xerxes saw and took note of that, he was concerned and asked the Magi what the vision might signify. [4] They declared to him that the god was showing the Greeks the abandonment of their cities; for the sun (they said) was the prophet of the Greeks, as the moon was their own. Xerxes rejoiced exceedingly to hear that and continued on his march.","places":[{"placeId":"501365","name":"Athos","startOffset":33,"endOffset":38},{"placeId":"550867","name":"Sardis","startOffset":330,"endOffset":336},{"placeId":"geonames-390903","name":"Greeks","startOffset":683,"endOffset":689},{"placeId":"geonames-390903","name":"Greeks","startOffset":770,"endOffset":776}]},{"id":38,"text":"As Xerxes led his army away, Pythius the Lydian, frightened by the heavenly vision and encouraged by the gifts that he had received, came to Xerxes and said, Master, I have a favor to ask that I desire of you, easy for you to grant and precious for me to receive. [2] Xerxes supposed that Pythius would demand anything rather than what he did ask and answered that he would grant the request, bidding him declare what he desired. When Pythius heard this, he took courage and said: Master, I have five sons, and all of them are constrained to march with you against Hellas. [3] I pray you, O king, take pity on me in my advanced age, and release one of my sons, the eldest, from service, so that he may take care of me and of my possessions; take the four others with you, and may you return back with all your plans accomplished.","places":[]},{"id":39,"text":"Xerxes became very angry and thus replied: Villain, you see me marching against Hellas myself, and taking with me my sons and brothers and relations and friends; do you, my slave, who should have followed me with all your household and your very wife, speak to me of your son? Be well assured of this, that a man's spirit dwells in his ears; when it hears good words it fills the whole body with delight, but when it hears the opposite it swells with anger. [2] When you did me good service and promised more, you will never boast that you outdid your king in the matter of benefits; and now that you have turned aside to the way of shamelessness, you will receive a lesser requital than you merit. You and four of your sons are saved by your hospitality; but you shall be punished by the life of that one you most desire to keep. [3] With that reply, he immediately ordered those who were assigned to do these things to find the eldest of Pythius sons and cut him in half, then to set one half of his body on the right side of the road and the other on the left, so that the army would pass between them.","places":[]},{"id":40,"text":"This they did, and the army passed between. First went the baggage train and the beasts of burden, and after them a mixed army of all sorts of nations, not according to their divisions but all mingled together; when more than half had passed there was a space left, and these did not come near the king. [2] After that, first came a thousand horsemen, chosen out of all Persians; next, a thousand spearmen, picked men like the others, carrying their spears reversed; and after them ten horses of the breed called Nesaean, equipped most splendidly. [3] The horses are called Nesaean because there is in Media a wide plain of that name, where the great horses are bred. [4] Behind these ten horses was the place of the sacred chariot of Zeus,26 drawn by eight white horses, with the charioteer following the horses on foot and holding the reins; for no mortal man may mount into that seat. After these came Xerxes himself in a chariot drawn by Nesaean horses; beside him was his charioteer, whose name was Patiramphes, the son of Otanes, a Persian.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":370,"endOffset":378},{"placeId":"903080","name":"Media","startOffset":602,"endOffset":607},{"placeId":"geonames-130758","name":"Persian","startOffset":1038,"endOffset":1045}]},{"id":41,"text":"In this way Xerxes rode out from Sardis; but whenever the thought took him he would alight from the chariot into a carriage. Behind him came a thousand spearmen of the best and noblest blood of Persia, carrying their spears in the customary manner; after them a thousand picked Persian horsemen, and after the horse ten thousand that were foot soldiers, chosen out of the rest of the Persians. [3] One thousand of these had golden pomegranates on their spear-shafts instead of a spike, and surrounded the rest; the nine thousand who were inside them had silver pomegranates. Those who held their spears reversed also carried golden pomegranates, and those following nearest to Xerxes had apples of gold. After the ten thousand came ten thousand Persian horsemen in array. After these there was a space of two stadia, and then the rest of the multitude followed all mixed together.","places":[{"placeId":"550867","name":"Sardis","startOffset":33,"endOffset":39},{"placeId":"geonames-130758","name":"Persia","startOffset":194,"endOffset":200},{"placeId":"geonames-130758","name":"Persian","startOffset":278,"endOffset":285},{"placeId":"geonames-130758","name":"Persians","startOffset":384,"endOffset":392},{"placeId":"geonames-130758","name":"Persian","startOffset":745,"endOffset":752}]},{"id":42,"text":"From Lydia the army took its course to the river Caicus and the land of Mysia; leaving the Caicus, they went through Atarneus to the city of Carene, keeping the mountain of Cane27 on the left. From there they journeyed over the plain of Thebe, passing the city of Adramytteum and the Pelasgian city of Antandrus. [2] Then they came into the territory of Ilium, with Ida on their left. When they had halted for the night at the foot of Ida, a storm of thunder and lightning fell upon them, killing a great crowd of them there.","places":[]},{"id":43,"text":"When the army had come to the river Scamander, which was the first river after the beginning of their march from Sardis that fell short of their needs and was not sufficient for the army and the cattle to drinkarriving at this river, Xerxes ascended to the citadel of Priam, having a desire to see it. [2] After he saw it and asked about everything there, he sacrificed a thousand cattle to Athena of Ilium, and the Magi offered libations to the heroes. After they did this, a panic fell upon the camp in the night. When it was day they journeyed on from there, keeping on their left the cities of Rhoetium and Ophryneum and Dardanus, which borders Abydos,28 and on their right the Teucrian Gergithae.","places":[{"placeId":"550867","name":"Sardis","startOffset":113,"endOffset":119}]},{"id":44,"text":"When they were at Abydos, Xerxes wanted to see the whole of his army. A lofty seat of white stone had been set up for him on a hill29 there for this very purpose, built by the people of Abydos at the king's command. There he sat and looked down on the seashore, viewing his army and his fleet; as he viewed them he desired to see the ships contend in a race. They did so, and the Phoenicians of Sidon won; Xerxes was pleased with the race and with his expedition.","places":[{"placeId":"678334","name":"Phoenicians","startOffset":380,"endOffset":391}]},{"id":45,"text":"When he saw the whole Hellespont covered with ships, and all the shores and plains of Abydos full of men, Xerxes first declared himself blessed, and then wept.","places":[{"placeId":"501434","name":"Hellespont","startOffset":22,"endOffset":32}]},{"id":46,"text":"His uncle Artabanus perceived this, he who in the beginning had spoken his mind freely and advised Xerxes not to march against Hellas. Marking how Xerxes wept, he questioned him and said, O king, what a distance there is between what you are doing now and a little while ago! After declaring yourself blessed you weep. [2] Xerxes said, I was moved to compassion when I considered the shortness of all human life, since of all this multitude of men not one will be alive a hundred years from now. [3] Artabanus answered, In one life we have deeper sorrows to bear than that. Short as our lives are, there is no human being either here or elsewhere so fortunate that it will not occur to him, often and not just once, to wish himself dead rather than alive. Misfortunes fall upon us and sicknesses trouble us, so that they make life, though short, seem long. [4] Life is so miserable a thing that death has become the most desirable refuge for humans; the god is found to be envious in this, giving us only a taste of the sweetness of living.","places":[]},{"id":47,"text":"Xerxes answered and said, Artabanus, human life is such as you define it to be. Let us speak no more of that, nor remember evils in our present prosperous estate. But tell me this: if you had not seen the vision in your dream so clearly, would you still have held your former opinion and advised me not to march against Hellas, or would you have changed your mind? Come, tell me this truly. [2] Artabanus answered and said, O king, may the vision that appeared in my dream bring such an end as we both desire! But I am even now full of fear and beside myself for many reasons, especially when I see that the two greatest things in the world are your greatest enemies.","places":[]},{"id":48,"text":"Xerxes made this response: Are you possessed? What are these two things that you say are my greatest enemies? Is there some fault with the numbers of my land army? Does it seem that the Greek army will be many times greater than ours? Or do you think that our navy will fall short of theirs? Or that the fault is in both? If our power seems to you to lack anything in this regard, it would be best to muster another army as quickly as possible.","places":[{"placeId":"geonames-390903","name":"Greek","startOffset":187,"endOffset":192}]},{"id":49,"text":"Artabanus answered and said, O king, there is no fault that any man of sound judgment could find either with this army or with the number of your ships; and if you gather more, those two things I speak of become even much more your enemies. These two are the land and the sea. [2] The sea has nowhere any harbor, as I conjecture, that will be able to receive this navy and save your ships if a storm arise. Yet there has to be not just one such harbor, but many of them all along the land you are sailing by. [3] Since there are no harbors able to receive you, understand that men are the subjects and not the rulers of their accidents. I have spoken of one of the two, and now I will tell you of the other. [4] The land is your enemy in this way: if nothing is going to stand in your way and hinder you, the land becomes more your enemy the further you advance, constantly unaware of what lies beyond; no man is ever satisfied with success. [5] So I say that if no one opposes you, the increase of your territory and the time passed in getting it will breed famine. The best man is one who is timid while making plans because he takes into account all that may happen to him, but is bold in action.","places":[]},{"id":50,"text":"Xerxes answered, Artabanus, you define these matters reasonably. But do not fear everything, nor take account of all alike; If you wanted to take everything equally into account on every occasion that happens, you would never do anything; it is better to do everything boldly and suffer half of what you dread than to fear all chances and so never suffer anything. [2] But if you quarrel with whatever is said yet cannot put forth a secure position, you must be proved as wrong on your part as he who holds the contrary opinion. In this both are alike: how can someone who is only human know where there is security? I think it is impossible. Those who have the will to act most often win the rewards, not those who hesitate and take account of all chances. [3] You see what power Persia has attained. Now if those kings who came before me had held such opinions as yours, or if they had not held them but had had advisers like you, you would never have seen our fortunes at their present height; but as it is those kings ran the risks and advanced them to this height. [4] Great successes are not won except by great risks. So we will do as they did; we are travelling in the fairest season of the year, and we will return home the conquerors of all Europe without suffering famine or any other harm anywhere. First, we carry ample provisions with us on our march; second, we will have the food of those whose land and nation we invade; for we are marching against men who are tillers of the soil, not nomads.","places":[{"placeId":"geonames-130758","name":"Persia","startOffset":782,"endOffset":788}]},{"id":51,"text":"Then said Artabanus: O king, I see that you will not allow us to fear any danger. But take from me this advice, as there is need for much speaking when our affairs are so great. [2] Cyrus son of Cambyses subdued and made tributary to Persia all Ionians except only the Athenians. I advise you by no means to lead these Ionians against the land of their fathers, since even without their aid we are well able to overcome our enemies. If they come with our army, they must either behave very unjustly by enslaving their mother city, or very justly by aiding it to be free. [3] If they deal very unjustly they bring us no great advantage, but by dealing very justly they may well do great harm to your army. Take to heart the truth of that ancient saying, that the end of every matter is not revealed at its beginning.","places":[{"placeId":"geonames-130758","name":"Persia","startOffset":235,"endOffset":241},{"placeId":"550597","name":"Ionians","startOffset":246,"endOffset":253},{"placeId":"579885","name":"Athenians","startOffset":270,"endOffset":279},{"placeId":"550597","name":"Ionians","startOffset":320,"endOffset":327}]},{"id":52,"text":"Xerxes answered, Artabanus, in all your pronouncements you are most mistaken when you fear that the Ionians might change sides; we have the surest guarantee for them, and you and all who marched with Darius against the Scythians can bear witness. They had the power to destroy or to save the whole Persian army, and they gave proof of their justice and faithfulness, with no evil intent. [2] Moreover, since they have left their children and wives and possessions in our country, we need not consider it even possible that they will make any violent change. So be rid of that fear; keep a stout heart and guard my household and tyranny; to you alone I entrust the symbols of my kingship.","places":[{"placeId":"550597","name":"Ionians","startOffset":101,"endOffset":108},{"placeId":"1273","name":"Scythians","startOffset":220,"endOffset":229},{"placeId":"geonames-130758","name":"Persian","startOffset":299,"endOffset":306}]},{"id":53,"text":"Xerxes spoke thus and sent Artabanus away to Susa. He next sent for the most notable among the Persians, and when they were present he said, Persians, I have assembled you to make this demand, that you bear yourselves bravely and never sully the great and glorious former achievements of the Persians. Let us each and all be zealous, for the good that we seek is common to all. [2] For these reasons I bid you set your hands to the war strenuously; I know that we march against valiant men, and if we overcome them it is certain that no other human army will ever withstand us. Let us now cross over, after praying to the gods who hold Persia for their allotted realm.","places":[{"placeId":"912936","name":"Susa","startOffset":45,"endOffset":49},{"placeId":"geonames-130758","name":"Persians","startOffset":95,"endOffset":103},{"placeId":"geonames-130758","name":"Persians","startOffset":142,"endOffset":150},{"placeId":"geonames-130758","name":"Persians","startOffset":293,"endOffset":301},{"placeId":"geonames-130758","name":"Persia","startOffset":637,"endOffset":643}]},{"id":54,"text":"All that day they made preparations for the crossing. On the next they waited until they could see the sun rise, burning all kinds of incense on the bridges and strewing the road with myrtle boughs. [2] At sunrise Xerxes poured a libation from a golden phial into the sea, praying to the sun that no accident might befall him which would keep him from subduing Europe before he reached its farthest borders. After the prayer, he cast the phial into the Hellespont, and along with it a golden bowl, and a Persian sword which they call acinaces.30 [3] As for these, I cannot rightly determine whether he cast them into the sea for offerings to the sun, or repented having whipped the Hellespont and gave gifts to the sea as atonement.","places":[{"placeId":"501434","name":"Hellespont","startOffset":453,"endOffset":463},{"placeId":"geonames-130758","name":"Persian","startOffset":504,"endOffset":511},{"placeId":"501434","name":"Hellespont","startOffset":684,"endOffset":694}]},{"id":55,"text":"When they had done this they crossed over, the foot and horse all by the bridge nearest to the Pontus, the beasts of burden and the service train by the bridge towards the Aegean. [2] The ten thousand Persians, all wearing garlands, led the way, and after them came the mixed army of diverse nations. All that day these crossed; on the next, first crossed the horsemen and the ones who carried their spears reversed; these also wore garlands. [3] After them came the sacred horses and the sacred chariot, then Xerxes himself and the spearmen and the thousand horse, and after them the rest of the army. Meanwhile the ships put out and crossed to the opposite shore. But I have also heard that the king crossed last of all.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":201,"endOffset":209}]},{"id":56,"text":"When Xerxes had passed over to Europe, he viewed his army crossing under the lash. Seven days and seven nights it was in crossing, with no pause. [2] It is said that when Xerxes had now crossed the Hellespont, a man of the Hellespont cried, O Zeus, why have you taken the likeness of a Persian man and changed your name to Xerxes, leading the whole world with you to remove Hellas from its place? You could have done that without these means.","places":[{"placeId":"501434","name":"Hellespont","startOffset":198,"endOffset":208},{"placeId":"501434","name":"Hellespont","startOffset":223,"endOffset":233},{"placeId":"geonames-130758","name":"Persian","startOffset":287,"endOffset":294}]},{"id":57,"text":"When all had passed over and were ready for the road, a great portent appeared among them. Xerxes took no account of it, although it was easy to interpret: a mare gave birth to a hare. The meaning of it was easy to guess: Xerxes was to march his army to Hellas with great pomp and pride, but to come back to the same place fleeing for his life. [2] There was another portent that was shown to him at Sardis: a mule gave birth to a mule that had double genitals, both male and female, the male above the other. But he took no account of either sign and journeyed onward; the land army was with him.","places":[]},{"id":58,"text":"His navy sailed out of the Hellespont and travelled along the land, going across from the land army. [2] The ships sailed westwards, laying their course for the headland of Sarpedon, where Xerxes had ordered them to go and wait for him; the army of the mainland travelled towards the east31 and the sunrise through the Chersonese, with the tomb of Athamas' daughter Helle on its right and the town of Cardia on its left, marching through the middle of a city called Agora. [3] From there they rounded the head of the Black Bay (as it is called) and crossed the Black River, which could not hold its own then against the army, but gave outcrossing this river, which gives its name to the bay, they went westwards, past the Aeolian city of Aenus and the marsh of Stentor, until they came to Doriscus.","places":[{"placeId":"501434","name":"Hellespont","startOffset":27,"endOffset":37},{"placeId":"501386","name":"Chersonese","startOffset":319,"endOffset":329}]},{"id":59,"text":"The territory of Doriscus is in Thrace, a wide plain by the sea, and through it flows a great river, the Hebrus; here had been built that royal fortress which is called Doriscus, and a Persian guard had been posted there by Darius ever since the time of his march against Scythia. [2] It seemed to Xerxes to be a fit place for him to arrange and number his army, and he did so. All the ships had now arrived at Doriscus, and the captains at Xerxes' command brought them to the beach near Doriscus, where stands the Samothracian city of Sane, and Zone; at the end is Serreum, a well-known headland. This country was in former days possessed by the Cicones. [3] To this beach they brought in their ships and hauled them up for rest. Meanwhile Xerxes made a reckoning of his forces at Doriscus.","places":[{"placeId":"geonames-130758","name":"Persian","startOffset":185,"endOffset":192},{"placeId":"491715","name":"Sane","startOffset":536,"endOffset":540}]},{"id":60,"text":"I cannot give the exact number that each part contributed to the total, for there is no one who tells us that; but the total of the whole land army was shown to be one million and seven hundred thousand. [2] They were counted in this way: ten thousand men were collected in one place, and when they were packed together as closely as could be a line was drawn around them; when this was drawn, the ten thousand were sent away and a wall of stones was built on the line reaching up to a man's navel; [3] when this was done, others were brought into the walled space, until in this way all were numbered. When they had been numbered, they were marshalled by nations.","places":[]},{"id":61,"text":"The men who served in the army were the following: the Persians were equipped in this way: they wore on their heads loose caps called tiaras, and on their bodies embroidered sleeved tunics, with scales of iron like the scales of fish in appearance, and trousers on their legs; for shields they had wicker bucklers, with quivers hanging beneath them; they carried short spears, long bows, and reed arrows, and daggers that hung from the girdle by the right thigh. [2] Their commander was Otanes, son of Amestris and father of Xerxes' wife. They were formerly called by the Greeks Cephenes, but by themselves and their neighbors Artaei. [3] When Perseus son of Danae and Zeus had come to Cepheus son of Belus and married his daughter Andromeda, a son was born to him whom he called Perses, and he left him there; for Cepheus had no male offspring; it was from this Perses that the Persians took their name.32","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":55,"endOffset":63},{"placeId":"geonames-390903","name":"Greeks","startOffset":572,"endOffset":578},{"placeId":"geonames-130758","name":"Persians","startOffset":879,"endOffset":887}]},{"id":62,"text":"The Medes in the army were equipped like the Persians; indeed, that fashion of armor is Median, not Persian. Their commander was Tigranes, an Achaemenid. The Medes were formerly called by everyone Arians,33 but when the Colchian woman Medea came from Athens to the Arians they changed their name, like the Persians. This is the Medes' own account of themselves. [2] The Cissians in the army were equipped like the Persians, but they wore turbans instead of caps. Their commander was Anaphes son of Otanes. The Hyrcanians34 were armed like the Persians; their leader was Megapanus, who was afterwards the governor of Babylon.","places":[{"placeId":"903080","name":"Medes","startOffset":4,"endOffset":9},{"placeId":"geonames-130758","name":"Persians","startOffset":45,"endOffset":53},{"placeId":"903080","name":"Media","startOffset":88,"endOffset":93},{"placeId":"geonames-130758","name":"Persian","startOffset":100,"endOffset":107},{"placeId":"903080","name":"Medes","startOffset":158,"endOffset":163},{"placeId":"579885","name":"Athens","startOffset":251,"endOffset":257},{"placeId":"geonames-130758","name":"Persians","startOffset":306,"endOffset":314},{"placeId":"903080","name":"Medes","startOffset":328,"endOffset":333},{"placeId":"geonames-130758","name":"Persians","startOffset":414,"endOffset":422},{"placeId":"geonames-130758","name":"Persians","startOffset":543,"endOffset":551}]},{"id":63,"text":"The Assyrians in the army wore on their heads helmets of twisted bronze made in an outlandish fashion not easy to describe. They carried shields and spears and daggers of Egyptian fashion, and also wooden clubs studded with iron, and they wore linen breastplates. They are called by the Greeks Syrians, but the foreigners called them Assyrians. With them were the Chaldeans. Their commander was Otaspes son of Artachaees.","places":[{"placeId":"29492","name":"Assyrians","startOffset":4,"endOffset":13},{"placeId":"981503","name":"Egyptian","startOffset":171,"endOffset":179},{"placeId":"geonames-390903","name":"Greeks","startOffset":287,"endOffset":293},{"placeId":"29492","name":"Assyrians","startOffset":334,"endOffset":343}]},{"id":64,"text":"The Bactrians in the army wore a headgear very similar to the Median, carrying their native reed bows and short spears. [2] The Sacae, who are Scythians, had on their heads tall caps, erect and stiff and tapering to a point; they wore trousers, and carried their native bows, and daggers, and also axes which they call sagaris. These were Amyrgian Scythians, but were called Sacae; that is the Persian name for all Scythians. The commander of the Bactrians and Sacae was Hystaspes, son of Darius and Cyrus' daughter Atossa.","places":[{"placeId":"903080","name":"Media","startOffset":62,"endOffset":67},{"placeId":"60021","name":"Sacae","startOffset":128,"endOffset":133},{"placeId":"1273","name":"Scythians","startOffset":143,"endOffset":152},{"placeId":"1273","name":"Scythians","startOffset":350,"endOffset":359},{"placeId":"60021","name":"Sacae","startOffset":377,"endOffset":382},{"placeId":"geonames-130758","name":"Persian","startOffset":396,"endOffset":403},{"placeId":"1273","name":"Scythians","startOffset":417,"endOffset":426},{"placeId":"60021","name":"Sacae","startOffset":463,"endOffset":468}]},{"id":65,"text":"The Indians wore garments of tree-wool,35 and carried reed bows and iron-tipped reed arrows. Such was their equipment; they were appointed to march under the command of Pharnazathres son of Artabates.","places":[{"placeId":"50004","name":"Indians","startOffset":4,"endOffset":11}]},{"id":66,"text":"The Arians were equipped with Median bows, but in all else like the Bactrians; their commander was Sisamnes son of Hydarnes. The Parthians, Chorasmians, Sogdians, Gandarians, and Dadicae in the army had the same equipment as the Bactrians. [2] The Parthians and Chorasmians had for their commander Artabazus son of Pharnaces, the Sogdians Azanes son of Artaeus, the Gandarians and Dadicae Artyphius son of Artabanus.","places":[{"placeId":"903080","name":"Media","startOffset":30,"endOffset":35}]},{"id":67,"text":"The Caspians in the army wore cloaks and carried their native reed bows and short swords. Such was their equipment; their leader was Ariomardus, brother of Artyphius. The Sarangae were conspicuous in their dyed garments and knee-high boots, carrying bows and Median spears. Their commander was Pherendates son of Megabazus. [3] The Pactyes wore cloaks and carried their native bows and daggers; their commander was Artayntes son of Ithamitres.","places":[{"placeId":"903080","name":"Media","startOffset":259,"endOffset":264}]},{"id":68,"text":"The Utians and Mycians and Paricanians were equipped like the Pactyes; the Utians and Mycians had for their commander Arsamenes son of Darius, the Paricanians Siromitres son of Oeobazus.","places":[]},{"id":69,"text":"The Arabians wore mantles girded up, and carried at their right side long bows curving backwards.36 The Ethiopians were wrapped in skins of leopards and lions, and carried bows made of palmwood strips, no less than four cubits long, and short arrows pointed not with iron but with a sharpened stone that they use to carve seals; furthermore, they had spears pointed with a gazelle's horn sharpened like a lance, and also studded clubs. [2] When they went into battle they painted half their bodies with gypsum and the other half with vermilion. The Arabians and the Ethiopians who dwell above Egypt had as commander Arsames, the son of Darius and Artystone daughter of Cyrus, whom Darius loved best of his wives; he had an image made of her of hammered gold.","places":[{"placeId":"39274","name":"Ethiopians","startOffset":104,"endOffset":114},{"placeId":"39274","name":"Ethiopians","startOffset":566,"endOffset":576},{"placeId":"981503","name":"Egypt","startOffset":593,"endOffset":598}]},{"id":70,"text":"The Ethiopians above Egypt and the Arabians had Arsames for commander, while the Ethiopians of the east37 (for there were two kinds of them in the army) served with the Indians; they were not different in appearance from the others, only in speech and hair: the Ethiopians from the east are straight-haired, but the ones from Libya have the woolliest hair of all men. [2] These Ethiopians of Asia were for the most part armed like the Indians; but they wore on their heads the skins of horses' foreheads, stripped from the head with ears and mane; the mane served them for a crest, and they wore the horses' ears stiff and upright; for shields they had bucklers of the skin of cranes.","places":[{"placeId":"39274","name":"Ethiopians","startOffset":4,"endOffset":14},{"placeId":"981503","name":"Egypt","startOffset":21,"endOffset":26},{"placeId":"39274","name":"Ethiopians","startOffset":81,"endOffset":91},{"placeId":"50004","name":"Indians","startOffset":169,"endOffset":176},{"placeId":"39274","name":"Ethiopians","startOffset":262,"endOffset":272},{"placeId":"39274","name":"Ethiopians","startOffset":378,"endOffset":388},{"placeId":"50004","name":"Indians","startOffset":435,"endOffset":442}]},{"id":71,"text":"The Libyans came in leather garments, using javelins of burnt wood. Their commander was Massages son of Oarizus.","places":[{"placeId":"716588","name":"Libyans","startOffset":4,"endOffset":11}]},{"id":72,"text":"The Paphlagonians in the army had woven helmets on their heads, and small shields and short spears, and also javelins and daggers; they wore their native shoes that reach midway to the knee. The Ligyes and Matieni and Mariandyni and Syrians were equipped like the Paphlagonians. These Syrians are called by the Persians Cappadocians. [2] Dotus son of Megasidrus was commander of the Paphlagonians and Matieni, Gobryas son of Darius and Artystone of the Mariandyni and Ligyes and Syrians.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":311,"endOffset":319}]},{"id":73,"text":"The Phrygian equipment was very similar to the Paphlagonian, with only a small difference. As the Macedonians say, these Phrygians were called Briges as long as they dwelt in Europe, where they were neighbors of the Macedonians; but when they changed their home to Asia, they changed their name also and were called Phrygians.38 The Armenians, who are settlers from Phrygia, were armed like the Phrygians. Both these together had as their commander Artochmes, who had married a daughter of Darius.","places":[{"placeId":"609502","name":"Phrygian","startOffset":4,"endOffset":12},{"placeId":"491656","name":"Macedonians","startOffset":98,"endOffset":109},{"placeId":"609502","name":"Phrygians","startOffset":121,"endOffset":130},{"placeId":"491656","name":"Macedonians","startOffset":216,"endOffset":227},{"placeId":"609502","name":"Phrygians","startOffset":316,"endOffset":325},{"placeId":"609502","name":"Phrygians","startOffset":395,"endOffset":404}]},{"id":74,"text":"The Lydian armor was most similar to the Greek. The Lydians were formerly called Meiones, until they changed their name and were called after Lydus son of Atys. The Mysians wore on their heads their native helmets, carrying small shields and javelins of burnt wood. [2] They are settlers from Lydia, and are called Olympieni after the mountain Olympus. The commander of the Lydians and Mysians was that Artaphrenes son of Artaphrenes, who attacked Marathon with Datis.","places":[{"placeId":"geonames-390903","name":"Greek","startOffset":41,"endOffset":46},{"placeId":"550710","name":"Mysians","startOffset":165,"endOffset":172},{"placeId":"550710","name":"Mysians","startOffset":386,"endOffset":393},{"placeId":"580021","name":"Marathon","startOffset":448,"endOffset":456}]},{"id":75,"text":"The Thracians in the army wore fox-skin caps on their heads, and tunics on their bodies; over these they wore embroidered mantles; they had shoes of fawnskin on their feet and legs; they also had javelins and little shields and daggers. [2] They took the name of Bithynians after they crossed over to Asia; before that they were called (as they themselves say) Strymonians, since they lived by the Strymon; they say that they were driven from their homes by Teucrians and Mysians. The commander of the Thracians of Asia was Bassaces son of Artabanus.","places":[{"placeId":"1001889","name":"Thracians","startOffset":4,"endOffset":13},{"placeId":"501629","name":"Strymon","startOffset":361,"endOffset":368},{"placeId":"501629","name":"Strymon","startOffset":398,"endOffset":405},{"placeId":"550547","name":"Teucrians","startOffset":458,"endOffset":467},{"placeId":"550710","name":"Mysians","startOffset":472,"endOffset":479},{"placeId":"1001889","name":"Thracians","startOffset":502,"endOffset":511}]},{"id":76,"text":"The &lt;Pisidians&gt; had little shields of raw oxhide; each man carried two wolf-hunters' spears; they wore helmets of bronze, and on these helmets were the ears and horns of oxen wrought in bronze, and also crests; their legs were wrapped around with strips of purple rags. Among these men is a place of divination sacred to Ares.","places":[]},{"id":77,"text":"The Cabelees,39 who are Meiones and are called Lasonii, had the same equipment as the Cilicians; when I come in my narrative to the place of the Cilicians, I will then declare what it was. The Milyae had short spears and garments fastened by brooches; some of them carried Lycian bows and wore caps of skin on their heads. The commander of all these was Badres son of Hystanes.","places":[]},{"id":78,"text":"The Moschi wore wooden helmets on their heads, and carried shields and small spears with long points. The Tibareni and Macrones and Mossynoeci in the army were equipped like the Moschi. The commanders who marshalled them were, for the Moschi and Tibareni, Ariomardus son of Darius and Parmys, the daughter of Cyrus' son Smerdis; for the Macrones and Mossynoeci, Artayctes son of Cherasmis, who was governor of Sestus on the Hellespont.","places":[{"placeId":"501434","name":"Hellespont","startOffset":424,"endOffset":434}]},{"id":79,"text":"The Mares wore on their heads their native woven helmets, and carried javelins and small hide shields. The Colchians had wooden helmets and small shields of raw oxhide and short spears, and also swords. The commander of the Mares and Colchians was Pharandates son of Teaspis. The Alarodians and Saspires in the army were armed like the Colchians; Masistius son of Siromitres was their commander.","places":[]},{"id":80,"text":"The island tribes that came from the Red Sea, and from the islands where the king settles those who are called Exiles, wore dress and armor very similar to the Median. The commander of these islanders was Mardontes son of Bagaeus, who in the next year40 was general at Mykale and died in the battle.","places":[{"placeId":"903080","name":"Media","startOffset":160,"endOffset":165}]},{"id":81,"text":"These are the nations that marched by the mainland and had their places in the infantry. The commanders of this army were those whom I have mentioned, and they were the ones who marshalled and numbered them and appointed captains of thousands and ten thousands; the captains of ten thousands appointed the captains of hundreds and of tens. There were others who were leaders of companies and nations.41","places":[]},{"id":82,"text":"These were the commanders, as I have said; the generals of these and of the whole infantry were Mardonius son of Gobryas, Tritantaechmes son of that Artabanus who delivered the opinion that there should be no expedition against Hellas, Smerdomenes son of Otanes (these two latter were sons of Darius' brothers, and thus they were Xerxes' cousins), Masistes son of Darius and Atossa, Gergis son of Ariazus, and Megabyzus son of Zopyrus.","places":[]},{"id":83,"text":"These were the generals of the whole infantry, except the Ten Thousand. Hydarnes son of Hydarnes was general of these picked ten thousand Persians, who were called Immortals for this reason: when any one of them was forced to fall out of the number by death or sickness, another was chosen so that they were never more or fewer than ten thousand. [3] The Persians showed the richest adornment of all, and they were the best men in the army. Their equipment was such as I have said; beyond this they stood out by the abundance of gold that they had. They also brought carriages bearing concubines and many well-equipped servants; camels and beasts of burden carried food for them, apart from the rest of the army.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":138,"endOffset":146},{"placeId":"geonames-130758","name":"Persians","startOffset":355,"endOffset":363}]},{"id":84,"text":"There are horsemen in these nations, but not all of them furnished cavalry. Only the following did so: the Persians, equipped like their infantry, except that some of them wore headgear of hammered bronze and iron.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":107,"endOffset":115}]},{"id":85,"text":"There are also certain nomads called Sagartian; they are Persian in speech, and the fashion of their equipment is somewhat between the Persian and the Pactyan; they furnished eight thousand horsemen. It is their custom to carry no armor of bronze or iron, except only daggers, and to use ropes of twisted leather.42 [2] They go to battle relying on these. This is the manner of fighting of these men: when they are at close quarters with their enemy, they throw their ropes, which have a noose at the end; whatever he catches, horse or man, each man drags to himself, and the enemy is entangled in the coils and slain. Such is their manner of fighting; they were marshalled with the Persians.","places":[{"placeId":"geonames-130758","name":"Persian","startOffset":57,"endOffset":64},{"placeId":"geonames-130758","name":"Persian","startOffset":135,"endOffset":142},{"placeId":"geonames-130758","name":"Persians","startOffset":683,"endOffset":691}]},{"id":86,"text":"The Median cavalry were equipped like their infantry, and the Cissians similarly. The Indians were armed in the same manner as their infantry; they rode swift horses and drove chariots drawn by horses and wild asses. The Bactrians were equipped as were their foot, and the Caspians in the same manner. [2] The Libyans, too, were armed like the men of their infantry, and all of them also drove chariots. In the same manner the Caspians and Paricanians were armed as the men of their infantry. The Arabians had the same equipment as the men of their infantry, and all of them rode on camels no less swift than horses.","places":[{"placeId":"903080","name":"Media","startOffset":4,"endOffset":9},{"placeId":"50004","name":"Indians","startOffset":86,"endOffset":93},{"placeId":"716588","name":"Libyans","startOffset":310,"endOffset":317}]},{"id":87,"text":"These nations alone were on horseback; the number of the horsemen was shown to be eighty thousand, besides the camels and the chariots. All the rest of the horsemen were ranked with their companies, but the Arabians were posted last. Since horses cannot endure camels, their place was in the rear, so that the horses would not be frightened.","places":[]},{"id":88,"text":"The captains of cavalry were Harmamithres and Tithaeus, sons of Datis; the third who was captain with them, Pharnuches, had been left behind sick at Sardis. As they set forth from Sardis, an unwelcome mishap befell him: a dog ran under the feet of the horse he was riding, and the horse was taken by surprise and frightened, so it reared up and threw Pharnuches; after his fall he vomited blood and began to waste away. [2] The horse was immediately dealt with according to Pharnuces' command; his servants led it away to the place where it had thrown their master, and cut off its legs at the knee. Thus it was that Pharnuches lost his command.","places":[{"placeId":"550867","name":"Sardis","startOffset":149,"endOffset":155}]},{"id":89,"text":"The number of the triremes was twelve hundred and seven, and they were furnished by the following: the Phoenicians with the Syrians of Palestine furnished three hundred; for their equipment, they had on their heads helmets very close to the Greek in style; they wore linen breastplates, and carried shields without rims, and javelins. [2] These Phoenicians formerly dwelt, as they themselves say, by the Red Sea; they crossed from there and now inhabit the seacoast of Syria. This part of Syria as far as Egypt is all called Palestine. [3] The Egyptians furnished two hundred ships. They wore woven helmets and carried hollow shields with broad rims, and spears for sea-warfare, and great battle-axes. Most of them wore cuirasses and carried long swords.","places":[{"placeId":"678334","name":"Phoenicians","startOffset":103,"endOffset":114},{"placeId":"geonames-390903","name":"Greek","startOffset":241,"endOffset":246},{"placeId":"678334","name":"Phoenicians","startOffset":345,"endOffset":356},{"placeId":"981503","name":"Egypt","startOffset":505,"endOffset":510},{"placeId":"981503","name":"Egyptians","startOffset":544,"endOffset":553}]},{"id":90,"text":"Such was their armor. The Cyprians furnished a hundred and fifty ships; for their equipment, their princes wore turbans wrapped around their heads, and the people wore tunics, but in all else they were like the Greeks. These are their tribes:43 some are from Salamis and Athens, some from Arcadia, some from Cythnus, some from Phoenice, and some from Ethiopia, as the Cyprians themselves say.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":211,"endOffset":217},{"placeId":"579885","name":"Athens","startOffset":271,"endOffset":277}]},{"id":91,"text":"The Cilicians furnished a hundred ships. They also wore on their heads their native helmets, carried bucklers of raw oxhide for shields, and were clad in woollen tunics; each had two javelins and a sword very close in style to the knives of Egypt. These Cilicians were formerly called Hypachaei, and took their name from Cilix son of Agenor, a Phoenician.44 The Pamphylians furnished a hundred ships: they were armed like the Greeks. These Pamphylians are descended from the Trojans of the diaspora who followed Amphilochus and Calchas.","places":[{"placeId":"981503","name":"Egypt","startOffset":241,"endOffset":246},{"placeId":"geonames-390903","name":"Greeks","startOffset":426,"endOffset":432},{"placeId":"550595","name":"Trojan","startOffset":475,"endOffset":481}]},{"id":92,"text":"The Lycians furnished fifty ships; they wore cuirasses and greaves, and carried cornel-wood bows and unfeathered arrows and javelins; goat-skins hung from their shoulders, and they wore on their heads caps crowned with feathers; they also had daggers and scimitars. The Lycians are from Crete and were once called Termilae; they took their name from Lycus son of Pandion, an Athenian.","places":[{"placeId":"579885","name":"Athenian","startOffset":375,"endOffset":383}]},{"id":93,"text":"The Dorians of Asia furnished thirty ships; their armor was Greek; they are of Peloponnesian descent. The Carians furnished seventy ships; they had scimitars and daggers, but the rest of their equipment was Greek. I have said in the beginning of my history45 what they were formerly called.","places":[{"placeId":"geonames-390903","name":"Greek","startOffset":60,"endOffset":65},{"placeId":"geonames-390903","name":"Greek","startOffset":207,"endOffset":212}]},{"id":94,"text":"The Ionians furnished a hundred ships; their equipment was like the Greek. These Ionians, as long as they were in the Peloponnese, dwelt in what is now called Achaia, and before Danaus and Xuthus came to the Peloponnese, as the Greeks say, they were called Aegialian Pelasgians.46 They were named Ionians after Ion the son of Xuthus.","places":[{"placeId":"550597","name":"Ionians","startOffset":4,"endOffset":11},{"placeId":"geonames-390903","name":"Greek","startOffset":68,"endOffset":73},{"placeId":"550597","name":"Ionians","startOffset":81,"endOffset":88},{"placeId":"geonames-390903","name":"Greeks","startOffset":228,"endOffset":234},{"placeId":"550597","name":"Ionians","startOffset":297,"endOffset":304}]},{"id":95,"text":"The islanders provided seventeen ships and were armed like Greeks; they were also of Pelasgian stock, which was later called Ionian for the same reason as were the Ionians of the twelve cities,47 who came from Athens. The Aeolians furnished sixty ships and were equipped like Greeks; formerly they were called Pelasgian, as the Greek story goes. [2] Of the people of the Hellespont, the people of Abydos had been charged by the king to remain at home and guard the bridges; the rest of the people from Pontus who came with the army furnished a hundred ships and were equipped like Greeks. They were settlers from the Ionians and Dorians.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":59,"endOffset":65},{"placeId":"550597","name":"Ionians","startOffset":164,"endOffset":171},{"placeId":"579885","name":"Athens","startOffset":210,"endOffset":216},{"placeId":"550406","name":"Aeolians","startOffset":222,"endOffset":230},{"placeId":"geonames-390903","name":"Greeks","startOffset":276,"endOffset":282},{"placeId":"geonames-390903","name":"Greek","startOffset":328,"endOffset":333},{"placeId":"501434","name":"Hellespont","startOffset":371,"endOffset":381},{"placeId":"geonames-390903","name":"Greeks","startOffset":581,"endOffset":587},{"placeId":"550597","name":"Ionians","startOffset":617,"endOffset":624}]},{"id":96,"text":"Persians and Medes and Sacae served as soldiers on all the ships. The most seaworthy ships were furnished by the Phoenicians, and among them by the Sidonians. All of these, as with those who were marshalled in the infantry, each had their native leaders, whose names I do not record, since it is not necessary for the purpose of my history. [2] The leaders of each nation are not worthy of mention, and every city of each nation had a leader of its own. These came not as generals but as slaves, like the rest of the expedition; I have already said who were the generals of supreme authority and the Persian commanders of each nation.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":0,"endOffset":8},{"placeId":"903080","name":"Medes","startOffset":13,"endOffset":18},{"placeId":"60021","name":"Sacae","startOffset":23,"endOffset":28},{"placeId":"678334","name":"Phoenicians","startOffset":113,"endOffset":124},{"placeId":"geonames-130758","name":"Persian","startOffset":600,"endOffset":607}]},{"id":97,"text":"The admirals of the navy were Ariabignes son of Darius, Prexaspes son of Aspathines, Megabazus son of Megabates, and Achaemenes son of Darius. Ariabignes, son of Darius and Gobryas' daughter, was admiral of the Ionian and Carian fleet; the admiral of the Egyptians was Achaemenes, full brother of Xerxes; and the two others were admirals of the rest. The ships of thirty and of fifty oars, the light galleys, and the great transports for horses came to a total of three thousand all together.","places":[{"placeId":"981503","name":"Egyptians","startOffset":255,"endOffset":264}]},{"id":98,"text":"After the admirals, the most famous of those on board were these: from Sidon, Tetramnestus son of Anysus; from Tyre, Matten son of Siromus; from Aradus, Merbalus son of Agbalus; from Cilicia, Syennesis son of Oromedon; from Lycia, Cyberniscus son of Sicas; from Cyprus, Gorgus son of Chersis and Timonax son of Timagoras; and from Caria, Histiaeus son of Tymnes, Pigres son of Hysseldomus, and Damasithymus son of Candaules.","places":[]},{"id":99,"text":"I see no need to mention any of the other captains except Artemisia. I find it a great marvel that a woman went on the expedition against Hellas: after her husband died, she took over his tyranny, though she had a young son, and followed the army from youthful spirits and manliness, under no compulsion. [2] Artemisia was her name, and she was the daughter of Lygdamis; on her fathers' side she was of Halicarnassian lineage, and on her mothers' Cretan. She was the leader of the men of Halicarnassus and Cos and Nisyrus and Calydnos, and provided five ships. [3] Her ships were reputed to be the best in the whole fleet after the ships of Sidon, and she gave the king the best advice of all his allies. The cities that I said she was the leader of are all of Dorian stock, as I can show, since the Halicarnassians are from Troezen, and the rest are from Epidaurus.","places":[{"placeId":"geonames-390903","name":"Hellas","startOffset":138,"endOffset":144}]},{"id":100,"text":"Here ends what I have said of the fleet. When his army had been numbered and marshalled, Xerxes desired to ride through and view it. Then he did this; as he rode in a chariot past the men of each nation, he questioned them while his scribes wrote it all down, until he had gone from one end to the other of the cavalry and infantry. [2] After he had done this, the ships were drawn down and launched into the sea. Xerxes alighted from his chariot into a Sidonian ship and sat under a golden canopy while he was carried past the prows of the ships, questioning the men in the same way as the army and having the answers written down. [3] The captains put out and anchored in line four hundred feet from the shore, with their prows turned landward and the marines armed for war; Xerxes viewed them by passing between the prows and the land.","places":[]},{"id":101,"text":"After he passed by all his fleet and disembarked from the ship, he sent for Demaratus48 son of Ariston, who was on the expedition with him against Hellas. He summoned him and said, Demaratus, it is now my pleasure to ask you what I wish to know. You are a Greek, and, as I am told both by you and by the other Greeks whom I have talked to, a man from neither the least nor the weakest of Greek cities. [2] So tell me: will the Greeks offer battle and oppose me? I think that even if all the Greeks and all the men of the western lands were assembled together, they are not powerful enough to withstand my attack, unless they are united. [3] Still I want to hear from you what you say of them. To this question Demaratus answered, O king, should I speak the truth or try to please you? Xerxes bade him speak the truth and said that it would be no more unpleasant for him than before.","places":[{"placeId":"geonames-390903","name":"Greek","startOffset":257,"endOffset":262},{"placeId":"geonames-390903","name":"Greeks","startOffset":311,"endOffset":317},{"placeId":"geonames-390903","name":"Greek","startOffset":389,"endOffset":394},{"placeId":"geonames-390903","name":"Greeks","startOffset":428,"endOffset":434},{"placeId":"geonames-390903","name":"Greeks","startOffset":492,"endOffset":498}]},{"id":102,"text":"Demaratus heard this and said, O King, since you bid me by all means to speak the whole truth, and to say what you will not later prove to be false, in Hellas poverty is always endemic, but courage is acquired as the fruit of wisdom and strong law; by use of this courage Hellas defends herself from poverty and tyranny. [2] Now I praise all the Greeks who dwell in those Dorian lands, yet I am not going to speak these words about all of them, but only about the Lacedaemonians. First, they will never accept conditions from you that bring slavery upon Hellas; and second, they will meet you in battle even if all the other Greeks are on your side. [3] Do not ask me how many these men are who can do this; they will fight with you whether they have an army of a thousand men, or more than that, or less.","places":[{"placeId":"geonames-390903","name":"Hellas","startOffset":273,"endOffset":279},{"placeId":"geonames-390903","name":"Greeks","startOffset":347,"endOffset":353},{"placeId":"570406","name":"Lacedaemonians","startOffset":465,"endOffset":479},{"placeId":"geonames-390903","name":"Hellas","startOffset":555,"endOffset":561},{"placeId":"geonames-390903","name":"Greeks","startOffset":626,"endOffset":632}]},{"id":103,"text":"When he heard this, Xerxes smiled and said, What a strange thing to say, Demaratus, that a thousand men would fight with so great an army! Come now, tell me this: you say that you were king of these men. Are you willing right now to fight with ten men? Yet if your state is entirely as you define it,49 you as their king should by right encounter twice as many according to your laws. [2] If each of them is a match for ten men of my army, then it is plain to me that you must be a match for twenty; in this way you would prove that what you say is true. But if you Greeks who so exalt yourselves are just like you and the others who come to speak with me, and are also the same size, then beware lest the words you have spoken be only idle boasting. [3] Let us look at it with all reasonableness: how could a thousand, or ten thousand, or even fifty thousand men, if they are all equally free and not under the rule of one man, withstand so great an army as mine? If you Greeks are five thousand, we still would be more than a thousand to one. [4] If they were under the rule of one man according to our custom, they might out of fear of him become better than they naturally are, and under compulsion of the lash they might go against greater numbers of inferior men; but if they are allowed to go free they would do neither. I myself think that even if they were equal in numbers it would be hard for the Greeks to fight just against the Persians. [5] What you are talking about is found among us alone, and even then it is not common but rare; there are some among my Persian spearmen who will gladly fight with three Greeks at once. You have no knowledge of this and are spouting a lot of nonsense.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":567,"endOffset":573},{"placeId":"geonames-390903","name":"Greeks","startOffset":973,"endOffset":979},{"placeId":"geonames-390903","name":"Greeks","startOffset":1409,"endOffset":1415},{"placeId":"geonames-130758","name":"Persians","startOffset":1442,"endOffset":1450},{"placeId":"geonames-130758","name":"Persian","startOffset":1573,"endOffset":1580},{"placeId":"geonames-390903","name":"Greeks","startOffset":1623,"endOffset":1629}]},{"id":104,"text":"To this Demaratus answered, O king I knew from the first that the truth would be unwelcome to you. But since you compelled me to speak as truly as I could, I have told you how it stands with the Spartans. [2] You yourself best know what love I bear them: they have robbed me of my office and the privileges of my house, and made me a cityless exile; your father received me and gave me a house and the means to live on. It is not reasonable for a sensible man to reject goodwill when it appears; rather he will hold it in great affection. [3] I myself do not promise that I can fight with ten men or with two, and I would not even willingly fight with one; yet if it were necessary, or if some great contest spurred me, I would most gladly fight with one of those men who claim to be each a match for three Greeks. [4] So is it with the Lacedaemonians; fighting singly they are as brave as any man living, and together they are the best warriors on earth. They are free, yet not wholly free: law is their master, whom they fear much more than your men fear you. [5] They do whatever it bids; and its bidding is always the same, that they must never flee from the battle before any multitude of men, but must abide at their post and there conquer or die. If I seem to you to speak foolishness when I say this, then let me hereafter hold my peace; it is under constraint that I have now spoken. But may your wish be fulfilled, King.","places":[{"placeId":"570685","name":"Spartans","startOffset":196,"endOffset":204},{"placeId":"geonames-390903","name":"Greeks","startOffset":808,"endOffset":814},{"placeId":"570406","name":"Lacedaemonians","startOffset":838,"endOffset":852}]},{"id":105,"text":"Thus Demaratus answered. Xerxes made a joke of the matter and showed no anger, but sent him away kindly. After he had conversed with Demaratus, and appointed Mascames son of Megadostes governor of this Doriscus, deposing the governor Darius had appointed, Xerxes marched his army through Thrace towards Hellas.","places":[]},{"id":106,"text":"Xerxes left behind this Mascames, who so conducted himself that to him alone Xerxes always sent gifts, as being the most valiant of all the governors that he or Darius appointed; he sent these gifts every year, and so did Artaxerxes son of Xerxes to Mascames' descendants. Before this march, governors had been appointed everywhere in Thrace and on the Hellespont. [2] All of these in Thrace and the Hellespont, except the governor of Doriscus, were after this expedition captured by the Greeks; but no one could ever drive out Mascames in Doriscus, though many tried. For this reason gifts are sent by the successive kings of Persia.","places":[{"placeId":"501434","name":"Hellespont","startOffset":353,"endOffset":363},{"placeId":"501434","name":"Hellespont","startOffset":400,"endOffset":410},{"placeId":"geonames-390903","name":"Greeks","startOffset":488,"endOffset":494},{"placeId":"geonames-130758","name":"Persia","startOffset":627,"endOffset":633}]},{"id":107,"text":"The only one of those who were driven out by the Greeks whom king Xerxes considered a valiant man was Boges, from whom they took Eion. He never ceased praising this man, and gave very great honor to his sons who were left alive in Persia; indeed Boges proved himself worthy of all praise. When he was besieged by the Athenians under Cimon son of Miltiades, he could have departed under treaty from Eion and returned to Asia, but he refused, lest the king think that he had saved his life out of cowardice; instead he resisted to the last. [2] When there was no food left within his walls, he piled up a great pyre and slew his children and wife and concubines and servants and cast them into the fire; after that, he took all the gold and silver from the city and scattered it from the walls into the Strymon; after he had done this, he cast himself into the fire. Thus he is justly praised by the Persians to this day.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":49,"endOffset":55},{"placeId":"geonames-130758","name":"Persia","startOffset":231,"endOffset":237},{"placeId":"579885","name":"Athenians","startOffset":317,"endOffset":326},{"placeId":"501629","name":"Strymon","startOffset":801,"endOffset":808},{"placeId":"geonames-130758","name":"Persians","startOffset":898,"endOffset":906}]},{"id":108,"text":"From Doriscus Xerxes went on his way towards Hellas, compelling all that he met to go with his army. As I have shown earlier, all the country as far as Thessaly had been enslaved and was tributary to the king, by the conquests of Megabazus and Mardonius after him. [2] On his road from Doriscus he first passed the Samothracian fortresses;50 of these, the city built farthest to the west is called Mesambria. Next to it is the Thasian city of Stryme; between them runs the river Lisus, which now could not furnish water enough for Xerxes' army, but was exhausted. [3] All this region was once called Gallaic, but it is now called Briantic; however, by rights it also belongs to the Ciconians.","places":[{"placeId":"1332","name":"Thessaly","startOffset":152,"endOffset":160}]},{"id":109,"text":"After he had crossed the dried-up bed of the river Lisus, he passed by the Greek cities of Maronea, Dicaea, and Abdera. He passed by these, and along certain well-known lakes near them: the Ismarid lake that lies between Maronea and Stryme, and near Dicaea the Bistonian lake, into which the rivers Travus and Compsantus discharge. Near Abdera Xerxes passed no well-known lake, but crossed the river Nestus where it flows into the sea. [2] From these regions he passed by the cities of the mainland, one of which has near it a lake of about thirty stadia in circuit, full of fish and very salty; this was drained dry by watering the beasts of burden alone. This city is called Pistyrus.","places":[{"placeId":"geonames-390903","name":"Greek","startOffset":75,"endOffset":80}]},{"id":110,"text":"Xerxes marched past these Greek cities of the coast, keeping them on his left. The Thracian tribes through whose lands he journeyed were the Paeti, Cicones, Bistones, Sapaei, Dersaei, Edoni, and Satrae.51 Of these, the ones who dwelt by the sea followed his army on shipboard; the ones living inland, whose names I have recorded, were forced to join with his land army, all of them except the Satrae.","places":[{"placeId":"geonames-390903","name":"Greek","startOffset":26,"endOffset":31}]},{"id":111,"text":"The Satrae, as far as we know, have never yet been subject to any man; they alone of the Thracians have continued living in freedom to this day; they dwell on high mountains covered with forests of all kinds and snow, and they are excellent warriors. [2] It is they who possess the place of divination sacred to Dionysus. This place is in their highest mountains; the Bessi, a clan of the Satrae, are the prophets of the shrine; there is a priestess who utters the oracle, as at Delphi; it is no more complicated here than there.52","places":[{"placeId":"1001889","name":"Thracians","startOffset":89,"endOffset":98},{"placeId":"491572","name":"Dion","startOffset":312,"endOffset":316},{"placeId":"540726","name":"Delphi","startOffset":479,"endOffset":485}]},{"id":112,"text":"After passing through the aforementioned land, Xerxes next passed the fortresses of the Pierians, one called Phagres and the other Pergamus. By going this way he marched right under their walls, keeping on his right the great and high Pangaean range, where the Pierians and Odomanti and especially the Satrae have gold and silver mines.","places":[]},{"id":113,"text":"Marching past the Paeonians, Doberes, and Paeoplae, who dwell beyond and northward of the Pangaean mountains,53 he kept going westwards, until he came to the river Strymon and the city of Eion; its governor was that Boges, then still alive, whom I mentioned just before this. [2] All this region about the Pangaean range is called Phyllis; it stretches westwards to the river Angites, which issues into the Strymon, and southwards to the Strymon itself; at this river the Magi sought good omens by sacrificing white horses.","places":[{"placeId":"501629","name":"Strymon","startOffset":164,"endOffset":171},{"placeId":"501629","name":"Strymon","startOffset":407,"endOffset":414},{"placeId":"501629","name":"Strymon","startOffset":438,"endOffset":445}]},{"id":114,"text":"After using these enchantments and many others besides on the river, they passed over it at the Nine Ways in Edonian country,54 by the bridges which they found thrown across the Strymon. When they learned that Nine Ways was the name of the place, they buried alive that number of boys and maidens, children of the local people. [2] To bury people alive is a Persian custom; I have learned by inquiry that when Xerxes' wife Amestris reached old age, she buried twice seven sons of notable Persians as an offering on her own behalf to the fabled god beneath the earth.","places":[{"placeId":"501629","name":"Strymon","startOffset":178,"endOffset":185},{"placeId":"geonames-130758","name":"Persian","startOffset":358,"endOffset":365},{"placeId":"geonames-130758","name":"Persians","startOffset":488,"endOffset":496}]},{"id":115,"text":"Journeying from the Strymon, the army passed by Argilus, a Greek town standing on a stretch of coast further westwards; the territory of this town and that which lies inland of it are called Bisaltia. [2] From there, keeping on his left hand the gulf off Poseideion, Xerxes traversed the plain of Syleus (as they call it), passing by the Greek town of Stagirus, and came to Acanthus. He took along with him all these tribes and those that dwelt about the Pangaean range, just as he did those previously mentioned, the men of the coast serving in his fleet and the inland men in his land army. [3] The entire road along which king Xerxes led his army the Thracians neither break up nor sow, but they hold it in great reverence to this day.","places":[{"placeId":"501629","name":"Strymon","startOffset":20,"endOffset":27},{"placeId":"geonames-390903","name":"Greek","startOffset":59,"endOffset":64},{"placeId":"geonames-390903","name":"Greek","startOffset":338,"endOffset":343},{"placeId":"501339","name":"Acanthus","startOffset":374,"endOffset":382},{"placeId":"1001889","name":"Thracians","startOffset":654,"endOffset":663}]},{"id":116,"text":"When Xerxes came to Acanthus, he declared the Acanthians his guests and friends, and gave them Median clothing, praising them for the zeal with which he saw them furthering his campaign, and for what he heard of the digging of the canal.","places":[{"placeId":"501339","name":"Acanthus","startOffset":20,"endOffset":28},{"placeId":"903080","name":"Media","startOffset":95,"endOffset":100}]},{"id":117,"text":"While Xerxes was at Acanthus, it happened that Artachaees, overseer of the digging of the canal, died of an illness. He was high in Xerxes' favor, an Achaemenid by lineage, and the tallest man in Persia, lacking four finger-breadths of five royal cubits55 in stature, and his voice was the loudest on earth. For this reason Xerxes mourned him greatly and gave him a funeral and burial of great pomp, and the whole army poured libations on his tomb. [2] The Acanthians hold Artachaees a hero, and sacrifice to him, calling upon his name. This they do at the command of an oracle.","places":[{"placeId":"501339","name":"Acanthus","startOffset":20,"endOffset":28},{"placeId":"geonames-130758","name":"Persia","startOffset":196,"endOffset":202}]},{"id":118,"text":"King Xerxes, then, mourned for the death of Artachaees. But the Greeks who received Xerxes' army and entertained the king himself were brought to such a degree of misery, that they were driven from house and home. Witness the case of the Thasians, who received and feasted Xerxes' army on behalf of their towns on the mainland; Antipatrus son of Orgeus, as notable a man as any of his townsmen, chosen by them for this task, rendered them an account of four hundred silver talents expended on the dinner.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":64,"endOffset":70}]},{"id":119,"text":"Similar accounts were returned by the officers in the other towns. Now the dinner, about which a great deal of fuss had been made and for the preparation of which orders had been given long ago, proceeded as I will tell. [2] As soon as the townsmen had word from the herald's proclamation, they divided corn among themselves in their cities and all of them for many months ground it to wheat and barley meal; moreover, they fed the finest beasts that money could buy, and kept landfowl and waterfowl in cages and ponds, for the entertaining of the army. They also made gold and silver cups and bowls and all manner of service for the table. [3] These things were provided for the king himself and those that ate with him. For the rest of the army they provided only food. At the coming of the army, there was always a tent ready for Xerxes to take his rest in, while the men camped out in the open air. [4] When the hour came for dinner, the real trouble for the hosts began. When they had eaten their fill and passed the night there, the army tore down the tent on the next day and marched off with all the movables, leaving nothing but carrying all with them.","places":[]},{"id":120,"text":"It was then that a very apt saying was uttered by one Megacreon of Abdera. He advised his townsmen, men and women alike, to gather at their temples, and there in all humility to entreat the gods to defend them in the future from half of every threatened ill. They should also, he said, thank the gods heartily for their previous show of favor, for it was Xerxes' custom to take a meal only once a day. Otherwise they would have been commanded to furnish a breakfast similar to the dinner. [2] The people of Abdera would then have had no choice but to flee before Xerxes' coming, or to perish most miserably if they awaited him.","places":[]},{"id":121,"text":"So the townsmen, oppressed as they were, nevertheless did as they were commanded. Upon leaving Acanthus, Xerxes sent his ships on their course away from him, giving orders to his generals that the fleet should await him at Therma, the town on the Thermaic gulf which gives the gulf its name, for this, he learned, was his shortest way. [2] The order of the army's march, from Doriscus to Acanthus, had been such as I will show. Dividing his entire land army into three parts, Xerxes appointed one of them to march beside his fleet along the coast. [3] Mardonius and Masistes were the generals of this segment, while another third of the army marched, as appointed, further inland under Tritantaechmes and Gergis. The third part, with which Xerxes himself went, marched between the two, and its generals were Smerdomenes and Megabyzus.","places":[{"placeId":"501339","name":"Acanthus","startOffset":95,"endOffset":103},{"placeId":"501339","name":"Acanthus","startOffset":388,"endOffset":396}]},{"id":122,"text":"Now when the fleet had left Xerxes, it sailed through the Athos canal which reached to the gulf in which are located the towns of Assa, Pilorus, Singus, and Sarte. The fleet took on board troops from all these cities and then headed for the Thermaic gulf. Then rounding Ampelus, the headland of Torone, it passed the Greek towns of Torone, Galepsus, Sermyle, Mecyberna, and Olynthus, all of which gave them ships and men.","places":[{"placeId":"501365","name":"Athos","startOffset":58,"endOffset":63},{"placeId":"501646","name":"Torone","startOffset":295,"endOffset":301},{"placeId":"geonames-390903","name":"Greek","startOffset":317,"endOffset":322},{"placeId":"501646","name":"Torone","startOffset":332,"endOffset":338}]},{"id":123,"text":"This country is called Sithonia. The fleet held a straight course from the headland of Ampelus to the Canastraean headland, where Pallene runs farthest out to sea, and received ships and men from the towns of what is now Pallene but was formerly called Phlegra, namely, Potidaea, Aphytis, Neapolis, Aege, Therambus, Scione, Mende, and Sane. [2] Sailing along this coast they made for the appointed place, taking troops from the towns adjacent to Pallene and near the Thermaic gulf, of which the names are Lipaxus, Combrea, Aesa, Gigonus, Campsa, Smila, Aenea; the territory of these cities is called Crossaea to this day. [3] From Aenea, the last-named in my list of the towns, the course of the fleet lay from the Thermaic gulf itself and the Mygdonian territory until its voyage ended at Therma, the place appointed, and the towns of Sindus and Chalestra, where it came to the river Axius; this is the boundary, between the Mygdonian and the Bottiaean territory, in which are located the towns of Ichnae and Pella on the narrow strip of coast.","places":[{"placeId":"491715","name":"Sane","startOffset":335,"endOffset":339}]},{"id":124,"text":"So the fleet lay there off the river Axius and the city of Therma and the towns between them, awaiting the king. But Xerxes and his land army marched from Acanthus by the straightest inland course, making for Therma. Their way lay through the Paeonian and the Crestonaean country to the river Cheidorus, which, rising in the Crestonaean land, flows through the Mygdonian country and issues by the marshes of the Axius.","places":[{"placeId":"501339","name":"Acanthus","startOffset":155,"endOffset":163}]},{"id":125,"text":"As Xerxes marched by this route, lions attacked the camels which carried his provisions; nightly they would come down out of their lairs and made havoc of the camels alone, seizing nothing else, man or beast of burden. I wonder what prevented the lions from touching anything but the camels, creatures which they had not seen and had no knowledge of until then.","places":[]},{"id":126,"text":"In these parts there are many lions and wild oxen, whose horns are those very long ones which are brought into Hellas. The boundary of the lions' country is the river Nestus which flows through Abdera and the river Achelous which flows through Acarnania. Neither to the east of the Nestus anywhere in the nearer part of Europe, nor to the west of the Achelous in the rest of the mainland, is any lion to be seen, but they are found in the country between those rivers.","places":[]},{"id":127,"text":"When he had arrived at Therma, Xerxes quartered his army there. Its encampment by the sea covered all the space from Therma and the Mygdonian country to the rivers Lydias and Haliacmon, which unite their waters in one stream and so make the border between the Bottiaean and the Macedonian56 territory. [2] In this place the foreigners lay encamped; of the rivers just mentioned, the Cheidorus, which flows from the Crestonaean country, was the only one which could not suffice for the army's drinking but was completely drained by it.","places":[{"placeId":"491656","name":"Macedonian","startOffset":278,"endOffset":288}]},{"id":128,"text":"When Xerxes saw from Therma the very great height of the Thessalian mountains Olympus and Ossa and learned that the Peneus flows through them in a narrow pass, which was the way that led into Thessaly, he desired to view the mouth of the Peneus because he intended to march by the upper road through the highland people of Macedonia to the country of the Perrhaebi and the town of Gonnus;57 this, it was told him, was the safest way. [2] He did exactly as he desired. He embarked on a Sidonian ship which he always used when he had some such business in hand, and hoisted his signal for the rest also to put out to sea, leaving his land army where it was. Great wonder took him when he came and viewed the mouth of the Peneus, and calling his guides, he asked them if it were possible to turn the river from its course and lead it into the sea by another way.","places":[{"placeId":"541022","name":"Peneus","startOffset":116,"endOffset":122},{"placeId":"1332","name":"Thessaly","startOffset":192,"endOffset":200},{"placeId":"541022","name":"Peneus","startOffset":238,"endOffset":244},{"placeId":"491656","name":"Macedonia","startOffset":323,"endOffset":332},{"placeId":"541022","name":"Peneus","startOffset":719,"endOffset":725}]},{"id":129,"text":"Thessaly, as tradition has it, was in old times a lake enclosed all round by high mountains. On its eastern side it is fenced in by the joining of the lower parts of the mountains Pelion and Ossa, to the north by Olympus, to the west by Pindus, towards the south and the southerly wind by Othrys. In the middle, then, of this ring of mountains, lies the vale of Thessaly. [2] A number of rivers pour into this vale, the most notable of which are Peneus, Apidanus, Onochonus, Enipeus, Pamisus. These five, while they flow towards their meeting place from the mountains which surround Thessaly, have their several names, until their waters all unite and issue into the sea by one narrow passage. [3] As soon as they are united, the name of the Peneus prevails, making the rest nameless. In ancient days, it is said, there was not yet this channel and outfall, but those rivers and the Boebean lake,58 which was not yet named, had the same volume of water as now, and thereby turned all Thessaly into a sea. [4] Now the Thessalians say that Poseidon made the passage by which the Peneus flows. This is reasonable, for whoever believes that Poseidon is the shaker of the earth and that rifts made by earthquakes are the work of that god will conclude, upon seeing that passage, that it is of Poseidon's making. It was manifest to me that it must have been an earthquake which forced the mountains apart.59","places":[{"placeId":"1332","name":"Thessaly","startOffset":0,"endOffset":8},{"placeId":"1332","name":"Thessaly","startOffset":362,"endOffset":370},{"placeId":"541022","name":"Peneus","startOffset":446,"endOffset":452},{"placeId":"1332","name":"Thessaly","startOffset":583,"endOffset":591},{"placeId":"541022","name":"Peneus","startOffset":742,"endOffset":748},{"placeId":"1332","name":"Thessaly","startOffset":984,"endOffset":992},{"placeId":"541022","name":"Peneus","startOffset":1077,"endOffset":1083}]},{"id":130,"text":"Xerxes asked his guides if there were any other outlet for the Peneus into the sea, and they, with their full knowledge of the matter, answered him: The river, O king, has no other way into the sea, but this alone. This is so because there is a ring of mountains around the whole of Thessaly. Upon hearing this Xerxes said: These Thessalians are wise men; [2] this, then, was the primary reason for their precaution long before60 when they changed to a better mind, for they perceived that their country would be easily and speedily conquerable. It would only have been necessary to let the river out over their land by barring the channel with a dam and to turn it from its present bed so that the whole of Thessaly, with the exception of the mountains, might be under water. [3] This he said with regard in particular to the sons of Aleues, the Thessalians who were the first Greeks to surrender themselves to the king. Xerxes supposed that when they offered him friendship they spoke for the whole of their nation. After delivering this speech and seeing what he had come to see, he sailed back to Therma.","places":[{"placeId":"541022","name":"Peneus","startOffset":63,"endOffset":69},{"placeId":"1332","name":"Thessaly","startOffset":284,"endOffset":292},{"placeId":"1332","name":"Thessaly","startOffset":711,"endOffset":719},{"placeId":"geonames-390903","name":"Greeks","startOffset":882,"endOffset":888}]},{"id":131,"text":"Xerxes stayed for many days in the region of Pieria while a third part of his army was clearing a road over the Macedonian mountains so that the whole army might pass by that way to the Perrhaebian country. Now it was that the heralds who had been sent to Hellas to demand earth, some empty-handed, some bearing earth and water, returned.","places":[{"placeId":"491656","name":"Macedonian","startOffset":112,"endOffset":122}]},{"id":132,"text":"Among those who paid that tribute were the Thessalians,61 Dolopes, Enienes, Perrhaebians, Locrians, Magnesians, Melians, Achaeans of Phthia, Thebans, and all the Boeotians except the men of Thespiae and Plataea. [2] Against all of these the Greeks who declared war with the foreigner entered into a sworn agreement, which was this: that if they should be victorious, they would dedicate to the god of Delphi the possessions of all Greeks who had of free will surrendered themselves to the Persians. Such was the agreement sworn by the Greeks.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":241,"endOffset":247},{"placeId":"540726","name":"Delphi","startOffset":401,"endOffset":407},{"placeId":"geonames-390903","name":"Greeks","startOffset":431,"endOffset":437},{"placeId":"geonames-130758","name":"Persians","startOffset":489,"endOffset":497},{"placeId":"geonames-390903","name":"Greeks","startOffset":535,"endOffset":541}]},{"id":133,"text":"To Athens and Sparta Xerxes sent no heralds to demand earth, and this he did for the following reason. When Darius had previously sent men with this same purpose, those who made the request were cast at the one city into the Pit62 and at the other into a well, and bidden to obtain their earth and water for the king from these locations. [2] What calamity befell the Athenians for dealing in this way with the heralds I cannot say, save that their land and their city were laid waste. I think, however, that there was another reason for this, and not the aforesaid.63","places":[{"placeId":"579885","name":"Athens","startOffset":3,"endOffset":9},{"placeId":"570685","name":"Sparta","startOffset":14,"endOffset":20},{"placeId":"579885","name":"Athenians","startOffset":368,"endOffset":377}]},{"id":134,"text":"Be that as it may, the anger of Talthybius, Agamemnon's herald, fell upon the Lacedaemonians. At Sparta there is a shrine of Talthybius and descendants of Talthybius called Talthybiadae, who have the special privilege of conducting all embassies from Sparta. [2] Now there was a long period after the incident I have mentioned above during which the Spartans were unable to obtain good omens from sacrifice. The Lacedaemonians were grieved and dismayed by this and frequently called assemblies, making a proclamation inviting some Lacedaemonian to give his life for Sparta. Then two Spartans of noble birth and great wealth, Sperthias son of Aneristus and Bulis son of Nicolaus, undertook of their own free will to make atonement to Xerxes for Darius' heralds who had been killed at Sparta. [3] Thereupon the Spartans sent these men to Media for execution.","places":[{"placeId":"570406","name":"Lacedaemonians","startOffset":78,"endOffset":92},{"placeId":"570685","name":"Sparta","startOffset":97,"endOffset":103},{"placeId":"570685","name":"Sparta","startOffset":251,"endOffset":257},{"placeId":"570685","name":"Spartans","startOffset":350,"endOffset":358},{"placeId":"570406","name":"Lacedaemonians","startOffset":412,"endOffset":426},{"placeId":"570406","name":"Lacedaemonian","startOffset":531,"endOffset":544},{"placeId":"570685","name":"Sparta","startOffset":566,"endOffset":572},{"placeId":"570685","name":"Spartans","startOffset":583,"endOffset":591},{"placeId":"570685","name":"Sparta","startOffset":783,"endOffset":789},{"placeId":"570685","name":"Spartans","startOffset":809,"endOffset":817},{"placeId":"903080","name":"Media","startOffset":836,"endOffset":841}]},{"id":135,"text":"Worthy of admiration was these men's deed of daring, and so also were their sayings. On their way to Susa, they came to Hydarnes, a Persian, who was general of the coast of Asia. He entertained and feasted them as his guests, and as they sat at his board, he asked: [2] Lacedaemonians, why do you shun the king's friendship? You can judge from what you see of me and my condition how well the king can honor men of worth. So might it be with you if you would but put yourselves in the king's hands, being as you are of proven worth in his eyes, and every one of you might by his commission be a ruler of Hellas. [3] To this the Spartans answered: Your advice to us, Hydarnes, is not completely sound; one half of it rests on knowledge, but the other on ignorance. You know well how to be a slave, but you, who have never tasted freedom, do not know whether it is sweet or not. Were you to taste of it, not with spears you would counsel us to fight for it, no, but with axes.","places":[{"placeId":"912936","name":"Susa","startOffset":101,"endOffset":105},{"placeId":"geonames-130758","name":"Persian","startOffset":132,"endOffset":139},{"placeId":"570406","name":"Lacedaemonians","startOffset":271,"endOffset":285},{"placeId":"570685","name":"Spartans","startOffset":630,"endOffset":638}]},{"id":136,"text":"This was their answer to Hydarnes. From there they came to Susa, into the king's presence, and when the guards commanded and would have compelled them to fall down and bow to the king, they said they would never do that. This they would refuse even if they were thrust down headlong, for it was not their custom, said they, to bow to mortal men, nor was that the purpose of their coming. Having averted that, they next said, [2] The Lacedaemonians have sent us, O king of the Medes, in requital for the slaying of your heralds at Sparta, to make atonement for their death, and more to that effect. To this Xerxes, with great magnanimity, replied that he would not imitate the Lacedaemonians. You, said he, made havoc of all human law by slaying heralds, but I will not do that for which I censure you, nor by putting you in turn to death will I set the Lacedaemonians free from this guilt.","places":[{"placeId":"912936","name":"Susa","startOffset":59,"endOffset":63},{"placeId":"570406","name":"Lacedaemonians","startOffset":434,"endOffset":448},{"placeId":"903080","name":"Medes","startOffset":477,"endOffset":482},{"placeId":"570685","name":"Sparta","startOffset":531,"endOffset":537},{"placeId":"570406","name":"Lacedaemonians","startOffset":678,"endOffset":692},{"placeId":"570406","name":"Lacedaemonians","startOffset":858,"endOffset":872}]},{"id":137,"text":"This conduct on the part of the Spartans succeeded for a time in allaying the anger of Talthybius, in spite of the fact that Sperthias and Bulis returned to Sparta. Long after that, however, it rose up again in the war between the Peloponnesians and Athenians, as the Lacedaemonians say. That seems to me to be an indication of something divine. [2] It was just that the wrath of Talthybius descended on ambassadors, nor abated until it was satisfied. The venting of it, however, on the sons of those men who went up to the king to appease it, namely on Nicolas son of Bulis and Aneristus son of Sperthias (that Aneristus who landed a merchant ships crew at the Tirynthian settlement of Halia and took it),64 makes it plain to me that this was the divine result of Talthybius' anger. [3] These two had been sent by the Lacedaemonians as ambassadors to Asia, and betrayed by the Thracian king Sitalces son of Tereus and Nymphodorus son of Pytheas of Abdera, they were made captive at Bisanthe on the Hellespont, and carried away to Attica, where the Athenians put them, and with them Aristeas son of Adimantus, a Corinthian, to death.65 This happened many years after the king's expedition, and I return now to the course of my history.","places":[{"placeId":"570685","name":"Spartans","startOffset":32,"endOffset":40},{"placeId":"570685","name":"Sparta","startOffset":157,"endOffset":163},{"placeId":"579885","name":"Athenians","startOffset":250,"endOffset":259},{"placeId":"570406","name":"Lacedaemonians","startOffset":268,"endOffset":282},{"placeId":"570406","name":"Lacedaemonians","startOffset":819,"endOffset":833},{"placeId":"501434","name":"Hellespont","startOffset":999,"endOffset":1009},{"placeId":"579888","name":"Attica","startOffset":1031,"endOffset":1037},{"placeId":"579885","name":"Athenians","startOffset":1049,"endOffset":1058},{"placeId":"570182","name":"Corinthian","startOffset":1112,"endOffset":1122}]},{"id":138,"text":"The professed intent of the king's march was to attack Athens, but in truth all Hellas was his aim. This the Greeks had long since learned, but not all of them regarded the matter alike. [2] Those of them who had paid the tribute of earth and water to the Persian were of good courage, thinking that the foreigner would do them no harm, but they who had refused tribute were afraid, since there were not enough ships in Hellas to do battle with their invader; furthermore, the greater part of them had no stomach for grappling with the war, but were making haste to side with the Persian.","places":[{"placeId":"579885","name":"Athens","startOffset":55,"endOffset":61},{"placeId":"geonames-390903","name":"Greeks","startOffset":109,"endOffset":115},{"placeId":"geonames-130758","name":"Persian","startOffset":256,"endOffset":263},{"placeId":"geonames-390903","name":"Hellas","startOffset":420,"endOffset":426},{"placeId":"geonames-130758","name":"Persian","startOffset":580,"endOffset":587}]},{"id":139,"text":"Here I am forced to declare an opinion which will be displeasing to most, but I will not refrain from saying what seems to me to be true. [2] Had the Athenians been panic-struck by the threatened peril and left their own country, or had they not indeed left it but remained and surrendered themselves to Xerxes, none would have attempted to withstand the king by sea. What would have happened on land if no one had resisted the king by sea is easy enough to determine. [3] Although the Peloponnesians had built not one but many walls across the Isthmus for their defense,66 they would nevertheless have been deserted by their allies (these having no choice or free will in the matter, but seeing their cities taken one by one by the foreign fleet), until at last they would have stood alone. They would then have put up quite a fight and perished nobly. [4] Such would have been their fate. Perhaps, however, when they saw the rest of Hellas siding with the enemy, they would have made terms with Xerxes. In either case Hellas would have been subdued by the Persians, for I cannot see what advantage could accrue from the walls built across the isthmus, while the king was master of the seas. [5] As it is, to say that the Athenians were the saviors of Hellas is to hit the truth. It was the Athenians who held the balance; whichever side they joined was sure to prevail. choosing that Greece should preserve her freedom, the Athenians roused to battle the other Greek states which had not yet gone over to the Persians and, after the gods, were responsible for driving the king off. [6] Nor were they moved to desert Hellas by the threatening oracles which came from Delphi and sorely dismayed them, but they stood firm and had the courage to meet the invader of their country.","places":[{"placeId":"579885","name":"Athenians","startOffset":150,"endOffset":159},{"placeId":"geonames-390903","name":"Hellas","startOffset":1020,"endOffset":1026},{"placeId":"geonames-130758","name":"Persians","startOffset":1058,"endOffset":1066},{"placeId":"579885","name":"Athenians","startOffset":1223,"endOffset":1232},{"placeId":"geonames-390903","name":"Hellas","startOffset":1253,"endOffset":1259},{"placeId":"579885","name":"Athenians","startOffset":1292,"endOffset":1301},{"placeId":"geonames-390903","name":"Greece","startOffset":1386,"endOffset":1392},{"placeId":"579885","name":"Athenians","startOffset":1426,"endOffset":1435},{"placeId":"geonames-390903","name":"Greek","startOffset":1463,"endOffset":1468},{"placeId":"geonames-130758","name":"Persians","startOffset":1511,"endOffset":1519},{"placeId":"geonames-390903","name":"Hellas","startOffset":1618,"endOffset":1624},{"placeId":"540726","name":"Delphi","startOffset":1668,"endOffset":1674}]},{"id":140,"text":"The Athenians had sent messages to Delphi asking that an oracle be given them, and when they had performed all due rites at the temple and sat down in the inner hall, the priestess, whose name was Aristonice, gave them this answer: [2] Wretches, why do you linger here? Rather flee from your houses and city, Flee to the ends of the earth from the circle embattled of Athens! The head will not remain in its place, nor in the body, Nor the feet beneath, nor the hands, nor the parts between; But all is ruined, for fire and the headlong god of war speeding in a Syrian chariot will bring you low.  [3] Many a fortress too, not yours alone, will he shatter; Many a shrine of the gods will he give to the flame for devouring; Sweating for fear they stand, and quaking for dread of the enemy, Running with gore are their roofs, foreseeing the stress of their sorrow; Therefore I bid you depart from the sanctuary. Have courage to lighten your evil.67 ","places":[{"placeId":"579885","name":"Athenians","startOffset":4,"endOffset":13},{"placeId":"540726","name":"Delphi","startOffset":35,"endOffset":41},{"placeId":"579885","name":"Athens","startOffset":369,"endOffset":375}]},{"id":141,"text":"When the Athenian messengers heard that, they were very greatly dismayed, and gave themselves up for lost by reason of the evil foretold. Then Timon son of Androbulus, as notable a man as any Delphian, advised them to take boughs of supplication and in the guise of suppliants, approach the oracle a second time. [2] The Athenians did exactly this; Lord, they said, regard mercifully these suppliant boughs which we bring to you, and give us some better answer concerning our country. Otherwise we will not depart from your temple, but remain here until we die. Thereupon the priestess gave them this second oracle: [3] Vainly does Pallas strive to appease great Zeus of Olympus; Words of entreaty are vain, and so too cunning counsels of wisdom. Nevertheless I will speak to you again of strength adamantine. All will be taken and lost that the sacred border of Cecrops Holds in keeping today, and the dales divine of Cithaeron; Yet a wood-built wall will by Zeus all-seeing be granted To the Trito-born, a stronghold for you and your children.  [4] Await not the host of horse and foot coming from Asia, Nor be still, but turn your back and withdraw from the foe. Truly a day will come when you will meet him face to face. Divine Salamis, you will bring death to women's sons When the corn is scattered, or the harvest gathered in. ","places":[{"placeId":"579885","name":"Athenian","startOffset":9,"endOffset":17},{"placeId":"540726","name":"Delphi","startOffset":192,"endOffset":198},{"placeId":"579885","name":"Athenians","startOffset":321,"endOffset":330}]},{"id":142,"text":"This answer seemed to be and really was more merciful than the first, and the envoys, writing it down, departed for Athens. When the messengers had left Delphi and laid the oracle before the people, there was much inquiry concerning its meaning, and among the many opinions which were uttered, two contrary ones were especially worthy of note. Some of the elder men said that the gods answer signified that the acropolis should be saved, for in old time the acropolis of Athens had been fenced by a thorn hedge, [2] which, by their interpretation, was the wooden wall. But others supposed that the god was referring to their ships, and they were for doing nothing but equipping these. Those who believed their ships to be the wooden wall were disabled by the two last verses of the oracle: Divine Salamis, you will bring death to women's sons When the corn is scattered, or the harvest gathered in.  [3] These verses confounded the opinion of those who said that their ships were the wooden wall, for the readers of oracles took the verses to mean that they should offer battle by sea near Salamis and be there overthrown.","places":[{"placeId":"579885","name":"Athens","startOffset":116,"endOffset":122},{"placeId":"540726","name":"Delphi","startOffset":153,"endOffset":159},{"placeId":"579885","name":"Athens","startOffset":471,"endOffset":477}]},{"id":143,"text":"Now there was a certain Athenian, by name and title Themistocles son of Neocles, who had lately risen to be among their chief men. He claimed that the readers of oracles had incorrectly interpreted the whole of the oracle and reasoned that if the verse really pertained to the Athenians, it would have been formulated in less mild language, calling Salamis cruel rather than divine  seeing that its inhabitants were to perish. [2] Correctly understood, the gods' oracle was spoken not of the Athenians but of their enemies, and his advice was that they should believe their ships to be the wooden wall and so make ready to fight by sea. [3] When Themistocles put forward this interpretation, the Athenians judged him to be a better counsellor than the readers of oracles, who would have had them prepare for no sea fight, and, in short, offer no resistance at all, but leave Attica and settle in some other country.","places":[{"placeId":"579885","name":"Athenian","startOffset":24,"endOffset":32},{"placeId":"579885","name":"Athenians","startOffset":277,"endOffset":286},{"placeId":"579885","name":"Athenians","startOffset":496,"endOffset":505},{"placeId":"579885","name":"Athenians","startOffset":700,"endOffset":709},{"placeId":"579888","name":"Attica","startOffset":879,"endOffset":885}]},{"id":144,"text":"The advice of Themistocles had prevailed on a previous occasion. The revenues from the mines at Laurium68 had brought great wealth into the Athenians' treasury, and when each man was to receive ten drachmae for his share, Themistocles persuaded the Athenians to make no such division but to use the money to build two hundred ships for the war, that is, for the war with Aegina. [2] This was in fact the war the outbreak of which saved Hellas by compelling the Athenians to become seamen. The ships were not used for the purpose for which they were built, but later came to serve Hellas in her need. These ships, then, had been made and were already there for the Athenians' service, and now they had to build yet others. [3] In their debate after the giving of the oracle they accordingly resolved that they would put their trust in the god and meet the foreign invader of Hellas with the whole power of their fleet, ships and men, and with all other Greeks who were so minded.","places":[{"placeId":"579885","name":"Athenians","startOffset":140,"endOffset":149},{"placeId":"579885","name":"Athenians","startOffset":249,"endOffset":258},{"placeId":"579885","name":"Athenians","startOffset":461,"endOffset":470},{"placeId":"geonames-390903","name":"Hellas","startOffset":580,"endOffset":586},{"placeId":"579885","name":"Athenians","startOffset":664,"endOffset":673},{"placeId":"geonames-390903","name":"Hellas","startOffset":874,"endOffset":880},{"placeId":"geonames-390903","name":"Greeks","startOffset":952,"endOffset":958}]},{"id":145,"text":"These oracles, then, had been given to the Athenians. All the Greeks who were concerned about the general welfare of Hellas met in conference and exchanged guarantees. They resolved in debate to make an end of all their feuds and wars against each other, whatever the cause from which they arose; among others that were in course at that time, the greatest was the war between the Athenians and the Aeginetans. [2] Presently, learning that Xerxes was at Sardis with his army, they planned to send men into Asia to spy out the king's doings and to despatch messengers, some to Argos, who should make the Argives their brothers in arms against the Persian, some to Gelon son of Dinomenes in Sicily, some to Corcyra, praying aid for Hellas, and some to Crete. This they did in the hope that since the danger threatened all Greeks alike, all of Greek blood might unite and work jointly for one common end. Now the power of Gelon was said to be very great, surpassing by far any power in Hellas.","places":[{"placeId":"579885","name":"Athenians","startOffset":43,"endOffset":52},{"placeId":"geonames-390903","name":"Greeks","startOffset":62,"endOffset":68},{"placeId":"579885","name":"Athenians","startOffset":381,"endOffset":390},{"placeId":"550867","name":"Sardis","startOffset":454,"endOffset":460},{"placeId":"geonames-130758","name":"Persian","startOffset":646,"endOffset":653},{"placeId":"geonames-390903","name":"Greeks","startOffset":820,"endOffset":826},{"placeId":"geonames-390903","name":"Greek","startOffset":841,"endOffset":846},{"placeId":"geonames-390903","name":"Hellas","startOffset":983,"endOffset":989}]},{"id":146,"text":"Being so resolved and having composed their quarrels, they first sent three men as spies into Asia. These came to Sardis and took note of the king's army. They were discovered, however, and after examination by the generals of the land army, they were led away for execution. [2] They were condemned to die, but when Xerxes heard of it, he blamed the judgment of his generals and sent some of his guards, charging them to bring the spies before him if they should be found alive. [3] They were found still living and brought into the king's presence; then Xerxes, having inquired of them the purpose of their coming, ordered his guards to lead them around and show them his whole army. When the spies had seen all to their heart's content, they were to send them away unharmed to whatever country they pleased.","places":[{"placeId":"550867","name":"Sardis","startOffset":114,"endOffset":120}]},{"id":147,"text":"The reason alleged for his command was this: had the spies been put to death, the Greeks would not so soon have learned the unspeakable greatness of his power, and the Persians would have done their enemy no great harm by putting three men to death. Xerxes said that if they should return to Hellas, the Greeks would hear of his power and would surrender their peculiar freedom before the expedition with the result that there would be no need to march against them. [2] This was like that other saying of Xerxes when he was at Abydos and saw ships laden with corn sailing out of the Pontus through the Hellespont on their way to Aegina and the Peloponnese. His counsellors, perceiving that they were enemy ships, were for taking them, and looked to the king for orders to do so. [3] Xerxes, however, asked them where the ships were sailing, and they answered: To your enemies, Sire, carrying corn. Xerxes then answered, And are not we too sailing to the same places as they, with corn among all our other provisions? What wrong are they doing us in carrying food there?","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":82,"endOffset":88},{"placeId":"geonames-130758","name":"Persians","startOffset":168,"endOffset":176},{"placeId":"geonames-390903","name":"Greeks","startOffset":304,"endOffset":310},{"placeId":"501434","name":"Hellespont","startOffset":603,"endOffset":613}]},{"id":148,"text":"So the spies were sent back after they had seen all and returned to Europe. After sending the spies, those of the Greeks who had sworn alliance against the Persian next sent messengers to Argos. [2] Now this is what the Argives say of their own part in the matter. They were informed from the first that the foreigner was stirring up war against Hellas. When they learned that the Greeks would attempt to gain their aid against the Persian, they sent messengers to Delphi to inquire of the god how it would be best for them to act, for six thousand of them had been lately69 slain by a Lacedaemonian army and Cleomenes son of Anaxandrides its general. For this reason, they said, the messengers were sent. [3] The priestess gave this answer to their question: Hated by your neighbors, dear to the immortals, Crouch with a lance in rest, like a warrior fenced in his armor, Guarding your head70 from the blow, and the head will shelter the body. This answer had already been uttered by the priestess when the envoys arrived in Argos and entered the council chamber to speak as they were charged. [4] Then the Argives answered to what had been said that they would do as was asked of them if they might first make a thirty years peace with Lacedaemonia and if the command of half the allied power were theirs. It was their right to have the full command, but they would nevertheless be content with half.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":114,"endOffset":120},{"placeId":"geonames-130758","name":"Persian","startOffset":156,"endOffset":163},{"placeId":"geonames-390903","name":"Greeks","startOffset":381,"endOffset":387},{"placeId":"geonames-130758","name":"Persian","startOffset":432,"endOffset":439},{"placeId":"540726","name":"Delphi","startOffset":465,"endOffset":471},{"placeId":"570406","name":"Lacedaemonian","startOffset":586,"endOffset":599},{"placeId":"570406","name":"Lacedaemonia","startOffset":1240,"endOffset":1252}]},{"id":149,"text":"This, they say, was the answer of their council, although the oracle forbade them to make the alliance with the Greeks; furthermore, they, despite their fear of the oracle, were eager to secure a thirty years treaty so that their children might have time in those years to grow to be men. If there were to be no such treatyso they reasonedthen, if after the evil that had befallen them the Persian should deal them yet another blow, it was to be feared that they would be at the Lacedaemonians' mercy. [2] Then those of the envoys who were Spartans replied to the demands of the council, saying that they would refer the question of the truce to their own government at home; as for the command, however, they themselves had been commissioned to say that the Spartans had two kings, and the Argives but one. Now it was impossible to deprive either Spartan of his command, but there was nothing to prevent the Argive from having the same right of voting as their two had. [3] At that, say the Argives, they decided that the Spartans' covetousness was past all bearing and that it was better to be ruled by the foreigners than give way to the Lacedaemonians. They then bade the envoys depart from the land of Argos before sunset, for they would otherwise be treated as enemies.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":112,"endOffset":118},{"placeId":"geonames-130758","name":"Persian","startOffset":392,"endOffset":399},{"placeId":"570406","name":"Lacedaemonians","startOffset":481,"endOffset":495},{"placeId":"570685","name":"Spartans","startOffset":542,"endOffset":550},{"placeId":"570685","name":"Spartans","startOffset":761,"endOffset":769},{"placeId":"570685","name":"Spartan","startOffset":850,"endOffset":857},{"placeId":"570685","name":"Spartans","startOffset":1025,"endOffset":1033},{"placeId":"570406","name":"Lacedaemonians","startOffset":1143,"endOffset":1157}]},{"id":150,"text":"Such is the Argives' account of this matter, but there is another story told in Hellas, namely that before Xerxes set forth on his march against Hellas, he sent a herald to Argos, who said on his coming (so the story goes), [2] Men of Argos, this is the message to you from King Xerxes. Perses our forefather had, as we believe, Perseus son of Danae for his father, and Andromeda daughter of Cepheus for his mother; if that is so, then we are descended from your nation. In all right and reason we should therefore neither march against the land of our forefathers, nor should you become our enemies by aiding others or do anything but abide by yourselves in peace. If all goes as I desire, I will hold none in higher esteem than you. [3] The Argives were strongly moved when they heard this, and although they made no promise immediately and demanded no share, they later, when the Greeks were trying to obtain their support, did make the claim, because they knew that the Lacedaemonians would refuse to grant it, and that they would thus have an excuse for taking no part in the war.","places":[{"placeId":"geonames-390903","name":"Hellas","startOffset":145,"endOffset":151},{"placeId":"geonames-390903","name":"Greeks","startOffset":885,"endOffset":891},{"placeId":"570406","name":"Lacedaemonians","startOffset":976,"endOffset":990}]},{"id":151,"text":"This is borne out, some of the Greeks say, by the tale of a thing which happened many years afterwards. It happened that while Athenian envoys, Callias son of Hipponicus, and the rest who had come up with him, were at Susa, called the Memnonian,71 about some other business,72 the Argives also had at this same time sent envoys to Susa, asking of Xerxes' son Artoxerxes whether the friendship which they had forged with Xerxes still held good, as they desired, or whether he considered them as his enemies. Artoxerxes responded to this that it did indeed hold good and that he believed no city to be a better friend to him than Argos.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":31,"endOffset":37},{"placeId":"579885","name":"Athenian","startOffset":127,"endOffset":135},{"placeId":"912936","name":"Susa","startOffset":218,"endOffset":222},{"placeId":"912936","name":"Susa","startOffset":331,"endOffset":335}]},{"id":152,"text":"Now, whether it is true that Xerxes sent a herald with such a message to Argos, and that the Argive envoys came up to Susa and questioned Artoxerxes about their friendship, I cannot say with exactness, nor do I now declare that I consider anything true except what the Argives themselves say. [2] This, however, I know full well, namely if all men should carry their own private troubles to market for barter with their neighbors, there would not be a single one who, when he had looked into the troubles of other men, would not be glad to carry home again what he had brought.73 [3] The conduct of the Argives was accordingly not utterly shameful. As for myself, although it is my business to set down that which is told me, to believe it is none at all of my business. This I ask the reader to hold true for the whole of my history, for there is another tale current, according to which it would seem that it was the Argives who invited the Persian into Hellas, because the war with the Lacedaemonians was going badly, and they would prefer anything to their present distresses.","places":[{"placeId":"912936","name":"Susa","startOffset":118,"endOffset":122},{"placeId":"geonames-130758","name":"Persian","startOffset":943,"endOffset":950},{"placeId":"570406","name":"Lacedaemonians","startOffset":989,"endOffset":1003}]},{"id":153,"text":"Such is the end of the story of the Argives. As for Sicily, envoys were sent there by the allies to hold converse with Gelon, Syagrus from Lacedaemon among them. The ancestor of this Gelon, who settled at Gela, was from the island of Telos which lies off Triopium. When the founding of Gela by Antiphemus and the Lindians of Rhodes was happening, he would not be left behind. [2] His descendants in time became and continue to be priests of the goddesses of the underworld;74 this office had been won, as I will show, by Telines, one of their forefathers. There were certain Geloans who had been worsted in party strife and had been banished to the town of Mactorium, inland of Gela. [3] These men Telines brought to Gela with no force of men but only the holy instruments of the goddesses worship to aid him. From where he got these, and whether or not they were his own invention, I cannot say; however that may be, it was in reliance upon them that he restored the exiles, on the condition that his descendants should be ministering priests of the goddesses. [4] Now it makes me marvel that Telines should have achieved such a feat, for I have always supposed that such feats cannot be performed by any man but only by such as have a stout heart and manly strength. Telines, however, is reported by the dwellers in Sicily to have had a soft and effeminate disposition.","places":[{"placeId":"570406","name":"Lacedaemon","startOffset":139,"endOffset":149}]},{"id":154,"text":"At the death75 of Cleandrus son of Pantares, who had been tyrant of Gela for seven years, and had been slain by a man of that city named Sabyllus, the sovereignty passed to Cleandrus' brother Hippocrates. While Hippocrates was tyrant, Gelon, a descendant of the ministering priest Telines, was one of Hippocrates' guard, as were Aenesidemus son of Pataecus and many others. [2] In no long time he was appointed for his worth to be captain of the entire cavalry, for his performance had been preeminent while he served under Hippocrates in the assaults against Callipolis, Naxos, Zancle, Leontini, Syracuse, and many other of the foreigners' towns. None of these cities, with the exception of Syracuse, escaped enslavement by Hippocrates; the Syracusans were defeated in battle on the river Elorus. [3] They were, however, rescued by the Corinthians and Corcyraeans, who made a peace for them on the condition that the Syracusans should deliver up to Hippocrates Camarina, which had formerly been theirs.","places":[{"placeId":"570182","name":"Corinthians","startOffset":837,"endOffset":848}]},{"id":155,"text":"When Hippocrates, too, after reigning the same number of years as his brother Cleandrus, came to his end near the town of Hyblafrom where he had marched against the Sicelsthen Gelon made a pretence of serving the cause of Hippocrates' sons Euclides and Cleandrus, whose rule the citizens would no longer bear. When he had defeated the men of Gela, however, he deposed the sons of Hippocrates and held sway himself. [2] After this stroke of good fortune, Gelon brought back from the town of Casmena to Syracuse both the so-called landed gentry of Syracuse, who had been driven into exile by the common people, and their slaves, the Cyllyrians. He then took possession of that city also, for the Syracusan common people surrendered themselves and it to Gelon at his coming.","places":[]},{"id":156,"text":"When he had made Syracuse his own, he took less account of his rule over Gela, which he gave in charge to his brother Hiero; over Syracuse he reigned, and all his care was for Syracuse. [2] Straightway that city grew and became great, for not only did Gelon bring all the people of Camarina to Syracuse and give them its citizenship, razing the township of Camarina, but he did the same thing to more than half of the townsmen of Gela, and when the Megarians76 in Sicily surrendered to him on terms after a siege, he took the wealthier of them, who had made war on him and expected to be put to death for this, and brought them to Syracuse to be citizens there. As for the common people of Megara, who had had no hand in the making of that war and expected that no harm would be done them, these too he brought to Syracuse and sold them for slaves to be taken out of Sicily. [3] He dealt in a similar way with the Euboeans77 of Sicily, making the same distinction. The reason for his treating the people of both places in this way was that he held the common people to be exceedingly disagreeable to live with.","places":[]},{"id":157,"text":"By these means Gelon had grown to greatness as a tyrant, and now, when the Greek envoys had come to Syracuse, they had audience with him and spoke as follows: The Lacedaemonians and their allies have sent us to win your aid against the foreigner, for it cannot be, we think, that you have no knowledge of the Persian invader of Hellas, how he proposes to bridge the Hellespont and lead all the hosts of the east from Asia against us, making an open show of marching against Athens, but actually with intent to subdue all Hellas to his will. [2] Now you are rich in power, and as lord of Sicily you rule what is not the least part of Hellas; therefore, we beg of you, send help to those who are going to free Hellas, and aid them in so doing. The uniting of all those of Greek stock entails the mustering of a mighty host able to meet our invaders in the field. If, however, some of us play false and others will not come to our aid, while the sound part of Hellas is but small, then it is to be feared that all Greek lands alike will be destroyed. [3] Do not for a moment think that if the Persian defeats us in battle and subdues us, he will leave you unassailed, but rather look well to yourself before that day comes. Aid us, and you champion your own cause; in general a well-laid plan leads to a happy issue.","places":[{"placeId":"geonames-390903","name":"Greek","startOffset":75,"endOffset":80},{"placeId":"570406","name":"Lacedaemonians","startOffset":164,"endOffset":178},{"placeId":"geonames-130758","name":"Persian","startOffset":310,"endOffset":317},{"placeId":"501434","name":"Hellespont","startOffset":367,"endOffset":377},{"placeId":"579885","name":"Athens","startOffset":475,"endOffset":481},{"placeId":"geonames-390903","name":"Hellas","startOffset":522,"endOffset":528},{"placeId":"geonames-390903","name":"Hellas","startOffset":634,"endOffset":640},{"placeId":"geonames-390903","name":"Hellas","startOffset":709,"endOffset":715},{"placeId":"geonames-390903","name":"Greek","startOffset":771,"endOffset":776},{"placeId":"geonames-390903","name":"Hellas","startOffset":958,"endOffset":964},{"placeId":"geonames-390903","name":"Greek","startOffset":1012,"endOffset":1017},{"placeId":"geonames-130758","name":"Persian","startOffset":1091,"endOffset":1098}]},{"id":158,"text":"This is what they said, and Gelon, speaking very vehemently, said in response to this: Men of Hellas, it is with a self-seeking plea that you have dared to come here and invite me to be your ally against the foreigners; yet what of yourselves? [2] When I was at odds with the Carchedonians,78 and asked you to be my comrades against a foreign army, and when I desired that you should avenge the slaying of Dorieus79 son of Anaxandrides on the men of Egesta, and when I promised to free those trading ports from which great advantage and profit have accrued to you,then neither for my sake would you come to aid nor to avenge the slaying of Dorieus. Because of your position in these matters, all these lands lie beneath the foreigners' feet. [3] Let that be; for all ended well, and our state was improved. But now that the war has come round to you in your turn, it is time for remembering Gelon! [4] Despite the fact that you slighted me, I will not make an example of you; I am ready to send to your aid two hundred triremes, twenty thousand men-at-arms, two thousand horsemen, two thousand archers, two thousand slingers, and two thousand light-armed men to run with horsemen.80 I also pledge to furnish provisions for the whole Greek army until we have made an end of the war. [5] All this, however, I promise on one condition, that I shall be general and leader of the Greeks against the foreigner. On no other condition will I come myself or send others.","places":[{"placeId":"geonames-390903","name":"Greek","startOffset":1235,"endOffset":1240},{"placeId":"geonames-390903","name":"Greeks","startOffset":1377,"endOffset":1383}]},{"id":159,"text":"When Syagrus heard that, he could not contain himself; In truth, he cried, loudly would Agamemnon son of Pelops lament, when hearing that the Spartans had been bereft of their command by Gelon and his Syracusans! No, rather, put the thought out of your minds that we will give up the command to you. If it is your will to aid Hellas, know that you must obey the Lacedaemonians; but if, as I think, you are too proud to obey, then send no aid.","places":[{"placeId":"570685","name":"Spartans","startOffset":145,"endOffset":153},{"placeId":"570406","name":"Lacedaemonians","startOffset":365,"endOffset":379}]},{"id":160,"text":"Thereupon Gelon, seeing how unfriendly Syagrus' words were, for the last time declared his opinion to them: My Spartan friend, the hard words that a man hears are likely to arouse his anger; but for all the arrogant tenor of your speech you will not move me to make an unseemly answer. [2] When you set such store by the command, it is but reasonable that it should be still more important to me since I am the leader of an army many times greater than yours and more ships by far. But seeing that your response to me is so haughty, we will make some concession in our original condition. It might be that you should command the army, and I the fleet; or if it is your pleasure to lead by sea, then I am ready to take charge of the army. With that you will surely be content, unless you want depart from here without such allies as we are.","places":[{"placeId":"570685","name":"Spartan","startOffset":112,"endOffset":119}]},{"id":161,"text":"Such was Gelon's offer, and the Athenian envoy answered him before the Lacedaemonian could speak. King of the Syracusans, he said, Hellas sends us to you to ask not for a leader but for an army. You however, say no word of sending an army without the condition of your being the leader of Hellas; it is the command alone that you desire. [2] Now as long as you sought the leadership of the whole force, we Athenians were content to hold our peace, knowing that the Laconian was well able to answer for both of us; but since, failing to win the whole, you would gladly command the fleet, we want to let you know how the matter stands. Even if the Laconian should permit you to command it, we would not do so, for the command of the fleet, which the Lacedaemonians do not desire for themselves, is ours. If they should desire to lead it, we will not withstand them, but we will not allow anyone else to be admiral. [3] It would be for nothing, then, that we possess the greatest number of seafaring men in Hellas, if we Athenians yield our command to Syracusans,we who can demonstrate the longest lineage of all and who alone among the Greeks have never changed our place of habitation;81 of our stock too was the man of whom the poet Homer says that of all who came to Ilion, he was the best man in ordering and marshalling armies.82 We accordingly cannot be reproached for what we now say. ","places":[{"placeId":"579885","name":"Athenian","startOffset":32,"endOffset":40},{"placeId":"570406","name":"Lacedaemonian","startOffset":71,"endOffset":84},{"placeId":"geonames-390903","name":"Hellas","startOffset":292,"endOffset":298},{"placeId":"579885","name":"Athenians","startOffset":409,"endOffset":418},{"placeId":"570406","name":"Lacedaemonians","startOffset":751,"endOffset":765},{"placeId":"geonames-390903","name":"Hellas","startOffset":1007,"endOffset":1013},{"placeId":"579885","name":"Athenians","startOffset":1021,"endOffset":1030},{"placeId":"geonames-390903","name":"Greeks","startOffset":1138,"endOffset":1144}]},{"id":162,"text":"My Athenian friend, Gelon answered, it would seem that you have many who lead, but none who will follow. Since, then, you will waive no claim but must have the whole, it is high time that you hasten home and tell your Hellas that her year has lost its spring. [2] The significance of this statement was that Gelon's army was the most notable part of the Greek army, just as the spring is the best part of the year. He accordingly compared Hellas deprived of alliance with him to a year bereft of its spring.83","places":[{"placeId":"579885","name":"Athenian","startOffset":4,"endOffset":12},{"placeId":"geonames-390903","name":"Greek","startOffset":358,"endOffset":363},{"placeId":"geonames-390903","name":"Hellas","startOffset":443,"endOffset":449}]},{"id":163,"text":"After such dealings with Gelon the Greek envoys sailed away. Gelon, however, feared that the Greeks would not be able to overcome the barbarian, while believing it dreadful and intolerable that he, the tyrant of Sicily, should go to the Peloponnese to be at the beck and call of Lacedaemonians. For this reason he took no more thought of this plan but followed another instead. [2] As soon as he was informed that the Persian had crossed the Hellespont, he sent Cadmus son of Scythes,84 a man of Cos, to Delphi with three fifty-oared ships, bringing them money and messages of friendship. Cadmus was to observe the outcome of the battle, and if the barbarian should be victorious, he was to give him both the money, and earth and water on behalf of Gelon's dominions. If, however, the Greeks were victorious, he was to bring everything back again.","places":[{"placeId":"geonames-390903","name":"Greek","startOffset":35,"endOffset":40},{"placeId":"geonames-390903","name":"Greeks","startOffset":93,"endOffset":99},{"placeId":"570406","name":"Lacedaemonians","startOffset":279,"endOffset":293},{"placeId":"geonames-130758","name":"Persian","startOffset":418,"endOffset":425},{"placeId":"501434","name":"Hellespont","startOffset":442,"endOffset":452},{"placeId":"540726","name":"Delphi","startOffset":504,"endOffset":510},{"placeId":"geonames-390903","name":"Greeks","startOffset":785,"endOffset":791}]},{"id":164,"text":"This Cadmus had previously inherited from his father the tyranny of Cos. Although the tyranny was well established, he nevertheless handed the government over to the whole body of Coans of his own free will. This he did under no constraint of danger, but out of a sense of justice, and he then went to Sicily, where he was given by the Samians the city of Zancle which he colonized and changed its name to Messene. [2] This is how Cadmus had come, and it was he whom Gelon now sent because of his sense of justice. What I will now relate was not the least of the many just acts of Cadmus' life; he had in his possession great wealth entrusted to him by Gelon and might have kept it. He nevertheless would not do so, but when the Greeks had prevailed in the sea-fight and Xerxes had headed home, Cadmus returned to Sicily with all that money.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":729,"endOffset":735}]},{"id":165,"text":"There is, however, another story told by the Sicilians: even though he was to be under Lacedaemonian authority, Gelon would still have aided the Greeks had it not been for Terillus son of Crinippus, the tyrant of Himera. This man, who had been expelled from Himera by Theron son of Aenesidemus, sovereign ruler of Acragas, at this very time brought against Gelon three hundred thousand Phoenicians, Libyans, Iberians, Ligyes, Elisyci, Sardinians, and Cyrnians,85 led by Amilcas son of Annon, the king of the Carchedonians. Terillus had induced him to do this partly through the prerogative of personal friendship, but mainly through the efforts of Anaxilaus son of Cretines, tyrant of Rhegium. He had handed over his own children as hostages to Amilcas, and brought him into Sicily to the help of his father-in-law; for Anaxilaus had as his wife Terillus' daughter Cydippe. Accordingly Gelon sent the money to Delphi, because he could not aid the Greeks.","places":[{"placeId":"570406","name":"Lacedaemonian","startOffset":87,"endOffset":100},{"placeId":"geonames-390903","name":"Greeks","startOffset":145,"endOffset":151},{"placeId":"678334","name":"Phoenicians","startOffset":386,"endOffset":397},{"placeId":"716588","name":"Libyans","startOffset":399,"endOffset":406},{"placeId":"540726","name":"Delphi","startOffset":910,"endOffset":916},{"placeId":"geonames-390903","name":"Greeks","startOffset":947,"endOffset":953}]},{"id":166,"text":"They add this tale toothat Gelon and Theron won a victory over Amilcas the Carchedonian in Sicily on the same day that the Greeks defeated the Persian at Salamis. This Amilcas was, on his father's side, a Carchedonian, and a Syracusan on his mother's and had been made king of Carchedon for his virtue. When the armies met and he was defeated in the battle, it is said that he vanished from sight, for Gelon looked for him everywhere but was not able to find him anywhere on earth, dead or alive.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":124,"endOffset":130},{"placeId":"geonames-130758","name":"Persian","startOffset":144,"endOffset":151}]},{"id":167,"text":"The story told by the Carchedonians themselves seems to have some element of truth. They say that the barbarians fought with the Greeks in Sicily from dawn until late evening (so long, it is said, the battle was drawn out), during which time Amilcas stayed in his camp offering sacrifice and striving to obtain favorable omens by burning whole bodies on a great pyre. When he saw his army routed, he cast himself into the fire where he was pouring libations on the sacrifice; he was consumed by this and was not seen any more. [2] Whether he vanished as the Phoenicians say, or in the manner related by the Carchedonians and Syracusans, sacrifice is offered to him, and monuments have been set up in all the colonists' cities, the greatest of which is in Carchedon itself.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":129,"endOffset":135},{"placeId":"678334","name":"Phoenicians","startOffset":558,"endOffset":569}]},{"id":168,"text":"This is how the campaign in Sicily fell out. As for the Corcyraeans, their answer to the envoys and their acts were as I will show. The men who had gone to Sicily sought their aid too, using the same arguments which they had used with Gelon. The Corcyraeans straightaway promised to send help and protection, declaring that they would not allow Hellas to perish, for if she should fall, the very next day would certainly see them also enslaved. They would accordingly have to help to the best of their ability. [2] Now this answer seemed fair enough, but when the time came for sending help, their minds changed. They manned sixty ships and put out to sea, making for the coast of the Peloponnese. There, however, they anchored off Pylos and Taenarus in the Lacedaemonian territory, waiting like the others to see which way the war should incline. They had no hope that the Greeks would prevail, but thought that the Persian would win a great victory and be lord of all Hellas. [3] Their course of action, therefore, had been planned with a view to being able to say to the Persian, O king, we whose power is as great as any and who could have furnished as many ships as any state save Athens,we, when the Greeks attempted to gain our aid in this war, would not resist you nor do anything displeasing to you. This plea, they hoped, would win them some advantage more than ordinary; and so, I believe, it would have been. [4] They were, however, also ready with an excuse which they could make to the Greeks, and in the end they made it; when the Greeks blamed them for sending no help, they said that they had manned sixty triremes, but that they could not round Malea because of the Etesian winds. It was for this reason, they said, that they could not arrive at Salamis; it was not cowardliness which made them late for the sea-fight. With such a plea they put the Greeks off.","places":[{"placeId":"570406","name":"Lacedaemonian","startOffset":758,"endOffset":771},{"placeId":"geonames-390903","name":"Greeks","startOffset":874,"endOffset":880},{"placeId":"geonames-130758","name":"Persian","startOffset":917,"endOffset":924},{"placeId":"geonames-390903","name":"Hellas","startOffset":970,"endOffset":976},{"placeId":"geonames-130758","name":"Persian","startOffset":1074,"endOffset":1081},{"placeId":"579885","name":"Athens","startOffset":1187,"endOffset":1193},{"placeId":"geonames-390903","name":"Greeks","startOffset":1208,"endOffset":1214},{"placeId":"geonames-390903","name":"Greeks","startOffset":1503,"endOffset":1509},{"placeId":"geonames-390903","name":"Greeks","startOffset":1549,"endOffset":1555},{"placeId":"geonames-390903","name":"Greeks","startOffset":1870,"endOffset":1876}]},{"id":169,"text":"But the Cretans, when the Greeks appointed to deal with them were trying to gain their aid, acted as I will show. They sent messengers to Delphi, inquiring if it would be to their advantage to help the Greeks. [2] The Pythia answered them, Foolish men, was not the grief enough which Minos sent upon your people for the help given to Menelaus, out of anger that those others86 would not help to avenge his death at Camicus, while you helped them to avenge the stealing of that woman from Sparta by a barbarian? When this was brought to the ears of the Cretans, they would have nothing to do with aiding the Greeks.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":26,"endOffset":32},{"placeId":"540726","name":"Delphi","startOffset":138,"endOffset":144},{"placeId":"geonames-390903","name":"Greeks","startOffset":202,"endOffset":208},{"placeId":"570685","name":"Sparta","startOffset":489,"endOffset":495},{"placeId":"geonames-390903","name":"Greeks","startOffset":609,"endOffset":615}]},{"id":170,"text":"Now Minos, it is said, went to Sicania, which is now called Sicily, in search for Daedalus, and perished there by a violent death. Presently all the Cretans except the men of Polichne and Praesus were bidden by a god to go with a great host to Sicania. Here they besieged the town of Camicus, where in my day the men of Acragas dwelt, for five years. [2] Presently, since they could neither take it nor remain there because of the famine which afflicted them, they departed. However, when they were at sea off Iapygia, a great storm caught and drove them ashore. Because their ships had been wrecked and there was no way left of returning to Crete, they founded there the town of Hyria, and made this their dwelling place, accordingly changing from Cretans to Messapians of Iapygia, and from islanders to dwellers on the mainland. [3] From Hyria they made settlements in those other towns which a very long time afterwards the Tarentines attempted to destroy, thereby suffering great disaster. The result was that no one has ever heard of so great a slaughter of Greeks as that of the Tarentines and Rhegians; three thousand townsmen of the latter, men who had been coerced by Micythus son of Choerus to come and help the Tarentines, were killed, and no count was kept of the Tarentine slain. [4] Micythus was a servant of Anaxilaus and had been left in charge of Rhegium; it was he who was banished from Rhegium and settled in Tegea of Arcadia, and who set up those many statues at Olympia.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":1063,"endOffset":1069}]},{"id":171,"text":"In relating the matter of the Rhegians and Tarentines, however, I digress from the main thread of my history. The Praesians say that when Crete was left desolate, it was populated especially by Greeks, among other peoples. Then, in the third generation after Minos, the events surrounding the Trojan War, in which the Cretans bore themselves as bravely as any in the cause of Menelaus, took place. [2] After this, when they returned from Troy, they and their flocks and herds were afflicted by famine and pestilence, until Crete was once more left desolate. Then came a third influx of Cretans, and it is they who, with those that were left, now dwell there. It was this that the priestess bade them remember, and so prevented them from aiding the Greeks as they were previously inclined.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":194,"endOffset":200},{"placeId":"550595","name":"Trojan","startOffset":293,"endOffset":299},{"placeId":"550595","name":"Troy","startOffset":438,"endOffset":442},{"placeId":"geonames-390903","name":"Greeks","startOffset":748,"endOffset":754}]},{"id":172,"text":"The Thessalians had at first sided with the Persians, not willingly but of necessity. This their acts revealed, because they disliked the plans of the Aleuadae; as soon as they heard that the Persian was about to cross over into Europe, they sent messengers to the Isthmus, where men chosen from the cities which were best disposed towards Hellas were assembled in council for the Greek cause. [2] To these the Thessalian messengers came and said, Men of Hellas, the pass of Olympus must be guarded so that Thessaly and all Hellas may be sheltered from the war. Now we are ready to guard it with you, but you too must send a great force. If you will not send it, be assured that we will make terms with the Persian, for it is not right that we should be left to stand guard alone and so perish for your sakes. [3] If you will not send help, there is nothing you can do to constrain us, for no necessity can prevail over lack of ability. As for us, we will attempt to find some means of deliverance for ourselves. These are the words of the men of Thessaly.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":44,"endOffset":52},{"placeId":"geonames-130758","name":"Persian","startOffset":192,"endOffset":199},{"placeId":"geonames-390903","name":"Greek","startOffset":381,"endOffset":386},{"placeId":"geonames-390903","name":"Hellas","startOffset":456,"endOffset":462},{"placeId":"1332","name":"Thessaly","startOffset":508,"endOffset":516},{"placeId":"geonames-390903","name":"Hellas","startOffset":525,"endOffset":531},{"placeId":"geonames-130758","name":"Persian","startOffset":708,"endOffset":715},{"placeId":"1332","name":"Thessaly","startOffset":1049,"endOffset":1057}]},{"id":173,"text":"Thereupon the Greeks resolved that they would send a land army to Thessaly by sea to guard the pass. When the forces had assembled, they passed through the Euripus and came to Alus in Achaea, where they disembarked and took the road for Thessaly, leaving their ships where they were. They then came to the pass of Tempe, which runs from the lower87 Macedonia into Thessaly along the river Peneus, between the mountains Olympus and Ossa. [2] There the Greeks were encamped, about ten thousand men-at-arms altogether, and the cavalry was there as well. The general of the Lacedaemonians was Euaenetus son of Carenus, chosen from among the Polemarchs, yet not of the royal house, and Themistocles son of Neocles was the general of the Athenians. [3] They remained there for only a few days, for messengers came from Alexander son of Amyntas, the Macedonian. These, pointing out the size of the army and the great number of ships, advised them to depart and not remain there to be trodden under foot by the invading host. When they had received this advice from the messengers (as they thought their advice was sound and that the Macedonian meant well by them), the Greeks followed their counsel. [4] To my thinking, however, what persuaded them was fear, since they had found out that there was another pass leading into Thessaly by the hill country of Macedonia through the country of the Perrhaebi, near the town of Gonnus; this was indeed the way by which Xerxes' army descended on Thessaly. The Greeks accordingly went down to their ships and made their way back to the Isthmus.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":14,"endOffset":20},{"placeId":"1332","name":"Thessaly","startOffset":66,"endOffset":74},{"placeId":"1332","name":"Thessaly","startOffset":237,"endOffset":245},{"placeId":"491656","name":"Macedonia","startOffset":349,"endOffset":358},{"placeId":"1332","name":"Thessaly","startOffset":364,"endOffset":372},{"placeId":"541022","name":"Peneus","startOffset":389,"endOffset":395},{"placeId":"geonames-390903","name":"Greeks","startOffset":451,"endOffset":457},{"placeId":"570406","name":"Lacedaemonians","startOffset":570,"endOffset":584},{"placeId":"579885","name":"Athenians","startOffset":732,"endOffset":741},{"placeId":"491656","name":"Macedonian","startOffset":843,"endOffset":853},{"placeId":"491656","name":"Macedonian","startOffset":1126,"endOffset":1136},{"placeId":"geonames-390903","name":"Greeks","startOffset":1162,"endOffset":1168},{"placeId":"1332","name":"Thessaly","startOffset":1318,"endOffset":1326},{"placeId":"491656","name":"Macedonia","startOffset":1350,"endOffset":1359},{"placeId":"1332","name":"Thessaly","startOffset":1482,"endOffset":1490},{"placeId":"geonames-390903","name":"Greeks","startOffset":1496,"endOffset":1502}]},{"id":174,"text":"This was the course of their expedition into Thessaly, while the king was planning to cross into Europe from Asia and was already at Abydos. The Thessalians, now bereft of their allies, sided with the Persian wholeheartedly and unequivocally. As a result of this they, in their acts, proved themselves to be most useful to the king.","places":[{"placeId":"1332","name":"Thessaly","startOffset":45,"endOffset":53},{"placeId":"geonames-130758","name":"Persian","startOffset":201,"endOffset":208}]},{"id":175,"text":"When they had come to the Isthmus, the Greeks, taking into account what was said by Alexander, deliberated as a body how and where they should stand to fight. It was decided that they should guard the pass of Thermopylae, for they saw that it was narrower than the pass into Thessaly and nearer home. [2] The pass, then, which brought about the fall of those Greeks who fell at Thermopylae, was unknown to them until they came to Thermopylae and learned of it from the men of Trachis. This pass they were resolved to guard and so stay the barbarian's passage into Hellas, while their fleet should sail to Artemisium in the territory of Histiaea. These places are near to each other, and each force could therefore be informed of the other's doings. As for the places themselves, their nature is as follows.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":39,"endOffset":45},{"placeId":"541140","name":"Thermopylae","startOffset":209,"endOffset":220},{"placeId":"1332","name":"Thessaly","startOffset":275,"endOffset":283},{"placeId":"geonames-390903","name":"Greeks","startOffset":359,"endOffset":365},{"placeId":"541140","name":"Thermopylae","startOffset":378,"endOffset":389},{"placeId":"541140","name":"Thermopylae","startOffset":430,"endOffset":441}]},{"id":176,"text":"Artemisium is where the wide Thracian sea contracts until the passage between the island of Sciathus and the mainland of Magnesia is but narrow. This strait leads next to Artemisium, which is a beach on the coast of Euboea, on which stands a temple of Artemis. [2] The pass through Trachis into Hellas88 is fifty feet wide at its narrowest point. It is not here, however, but elsewhere that the way is narrowest, namely, in front of Thermopylae and behind it; at Alpeni, which lies behind, it is only the breadth of a cart-way, and it is the same at the Phoenix stream, near the town of Anthele. [3] To the west89 of Thermopylae rises a high mountain, inaccessible and precipitous, a spur of Oeta; to the east of the road there is nothing but marshes and sea. In this pass are warm springs for bathing, called the Basins by the people of the country, and an altar of Heracles stands nearby. Across this entry a wall had been built, and formerly there was a gate in it. [4] It was the Phocians90 who built it for fear of the Thessalians when these came from Thesprotia to dwell in the Aeolian land, the region which they now possess. Since the Thessalians were trying to subdue them, the Phocians made this their protection, and in their search for every means to keep the Thessalians from invading their country, they then turned the stream from the hot springs into the pass, so that it might be a watercourse. [5] The ancient wall had been built long ago and most of it lay in ruins; those who built it up again thought that they would in this way bar the foreigner's way into Hellas. Very near the road is a village called Alpeni, and it is from here that the Greeks expected to obtain provisions.","places":[{"placeId":"geonames-390903","name":"Hellas","startOffset":295,"endOffset":301},{"placeId":"541140","name":"Thermopylae","startOffset":433,"endOffset":444},{"placeId":"541140","name":"Thermopylae","startOffset":617,"endOffset":628},{"placeId":"geonames-390903","name":"Hellas","startOffset":1579,"endOffset":1585},{"placeId":"geonames-390903","name":"Greeks","startOffset":1663,"endOffset":1669}]},{"id":177,"text":"These places, then, were thought by the Greeks to suit their purpose. After making a thorough survey, they concluded that the barbarians could not make use of their entire army, nor of their horsemen. They therefore resolved, that they would meet the invader of Hellas here. Then, when they heard that the Persian was in Pieria, they broke up from the Isthmus and set out with their army to Thermopylae and with their fleet to Artemisium.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":40,"endOffset":46},{"placeId":"geonames-130758","name":"Persian","startOffset":306,"endOffset":313},{"placeId":"541140","name":"Thermopylae","startOffset":391,"endOffset":402}]},{"id":178,"text":"So with all speed the Greeks went their several ways to meet the enemy. In the meantime, the Delphians, who were afraid for themselves and for Hellas, consulted the god. They were advised to pray to the winds, for these would be potent allies for Hellas. [2] When they had received the oracle, the Delphians first sent word of it to those Greeks who desired to be free; because of their dread of the barbarian, they were forever grateful. Subsequently they erected an altar to the winds at Thyia, the present location of the precinct of Thyia the daughter of Cephisus, and they offered sacrifices to them. This, then, is the reason why the Delphians to this day offer the winds sacrifice of propitiation.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":22,"endOffset":28},{"placeId":"540726","name":"Delphi","startOffset":93,"endOffset":99},{"placeId":"geonames-390903","name":"Hellas","startOffset":247,"endOffset":253},{"placeId":"540726","name":"Delphi","startOffset":298,"endOffset":304},{"placeId":"geonames-390903","name":"Greeks","startOffset":339,"endOffset":345},{"placeId":"540726","name":"Delphi","startOffset":640,"endOffset":646}]},{"id":179,"text":"Xerxes' fleet, however, set forth from the city of Therma, and the ten swiftest of the ships laid their course straight for Sciathus, where there lay an advance guard of three Greek ships, a Troezenian, an Aeginetan, and an Attic. These, when they sighted the foreigners ships, took to flight.","places":[{"placeId":"geonames-390903","name":"Greek","startOffset":176,"endOffset":181}]},{"id":180,"text":"The ship of Troezen, of which Prexinus was captain, was pursued and straightway captured by the foreigners, who brought the best of its fighting men and cut his throat on the ship's prow, thinking that the sacrifice91 of the foremost and fairest of their Greek captives would be auspicious. The name of the sacrificed man was Leon, and it was perhaps his name that he had to thank for it.","places":[{"placeId":"geonames-390903","name":"Greek","startOffset":255,"endOffset":260}]},{"id":181,"text":"The Aeginetan trireme, of which Asonides was captain, did however give them some trouble. On board this ship was Pytheas son of Ischenous, who acted heroically on that day. When his ship had been taken, he would not stop fighting until he had been entirely hacked to mincemeat. [2] When he finally did fall, he still had life in him, and the Persian soldiers on the ships took great pains to keep him alive for his valor, tending his wounds with ointments and wrapping him in bandages of linen cloth92. [3] Upon returning to their own station, they showed him to the whole host, and made much of him and treated him with kindness. The rest of those whom they took in that ship, however, they used as slaves.","places":[{"placeId":"geonames-130758","name":"Persian","startOffset":342,"endOffset":349}]},{"id":182,"text":"Two of the ships, then, were made captive, and the third trireme, of which Phormus an Athenian was captain, ran aground in her flight at the mouth of the Peneus; the barbarians took her hull but not the crew, for the Athenians, as soon as they had run their craft aground, leapt out and made their way through Thessaly to Athens.","places":[{"placeId":"579885","name":"Athenian","startOffset":86,"endOffset":94},{"placeId":"541022","name":"Peneus","startOffset":154,"endOffset":160},{"placeId":"579885","name":"Athenians","startOffset":217,"endOffset":226},{"placeId":"1332","name":"Thessaly","startOffset":310,"endOffset":318},{"placeId":"579885","name":"Athens","startOffset":322,"endOffset":328}]},{"id":183,"text":"The Greeks who were stationed at Artemisium were informed of these matters by beacons from Sciathus. They were frightened by this and accordingly changed their anchorage from Artemisium to Chalcis, proposing to guard the Euripus and leaving watchmen on the heights of Euboea. [2] Three of the ten barbarian ships ran aground on the reef called the Ant, which lies between Sciathus and Magnesia. The barbarians then brought a pillar of stone and set it on the reef, and when their course was plain before them, the whole fleet set forth and sailed from Therma, eleven days after the king had marched from there. [3] It was Pammon of Scyros who showed them where in the strait the reef lay. After sailing along all day, the foreign fleet reached Sepias in Magnesia and the beach between the town of Casthanaea and the Sepiad headland.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":4,"endOffset":10}]},{"id":184,"text":"Until the whole host reached this place and Thermopylae it suffered no hurt, and calculation proves to me that its numbers were still such as I will now show. The ships from Asia were twelve hundred and seven in number, and including the entire host of nations involved, there were a total of two hundred and forty-one thousand and four hundred men, two hundred being reckoned for each ship. [2] 93On board all these ships were thirty fighting men of the Persians and Medes and Sacae in addition to the company which each had of native fighters; the number of this added contingent is thirty-six thousand, two hundred and ten. [3] To this and to the first number I add the crews of the ships of fifty oars, calculating eighty men for each, whether there were actually more or fewer. Now seeing that, as has already been said,94 three thousand of these vessels were assembled, the number of men in them must have been two hundred and forty thousand. [4] These, then, were the ships' companies from Asia, and the total number of them was five hundred and seventeen thousand, six hundred and ten. There were seven hundred thousand and one hundred footsoldiers and eighty thousand cavalrymen; to these I add the Arabian camel-riders and Libyan charioteers, estimating them to have been twenty thousand in number. [5] The forces of sea and land added together would consist of two million, three hundred and seventeen thousand, six hundred and ten men. So far I have spoken of the force which came from Asia itself, without the train of servants which followed it and the companies of the grain-bearing craft.","places":[{"placeId":"541140","name":"Thermopylae","startOffset":44,"endOffset":55},{"placeId":"geonames-130758","name":"Persians","startOffset":455,"endOffset":463},{"placeId":"903080","name":"Medes","startOffset":468,"endOffset":473},{"placeId":"60021","name":"Sacae","startOffset":478,"endOffset":483},{"placeId":"716588","name":"Libyan","startOffset":1233,"endOffset":1239}]},{"id":185,"text":"I must, however, also take into account the force brought from Europe, and I will rely on my best judgment in doing so. The Greeks of Thrace and the islands off Thrace furnished one hundred and twenty ships, and the companies of these ships must then have consisted of twenty-four thousand men. [2] As regards the land army supplied by all the nationsThracians, Paeonians, Eordi, Bottiaei, Chalcidians, Brygi, Pierians, Macedonians, Perrhaebi, Enienes, Dolopes, Magnesians, Achaeans, dwellers on the coast of Thraceof all these I suppose the number to have been three hundred thousand. [3] When these numbers are added to the numbers from Asia, the sum total of fighting men is two million, six hundred and forty-one thousand, six hundred and ten.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":124,"endOffset":130},{"placeId":"1001889","name":"Thracians","startOffset":352,"endOffset":361},{"placeId":"491656","name":"Macedonians","startOffset":421,"endOffset":432}]},{"id":186,"text":"This then is the number of soldiers. As for the service-train which followed them and the crews of the light corn-bearing vessels and all the other vessels besides which came by sea with the force, these I believe to have been not fewer but more than the fighting men. [2] Suppose, however, that they were equal in number, neither more nor fewer. If they were equal to the fighting contingent, they made up as many tens of thousands as the others. The number, then, of those whom Xerxes son of Darius led as far as the Sepiad headland and Thermopylae was five million, two hundred and eighty-three thousand, two hundred and twenty.","places":[{"placeId":"541140","name":"Thermopylae","startOffset":539,"endOffset":550}]},{"id":187,"text":"That is the number of Xerxes' whole force. No one, however, can say what the exact number of cooking women, and concubines, and eunuchs was, nor can one determine the number of the beasts of draught and burden, and the Indian dogs which accompanied the host; so many of them were there. It is accordingly not surprising to me that some of the streams of water ran dry. I do, however, wonder how there were provisions sufficient for so many tens of thousands, [2] for calculation shows me, that if each man received one choenix of wheat a day and no more, eleven hundred thousand and three hundred and forty bushels would be required every day.95 In this calculation I take no account of the provisions for the women, eunuchs, beasts of burden and dogs. Of all those tens of thousands of men, there was not one, as regards looks and grandeur, worthier than Xerxes himself to hold that command.","places":[]},{"id":188,"text":"The Persian fleet put to sea and reached the beach of the Magnesian land, between the city of Casthanaea and the headland of Sepia. The first ships to arrive moored close to land, with the others after them at anchor; since the beach was not large, they lay at anchor in rows eight ships deep out into the sea. [2] They spent the night in this way, but at dawn a storm descended upon them out of a clear and windless sky, and the sea began to boil. A strong east wind blew, which the people living in those parts call Hellespontian. [3] Those who felt the wind rising or had proper mooring dragged their ships up on shore ahead of the storm and so survived with their ships. The wind did, however, carry those ships caught out in the open sea against the rocks called the Ovens at Pelion or onto the beach. Some ships were wrecked on the Sepian headland, others were cast ashore at the city of Meliboea or at Casthanaea. The storm was indeed unbearable.","places":[{"placeId":"geonames-130758","name":"Persian","startOffset":4,"endOffset":11},{"placeId":"501434","name":"Hellespont","startOffset":518,"endOffset":528}]},{"id":189,"text":"The story is told that because of an oracle the Athenians invoked Boreas, the north wind, to help them, since another oracle told them to summon their son-in-law as an ally. According to the Hellenic story, Boreas had an Attic wife, Orithyia, the daughter of Erechtheus, ancient king of Athens. [2] Because of this connection, so the tale goes, the Athenians considered Boreas to be their son-in-law. They were stationed off Chalcis in Euboea, and when they saw the storm rising, they then, if they had not already, sacrificed to and called upon Boreas and Orithyia to help them by destroying the barbarian fleet, just as before at Athos. [3] I cannot say whether this was the cause of Boreas falling upon the barbarians as they lay at anchor, but the Athenians say that he had come to their aid before and that he was the agent this time. When they went home, they founded a sacred precinct of Boreas beside the Ilissus river.","places":[{"placeId":"579885","name":"Athenians","startOffset":48,"endOffset":57},{"placeId":"579885","name":"Athens","startOffset":287,"endOffset":293},{"placeId":"579885","name":"Athenians","startOffset":349,"endOffset":358},{"placeId":"501365","name":"Athos","startOffset":632,"endOffset":637},{"placeId":"579885","name":"Athenians","startOffset":752,"endOffset":761}]},{"id":190,"text":"They say that at the very least no fewer than 400 ships were destroyed in this labor, along with innumerable men and abundant wealth. This shipwreck proved useful to Ameinocles son of Cretines, a man of Magnesia who owned land around Sepia, for he later picked up many gold and silver cups cast up on shore, found the Persian treasures, and acquired other untold riches. Although he became very rich from his findings, he did not enjoy luck in everything, for he suffered greatly when his son was murdered.","places":[{"placeId":"geonames-130758","name":"Persian","startOffset":318,"endOffset":325}]},{"id":191,"text":"There was no counting how many grain-ships and other vessels were destroyed. The generals of the fleet were afraid that the Thessalians might attack them now that they had been defeated, so they built a high palisade out of the wreckage. [2] The storm lasted three days. Finally the Magi made offerings and cast spells upon the wind, sacrificing also to Thetis and the Nereids. In this way they made the wind stop on the fourth dayor perhaps it died down on its own. They sacrificed to Thetis after hearing from the Ionians the story that it was from this place that Peleus had carried her off and that all the headland of Sepia belonged to her and to the other Nereids.","places":[{"placeId":"550597","name":"Ionians","startOffset":517,"endOffset":524}]},{"id":192,"text":"The storm, then, ceased on the fourth day. Now the scouts stationed on the headlands of Euboea ran down and told the Hellenes all about the shipwreck on the second day after the storm began. [2] After hearing this they prayed to Poseidon as their savior and poured libations. Then they hurried to Artemisium hoping to find few ships opposing them. So they came to Artemisium a second time and made their station there. From that time on they call Poseidon their savior.","places":[]},{"id":193,"text":"The barbarians, when the wind ceased and the waves no longer ran high, put to sea and coasted along the mainland; they sailed around the headland of Magnesia and sailed straight into the gulf which stretches toward Pagasae. [2] There is a place on this gulf in Magnesia, where, it is said, Heracles was sent for water and was left behind by Jason and his comrades of the Argo, when they were sailing to Aea in Colchis for the fleece; their purpose was to draw water from there and then to put out to sea. This is the reason why that place has been called Aphetae.96 Here Xerxes' men made their anchorage.","places":[]},{"id":194,"text":"Fifteen of those ships had put to sea a long time after all the rest, and it chanced that they sighted the Greek ships off Artemisium. Supposing these to be their own fleet, the barbarians proceeded into the midst of their enemies. Their captain was the viceroy from Cyme in Aeolia, Sandoces son of Thamasius. This man, who was one of the king's judges, had once before been taken and crucified by Darius because he had given unjust judgment for a bribe. [2] When Sandoces had been hung on the cross, Darius found on consideration that his good services to the royal house outweighed his offenses. The king then perceived that he had acted with more haste than wisdom and set Sandoces free. [3] In this way he escaped from being put to death by Darius. Now that he was taken into the midst of the Greeks, however, he was not to escape a second time, for when the Greeks saw the Persians bearing down on them, they perceived their mistake and putting to sea, easily took them captive.","places":[{"placeId":"geonames-390903","name":"Greek","startOffset":107,"endOffset":112},{"placeId":"geonames-390903","name":"Greeks","startOffset":797,"endOffset":803},{"placeId":"geonames-390903","name":"Greeks","startOffset":863,"endOffset":869},{"placeId":"geonames-130758","name":"Persians","startOffset":878,"endOffset":886}]},{"id":195,"text":"In one of these ships they took Aridolis, the tyrant of Alabanda in Caria, and in another the Paphian captain Penthylus, son of Demonous; of the twelve ships which he had brought from Paphos he had lost eleven in the storm off the Sepiad headland and was in the one which remained when he was taken as he headed down on Artemisium. Having questioned these men and learned what they desired to know of Xerxes' force, the Greeks sent them away to the isthmus of Corinth in bonds.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":420,"endOffset":426},{"placeId":"570182","name":"Corinth","startOffset":460,"endOffset":467}]},{"id":196,"text":"So the foreign fleet, of which, with the exception of fifteen ships Sandoces was captain, came to Aphetae. Xerxes and his land army marched through Thessaly and Achaea, and it was three days since he had entered Malis. In Thessaly he held a race for his own cavalry; this was also a test of the Thessalian horsemen, whom he had heard were the best in Hellas. The Greek horses were far outpaced in this contest. Of the Thessalian rivers, the Onochonus was the only one which could not provide enough water for his army to drink. In Achaea, however, even the greatest river there, the Apidanus,97 gave out, remaining but a sorry trickle.","places":[{"placeId":"1332","name":"Thessaly","startOffset":148,"endOffset":156},{"placeId":"1332","name":"Thessaly","startOffset":222,"endOffset":230},{"placeId":"geonames-390903","name":"Greek","startOffset":363,"endOffset":368}]},{"id":197,"text":"When Xerxes had come to Alus in Achaea, his guides, desiring to inform him of all they knew, told him the story which is related in that country concerning the worship of Laphystian Zeus, namely how Athamas son of Aeolus plotted Phrixus' death with Ino, and further, how the Achaeans by an oracle's bidding compel Phrixus descendants to certain tasks. [2] They order the eldest of that family not to enter their town-hall (which the Achaeans call the People's House98 and themselves keep watch there. If he should enter, he may not come out, save only to be sacrificed. They say as well that many of those who were to be sacrificed had fled in fear to another country, and that if they returned at a later day and were taken, they were brought into the town-hall. The guides showed Xerxes how the man is sacrificed, namely with fillets covering him all over and a procession to lead him forth. [3] It is the descendants of Phrixus' son Cytissorus who are treated in this way, because when the Achaeans by an oracle's bidding made Athamas son of Aeolus a scapegoat for their country and were about to sacrifice him, this Cytissorus came from Aea in Colchis and delivered him, thereby bringing the god's wrath on his own descendants. [4] Hearing all this, Xerxes, when he came to the temple grove, refrained from entering it himself and bade all his army do likewise, holding the house and the precinct of Athamas' descendants alike in reverence.99","places":[]},{"id":198,"text":"These were Xerxes' actions in Thessaly and Achaea. From here he came into Malis along a gulf of the sea, in which the tide ebbs and flows daily.100 There is low-lying ground about this gulf, sometimes wide and sometimes very narrow, and around it stand high and inaccessible mountains which enclose the whole of Malis and are called the Rocks of Trachis. [2] Now the first town by the gulf on the way from Achaea is Anticyra, near to which the river Spercheus flows from the country of the Enieni and issues into the sea. About twenty furlongs from that river is another named Dyras, which is said to have risen from the ground to aid Heracles against the fire that consumed him and twenty furlongs again from that there is another river called the Black river.","places":[{"placeId":"1332","name":"Thessaly","startOffset":30,"endOffset":38}]},{"id":199,"text":"The town of Trachis is five furlongs away from this Black river. Here is the greatest distance in all this region between the sea and the hills on which Trachis stands, for the plain is twenty-two thousand plethra in extent.101 In the mountains which hem in the Trachinian land there is a ravine to the south of Trachis, through which the river Asopus flows past the lower slopes of the mountains.","places":[]},{"id":200,"text":"There is another river south of the Asopus, the Phoenix, a little stream which flows from those mountains into the Asopus. Near this stream is the narrowest place; there is only space for a single cart-way. Thermopylae is fifteen furlongs away from the river Phoenix. [2] Between the river and Thermopylae there is a village named Anthele, past which the Asopus flows out into the sea, and there is a wide space around it in which stand a temple of Amphictyonid Demeter, seats for the Amphictyons,102 and a temple of Amphictyon himself 201.King Xerxes lay encamped in Trachis in Malis and the Hellenes in the pass.103 This place is called Thermopylae by most of the Hellenes, but by the natives and their neighbors Pylae.104 Each lay encamped in these places. Xerxes was master of everything to the north105 from Trachis, and the Hellenes of all that lay toward the south on the mainland.106","places":[{"placeId":"541140","name":"Thermopylae","startOffset":207,"endOffset":218},{"placeId":"541140","name":"Thermopylae","startOffset":294,"endOffset":305},{"placeId":"541140","name":"Thermopylae","startOffset":639,"endOffset":650}]},{"id":202,"text":"The Hellenes who awaited the Persians in that place were these: three hundred Spartan armed men; one thousand from Tegea and Mantinea, half from each place; one hundred and twenty from Orchomenus in Arcadia and one thousand from the rest of Arcadia; that many Arcadians, four hundred from Corinth, two hundred from Phlius, and eighty Mycenaeans. These were the Peloponnesians present; from Boeotia there were seven hundred Thespians and four hundred Thebans.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":29,"endOffset":37},{"placeId":"570685","name":"Spartan","startOffset":78,"endOffset":85},{"placeId":"570182","name":"Corinth","startOffset":289,"endOffset":296}]},{"id":203,"text":"In addition, the Opuntian Locrians in full force and one thousand Phocians came at the summons. The Hellenes had called upon them through messengers who told them that this was only the advance guard, that the rest of the allies were expected any day now, and that the sea was being watched, with the Athenians and Aeginetans and all those enrolled in the fleet on guard. There was nothing for them to be afraid of. [2] The invader of Hellas was not a god but a human being, and there was not, and never would be, any mortal on whom some amount of evil was not bestowed at birth, with the greatest men receiving the largest share. The one marching against them was certain to fall from pride, since he was a mortal. When they heard this, the Locrians and Phocians marched to Trachis to help.","places":[{"placeId":"579885","name":"Athenians","startOffset":301,"endOffset":310}]},{"id":204,"text":"Each city had its own general, but the one most admired and the leader of the whole army was a Lacedaemonian, Leonidas, son of Anaxandrides, son of Leon, son of Eurycratides, son of Anaxandrus, son of Eurycrates, son of Polydorus, son of Alcamenes, son of Teleclus, son of Archelaus, son of Hegesilaus, son of Doryssus, son of Leobotes, son of Echestratus, son of Agis, son of Eurysthenes, son of Aristodemus, son of Aristomachus, son of Cleodaeus, son of Hyllus, son of Heracles. Leonidas had gained the kingship at Sparta unexpectedly.","places":[{"placeId":"570406","name":"Lacedaemonian","startOffset":95,"endOffset":108},{"placeId":"570685","name":"Sparta","startOffset":517,"endOffset":523}]},{"id":205,"text":"Since he had two older brothers, Cleomenes and Dorieus, he had renounced all thought of the kingship. Cleomenes, however, died without male offspring, and Dorieus, who had met his end in Sicily, was also no longer alive. The succession therefore fell to Leonidas since he was older than Anaxandrides' youngest son Cleombrotus and had married Cleomenes' daughter. [2] He now came to Thermopylae with the appointed three hundred he had selected,107 all of whom had sons. He also brought those Thebans whom I counted among the number and whose general was Leontiades son of Eurymachus. [3] Leonidas took pains to bring only the Thebans among the Hellenes, because they were accused of medizing; he summoned them to the war wishing to know whether they would send their men with him or openly refuse the Hellenic alliance. They sent the men but intended something quite different 206.The Spartans sent the men with Leonidas on ahead so that the rest of the allies would see them and march, instead of medizing like the others if they learned that the Spartans were delaying. At present the Carneia108 was in their way, but once they had completed the festival, they intended to leave a garrison at Sparta and march out in full force with all speed. [2] The rest of the allies planned to do likewise, for the Olympiad coincided with these events. They accordingly sent their advance guard, not expecting the war at Thermopylae to be decided so quickly.","places":[{"placeId":"541140","name":"Thermopylae","startOffset":382,"endOffset":393},{"placeId":"570685","name":"Spartans","startOffset":884,"endOffset":892},{"placeId":"570685","name":"Spartans","startOffset":1047,"endOffset":1055},{"placeId":"570685","name":"Sparta","startOffset":1194,"endOffset":1200},{"placeId":"541140","name":"Thermopylae","startOffset":1410,"endOffset":1421}]},{"id":207,"text":"This is what they intended, but the Hellenes at Thermopylae, when the Persians drew near the pass, fearfully took counsel whether to depart. The rest of the Peloponnesians were for returning to the Peloponnese and guarding the isthmus, but the Phocians and Locrians were greatly angered by this counsel. Leonidas voted to remain where they were and send messengers to the cities bidding them to send help, since they were too few to ward off the army of the Medes.","places":[{"placeId":"541140","name":"Thermopylae","startOffset":48,"endOffset":59},{"placeId":"geonames-130758","name":"Persians","startOffset":70,"endOffset":78},{"placeId":"903080","name":"Medes","startOffset":458,"endOffset":463}]},{"id":208,"text":"While they debated in this way, Xerxes sent a mounted scout to see how many there were and what they were doing. While he was still in Thessaly, he had heard that a small army was gathered there and that its leaders were Lacedaemonians, including Leonidas, who was of the Heracleid clan. [2] Riding up to the camp, the horseman watched and spied out the place. He could, however, not see the whole camp, for it was impossible to see those posted inside the wall which they had rebuilt and were guarding. He did take note of those outside, whose arms lay in front of the wall, and it chanced that at that time the Lacedaemonians were posted there. [3] He saw some of the men exercising naked and others combing their hair. He marvelled at the sight and took note of their numbers. When he had observed it all carefully, he rode back in leisure, since no one pursued him or paid him any attention at all. So he returned and told Xerxes all that he had seen.","places":[{"placeId":"1332","name":"Thessaly","startOffset":135,"endOffset":143},{"placeId":"570406","name":"Lacedaemonians","startOffset":221,"endOffset":235},{"placeId":"570406","name":"Lacedaemonians","startOffset":613,"endOffset":627}]},{"id":209,"text":"When Xerxes heard that, he could not comprehend the fact that the Lacedaemonians were actually, to the best of their ability, preparing to kill or be killed. What they did appeared laughable to him, so he sent for Demaratus the son of Ariston, who was in his camp. [2] When this man arrived, he asked him about each of these matters, wanting to understand what it was that the Lacedaemonians were doing. Demaratus said, You have already heard about these men from me, when we were setting out for Hellas, but when you heard, you mocked me, although I told you how I expected things to turn out. It is my greatest aim, O King, to be truthful in your presence. [3] So hear me now. These men have come to fight us for the pass, and it for this that they are preparing. This is their custom: when they are about to risk their lives, they arrange their hair. [4] Rest assured that if you overcome these men and those remaining behind at Sparta, there is no one else on earth who will raise his hands to withstand you, my King. You are now attacking the fairest kingdom in Hellas and men who are the very best. [5] What he said seemed completely incredible to Xerxes, so he then asked how they, who were so few in number, would fight against his army. Demaratus answered, My King, take me for a liar if this does not turn out as I say. So he spoke, but he did not persuade Xerxes.","places":[{"placeId":"570406","name":"Lacedaemonians","startOffset":66,"endOffset":80},{"placeId":"570406","name":"Lacedaemonians","startOffset":377,"endOffset":391},{"placeId":"570685","name":"Sparta","startOffset":933,"endOffset":939},{"placeId":"geonames-390903","name":"Hellas","startOffset":1068,"endOffset":1074}]},{"id":210,"text":"He let four days go by, expecting them to run away at any minute. They did not leave, and it seemed to him that they stayed out of folly and lack of due respect. On the fifth day he became angry and sent the Medes and Cissians against them, bidding them take them prisoner and bring them into his presence. [2] The Medes bore down upon the Hellenes and attacked. Many fell, but others attacked in turn, and they made it clear to everyone, especially to the king himself, that among so many people there were few real men. The battle lasted all day.","places":[{"placeId":"903080","name":"Medes","startOffset":208,"endOffset":213},{"placeId":"903080","name":"Medes","startOffset":315,"endOffset":320}]},{"id":211,"text":"When the Medes had been roughly handled, they retired, and the Persians whom the king called Immortals, led by Hydarnes, attacked in turn. It was thought that they would easily accomplish the task. [2] When they joined battle with the Hellenes, they fared neither better nor worse than the Median army, since they used shorter spears than the Hellenes and could not use their numbers fighting in a narrow space. [3] The Lacedaemonians fought memorably, showing themselves skilled fighters amidst unskilled on many occasions, as when they would turn their backs and feign flight. The barbarians would see them fleeing and give chase with shouting and noise, but when the Lacedaemonians were overtaken, they would turn to face the barbarians and overthrow innumerable Persians. A few of the Spartans themselves were also slain. When the Persians could gain no inch of the pass, attacking by companies and in every other fashion, they withdrew.","places":[{"placeId":"903080","name":"Medes","startOffset":9,"endOffset":14},{"placeId":"geonames-130758","name":"Persians","startOffset":63,"endOffset":71},{"placeId":"903080","name":"Media","startOffset":290,"endOffset":295},{"placeId":"570406","name":"Lacedaemonians","startOffset":420,"endOffset":434},{"placeId":"570406","name":"Lacedaemonians","startOffset":670,"endOffset":684},{"placeId":"geonames-130758","name":"Persians","startOffset":766,"endOffset":774},{"placeId":"570685","name":"Spartans","startOffset":789,"endOffset":797},{"placeId":"geonames-130758","name":"Persians","startOffset":835,"endOffset":843}]},{"id":212,"text":"It is said that during these assaults in the battle the king, as he watched, jumped up three times from the throne in fear for his army. This, then, is how the fighting progressed, and on the next day the barbarians fought no better. They joined battle supposing that their enemies, being so few, were now disabled by wounds and could no longer resist. [2] The Hellenes, however, stood ordered in ranks by nation, and each of them fought in turn, except the Phocians, who were posted on the mountain to guard the path.109 When the Persians found nothing different from what they saw the day before, they withdrew.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":531,"endOffset":539}]},{"id":213,"text":"The king was at a loss as to how to deal with the present difficulty. Epialtes son of Eurydemus, a Malian, thinking he would get a great reward from the king, came to speak with him and told him of the path leading over the mountain to Thermopylae. In so doing he caused the destruction of the Hellenes remaining there. [2] Later he fled into Thessaly in fear of the Lacedaemonians, and while he was in exile, a price was put on his head by the Pylagori110 when the Amphictyons assembled at Pylae. Still later he returned from exile to Anticyra and was killed by Athenades, a Trachinian. [3] Athenades slew Epialtes for a different reason, which I will tell later in my history,111 but he was given no less honor by the Lacedaemonians. It was in this way, then, that Epialtes was later killed.","places":[{"placeId":"541140","name":"Thermopylae","startOffset":236,"endOffset":247},{"placeId":"1332","name":"Thessaly","startOffset":343,"endOffset":351},{"placeId":"570406","name":"Lacedaemonians","startOffset":367,"endOffset":381},{"placeId":"570406","name":"Lacedaemonians","startOffset":720,"endOffset":734}]},{"id":214,"text":"There is another story told, namely that Onetes son of Phanagoras, a Carystian, and Corydallus of Anticyra are the ones who gave the king this information and guided the Persians around the mountain, but I find it totally incredible. [2] One must judge by the fact that the Pylagori set a price not on Onetes and Corydallus but on Epialtes the Trachinian, and I suppose they had exact knowledge; furthermore, we know that Epialtes was banished on this charge. [3] Onetes might have known the path, although he was not a Malian, if he had often come to that country, but Epialtes was the one who guided them along the path around the mountain. It is he whom I put on record as guilty.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":170,"endOffset":178}]},{"id":215,"text":"Xerxes was pleased by what Epialtes promised to accomplish. He immediately became overjoyed and sent out Hydarnes and the men under Hydarnes command, who set forth from the camp at about lamp-lighting time. This path112 had been discovered by the native Malians, who used it to guide the Thessalians into Phocis when the Phocians had fenced off the pass with a wall and were sheltered from the war. So long ago the Malians had discovered that the pass was in no way a good thing.113","places":[]},{"id":216,"text":"The course of the path is as follows: it begins at the river Asopus as it flows through the ravine, and this mountain and the path have the same name, Anopaea. This Anopaea stretches along the ridge of the mountain and ends at Alpenus, the Locrian city nearest to Malis, near the rock called Blackbuttock and the seats of the Cercopes, where it is narrowest.114","places":[]},{"id":217,"text":"This, then, was the nature of the pass. The Persians crossed the Asopus and travelled all night along this path, with the Oetaean mountains on their right and the Trachinian on their left. At dawn they came to the summit of the pass. [2] In this part of the mountain one thousand armed men of the Phocians were on watch, as I have already shown, defending their own country and guarding the path. The lower pass was held by those I have mentioned, but the Phocians had voluntarily promised Leonidas to guard the path over the mountain.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":44,"endOffset":52}]},{"id":218,"text":"The Phocians learned in the following way that the Persians had climbed up: they had ascended without the Phocians' notice because the mountain was entirely covered with oak trees. Although there was no wind, a great noise arose like leaves being trodden underfoot. The Phocians jumped up and began to put on their weapons, and in a moment the barbarians were there. [2] When they saw the men arming themselves, they were amazed, for they had supposed that no opposition would appear, but they had now met with an army. Hydarnes feared that the Phocians might be Lacedaemonians and asked Epialtes what country the army was from. When he had established what he wanted to know with certainty, he arrayed the Persians for battle. [3] The Phocians, assailed by thick showers of arrows and supposing that the Persians had set out against them from the start, fled to the top of the mountain and prepared to meet their destruction. This is what they intended, but the Persians with Epialtes and Hydarnes paid no attention to the Phocians and went down the mountain as fast as possible.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":51,"endOffset":59},{"placeId":"570406","name":"Lacedaemonians","startOffset":563,"endOffset":577},{"placeId":"geonames-130758","name":"Persians","startOffset":707,"endOffset":715},{"placeId":"geonames-130758","name":"Persians","startOffset":805,"endOffset":813},{"placeId":"geonames-130758","name":"Persians","startOffset":963,"endOffset":971}]},{"id":219,"text":"The seer Megistias, examining the sacrifices, first told the Hellenes at Thermopylae that death was coming to them with the dawn. Then deserters came who announced the circuit made by the Persians. These gave their signals while it was still night; a third report came from the watchers running down from the heights at dawn. [2] The Hellenes then took counsel, but their opinions were divided. Some advised not to leave their post, but others spoke against them. They eventually parted, some departing and dispersing each to their own cities, others preparing to remain there with Leonidas.","places":[{"placeId":"541140","name":"Thermopylae","startOffset":73,"endOffset":84},{"placeId":"geonames-130758","name":"Persians","startOffset":188,"endOffset":196}]},{"id":220,"text":"It is said that Leonidas himself sent them away because he was concerned that they would be killed, but felt it not fitting for himself and the Spartans to desert that post which they had come to defend at the beginning. [2] I, however, tend to believe that when Leonidas perceived that the allies were dispirited and unwilling to run all risks with him, he told then to depart. For himself, however, it was not good to leave; if he remained, he would leave a name of great fame, and the prosperity of Sparta would not be blotted out. [3] When the Spartans asked the oracle about this war when it broke out, the Pythia had foretold that either Lacedaemon would be destroyed by the barbarians or their king would be killed. She gave them this answer in hexameter verses running as follows: [4] For you, inhabitants of wide-wayed Sparta, Either your great and glorious city must be wasted by Persian men, Or if not that, then the bound of Lacedaemon must mourn a dead king, from Heracles' line. The might of bulls or lions will not restrain him with opposing strength; for he has the might of Zeus. I declare that he will not be restrained until he utterly tears apart one of these. Considering this and wishing to win distinction for the Spartans alone, he sent away the allies rather than have them leave in disorder because of a difference of opinion.","places":[{"placeId":"570685","name":"Spartans","startOffset":144,"endOffset":152},{"placeId":"570685","name":"Sparta","startOffset":502,"endOffset":508},{"placeId":"570685","name":"Spartans","startOffset":548,"endOffset":556},{"placeId":"570406","name":"Lacedaemon","startOffset":644,"endOffset":654},{"placeId":"570685","name":"Sparta","startOffset":829,"endOffset":835},{"placeId":"geonames-130758","name":"Persian","startOffset":891,"endOffset":898},{"placeId":"570406","name":"Lacedaemon","startOffset":938,"endOffset":948},{"placeId":"570685","name":"Spartans","startOffset":1239,"endOffset":1247}]},{"id":221,"text":"Not the least proof I have of this is the fact that Leonidas publicly dismissed the seer who attended the expedition, for fear that he might die with them. This was Megistias the Acarnanian, said to be descended from Melampus, the one who told from the sacrifices what was going to happen to them. He was dismissed but did not leave; instead he sent away his only son who was also with the army.","places":[]},{"id":222,"text":"Those allies who were dismissed went off in obedience to Leonidas, only the Thespians and Thebans remaining with the Lacedaemonians. The Thebans remained against their will and desire, for Leonidas kept them as hostages. The Thespians very gladly remained, saying they would not abandon Leonidas and those with him by leaving; instead they would stay and die with them. Their general was Demophilus son of Diadromes.","places":[{"placeId":"570406","name":"Lacedaemonians","startOffset":117,"endOffset":131}]},{"id":223,"text":"Xerxes made libations at sunrise and waiting till about mid-morning, made his assault. Epialtes had advised this, for the descent from the mountain is more direct, and the way is much shorter than the circuit and ascent. [2] Xerxes and his barbarians attacked, but Leonidas and his Hellenes, knowing they were going to their deaths, advanced now much farther than before into the wider part of the pass. In all the previous days they had sallied out into the narrow way and fought there, guarding the defensive wall. [3] Now, however, they joined battle outside the narrows and many of the barbarians fell, for the leaders of the companies beat everyone with whips from behind, urging them ever forward. Many of them were pushed into the sea and drowned; far more were trampled alive by each other, with no regard for who perished. [4] Since the Hellenes knew that they must die at the hands of those who had come around the mountain, they displayed the greatest strength they had against the barbarians, fighting recklessly and desperately.","places":[]},{"id":224,"text":"By this time most of them had had their spears broken and were killing the Persians with swords. Leonidas, proving himself extremely valiant, fell in that struggle and with him other famous Spartans, whose names I have learned by inquiry since they were worthy men. Indeed, I have learned by inquiry the names of all three hundred.115 [2] Many famous Persians also fell there, including two sons of Darius, Abrocomes and Hyperanthes, born to Darius by Phratagune daughter of Artanes. Artanes was the brother of king Darius and son of Hystaspes son of Arsames. When he gave his daughter in marriage to Darius, he gave his whole house as dowry, since she was his only child.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":75,"endOffset":83},{"placeId":"570685","name":"Spartans","startOffset":190,"endOffset":198},{"placeId":"geonames-130758","name":"Persians","startOffset":351,"endOffset":359}]},{"id":225,"text":"Two brothers of Xerxes accordingly fought and fell there. There was a great struggle between the Persians and Lacedaemonians over Leonidas' body, until the Hellenes by their courageous prowess dragged it away and routed their enemies four times. The battle went on until the men with Epialtes arrived. [2] When the Hellenes saw that they had come, the contest turned, for they retired to the narrow part of the way, passed behind the wall, and took their position crowded together on the hill, all except the Thebans. This hill is at the mouth of the pass, where the stone lion in honor of Leonidas now stands. [3] In that place they defended themselves with swords, if they still had them, and with hands and teeth. The barbarians buried them with missiles, some attacking from the front and throwing down the defensive wall, others surrounding them on all sides.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":97,"endOffset":105},{"placeId":"570406","name":"Lacedaemonians","startOffset":110,"endOffset":124}]},{"id":226,"text":"This then is how the Lacedaemonians and Thespians conducted themselves, but the Spartan Dieneces is said to have exhibited the greatest courage of all. They say that he made the following speech before they joined battle with the Medes: he had learned from a Trachinian that there were so many of the barbarians that when they shot their missiles, the sun was hidden by the multitude of their arrows. [2] He was not at all disturbed by this and made light of the multitude of the Medes, saying that their Trachinian foreigner brought them good news. If the Medes hid the sun, they could fight them in the shade instead of in the sun. This saying and others like it, they claim, Dieneces the Lacedaemonian left behind as a memorial.","places":[{"placeId":"570406","name":"Lacedaemonians","startOffset":21,"endOffset":35},{"placeId":"570685","name":"Spartan","startOffset":80,"endOffset":87},{"placeId":"903080","name":"Medes","startOffset":230,"endOffset":235},{"placeId":"903080","name":"Medes","startOffset":480,"endOffset":485},{"placeId":"903080","name":"Medes","startOffset":557,"endOffset":562},{"placeId":"570406","name":"Lacedaemonian","startOffset":691,"endOffset":704}]},{"id":227,"text":"Next after him two Lacedaemonian brothers, Alpheus and Maron, sons of Orsiphantus, are said to have been most courageous. The Thespian who gained most renown was one whose name was Dithyrambus son of Harmatides.","places":[{"placeId":"570406","name":"Lacedaemonian","startOffset":19,"endOffset":32}]},{"id":228,"text":"There is an inscription written over these men, who were buried where they fell, and over those who died before the others went away, dismissed by Leonidas. It reads as follows: Here four thousand from the Peloponnese once fought three million.  [2]That inscription is for them all, but the Spartans have their own: Foreigner, go tell the Spartans that we lie here obedient to their commands.  [3]That one is to the Lacedaemonians, this one to the seer: This is a monument to the renowned Megistias, Slain by the Medes who crossed the Spercheius river. The seer knew well his coming doom, But endured not to abandon the leaders of Sparta.  [4]Except for the seer's inscription, the Amphictyons are the ones who honored them by erecting inscriptions and pillars. That of the seer Megistias was inscribed by Simonides son of Leoprepes because of his tie of guest-friendship with the man.116","places":[{"placeId":"570685","name":"Spartans","startOffset":293,"endOffset":301},{"placeId":"570685","name":"Spartans","startOffset":342,"endOffset":350},{"placeId":"570406","name":"Lacedaemonians","startOffset":420,"endOffset":434},{"placeId":"903080","name":"Medes","startOffset":518,"endOffset":523},{"placeId":"570685","name":"Sparta","startOffset":636,"endOffset":642}]},{"id":229,"text":"It is said that two of these three hundred, Eurytus and Aristodemus, could have agreed with each other either to come home safely together to Sparta, since Leonidas had dismissed them from the camp and they were lying at Alpeni very sick of ophthalmia, or to die with the others, if they were unwilling to return home. They could have done either of these things, but they could not agree and had different intentions. When Eurytus learned of the Persians circuit, he demanded his armor and put it on, bidding his helot to lead him to the fighting. The helot led him there and fled, but he rushed into the fray and was killed. Aristodemus, however, lost his strength and stayed behind. [2] Now if Aristodemus alone had been sick and returned to Sparta, or if they had both made the trip, I think the Spartans would not have been angry with them. When, however, one of them died, and the other had the same excuse but was unwilling to die, the Spartans had no choice but to display great anger towards Aristodemus.","places":[{"placeId":"570685","name":"Sparta","startOffset":142,"endOffset":148},{"placeId":"geonames-130758","name":"Persians","startOffset":447,"endOffset":455},{"placeId":"570685","name":"Sparta","startOffset":745,"endOffset":751},{"placeId":"570685","name":"Spartans","startOffset":800,"endOffset":808},{"placeId":"570685","name":"Spartans","startOffset":943,"endOffset":951}]},{"id":230,"text":"Some say that Aristodemus came home safely to Sparta in this way and by this excuse. Others say that he had been sent out of the camp as a messenger and could have gotten back in time for the battle but chose not to, staying behind on the road and so surviving, while his fellow-messenger arrived at the battle and was killed.","places":[{"placeId":"570685","name":"Sparta","startOffset":46,"endOffset":52}]},{"id":231,"text":"When Aristodemus returned to Lacedaemon, he was disgraced and without honor. He was deprived of his honor in this way: no Spartan would give him fire or speak with him, and they taunted him by calling him Aristodemus the Trembler. In the battle at Plataea, however, he made up for all the blame brought against him.","places":[{"placeId":"570406","name":"Lacedaemon","startOffset":29,"endOffset":39},{"placeId":"570685","name":"Spartan","startOffset":122,"endOffset":129}]},{"id":232,"text":"It is said that another of the three hundred survived because he was sent as a messenger to Thessaly. His name was Pantites. When he returned to Sparta, he was dishonored and hanged himself.","places":[{"placeId":"1332","name":"Thessaly","startOffset":92,"endOffset":100},{"placeId":"570685","name":"Sparta","startOffset":145,"endOffset":151}]},{"id":233,"text":"The Thebans, whose general was Leontiades, fought against the king's army as long as they were with the Hellenes and under compulsion. When, however, they saw the Persian side prevailing and the Hellenes with Leonidas hurrying toward the hill, they split off and approached the barbarians, holding out their hands. With the most truthful words ever spoken, they explained that they were Medizers, had been among the first to give earth and water to the king, had come to Thermopylae under constraint, and were guiltless of the harm done to the king. [2] By this plea they saved their lives, and the Thessalians bore witness to their words. They were not, however, completely lucky. When the barbarians took hold of them as they approached, they killed some of them even as they drew near. Most of them were branded by Xerxes command with the kings marks, starting with the general Leontiades. His son Eurymachus long afterwards117 was murdered by the Plataeans when, as general of four hundred Thebans, he seized the town of Plataea.","places":[{"placeId":"geonames-130758","name":"Persian","startOffset":163,"endOffset":170},{"placeId":"541140","name":"Thermopylae","startOffset":471,"endOffset":482}]},{"id":234,"text":"This, then, is how the Greeks fought at Thermopylae. Xerxes then sent for Demaratus and questioned him, saying first, Demaratus you are a good man. I hold that proven by the plain truth, for things have turned out no differently than you foretold. Now, tell me this: how many Lacedaemonians are left, and how many of them are warriors like these? or is it so with them all? [2] My king, said Demaratus, the number of the Lacedaemonians is great, and so too the number of their cities. But what you would like to know, I will tell you: there is in Lacedaemon a city called Sparta, a city of about eight thousand men, all of them equal to those who have fought here; the rest of the Lacedaemonians are not equal to these, yet they are valiant men. [3] And how, Demaratus, answered Xerxes, can we overcome those men with the least trouble to ourselves? Come, disclose that to me, for you have been their king and know the plan and order of their counsels.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":23,"endOffset":29},{"placeId":"541140","name":"Thermopylae","startOffset":40,"endOffset":51},{"placeId":"570406","name":"Lacedaemonians","startOffset":277,"endOffset":291},{"placeId":"570406","name":"Lacedaemonians","startOffset":426,"endOffset":440},{"placeId":"570406","name":"Lacedaemon","startOffset":552,"endOffset":562},{"placeId":"570685","name":"Sparta","startOffset":577,"endOffset":583},{"placeId":"570406","name":"Lacedaemonians","startOffset":686,"endOffset":700}]},{"id":235,"text":"My king, Demaratus replied, if you in sincerity ask my counsel, it is but right that I should point out to you the best way. It is this, namely that you should send three hundred ships of your fleet to the Laconian land. [2] There is an island lying off their coasts called Cythera. Chilon, a man of much wisdom among us, says about it that it would be better for the Spartans if Cythera were beneath the sea rather than above it. This he said because he expected that it would provide an opportunity for attack just as I am suggestingnot that he had any foreknowledge of your force, but he dreaded all men's forces alike. [3] Let them then make that island their station and set out from there to strike fear into the Lacedaemonians. If these have a war of their own on their borders, you will have no cause to fear that they will send men to save the rest of Hellas from being overrun by your armies; furthermore, the enslavement of the rest of Hellas must weaken Laconia if it is left to stand alone. [4] If, however, you do not do this, then expect what I will now tell you: a narrow isthmus leads to the Peloponnese; all the Peloponnesians will be banded together there against you, and you may expect battles more stubborn than those that you have fought already. But if you do as I have said, then you may have that isthmus and all their cities without striking a blow.","places":[{"placeId":"570685","name":"Spartans","startOffset":371,"endOffset":379},{"placeId":"570406","name":"Lacedaemonians","startOffset":723,"endOffset":737},{"placeId":"geonames-390903","name":"Hellas","startOffset":951,"endOffset":957}]},{"id":236,"text":"Next spoke Achaemenes, Xerxes' brother and admiral of the fleet; it chanced that he was present during their conversation, and he feared that Xerxes would be persuaded to follow Demaratus' counsel. O king, he said, I see that you are listening to a man who is jealous of your good fortune or is perhaps even a traitor to your cause. These are the ways that are dear to the hearts of all Greeks: they are jealous of success and they hate power. [2] No, if after the recent calamity which has wrecked four hundred of your ships you send away three hundred more from your fleet to sail round the Peloponnese, your enemies will be enough to do battle with you; while your fleet is united, however, it is invincible, and your enemies will not be so many as to be enough to fight; moreover, all your navy will be a help to your army and your army to your navy, both moving together. If you separate some of your fleet from yourself, you will be of no use to them, nor they to you. [3] My counsel is rather that you make your own plans well, and take no account of the business of your adversaries, what battlefields they will choose, what they will do, and how many they are. They are able enough to think for themselves, and we similarly for ourselves. As for the Lacedaemonians, if they meet the Persians in the field, they will in no way repair their most recent losses.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":390,"endOffset":396},{"placeId":"570406","name":"Lacedaemonians","startOffset":1262,"endOffset":1276},{"placeId":"geonames-130758","name":"Persians","startOffset":1295,"endOffset":1303}]},{"id":237,"text":"Achaemenes, Xerxes answered, I think that you speak well, and I will do as you counsel. Despite the fact that your advice is better than his, Demaratus does say what he supposes to be most serviceable to me, [2] for assuredly I will never believe that he is no friend to my cause. I believe this of him because of all that he has already said and by what is the truth, namely, that if one citizen prospers, another citizen is jealous of him and shows his enmity by silence, and no one, (except if he has attained the height of excellence; and such are seldom seen) if his own townsman asks for counsel, will give him what he thinks to be the best advice. [3] If one stranger prospers, however, another stranger is beyond all men his well-wisher and will, if he is asked, impart to him the best counsel he has. It is for this reason that I bid you all to refrain from maligning Demaratus, seeing that he is a stranger and a friend.","places":[]},{"id":238,"text":"Having spoken in this way, Xerxes passed over the place where the dead lay and hearing that Leonidas had been king and general of the Lacedaemonians, he gave orders to cut off his head and impale it. [2] It is plain to me by this piece of evidence among many others, that while Leonidas lived, king Xerxes was more incensed against him than against all others; otherwise he would never have dealt so outrageously with his dead body, for the Persians are beyond all men known in the habit of honoring valiant warriors. They, then, who received these orders did as I have said.","places":[{"placeId":"570406","name":"Lacedaemonians","startOffset":134,"endOffset":148},{"placeId":"geonames-130758","name":"Persians","startOffset":441,"endOffset":449}]},{"id":239,"text":"I return now to that place in my history where it earlier left off.118 The Lacedaemonians were the first to be informed that the king was equipping himself to attack Hellas; with this knowledge it was that they sent to the oracle at Delphi, where they received the answer about which I spoke a little while ago. Now the way in which they were informed of this was strange. [2] Demaratus son of Ariston, an exile among the Medes, was, as I suppose (reason being also my ally), no friend to the Lacedaemonians, and I leave it to be imagined whether what he did was done out of goodwill or spiteful triumph. When Xerxes was resolved to march against Hellas, Demaratus, who was then at Susa and had knowledge of this, desired to send word of it to the Lacedaemonians. [3] He, however, feared detection and had no other way of informing them than this trick:taking a double tablet, he scraped away the wax from it, and then wrote the king's plan on the wood. Next he melted the wax back again over the writing, so that the bearer of this seemingly blank tablet might not be troubled by the way-wardens. [4] When the tablet came to Lacedaemon, the Lacedaemonians could not guess its meaning, until at last (as I have been told) Gorgo, Cleomenes' daughter and Leonidas' wife, discovered the trick herself and advised them to scrape the wax away so that they would find writing on the wood. When they did so, they found and read the message, and presently sent it to the rest of the Greeks. This is the story, as it is told.HerodotusThe Histories","places":[{"placeId":"570406","name":"Lacedaemonians","startOffset":75,"endOffset":89},{"placeId":"540726","name":"Delphi","startOffset":233,"endOffset":239},{"placeId":"903080","name":"Medes","startOffset":422,"endOffset":427},{"placeId":"570406","name":"Lacedaemonians","startOffset":493,"endOffset":507},{"placeId":"geonames-390903","name":"Hellas","startOffset":647,"endOffset":653},{"placeId":"912936","name":"Susa","startOffset":682,"endOffset":686},{"placeId":"570406","name":"Lacedaemonians","startOffset":748,"endOffset":762},{"placeId":"570406","name":"Lacedaemon","startOffset":1127,"endOffset":1137},{"placeId":"570406","name":"Lacedaemonians","startOffset":1143,"endOffset":1157},{"placeId":"geonames-390903","name":"Greeks","startOffset":1476,"endOffset":1482}]}]`)},8:{id:8,title:"Book 8: Urania",chapters:JSON.parse(`[{"id":1,"text":"The Greeks appointed to serve in the fleet were these: the Athenians furnished a hundred and twenty-seven ships; the Plataeans manned these ships with the Athenians, not that they had any knowledge of seamanship, but because of mere valor and zeal. The Corinthians furnished forty ships and the Megarians twenty; [2] the Chalcidians manned twenty, the Athenians furnishing the ships; the Aeginetans eighteen, the Sicyonians twelve, the Lacedaemonians ten, the Epidaurians eight, the Eretrians seven, the Troezenians five, the Styrians two, and the Ceans two, and two fifty-oared barks; the Opuntian Locrians brought seven fifty-oared barks to their aid.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":4,"endOffset":10},{"placeId":"579885","name":"Athenians","startOffset":59,"endOffset":68},{"placeId":"541063","name":"Plataeans","startOffset":117,"endOffset":126},{"placeId":"579885","name":"Athenians","startOffset":155,"endOffset":164},{"placeId":"570182","name":"Corinthians","startOffset":253,"endOffset":264},{"placeId":"570468","name":"Megarians","startOffset":295,"endOffset":304},{"placeId":"491561","name":"Chalcidians","startOffset":321,"endOffset":332},{"placeId":"579885","name":"Athenians","startOffset":352,"endOffset":361},{"placeId":"579844","name":"Aeginetans","startOffset":388,"endOffset":398},{"placeId":"570406","name":"Lacedaemonians","startOffset":436,"endOffset":450}]},{"id":2,"text":"These are the forces which came to Artemisium for battle, and I have now shown how they individually furnished the whole sum. The number of ships mustered at Artemisium was two hundred and seventy-one, besides the fifty-oared barks. [2] The Spartans, however, provided the admiral who had the chief command, Eurybiades, son of Euryclides, for the allies said that if the Laconian were not their leader, they would rather make an end of the fleet that was assembling than be led by the Athenians.","places":[{"placeId":"540667","name":"Artemisium","startOffset":35,"endOffset":45},{"placeId":"570685","name":"Spartans","startOffset":241,"endOffset":249},{"placeId":"579885","name":"Athenians","startOffset":485,"endOffset":494}]},{"id":3,"text":"In the first days, before the sending to Sicily for alliance, there had been talk of entrusting the command at sea to the Athenians. However, when the allies resisted, the Athenians waived their claim, considering the safety of Hellas of prime importance and seeing that if they quarrelled over the leadership, Hellas must perish. In this they judged rightly, for civil strife is as much worse than united war as war is worse than peace. [2] Knowing that, they gave ground and waived their claim, but only so long as they had great need of the others. This is clear, for when they had driven the Persian back and the battle was no longer for their territory but for his, they made a pretext of Pausanias' highhandedness and took the command away from the Lacedaemonians. All that, however, took place later.","places":[{"placeId":"579885","name":"Athenians","startOffset":122,"endOffset":131},{"placeId":"579885","name":"Athenians","startOffset":172,"endOffset":181},{"placeId":"geonames-390903","name":"Hellas","startOffset":228,"endOffset":234},{"placeId":"geonames-390903","name":"Hellas","startOffset":311,"endOffset":317},{"placeId":"geonames-130758","name":"Persian","startOffset":596,"endOffset":603},{"placeId":"570406","name":"Lacedaemonians","startOffset":755,"endOffset":769}]},{"id":4,"text":"But now, the Greeks who had at last come to Artemisium saw a multitude of ships launched at Aphetae and forces everywhere, and contrary to all expectation, the barbarian was shown to be in much different shape than they had supposed. They accordingly lost heart and began to deliberate about flight from Artemisium homewards into Hellas. [2] Then the Euboeans, noticing that they were making such plans, entreated Eurybiades to wait a little while, till they themselves had removed their children and households. When they could not prevail with him, they tried another way and gave Themistocles, the Athenian admiral, a bribe of thirty talents on the condition that the Greek fleet should remain there and fight, when they fought, to defend Euboea.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":13,"endOffset":19},{"placeId":"540667","name":"Artemisium","startOffset":44,"endOffset":54},{"placeId":"geonames-390903","name":"Hellas","startOffset":330,"endOffset":336},{"placeId":"579885","name":"Athenian","startOffset":601,"endOffset":609}]},{"id":5,"text":"This was the way in which Themistocles made the Greeks stay where they were: he gave Eurybiades for his share five talents of that money, as though he were making the present of his own money. When Eurybiades had been won over in this way, none of the rest was inclined to resist save Adimantus, son of Ocytus, the Corinthian admiral, who said that he would not remain but sail away from Artemisium; to him Themistocles, adding an oath, said: [2] No, you of all men will not desert us, for I will give you a greater gift than the king of the Medes would send you for deserting your allies. With that he sent three talents of silver to Adimantus ship. [3] These two, then, were won over by gifts, the Euboeans got what they wanted, and Themistocles himself was the gainer. No one knew that he had kept the rest of the money, and those who had received a part of it supposed that it had been sent for that purpose by the Athenians.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":48,"endOffset":54},{"placeId":"540667","name":"Artemisium","startOffset":388,"endOffset":398},{"placeId":"579885","name":"Athenians","startOffset":921,"endOffset":930}]},{"id":6,"text":"So the Greeks remained in Euboea and fought there; this came about as I will now reveal. Having arrived at Aphetae in the early part of the afternoon, the barbarians saw for themselves the few Greek ships that they had already heard were stationed off Artemisium, and they were eager to attack so that they might take them. [2] They were not prepared to make a head-on attack since they feared that the Greeks would see them coming and turn to flee with night close upon them as they fled; it was their belief that the Greeks would save themselves by flight, and they did not want even so much as a firebearer to be saved.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":7,"endOffset":13},{"placeId":"540775","name":"Euboea","startOffset":26,"endOffset":32},{"placeId":"540667","name":"Artemisium","startOffset":252,"endOffset":262},{"placeId":"geonames-390903","name":"Greeks","startOffset":403,"endOffset":409},{"placeId":"geonames-390903","name":"Greeks","startOffset":519,"endOffset":525}]},{"id":7,"text":"Taking these things into consideration, they devised the following plan; separating two hundred ships from the whole number, they sent them to cruise outside Sciathus so that the enemies might not see them sailing round Euboea and by way of Caphereus round Geraestus to the Euripus so that they might catch the Greeks between them, the one part holding that course and barring the retreat, and they themselves attacking in front. [2] Upon making these plans they sent the appointed ships on their way, intending not to make an attack upon the Greeks either on that day or before the signal should be seen, whereby the ships that sailed round were to declare their coming. So they sent those ships to sail round, and set about counting the rest at Aphetae.","places":[{"placeId":"540775","name":"Euboea","startOffset":220,"endOffset":226},{"placeId":"geonames-390903","name":"Greeks","startOffset":311,"endOffset":317},{"placeId":"geonames-390903","name":"Greeks","startOffset":543,"endOffset":549}]},{"id":8,"text":"Now when they were engaged in this count, there was in the fleet one Scyllias, a man of Scione; he was the best diver of the time, and in the shipwreck at Pelion he had saved for the Persians much of their possessions and gotten much for himself in addition; this Scyllias had before now, it would seem, intended to desert to the Greeks, but he never had had so fair an occasion as now. [2] By what means he did at last make his way to the Greeks, I cannot with exactness say. If the story is true, it is marvellous indeed, for it is said that he dove into the sea at Aphetae and never rose to the surface till he came to Artemisium, thus passing underneath the sea for about eighty furlongs. [3] There are many tales about this man, some similar to lies and some true, but as regards the present business it is my opinion that he came to Artemisium in a boat. After arriving, he straightway told the admirals the story of the shipwreck, and of the ships that had been sent round Euboea.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":183,"endOffset":191},{"placeId":"geonames-390903","name":"Greeks","startOffset":330,"endOffset":336},{"placeId":"geonames-390903","name":"Greeks","startOffset":440,"endOffset":446},{"placeId":"540667","name":"Artemisium","startOffset":622,"endOffset":632},{"placeId":"540775","name":"Euboea","startOffset":980,"endOffset":986}]},{"id":9,"text":"Hearing that, the Greeks took counsel together; there was much talk, but the opinion prevailed that they should remain and encamp where they were for that day, and then, after midnight, to put to sea and meet the ships which were sailing around. Presently, however, meeting with no opposition, they waited for the late afternoon of the day and themselves advanced their ships against the barbarian, desiring to put to the proof his fashion of fighting and the art of breaking the line.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":18,"endOffset":24}]},{"id":10,"text":"When Xerxes' men and their generals saw the Greeks bearing down on them with but a few ships, they thought that they were definitely mad and put out to sea themselves, thinking that they would win an easy victory; this expectation was very reasonable, since they saw that the Greek ships so few while their own were many times more numerous and more seaworthy. With this assurance, they hemmed in the Greeks in their midst. [2] Now all the Ionians who were friendly to the Greeks came unwillingly to the war and were distressed to see the Greeks surrounded. They supposed that not one of them would return home, so powerless did the Greeks seem to them to be. [3] Those who were glad about the business, however, vied each with each that he might be the first to take an Attic ship and receive gifts from the king, for it was the Athenians of whom there was most talk in the fleet.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":44,"endOffset":50},{"placeId":"geonames-390903","name":"Greeks","startOffset":401,"endOffset":407},{"placeId":"geonames-390903","name":"Greeks","startOffset":473,"endOffset":479},{"placeId":"geonames-390903","name":"Greeks","startOffset":539,"endOffset":545},{"placeId":"geonames-390903","name":"Greeks","startOffset":633,"endOffset":639},{"placeId":"579885","name":"Athenians","startOffset":830,"endOffset":839}]},{"id":11,"text":"But the Greeks, when the signal was given them, first drew the sterns of their ships together, their prows turned towards the foreigners; then at the second signal they put their hands to the work, despite the fact that they were hemmed in within a narrow space and were fighting face-to-face. [2] There they took thirty of the foreigners ships as well as the brother of Gorgus king of Salamis, Philaon son of Chersis, a man of note in the fleet. The first Greek to take an enemy ship was an Athenian, Lycomedes, son of Aeschraeus, and he it was who received the prize for valor. [3] They fought that sea-fight with doubtful issue, and nightfall ended the battle; the Greeks sailed back to Artemisium, and the barbarians to Aphetae, after faring far below their hopes in the fight. In that battle Antidorus of Lemnos, the only one of the Greeks siding with the Persian, deserted to the Greeks, and for that the Athenians gave him land in Salamis.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":8,"endOffset":14},{"placeId":"707617","name":"Salamis","startOffset":386,"endOffset":393},{"placeId":"579885","name":"Athenian","startOffset":492,"endOffset":500},{"placeId":"geonames-390903","name":"Greeks","startOffset":668,"endOffset":674},{"placeId":"540667","name":"Artemisium","startOffset":690,"endOffset":700},{"placeId":"geonames-390903","name":"Greeks","startOffset":838,"endOffset":844},{"placeId":"geonames-130758","name":"Persian","startOffset":861,"endOffset":868},{"placeId":"geonames-390903","name":"Greeks","startOffset":886,"endOffset":892},{"placeId":"579885","name":"Athenians","startOffset":911,"endOffset":920},{"placeId":"580101","name":"Salamis","startOffset":938,"endOffset":945}]},{"id":12,"text":"When darkness came on, the season being then midsummer, there was abundance of rain all through the night and violent thunderings from Pelion. The dead and the wrecks were driven towards Aphetae, where they were entangled with the ships' prows and jumbled the blades of the oars. [2] The ships crews who were there were dismayed by the noise of this, and considering their present bad state, expected utter destruction; for before they had recovered from the shipwreck and the storm off Pelion, they next endured a stubborn sea-fight, and after the sea-fight, rushing rain and mighty torrents pouring seaward and violent thunderings.","places":[]},{"id":13,"text":"This is how the night dealt with them. To those who were appointed to sail round Euboea, however, that same night was still more cruel since it caught them on the open sea. Their end was a terrible one, for when the storm and the rain came on them in their course off the Hollows of Euboea, they were driven by the wind in an unknown direction and were driven onto the rocks. All this was done by the god so that the Persian power might be more equally matched with the Greek, and not much greater than it.","places":[{"placeId":"540775","name":"Euboea","startOffset":81,"endOffset":87},{"placeId":"540775","name":"Euboea","startOffset":283,"endOffset":289},{"placeId":"geonames-130758","name":"Persian","startOffset":417,"endOffset":424}]},{"id":14,"text":"These men, then, perished at the Hollows of Euboea. As for the barbarians at Aphetae, when to their great comfort the day dawned, they kept their ships unmoved, being in their evil plight well content to do nothing for the moment. Now fifty-three Attic ships came to aid the Greeks, [2] who were encouraged both by the ships coming and by the news that the barbarians sailing round Euboea had all perished in the recent storm. They waited then for the same hour as before, and fell upon certain Cilician ships when they put to sea. After destroying these when night fell, they sailed back to Artemisium.","places":[{"placeId":"540775","name":"Euboea","startOffset":44,"endOffset":50},{"placeId":"geonames-390903","name":"Greeks","startOffset":275,"endOffset":281},{"placeId":"540775","name":"Euboea","startOffset":382,"endOffset":388},{"placeId":"540667","name":"Artemisium","startOffset":592,"endOffset":602}]},{"id":15,"text":"On the third day, however, the barbarian admirals, finding it hard to bear that so few ships should do them hurt and fearing Xerxes' anger, waited no longer for the Greeks to begin the fight, but gave the word and put out to sea about midday. So it came to pass that these sea-battles were fought on the same days as the land-battles at Thermopylae; [2] the seamen's whole endeavor was to hold the Euripus while Leonidas' men strove to guard the passage; the Greeks were ordered to give the barbarian no entry into Hellas, and the Persians to destroy the Greek host and win the strait.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":165,"endOffset":171},{"placeId":"geonames-390903","name":"Greeks","startOffset":459,"endOffset":465},{"placeId":"geonames-390903","name":"Hellas","startOffset":515,"endOffset":521},{"placeId":"geonames-130758","name":"Persians","startOffset":531,"endOffset":539}]},{"id":16,"text":"So when Xerxes' men ordered their battle and advanced, the Greeks remained in their station off Artemisium, and the barbarians made a half circle of their ships striving to encircle and enclose them. At that the Greeks charged and joined battle. In that sea-fight both had equal success. [2] Xerxes' fleet did itself harm by its numbers and size. The ships were thrown into confusion and ran foul of each other; nevertheless they held fast and did not yield, for they could not bear to be put to flight by a few ships. [3] Many were the Greek ships and men that perished there, and far more yet of the foreigners' ships and men; this is how they fought until they drew off and parted from each other.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":59,"endOffset":65},{"placeId":"540667","name":"Artemisium","startOffset":96,"endOffset":106},{"placeId":"geonames-390903","name":"Greeks","startOffset":212,"endOffset":218}]},{"id":17,"text":"In that sea-fight of all Xerxes' fighters the Egyptians conducted themselves with the greatest valor; besides other great feats of arms which they achieved, they took five Greek ships together with their crews. As regards the Greeks, it was the Athenians who bore themselves best on that day, and of the Athenians Clinias son of Alcibiades. He brought to the war two hundred men and a ship of his own, all at his own expense.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":226,"endOffset":232},{"placeId":"579885","name":"Athenians","startOffset":245,"endOffset":254},{"placeId":"579885","name":"Athenians","startOffset":304,"endOffset":313}]},{"id":18,"text":"So they parted, and each hurried gladly to his own place of anchorage. When the Greeks had withdrawn and come out of the battle, they were left in possession of the dead and the wrecks. They had, however, had a rough time of it themselves, chiefly the Athenians, half of whose ships had suffered some damage. Now their counsel was to flee to the inner waters of Hellas 19.Themistocles thought that if the Ionian and Carian nations were removed from the forces of the barbarians, the Greeks might be strong enough to prevail over the rest. Now it was the custom of the Euboeans to drive their flocks down to the sea there. Gathering the admirals together, he told them that he thought he had a device whereby he hoped to draw away the best of the king's allies. [2] So much he revealed for the moment, but merely advised them to let everyone slay as many from the Euboean flocks as he wanted; it was better that the fleet should have them, than the enemy. Moreover, he counselled them each to order his men to light a fire; as for the time of their departure from that place, he would see to it that they would return to Hellas unscathed. All this they agreed to do and immediately lit fires and set upon the flocks.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":80,"endOffset":86},{"placeId":"579885","name":"Athenians","startOffset":252,"endOffset":261},{"placeId":"geonames-390903","name":"Hellas","startOffset":362,"endOffset":368},{"placeId":"geonames-390903","name":"Greeks","startOffset":483,"endOffset":489},{"placeId":"geonames-390903","name":"Hellas","startOffset":1120,"endOffset":1126}]},{"id":20,"text":"Now the Euboeans had neglected the oracle of Bacis, believing it to be empty of meaning, and neither by carrying away nor by bringing in anything had they shown that they feared an enemy's coming. In so doing they were the cause of their own destruction, [2] for Bacis' oracle concerning this matter runs as follows When a strange-tongued man casts a yoke of papyrus on the waves, Then take care to keep bleating goats far from the coasts of Euboea To these verses the Euboeans gave no heed; but in the evils then present and soon to come they suffered the greatest calamity.","places":[]},{"id":21,"text":"While the Greeks were doing as I have said, there came to them their lookout from Trachis. There was a scout at Artemisium, one Polyas, a native of Anticyra, who was charged (and had a rowing boat standing ready for it), if the fleet should suffer a reverse to declare it to the men at Thermopylae. Similarly, if any ill should befall the land army, Abronichus son of Lysicles, an Athenian, was with Leonidas, ready for his part to bring the news in a thirty-oared bark to the Greeks at Artemisium. [2] So this Abronichus came and declared to them the fate of Leonidas and his army. When the Greeks learned this, they no longer delayed their departure but went their ways in their appointed order, the Corinthians first and last of all the Athenians.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":10,"endOffset":16},{"placeId":"540667","name":"Artemisium","startOffset":112,"endOffset":122},{"placeId":"579885","name":"Athenian","startOffset":381,"endOffset":389},{"placeId":"geonames-390903","name":"Greeks","startOffset":477,"endOffset":483},{"placeId":"geonames-390903","name":"Greeks","startOffset":592,"endOffset":598},{"placeId":"570182","name":"Corinthians","startOffset":702,"endOffset":713},{"placeId":"579885","name":"Athenians","startOffset":740,"endOffset":749}]},{"id":22,"text":"Themistocles, however, picked out the seaworthiest Athenian ships and made his way to the places where drinking water could be found. Here he engraved on the rocks words which the Ionians read on the next day when they came to Artemisium. This was what the writing said: Men of Ionia, you do wrongly to fight against the land of your fathers and bring slavery upon Hellas. [2] It would best for you to join yourselves to us, but if that should be impossible for you, then at least now withdraw from the war, and entreat the Carians to do the same as you. If neither of these things may be and you are fast bound by such constraint that you cannot rebel, yet we ask you not to use your full strength in the day of battle. Remember that you are our sons and that our quarrel with the barbarian was of your making in the beginning. [3] To my thinking Themistocles wrote this with a double intent, namely that if the king knew nothing of the writing, it might induce the Ionians to change sides and join with the Greeks, while if the writing were maliciously reported to Xerxes, he might thereby be led to mistrust the Ionians and keep them out of the sea-fights.","places":[{"placeId":"579885","name":"Athenian","startOffset":51,"endOffset":59},{"placeId":"540667","name":"Artemisium","startOffset":227,"endOffset":237},{"placeId":"geonames-390903","name":"Hellas","startOffset":366,"endOffset":372},{"placeId":"geonames-390903","name":"Greeks","startOffset":1011,"endOffset":1017}]},{"id":23,"text":"Such was Themistocles' writing. Immediately after this there came to the barbarians a man of Histiaea in a boat, telling them of the flight of the Greeks from Artemisium. Not believing this, they kept the bringer of the news in confinement and sent swift ships to spy out the matter. When the crews of these brought word of the truth, the whole armada sailed all together to Artemisium at the crack of dawn. Here they waited till midday and then sailed to Histiaea. Upon their arrival they took possession of the Histiaeans' city and overran all the villages on the seaboard of the Ellopian region, which is a district belonging to Histiaea.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":147,"endOffset":153},{"placeId":"540667","name":"Artemisium","startOffset":159,"endOffset":169}]},{"id":24,"text":"While they were there, Xerxes sent a herald to the fleet. Before sending him, Xerxes had made the following preparations: of all his own soldiers who had fallen at Thermopylae (that is, as many as twenty thousand) he left about a thousand, and the rest he buried in trenches, which he covered with leaves and heaped earth so that the men of the fleet might not see them. [2] When the herald had crossed over to Histiaea, he assembled all the men of the fleet and said: Men of our allies, King Xerxes permits any one of you who should so desire to leave his place and come to see how he fights against those foolish men who thought they could overcome the king's power.","places":[]},{"id":25,"text":"After this proclamation, there was nothing so hard to get as a boat, so many were they who wanted to see this. They crossed over and went about viewing the dead. All of them supposed that the fallen Greeks were all Lacedaemonians and Thespians, though helots were also there for them to see. [2] For all that, however, those who crossed over were not deceived by what Xerxes had done with his own dead, for the thing was truly ridiculous; of the Persians a thousand lay dead before their eyes, but the Greeks lay all together assembled in one place, to the number of four thousand. [3] All that day they spent in observation, and on the next the shipmen returned to their fleet at Histiaea while Xerxes' army set forth on its march.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":199,"endOffset":205},{"placeId":"570406","name":"Lacedaemonians","startOffset":215,"endOffset":229},{"placeId":"geonames-130758","name":"Persians","startOffset":446,"endOffset":454},{"placeId":"geonames-390903","name":"Greeks","startOffset":502,"endOffset":508}]},{"id":26,"text":"There had come to them a few deserters, men of Arcadia, lacking a livelihood and desirous to find some service. Bringing these men into the king's presence, the Persians inquired of them what the Greeks were doing, there being one who put this question in the name of all. [2] When the Arcadians told them that the Greeks were holding the Olympic festival and viewing sports and horseraces, the Persian asked what was the prize offered, for which they contended. They told him of the crown of olive that was given to the victor. Then Tigranes son of Artabanus uttered a most noble saying (but the king deemed him a coward for it); [3] when he heard that the prize was not money but a crown, he could not hold his peace, but cried, Good heavens, Mardonius, what kind of men are these that you have pitted us against? It is not for money they contend but for glory of achievement! Such was Tigranes' saying.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":161,"endOffset":169},{"placeId":"geonames-390903","name":"Greeks","startOffset":196,"endOffset":202},{"placeId":"geonames-390903","name":"Greeks","startOffset":315,"endOffset":321},{"placeId":"geonames-130758","name":"Persian","startOffset":395,"endOffset":402}]},{"id":27,"text":"In the meantime, immediately after the misfortune at Thermopylae, the Thessalians sent a herald to the Phocians, because they bore an old grudge against them and still more because of their latest disaster. [2] Now a few years before the king's expedition, the Thessalians and their allies had invaded Phocis with their whole army but had been worsted and roughly handled by the Phocians. [3] When the Phocians were besieged on Parnassus, they had with them the diviner Tellias of Elis; Tellias devised a stratagem for them: he covered six hundred of the bravest Phocians with gypsum, themselves and their armor, and led them to attack the Thessalians by night, bidding them slay whomever they should see not whitened. [4] The Thessalian sentinels were the first to see these men and to flee for fear, supposing falsely that it was something supernatural, and after the sentinels the whole army fled as well. The Phocians made themselves masters of four thousand dead, and their shields, of which they dedicated half at Abae and the rest at Delphi. [5] A tithe of what they won in that fight went to the making of the great statues that stand around the tripod in front of the shrine at Delphi, and there are others like them dedicated at Abae.","places":[{"placeId":"540726","name":"Delphi","startOffset":1041,"endOffset":1047},{"placeId":"540726","name":"Delphi","startOffset":1187,"endOffset":1193}]},{"id":28,"text":"This is what the besieged Phocians did with the Thessalian footsoldiers. When the Thessalian horsemen rode into their country, the Phocians did them mortal harm; they dug a great pit in the pass near Hyampolis and put empty jars inside it. They then covered it with earth till all was like the rest of the ground and awaited the onset of the Thessalians. These rode on intending to sweep the Phocians before them, and fell in among the jars, whereby their horses' legs were broken.","places":[]},{"id":29,"text":"These two deeds had never been forgiven by the Thessalians, and now they sent a herald with this message: Men of Phocis, it is time now that you confess yourselves to be no match for us. [2] We were even formerly preferred to you by the Greeks, as long as we were on their side, and now we bear such weight with the foreigner that it lies in our power to have you deprived of your lands and to have you enslaved. Nevertheless, although we could easily do these things, we bear you no ill-will for the past. Pay us fifty talents of silver for what you did, and we promise to turn aside what threatens your land.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":238,"endOffset":244}]},{"id":30,"text":"This was the Thessalians' offer. The Phocians alone of all that region would not take the Persians' side, and that for no other reason (if I argue correctly) than their hatred of the Thessalians. [2] Had the Thessalians aided the Greek side, then the Phocians would certainly have stood for the Persians. They replied to the offer of the Thessalians that they would give no money; they could do as the Thessalians did and take the Persian part, if for any cause they so wished, but they would not willingly betray the cause of Hellas.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":90,"endOffset":98},{"placeId":"geonames-130758","name":"Persians","startOffset":295,"endOffset":303},{"placeId":"geonames-130758","name":"Persian","startOffset":431,"endOffset":438},{"placeId":"geonames-390903","name":"Hellas","startOffset":527,"endOffset":533}]},{"id":31,"text":"When this answer was returned to them, the Thessalians in their wrath against the Phocians began to guide the barbarian on his march. From the lands of Trachis they broke into Doris; there is a narrow tongue of Dorian land stretching that way, about thirty furlongs wide, between the Malian territory and the Phocian, which in old time was Dryopian. This region is the motherland of the Dorians of the Peloponnese. To this Dorian territory the barbarians did no harm at their invasion, for the people took the Persian side, and the Thessalians would not have them harmed.","places":[{"placeId":"570577","name":"Peloponnese","startOffset":402,"endOffset":413},{"placeId":"geonames-130758","name":"Persian","startOffset":510,"endOffset":517}]},{"id":32,"text":"When they entered Phocis from Doris, they could not take the Phocians themselves, for some of the Phocians ascended to the heights of Parnassus. The peak of Parnassus called Tithorea, which rises by itself near the town Neon, has room enough for a multitude of people. It was there that they carried their goods and themselves ascended to it, [2] but most of them made their way out of the country to the Ozolian Locrians, where the town of Amphissa lies above the Crisaean plain. The barbarians, while the Thessalians so guided their army, overran the whole of Phocis. All that came within their power they laid waste to and burnt, setting fire to towns and temples.","places":[]},{"id":33,"text":"Marching this way down the river Cephisus, they ravaged everything that lay in their way, burning the towns of Drymus, Charadra, Erochus, Tethronium, Amphicaea, Neon, Pediea, Tritea, Elatea, Hyampolis, Parapotamii, and Abae, where there was a richly endowed temple of Apollo, provided with wealth of treasure and offerings. There was also then as now a place of divination at this place. This temple, too, they plundered and burnt, and they pursued and caught some of the Phocians near the mountains. Certain women too perished because of the multitude of their violators.","places":[]},{"id":34,"text":"Passing Parapotamii, the foreigners came to Panopea. There their army parted into two companies. The greater and stronger part of the host marched with Xerxes himself towards Athens and broke into the territory of Orchomenus in Boeotia. Now the whole population of Boeotia took the Persian side, and men of Macedonia sent by Alexander safeguarded their towns, each in his appointed place; the reason of the safeguarding was that Xerxes should see that the Boeotians were on the Persian side.","places":[{"placeId":"579885","name":"Athens","startOffset":175,"endOffset":181},{"placeId":"540689","name":"Boeotia","startOffset":228,"endOffset":235},{"placeId":"540689","name":"Boeotia","startOffset":265,"endOffset":272},{"placeId":"geonames-130758","name":"Persian","startOffset":282,"endOffset":289},{"placeId":"491656","name":"Macedonia","startOffset":307,"endOffset":316},{"placeId":"540689","name":"Boeotians","startOffset":456,"endOffset":465},{"placeId":"geonames-130758","name":"Persian","startOffset":478,"endOffset":485}]},{"id":35,"text":"So this part of the barbarian army marched as I have said, and others set forth with guides for the temple at Delphi, keeping Parnassus on their right. These, too, laid waste to every part of Phocis which they occupied, burning the towns of the Panopeans and Daulii and Aeolidae. [2] The purpose of their parting from the rest of the army and marching this way was that they might plunder the temple at Delphi and lay its wealth before Xerxes, who (as I have been told) had better knowledge of the most notable possessions in the temple than of what he had left in his own palace, chiefly the offerings of Croesus son of Alyattes; so many had always spoken of them.","places":[{"placeId":"540726","name":"Delphi","startOffset":110,"endOffset":116},{"placeId":"540726","name":"Delphi","startOffset":403,"endOffset":409}]},{"id":36,"text":"When the Delphians learned all this, they were very much afraid, and in their great fear they inquired of the oracle whether they should bury the sacred treasure in the ground or take it away to another country. The god told them to move nothing, saying that he was able to protect what belonged to him. [2] Upon hearing that, the Delphians took thought for themselves. They sent their children and women overseas to Achaia. Most of the men went up to the peaks of Parnassus and carried their goods into the Corycian cave, but some escaped to Amphissa in Locris. In short, all the Delphians left the town save sixty men and the prophet.","places":[{"placeId":"540726","name":"Delphians","startOffset":9,"endOffset":18},{"placeId":"540726","name":"Delphians","startOffset":331,"endOffset":340},{"placeId":"540726","name":"Delphians","startOffset":581,"endOffset":590}]},{"id":37,"text":"Now when the barbarians drew near and could see the temple, the prophet, whose name was Aceratus, saw certain sacred arms, which no man might touch without sacrilege, brought out of the chamber within and laid before the shrine. [2] So he went to tell the Delphians of this miracle, but when the barbarians came with all speed near to the temple of Athena Pronaea, they were visited by miracles yet greater than the aforesaid. Marvellous indeed it is, that weapons of war should of their own motion appear lying outside in front of the shrine, but the visitation which followed was more wondrous than anything else ever seen. [3] When the barbarians were near to the temple of Athena Pronaea, they were struck by thunderbolts from the sky, and two peaks broken off from Parnassus came rushing among them with a mighty noise and overwhelmed many of them. In addition to this a shout and a cry of triumph were heard from the temple of Athena.","places":[{"placeId":"540726","name":"Delphians","startOffset":256,"endOffset":265}]},{"id":38,"text":"All of this together struck panic into the barbarians, and the Delphians, perceiving that they fled, descended upon them and killed a great number. The survivors fled straight to Boeotia. Those of the barbarians who returned said (as I have been told) that they had seen other divine signs besides what I have just described: two men-at-arms of stature greater than human,they said, had come after them, slaying and pursuing.","places":[{"placeId":"540726","name":"Delphians","startOffset":63,"endOffset":72},{"placeId":"540689","name":"Boeotia","startOffset":179,"endOffset":186}]},{"id":39,"text":"These two, say the Delphians, were the native heroes Phylacus and Autonous, whose precincts are near the temple, Phylacus' by the road itself above the shrine of Athena Pronaea, and Autonous' near the Castalian spring, under the Hyarapean Peak. [2] The rocks that fell from Parnassus were yet to be seen in my day, lying in the precinct of Athena Pronaea, from where their descent through the foreigners' ranks had hurled them. Such, then, was the manner of those men's departure from the temple.","places":[{"placeId":"540726","name":"Delphians","startOffset":19,"endOffset":28}]},{"id":40,"text":"At the request of the Athenians, the fleet of the Hellenes came from Artemisium and put in at Salamis. The Athenians requested them to put in at Salamis so that they take their children and women out of Attica and also take counsel what they should do. They had been disappointed in their plans, so they were going to hold a council about the current state of affairs. [2] They expected to find the entire population of the Peloponnese in Boeotia awaiting the barbarian, but they found no such thing. They learned that they were fortifying the Isthmus instead and considered the defense of the Peloponnese the most important thing, disregarding all the rest. When the Athenians learned this, they asked the fleet to put in at Salamis.","places":[{"placeId":"579885","name":"Athenians","startOffset":22,"endOffset":31},{"placeId":"geonames-390903","name":"Hellenes","startOffset":50,"endOffset":58},{"placeId":"540667","name":"Artemisium","startOffset":69,"endOffset":79},{"placeId":"580101","name":"Salamis","startOffset":94,"endOffset":101},{"placeId":"579885","name":"Athenians","startOffset":107,"endOffset":116},{"placeId":"580101","name":"Salamis","startOffset":145,"endOffset":152},{"placeId":"570577","name":"Peloponnese","startOffset":424,"endOffset":435},{"placeId":"540689","name":"Boeotia","startOffset":439,"endOffset":446},{"placeId":"570577","name":"Peloponnese","startOffset":594,"endOffset":605},{"placeId":"579885","name":"Athenians","startOffset":668,"endOffset":677},{"placeId":"580101","name":"Salamis","startOffset":726,"endOffset":733}]},{"id":41,"text":"While the others put in at Salamis, the Athenians landed in their own country. When they arrived, they made a proclamation that every Athenian should save his children and servants as he best could. Thereupon most of them sent the members of their households to Troezen, and some to Aegina and Salamis. [2] They were anxious to get everything out safely because they wished to obey the oracle, and also not least because of this: the Athenians say that a great snake lives in the sacred precinct guarding the acropolis. They say this and even put out monthly offerings for it as if it really existed. The monthly offering is a honey-cake. [3] In all the time before this the honey-cake had been consumed, but this time it was untouched. When the priestess interpreted the significance of this, the Athenians were all the more eager to abandon the city since the goddess had deserted the acropolis. When they had removed everything to safety, they returned to the camp.","places":[{"placeId":"580101","name":"Salamis","startOffset":27,"endOffset":34},{"placeId":"579885","name":"Athenians","startOffset":40,"endOffset":49},{"placeId":"579885","name":"Athenian","startOffset":134,"endOffset":142},{"placeId":"580101","name":"Salamis","startOffset":294,"endOffset":301},{"placeId":"579885","name":"Athenians","startOffset":434,"endOffset":443},{"placeId":"579885","name":"Athenians","startOffset":798,"endOffset":807}]},{"id":42,"text":"When those from Artemisium had put in at Salamis, the rest of the Hellenic fleet learned of this and streamed in from Troezen, for they had been commanded to assemble at Pogon, the harbor of Troezen. Many more ships assembled now than had fought at Artemisium, and from more cities. [2] The admiral was the same as at Artemisium, Eurybiades son of Euryclides, a Spartan but not of royal descent. The ships provided by the Athenians were by far the most numerous and the most seaworthy.","places":[{"placeId":"540667","name":"Artemisium","startOffset":16,"endOffset":26},{"placeId":"580101","name":"Salamis","startOffset":41,"endOffset":48},{"placeId":"geonames-390903","name":"Hellenic","startOffset":66,"endOffset":74},{"placeId":"579885","name":"Athenians","startOffset":422,"endOffset":431}]},{"id":43,"text":"The following took part in the war: from the Peloponnese, the Lacedaemonians provided sixteen ships; the Corinthians the same number as at Artemisium; the Sicyonians furnished fifteen ships, the Epidaurians ten, the Troezenians five, the Hermioneans three. All of these except the Hermioneans are Dorian and Macedonian and had last come from Erineus and Pindus and the Dryopian region. The Hermioneans are Dryopians, driven out of the country now called Doris by Herakles and the Malians.","places":[{"placeId":"570577","name":"Peloponnese","startOffset":45,"endOffset":56},{"placeId":"570406","name":"Lacedaemonians","startOffset":62,"endOffset":76},{"placeId":"570182","name":"Corinthians","startOffset":105,"endOffset":116},{"placeId":"540667","name":"Artemisium","startOffset":139,"endOffset":149},{"placeId":"491656","name":"Macedonian","startOffset":308,"endOffset":318}]},{"id":44,"text":"These, then, were the Peloponnesians who took part in the war. From the mainland outside the Peloponnese came the following: the Athenians provided more than all the rest, one hundred and eighty ships. They provided these alone, since the Plataeans did not fight with the Athenians at Salamis for this reason: when the Hellenes departed from Artemisium and were off Chalcis, the Plataeans landed on the opposite shore of Boeotia and attended to the removal of their households. In bringing these to safety they were left behind. [2] The Athenians, while the Pelasgians ruled what is now called Hellas, were Pelasgians, bearing the name of Cranai. When Cecrops was their king they were called Cecropidae, and when Erechtheus succeeded to the rule, they changed their name and became Athenians. When, however, Ion son of Xuthus was commander of the Athenian army, they were called after him Ionians.","places":[{"placeId":"570577","name":"Peloponnesians","startOffset":22,"endOffset":36},{"placeId":"570577","name":"Peloponnese","startOffset":93,"endOffset":104},{"placeId":"579885","name":"Athenians","startOffset":129,"endOffset":138},{"placeId":"541063","name":"Plataeans","startOffset":239,"endOffset":248},{"placeId":"579885","name":"Athenians","startOffset":272,"endOffset":281},{"placeId":"580101","name":"Salamis","startOffset":285,"endOffset":292},{"placeId":"geonames-390903","name":"Hellenes","startOffset":319,"endOffset":327},{"placeId":"540667","name":"Artemisium","startOffset":342,"endOffset":352},{"placeId":"541063","name":"Plataeans","startOffset":379,"endOffset":388},{"placeId":"540689","name":"Boeotia","startOffset":421,"endOffset":428},{"placeId":"579885","name":"Athenians","startOffset":537,"endOffset":546},{"placeId":"geonames-390903","name":"Hellas","startOffset":594,"endOffset":600},{"placeId":"579885","name":"Athenians","startOffset":782,"endOffset":791},{"placeId":"579885","name":"Athenian","startOffset":847,"endOffset":855}]},{"id":45,"text":"The Megarians provided the same number as at Artemisium. The Ampraciots came to help with seven ships, and the Leucadians, who are Dorians from Corinth, with three.","places":[{"placeId":"570468","name":"Megarians","startOffset":4,"endOffset":13},{"placeId":"540667","name":"Artemisium","startOffset":45,"endOffset":55}]},{"id":46,"text":"Of the islanders, the Aeginetans provided thirty ships. They had other manned ships, but they guarded their own land with these and fought at Salamis with the thirty most seaworthy. The Aeginetans are Dorians from Epidaurus, and their island was formerly called Oenone. [2] After the Aeginetans came the Chalcidians with their twenty ships from Artemisium, and the Eretrians with the same seven; these are Ionians. Next were the Ceans, Ionians from Athens, with the same ships as before. [3] The Naxians provided four ships. They had been sent by their fellow citizens to the Persians, like the rest of the islanders, but they disregarded their orders and came to the Hellenes at the urging of Democritus, an esteemed man among the townsmen and at that time captain of a trireme. The Naxians are Ionians descended from Athens. [4] The Styrians provided the same number of ships as at Artemisium, and the Cythnians one trireme and a fifty-oared boat; these are both Dryopians. The Seriphians, Siphnians, and Melians also took part, since they were the only islanders who had not given earth and water to the barbarian.","places":[{"placeId":"579844","name":"Aeginetans","startOffset":22,"endOffset":32},{"placeId":"580101","name":"Salamis","startOffset":142,"endOffset":149},{"placeId":"579844","name":"Aeginetans","startOffset":186,"endOffset":196},{"placeId":"579844","name":"Aeginetans","startOffset":284,"endOffset":294},{"placeId":"491561","name":"Chalcidians","startOffset":304,"endOffset":315},{"placeId":"540667","name":"Artemisium","startOffset":345,"endOffset":355},{"placeId":"579885","name":"Athens","startOffset":449,"endOffset":455},{"placeId":"geonames-130758","name":"Persians","startOffset":576,"endOffset":584},{"placeId":"geonames-390903","name":"Hellenes","startOffset":668,"endOffset":676},{"placeId":"579885","name":"Athens","startOffset":819,"endOffset":825}]},{"id":47,"text":"All these people who live this side of Thesprotia and the Acheron river took part in the war. The Thesprotians border on the Ampraciots and Leucadians, who were the ones who came from the most distant countries to take part in the war. The only ones living beyond these to help Hellas in its danger were the Crotonians, with one ship. Its captain was Phayllus, three times victor in the Pythian games. The Crotonians are Achaeans by birth.","places":[{"placeId":"geonames-390903","name":"Hellas","startOffset":278,"endOffset":284}]},{"id":48,"text":"All of these came to the war providing triremes, except the Melians and Siphnians and Seriphians, who brought fifty-oared boats. The Melians (who are of Lacedaemonian stock) provided two; the Siphnians and Seriphians, who are Ionians from Athens, one each. The total number of ships, besides the fifty-oared boats, was three hundred and seventy-eight.","places":[{"placeId":"570406","name":"Lacedaemonian","startOffset":153,"endOffset":166},{"placeId":"579885","name":"Athens","startOffset":239,"endOffset":245}]},{"id":49,"text":"When the generals from the aforementioned cities, met at Salamis, they held a council and Eurybiades proposed that whoever wanted to should give his opinion on what place under their control was most suitable for a sea battle. Attica was already lost, and he proposed that they consider the places which were left. [2] The consensus of most of the speakers was to sail to the Isthmus and fight at sea for the Peloponnese, giving this reason: if they were defeated in the fight at Salamis they would be besieged on an island, where no help could come to them, but if they were at the Isthmus they could go ashore to their own lands.","places":[{"placeId":"580101","name":"Salamis","startOffset":57,"endOffset":64},{"placeId":"570577","name":"Peloponnese","startOffset":409,"endOffset":420},{"placeId":"580101","name":"Salamis","startOffset":480,"endOffset":487}]},{"id":50,"text":"While the generals from the Peloponnese considered this argument, an Athenian came with the message that the barbarians had reached Attica and were destroying all of it by fire. [2] The army with Xerxes had made its way through Boeotia and burnt the city of the Thespians, who had abandoned it and gone to the Peloponnese, and Plataea likewise. Now the army had come to Athens and was devastating everything there. The army burnt Thespia and Plataea upon learning from the Thebans that they had not medized.","places":[{"placeId":"570577","name":"Peloponnese","startOffset":28,"endOffset":39},{"placeId":"579885","name":"Athenian","startOffset":69,"endOffset":77},{"placeId":"540689","name":"Boeotia","startOffset":228,"endOffset":235},{"placeId":"570577","name":"Peloponnese","startOffset":310,"endOffset":321},{"placeId":"579885","name":"Athens","startOffset":370,"endOffset":376}]},{"id":51,"text":"Since the crossing of the Hellespont, where the barbarians began their journey, they had spent one month there crossing into Europe and in three more months were in Attica, when Calliades was archon at Athens. [2] When they took the town it was deserted, but in the sacred precinct they found a few Athenians, stewards of the sacred precinct and poor people, who defended themselves against the assault by fencing the acropolis with doors and logs. They had not withdrawn to Salamis not only because of poverty but also because they thought they had discovered the meaning of the oracle the Pythia had given, namely that the wooden wall would be impregnable. They believed that according to the oracle this, not the ships, was the refuge.","places":[{"placeId":"579885","name":"Athens","startOffset":202,"endOffset":208},{"placeId":"579885","name":"Athenians","startOffset":299,"endOffset":308},{"placeId":"580101","name":"Salamis","startOffset":475,"endOffset":482}]},{"id":52,"text":"The Persians took up a position on the hill opposite the acropolis, which the Athenians call the Areopagus, and besieged them in this way: they wrapped arrows in tar and set them on fire, and then shot them at the barricade. Still the besieged Athenians defended themselves, although they had come to the utmost danger and their barricade had failed them. [2] When the Pisistratids proposed terms of surrender, they would not listen but contrived defenses such as rolling down boulders onto the barbarians when they came near the gates. For a long time Xerxes was at a loss, unable to capture them.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":4,"endOffset":12},{"placeId":"579885","name":"Athenians","startOffset":78,"endOffset":87},{"placeId":"579885","name":"Athenians","startOffset":244,"endOffset":253}]},{"id":53,"text":"In time a way out of their difficulties was revealed to the barbarians, since according to the oracle all the mainland of Attica had to become subject to the Persians. In front of the acropolis, and behind the gates and the ascent, was a place where no one was on guard, since no one thought any man could go up that way. Here some men climbed up, near the sacred precinct of Cecrops' daughter Aglaurus, although the place was a sheer cliff. [2] When the Athenians saw that they had ascended to the acropolis, some threw themselves off the wall and were killed, and others fled into the chamber. The Persians who had come up first turned to the gates, opened them, and murdered the suppliants. When they had levelled everything, they plundered the sacred precinct and set fire to the entire acropolis.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":158,"endOffset":166},{"placeId":"579885","name":"Athenians","startOffset":455,"endOffset":464},{"placeId":"geonames-130758","name":"Persians","startOffset":600,"endOffset":608}]},{"id":54,"text":"So it was that Xerxes took complete possession of Athens, and he sent a horseman to Susa to announce his present success to Artabanus. On the day after the messenger was sent, he called together the Athenian exiles who accompanied him and asked them go up to the acropolis and perform sacrifices in their customary way, an order given because he had been inspired by a dream or because he felt remorse after burning the sacred precinct. The Athenian exiles did as they were commanded.","places":[{"placeId":"579885","name":"Athens","startOffset":50,"endOffset":56},{"placeId":"579885","name":"Athenian","startOffset":199,"endOffset":207},{"placeId":"579885","name":"Athenian","startOffset":441,"endOffset":449}]},{"id":55,"text":"I will tell why I have mentioned this. In that acropolis is a shrine of Erechtheus, called the Earthborn, and in the shrine are an olive tree and a pool of salt water. The story among the Athenians is that they were set there by Poseidon and Athena as tokens when they contended for the land. It happened that the olive tree was burnt by the barbarians with the rest of the sacred precinct, but on the day after its burning, when the Athenians ordered by the king to sacrifice went up to the sacred precinct, they saw a shoot of about a cubit's length sprung from the stump, and they reported this.","places":[{"placeId":"579885","name":"Athenians","startOffset":190,"endOffset":199},{"placeId":"579885","name":"Athenians","startOffset":436,"endOffset":445}]},{"id":56,"text":"When this business concerning the Athenian acropolis was announced to the Hellenes at Salamis, some of the Peloponnesian generals became so alarmed that they did not even wait for the proposed matter to be decided, but jumped into their ships and hoisted their sails for flight. Those left behind resolved that the fleet should fight for the Isthmus. Night fell, and they dissolved the assembly and boarded their ships.","places":[{"placeId":"579885","name":"Athenian","startOffset":34,"endOffset":42},{"placeId":"geonames-390903","name":"Hellenes","startOffset":74,"endOffset":82},{"placeId":"580101","name":"Salamis","startOffset":86,"endOffset":93}]},{"id":57,"text":"When Themistocles returned to his ship, Mnesiphilus, an Athenian, asked him what had been decided. Learning from him that they had resolved to sail to the Isthmus and fight for the Peloponnese, he said, [2] If they depart from Salamis, you will no longer be fighting for one country. Each will make his way to his own city, and neither Eurybiades nor any other man will be able to keep them from disbanding the army. Hellas will be destroyed by bad planning. If there is any way at all that you could persuade Eurybiades to change his decision and remain here, go try to undo this resolution.","places":[{"placeId":"579885","name":"Athenian","startOffset":56,"endOffset":64},{"placeId":"570577","name":"Peloponnese","startOffset":181,"endOffset":192},{"placeId":"580101","name":"Salamis","startOffset":228,"endOffset":235},{"placeId":"geonames-390903","name":"Hellas","startOffset":418,"endOffset":424}]},{"id":58,"text":"This advice greatly pleased Themistocles. He made no answer and went to the ship of Eurybiades. When he arrived there, he said he wanted to talk with him on a matter of common interest, so Eurybiades bade him come aboard and say what he wanted. [2] Themistocles sat next to him and told him all that he had heard from Mnesiphilus, pretending it was his own idea and adding many other things. Finally by his entreaty he persuaded him to disembark and gather the generals for a council of war.","places":[]},{"id":59,"text":"When they were assembled and before Eurybiades had a chance to put forward the reason he had called the generals together, Themistocles spoke at length in accordance with the urgency of his request. While he was speaking, the Corinthian general Adeimantus son of Ocytus said, Themistocles, at the games those who start before the signal are beaten with rods. Themistocles said in justification, Those left behind win no crown.","places":[]},{"id":60,"text":"He answered the Corinthian mildly and said to Eurybiades nothing of what he had said before, how if they put out from Salamis they would flee different ways, for it would be unbecoming for him to accuse the allies in their presence. Instead he relied on a different argument and said, 60A. It is in your hands to save Hellas, if you will obey me and remain here to fight, and not obey the words of these others and move your ships back to the Isthmus. Compare each plan after you have heard. If you join battle at the Isthmus, you will fight in the open sea where it is least to our advantage, since our ships are heavier and fewer in number. You will also lose Salamis and Megara and Aegina, even if we succeed in all else. Their land army will accompany their fleet, and so you will lead them to the Peloponnese and risk all Hellas. 60B. But if you do what I say, you will find it useful in these ways: first, by engaging many ships with our few in the strait, we shall win a great victory, if the war turns out reasonably, for it is to our advantage to fight in a strait and to their advantage to fight in a wide area. Second, Salamis will survive, where we have carried our children and women to safety. It also has in it something you are very fond of: by remaining here you will be fighting for the Peloponnese just as much as at the Isthmus, and you will not lead them to the Peloponnese, if you exercise good judgment. 60C. If what I expect happens and we win the victory with our ships, you will not have the barbarians upon you at the Isthmus. They will advance no further than Attica and depart in no order, and we shall gain an advantage by the survival of Megara, Aegina, and Salamis, where it is prophesied that we will prevail against our enemies. Men usually succeed when they have reasonable plans. If their plans are unreasonable, the god does not wish to assent to human intentions.","places":[{"placeId":"580101","name":"Salamis","startOffset":118,"endOffset":125},{"placeId":"geonames-390903","name":"Hellas","startOffset":319,"endOffset":325},{"placeId":"580101","name":"Salamis","startOffset":663,"endOffset":670},{"placeId":"570577","name":"Peloponnese","startOffset":803,"endOffset":814},{"placeId":"geonames-390903","name":"Hellas","startOffset":828,"endOffset":834},{"placeId":"580101","name":"Salamis","startOffset":1131,"endOffset":1138},{"placeId":"570577","name":"Peloponnese","startOffset":1306,"endOffset":1317},{"placeId":"570577","name":"Peloponnese","startOffset":1384,"endOffset":1395},{"placeId":"580101","name":"Salamis","startOffset":1690,"endOffset":1697}]},{"id":61,"text":"As Themistocles said this, Adeimantus the Corinthian attacked him again, advising that a man without a city should keep quiet and that Eurybiades should not ask the vote of a man without a city. He advised Themistocles to contribute his opinion when he provided a cityattacking him in this way because Athens was captured and occupied. [2] This time Themistocles said many things against him and the Corinthians, declaring that so long as they had two hundred manned ships, the Athenians had both a city and a land greater than theirs, and that none of the Hellenes could repel them if they attacked.","places":[{"placeId":"579885","name":"Athens","startOffset":303,"endOffset":309},{"placeId":"570182","name":"Corinthians","startOffset":401,"endOffset":412},{"placeId":"579885","name":"Athenians","startOffset":479,"endOffset":488},{"placeId":"geonames-390903","name":"Hellenes","startOffset":558,"endOffset":566}]},{"id":62,"text":"Next he turned his argument to Eurybiades, saying more vehemently than before, If you remain here, you will be an noble man. If not, you will ruin Hellas. All our strength for war is in our ships, so listen to me. [2] If you do not do this, we will immediately gather up our households and travel to Siris in Italy, which has been ours since ancient times, and the prophecies say we must found a colony there. You will remember these words when you are without such allies.","places":[{"placeId":"geonames-390903","name":"Hellas","startOffset":148,"endOffset":154}]},{"id":63,"text":"When Themistocles said this, Eurybiades changed his mind. I think he did so chiefly out of fear that the Athenians might desert them if they set sail for the Isthmus. If the Athenians left, the rest would be no match for the enemy, so he made the choice to remain there and fight.","places":[{"placeId":"579885","name":"Athenians","startOffset":105,"endOffset":114},{"placeId":"579885","name":"Athenians","startOffset":174,"endOffset":183}]},{"id":64,"text":"After this skirmish of words, since Eurybiades had so resolved, the men at Salamis prepared to fight where they were. At sunrise on the next day there was an earthquake on land and sea, [2] and they resolved to pray to the gods and summon the sons of Aeacus as allies. When they had so resolved, they did as follows: they prayed to all the gods, called Ajax and Telamon to come straight from Salamis, and sent a ship to Aegina for Aeacus and his sons.","places":[{"placeId":"580101","name":"Salamis","startOffset":75,"endOffset":82},{"placeId":"580101","name":"Salamis","startOffset":392,"endOffset":399}]},{"id":65,"text":"Dicaeus son of Theocydes, an Athenian exile who had become important among the Medes, said that at the time when the land of Attica was being laid waste by Xerxes' army and there were no Athenians in the country, he was with Demaratus the Lacedaemonian on the Thriasian plain and saw advancing from Eleusis a cloud of dust as if raised by the feet of about thirty thousand men. They marvelled at what men might be raising such a cloud of dust and immediately heard a cry. The cry seemed to be the Iacchus of the mysteries, [2] and when Demaratus, ignorant of the rites of Eleusis, asked him what was making this sound, Dicaeus said, Demaratus, there is no way that some great disaster will not befall the king's army. Since Attica is deserted, it is obvious that this voice is divine and comes from Eleusis to help the Athenians and their allies. [3] If it descends upon the Peloponnese, the king himself and his army on the mainland will be endangered. If, however, it turns towards the ships at Salamis, the king will be in danger of losing his fleet. [4] Every year the Athenians observe this festival for the Mother and the Maiden, and any Athenian or other Hellene who wishes is initiated. The voice which you hear is the Iacchus they cry at this festival. To this Demaratus replied, Keep silent and tell this to no one else. [5] If these words of yours are reported to the king, you will lose your head, and neither I nor any other man will be able to save you, so be silent. The gods will see to the army. [6] Thus he advised, and after the dust and the cry came a cloud, which rose aloft and floated away towards Salamis to the camp of the Hellenes. In this way they understood that Xerxes' fleet was going to be destroyed. Dicaeus son of Theocydes used to say this, appealing to Demaratus and others as witnesses.","places":[{"placeId":"579885","name":"Athenian","startOffset":29,"endOffset":37},{"placeId":"579885","name":"Athenians","startOffset":187,"endOffset":196},{"placeId":"570406","name":"Lacedaemonian","startOffset":239,"endOffset":252},{"placeId":"579885","name":"Athenians","startOffset":822,"endOffset":831},{"placeId":"570577","name":"Peloponnese","startOffset":878,"endOffset":889},{"placeId":"580101","name":"Salamis","startOffset":1000,"endOffset":1007},{"placeId":"579885","name":"Athenians","startOffset":1076,"endOffset":1085},{"placeId":"579885","name":"Athenian","startOffset":1147,"endOffset":1155},{"placeId":"580101","name":"Salamis","startOffset":1629,"endOffset":1636},{"placeId":"geonames-390903","name":"Hellenes","startOffset":1656,"endOffset":1664}]},{"id":66,"text":"When those stationed with Xerxes' fleet had been to see the Laconian disaster at Thermopylae, they crossed over from Trachis to Histiaea, waited three days, and then sailed through the Euripus, and in three more days they were at Phalerum, the port of Athens. I think no less a number invaded Athens by land and sea than came to Sepias and Thermopylae. [2] Those killed by the storm, at Thermopylae, and in the naval battles at Artemisium, I offset with those who did not yet follow the king: the Melians and Dorians and Locrians and the whole force of Boeotia except the Thespians and Plataeans; and the Carystians and Andrians and Teneans and all the rest of the islanders, except the five cities whose names I previously mentioned. The farther into Hellas the Persian advanced, the more nations followed him.","places":[{"placeId":"579885","name":"Athens","startOffset":252,"endOffset":258},{"placeId":"579885","name":"Athens","startOffset":293,"endOffset":299},{"placeId":"540667","name":"Artemisium","startOffset":428,"endOffset":438},{"placeId":"540689","name":"Boeotia","startOffset":553,"endOffset":560},{"placeId":"541063","name":"Plataeans","startOffset":586,"endOffset":595},{"placeId":"geonames-390903","name":"Hellas","startOffset":752,"endOffset":758},{"placeId":"geonames-130758","name":"Persian","startOffset":763,"endOffset":770}]},{"id":67,"text":"All these came to Athens except the Parians. The Parians stayed behind in Cythnus watching to see which way the war turned out. When the rest of them reached Phalerum, Xerxes himself went down to the ships, wishing to mix with the sailors and hear their opinions. [2] He came and sat on his throne, and present at his summons were the tyrants of all the peoples and the company leaders from the fleet. They sat according to the honor which the king had granted each of them, first the king of Sidon, then the king of Tyre, then the rest. When they sat in order one after another, Xerxes sent Mardonius to test each by asking if they should fight at sea.","places":[{"placeId":"579885","name":"Athens","startOffset":18,"endOffset":24}]},{"id":68,"text":"Mardonius went about questioning them, starting with the Sidonian, and all the others were unanimous, advising to fight at sea, but Artemisia said, 68A. Tell the king, Mardonius, that I, who neither was most cowardly in the sea battles off Euboea nor performed the least feats of arms, say this: Master, it is just for me to declare my real opinion, what I consider to be best for your cause. And I say to you this: spare your ships, and do not fight at sea. Their men are as much stronger than your men by sea as men are stronger than women. [2] Why is it so necessary for you to risk everything by fighting at sea? Do you not possess Athens, for which you set out on this march, and do you not have the rest of Hellas? No one stands in your way. Those who opposed you have received what they deserved. 68B. I will tell you how I think the affairs of your enemies will turn out: If you do not hurry to fight at sea, but keep your ships here and stay near land, or even advance into the Peloponnese, then, my lord, you will easily accomplish what you had in mind on coming here. [2] The Hellenes are not able to hold out against you for a long time, but you will scatter them, and they will each flee to their own cities. I have learned that they have no food on this island, and it is not likely, if you lead your army against the Peloponnese, that those of them who have come from there will sit still, nor will they care to fight at sea for Athens. 68C. But if you hurry to fight at sea immediately, I fear that your fleet if reduced to cowardice may also injure your army on land. In addition, my King, take this to heart: Good people's slaves tend to be base, and the slaves of the base tend to be good. You, who are best among men, have base slaves, who are accounted your allies, the Egyptians and Cyprians and Cilicians and Pamphylians, who are of no use at all.","places":[{"placeId":"540775","name":"Euboea","startOffset":241,"endOffset":247},{"placeId":"579885","name":"Athens","startOffset":638,"endOffset":644},{"placeId":"geonames-390903","name":"Hellas","startOffset":715,"endOffset":721},{"placeId":"570577","name":"Peloponnese","startOffset":989,"endOffset":1000},{"placeId":"geonames-390903","name":"Hellenes","startOffset":1089,"endOffset":1097},{"placeId":"570577","name":"Peloponnese","startOffset":1334,"endOffset":1345},{"placeId":"579885","name":"Athens","startOffset":1446,"endOffset":1452}]},{"id":69,"text":"When she said this to Mardonius, all who were well disposed towards Artemisia lamented her words, thinking she would suffer some ill from the king because she advised against fighting at sea. Those who were jealous and envied her, because she was given honor among the chief of all the allies, were glad at her answer, thinking she would be killed. [2] But when the counsels were reported to Xerxes, he was greatly pleased by Artemisia's opinion. Even before this he had considered her of excellent character, and now he praised her much more highly. Still he ordered that the majority be obeyed, for he believed that at Euboea they had purposely fought badly because he was not there. This time he had made preparations to see the battle in person.","places":[{"placeId":"540775","name":"Euboea","startOffset":621,"endOffset":627}]},{"id":70,"text":"When the command to put out to sea was given, they set sail for Salamis and were calmly marshalled in line. There was not enough daylight left for them to fight, since night came on, so they made preparations for the next day. [2] Fear and dread possessed the Hellenes, especially those from the Peloponnese. They were afraid because they were stationed in Salamis and were about to fight at sea on behalf of the land of the Athenians, and if they were defeated they would be trapped on an island and besieged, leaving their own land unguarded.","places":[{"placeId":"580101","name":"Salamis","startOffset":64,"endOffset":71},{"placeId":"geonames-390903","name":"Hellenes","startOffset":260,"endOffset":268},{"placeId":"570577","name":"Peloponnese","startOffset":296,"endOffset":307},{"placeId":"580101","name":"Salamis","startOffset":357,"endOffset":364},{"placeId":"579885","name":"Athenians","startOffset":425,"endOffset":434}]},{"id":71,"text":"That very night the land army of the barbarians began marching to the Peloponnese. Yet every possible device had been used to prevent the barbarians from invading by the mainland. As soon as the Peloponnesians learned that Leonidas and his men at Thermopylae were dead, they ran together from their cities and took up their position at the Isthmus. Their general was Cleombrotus son of Anaxandrides, the brother of Leonidas. [2] When they were in position at the Isthmus, they demolished the Scironian road and then, after resolving in council, built a wall across the Isthmus. Since there were many tens of thousands and everyone worked, the task was completed, as they brought in stones and bricks and logs and baskets full of sand. At no moment of the day or night did those who had marched out there rest from their work.","places":[{"placeId":"570577","name":"Peloponnese","startOffset":70,"endOffset":81},{"placeId":"570577","name":"Peloponnesians","startOffset":195,"endOffset":209}]},{"id":72,"text":"These were the Hellenes who marched out in a body to the Isthmus: the Lacedaemonians and all the Arcadians, the Eleans and Corinthians and Sicyonians and Epidaurians and Phliasians and Troezenians and Hermioneans. These were the ones who marched out and feared for Hellas in her peril. The rest of the Peloponnesians cared nothing, though the Olympian and Carnean festivals were now past.","places":[{"placeId":"geonames-390903","name":"Hellenes","startOffset":15,"endOffset":23},{"placeId":"570406","name":"Lacedaemonians","startOffset":70,"endOffset":84},{"placeId":"570182","name":"Corinthians","startOffset":123,"endOffset":134},{"placeId":"geonames-390903","name":"Hellas","startOffset":265,"endOffset":271},{"placeId":"570577","name":"Peloponnesians","startOffset":302,"endOffset":316}]},{"id":73,"text":"Seven nations inhabit the Peloponnese. Two of these are aboriginal and are now settled in the land where they lived in the old days, the Arcadians and Cynurians. One nation, the Achaean, has never left the Peloponnese, but it has left its own country and inhabits another nation's land. [2] The four remaining nations of the seven are immigrants, the Dorians and Aetolians and Dryopians and Lemnians. The Dorians have many famous cities, the Aetolians only Elis, the Dryopians Hermione and Asine near Laconian Cardamyle, the Lemnians all the Paroreatae. [3] The Cynurians are aboriginal and seem to be the only Ionians, but they have been Dorianized by time and by Argive rule. They are the Orneatae and the perioikoi. All the remaining cities of these seven nations, except those I enumerated, stayed neutral. If I may speak freely, by staying neutral they medized.","places":[{"placeId":"570577","name":"Peloponnese","startOffset":26,"endOffset":37},{"placeId":"570577","name":"Peloponnese","startOffset":206,"endOffset":217}]},{"id":74,"text":"Those at the Isthmus were involved in so great a labor, since all they had was at stake and they did not expect the ships to win distinction. Those at Salamis heard of their labors but still were full of dread, fearing not for themselves but for the Peloponnese. [2] For a time each man talked quietly to his neighbor, wondering at Eurybiades' folly, but finally it came out into the open. They held an assembly and talked at length on the same matters as before: some said they must sail away to the Peloponnese and risk battle for that country, not stay and fight for a captured land; but the Athenians and Aeginetans and Megarians said they must stay and defend themselves.","places":[{"placeId":"580101","name":"Salamis","startOffset":151,"endOffset":158},{"placeId":"570577","name":"Peloponnese","startOffset":250,"endOffset":261},{"placeId":"570577","name":"Peloponnese","startOffset":501,"endOffset":512},{"placeId":"579885","name":"Athenians","startOffset":595,"endOffset":604},{"placeId":"579844","name":"Aeginetans","startOffset":609,"endOffset":619},{"placeId":"570468","name":"Megarians","startOffset":624,"endOffset":633}]},{"id":75,"text":"When the Peloponnesians were outvoting him, Themistocles secretly left the assembly, and sent a man by boat to the Median fleet after ordering him what to say. His name was Sicinnus, and he was Themistocles' servant and his sons' attendant. Later Themistocles enrolled him as a Thespian, when the Thespians were adopting citizens, and made him wealthy with money. [2] He now came by boat and said to the generals of the barbarians, The Athenian general has sent me without the knowledge of the other Hellenes. He is on the king's side and prefers that your affairs prevail, not the Hellenes'. I am to tell you that the Hellenes are terrified and plan flight, and you can now perform the finest deed of all if you do not allow them to escape. [3] They do not all have the same intent, and they will no longer oppose you. Instead you will see them fighting against themselves, those who are on your side against those who are not. After indicating this to them he departed.","places":[{"placeId":"570577","name":"Peloponnesians","startOffset":9,"endOffset":23},{"placeId":"579885","name":"Athenian","startOffset":437,"endOffset":445},{"placeId":"geonames-390903","name":"Hellenes","startOffset":501,"endOffset":509},{"placeId":"geonames-390903","name":"Hellenes","startOffset":583,"endOffset":591},{"placeId":"geonames-390903","name":"Hellenes","startOffset":620,"endOffset":628}]},{"id":76,"text":"Finding the message credible, they first landed many of the Persians on the islet of Psyttalea, which lies between Salamis and the mainland. When it was midnight, they brought their western wing in a circle towards Salamis, and those stationed at Ceos and Cynosura also put out to sea, occupying all the passage as far as Munychia with their ships. [2] They launched their ships in this way so that the Hellenes would have no escape: they would be trapped at Salamis and pay the penalty for the battles at Artemisium. The purpose of their landing Persians on the islet called Psyttalea was this: when the battle took place, it was chiefly there that the men and wrecks would be washed ashore, for the island lay in the path of the impending battle. The Persians would be able to save some of those who washed up and kill the others. [3] They did this in silence for fear that their enemies hear, making their preparations at night without sleep.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":60,"endOffset":68},{"placeId":"580101","name":"Salamis","startOffset":115,"endOffset":122},{"placeId":"580101","name":"Salamis","startOffset":215,"endOffset":222},{"placeId":"geonames-390903","name":"Hellenes","startOffset":403,"endOffset":411},{"placeId":"580101","name":"Salamis","startOffset":459,"endOffset":466},{"placeId":"540667","name":"Artemisium","startOffset":506,"endOffset":516},{"placeId":"geonames-130758","name":"Persians","startOffset":547,"endOffset":555},{"placeId":"geonames-130758","name":"Persians","startOffset":753,"endOffset":761}]},{"id":77,"text":"I cannot say against oracles that they are not true, and I do not wish to try to discredit them when they speak plainly. Look at the following matter: When the sacred headland of golden-sworded Artemis and Cynosura by the sea they bridge with ships, After sacking shiny Athens in mad hope, Divine Justice will extinguish mighty Greed the son of Insolence Lusting terribly, thinking to devour all.  [2] Bronze will come together with bronze, and Ares Will redden the sea with blood. To Hellas the day of freedom Far-seeing Zeus and august Victory will bring. Considering this, I dare to say nothing against Bacis concerning oracles when he speaks so plainly, nor will I consent to it by others.","places":[{"placeId":"579885","name":"Athens","startOffset":271,"endOffset":277},{"placeId":"geonames-390903","name":"Hellas","startOffset":488,"endOffset":494}]},{"id":78,"text":"Among the generals at Salamis there was fierce argument. They did not yet know that the barbarians had encircled them with their ships, supposing them still marshalled in the place where they had seen them by day.","places":[{"placeId":"580101","name":"Salamis","startOffset":22,"endOffset":29}]},{"id":79,"text":"As the generals disputed, Aristides son of Lysimachus, an Athenian, crossed over from Aegina. Although he had been ostracized by the people, I, learning by inquiry of his character, have come to believe that he was the best and most just man in Athens. [2] This man stood at the assembly and called Themistocles out, although he was no friend of his, but his bitter enemy. Because of the magnitude of the present ills, he deliberately forgot all that and called him out, wanting to talk to him. He had already heard that those from the Peloponnese were anxious to set sail for the Isthmus, [3] so when Themistocles came out he said, On all occasions and especially now our contention must be over which of us will do our country more good. [4] I say that it is all the same for the Peloponnesians to speak much or little about sailing away from here, for I have seen with my own eyes that even if the Corinthians and Eurybiades himself wanted to, they would not be able to escape. We are encircled by the enemy. Go in and indicate this to them.","places":[{"placeId":"579885","name":"Athenian","startOffset":58,"endOffset":66},{"placeId":"579885","name":"Athens","startOffset":245,"endOffset":251},{"placeId":"570577","name":"Peloponnese","startOffset":536,"endOffset":547},{"placeId":"570577","name":"Peloponnesians","startOffset":783,"endOffset":797},{"placeId":"570182","name":"Corinthians","startOffset":902,"endOffset":913}]},{"id":80,"text":"Themistocles answered, Your exhortation is most useful and you bring good news. You have come as an eyewitness of just what I wanted to happen. Know that I am the cause of what the Medes are doing. When the Hellenes would not willingly enter battle, it was necessary to force them against their will. Since you have come bringing good news, tell it to them yourself. [2] If I say these things, they will think I invented it, and they will not believe that the barbarians are doing this. Go in yourself and let them know how it stands. It would be best if they believe you when you tell them, but if they find these things incredible it is all the same to us. They will not be able to run away, if indeed we are surrounded on all sides as you say.","places":[{"placeId":"geonames-390903","name":"Hellenes","startOffset":208,"endOffset":216}]},{"id":81,"text":"Aristides went in and told them, saying that he had come from Aegina and had barely made it past the blockade when he sailed out, since all the Hellenic camp was surrounded by Xerxes' ships. He advised them to prepare to defend themselves. He said this and left, and again a dispute arose among them. The majority of the generals did not believe the news.","places":[{"placeId":"geonames-390903","name":"Hellenic","startOffset":144,"endOffset":152}]},{"id":82,"text":"While they were still held by disbelief, a trireme of Tenian deserters arrived, captained by Panaetius son of Sosimenes, which brought them the whole truth. For this deed the Tenians were engraved on the tripod at Delphi with those who had conquered the barbarian. [2] With this ship that deserted at Salamis and the Lemnian which deserted earlier at Artemisium, the Hellenic fleet reached its full number of three hundred and eighty ships, for it had fallen short of the number by two ships.","places":[{"placeId":"540726","name":"Delphi","startOffset":214,"endOffset":220},{"placeId":"580101","name":"Salamis","startOffset":301,"endOffset":308},{"placeId":"540667","name":"Artemisium","startOffset":351,"endOffset":361},{"placeId":"geonames-390903","name":"Hellenic","startOffset":367,"endOffset":375}]},{"id":83,"text":"When they found the words of the Tenians worthy of belief, the Hellenes prepared to fight at sea. As dawn glimmered, they held an assembly of the fighting men, and Themistocles gave the best address among the others. His entire speech involved comparing the better and lesser elements in human nature and the human condition. [2] He concluded his speech by advising them to choose the better of these, then gave the command to mount the ships. Just as they embarked, the trireme which had gone after the sons of Aeacus arrived from Aegina.","places":[{"placeId":"geonames-390903","name":"Hellenes","startOffset":63,"endOffset":71}]},{"id":84,"text":"Then the Hellenes set sail with all their ships, and as they were putting out to sea the barbarians immediately attacked them. The rest of the Hellenes began to back water and tried to beach their ships, but Ameinias of Pallene, an Athenian, charged and rammed a ship. When his ship became entangled and the crew could not free it, the others came to help Ameinias and joined battle. [2] The Athenians say that the fighting at sea began this way, but the Aeginetans say that the ship which had been sent to Aegina after the sons of Aeacus was the one that started it. The story is also told that the phantom of a woman appeared to them, who cried commands loud enough for all the Hellenic fleet to hear, reproaching them first with, Men possessed, how long will you still be backing water?","places":[{"placeId":"geonames-390903","name":"Hellenes","startOffset":9,"endOffset":17},{"placeId":"geonames-390903","name":"Hellenes","startOffset":143,"endOffset":151},{"placeId":"579885","name":"Athenian","startOffset":232,"endOffset":240},{"placeId":"579885","name":"Athenians","startOffset":392,"endOffset":401},{"placeId":"579844","name":"Aeginetans","startOffset":455,"endOffset":465},{"placeId":"geonames-390903","name":"Hellenic","startOffset":680,"endOffset":688}]},{"id":85,"text":"The Phoenicians were marshalled against the Athenians, holding the western wing toward Eleusis. Against the Lacedaemonians were the Ionians, on the eastern wing toward Piraeus, and a few of them fought badly according to Themistocles' instructions, but the majority did not. [2] I can list the names of many captains who captured Hellenic ships, but I will mention none except Theomestor son of Androdamas and Phylacus son of Histiaeus, both Samians. [3] I mention only these because Theomestor was appointed tyrant of Samos by the Persians for this feat, and Phylacus was recorded as a benefactor of the king and granted much land. The king's benefactors are called orosangae in the Persian language.","places":[{"placeId":"579885","name":"Athenians","startOffset":44,"endOffset":53},{"placeId":"570406","name":"Lacedaemonians","startOffset":108,"endOffset":122},{"placeId":"geonames-390903","name":"Hellenic","startOffset":330,"endOffset":338},{"placeId":"geonames-130758","name":"Persians","startOffset":532,"endOffset":540},{"placeId":"geonames-130758","name":"Persian","startOffset":686,"endOffset":693}]},{"id":86,"text":"Thus it was concerning them. But the majority of the ships at Salamis were sunk, some destroyed by the Athenians, some by the Aeginetans. Since the Hellenes fought in an orderly fashion by line, but the barbarians were no longer in position and did nothing with forethought, it was likely to turn out as it did. Yet they were brave that day, much more brave than they had been at Euboea, for they all showed zeal out of fear of Xerxes, each one thinking that the king was watching him.","places":[{"placeId":"580101","name":"Salamis","startOffset":62,"endOffset":69},{"placeId":"579885","name":"Athenians","startOffset":103,"endOffset":112},{"placeId":"579844","name":"Aeginetans","startOffset":126,"endOffset":136},{"placeId":"geonames-390903","name":"Hellenes","startOffset":148,"endOffset":156},{"placeId":"540775","name":"Euboea","startOffset":380,"endOffset":386}]},{"id":87,"text":"I cannot say exactly how each of the other barbarians or Hellenes fought, but this is what happened to Artemisia, and it gave her still higher esteem with the king: [2] When the king's side was all in commotion, at that time Artemisia's ship was pursued by a ship of Attica. She could not escape, for other allied ships were in front of her and hers was the nearest to the enemy. So she resolved to do something which did in fact benefit her: as she was pursued by the Attic ship, she charged and rammed an allied ship, with a Calyndian crew and Damasithymus himself, king of the Calyndians, aboard. [3] I cannot say if she had some quarrel with him while they were still at the Hellespont, or whether she did this intentionally or if the ship of the Calyndians fell in her path by chance. [4] But when she rammed and sank it, she had the luck of gaining two advantages. When the captain of the Attic ship saw her ram a ship with a barbarian crew, he decided that Artemisia's ship was either Hellenic or a deserter from the barbarians fighting for them, so he turned away to deal with others.","places":[{"placeId":"geonames-390903","name":"Hellenes","startOffset":57,"endOffset":65},{"placeId":"geonames-390903","name":"Hellenic","startOffset":992,"endOffset":1000}]},{"id":88,"text":"Thus she happened to escape and not be destroyed, and it also turned out that the harmful thing which she had done won her exceptional esteem from Xerxes. [2] It is said that the king, as he watched the battle, saw her ship ram the other, and one of the bystanders said, Master, do you see how well Artemisia contends in the contest and how she has sunk an enemy ship? When he asked if the deed was truly Artemisia's, they affirmed it, knowing reliably the marking of her ship, and they supposed that the ruined ship was an enemy. [3] As I have said, all this happened to bring her luck, and also that no one from the Calyndian ship survived to accuse her. It is said that Xerxes replied to what was told him, My men have become women, and my women men. They say this is what Xerxes said.","places":[]},{"id":89,"text":"In this struggle the general Ariabignes died, son of Darius and the brother of Xerxes. Many other famous men of the Persians and Medes and other allies also died, but only a few Hellenes, since they knew how to swim. Those whose ships were sunk swam across to Salamis, unless they were killed in action, [2] but many of the barbarians drowned in the sea since they did not know how to swim. Most of the ships were sunk when those in the front turned to flee, since those marshalled in the rear, as they tried to go forward with their ships so they too could display some feat to the king, ran afoul of their own side's ships in flight.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":116,"endOffset":124},{"placeId":"geonames-390903","name":"Hellenes","startOffset":178,"endOffset":186},{"placeId":"580101","name":"Salamis","startOffset":260,"endOffset":267}]},{"id":90,"text":"It also happened in this commotion that certain Phoenicians whose ships had been destroyed came to the king and accused the Ionians of treason, saying that it was by their doing that the ships had been lost. It turned out that the Ionian generals were not put to death, and those Phoenicians who slandered them were rewarded as I will show. [2] While they were still speaking, a Samothracian ship rammed an Attic ship. The Attic ship sank and an Aeginetan ship bore down and sank the Samothracian ship, but the Samothracians, being javelin-throwers, by pelting them with missiles knocked the fighters off the ship that had sunk theirs and boarded and seized it. [3] This saved the Ionians. In his deep vexation Xerxes blamed everyone. When he saw the Ionians performing this great feat, he turned to the Phoenicians and commanded that their heads be cut off, so that they who were base not slander men more noble. [4] Whenever Xerxes, as he sat beneath the mountain opposite Salamis which is called Aegaleos, saw one of his own men achieve some feat in the battle, he inquired who did it, and his scribes wrote down the captain's name with his father and city of residence. The presence of Ariaramnes, a Persian and a friend of the Ionians, contributed still more to this calamity of the Phoenicians. Thus they dealt with the Phoenicians.","places":[{"placeId":"580101","name":"Salamis","startOffset":975,"endOffset":982},{"placeId":"geonames-130758","name":"Persian","startOffset":1204,"endOffset":1211}]},{"id":91,"text":"The barbarians were routed and tried to flee by sailing out to Phalerum, but the Aeginetans lay in wait for them in the strait and then performed deeds worth telling. The Athenians in the commotion destroyed those ships which either resisted or tried to flee, the Aeginetans those sailing out of the strait. Whoever escaped from the Athenians charged right into the Aeginetans.","places":[{"placeId":"579844","name":"Aeginetans","startOffset":81,"endOffset":91},{"placeId":"579885","name":"Athenians","startOffset":171,"endOffset":180},{"placeId":"579844","name":"Aeginetans","startOffset":264,"endOffset":274},{"placeId":"579885","name":"Athenians","startOffset":333,"endOffset":342},{"placeId":"579844","name":"Aeginetans","startOffset":366,"endOffset":376}]},{"id":92,"text":"The ships of Themistocles, as he was pursuing a ship, and of Polycritus son of Crius, an Aeginetan, then met. Polycritus had rammed a Sidonian ship, the one which had captured the Aeginetan ship that was on watch off Sciathus, and on it was Pytheas son of Ischenous, the one the Persians marvelled at when severely wounded and kept aboard their ship because of his virtue. This Sidonian ship carrying him with the Persians was now captured, so Pytheas came back safe to Aegina. [2] When Polycritus saw the Attic ship, he recognized it by seeing the flagship's marking and shouted to Themistocles, mocking and reproaching him concerning the Medizing of the Aeginetans. After ramming an enemy ship, Polycritus hurled these insults at Themistocles. The barbarians whose ships were still intact fled and reached Phalerum under cover of the land army.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":279,"endOffset":287},{"placeId":"geonames-130758","name":"Persians","startOffset":414,"endOffset":422},{"placeId":"579844","name":"Aeginetans","startOffset":656,"endOffset":666}]},{"id":93,"text":"In this battle the Hellenes with the reputation as most courageous were the Aeginetans, then the Athenians. Among individuals they were Polycritus the Aeginetan and the Athenians Eumenes of Anagyrus and Aminias of Pallene, the one who pursued Artemisia. If he had known she was in that ship, he would not have stopped before either capturing it or being captured himself. [2] Such were the orders given to the Athenian captains, and there was a prize offered of ten thousand drachmas to whoever took her alive, since they were indignant that a woman waged war against Athens. But she escaped, as I said earlier, and the others whose ships survived were also in Phalerum.","places":[{"placeId":"geonames-390903","name":"Hellenes","startOffset":19,"endOffset":27},{"placeId":"579844","name":"Aeginetans","startOffset":76,"endOffset":86},{"placeId":"579885","name":"Athenians","startOffset":97,"endOffset":106},{"placeId":"579885","name":"Athenians","startOffset":169,"endOffset":178},{"placeId":"579885","name":"Athenian","startOffset":410,"endOffset":418},{"placeId":"579885","name":"Athens","startOffset":568,"endOffset":574}]},{"id":94,"text":"The Athenians say that when the ships joined battle, the Corinthian general Adeimantus, struck with bewilderment and terror, hoisted his sails and fled away. When the Corinthians saw their flagship fleeing, they departed in the same way, [2] but when in their flight they were opposite the sacred precinct of Athena Sciras on Salamis, by divine guidance a boat encountered them. No one appeared to have sent it, and the Corinthians knew nothing about the affairs of the fleet when it approached. They reckon the affair to involve the gods because when the boat came near the ships, the people on the boat said, [3] Adeimantus, you have turned your ships to flight and betrayed the Hellenes, but they are overcoming their enemies to the fulfillment of their prayers for victory. Adeimantus did not believe them when they said this, so they spoke again, saying that they could be taken as hostages and killed if the Hellenes were not seen to be victorious. [4] So he and the others turned their ships around and came to the fleet, but it was all over. The Athenians spread this rumor about them, but the Corinthians do not agree at all, and they consider themselves to have been among the foremost in the battle. The rest of Hellas bears them witness.","places":[{"placeId":"579885","name":"Athenians","startOffset":4,"endOffset":13},{"placeId":"570182","name":"Corinthians","startOffset":167,"endOffset":178},{"placeId":"580101","name":"Salamis","startOffset":326,"endOffset":333},{"placeId":"570182","name":"Corinthians","startOffset":420,"endOffset":431},{"placeId":"geonames-390903","name":"Hellenes","startOffset":682,"endOffset":690},{"placeId":"geonames-390903","name":"Hellenes","startOffset":916,"endOffset":924},{"placeId":"579885","name":"Athenians","startOffset":1056,"endOffset":1065},{"placeId":"570182","name":"Corinthians","startOffset":1104,"endOffset":1115},{"placeId":"geonames-390903","name":"Hellas","startOffset":1225,"endOffset":1231}]},{"id":95,"text":"Aristides son of Lysimachus, the Athenian whom I mentioned a little before this as a valiant man, did this in the commotion that arose at Salamis: taking many of the armed men who were arrayed along the shore of Salamis, he brought them across and landed them on the island of Psyttalea, and they slaughtered all the Persians who were on that islet.","places":[{"placeId":"579885","name":"Athenian","startOffset":33,"endOffset":41},{"placeId":"580101","name":"Salamis","startOffset":138,"endOffset":145},{"placeId":"580101","name":"Salamis","startOffset":212,"endOffset":219},{"placeId":"geonames-130758","name":"Persians","startOffset":317,"endOffset":325}]},{"id":96,"text":"When the battle was broken off, the Hellenes towed to Salamis as many of the wrecks as were still there and kept ready for another battle, supposing that the king could still make use of his surviving ships. [2] A west wind had caught many of the wrecks and carried them to the shore in Attica called Colias. Thus not only was all the rest of the oracle fulfilled which Bacis and Musaeus had spoken about this battle, but also what had been said many years before this in an oracle by Lysistratus, an Athenian soothsayer, concerning the wrecks carried to shore there. Its meaning had eluded all the Hellenes: The Colian women will cook with oars. But this was to happen after the king had marched away. ","places":[{"placeId":"geonames-390903","name":"Hellenes","startOffset":36,"endOffset":44},{"placeId":"580101","name":"Salamis","startOffset":54,"endOffset":61},{"placeId":"579885","name":"Athenian","startOffset":501,"endOffset":509},{"placeId":"geonames-390903","name":"Hellenes","startOffset":599,"endOffset":607}]},{"id":97,"text":"When Xerxes understood the calamity which had taken place, he feared that some of the Ionians might advise the Hellenes, if they did not think of it themselves, to sail to the Hellespont and destroy the bridges. He would be trapped in Europe in danger of destruction, so he resolved on flight. He did not want to be detected either by the Hellenes or by his own men, so he attempted to build a dike across to Salamis, and joined together Phoenician cargo ships to be both a bridge and a wall, making preparations as if to fight another sea battle. [2] All who saw him doing this confidently supposed that he fully intended to stay and fight there, but none of this eluded Mardonius, who had the most experience of the king's intentions. While doing all this, Xerxes sent a messenger to Persia to announce the disaster.","places":[{"placeId":"geonames-390903","name":"Hellenes","startOffset":111,"endOffset":119},{"placeId":"geonames-390903","name":"Hellenes","startOffset":339,"endOffset":347},{"placeId":"580101","name":"Salamis","startOffset":409,"endOffset":416}]},{"id":98,"text":"While Xerxes did thus, he sent a messenger to Persia with news of his present misfortune. Now there is nothing mortal that accomplishes a course more swiftly than do these messengers, by the Persians' skillful contrivance. It is said that as many days as there are in the whole journey, so many are the men and horses that stand along the road, each horse and man at the interval of a day's journey. These are stopped neither by snow nor rain nor heat nor darkness from accomplishing their appointed course with all speed. [2] The first rider delivers his charge to the second, the second to the third, and thence it passes on from hand to hand, even as in the Greek torch-bearers' race in honor of Hephaestus. This riding-post is called in Persia, angareion.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":191,"endOffset":199}]},{"id":99,"text":"When the first message came to Susa, saying that Xerxes had taken Athens, it gave such delight to the Persians who were left at home that they strewed all the roads with myrtle boughs and burnt incense and gave themselves up to sacrificial feasts and jollity. [2] The second, however, coming on the heels of the first, so confounded them that they all tore their tunics, and cried and lamented without ceasing, holding Mardonius to blame; it was not so much in grief for their ships that they did this as because they feared for Xerxes himself.","places":[{"placeId":"579885","name":"Athens","startOffset":66,"endOffset":72},{"placeId":"geonames-130758","name":"Persians","startOffset":102,"endOffset":110}]},{"id":100,"text":"Such was the plight of the Persians for all the time until the coming of Xerxes himself ended it. Mardonius, however, seeing that Xerxes was greatly distressed because of the sea-fight, and suspecting that he planned flight from Athens, thought that he would be punished for persuading the king to march against Hellas and that it was better for him to risk the chance of either subduing Hellas or dying honorably while engaged in a noble cause; yet his hope rather inclined to the subduing of Hellas. Taking all this into account, he made this proposal: [2] Sire, be not grieved nor greatly distressed because of what has befallen us. It is not on things of wood that the issue hangs for us, but on men and horses; furthermore, there is no one among these men, who thinks that he has now won a crowning victory and will disembark from his ship in an attempt to withstand you, no, nor anyone from this mainland. Those who have withstood us have paid the penalty. [3] If then you so desire, let us straightway attack the Peloponnese, or if it pleases you to wait, that also we can do. Do not be downcast, for the Greeks have no way of escaping guilt for their former and their later deeds and from becoming your slaves. It is best then that you should do as I have said, but if you have resolved to lead your army away, even then I have another plan. [4] Do not, O king, make the Persians the laughing-stock of the Greeks, for if you have suffered harm, it is by no fault of the Persians. Nor can you say that we have anywhere done less than brave men should, and if Phoenicians and Egyptians and Cyprians and Cilicians have so done, it is not the Persians who have any part in this disaster. [5] Therefore, since the Persians are in no way to blame, be guided by me; if you are resolved not to remain, march homewards with the greater part of your army. It is for me, however, to enslave and deliver Hellas to you with three hundred thousand of your host whom I will choose.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":27,"endOffset":35},{"placeId":"579885","name":"Athens","startOffset":229,"endOffset":235},{"placeId":"geonames-390903","name":"Hellas","startOffset":312,"endOffset":318},{"placeId":"geonames-390903","name":"Hellas","startOffset":388,"endOffset":394},{"placeId":"geonames-390903","name":"Hellas","startOffset":494,"endOffset":500},{"placeId":"570577","name":"Peloponnese","startOffset":1021,"endOffset":1032},{"placeId":"geonames-390903","name":"Greeks","startOffset":1113,"endOffset":1119},{"placeId":"geonames-130758","name":"Persians","startOffset":1380,"endOffset":1388},{"placeId":"geonames-390903","name":"Greeks","startOffset":1415,"endOffset":1421},{"placeId":"geonames-130758","name":"Persians","startOffset":1479,"endOffset":1487},{"placeId":"geonames-130758","name":"Persians","startOffset":1648,"endOffset":1656},{"placeId":"geonames-130758","name":"Persians","startOffset":1718,"endOffset":1726},{"placeId":"geonames-390903","name":"Hellas","startOffset":1901,"endOffset":1907}]},{"id":101,"text":"When Xerxes heard that, he was as glad and joyful as a man in his situation might be and said to Mardonius that he would answer him after deliberating which of the two plans he would follow. When he consulted with those Persians whom he summoned, he resolved to send for Artemisia as well, because he saw that she alone at the former sitting had discerned what was best to do. [2] When Artemisia came, Xerxes bade all others withdraw, both Persian councillors and guards, and said to her: It is Mardonius' advice that I should follow here and attack the Peloponnese, for the Persians, he says, and the land army are not to blame for our disaster; of that they would willingly give proof. [3] Therefore he advises me to do this, or else he offers to choose three hundred thousand men of the army and deliver Hellas to me enslaved, while I myself by his counsel march homeward with the rest of the host. [4] Now I ask of you, seeing that you correctly advised me against the late sea-fight, counsel me as to which of these two things would be best for me to do.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":220,"endOffset":228},{"placeId":"geonames-130758","name":"Persian","startOffset":440,"endOffset":447},{"placeId":"570577","name":"Peloponnese","startOffset":555,"endOffset":566},{"placeId":"geonames-130758","name":"Persians","startOffset":576,"endOffset":584},{"placeId":"geonames-390903","name":"Hellas","startOffset":808,"endOffset":814}]},{"id":102,"text":"When she was asked for advice, she replied: It is difficult, O king, to answer your plea for advice by saying that which is best, but in the present turn of affairs I think it best that you march back and that Mardonius, if he so wishes and promises to do as he says, be left here with those whom he desires. [2] For if he subdues all that he offers to subdue and prospers in his design, the achievement, Sire, is yours since it will be your servants who have accomplished it. If, on the other hand, the issue is contrary to Mardonius' expectation, it is no great misfortune so long as you and all that household of yours are safe; [3] for while you and the members of your household are safe, many a time will the Greeks have to fight for their lives. As for Mardonius, if any disaster befalls him, it is does not much matter, nor will any victory of the Greeks be a real victory when they have but slain your servant. As for you, you will be marching home after the burning of Athens, which thing was the whole purpose of your expedition.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":716,"endOffset":722},{"placeId":"geonames-390903","name":"Greeks","startOffset":857,"endOffset":863},{"placeId":"579885","name":"Athens","startOffset":980,"endOffset":986}]},{"id":103,"text":"Artemisia's counsel pleased Xerxes, for it happened that she spoke what he himself had in mind. In truth, I think that he would not have remained even if all men and women had counselled him so to doso panic-stricken was he. Having then thanked Artemisia, he sent her away to take his sons to Ephesus, for he had some bastard sons with him.","places":[]},{"id":104,"text":"With these sons he sent Hermotimus as guardian. This man was by birth of Pedasa, and the most honored by Xerxes of all his eunuchs. The people of Pedasa dwell above Halicarnassus. The following thing happens among these people: when anything untoward is about to befall those who dwell about their city, the priestess of Athena then grows a great beard. This had already happened to them twice.","places":[]},{"id":105,"text":"Hermotimus, who came from Pedasa, had achieved a fuller vengeance for wrong done to him than had any man whom we know. When he had been taken captive by enemies and put up for sale, he was bought by one Panionius of Chios, a man who had set himself to earn a livelihood out of most wicked practices. He would procure beautiful boys and castrate and take them to Sardis and Ephesus where he sold them for a great price, [2] for the barbarians value eunuchs more than perfect men, by reason of the full trust that they have in them. Now among the many whom Panionius had castrated was Hermotimus, who was not entirely unfortunate; he was brought from Sardis together with other gifts to the king, and as time went on, he stood higher in Xerxes' favor than any other eunuch.","places":[]},{"id":106,"text":"Now while the king was at Sardis and preparing to lead his Persian army against Athens, Hermotimus came for some business down to the part of Mysia which is inhabited by Chians and called Atarneus. There he found Panionius. [2] Perceiving who he was, he held long and friendly converse with him, telling him that it was to him that he owed all this prosperity and promising that he would make him prosperous in return if he were to bring his household and dwell there. Panionius accepted his offer gladly, and brought his children and his wife. [3] When Hermotimus had gotten the man and all his household into his power, he said to him: Tell me, you who have made a livelihood out of the wickedest trade on earth, what harm had I or any of my forefathers done to you or yours, that you made me to be no man, but a thing of nought? You no doubt thought that the gods would have no knowledge of your former practices, but their just law has brought you for your wicked deeds into my hands. Now you will be well content with the fullness of that justice which I will execute upon you. [4] With these words of reproach, he brought Panionius' sons before him and compelled him to castrate all four of themhis own children; this Panionius was compelled to do. When he had done this, the sons were compelled to castrate their father in turn. This, then, was the way in which Panionius was overtaken by vengeance at the hands of Hermotimus.","places":[{"placeId":"geonames-130758","name":"Persian","startOffset":59,"endOffset":66},{"placeId":"579885","name":"Athens","startOffset":80,"endOffset":86}]},{"id":107,"text":"Having given his sons to Artemisia's charge to be carried to Ephesus, Xerxes called Mardonius to him and bade him choose whom he would from the army, and make his words good so far as endeavor availed. That is as far as matters went on that day; in the night, however, the admirals, by the king's command, put out to sea from Phalerum and made for the Hellespont again with all speed to guard the bridges for the king's passage. [2] When the barbarians came near to the Girdle in their course, they thought that certain little headlands, which here jut out from the mainland, were ships, and they fled for a long way. When they learned at last that they were no ships but headlands, they drew together and went on their way.","places":[]},{"id":108,"text":"When it was day, the Greeks saw the land army abiding where it had been and supposed the ships also to be at Phalerum. Thinking also that there would be a sea-fight they prepared to defend themselves. When, however, they learned that the ships were gone, they straightway resolved on pursuit; so they pursued Xerxes' fleet as far as Andros, but failed to catch sight of it. When they came to Andros, they held a council there. [2] Themistocles declared his opinion that they should hold their course through the islands, and having pursued the ships, should sail forthwith to the Hellespont to break the bridges. Eurybiades, on the other hand, offered a contrary opinion, saying that to break the bridges would be the greatest harm that they could do to Hellas. [3] For, said he, if the Persian is cut off and compelled to remain in Europe, he will attempt not to be inactive. This he will do because if he remains inactive, he can neither make his cause prosper nor find any way of return home, but his army will perish of hunger. If, on the other hand, he is enterprising and active, it may well be that every town and nation in Europe will join itself to him, by conquest or, before that, by compact. He will then live on whatever yearly fruits of the earth Hellas produces. [4] But, as I think that the Persian will not remain in Europe after his defeat in the sea-fight, let us permit him to flee to his own country. Thereafter let it be that country and not ours which is at stake in the war. With that opinion the rest of the Peloponnesian admirals also agreed.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":21,"endOffset":27},{"placeId":"geonames-390903","name":"Hellas","startOffset":754,"endOffset":760},{"placeId":"geonames-130758","name":"Persian","startOffset":790,"endOffset":797},{"placeId":"geonames-390903","name":"Hellas","startOffset":1264,"endOffset":1270},{"placeId":"geonames-130758","name":"Persian","startOffset":1310,"endOffset":1317}]},{"id":109,"text":"When Themistocles perceived that he could not persuade the greater part of them to sail to the Hellespont, he turned to the Athenians (for they were the angriest at the Persians' escape, and they were minded to sail to the Hellespont even by themselves, if the rest would not) and addressed them as follows: [2] This I have often seen with my eyes and heard yet more often, namely that beaten men, when they be driven to bay, will rally and retrieve their former mishap. Therefore I say to you,as it is to a fortunate chance that we owe ourselves and Hellas, and have driven away so mighty a band of enemieslet us not pursue men who flee, [3] for it is not we who have won this victory, but the gods and the heroes, who deemed Asia and Europe too great a realm for one man to rule, and that a wicked man and an impious one who dealt alike with temples and bones, burning and overthrowing the images of the gods,yes, and one who scourged the sea and threw fetters into it. [4] But as it is well with us for the moment, let us abide now in Hellas and take thought for ourselves and our households. Let us build our houses again and be diligent in sowing, when we have driven the foreigner completely away. Then when the next spring comes, let us set sail for the Hellespont and Ionia. [5] This he said with intent to have something to his credit with the Persian, so that he might have a place of refuge if ever (as might chance) he should suffer anything at the hands of the Atheniansand just that did in fact happen.","places":[{"placeId":"579885","name":"Athenians","startOffset":124,"endOffset":133},{"placeId":"geonames-130758","name":"Persians","startOffset":169,"endOffset":177},{"placeId":"geonames-390903","name":"Hellas","startOffset":553,"endOffset":559},{"placeId":"geonames-390903","name":"Hellas","startOffset":1042,"endOffset":1048},{"placeId":"geonames-130758","name":"Persian","startOffset":1358,"endOffset":1365},{"placeId":"579885","name":"Athenians","startOffset":1479,"endOffset":1488}]},{"id":110,"text":"Thus spoke Themistocles with intent to deceive, and the Athenians obeyed him; since he had always been esteemed wise and now had shown himself to be both wise and prudent, they were ready to obey whatever he said. [2] Having won them over, Themistocles straightway sent men in a boat whom he could trust not to reveal under any question the message which he charged them to deliver to the king; one of these was his servant Sicinnus. When these men came to Attica, the rest remained with the boat, and Sicinnus went up to Xerxes; [3] Themistocles son of Neocles, he said, who is the Athenian general and of all the allies the worthiest and wisest, has sent me to tell you this: Themistocles the Athenian has out of his desire to do you a service stayed the Greeks when they wanted to pursue your ships and break the bridges of the Hellespont. Now he bids you go your way, none hindering you. With that message, the men returned in their boat.","places":[{"placeId":"579885","name":"Athenians","startOffset":56,"endOffset":65},{"placeId":"579885","name":"Athenian","startOffset":586,"endOffset":594},{"placeId":"579885","name":"Athenian","startOffset":698,"endOffset":706},{"placeId":"geonames-390903","name":"Greeks","startOffset":760,"endOffset":766}]},{"id":111,"text":"But the Greeks, now that they were no longer minded to pursue the barbarians' ships farther or sail to the Hellespont and break the way of passage, besieged Andros so that they might take it, [2] for the men of that place, the first islanders of whom Themistocles demanded money, would not give it. When, however, Themistocles gave them to understand that the Athenians had come with two great gods to aid them, Persuasion and Necessity, and that the Andrians must therefore certainly give money, they said in response, It is then but reasonable that Athens is great and prosperous, being blessed with serviceable gods. [3] As for us Andrians, we are but blessed with a plentiful lack of land, and we have two unserviceable gods who never quit our island but want to dwell there forever, namely Poverty and Helplessness. Since we are in the hands of these gods, we will give no money; the power of Athens can never be stronger than our inability.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":8,"endOffset":14},{"placeId":"579885","name":"Athenians","startOffset":360,"endOffset":369},{"placeId":"579885","name":"Athens","startOffset":552,"endOffset":558},{"placeId":"579885","name":"Athens","startOffset":899,"endOffset":905}]},{"id":112,"text":"It was for giving this answer and refusing to give what was asked of them that they were besieged. There was no end to Themistocles' avarice; using the same agents whom he had used with the king, he sent threatening messages to the other islands, demanding money and saying that if they would not give what he asked he would bring the Greek armada upon them and besiege and take their islands. [2] Thereby he collected great sums from the Carystians and Parians, for these were informed that Andros was besieged for taking the Persian side and that Themistocles was of all the generals the most esteemed. This frightened them so much that they sent money. I suppose that there were other islanders too who gave and not these alone, but I cannot with certainty say. [3] Nevertheless, the Carystians got no respite from misfortune by doing this. The Parians, however, propitiated Themistocles with money and so escaped the force. So Themistocles went away from Andros and took money from the islanders, unknown to the other generals.","places":[{"placeId":"geonames-130758","name":"Persian","startOffset":527,"endOffset":534}]},{"id":113,"text":"Those who were with Xerxes waited for a few days after the sea-fight and then marched away to Boeotia by the road by which they had come. Mardonius wanted to give the king safe conduct and thought the time of year unseasonable for war; it was better, he thought, to winter in Thessaly, and then attack the Peloponnese in the spring. [2] When they had arrived in Thessaly, Mardonius first chose all the Persians called Immortals, save only Hydarnes their general who said that he would not quit the king's person, and next, the Persian cuirassiers and the thousand horse and the Medes and Sacae and Bactrians and Indians, alike their infantrymen and the rest of the horsemen. [3] These nations he chose in their entirety; of the rest of his allies he picked out a few from each people, the best men and those whom he knew to have done some good service. The Persians whom he chose (men who wore torques and bracelets) were more in number than those of any other nation and next to them the Medes; these indeed were as many as the Persians, but not such stout fighters. Thereby the whole number, together with the horsemen, grew to three hundred thousand men.","places":[{"placeId":"540689","name":"Boeotia","startOffset":94,"endOffset":101},{"placeId":"570577","name":"Peloponnese","startOffset":306,"endOffset":317},{"placeId":"geonames-130758","name":"Persians","startOffset":402,"endOffset":410},{"placeId":"geonames-130758","name":"Persian","startOffset":527,"endOffset":534},{"placeId":"geonames-130758","name":"Persians","startOffset":857,"endOffset":865},{"placeId":"geonames-130758","name":"Persians","startOffset":1029,"endOffset":1037}]},{"id":114,"text":"Now while Mardonius was choosing his army and Xerxes was in Thessaly, there came an oracle from Delphi to the Lacedaemonians, that they should demand justice of Xerxes for the slaying of Leonidas and take whatever he should offer them. The Spartans then sent a herald with all speed. He found the army yet undivided in Thessaly, came into Xerxes' presence, and spoke as follows: [2] The Lacedaemonians and the Heraclidae of Sparta demand of you, king of the Medes, that you pay the penalty for the death of their king, whom you killed while he defended Hellas. At that Xerxes laughed, and after a long while, he pointed to Mardonius, who chanced to be standing by him and said, Then here is Mardonius, who shall pay those you speak of such penalty as befits them.","places":[{"placeId":"540726","name":"Delphi","startOffset":96,"endOffset":102},{"placeId":"570406","name":"Lacedaemonians","startOffset":110,"endOffset":124},{"placeId":"570685","name":"Spartans","startOffset":240,"endOffset":248},{"placeId":"570406","name":"Lacedaemonians","startOffset":388,"endOffset":402},{"placeId":"geonames-390903","name":"Hellas","startOffset":554,"endOffset":560}]},{"id":115,"text":"So the herald took that response and departed, but Xerxes left Mardonius in Thessaly. He himself journeyed with all speed to the Hellespont and came in forty-five days to the passage for crossing, bringing back with him as good as none (if one may say so) of his host. [2] Wherever and to whatever people they came, they seized and devoured its produce. If they found none, they would eat the grass of the field and strip the bark and pluck the leaves of the trees, garden and wild alike, leaving nothingsuch was the degree of their starvation. [3] Moreover, pestilence and dysentery broke out among them on their way, from which they died. Some who were sick Xerxes left behind, charging the cities to which he came in his march to care for them and nourish them, some in Thessaly and some in Siris of Paeonia and in Macedonia. [4] In Siris he had left the sacred chariot of Zeus when he was marching to Hellas, but on his return he did not get it back again. The Paeonians had given it to the Thracians, and when Xerxes demanded it back, they said that the horses had been carried off from pasture by the Thracians of the hills who dwelt about the headwaters of the Strymon.","places":[{"placeId":"491656","name":"Macedonia","startOffset":819,"endOffset":828},{"placeId":"geonames-390903","name":"Hellas","startOffset":906,"endOffset":912}]},{"id":116,"text":"It was then that a monstrous deed was done by the Thracian king of the Bisaltae and the Crestonian country. He had refused to be of his own free will Xerxes' slave, and fled to the mountains called Rhodope. He forbade his sons to go with the army to Hellas, [2] but they took no account of that; they had always wanted to see the war, and they followed the Persians' march. For this reason, when all the six of them returned back scatheless, their father tore out their eyes.","places":[{"placeId":"geonames-390903","name":"Hellas","startOffset":250,"endOffset":256},{"placeId":"geonames-130758","name":"Persians","startOffset":357,"endOffset":365}]},{"id":117,"text":"This was their reward. Now the Persians, journeying through Thrace to the passage, made haste to cross to Abydos in their ships, for they found the bridges no longer made fast but broken by a storm. There their march halted, and more food was given them than on their way. [2] Then by reason of their immoderate gorging and the change of the water which they drank, many of the army that had survived died. The rest came with Xerxes to Sardis.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":31,"endOffset":39}]},{"id":118,"text":"There is, however, another tale, which is this: when Xerxes came in his march from Athens to Eion on the Strymon, he travelled no farther than that by land, but committed his army to Hydarnes to be led to the Hellespont. He himself embarked and set sail for Asia in a Phoenician ship. [2] In the course of this voyage he was caught by a strong wind called the Strymonian, which lifted up the waves. This storm bearing the harder upon him by reason of the heavy load of the ship (for the Persians of his company who were on the deck were so many), the king grew afraid and cried to the ship's pilot asking him if there were any way of deliverance. To this the man said, [3] Sire, there is none, if we do not rid ourselves of these many who are on board. Hearing that, it is said, Xerxes said to the Persians, Now it is for you to prove your concern for your king, for it seems that my deliverance rests with you. [4] At this they bowed and leapt into the sea. The ship, now much lighter, came by these means safe to Asia. No sooner had Xerxes disembarked on land, than he made the pilot a gift of a golden crown for saving the king's life but cut off his head for being the death of many Persians.","places":[{"placeId":"579885","name":"Athens","startOffset":83,"endOffset":89},{"placeId":"geonames-130758","name":"Persians","startOffset":487,"endOffset":495},{"placeId":"geonames-130758","name":"Persians","startOffset":800,"endOffset":808},{"placeId":"geonames-130758","name":"Persians","startOffset":1191,"endOffset":1199}]},{"id":119,"text":"This is the other tale of Xerxes' return; but I for my part believe neither the story of the Persians' fate nor any other part of it. For if indeed the pilot had spoken to Xerxes in this way, I think that there is not one in ten thousand who would not say that the king would have bidden the men on deck (who were Persians and of the best blood of Persia) descend into the ship's hold, and would have taken from the Phoenician rowers a number equal to the number of the Persians and cast them into the sea. No, the truth is that Xerxes did as I have already said, and returned to Asia with his army by road.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":93,"endOffset":101},{"placeId":"geonames-130758","name":"Persians","startOffset":314,"endOffset":322},{"placeId":"geonames-130758","name":"Persians","startOffset":470,"endOffset":478}]},{"id":120,"text":"There is further proof of this, for it is known that when Xerxes came to Abdera in his return, he made a compact of friendship with its people and gave them a golden sword and a gilt tiara. As the people of Abdera say (but for my part I wholly disbelieve them), it was here that Xerxes in his flight back from Athens first loosed his girdle, as being here in safety. Now Abdera lies nearer to the Hellespont than the Strymon and Eion, where they say that he took ship.","places":[{"placeId":"579885","name":"Athens","startOffset":310,"endOffset":316}]},{"id":121,"text":"As for the Greeks, not being able to take Andros, they went to Carystus. When they had laid it waste, they returned to Salamis. First of all they set apart for the gods, among other first-fruits, three Phoenician triremes, one to be dedicated at the Isthmus, where it was till my lifetime, the second at Sunium, and the third for Ajax at Salamis where they were. [2] After that, they divided the spoils and sent the first-fruits of it to Delphi; of this was made a man's image twelve cubits high, holding in his hand the figurehead of a ship. This stood in the same place as the golden statue of Alexander the Macedonian.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":11,"endOffset":17},{"placeId":"580101","name":"Salamis","startOffset":119,"endOffset":126},{"placeId":"580101","name":"Salamis","startOffset":338,"endOffset":345},{"placeId":"540726","name":"Delphi","startOffset":438,"endOffset":444},{"placeId":"491656","name":"Macedonian","startOffset":610,"endOffset":620}]},{"id":122,"text":"Having sent the first-fruits to Delphi, the Greeks, in the name of the country generally, made inquiry of the god whether the first-fruits which he had received were of full measure and whether he was content. To this he said that he was content with what he had received from all other Greeks, but not from the Aeginetans. From these he demanded the victor's prize for the sea-fight of Salamis. When the Aeginetans learned that, they dedicated three golden stars which are set on a bronze mast, in the angle, nearest to Croesus' bowl.","places":[{"placeId":"540726","name":"Delphi","startOffset":32,"endOffset":38},{"placeId":"geonames-390903","name":"Greeks","startOffset":44,"endOffset":50},{"placeId":"geonames-390903","name":"Greeks","startOffset":287,"endOffset":293},{"placeId":"579844","name":"Aeginetans","startOffset":312,"endOffset":322},{"placeId":"580101","name":"Salamis","startOffset":387,"endOffset":394},{"placeId":"579844","name":"Aeginetans","startOffset":405,"endOffset":415}]},{"id":123,"text":"After the division of the spoils, the Greeks sailed to the Isthmus, there to award the prize of excellence to him who had shown himself most worthy of it in that war. [2] But when the admirals came and at the altar of Poseidon gave their votes to judge who was first and who second among them, each of them voted for himself, supposing himself to have done the best service. The greater part of them, however, united in giving the second place to Themistocles. So they each gained but one vote, while Themistocles far outstripped them in votes for the second place.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":38,"endOffset":44}]},{"id":124,"text":"The Greeks were too jealous to assign the prize and sailed away each to his own place, leaving the matter undecided; nevertheless, Themistocles was lauded, and throughout all of Hellas was deemed the wisest man by far of the Greeks. [2] However, because he had not received from those that fought at Salamis the honor due to his preeminence, he immediately afterwards went to Lacedaemon in order that he might receive honor there. The Lacedaemonians welcomed him and paid him high honor. They bestowed on Eurybiades a crown of olive as the reward of excellence and another such crown on Themistocles for his wisdom and cleverness. They also gave him the finest chariot in Sparta, [3] and with many words of praise, they sent him home with the three hundred picked men of Sparta who are called Knights to escort him as far as the borders of Tegea. Themistocles was the only man of whom we know to whom the Spartans gave this escort.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":4,"endOffset":10},{"placeId":"geonames-390903","name":"Hellas","startOffset":178,"endOffset":184},{"placeId":"geonames-390903","name":"Greeks","startOffset":225,"endOffset":231},{"placeId":"580101","name":"Salamis","startOffset":300,"endOffset":307},{"placeId":"570406","name":"Lacedaemon","startOffset":376,"endOffset":386},{"placeId":"570406","name":"Lacedaemonians","startOffset":435,"endOffset":449},{"placeId":"570685","name":"Spartans","startOffset":905,"endOffset":913}]},{"id":125,"text":"But when Themistocles returned to Athens from Lacedaemon, Timodemus of Aphidnae, who was one of Themistocles' enemies but not a man of note, was crazed with envy and spoke bitterly to Themistocles of his visit to Lacedaemon, saying that the honors he had from the Lacedaemonians were paid him for Athens' sake and not for his own. [2] This he kept saying until Themistocles replied, This is the truth of the matter: if I had been a man of Belbina I would not have been honored in this way by the Spartans, nor would you, sir, for all you are a man of Athens. Such was the end of that business.","places":[{"placeId":"579885","name":"Athens","startOffset":34,"endOffset":40},{"placeId":"570406","name":"Lacedaemon","startOffset":46,"endOffset":56},{"placeId":"570406","name":"Lacedaemon","startOffset":213,"endOffset":223},{"placeId":"570406","name":"Lacedaemonians","startOffset":264,"endOffset":278},{"placeId":"579885","name":"Athens","startOffset":297,"endOffset":303},{"placeId":"570685","name":"Spartans","startOffset":497,"endOffset":505},{"placeId":"579885","name":"Athens","startOffset":552,"endOffset":558}]},{"id":126,"text":"Artabazus son of Pharnaces, who was already a notable man among the Persians and grew to be yet more so through the Plataean business, escorted the king as far as the passage with sixty thousand men of the army that Mardonius had chosen. [2] Xerxes, then, was now in Asia, and when Artabazus came near Pallene in his return (for Mardonius was wintering in Thessaly and Macedonia and making no haste to come to the rest of his army), he thought it right that he should enslave the people of Potidaea, whom he found in revolt. [3] When the king had marched away past the town and the Persian fleet had taken flight from Salamis, Potidaea had openly revolted from the barbarians and so too had the rest of the people of Pallene.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":68,"endOffset":76},{"placeId":"491656","name":"Macedonia","startOffset":369,"endOffset":378},{"placeId":"geonames-130758","name":"Persian","startOffset":582,"endOffset":589},{"placeId":"580101","name":"Salamis","startOffset":618,"endOffset":625}]},{"id":127,"text":"Thereupon Artabazus laid siege to Potidaea, and suspecting that Olynthus too was plotting revolt from the king, he laid siege to it also. This town was held by Bottiaeans who had been driven from the Thermaic gulf by the Macedonians. Having besieged and taken Olynthus, he brought these men to a lake and there cut their throats and delivered their city over to the charge of Critobulus of Torone and the Chalcidian people. It was in this way that the Chalcidians gained possession of Olynthus.","places":[{"placeId":"491656","name":"Macedonians","startOffset":221,"endOffset":232},{"placeId":"491561","name":"Chalcidians","startOffset":452,"endOffset":463}]},{"id":128,"text":"Having taken Olynthus, Artabazus dealt immediately with Potidaea, and his zeal was aided by Timoxenus the general of the Scionaeans, who agreed to betray the place to him. I do not know how the agreement was first made, since there is no information available about it. The result, however, was as I will now show. Whenever Timoxenus wrote a letter to be sent to Artabazus, or Artabazus to Timoxenus, they would wrap it around the shaft of an arrow at the notches, attach feathers to the letter, and shoot it to a place upon which they had agreed. [2] Timoxenus' plot to betray Potidaea was, however, discovered, for Artabazus in shooting an arrow to the place agreed upon, missed it and hit the shoulder of a man of Potidaea. A throng gathered quickly around the man when he was struck (which is a thing that always happens in war), and they straightway took the arrow, found the letter, and carried it to their generals; the rest of their allies of Pallene were also there present. [3] The generals read the letter and perceived who was the traitor, but they resolved for Scione's sake that they would not condemn Timoxenus with a charge of treason, for fear that the people of Scione should hereafter be called traitors.","places":[]},{"id":129,"text":"This is how Timoxenus' treachery was brought to light. But when Artabazus had besieged Potidaea for three months, there was a great ebb-tide in the sea which lasted for a long while, and when the foreigners saw that the sea was turned to a marsh, they prepared to pass over it into Pallene. [2] When they had made their way over two-fifths of it, however, and three yet remained to cross before they could be in Pallene, there came a great flood-tide, higher, as the people of the place say, than any one of the many that had been before. Some of them who did not know how to swim were drowned, and those who knew were slain by the Potidaeans, who came among them in boats. [3] The Potidaeans say that the cause of the high sea and flood and the Persian disaster lay in the fact that those same Persians who now perished in the sea had profaned the temple and the image of Poseidon which was in the suburb of the city. I think that in saying that this was the cause they are correct. Those who escaped alive were led away by Artabazus to Mardonius in Thessaly. This is how the men who had been the king's escort fared.","places":[{"placeId":"geonames-130758","name":"Persian","startOffset":746,"endOffset":753},{"placeId":"geonames-130758","name":"Persians","startOffset":795,"endOffset":803}]},{"id":130,"text":"All that was left of Xerxes' fleet, having in its flight from Salamis touched the coast of Asia and ferried the king and his army over from the Chersonese to Abydos, wintered at Cyme. Then early in the first dawn of spring they mustered at Samos, where some of the ships had wintered. The majority of their fighting men were Persians and Medes. [2] Mardontes son of Bagaeus and Artayntes son of Artachaees came to be their admirals, and Artayntes chose also his own nephew Ithamitres to have a share in the command. But by reason of the heavy blow dealt them they went no further out to sea westwards, nor did anyone insist that they should so do. They did, however, lie off Samos keeping watch against a revolt in Ionia. The whole number of their ships, Ionian and other, was three hundred. [3] In truth they did not expect that the Greeks would come to Ionia, but rather that they would be content to guard their own country. This they thought because the Greeks had not pursued them when they fled from Salamis, but had been glad to be quit of them. In regard to the sea, the Persians were at heart beaten men, but they supposed that on land Mardonius would easily prevail. [4] So they were at Samos, and there planned to do what harm they could to their enemies and to listen in the interim for news of how Mardonius' affairs were proceeding.","places":[{"placeId":"580101","name":"Salamis","startOffset":62,"endOffset":69},{"placeId":"geonames-130758","name":"Persians","startOffset":325,"endOffset":333},{"placeId":"geonames-390903","name":"Greeks","startOffset":834,"endOffset":840},{"placeId":"geonames-390903","name":"Greeks","startOffset":958,"endOffset":964},{"placeId":"580101","name":"Salamis","startOffset":1006,"endOffset":1013},{"placeId":"geonames-130758","name":"Persians","startOffset":1079,"endOffset":1087}]},{"id":131,"text":"As for the Greeks, the coming of spring and Mardonius' being in Thessaly moved them to action. They had not yet begun the mustering of their army, but their fleet, one hundred and ten ships, came to Aegina. [2] Their general and admiral was Leutychides son of Menares, who traced his lineage from son to father through Hegesilaus, Hippocratides, Leutychides, Anaxilaus, Archidemus, Anaxandrides, Theopompus, Nicandrus, Charilaus, Eunomus, Polydectes, Prytanis, Euryphon, Procles, Aristodemus, Aristomachus, Cleodaeus, to Hyllus who was the son of Heracles. He was of the second royal house. [3] All the aforesaid had been kings of Sparta, save the seven named first after Leutychides. The general of the Athenians was Xanthippus son of Ariphron.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":11,"endOffset":17},{"placeId":"579885","name":"Athenians","startOffset":704,"endOffset":713}]},{"id":132,"text":"When all the ships had arrived at Aegina, there came to the Greek quarters messengers from the Ionians, the same who a little while before that had gone to Sparta and entreated the Lacedaemonians to free Ionia. [2] One of these was Herodotus the son of Basileides. These, who at first were seven, made a faction and conspired to slay Strattis, the tyrant of Chios, but when their conspiracy became known, one of the accomplices having revealed their enterprise, the six who remained got them secretly out of Chios, from where they went to Sparta and now to Aegina, entreating the Greeks to sail to Ionia. [3] The Greeks took them as far as Delos, and that not readily, for they, having no knowledge of those parts and thinking that armed men were everywhere, feared all that lay beyond. They supposed too that Samos was no nearer to them than the Pillars of Heracles. So it happened that the barbarians were too disheartened to dare to sail farther west than Samos, while at the same time the Greeks dared to go at the Chians' request no farther east than Delos. It was fear which kept the middle space between them.","places":[{"placeId":"570406","name":"Lacedaemonians","startOffset":181,"endOffset":195},{"placeId":"geonames-390903","name":"Greeks","startOffset":580,"endOffset":586},{"placeId":"geonames-390903","name":"Greeks","startOffset":613,"endOffset":619},{"placeId":"geonames-390903","name":"Greeks","startOffset":993,"endOffset":999}]},{"id":133,"text":"The Greeks, then, sailed to Delos, and Mardonius wintered in Thessaly. Having his headquarters there he sent a man of Europus called Mys to visit the places of divination, charging him to inquire of all the oracles which he could test. What it was that he desired to learn from the oracles when he gave this charge, I cannot say, for no one tells of it. I suppose that he sent to inquire concerning his present business, and that alone.","places":[{"placeId":"geonames-390903","name":"Greeks","startOffset":4,"endOffset":10}]},{"id":134,"text":"This man Mys is known to have gone to Lebadea and to have bribed a man of the country to go down into the cave of Trophonius and to have gone to the place of divination at Abae in Phocis. He went first to Thebes where he inquired of Ismenian Apollo (sacrifice is there the way of divination, as at Olympia), and moreover he bribed one who was no Theban but a stranger to lie down to sleep in the shrine of Amphiaraus. [2] No Theban may seek a prophecy there, for Amphiaraus bade them by an oracle to choose which of the two they wanted and forgo the other, and take him either for their prophet or for their ally. They chose that he should be their ally. Therefore no Theban may lie down to sleep in that place.","places":[]},{"id":135,"text":"But at this time there happened, as the Thebans say, a thing at which I marvel greatly. It would seem that this man Mys of Europus came in his wanderings among the places of divination to the precinct of Ptoan Apollo. This temple is called Ptoum, and belongs to the Thebans. It lies by a hill, above lake Copais, very near to the town Acraephia. [2] When the man called Mys entered into this temple together with three men of the town who were chosen on the state's behalf to write down the oracles that should be given, straightway the diviner prophesied in a foreign tongue. [3] The Thebans who followed him were astonished to hear a strange language instead of Greek and knew not what this present matter might be. Mys of Europus, however, snatched from them the tablet which they carried and wrote on it that which was spoken by the prophet, saying that the words of the oracle were Carian. After writing everything down, he went back to Thessaly.","places":[]},{"id":136,"text":"Mardonius read whatever was said in the oracles, and presently he sent a messenger to Athens, Alexander, a Macedonian, son of Amyntas. Him he sent, partly because the Persians were akin to him; Bubares, a Persian, had taken to wife Gygaea Alexander's sister and Amyntas' daughter, who had borne to him that Amyntas of Asia who was called by the name of his mother's father, and to whom the king gave Alabanda a great city in Phrygia for his dwelling. Partly too he sent him because he learned that Alexander was a protector and benefactor to the Athenians. [2] It was thus that he supposed he could best gain the Athenians for his allies, of whom he heard that they were a numerous and valiant people, and knew that they had been the chief authors of the calamities which had befallen the Persians at sea. [3] If he gained their friendship he thought he would easily become master of the seas, as truly he would have been. On land he supposed himself to be by much the stronger, and he accordingly reckoned that thus he would have the upper hand of the Greeks. This chanced to be the prediction of the oracles which counseled him to make the Athenians his ally. It was in obedience to this that he sent his messenger.","places":[{"placeId":"579885","name":"Athens","startOffset":86,"endOffset":92},{"placeId":"491656","name":"Macedonian","startOffset":107,"endOffset":117},{"placeId":"geonames-130758","name":"Persians","startOffset":167,"endOffset":175},{"placeId":"geonames-130758","name":"Persian","startOffset":205,"endOffset":212},{"placeId":"579885","name":"Athenians","startOffset":546,"endOffset":555},{"placeId":"579885","name":"Athenians","startOffset":613,"endOffset":622},{"placeId":"geonames-130758","name":"Persians","startOffset":789,"endOffset":797},{"placeId":"geonames-390903","name":"Greeks","startOffset":1053,"endOffset":1059},{"placeId":"579885","name":"Athenians","startOffset":1142,"endOffset":1151}]},{"id":137,"text":"This Alexander was seventh in descent from Perdiccas, who got for himself the tyranny of Macedonia in the way that I will show. Three brothers of the lineage of Temenus came as banished men from Argos to Illyria, Gauanes and Aeropus and Perdiccas; and from Illyria they crossed over into the highlands of Macedonia till they came to the town Lebaea. [2] There they served for wages as thetes in the king's household, one tending horses and another oxen. Perdiccas, who was the youngest, tended the lesser flocks. Now the king's wife cooked their food for them, for in old times the ruling houses among men, and not the common people alone, were lacking in wealth. [3] Whenever she baked bread, the loaf of the thete Perdiccas grew double in size. Seeing that this kept happening, she told her husband, and it seemed to him when be heard it that this was a portent signifying some great matter. So he sent for his thetes and bade them depart from his territory. [4] They said it was only just that they should have their wages before they departed. When they spoke of wages, the king was moved to foolishness and said, That is the wage you merit, and it is that I give you, pointing to the sunlight that shone down the smoke vent into the house. [5] Gauanes and Aeropus, who were the elder, stood astonished when they heard that, but the boy said, We accept what you give, O king, and with that he took a knife which he had with him and drew a line with it on the floor of the house round the sunlight. When he had done this, he three times gathered up the sunlight into the fold of his garment and went his way with his companions.","places":[{"placeId":"491656","name":"Macedonia","startOffset":89,"endOffset":98},{"placeId":"491656","name":"Macedonia","startOffset":305,"endOffset":314}]},{"id":138,"text":"So they departed, but one of those who sat nearby declared to the king what this was that the boy had done and how it was of set purpose that the youngest of them had accepted the gift offered. When the king heard this, he was angered, and sent riders after them to slay them. There is, however, in that land a river, to which the descendants from Argos of these men offer sacrifice as their deliverer. [2] This river, when the sons of Temenus had crossed it, rose in such flood that the riders could not cross. So the brothers came to another part of Macedonia and settled near the place called the garden of Midas son of Gordias, where roses grow of themselves, each bearing sixty blossoms and of surpassing fragrance. [3] In this garden, according to the Macedonian story, Silenus was taken captive. Above it rises the mountain called Bermius, which none can ascend for the wintry cold. From there they issued forth when they had won that country and presently subdued also the rest of Macedonia.","places":[{"placeId":"491656","name":"Macedonia","startOffset":552,"endOffset":561},{"placeId":"491656","name":"Macedonian","startOffset":758,"endOffset":768},{"placeId":"491656","name":"Macedonia","startOffset":989,"endOffset":998}]},{"id":139,"text":"From that Perdiccas Alexander was descended, being the son of Amyntas, who was the son of Alcetes; Alcetes' father was Aeropus, and his was Philippus; Philippus' father was Argaeus, and his again was Perdiccas, who won that lordship. 140A.Such was the lineage of Alexander son of Amyntas. When he came to Athens from Mardonius who had sent him, he spoke as follows : This, Athenians, is what Mardonius says to you:there is a message come to me from the king, saying, I forgive the Athenians all the offenses which they have committed against me; [2] and now, Mardonius, I bid you do this:Give them back their territory and let them choose more for themselves besides, where ever they will, and dwell under their own laws. Rebuild all their temples which I burnt, if they will make a pact with me. This is the message, and I must obey it (says Mardonius), unless you take it upon yourselves to hinder me. [3] This too I say to you:Why are you so insane as to wage war against the king? You cannot overcome him, nor can you resist him forever. As for the multitude of Xerxes' army, what it did, you have seen, and you have heard of the power that I now have with me. Even if you overcome and conquer us (whereof, if you be in your right minds, you can have no hope), yet there will come another host many times as great as this. [4] Be not then minded to match yourselves against the king, and thereby lose your land and always be yourselves in jeopardy, but make peace. This you can most honorably do since the king is that way inclined. Keep your freedom, and agree to be our brothers in arms in all faith and honesty. 140B. This Athenians, is the message which Mardonius charges me to give you. For my own part I will say nothing of the goodwill that I have towards you, for it would not be the first that you have learned of that. But I entreat you to follow Mardonius' counsel. [2] Well I see that you will not have power to wage war against Xerxes forever. If I saw such power in you, I would never have come to you with such language as this, for the king's might is greater than human, and his arm is long. [3] If, therefore, you will not straightway agree with them, when the conditions which they offer you are so great, I fear what may befall you. For of all the allies you dwell most in the very path of the war, and you alone will never escape destruction, your country being marked out for a battlefield. [4] No, rather follow his counsel, for it is not to be lightly regarded by you who are the only men in Hellas whose offenses the great king is ready to forgive and whose friend he would be.","places":[{"placeId":"579885","name":"Athens","startOffset":305,"endOffset":311},{"placeId":"579885","name":"Athenians","startOffset":374,"endOffset":383},{"placeId":"579885","name":"Athenians","startOffset":484,"endOffset":493},{"placeId":"579885","name":"Athenians","startOffset":1637,"endOffset":1646},{"placeId":"geonames-390903","name":"Hellas","startOffset":2527,"endOffset":2533}]},{"id":141,"text":"These were the words of Alexander. The Lacedaemonians, however, had heard that Alexander had come to Athens to bring the Athenians to an agreement with the barbarian. Remembering the oracles, how that they themselves with the rest of the Dorians must be driven out of the Peloponnese by the Medes and the Athenians, they were greatly afraid that the Athenians should agree with the Persian, and they straightway resolved that they would send envoys. [2] Moreover, it so fell out for both that they made their entry at one and the same time, for the Athenians delayed and waited for them, being certain that the Lacedaemonians were going to hear that the messenger had come from the Persians for an agreement. They had heard that the Lacedaemonians would send their envoys with all speed. Therefore it was of set purpose that they did this in order that they might make their will known to the Lacedaemonians.","places":[{"placeId":"570406","name":"Lacedaemonians","startOffset":39,"endOffset":53},{"placeId":"579885","name":"Athens","startOffset":101,"endOffset":107},{"placeId":"579885","name":"Athenians","startOffset":121,"endOffset":130},{"placeId":"570577","name":"Peloponnese","startOffset":272,"endOffset":283},{"placeId":"579885","name":"Athenians","startOffset":305,"endOffset":314},{"placeId":"579885","name":"Athenians","startOffset":350,"endOffset":359},{"placeId":"geonames-130758","name":"Persian","startOffset":382,"endOffset":389},{"placeId":"579885","name":"Athenians","startOffset":549,"endOffset":558},{"placeId":"570406","name":"Lacedaemonians","startOffset":611,"endOffset":625},{"placeId":"geonames-130758","name":"Persians","startOffset":682,"endOffset":690},{"placeId":"570406","name":"Lacedaemonians","startOffset":733,"endOffset":747},{"placeId":"570406","name":"Lacedaemonians","startOffset":893,"endOffset":907}]},{"id":142,"text":"So when Alexander had made an end of speaking, the envoys from Sparta said, We on our part have been sent by the Lacedaemonians to entreat you to do nothing harmful to Hellas and accept no offer from the barbarian. [2] That would be unjust and dishonorable for any Greek, but for you most of all, on many counts; it was you who stirred up this war, by no desire of ours, and your territory was first the stake of that battle in which all Hellas is now engaged. [3] Apart from that, it is unbearable that not all this alone but slavery too should be brought upon the Greeks by you Athenians, who have always been known as givers of freedom to many. Nevertheless, we grieve with you in your afflictions, seeing that you have lost two harvests and your substance has been for a long time wasted. [4] In requital for this the Lacedaemonians and their allies declare that they will nourish your women and all of your household members who are unserviceable for war, so long as this war will last. Let not Alexander the Macedonian win you with his smooth-tongued praise of Mardonius' counsel. It is his business to follow that counsel, [5] for as he is a tyrant so must he be the tyrant's fellow-worker; it is not your business, if you are men rightly minded, for you know that in foreigners there is no faith nor truth. These are the words of the envoys.","places":[{"placeId":"570406","name":"Lacedaemonians","startOffset":114,"endOffset":128},{"placeId":"geonames-390903","name":"Hellas","startOffset":169,"endOffset":175},{"placeId":"geonames-390903","name":"Hellas","startOffset":439,"endOffset":445},{"placeId":"geonames-390903","name":"Greeks","startOffset":567,"endOffset":573},{"placeId":"579885","name":"Athenians","startOffset":581,"endOffset":590},{"placeId":"570406","name":"Lacedaemonians","startOffset":823,"endOffset":837},{"placeId":"491656","name":"Macedonian","startOffset":1015,"endOffset":1025}]},{"id":143,"text":"But to Alexander the Athenians replied as follows: We know of ourselves that the power of the Mede is many times greater than ours. There is no need to taunt us with that. Nevertheless in our zeal for freedom we will defend ourselves to the best of our ability. But as regards agreements with the barbarian, do not attempt to persuade us to enter into them, nor will we consent. [2] Now carry this answer back to Mardonius from the Athenians, that as long as the sun holds the course by which he now goes, we will make no agreement with Xerxes. We will fight against him without ceasing, trusting in the aid of the gods and the heroes whom he has disregarded and burnt their houses and their adornments. [3] Come no more to Athenians with such a plea, nor under the semblance of rendering us a service, counsel us to act wickedly. For we do not want those who are our friends and protectors to suffer any harm at Athenian hands.","places":[{"placeId":"579885","name":"Athenians","startOffset":21,"endOffset":30},{"placeId":"579885","name":"Athenians","startOffset":433,"endOffset":442},{"placeId":"579885","name":"Athenians","startOffset":725,"endOffset":734},{"placeId":"579885","name":"Athenian","startOffset":914,"endOffset":922}]},{"id":144,"text":"Such was their answer to Alexander, but to the Spartan envoys they said, It was most human that the Lacedaemonians should fear our making an agreement with the barbarian. We think that it is an ignoble thing to be afraid, especially since we know the Athenian temper to be such that there is nowhere on earth such store of gold or such territory of surpassing fairness and excellence that the gift of it should win us to take the Persian part and enslave Hellas. [2] For there are many great reasons why we should not do this, even if we so desired; first and foremost, the burning and destruction of the adornments and temples of our gods, whom we are constrained to avenge to the utmost rather than make pacts with the perpetrator of these things, and next the kinship of all Greeks in blood and speech, and the shrines of gods and the sacrifices that we have in common, and the likeness of our way of life, to all of which it would not befit the Athenians to be false. [3] Know this now, if you knew it not before, that as long as one Athenian is left alive we will make no agreement with Xerxes. Nevertheless we thank you for your forethought concerning us, in that you have so provided for our wasted state that you offer to nourish our households. [4] For your part, you have given us full measure of kindness, yet for ourselves, we will make shift to endure as best we may, and not be burdensome to you. But now, seeing that this is so, send your army with all speed, [5] for as we guess, the barbarian will be upon us and invade our country in no long time as soon as the message comes to him that we will do nothing that he requires of us; therefore, before he comes into Attica, now is the time for us to march first into Boeotia. At this reply of the Athenians the envoys returned back to Sparta.HerodotusThe Histories","places":[{"placeId":"570406","name":"Lacedaemonians","startOffset":101,"endOffset":115},{"placeId":"579885","name":"Athenian","startOffset":252,"endOffset":260},{"placeId":"geonames-130758","name":"Persian","startOffset":431,"endOffset":438},{"placeId":"geonames-390903","name":"Hellas","startOffset":456,"endOffset":462},{"placeId":"geonames-390903","name":"Greeks","startOffset":779,"endOffset":785},{"placeId":"579885","name":"Athenians","startOffset":950,"endOffset":959},{"placeId":"579885","name":"Athenian","startOffset":1039,"endOffset":1047},{"placeId":"540689","name":"Boeotia","startOffset":1733,"endOffset":1740},{"placeId":"579885","name":"Athenians","startOffset":1764,"endOffset":1773}]}]`)},9:{id:9,title:"Book 9: Calliope",chapters:JSON.parse(`[{"id":1,"text":"When Alexander returned and told him what he had heard from the Athenians, Mardonius set forth from Thessaly and led his army with all zeal against Athens;1 he also took with him all the people to whose countries he came along the way. The rulers of Thessaly did not repent of what they had already done and were readier than before to further his march. Thorax of Larissa, who had given Xerxes safe-conduct in his flight, now, without any attempt of concealment, opened a passage for Mardonius into Hellas.","places":[{"placeId":"579885","name":"Athenians","startOffset":64,"endOffset":73},{"placeId":"1332","name":"Thessaly","startOffset":100,"endOffset":108},{"placeId":"579885","name":"Athens","startOffset":148,"endOffset":154},{"placeId":"1332","name":"Thessaly","startOffset":250,"endOffset":258},{"placeId":"540905","name":"Larissa","startOffset":365,"endOffset":372}]},{"id":2,"text":"But when, in the course of its march, the army had come into Boeotia, the Thebans attempted to stay Mardonius, advising him that he could find no country better fitted than theirs for encampment; he should not (they begged) go further, but rather halt there and subdue all Hellas without fighting. [2] As long as the Greeks who were previously in accord remained so, it would be difficult even for the whole world to overcome them by force of arms; but if you do as we advise, said the Thebans, you will without trouble be master of all their battle plans. [3] Send money to the men who have power in their cities, and thereby you will divide Hellas against itself; after that, with your partisans to aid you, you will easily subdue those who are your adversaries.","places":[{"placeId":"540689","name":"Boeotia","startOffset":61,"endOffset":68},{"placeId":"541138","name":"Thebans","startOffset":74,"endOffset":81},{"placeId":"541138","name":"Thebans","startOffset":488,"endOffset":495}]},{"id":3,"text":"Such was their counsel, but he would not follow it. What he desired was to take Athens once more; this was partly out of mere perversity, and partly because he intended to signify to the king at Sardis by a line of beacons across the islands that he held Athens. [2] When he came to Attica, however, he found the city as unpopulated as before, for, as he learned, the majority of them were on shipboard at Salamis. So he took the city, but without any of its men. There were ten months between the kings taking of the place and the later invasion of Mardonius.","places":[{"placeId":"579885","name":"Athens","startOffset":80,"endOffset":86},{"placeId":"hestia-sardis","name":"Sardis","startOffset":195,"endOffset":201},{"placeId":"579885","name":"Athens","startOffset":255,"endOffset":261},{"placeId":"579888","name":"Attica","startOffset":283,"endOffset":289},{"placeId":"580101","name":"Salamis","startOffset":406,"endOffset":413}]},{"id":4,"text":"When Mardonius came to Athens, he sent to Salamis a certain Murychides, a man from Hellespont, bearing the same offer as Alexander the Macedonian had ferried across to the Athenians. [2] He sent this for the second time because although he already knew the Athenians' unfriendly purpose, he expected that they would abandon their stubbornness now that Attica was the captive of his spear and lay at his mercy.","places":[{"placeId":"579885","name":"Athens","startOffset":23,"endOffset":29},{"placeId":"580100","name":"Salamis","startOffset":42,"endOffset":49},{"placeId":"501434","name":"Hellespont","startOffset":83,"endOffset":93},{"placeId":"579885","name":"Athenians","startOffset":172,"endOffset":181},{"placeId":"579885","name":"Athenians","startOffset":257,"endOffset":266},{"placeId":"579888","name":"Attica","startOffset":352,"endOffset":358}]},{"id":5,"text":"For this reason he sent Murychides to Salamis who came before the council and conveyed to them Mardonius message. Then Lycidas, one of the councillors, said that it seemed best to him to receive the offer brought to them by Murychides and lay it before the people. [2] This was the opinion which he declared, either because he had been bribed by Mardonius, or because the plan pleased him. The Athenians in the council were, however, very angry; so too were those outside when they heard of it. They made a ring round Lycidas and stoned him to death. Murychides the Hellespontian, however, they permitted to depart unharmed. [3] There was much noise at Salamis over the business of Lycidas; and when the Athenian women learned what was afoot, one calling to another and bidding her follow, they went on their own impetus to the house of Lycidas and stoned to death his wife and his children.","places":[{"placeId":"580100","name":"Salamis","startOffset":38,"endOffset":45},{"placeId":"579885","name":"Athenians","startOffset":394,"endOffset":403},{"placeId":"580100","name":"Salamis","startOffset":653,"endOffset":660}]},{"id":6,"text":"Now this was how the Athenians had crossed over to Salamis. As long as they expected that the Peloponnesian army would come to their aid, they remained in Attica. But when the Peloponnesians took longer and longer to act and the invader was said to be in Boeotia already, they then conveyed all their goods out of harms way and themselves crossed over to Salamis. They also sent envoys to Lacedaemon, who were to upbraid the Lacedaemonians for permitting the barbarian to invade Attica and not helping the Athenians to meet him in Boeotia; and who were to remind the Lacedaemonians of the promises which the Persian had made to Athens if she would change sides, and warn them that the Athenians would devise some means of salvation for themselves if the Lacedaemonians sent them no help.","places":[{"placeId":"579885","name":"Athenians","startOffset":21,"endOffset":30},{"placeId":"580101","name":"Salamis","startOffset":51,"endOffset":58},{"placeId":"570577","name":"Peloponnesian","startOffset":94,"endOffset":107},{"placeId":"579888","name":"Attica","startOffset":155,"endOffset":161},{"placeId":"570577","name":"Peloponnesians","startOffset":176,"endOffset":190},{"placeId":"540689","name":"Boeotia","startOffset":255,"endOffset":262},{"placeId":"580101","name":"Salamis","startOffset":355,"endOffset":362},{"placeId":"570406","name":"Lacedaemonians","startOffset":425,"endOffset":439},{"placeId":"579888","name":"Attica","startOffset":479,"endOffset":485},{"placeId":"579885","name":"Athenians","startOffset":506,"endOffset":515},{"placeId":"540689","name":"Boeotia","startOffset":531,"endOffset":538},{"placeId":"570406","name":"Lacedaemonians","startOffset":567,"endOffset":581},{"placeId":"geonames-130758","name":"Persian","startOffset":608,"endOffset":615},{"placeId":"579885","name":"Athens","startOffset":628,"endOffset":634},{"placeId":"579885","name":"Athenians","startOffset":685,"endOffset":694},{"placeId":"570406","name":"Lacedaemonians","startOffset":754,"endOffset":768}]},{"id":7,"text":"The Lacedaemonians were at this time celebrating the festival of Hyacinthus,2 and their chief concern was to give the god his due; moreover, the wall which they were building on the Isthmus was by now getting its battlements. When the Athenian envoys arrived in Lacedaemon, bringing with them envoys from Megara and Plataea, they came before the ephors and said: 7A. The Athenians have sent us with this message: the king of the Medes is ready to give us back our country, and to make us his confederates, equal in right and standing, in all honor and honesty, and to give us whatever land we ourselves may choose besides our own. [2] But we, since we do not want to sin against Zeus the god of Hellas and think it shameful to betray Hellas, have not consented. This we have done despite the fact that the Greeks are dealing with us wrongfully and betraying us to our hurt; furthermore, we know that it is more to our advantage to make terms with the Persians than to wage war with him, yet we will not make terms with him of our own free will. For our part, we act honestly by the Greeks; 7B. but what of you, who once were in great dread lest we should make terms with the Persian? Now that you have a clear idea of our sentiments and are sure that we will never betray Hellas, and now that the wall which you are building across the Isthmus is nearly finished, you take no account of the Athenians, but have deserted us despite all your promises that you would withstand the Persian in Boeotia, and have permitted the barbarian to march into Attica. [2] For the present, then, the Athenians are angry with you since you have acted in a manner unworthy of you. Now they ask you to send with us an army with all speed, so that we may await the foreigner's onset in Attica; since we have lost Boeotia, in our own territory the most suitable place for a battle is the Thriasian plain.","places":[{"placeId":"570406","name":"Lacedaemonians","startOffset":4,"endOffset":18},{"placeId":"541063","name":"Plataea","startOffset":316,"endOffset":323},{"placeId":"579885","name":"Athenians","startOffset":372,"endOffset":381},{"placeId":"geonames-130758","name":"Persians","startOffset":952,"endOffset":960},{"placeId":"geonames-130758","name":"Persian","startOffset":1176,"endOffset":1183},{"placeId":"579885","name":"Athenians","startOffset":1392,"endOffset":1401},{"placeId":"geonames-130758","name":"Persian","startOffset":1479,"endOffset":1486},{"placeId":"540689","name":"Boeotia","startOffset":1490,"endOffset":1497},{"placeId":"579888","name":"Attica","startOffset":1546,"endOffset":1552},{"placeId":"579885","name":"Athenians","startOffset":1585,"endOffset":1594},{"placeId":"540689","name":"Boeotia","startOffset":1794,"endOffset":1801}]},{"id":8,"text":"When the ephors heard that, they delayed answering till the next day, and again till the day after. This they did for ten days, putting it off from day to day. In the meantime all the Peloponnesians were doing all they could to fortify the Isthmus, and they had nearly completed the task. [2] I cannot say for certain why it was that when Alexander the Macedonian came to Athens3 the Lacedaemonians insisted that the Athenians should not join the side of the Persian, yet now took no account of that; it may be that with the Isthmus fortified, they thought they had no more need of the Athenians, whereas when Alexander came to Attica, their wall was not yet built and they were working at this in great fear of the Persians.","places":[{"placeId":"570577","name":"Peloponnesians","startOffset":184,"endOffset":198},{"placeId":"579885","name":"Athens","startOffset":372,"endOffset":378},{"placeId":"570406","name":"Lacedaemonians","startOffset":384,"endOffset":398},{"placeId":"579885","name":"Athenians","startOffset":417,"endOffset":426},{"placeId":"geonames-130758","name":"Persian","startOffset":459,"endOffset":466},{"placeId":"579885","name":"Athenians","startOffset":586,"endOffset":595},{"placeId":"579888","name":"Attica","startOffset":628,"endOffset":634},{"placeId":"geonames-130758","name":"Persians","startOffset":716,"endOffset":724}]},{"id":9,"text":"The nature of their response was as follows: on the day before the final hearing of the Athenian delegation, Chileus, a man of Tegea, who had more authority with the Lacedaemonians than any other of their guests, learned from the ephors all that the Athenians had said. [2] Upon hearing this he, as the tale goes, said to the ephors, Sirs, if the Athenians are our enemies and the barbarians allies, then although you push a strong wall across the Isthmus, a means of access into the Peloponnese lies wide open for the Persian. No, give heed to what they say before the Athenians take some new resolve which will bring calamity to Hellas.","places":[{"placeId":"570406","name":"Lacedaemonians","startOffset":166,"endOffset":180},{"placeId":"579885","name":"Athenians","startOffset":250,"endOffset":259},{"placeId":"579885","name":"Athenians","startOffset":348,"endOffset":357},{"placeId":"geonames-130758","name":"Persian","startOffset":520,"endOffset":527},{"placeId":"579885","name":"Athenians","startOffset":571,"endOffset":580}]},{"id":10,"text":"This was the counsel he gave the ephors, who straightway took it to heart. Without saying a word to the envoys who had come from the cities, they ordered five thousand Spartans to march before dawn. Seven helots were appointed to attend each of them, and they gave the command to Pausanias son of Cleombrotus. [2] The leader's place rightfully belonged to Pleistarchus son of Leonidas, but he was still a boy, and Pausanias his guardian and cousin. Cleombrotus, Pausanias' father and Anaxandrides' son, was no longer living. [3] After he led the army which had built the wall away from the Isthmus, he lived but a little while before his death. The reason for Cleombrotus leading his army away from the Isthmus was that while he was offering sacrifice for victory over the Persian, the sun was darkened in the heavens. Pausanias chose as his colleague a man of the same family,4 Euryanax son of Dorieus.","places":[{"placeId":"570685","name":"Spartans","startOffset":168,"endOffset":176},{"placeId":"geonames-130758","name":"Persian","startOffset":773,"endOffset":780}]},{"id":11,"text":"So Pausanias' army had marched away from Sparta; but as soon as it was day, the envoys came before the ephors, having no knowledge of the expedition, and being minded themselves too to depart each one to his own place. When they arrived, You Lacedaemonians, they said, remain where you are, observing your Hyacinthia and celebrating, leaving your allies deserted. For the wrong that you do them and for lack of allies, the Athenians, will make their peace with the Persian as best they can, [2] and thereafter, in so far as we will be king's allies, we will march with him against whatever land his men lead us. Then will you learn what the issue of this matter will be for you. In response to this the ephors swore to them that they believed their army to be even now at Orestheum,5 marching against the strangers, as they called the barbarians. [3] Having no knowledge of this, the envoys questioned them further as to the meaning of this and thereby learned the whole truth; they marvelled at this and hastened with all speed after the army. With them went five thousand men-at-arms of the Lacedaemonian countrymen.6","places":[{"placeId":"570685","name":"Sparta","startOffset":41,"endOffset":47},{"placeId":"570406","name":"Lacedaemonians","startOffset":243,"endOffset":257},{"placeId":"579885","name":"Athenians","startOffset":426,"endOffset":435},{"placeId":"geonames-130758","name":"Persian","startOffset":468,"endOffset":475}]},{"id":12,"text":"So they made haste to reach the Isthmus. The Argives, however, had already promised Mardonius that they would prevent the Spartans from going out to war. As soon as they were informed that Pausanias and his army had departed from Sparta, they sent as their herald to Attica the swiftest runner of long distances whom they could find. [2] When he came to Athens, he spoke to Mardonius in the following manner: I have been sent by the Argives to tell you that the young men have gone out from Lacedaemon to war, and that the Argives cannot prevent them from so doing; therefore, make plans accordingly.","places":[{"placeId":"570685","name":"Spartans","startOffset":122,"endOffset":130},{"placeId":"570685","name":"Sparta","startOffset":230,"endOffset":236},{"placeId":"579888","name":"Attica","startOffset":267,"endOffset":273},{"placeId":"579885","name":"Athens","startOffset":354,"endOffset":360}]},{"id":13,"text":"So spoke the herald, and went back again. When Mardonius heard that, he no longer desired to remain in Attica. Before he had word of it, he had held his land, desiring to know the Athenians' plan and what they would do; he neither harmed nor harried the land of Attica, for he still supposed that they would make terms with him. [2] But when he could not prevail upon them and learned the truth of the matter, he withdrew before Pausanias' army prior to its entering the Isthmus. First, however, he burnt Athens, and utterly overthrew and demolished whatever wall or house or temple was left standing. [3] The reason for his marching away was that Attica was not a land fit for horses, and if he should be defeated in a battle, there was no way of retreat save one so narrow that a few men could prevent his passage.7 He therefore planned to retreat to Thebes and do battle where he had a friendly city at his back and ground suitable for horsemen.","places":[{"placeId":"579888","name":"Attica","startOffset":103,"endOffset":109},{"placeId":"579885","name":"Athenians","startOffset":180,"endOffset":189},{"placeId":"579885","name":"Athens","startOffset":505,"endOffset":511},{"placeId":"579888","name":"Attica","startOffset":648,"endOffset":654}]},{"id":14,"text":"So Mardonius drew his men off, and when he had now set forth on his road there came a message that in addition to the others, an advance guard of a thousand Lacedaemonians had arrived at Megara. When he heard this, he deliberated how he might first make an end of these. He accordingly turned about and led his army against Megara, his cavalry going first and overrunning the lands of that city. That was the westernmost place in Europe which this Persian army reached.","places":[{"placeId":"570406","name":"Lacedaemonians","startOffset":157,"endOffset":171},{"placeId":"geonames-130758","name":"Persian","startOffset":448,"endOffset":455}]},{"id":15,"text":"Presently there came a message to Mardonius that the Greeks were gathered together on the Isthmus. Thereupon he marched back again through Decelea; the rulers of Boeotia sent for those of the Asopus country who lived nearby, and these guided him to Sphendalae and from there to Tanagra. [2] Here he camped for the night, and on the next day he turned from there to Scolus, where he was in Theban territory. There he laid waste the lands of the Thebans, though they sided with the Persian part. This he did, not for any ill-will that he bore them, but because sheer necessity drove him to make a stronghold for his army and to have this for a refuge if the fortune of battle were other than he wished. [3] His army, stationed along the Asopus river, covered the ground from Erythrae past Hysiae and up to the lands of Plataea. I do not mean to say that the walled camp which he made was of this size; each side of it was of a length of about ten furlongs.","places":[{"placeId":"540689","name":"Boeotia","startOffset":162,"endOffset":169},{"placeId":"541138","name":"Thebans","startOffset":444,"endOffset":451},{"placeId":"geonames-130758","name":"Persian","startOffset":480,"endOffset":487},{"placeId":"541063","name":"Plataea","startOffset":817,"endOffset":824}]},{"id":16,"text":"While the barbarians were engaged in this task, Attaginus son of Phrynon, a Theban, made great preparations and invited Mardonius with fifty who were the most notable of the Persians to be his guests at a banquet. They came as they were bidden; the dinner was held at Thebes. What follows was told me by Thersander of Orchomenus, one of the most notable men of that place. Thersander too (he said) was invited to this dinner, and fifty Thebans in addition. Attaginus made them sit, not each man by himself but on each couch a Persian and a Theban together. [2] Now as they were drinking together after dinner, the Persian who sat with him asked Thersander in the Greek tongue from what country he was. Thersander answered that he was from Orchomenus. Then said the Persian: Since you have eaten at the board with me and drunk with me afterwards, I would like to leave a memorial of my belief, so that you yourself may have such knowledge as to take fitting counsel for your safety. [3] Do you see these Persians at the banquet and that host which we left encamped by the river side? In a little while you shall see but a small remnant left alive of all these. As he said this, the Persian wept bitterly. [4] Marvelling at these words, Thersander answered: Must you not then tell this to Mardonius and those honorable Persians who are with him? Sir, said the Persian, that which a god wills to send no man can turn aside, for even truth sometimes finds no one to believe it. [5] What I have said is known to many of us Persians, but we follow, in the bonds of necessity. It is the most hateful thing for a person to have much knowledge and no power. This tale I heard from Thersander of Orchomenus who told me in addition that he had straightway told this to others before the battle of Plataea.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":174,"endOffset":182},{"placeId":"541138","name":"Thebans","startOffset":436,"endOffset":443},{"placeId":"geonames-130758","name":"Persian","startOffset":526,"endOffset":533},{"placeId":"geonames-130758","name":"Persian","startOffset":614,"endOffset":621},{"placeId":"geonames-130758","name":"Persian","startOffset":765,"endOffset":772},{"placeId":"geonames-130758","name":"Persians","startOffset":1004,"endOffset":1012},{"placeId":"geonames-130758","name":"Persian","startOffset":1183,"endOffset":1190},{"placeId":"geonames-130758","name":"Persians","startOffset":1320,"endOffset":1328},{"placeId":"geonames-130758","name":"Persian","startOffset":1364,"endOffset":1371},{"placeId":"geonames-130758","name":"Persians","startOffset":1525,"endOffset":1533},{"placeId":"541063","name":"Plataea","startOffset":1794,"endOffset":1801}]},{"id":17,"text":"So Mardonius was making his encampment in Boeotia. All the Greeks of that region who sided with the Persians furnished fighting men, and they joined with him in his attack upon Athens, with the exception of the Phocians; as for taking the Persian side, that they did right away, though from necessity rather than willingly. [2] A few days after the Persians' coming to Thebes, a thousand Phocian men-at-arms under the leadership of Harmocydes, the most notable of their countrymen, arrived. When these men too were in Thebes, Mardonius sent horsemen and bade the Phocians take their station on the plain by themselves. [3] When they had done so, the whole of the Persian cavalry appeared, and presently word was spread through all of the Greek army which was with Mardonius, and likewise among the Phocians themselves, that Mardonius would shoot them to death with javelins. [4] Then their general Harmocydes exhorted them: Men of Phocis, he said, seeing that death at these fellows' hands is staring us in the face (we being, as I surmise, maligned by the Thessalians), it is now time for every one of you to be noble; for it is better to end our lives in action and fighting than tamely to suffer a shameful death. No, rather we will teach them that they whose slaying they have devised are men of Hellas. Thus he exhorted them.","places":[{"placeId":"540689","name":"Boeotia","startOffset":42,"endOffset":49},{"placeId":"geonames-130758","name":"Persians","startOffset":100,"endOffset":108},{"placeId":"579885","name":"Athens","startOffset":177,"endOffset":183},{"placeId":"geonames-130758","name":"Persian","startOffset":239,"endOffset":246},{"placeId":"geonames-130758","name":"Persians","startOffset":349,"endOffset":357},{"placeId":"geonames-130758","name":"Persian","startOffset":663,"endOffset":670}]},{"id":18,"text":"But when the horsemen had encircled the Phocians, they rode at them as if to slay them, and drew their bows to shoot; it is likely too that some did in fact shoot. The Phocians opposed them in every possible way, drawing in together and closing their ranks to the best of their power. At this the horsemen wheeled about and rode back and away. [2] Now I cannot with exactness say whether they came at the Thessalians' desire to slay the Phocians, but when they saw the men preparing to defend themselves, they feared lest they themselves should suffer some hurt, and so rode away (for such was Mardonius' command),or if Mardonius wanted to test the Phocians' mettle. [3] When the horsemen had ridden away, Mardonius sent a herald, with this message: Men of Phocis, be of good courage, for you have shown yourselves to be valiant men, and not as it was reported to me. Now push this war zealously forward, for you will outdo neither myself nor the king in the rendering of service.8 This is how the matter of the Phocians turned out.","places":[]},{"id":19,"text":"As for the Lacedaemonians, when they had come to the Isthmus, they encamped there. When the rest of the Peloponnesians who chose the better cause heard that, seeing the Spartans setting forth to war, they thought that they should not lag behind the Lacedaemonians in so doing. [2] Accordingly, they all marched from the Isthmus (the omens of sacrifice being favorable) and came to Eleusis. When they had offered sacrifice there also and the omens were favorable, they continued their march, having now the Athenians with them, who had crossed over from Salamis and joined with them at Eleusis. [3] When they came (as it is said) to Erythrae in Boeotia, they learned that the barbarians were encamped by the Asopus. Taking note of that, they arrayed themselves opposite the enemy on the lower hills of Cithaeron.","places":[{"placeId":"570406","name":"Lacedaemonians","startOffset":11,"endOffset":25},{"placeId":"570577","name":"Peloponnesians","startOffset":104,"endOffset":118},{"placeId":"570685","name":"Spartans","startOffset":169,"endOffset":177},{"placeId":"570406","name":"Lacedaemonians","startOffset":249,"endOffset":263},{"placeId":"579885","name":"Athenians","startOffset":506,"endOffset":515},{"placeId":"580101","name":"Salamis","startOffset":553,"endOffset":560},{"placeId":"540689","name":"Boeotia","startOffset":644,"endOffset":651}]},{"id":20,"text":"When the Greeks did not come down into the plain, Mardonius sent against them his entire cavalry, whose commander was Masistius (whom the Greeks call Macistius), a man much honored among the Persians; he rode a Nesaean horse which had a golden bit and was elaborately adorned all over. Thereupon the horsemen rode up to the Greeks and charged them by squadrons; as they attacked, they did them much hurt, and called them women all the while.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":191,"endOffset":199}]},{"id":21,"text":"Now it chanced that the Megarians were posted in that part of the field which was most open to attack, and here the horsemen found the readiest approach. Therefore, being hard-pressed by the charges, the Megarians sent a herald to the generals of the Greeks, who came to them and spoke as follows : [2] From the men of Megara to their allies: we cannot alone withstand the Persian cavalry (although we have till now held our ground with patience and valor, despite the fact that we were hard-pressed) in the position to which we were first appointed. Know that now we will abandon our post, unless you send others to take our place there. [3] This the herald reported, and Pausanias inquired among the Greeks if any would offer to go to that place and relieve the Megarians by holding the post. All the others did not want to, but the Athenians took it upon themselves, that is three hundred picked men of Athens, whose captain was Olympiodorus son of Lampon.","places":[{"placeId":"geonames-130758","name":"Persian","startOffset":374,"endOffset":381},{"placeId":"579885","name":"Athenians","startOffset":837,"endOffset":846},{"placeId":"579885","name":"Athens","startOffset":908,"endOffset":914}]},{"id":22,"text":"Those who volunteered themselves, were posted at Erythrae in front of the whole Greek army, and they took with them the archers also. They fought for a long time and the end of the battle was as I will now tell. The cavalry charged by squadrons, and Masistius' horse, being at the head of the rest, was struck in the side by an arrow. Rearing up in pain, it threw Masistius, [2] who when he fell, was straightaway set upon by the Athenians. His horse they took then and there, and he himself was killed fighting. They could not, however, kill him at first, for he was outfitted in the following manner: he wore a purple tunic over a cuirass of golden scales which was within it; thus they accomplished nothing by striking at the cuirass, until someone saw what was happening and stabbed him in the eye. Then he collapsed and died. [3] But as chance would have it, the rest of the horsemen knew nothing of this, for they had not seen him fall from his horse, or die. They wheeled about and rode back without perceiving what was done. As soon as they halted, however, they saw what they were missing since there was no one to give them orders. Then when they perceived what had occurred, they gave each other the word, and all rode together to recover the dead body.","places":[{"placeId":"579885","name":"Athenians","startOffset":430,"endOffset":439}]},{"id":23,"text":"When the Athenians saw the horsemen riding at them, not by squadrons as before, but all together, they cried to the rest of the army for help. While all their infantry was rallying to aid, there was a bitter fight over the dead body. [2] As long as the three hundred stood alone, they had the worst of the battle by far, and were ready to leave the dead man. When the main body came to their aid, then it was the horsemen who could no longer hold their ground, nor help to recover the dead man, but rather lost others of their comrades in addition to Masistius. They accordingly withdrew and halted about two furlongs away, where they deliberated what they should do. Since there was no one to give them orders, they resolved to report to Mardonius.","places":[{"placeId":"579885","name":"Athenians","startOffset":9,"endOffset":18}]},{"id":24,"text":"When the cavalry returned to camp, Mardonius and the whole army mourned deeply for Masistius, cutting their own hair and the hair of their horses and beasts of burden, and lamenting loudly; the sound of this was heard over all Boeotia, for a man was dead who, next to Mardonius, was most esteemed by all Persia and the king.","places":[{"placeId":"540689","name":"Boeotia","startOffset":227,"endOffset":234}]},{"id":25,"text":"So the barbarians honored Masistius' death in their customary way, but the Greeks were greatly encouraged that they withstood and drove off the charging horsemen. First they laid the dead man on a cart and carried him about their ranks, and the body was well worth seeing, because of its stature and grandeur; therefore, they would even leave their ranks and come to view Masistius. [2] Presently they resolved that they would march down to Plataea, for they saw that the ground there was generally more suited for encampment than that at Erythrae, and chiefly because it was better watered. It was to this place and to the Gargaphian spring which was there, that they resolved to go and pitch camp in their several battalions; [3] They took up their arms and marched along the lower slopes of Cithaeron past Hysiae to the lands of Plataea, and when they arrived, they arrayed themselves nation by nation near the Gargaphian spring and the precinct of the hero Androcrates, among low hills and in a level country.","places":[{"placeId":"541063","name":"Plataea","startOffset":441,"endOffset":448},{"placeId":"541063","name":"Plataea","startOffset":832,"endOffset":839}]},{"id":26,"text":"During the drawing up of battle formation there arose much dispute between the Tegeans and the Athenians, for each of them claimed that they should hold the second9 wing of the army, justifying themselves by tales of deeds new and old. [2] First the Tegeans spoke: We, among all the allies, have always had the right to hold this position in all campaigns, of the united Peloponnesian armies, both ancient and recent, ever since that time when the Heraclidae after Eurystheus' death attempted to return to the Peloponnese. [3] We gained because of the achievement which we will relate. When we marched out at the Isthmus for war, along with the Achaeans and Ionians who then dwelt in the Peloponnese, and encamped opposite the returning exiles, then (it is said) Hyllus10 announced that army should not be risked against army in battle, but that that champion in the host of the Peloponnesians whom they chose as their best should fight with him in single combat on agreed conditions. [4] The Peloponnesians, resolving that this should be so, swore a compact that if Hyllus should overcome the Peloponnesian champion, the Heraclidae should return to the land of their fathers, but if he were himself beaten, then the Heraclidae should depart and lead their army away, not attempting to return to the Peloponnese until a hundred years had passed. [5] Then our general and king Echemus, son of Phegeus' son Eeropus, volunteered and was chosen out of all the allied host; he fought that duel and killed Hyllus. It was for that feat of arms that the Peloponnesians granted us this in addition to other great privileges which we have never ceased to possess, namely that in all united campaigns we should always lead the army's second wing. [6] Now with you, men of Lacedaemon, we have no rivalry, but forbear and bid you choose the command of whichever wing you want. We do, however, say that our place is at the head of the other, as it has always been. Quite apart from that feat which we have related, we are worthier than the Athenians to hold that post, [7] for we have fought many battles which turned out favorably for you, men of Lacedaemon, and others besides. It is accordingly we and not the Athenians who should hold the second wing, for neither at some earlier period nor recently, have they achieved such feats of arms as we.","places":[{"placeId":"579885","name":"Athenians","startOffset":95,"endOffset":104},{"placeId":"570577","name":"Peloponnesian","startOffset":372,"endOffset":385},{"placeId":"570577","name":"Peloponnesians","startOffset":880,"endOffset":894},{"placeId":"570577","name":"Peloponnesians","startOffset":994,"endOffset":1008},{"placeId":"570577","name":"Peloponnesian","startOffset":1095,"endOffset":1108},{"placeId":"570577","name":"Peloponnesians","startOffset":1547,"endOffset":1561},{"placeId":"579885","name":"Athenians","startOffset":2027,"endOffset":2036},{"placeId":"579885","name":"Athenians","startOffset":2200,"endOffset":2209}]},{"id":27,"text":"To these words the Athenians replied: It is our belief that we are gathered for battle with the barbarian, and not for speeches; but since the man of Tegea has made it his business to speak of all the valorous deeds, old and new, which either of our nations has at any time achieved, we must prove to you how we, rather than Arcadians, have by virtue of our valor a hereditary right to the place of honor. These Tegeans say that they killed the leader of the Heraclidae at the Isthmus. [2] Now when those same Heraclidae had been rejected by every Greek people to whom they resorted to escape the tyranny of the Mycenaeans, we alone received them.11 With them we vanquished those who then inhabited the Peloponnese, and we broke the pride of Eurystheus. [3] Furthermore, when the Argives who had marched with Polynices12 against Thebes had there made an end of their lives and lay unburied, know that we sent our army against the Cadmeans and recovered the dead and buried them in Eleusis. [4] We also have on record our great victory against the Amazons, who once came from the river Thermodon and broke into Attica, and in the hard days of Troy we were second to none. But since it is useless to recall these mattersfor those who were previously valiant may now be of lesser mettle, and those who lacked mettle then may be better men now [5] enough of the past. Supposing that we were known for no achievement (although the fact is that we have done more than any other of the Greeks), we nevertheless deserve to have this honor and more beside because of the role we played at Marathon, seeing that alone of all Greeks we met the Persian singlehandedly and did not fail in that enterprise, but overcame forty-six nations. [6] Is it not then our right to hold this post, for that one feat alone? Yet seeing that this is no time for wrangling about our place in the battle, we are ready to obey you, men of Lacedaemon and take whatever place and face whatever enemy you think fitting. Wherever you set us, we will strive to be valiant men. Command us then, knowing that we will obey.","places":[{"placeId":"579885","name":"Athenians","startOffset":19,"endOffset":28},{"placeId":"579888","name":"Attica","startOffset":1111,"endOffset":1117},{"placeId":"geonames-130758","name":"Persian","startOffset":1636,"endOffset":1643}]},{"id":28,"text":"This was the Athenians' response, and the whole army shouted aloud that the Athenians were worthier to hold the wing than the Arcadians. It was in this way that the Athenians were preferred to the men of Tegea, and gained that place. [2]Presently the whole Greek army was arrayed as I will show, both the later and the earliest comers. On the right wing were ten thousand Lacedaemonians; five thousand of these, who were Spartans, had a guard of thirty-five thousand light-armed helots, seven appointed for each man. [3] The Spartans chose the Tegeans for their neighbors in the battle, both to do them honor, and for their valor; there were of these fifteen hundred men-at-arms. Next to these in the line were five thousand Corinthians, at whose desire Pausanias permitted the three hundred Potidaeans from Pallene then present to stand by them. [4] Next to these were six hundred Arcadians from Orchomenus, and after them three thousand men of Sicyon. By these one thousand Troezenians were posted, and after them two hundred men of Lepreum, then four hundred from Mycenae and Tiryns, and next to them one thousand from Phlius. By these stood three hundred men of Hermione. [5] Next to the men of Hermione were six hundred Eretrians and Styreans; next to them, four hundred Chalcidians; next again, five hundred Ampraciots. After these stood eight hundred Leucadians and Anactorians, and next to them two hundred from Pale in Cephallenia; [6] after them in the array, five hundred Aeginetans; by them stood three thousand men of Megara, and next to these six hundred Plataeans. At the end, and first in the line, were the Athenians who held the left wing. They were eight thousand in number, and their general was Aristides son of Lysimachus.","places":[{"placeId":"579885","name":"Athenians","startOffset":13,"endOffset":22},{"placeId":"579885","name":"Athenians","startOffset":76,"endOffset":85},{"placeId":"579885","name":"Athenians","startOffset":165,"endOffset":174},{"placeId":"570406","name":"Lacedaemonians","startOffset":372,"endOffset":386},{"placeId":"570685","name":"Spartans","startOffset":421,"endOffset":429},{"placeId":"570685","name":"Spartans","startOffset":525,"endOffset":533},{"placeId":"570182","name":"Corinthians","startOffset":725,"endOffset":736},{"placeId":"541063","name":"Plataeans","startOffset":1569,"endOffset":1578},{"placeId":"579885","name":"Athenians","startOffset":1624,"endOffset":1633}]},{"id":29,"text":"All these, except the seven appointed to attend each Spartan, were men-at-arms, and the whole sum of them was thirty-eight thousand and seven hundred. This was the number of men-at-arms that mustered for war against the barbarian; as regards the number of the light-armed men, there were in the Spartan array seven for each man-at-arms, that is, thirty-five thousand, and every one of these was equipped for war. [2] The light-armed from the rest of Lacedaemon and Hellas were as one to every man-at-arms, and their number was thirty-four thousand and five hundred.","places":[{"placeId":"570685","name":"Spartan","startOffset":53,"endOffset":60},{"placeId":"570685","name":"Spartan","startOffset":295,"endOffset":302}]},{"id":30,"text":"So the total of all the light-armed men who were fighters was sixty-nine thousand and five hundred, and of the whole Greek army mustered at Plataea, men-at-arms and light-armed fighting men together, eleven times ten thousand less eighteen hundred. The Thespians who were present were one hundred and ten thousand in number, for the survivors13 of the Thespians were also present with the army, eighteen hundred in number. These then were arrayed and encamped by the Asopus.","places":[{"placeId":"541063","name":"Plataea","startOffset":140,"endOffset":147}]},{"id":31,"text":"When Mardonius' barbarians had finished their mourning for Masistius and heard that the Greeks were at Plataea, they also came to the part of the Asopus river nearest to them. When they were there, they were arrayed for battle by Mardonius as I shall show. He posted the Persians facing the Lacedaemonians. [2] Seeing that the Persians by far outnumbered the Lacedaemonians, they were arrayed in deeper ranks and their line ran opposite the Tegeans also. In his arraying of them he chose out the strongest part of the Persians to set it over against the Lacedaemonians, and posted the weaker by them facing the Tegeans; this he did being so informed and taught by the Thebans. [3] Next to the Persians he posted the Medes opposite the men of Corinth, Potidaea, Orchomenus, and Sicyon; next to the Medes, the Bactrians, opposite the men of Epidaurus, Troezen, Lepreum, Tiryns, Mycenae, and Phlius. [4] After the Bactrians he set the Indians, opposite the men of Hermione and Eretria and Styra and Chalcis. Next to the Indians he posted the Sacae, opposite the Ampraciots, Anactorians, Leucadians, Paleans, and Aeginetans; [5] next to the Sacae, and opposite the Athenians, Plataeans, Megarians, the Boeotians, Locrians, Malians, Thessalians, and the thousand that came from Phocis; for not all the Phocians took the Persian side, but some of them gave their aid to the Greek cause; these had been besieged on Parnassus, and issued out from there to harry Mardonius' army and the Greeks who were with him. Beside these, he arrayed the Macedonians also and those who lived in the area of Thessaly opposite the Athenians.","places":[{"placeId":"541063","name":"Plataea","startOffset":103,"endOffset":110},{"placeId":"geonames-130758","name":"Persians","startOffset":271,"endOffset":279},{"placeId":"570406","name":"Lacedaemonians","startOffset":291,"endOffset":305},{"placeId":"geonames-130758","name":"Persians","startOffset":327,"endOffset":335},{"placeId":"570406","name":"Lacedaemonians","startOffset":359,"endOffset":373},{"placeId":"geonames-130758","name":"Persians","startOffset":518,"endOffset":526},{"placeId":"570406","name":"Lacedaemonians","startOffset":554,"endOffset":568},{"placeId":"541138","name":"Thebans","startOffset":668,"endOffset":675},{"placeId":"geonames-130758","name":"Persians","startOffset":693,"endOffset":701},{"placeId":"579885","name":"Athenians","startOffset":1161,"endOffset":1170},{"placeId":"541063","name":"Plataeans","startOffset":1172,"endOffset":1181},{"placeId":"geonames-130758","name":"Persian","startOffset":1315,"endOffset":1322},{"placeId":"1332","name":"Thessaly","startOffset":1585,"endOffset":1593},{"placeId":"579885","name":"Athenians","startOffset":1607,"endOffset":1616}]},{"id":32,"text":"These which I have named were the greatest of the nations set in array by Mardonius, but there was also in the army a mixture of Phrygians, Thracians, Mysians, Paeonians, and the rest, besides Ethiopians and the Egyptian swordsmen called Hermotybies and Calasiries,14 who are the only fighting men in Egypt. [2] These had been fighters on shipboard, till Mardonius while yet at Phalerum disembarked them from their ships; for the Egyptians were not appointed to serve in the land army which Xerxes led to Athens. Of the barbarians, then, there were three hundred thousand, as I have already shown. As for the Greek allies of Mardonius, no one knows the number of them (for they were not counted), I suppose them to have been mustered to the number of fifty thousand. These were the footmen that were set in array; the cavalry were separately ordered.","places":[{"placeId":"579885","name":"Athens","startOffset":505,"endOffset":511}]},{"id":33,"text":"On the second day after they had all been arrayed according to their nations and their battalions, both armies offered sacrifice. It was Tisamenus who sacrificed for the Greeks, for he was with their army as a diviner; he was an Elean by birth, a Clytiad of the Iamid clan,15 and the Lacedaemonians gave him the freedom of their city. [2] This they did, for when Tisamenus was inquiring of the oracle at Delphi concerning offspring, the priestess prophesied to him that he should win five great victories. Not understanding that oracle, he engaged in bodily exercise, thinking that he would then be able to win in similar sports. When he had trained himself for the Five Contests,16 he came within one wrestling bout of winning the Olympic prize, in a match with Hieronymus of Andros. [3] The Lacedaemonians, however, perceived that the oracle given to Tisamenus spoke of the lists not of sport but of war, and they attempted to bribe Tisamenus to be a leader in their wars jointly with their kings of Heracles' line. [4] When he saw that the Spartans set great store by his friendship, he set his price higher, and made it known to them that he would do what they wanted only in exchange for the gift of full citizenship and all of the citizen's rights. [5] Hearing that, the Spartans at first were angry and completely abandoned their request; but when the dreadful menace of this Persian host hung over them, they consented and granted his demand. When he saw their purpose changed, he said that he would not be content with that alone; his brother Hegias too must be made a Spartan on the same terms as himself.","places":[{"placeId":"570406","name":"Lacedaemonians","startOffset":284,"endOffset":298},{"placeId":"570406","name":"Lacedaemonians","startOffset":793,"endOffset":807},{"placeId":"570685","name":"Spartans","startOffset":1043,"endOffset":1051},{"placeId":"570685","name":"Spartans","startOffset":1277,"endOffset":1285},{"placeId":"geonames-130758","name":"Persian","startOffset":1383,"endOffset":1390},{"placeId":"570685","name":"Spartan","startOffset":1578,"endOffset":1585}]},{"id":34,"text":"By so saying he imitated Melampus, in so far as one may compare demands for kingship with those for citizenship. For when the women of Argos had gone mad, and the Argives wanted him to come from Pylos and heal them of that madness,17 Melampus demanded half of their kingship for his wages. [2] This the Argives would not put up with and departed. When, however, the madness spread among their women, they promised what Melampus demanded and were ready to give it to him. Thereupon, seeing their purpose changed, he demanded yet more and said that he would not do their will except if they gave a third of their kingship to his brother Bias; now driven into dire straits, the Argives consented to that also.","places":[]},{"id":35,"text":"The Spartans too were so eagerly desirous of winning Tisamenus that they granted everything that he demanded. When they had granted him this also, Tisamenus of Elis, now a Spartan, engaged in divination for them and aided them to win five very great victories. No one on earth save Tisamenus and his brother ever became citizens of Sparta. [2] Now the five victories were these: one, the first, this victory at Plataea; next, that which was won at Tegea over the Tegeans and Argives; after that, over all the Arcadians save the Mantineans at Dipaea; next, over the Messenians at Ithome; lastly, the victory at Tanagra over the Athenians and Argives, which was the last won of the five victories.18","places":[{"placeId":"570685","name":"Spartans","startOffset":4,"endOffset":12},{"placeId":"570685","name":"Spartan","startOffset":172,"endOffset":179},{"placeId":"570685","name":"Sparta","startOffset":332,"endOffset":338},{"placeId":"541063","name":"Plataea","startOffset":411,"endOffset":418},{"placeId":"579885","name":"Athenians","startOffset":627,"endOffset":636}]},{"id":36,"text":"This Tisamenus had now been brought by the Spartans and was the diviner of the Greeks at Plataea. The sacrifices boded good to the Greeks if they would just defend themselves, but evil if they should cross the Asopus and be the first to attack.","places":[{"placeId":"570685","name":"Spartans","startOffset":43,"endOffset":51},{"placeId":"541063","name":"Plataea","startOffset":89,"endOffset":96}]},{"id":37,"text":"Mardonius' sacrifices also foretold an unfavorable outcome if he should be zealous to attack first, and good if he should but defend himself. He too used the Greek manner of sacrifice, and Hegesistratus of Elis was his diviner, the most notable of the sons of Tellias. This man had been put in prison and condemned to die by the Spartans for the great harm which he had done them. [2] Being in such bad shape inasmuch as he was in peril of his life and was likely to be very grievously maltreated before his death, he did something which was almost beyond belief; made fast in iron-bound stocks, he got an iron weapon which was brought in some way into his prison, and straightway conceived a plan of such courage as we have never known; reckoning how best the rest of it might get free, he cut off his own foot at the instep. [3] This done, he tunneled through the wall out of the way of the guards who kept watch over him, and so escaped to Tegea. All night he journeyed, and all day he hid and lay hidden in the woods, till on the third night he came to Tegea, while all the people of Lacedaemon sought him. The latter were greatly amazed when they saw the half of his foot which had been cut off and lying there but not were unable to find the man himself. [4] This, then, is the way in which he escaped the Lacedaemonians and took refuge in Tegea, which at that time was unfriendly to Lacedaemon. After he was healed and had made himself a foot of wood, he declared himself an open enemy of the Lacedaemonians. Yet the enmity which he bore them brought him no good at the last, for they caught him at his divinations in Zacynthus and killed him.","places":[{"placeId":"570685","name":"Spartans","startOffset":329,"endOffset":337},{"placeId":"570406","name":"Lacedaemonians","startOffset":1312,"endOffset":1326},{"placeId":"570406","name":"Lacedaemonians","startOffset":1500,"endOffset":1514}]},{"id":38,"text":"The death of Hegesistratus, however, took place after the Plataean business. At the present he was by the Asopus, hired by Mardonius for no small wage, where he sacrificed and worked zealously, both for the hatred he bore the Lacedaemonians and for gain. [2] When no favorable omens for battle could be won either by the Persians themselves or by the Greeks who were with them (for they too had a diviner of their own, Hippomachus of Leucas), and the Greeks kept flocking in and their army grew, Timagenides son of Herpys, a Theban, advised Mardonius to guard the outlet of the pass over Cithaeron, telling him that the Greeks were coming in daily and that he would thereby cut off many of them.","places":[{"placeId":"541063","name":"Plataean","startOffset":58,"endOffset":66},{"placeId":"570406","name":"Lacedaemonians","startOffset":226,"endOffset":240},{"placeId":"geonames-130758","name":"Persians","startOffset":321,"endOffset":329}]},{"id":39,"text":"The armies had already lain hidden opposite each other for eight days when he gave this counsel. Mardonius perceived that the advice was good, and when night had fallen, he sent his horsemen to the outlet of the pass over Cithaeron which leads towards Plataea. This pass the Boeotians call the Three Heads, and the Athenians the Oak's Heads. The horsemen who were sent out did not go in vain, [2] for they caught both five hundred beasts of burden which were going into the low country, bringing provisions from the Peloponnese for the army, and men who came with the wagons. When they had taken this quarry, the Persians killed without mercy, sparing neither man nor beast. When they had their fill of slaughter, they encircled the rest and drove them to Mardonius and his camp.","places":[{"placeId":"541063","name":"Plataea","startOffset":252,"endOffset":259},{"placeId":"579885","name":"Athenians","startOffset":315,"endOffset":324},{"placeId":"geonames-130758","name":"Persians","startOffset":613,"endOffset":621}]},{"id":40,"text":"After this deed they waited two days more, neither side desiring to begin the battle, for although the barbarians came to the Asopus to test the Greeks intent, neither army crossed it. Mardonius' cavalry, however, kept pressing upon and troubling the Greeks, for the Thebans, in their zeal for the Persian part, waged war heartily, and kept on guiding the horsemen to the encounter; thereafter it was the turn of the Persians and Medes, and they and none other would do deeds of valor.","places":[{"placeId":"541138","name":"Thebans","startOffset":267,"endOffset":274},{"placeId":"geonames-130758","name":"Persian","startOffset":298,"endOffset":305},{"placeId":"geonames-130758","name":"Persians","startOffset":417,"endOffset":425}]},{"id":41,"text":"Until ten days had passed, no more was done than this. On the eleventh day from their first encampment opposite each other, the Greeks growing greatly in number and Mardonius being greatly vexed by the delay, there was a debate held between Mardonius son of Gobryas and Artabazus son of Pharnaces, who stood as high as only few others in Xerxes' esteem. [2] Their opinions in council were as I will show. Artabazus thought it best that they should strike their camp with all speed and lead the whole army within the walls of Thebes. Here there was much food stored and fodder for their beasts of burden; furthermore, they could sit at their ease here and conclude the business by doing as follows: [3] they could take the great store they had of gold, minted and other, and silver drinking-cups, and send all this to all places in Hellas without stint, excepting none, but especially to the chief men in the cities of Hellas. Let them do this (he said) and the Greeks would quickly surrender their liberty; but do not let the Persians risk the event of a battle. [4] This opinion of his was the same as the Thebans, inasmuch as he too had special foreknowledge. Mardonius' counsel, however, was more vehement and intemperate and not at all leaning to moderation. He said that he thought that their army was much stronger than the Greeks and that they should give battle with all speed so as not to let more Greeks muster than were mustered already. As for the sacrifices of Hegesistratus, let them pay no heed to these, nor seek to wring good from them,19 but rather give battle after Persian custom.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":1026,"endOffset":1034},{"placeId":"541138","name":"Thebans","startOffset":1107,"endOffset":1114},{"placeId":"geonames-130758","name":"Persian","startOffset":1585,"endOffset":1592}]},{"id":42,"text":"No one withstood this argument, and his opinion accordingly prevailed; for it was he and not Artabazus who was commander of the army by the king's commission. He therefore sent for the leaders of the battalions and the generals of those Greeks who were with him and asked them if they knew any oracle which prophesied that the Persians should perish in Hellas. [2] Those who were summoned said nothing, some not knowing the prophecies, and some knowing them but thinking it perilous to speak, and then Mardonius himself said: Since you either have no knowledge or are afraid to declare it, hear what I tell you based on the full knowledge that I have. [3] There is an oracle that Persians are fated to come to Hellas and all perish there after they have plundered the temple at Delphi. Since we have knowledge of this same oracle, we will neither approach that temple nor attempt to plunder it; in so far as destruction hinges on that, none awaits us. [4] Therefore, as many of you as wish the Persian well may rejoice in that we will overcome the Greeks. Having spoken in this way, he gave command to have everything prepared and put in good order for the battle which would take place early the next morning.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":327,"endOffset":335},{"placeId":"geonames-130758","name":"Persians","startOffset":681,"endOffset":689},{"placeId":"geonames-130758","name":"Persian","startOffset":995,"endOffset":1002}]},{"id":43,"text":"Now for this prophecy, which Mardonius said was spoken of the Persians, I know it to have been made concerning not them but the Illyrians and the army of the Enchelees.20 There is, however, a prophecy made by Bacis concerning this battle: [2] By Thermodon's stream and the grass-grown banks of Asopus, Will be a gathering of Greeks for fight and the ring of the barbarian's war-cry; Many a Median archer, by death untimely overtaken will fall There in the battle when the day of his doom is upon him.  I know that these verses and others very similar to them from Musaeus referred to the Persians. As for the river Thermodon, it flows between Tanagra and Glisas.21","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":62,"endOffset":70},{"placeId":"geonames-130758","name":"Persians","startOffset":590,"endOffset":598}]},{"id":44,"text":"After this inquiry about oracles and Mardonius' exhortation, night fell, and the armies posted their sentries. Now when the night was far advanced and it seemed that all was still in the camps and the men were sleeping deeply, at that hour Alexander son of Amyntas, the general and king of the Macedonians, rode up to the Athenian outposts and wanted to speak to their generals. [2] The greater part of the sentries remained where they were, but the rest ran to their generals and told them that a horseman had ridden in from the Persian camp, imparting no other word save that he desired to speak to the generals and called them by their names.","places":[{"placeId":"geonames-130758","name":"Persian","startOffset":530,"endOffset":537}]},{"id":45,"text":"Hearing that, the generals straightway went with the men to the outposts. When they had come, Alexander said to them: Men of Athens, I give you this message in trust as a secret which you must reveal to no one but Pausanias, or else you will be responsible for my undoing. In truth I would not tell it to you if I did not care so much for all Hellas; [2] I myself am by ancient descent a Greek, and I would not willingly see Hellas change her freedom for slavery. I tell you, then, that Mardonius and his army cannot get omens to his liking from the sacrifices. Otherwise you would have fought long before this. Now, however, it is his purpose to pay no heed to the sacrifices, and to attack at the first glimmer of dawn, for he fears, as I surmise, that your numbers will become still greater. Therefore, I urge you to prepare, and if (as may be) Mardonius should delay and not attack, wait patiently where you are; for he has but a few days' provisions left. [3] If, however, this war ends as you wish, then must you take thought how to save me too from slavery, who have done so desperate a deed as this for the sake of Hellas in my desire to declare to you Mardonius' intent so that the barbarians may not attack you suddenly before you yet expect them. I who speak am Alexander the Macedonian. With that he rode away back to the camp and his own station there.","places":[{"placeId":"579885","name":"Athens","startOffset":126,"endOffset":132}]},{"id":46,"text":"The Athenian generals went to the right wing and told Pausanias what they had heard from Alexander. At the message Pausanias was terrified by the Persians, and said: [2] Since, therefore, the battle is to begin at dawn, it is best that you Athenians should take your stand opposite the Persians, and we opposite the Boeotians and the Greeks who are posted opposite you; for you have fought with the Medes at Marathon and know them and their manner of fighting while we have no experience or knowledge of those men. We Spartans have experience of the Boeotians and Thessalians, but not one of us has experience with the Medes. [3] No, rather let us take up our equipment and change places, you to this wing and we to the left. We, too, the Athenians answered, even from the moment when we saw the Persians posted opposite you, had it in mind to make that suggestion which now has first come from you. We feared, however, that we would displease you by making it. But since you have spoken the wish yourselves, we too hear your words very gladly and are ready to do as you say.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":146,"endOffset":154},{"placeId":"579885","name":"Athenians","startOffset":241,"endOffset":250},{"placeId":"geonames-130758","name":"Persians","startOffset":287,"endOffset":295},{"placeId":"570685","name":"Spartans","startOffset":519,"endOffset":527},{"placeId":"579885","name":"Athenians","startOffset":743,"endOffset":752},{"placeId":"geonames-130758","name":"Persians","startOffset":801,"endOffset":809}]},{"id":47,"text":"Since both were satisfied with this, they exchanged their places in the ranks at the first light of dawn. The Boeotians noticed that and made it known to Mardonius. When he heard this, he straight away attempted to make a change for himself also, by moving the Persians opposite the Lacedaemonians. When Pausanias perceived what was being done, he saw that his action had been discovered and led the Spartans back to the right wing; Mardonius did the same thing on the left of his army.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":261,"endOffset":269},{"placeId":"570406","name":"Lacedaemonians","startOffset":283,"endOffset":297},{"placeId":"570685","name":"Spartans","startOffset":400,"endOffset":408}]},{"id":48,"text":"When all were at their former posts again, Mardonius sent a herald to the Lacedaemonians with this message: Men of Lacedaemon, you are said by the people of these parts to be very brave men. It is their boast of you that you neither flee from the field nor leave your post, but remain there and either slay your enemies or are yourselves killed. It would seem, however, that there is no truth in all this, [2] for before we could attack and fight hand to hand, we saw you even now fleeing and leaving your station, using Athenians for the first trial of your enemy and arraying yourselves opposite those who are but our slaves. [3] This is not the action of brave men. No, we have been grievously mistaken about you, for in accordance with what we heard about you, we expected that you would send us a herald challenging the Persians and none other to fight with you. That we were ready to do; but we find you making no such offer, but rather quailing before us. Now, therefore, since the challenge comes not from you, take it from us instead. [4] What is there to prevent us from fighting with equal numbers on both sides, you for the Greeks (since you have the reputation of being their best), and we for the barbarians? If it is desirable that the others fight also, let them fight after us, but if, on the contrary the opinion prevails that we alone suffice, then let us fight it out. Let the winner in this contest determine victory for the whole army.","places":[{"placeId":"570406","name":"Lacedaemonians","startOffset":74,"endOffset":88},{"placeId":"579885","name":"Athenians","startOffset":522,"endOffset":531},{"placeId":"geonames-130758","name":"Persians","startOffset":826,"endOffset":834}]},{"id":49,"text":"This is the proclamation made by the herald; and when he had waited a while and no one answered him, he went back again, and at his return told what had happened to him. Mardonius was overjoyed and proud of this semblance of victory, and sent his cavalry to attack the Greeks. [2] The horsemen rode at them and shot arrows and javelins among the whole Greek army to its great hurt, since they were mounted archers and difficult to deal with in an encounter; they spoiled and blocked the Gargaphian spring, from which the entire Greek army drew its water. [3] None indeed but the Lacedaemonians were posted near the spring, and it was far from the several stations of the other Greeks, whereas the Asopus was near; nevertheless, they would always go to the spring, since they were barred from the Asopus, not being able to draw water from that river because of the horsemen and the arrows.","places":[{"placeId":"570406","name":"Lacedaemonians","startOffset":579,"endOffset":593}]},{"id":50,"text":"When this happened, seeing that their army was cut off from water and thrown into confusion by the horsemen, the generals of the Greeks went to Pausanias on the right wing, and debated concerning this and other matters; for there were other problems which troubled them more than what I have told. They had no food left, and their followers whom they had sent into the Peloponnese to bring provisions had been cut off by the horsemen and could not make their way to the army.","places":[]},{"id":51,"text":"So they resolved in their council that if the Persians held off through that day from giving battle, they would go to the Island.22 This is ten furlongs distant from the Asopus and the Gargaphian spring, near which their army then lay, and in front of the town of Plataea. [2] It is like an island on dry land because the river in its course down from Cithaeron into the plain is parted into two channels, and there is about three furlongs space in between till presently the two channels unite again, and the name of that river is Oeroe, who (as the people of the country say ) was the daughter of Asopus. [3] To that place then they planned to go so that they might have plenty of water for their use and not be harmed by the horsemen, as now when they were face to face with them; and they resolved to change places in the second watch of the night, lest the Persians should see them setting forth and the horsemen press after them and throw them into confusion. [4] Furthermore, they resolved that when they had come to that place, which is encircled by the divided channels of Asopus' daughter Oeroe as she flows from Cithaeron, they would in that night send half of their army to Cithaeron, to remove their followers who had gone to get the provisions; for these were cut off from them on Cithaeron.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":46,"endOffset":54},{"placeId":"541063","name":"Plataea","startOffset":264,"endOffset":271},{"placeId":"geonames-130758","name":"Persians","startOffset":862,"endOffset":870}]},{"id":52,"text":"Having made this plan, all that day they suffered constant hardship from the cavalry which continually pressed upon them. When the day ended, however, and the horsemen stopped their onslaught, then at that hour of the night at which it was agreed that they should depart, most of them rose and departed, not with intent to go to the place upon which they had agreed. Instead of that, once they were on their way, they joyfully shook off the horsemen and escaped to the town of Plataea. In the course of their flight they came to the temple of Hera which is outside of that town, twenty furlongs distant from the Gargaphian spring and piled their arms in front of the temple.","places":[{"placeId":"541063","name":"Plataea","startOffset":477,"endOffset":484}]},{"id":53,"text":"So they encamped around the temple of Hera. Pausanias, however, seeing their departure from the camp, gave orders to the Lacedaemonians to take up their arms likewise and follow the others who had gone ahead, supposing that these were making for the place where they had agreed to go. [2] Thereupon, all the rest of the captains being ready to obey Pausanias, Amompharetus son of Poliades, the leader of the Pitanate23 battalion, refused to flee from the barbarians or (save by compulsion) bring shame on Sparta; the whole business seemed strange to him, for he had not been present in the council recently held. [3] Pausanias and Euryanax were outraged that Amompharetus disobeyed them. Still more, however, they disliked that his refusing would compel them to abandon the Pitanate battalion, for they feared that if they fulfilled their agreement with the rest of the Greeks and abandoned him, Amompharetus and his men would be left behind to perish. [4] Bearing this in mind, they kept the Laconian army where it was and tried to persuade Amompharetus that he was in the wrong.","places":[{"placeId":"570406","name":"Lacedaemonians","startOffset":121,"endOffset":135},{"placeId":"570685","name":"Sparta","startOffset":505,"endOffset":511}]},{"id":54,"text":"So they reasoned with Amompharetus, he being the only man left behind of all the Lacedaemonians and Tegeans. As for the Athenians, they stood unmoved at their post, well aware that the purposes and the promises of Lacedaemonians were not alike. [2] But when the army left its station, they sent a horseman of their own to see whether the Spartans were attempting to march or whether they were not intending to depart, and to ask Pausanias what the Athenians should do.","places":[{"placeId":"570406","name":"Lacedaemonians","startOffset":81,"endOffset":95},{"placeId":"579885","name":"Athenians","startOffset":120,"endOffset":129},{"placeId":"570406","name":"Lacedaemonians","startOffset":214,"endOffset":228},{"placeId":"570685","name":"Spartans","startOffset":338,"endOffset":346},{"placeId":"579885","name":"Athenians","startOffset":448,"endOffset":457}]},{"id":55,"text":"When the messenger arrived among the Lacedaemonians, he saw them arrayed where they had been, and their chief men by now in hot dispute. For though Euryanax and Pausanias reasoned with Amompharetus, that the Lacedaemonians should not be endangered by remaining there alone, they could in no way prevail upon him. At last, when the Athenian messenger came among them, angry words began to pass. [2] In this wrangling Amompharetus took up a stone with both hands and threw it down before Pausanias' feet, crying that it was the pebble with which he voted against fleeing from the strangers (meaning thereby the barbarians). Pausanias called him a madman; then when the Athenian messenger asked the question with which he had been charged, Pausanias asked the man to tell the Athenians of his present condition, and begged them to join themselves to the Lacedaemonians and, as for departure, to do as they did.","places":[{"placeId":"570406","name":"Lacedaemonians","startOffset":37,"endOffset":51},{"placeId":"570406","name":"Lacedaemonians","startOffset":208,"endOffset":222},{"placeId":"579885","name":"Athenians","startOffset":773,"endOffset":782},{"placeId":"570406","name":"Lacedaemonians","startOffset":851,"endOffset":865}]},{"id":56,"text":"The messenger then went back to the Athenians. When dawn found the dispute still continuing, Pausanias, who had up to this point kept his army where it was, now gave the word and led all the rest away between the hillocks, the Tegeans following, for he supposed that Amompharetus would not stay behind when the rest of the Lacedaemonians left him; this was in fact exactly what happened. [2] The Athenians marshalled themselves and marched, but not by the same way as the Lacedaemonians, who stayed close to the broken ground and the lower slopes of Cithaeron in order to stay clear of the Persian horse. The Athenians marched down into the plain instead.","places":[{"placeId":"579885","name":"Athenians","startOffset":36,"endOffset":45},{"placeId":"570406","name":"Lacedaemonians","startOffset":323,"endOffset":337},{"placeId":"579885","name":"Athenians","startOffset":396,"endOffset":405},{"placeId":"570406","name":"Lacedaemonians","startOffset":472,"endOffset":486},{"placeId":"geonames-130758","name":"Persian","startOffset":590,"endOffset":597},{"placeId":"579885","name":"Athenians","startOffset":609,"endOffset":618}]},{"id":57,"text":"Now Amompharetus at first supposed that Pausanias would never have the heart to leave him and his men, and he insisted that they should remain where they were and not leave their post. When Pausanias' men had already proceeded some distance, he thought that they had really left him. He accordingly bade his battalion take up its arms and led it in marching step after the rest of the column, [2] which after going a distance of ten furlongs, was waiting for Amompharetus by the stream Molois and the place called Argiopium, where there is a shrine of Eleusinian Demeter. The reason for their waiting was that, if Amompharetus and his battalion should not leave the place where it was posted but remain there, they would then be able to assist him. [3] No sooner had Amompharetus' men come up than the barbarians' cavalry attacked the army, for the horsemen acted as they always had. When they saw no enemy on the ground where the Greeks had been on the days before this, they kept riding forward and attacked the Greeks as soon as they overtook them.","places":[]},{"id":58,"text":"When Mardonius learned that the Greeks had departed under cover of night and saw the ground deserted, he called to him Thorax of Larissa and his brothers Eurypylus and Thrasydeius and said: [2] What will you say now, sons of Aleuas, when you see this place deserted? For you, who are their neighbors, kept telling me that Lacedaemonians fled from no battlefield and were the masters of warfare. These same men, however, you just saw changing their post, and now you and all of us see that they have fled during the night. The moment they had to measure themselves in battle with those that are in very truth the bravest on earth, they plainly showed that they are men of no account, and all other Greeks likewise. [3] Now you, for your part, were strangers to the Persians, and I could readily pardon you for praising these fellows, who were in some sort known to you; but I marvelled much more that Artabazus, be he ever so frightened, should give us a coward's advice to strike our camp, and march away to be besieged in Thebes. Of this advice the king will certainly hear from me, but it will be discussed elsewhere. [4] Now we must not permit our enemies to do as they want; they must be pursued till they are overtaken and pay the penalty for all the harm they have done the Persians.","places":[{"placeId":"540905","name":"Larissa","startOffset":129,"endOffset":136},{"placeId":"570406","name":"Lacedaemonians","startOffset":323,"endOffset":337},{"placeId":"geonames-130758","name":"Persians","startOffset":765,"endOffset":773},{"placeId":"geonames-130758","name":"Persians","startOffset":1281,"endOffset":1289}]},{"id":59,"text":"With that, he led the Persians with all speed across the Asopus in pursuit of the Greeks, supposing that they were in flight; it was the army of Lacedaemon and Tegea alone which was his goal, for the Athenians marched another way over the broken ground, and were out of his sight. [2] Seeing the Persians setting forth in pursuit of the Greeks, the rest of the barbarian battalions straightway raised their standards and also gave pursuit, each at top speed, no battalion having order in its ranks nor place assigned in the line.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":22,"endOffset":30},{"placeId":"579885","name":"Athenians","startOffset":200,"endOffset":209},{"placeId":"geonames-130758","name":"Persians","startOffset":296,"endOffset":304}]},{"id":60,"text":"So they ran pell-mell and shouting, as though they would utterly make an end of the Greeks. Pausanias, however, when the cavalry attacked him, sent a horseman to the Athenians with this message: Men of Athens, in this great contest which must give freedom or slavery to Hellas, we Lacedaemonians and you Athenians have been betrayed by the flight of our allies in the night that is past. [2] I have accordingly now resolved what we must do; we must protect each other by fighting as best we can. If the cavalry had attacked you first, it would have been the duty of both ourselves and the Tegeans, who are faithful to Hellas, to aid you; but now, seeing that the whole brunt of their assault falls on us, it is right that you should come to the aid of that division which is hardest pressed. [3] But if, as may be, anything has befallen you which makes it impossible for you to aid us, do us the service of sending us your archers. We are sure that you will obey us, as knowing that you have been by far more zealous than all others in this present war.","places":[{"placeId":"579885","name":"Athenians","startOffset":166,"endOffset":175},{"placeId":"579885","name":"Athens","startOffset":203,"endOffset":209},{"placeId":"570406","name":"Lacedaemonians","startOffset":282,"endOffset":296},{"placeId":"579885","name":"Athenians","startOffset":305,"endOffset":314}]},{"id":61,"text":"When the Athenians heard that, they attempted to help the Lacedaemonians and defend them with all their might. But when their march had already begun, they were set upon by the Greeks posted opposite them, who had joined themselves to the king. For this reason, being now under attack by the foe which was closest, they could at the time send no aid. [2] The Lacedaemonians and Tegeans accordingly stood alone, men-at-arms and light-armed together; there were of the Lacedaemonians fifty thousand and of the Tegeans, who had never been parted from the Lacedaemonians, three thousand. These offered sacrifice so that they would fare better in battle with Mardonius and the army which was with him. [3] They could get no favorable omen from their sacrifices, and in the meanwhile many of them were killed and by far more wounded (for the Persians set up their shields for a fence, and shot showers of arrows). Since the Spartans were being hard-pressed and their sacrifices were of no avail, Pausanias lifted up his eyes to the temple of Hera at Plataea and called on the goddess, praying that they might not be disappointed in their hope.","places":[{"placeId":"579885","name":"Athenians","startOffset":9,"endOffset":18},{"placeId":"570406","name":"Lacedaemonians","startOffset":58,"endOffset":72},{"placeId":"570406","name":"Lacedaemonians","startOffset":359,"endOffset":373},{"placeId":"570406","name":"Lacedaemonians","startOffset":467,"endOffset":481},{"placeId":"570406","name":"Lacedaemonians","startOffset":552,"endOffset":566},{"placeId":"geonames-130758","name":"Persians","startOffset":836,"endOffset":844},{"placeId":"570685","name":"Spartans","startOffset":918,"endOffset":926},{"placeId":"541063","name":"Plataea","startOffset":1044,"endOffset":1051}]},{"id":62,"text":"While he was still in the act of praying, the men of Tegea leapt out before the rest and charged the barbarians, and immediately after Pausanias' prayer the sacrifices of the Lacedaemonians became favorable. Now they too charged the Persians, and the Persians met them, throwing away their bows. [2] First they fought by the fence of shields, and when that was down, there was a fierce and long fight around the temple of Demeter itself, until they came to blows at close quarters. For the barbarians laid hold of the spears and broke them short. [3] Now the Persians were neither less valorous nor weaker, but they had no armor; moreover, since they were unskilled and no match for their adversaries in craft, they would rush out singly and in tens or in groups great or small, hurling themselves on the Spartans and so perishing.","places":[{"placeId":"570406","name":"Lacedaemonians","startOffset":175,"endOffset":189},{"placeId":"geonames-130758","name":"Persians","startOffset":233,"endOffset":241},{"placeId":"geonames-130758","name":"Persians","startOffset":251,"endOffset":259},{"placeId":"geonames-130758","name":"Persians","startOffset":559,"endOffset":567},{"placeId":"570685","name":"Spartans","startOffset":805,"endOffset":813}]},{"id":63,"text":"Where Mardonius was himself, riding a white horse in the battle and surrounded by a thousand picked men who were the flower of the Persians, there they pressed their adversaries hardest. So long as Mardonius was alive the Persians stood their ground and defended themselves, overthrowing many Lacedaemonians. [2] When, however, Mardonius was killed and his guards, who were the strongest part of the army, had also fallen, then the rest too yielded and gave ground before the men of Lacedaemon. For what harmed them the most was the fact that they wore no armor over their clothes and fought, as it were, naked against men fully armed.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":131,"endOffset":139},{"placeId":"geonames-130758","name":"Persians","startOffset":222,"endOffset":230},{"placeId":"570406","name":"Lacedaemonians","startOffset":293,"endOffset":307}]},{"id":64,"text":"On that day the Spartans, as the oracle had foretold, gained from Mardonius their full measure of vengeance for the slaying of Leonidas, and the most glorious of victories of all which we know was won by Pausanias, the son of Cleombrotus, who was the son of Anaxandrides. [2] (I have named the rest of Pausanias' ancestors in the lineage of Leonidas, for they are the same for both.) As for Mardonius, he was killed by Aeimnestus, a Spartan of note who long after the Persian business led three hundred men to battle at Stenyclerus against the whole army of Messenia, and was there killed, he and his three hundred.","places":[{"placeId":"570685","name":"Spartans","startOffset":16,"endOffset":24},{"placeId":"570685","name":"Spartan","startOffset":433,"endOffset":440},{"placeId":"geonames-130758","name":"Persian","startOffset":468,"endOffset":475}]},{"id":65,"text":"At Plataea, however, the Persians, routed by the Lacedaemonians, fled in disorder to their own camp and inside the wooden walls which they had made in the territory of Thebes. [2] It is indeed a marvel that although the battle was right by the grove of Demeter, there was no sign that any Persian had been killed in the precinct or entered into it; most of them fell near the temple in unconsecrated ground. I thinkif it is necessary to judge the ways of the godsthat the goddess herself denied them entry, since they had burnt her temple, the shrine at Eleusis.","places":[{"placeId":"541063","name":"Plataea","startOffset":3,"endOffset":10},{"placeId":"geonames-130758","name":"Persians","startOffset":25,"endOffset":33},{"placeId":"570406","name":"Lacedaemonians","startOffset":49,"endOffset":63},{"placeId":"geonames-130758","name":"Persian","startOffset":289,"endOffset":296}]},{"id":66,"text":"This, then, is what happened in this battle. But Artabazus son of Pharnaces had from the very first disapproved of the king's leaving Mardonius, and now all his counselling not to join battle had been of no avail. In his displeasure at what Mardonius was doing, he himself did as I will show. [2] He had with him a great army, as many as forty thousand men. He knew full well what the outcome of the battle would be, and no sooner had the Greeks and Persians met than he led these with a fixed purpose, telling them to follow him all together wherever he should lead them, whatever they thought his intent might be. [3] With that command he pretended to lead them into battle. As he came farther on his way, he saw the Persians already fleeing and accordingly led his men, no longer in the same array, but took to his heels and fled with all speed not to the wooden fort nor to the walled city of Thebes, but to Phocis, so that he might make his way with all haste to the Hellespont.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":450,"endOffset":458},{"placeId":"geonames-130758","name":"Persians","startOffset":719,"endOffset":727},{"placeId":"501434","name":"Hellespont","startOffset":972,"endOffset":982}]},{"id":67,"text":"So Artabazus and his army turned that way. All the rest of the Greeks who were on the king's side fought badly on purpose, but not so the Boeotians; they fought for a long time against the Athenians. For those Thebans who were on the Persian side had great enthusiasm in the battle, and did not want to fight in a cowardly manner. As a result of this, three hundred of their first and best were killed there by the Athenians. At last, however, the Boeotians too yielded and they fled to Thebes, but not by the way which the Persians had fled and the multitude of the allies which had fought no fight to the end nor achieved any feat of arms.","places":[{"placeId":"579885","name":"Athenians","startOffset":189,"endOffset":198},{"placeId":"541138","name":"Thebans","startOffset":210,"endOffset":217},{"placeId":"geonames-130758","name":"Persian","startOffset":234,"endOffset":241},{"placeId":"579885","name":"Athenians","startOffset":415,"endOffset":424},{"placeId":"geonames-130758","name":"Persians","startOffset":524,"endOffset":532}]},{"id":68,"text":"This flight of theirs which took place before the actual closing of battle and was prompted because they saw the Persians flee, proves to me that it was on the Persians that the fortune of the barbarians hung. They accordingly all fled, save the cavalry, Boeotian and other; this helped the fleeing men in so far as it remained between them and their enemies and shielded its friends from the Greeks in their flight.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":113,"endOffset":121},{"placeId":"geonames-130758","name":"Persians","startOffset":160,"endOffset":168}]},{"id":69,"text":"So the Greeks, now having the upper hand, followed Xerxes' men, pursuing and slaying. During this steadily growing rout there came a message to the rest of the Greeks, who were by the temple of Hera and had stayed out of the fighting, that there had been a battle and that Pausanias' men were victorious. When they heard this, they set forth in no ordered array, those who were with the Corinthians keeping to the spurs of the mountain and the hill country, by the road that led upward straight to the temple of Demeter, and those who were with the Megarians and Philasians taking the most level route over the plain. [2] However, when the Megarians and Philasians had come near the enemy, the Theban horsemen (whose captain was Asopodorus son of Timander) caught sight of them approaching in haste and disorder, and rode at them; in this attack they trampled six hundred of them, and pursued and drove the rest to Cithaeron.","places":[{"placeId":"570182","name":"Corinthians","startOffset":387,"endOffset":398}]},{"id":70,"text":"So these perished without anyone noticing. But when the Persians and the rest of the multitude had fled within the wooden wall, they managed to get up on the towers before the coming of the Lacedaemonians; then they strengthened the wall as best they could. When the Athenians arrived, an intense battle for the wall began. [2] For as long as the Athenians were not there, the barbarians defended themselves and had a great advantage over the Lacedaemonians who had no skill in the assault of walls. When the Athenians came up, however, the fight for the wall became intense and lasted for a long time. In the end the Athenians, by valor and constant effort, scaled the wall and breached it. The Greeks poured in through the opening they had made; [3] the first to enter were the Tegeans, and it was they who plundered the tent of Mardonius, taking from it besides everything else the feeding trough of his horses which was all of bronze and a thing well worth looking at. The Tegeans dedicated this feeding trough of Mardonius in the temple of Athena Alea. Everything else which they took they brought into the common pool, as did the rest of the Greeks. [4] As for the barbarians, they did not form a unified body again once the wall was down, nor did anyone think of defense because the terrified men in the tiny space and the many myriads herded together were in great distress. [5] Such a slaughter were the Greeks able to make, that of two hundred and sixty thousand who remained after Artabazus had fled with his forty thousand, scarcely three thousand were left alive. Of the Lacedaemonians from Sparta ninety-one all together were killed in battle; of the Tegeans, seventeen and of the Athenians, fifty-two.24","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":56,"endOffset":64},{"placeId":"570406","name":"Lacedaemonians","startOffset":190,"endOffset":204},{"placeId":"579885","name":"Athenians","startOffset":267,"endOffset":276},{"placeId":"579885","name":"Athenians","startOffset":347,"endOffset":356},{"placeId":"570406","name":"Lacedaemonians","startOffset":443,"endOffset":457},{"placeId":"579885","name":"Athenians","startOffset":509,"endOffset":518},{"placeId":"579885","name":"Athenians","startOffset":618,"endOffset":627},{"placeId":"570406","name":"Lacedaemonians","startOffset":1584,"endOffset":1598},{"placeId":"570685","name":"Sparta","startOffset":1604,"endOffset":1610},{"placeId":"579885","name":"Athenians","startOffset":1695,"endOffset":1704}]},{"id":71,"text":"Among the barbarians, the best fighters were the Persian infantry and the cavalry of the Sacae, and of men, it is said, the bravest was Mardonius. Among the Greeks, the Tegeans and Athenians conducted themselves nobly, but the Lacedaemonians excelled all in valor. [2] Of this my only clear proof is (for all these conquered the foes opposed to them) the fact that the Lacedaemonians fought with the strongest part of the army, and overcame it. According to my judgment, the bravest man by far was Aristodemus, who had been reviled and dishonored for being the only man of the three hundred that came alive from Thermopylae;25 next after him in valor were Posidonius, Philocyon, and Amompharetus. [3] Nevertheless, when there was a general discussion about who had borne himself most bravely, those Spartans who were there judged that Aristodemus, who plainly wished to die because of the reproach hanging over him and so rushed out and left the battle column behind, had achieved great deeds, but that Posidonius, who had no wish to die, proved himself a courageous fighter, and so in this way he was the better man. [4] This they may have said merely out of jealousy, but all the aforesaid who were killed in that fight received honor, save Aristodemus; he, because he desired death because of the reproach previously mentioned, received none.","places":[{"placeId":"geonames-130758","name":"Persian","startOffset":49,"endOffset":56},{"placeId":"579885","name":"Athenians","startOffset":181,"endOffset":190},{"placeId":"570406","name":"Lacedaemonians","startOffset":227,"endOffset":241},{"placeId":"570406","name":"Lacedaemonians","startOffset":369,"endOffset":383},{"placeId":"570685","name":"Spartans","startOffset":799,"endOffset":807}]},{"id":72,"text":"These won the most renown of all who fought at Plataea. For Callicrates, who, when he came to the army, was the finest not only of the Lacedaemonians, but also of all the other Greeks, died away from the battle. Callicrates, who was sitting in his place when Pausanias was offering sacrifice, was wounded in the side by an arrow. [2] While his comrades were fighting, he was carried out of the battle and died a lingering death, saying to Arimnestus, a Plataean, that it was not a source of grief to him to die for Hellas' sake; his sorrow was rather that he had struck no blow and achieved no deed worthy of his merit, despite all his eager desire to do so.","places":[{"placeId":"541063","name":"Plataea","startOffset":47,"endOffset":54},{"placeId":"570406","name":"Lacedaemonians","startOffset":135,"endOffset":149},{"placeId":"541063","name":"Plataean","startOffset":453,"endOffset":461}]},{"id":73,"text":"Of the Athenians, Sophanes son of Eutychides is said to have won renown, a man from the town of Decelea, whose people once did a deed that was of eternal value, as the Athenians themselves say. [2] For in the past when the sons of Tyndarus were trying to recover Helen,26 after breaking into Attica with a great host, they turned the towns upside down because they did not know where Helen had been hidden, then (it is said) the Deceleans (and, as some say, Decelus himself, because he was angered by the pride of Theseus and feared for the whole land of Attica) revealed the whole matter to the sons of Tyndarus, and guided them to Aphidnae, which Titacus, one of the autochthonoi, handed over to to the Tyndaridae. [3] For that deed the Deceleans have always had and still have freedom at Sparta from all dues and chief places at feasts. In fact, even as recently as the war which was waged many years after this time between the Athenians and Peloponnesians, the Lacedaemonians laid no hand on Decelea when they harried the rest of Attica.27","places":[{"placeId":"579885","name":"Athenians","startOffset":7,"endOffset":16},{"placeId":"579885","name":"Athenians","startOffset":168,"endOffset":177},{"placeId":"579888","name":"Attica","startOffset":292,"endOffset":298},{"placeId":"570685","name":"Sparta","startOffset":791,"endOffset":797},{"placeId":"579885","name":"Athenians","startOffset":932,"endOffset":941},{"placeId":"570577","name":"Peloponnesians","startOffset":946,"endOffset":960},{"placeId":"570406","name":"Lacedaemonians","startOffset":966,"endOffset":980}]},{"id":74,"text":"From that town was Sophanes, who now was the best Athenian fighter in the battle, and about him two tales are told. According to the first, he bore an iron anchor attached to the belt of his cuirass with a chain of bronze. He would cast this anchor whenever he approached his enemies in an attack so that the enemy, as they left their ranks, might not be able to move him from his place. When they were put to flight, it was his plan that he would pull up his anchor and so pursue them. [2] So runs this tale. The second which contradicts with the first and relates that he wore no iron anchor attached to his cuirass, but that his shield, which he constantly whirled round and never held still, had on it an anchor as a device.","places":[]},{"id":75,"text":"There is yet another glorious deed which Sophanes did; when the Athenians were besieging Aegina, he challenged and killed Eurybates the Argive, a victor in the Five Contests. Long after this, Sophanes met his death when he was general of the Athenians with Leagrus, son of Glaucon. He was killed at Datus28 by the Edonians in a battle for the gold-mines.","places":[{"placeId":"579885","name":"Athenians","startOffset":64,"endOffset":73},{"placeId":"579885","name":"Athenians","startOffset":242,"endOffset":251}]},{"id":76,"text":"Immediately after the Greeks had devastated the barbarians at Plataea, a woman, who was the concubine of Pharandates a Persian, son of Teaspis, deserting from the enemy, came to them. She, learning that the Persians were ruined and the Greeks victorious, decked herself (as did also her attendants) with many gold ornaments and the fairest clothing that she had, and alighting thus from her carriage came to the Lacedaemonians while they were still in the midst of slaughtering. When she saw Pausanias, whose name and country she had often heard of, directing everything, she knew that it was he, and supplicated him clasping his knees: [2] Save me, your suppliant, O king of Sparta, from captive slavery, for you have aided me till now, by making an end of those men who hold sacred nothing of the gods or of any divinities. Coan I am by birth, the daughter of Hegetorides, son of Antagoras; in Cos the Persian seized me by force and held me prisoner. [3] Take heart, lady, Pausanias answered, for you are my suppliant, and furthermore if you are really the daughter of Hegetorides of Cos, he is my closest friend of all who dwell in those lands. For the present, he then entrusted her to those of the ephors who were present. Later he sent her to Aegina, where she herself desired to go.","places":[{"placeId":"541063","name":"Plataea","startOffset":62,"endOffset":69},{"placeId":"geonames-130758","name":"Persian","startOffset":119,"endOffset":126},{"placeId":"geonames-130758","name":"Persians","startOffset":207,"endOffset":215},{"placeId":"570406","name":"Lacedaemonians","startOffset":412,"endOffset":426},{"placeId":"570685","name":"Sparta","startOffset":677,"endOffset":683},{"placeId":"geonames-130758","name":"Persian","startOffset":905,"endOffset":912}]},{"id":77,"text":"Immediately after the arrival of this woman, the men of Mantinea came when everything was already over. Upon learning that they had come too late for the battle, they were extremely upset and said that they ought to punish themselves for that. [2] When they heard that those Medes with Artabazus were fleeing, they would have pursued them as far as Thessaly. The Lacedaemonians, however, would not permit them to pursue the fleeing men. [3] So when they returned to their own land, the Mantineans banished the leaders of their army from the country. After the Mantineans came the men of Elis, who also went away extremely upset, and after their departure, they too banished their leaders. Such were the doings of the Mantineans and Eleans.","places":[{"placeId":"1332","name":"Thessaly","startOffset":349,"endOffset":357},{"placeId":"570406","name":"Lacedaemonians","startOffset":363,"endOffset":377}]},{"id":78,"text":"There was at Plataea in the army of the Aeginetans one Lampon, son of Pytheas, a leading man of Aegina. He hastened to Pausanias with really outrageous counsel and coming upon him, said to him: [2] son of Cleombrotus, you have done a deed of surpassing greatness and glory; the god has granted to you in saving Hellas to have won greater renown than any Greek whom we know. But now you must finish what remains for the rest, so that your fame may be greater still and so that no barbarian will hereafter begin doing reckless deeds against the Greeks. [3] When Leonidas was killed at Thermopylae, Mardonius and Xerxes cut off his head and set it on a pole; make them a like return, and you will win praise from all Spartans and the rest of Hellas besides. For if you impale Mardonius, you will be avenged for your father's brother Leonidas.","places":[{"placeId":"541063","name":"Plataea","startOffset":13,"endOffset":20},{"placeId":"570685","name":"Spartans","startOffset":715,"endOffset":723}]},{"id":79,"text":"This is what Lampon, thinking to please, said. Pausanias, however, answered him as follows: Aeginetan, I thank you for your goodwill and forethought, but you have missed the mark of right judgment. First you exalt me and my fatherland and my deeds, yet next you cast me down to mere nothingness when you advise me to insult the dead, and say that I shall win more praise if I do so. That would be an act more proper for barbarians than for Greeks and one that we consider worthy of censure even in barbarians. [2] No, as for myself, I would prefer to find no favor either with the people of Aegina or anyone else who is pleased by such acts. It is enough for me if I please the Spartans by righteous deeds and speech. As for Leonidas, whom you would have me avenge, I think that he has received a full measure of vengeance; the uncounted souls of these that you see have done honor to him and the rest of those who died at Thermopylae. But to you this is my warning: do not come again to me with words like these nor give me such counsel. Be thankful now that you go unpunished.","places":[{"placeId":"570685","name":"Spartans","startOffset":679,"endOffset":687}]},{"id":80,"text":"With that Lampon departed. Then Pausanias made a proclamation that no man should touch the spoils, and ordered the helots to gather all the stuff together. They, spreading all over the camp, found there tents adorned with gold and silver, and couches gilded and silver-plated, and golden bowls and cups and other drinking-vessels; [2] and sacks they found on wagons, in which were seen cauldrons of gold and silver. They stripped from the dead who lay there their armlets and torques, and golden daggers; as for the embroidered clothing, it was disregarded. [3] Much of all this the helots showed, as much as they could not conceal, but much they stole and sold to the Aeginetans. As a result the Aeginetans laid the foundation of their great fortunes by buying gold from the helots as though it were bronze.","places":[]},{"id":81,"text":"Having brought all the loot together, they set apart a tithe for the god of Delphi. From this was made and dedicated that tripod which rests upon the bronze three-headed serpent,29 nearest to the altar; another they set apart for the god of Olympia, from which was made and dedicated a bronze figure of Zeus, ten cubits high; and another for the god of the Isthmus, from which was fashioned a bronze Poseidon seven cubits high. When they had set all this apart, they divided what remained, and each received, according to his worth, concubines of the Persians and gold and silver, and all the rest of the stuff and the beasts of burden. [2] How much was set apart and given to those who had fought best at Plataea, no man says. I think that they also received gifts, but tenfold of every kind, women, horses, talents, camels, and all other things also, was set apart and given to Pausanias.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":551,"endOffset":559},{"placeId":"541063","name":"Plataea","startOffset":706,"endOffset":713}]},{"id":82,"text":"This other story is also told. When Xerxes fled from Hellas, he left to Mardonius his own establishment. Pausanias, seeing Mardonius' establishment with its display of gold and silver and gaily colored tapestry, ordered the bakers and the cooks to prepare a dinner such as they were accustomed to do for Mardonius. [2] They did his bidding, but Pausanias, when he saw golden and silver couches richly covered, and tables of gold and silver, and all the magnificent service of the banquet, was amazed at the splendor before him, and for a joke commanded his own servants to prepare a dinner in Laconian fashion. When that meal, so different from the other, was ready, Pausanias burst out laughing and sent for the generals of the Greeks. [3] When these had assembled, Pausanias pointed to the manner in which each dinner was served and said: Men of Hellas, I have brought you here because I desired to show you the foolishness of the leader of the Medes who, with such provisions for life as you see, came here to take away from us our possessions which are so pitiful. In this way, it is said, Pausanias spoke to the generals of the Greeks.","places":[]},{"id":83,"text":"Long after these events many of the Plataeans also found chests full of gold and silver and other things. [2] Moreover, when their bodies (which the Plataeans gathered into one place) were laid bare of flesh, a skull was found of which the bone was all of one piece without suture. A jawbone also came to light in which the teeth of the upper jaw were one whole, a single bone, front teeth and grinders, and one could see the body of a man of five cubits stature.","places":[{"placeId":"541063","name":"Plataeans","startOffset":36,"endOffset":45},{"placeId":"541063","name":"Plataeans","startOffset":149,"endOffset":158}]},{"id":84,"text":"As for the body of Mardonius, it was removed on the day after the battle; by whom, I cannot with certainty say. I have, however, heard of very many countries that buried Mardonius, and I know of many that were richly rewarded for that act by Mardonius' son Artontes. [2] Which of them it was that stole and buried the body of Mardonius I cannot learn for certain. Some report that it was buried by Dionysophanes, an Ephesian. Such was the manner of Mardonius' burial.","places":[]},{"id":85,"text":"But the Greeks, when they had divided the spoils at Plataea, buried each contingent of their dead in a separate place. The Lacedaemonians made three tombs; there they buried their irens,30 among whom were Posidonius, Amompharetus, Philocyon, and Callicrates. [2] In one of the tombs, then, were the irens, in the second the rest of the Spartans, and in the third the helots. This, then is how the Lacedaemonians buried their dead. The Tegeans, however, buried all theirs together in a place apart, and the Athenians did similarly with their own dead. So too did the Megarians and Phliasians with those who had been killed by the horsemen. [3] All the tombs of these peoples were filled with dead; but as for the rest of the states whose tombs are to be seen at Plataeae, their tombs are but empty barrows that they built for the sake of men that should come after, because they were ashamed to have been absent from the battle. There is one there called the tomb of the Aeginetans, which, as I learn by inquiry, was built as late as ten years after, at the Aeginetans' desire, by their patron and protector Cleades son of Autodicus, a Plataean.","places":[{"placeId":"541063","name":"Plataea","startOffset":52,"endOffset":59},{"placeId":"570406","name":"Lacedaemonians","startOffset":123,"endOffset":137},{"placeId":"570685","name":"Spartans","startOffset":340,"endOffset":348},{"placeId":"570406","name":"Lacedaemonians","startOffset":401,"endOffset":415},{"placeId":"579885","name":"Athenians","startOffset":510,"endOffset":519},{"placeId":"541063","name":"Plataea","startOffset":765,"endOffset":772},{"placeId":"541063","name":"Plataean","startOffset":1139,"endOffset":1147}]},{"id":86,"text":"As soon as the Greeks had buried their dead at Plataea, they resolved in council that they would march against Thebes and demand surrender of those who had taken the Persian sideparticularly of Timagenidas and Attaginus, who were chief among their foremost men. If these men were not delivered to them, they would not withdraw from the area in front of the city till they had taken it. [2] They came with this purpose on the eleventh day after the battle and laid siege to the Thebans, demanding the surrender of the men. When the Thebans refused this surrender, they laid waste to their lands and assaulted the walls.","places":[{"placeId":"541063","name":"Plataea","startOffset":47,"endOffset":54},{"placeId":"geonames-130758","name":"Persian","startOffset":166,"endOffset":173},{"placeId":"541138","name":"Thebans","startOffset":478,"endOffset":485},{"placeId":"541138","name":"Thebans","startOffset":532,"endOffset":539}]},{"id":87,"text":"Seeing that the Greeks would not cease from their harrying and nineteen days had passed, Timagenidas spoke as follows to the Thebans: Men of Thebes, since the Greeks have resolved that they will not raise the siege till Thebes is taken or we are delivered to them, do not let the land of Boeotia increase the measure of its ills for our sake. [2] No, rather if it is money they desire and their demand for our surrender is but a pretext, let us give them money out of our common treasury (for it was by the common will and not ours alone that we took the Persian side). If, however, they are besieging the town for no other reason than to have us, then we will give ourselves up to be tried by them. This seemed to be said well and at the right time, and the Thebans immediately sent a herald to Pausanias, offering to surrender the men.","places":[{"placeId":"541138","name":"Thebans","startOffset":125,"endOffset":132},{"placeId":"540689","name":"Boeotia","startOffset":289,"endOffset":296},{"placeId":"geonames-130758","name":"Persian","startOffset":556,"endOffset":563},{"placeId":"541138","name":"Thebans","startOffset":761,"endOffset":768}]},{"id":88,"text":"On these terms they made an agreement, but Attaginus escaped from the town. His sons were seized, but Pausanias held them free of guilt, saying that the sons were not accessory to the treason. As for the rest of the men whom the Thebans surrendered, they supposed that they would be put on trial, and were confident that they would defeat the impeachment by bribery. Pausanias, however, had that very suspicion of them, and when they were put into his hands he sent away the whole allied army and carried the men to Corinth, where he put them to death. This is what happened at Plataea and Thebes.","places":[{"placeId":"541138","name":"Thebans","startOffset":229,"endOffset":236},{"placeId":"541063","name":"Plataea","startOffset":578,"endOffset":585}]},{"id":89,"text":"Artabazus the son of Pharnaces was by now far on his way in his flight from Plataea. The Thessalians, when he came among them, entertained him hospitably and inquired of him concerning the rest of the army, knowing nothing of what had happened at Plataea. [2] Artabazus understood that if he told them the whole truth about the fighting, he would endanger his own life and the lives of all those with him, for he thought that every man would set upon him if they heard the story. Therefore, although he had revealed nothing to the Phocians, he spoke as follows to the Thessalians: [3] I myself, men of Thessaly, am pressing on with all speed and diligence to march into Thrace, being despatched from the army for a certain purpose with the men whom you see. Mardonius and his army are expected marching close on my heels. It is for you to entertain him, and show that you do him good service, for if you so do, you will not afterwards regret it. [4] So saying, he used all diligence to lead his army away straight towards Thrace through Thessaly and Macedonia without any delay, following the shortest inland road. So he came to Byzantium, but he left behind many of his army who had been cut down by the Thracians or overcome by hunger and weariness. From Byzantium he crossed over in boats. In such a way Artabazus returned to Asia.","places":[{"placeId":"541063","name":"Plataea","startOffset":76,"endOffset":83},{"placeId":"541063","name":"Plataea","startOffset":247,"endOffset":254},{"placeId":"1332","name":"Thessaly","startOffset":603,"endOffset":611},{"placeId":"1332","name":"Thessaly","startOffset":1039,"endOffset":1047}]},{"id":90,"text":"Now on the same day when the Persians were so stricken at Plataea, it so happened that they suffered a similar fate at Mykale in Ionia. When the Greeks who had come in their ships with Leutychides the Lacedaemonian were encamped at Delos, certain messengers came to them there from Samos, Lampon of Thrasycles, Athenagoras son of Archestratides, and Hegesistratus son of Aristagoras. The Samians had sent these, keeping their despatch secret from the Persians and the tyrant Theomestor son of Androdamas, whom the Persians had made tyrant of Samos. [2] When they came before the generals, Hegesistratus spoke long and vehemently: If the Ionians but see you, he said, they will revolt from the Persians, and the barbarians will not remain; but if they do remain, you will have such a prey as never again.  He begged them in the name of the gods of their common worship to deliver Greeks from slavery and drive the barbarian away. [3] That, he said, would be an easy matter for them, for the Persian ships are unseaworthy and no match for yours; and if you have any suspicion that we may be tempting you deceitfully, we are ready to be taken in your ships as hostages.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":29,"endOffset":37},{"placeId":"541063","name":"Plataea","startOffset":58,"endOffset":65},{"placeId":"geonames-130758","name":"Persians","startOffset":451,"endOffset":459},{"placeId":"geonames-130758","name":"Persians","startOffset":514,"endOffset":522},{"placeId":"geonames-130758","name":"Persians","startOffset":696,"endOffset":704},{"placeId":"geonames-130758","name":"Persian","startOffset":995,"endOffset":1002}]},{"id":91,"text":"As the Samian stranger was pleading so earnestly, Leutychides asked him (whether it was that he desired to know for the sake of a presage, or through some happy chance of a god), Samian stranger, what is your name? Hegesistratus,31 he replied. [2] Then Leutychides cut short whatever else Hegesistratus had begun to say, and cried: I accept the omen of your name, Samian stranger; now see to it that before you sail from here you and those who are with you pledge that the Samians will be our zealous allies.","places":[]},{"id":92,"text":"He said this and added deed to word. For straightway the Samians bound themselves by pledge and oath to alliance with the Greeks. [2] This done, the rest sailed away, but Leutychides bade Hegesistratus to sail with the Greeks because of the good omen of his name. The Greeks waited through that day, and on the next they sought and received favorable augury; their diviner was Deiphonus son of Evenius, a man of that Apollonia which is in the Ionian gulf. This man's father Evenius had once fared as I will now relate.","places":[]},{"id":93,"text":"There is at Apollonia a certain flock sacred to the Sun, which in the daytime is pastured beside the river Chon, which flows from the mountain called Lacmon through the lands of Apollonia and empties into the sea by the harbor of Oricum. By night, those townsmen who are most notable for wealth or lineage are chosen to watch it, each man serving for a year, for the people of Apollonia set great store by this flock, being so taught by a certain oracle. It is kept in a cave far distant from the town. [2] Now at the time of which I speak, Evenius was the chosen watchman. But one night he fell asleep, and wolves, coming past his guard into the cave, killed about sixty of the flock. When Evenius was aware of it, he held his peace and told no man, intending to restore what was lost by buying others. [3] This matter was not, however, hidden from the people of Apollonia, and when it came to their knowledge they brought him to judgment and condemned him to lose his eyesight for sleeping at his watch. So they blinded Evenius, but from the day of their so doing their flocks bore no offspring, nor did their land yield fruit as before. [4] Furthermore, a declaration was given to them at Dodona and Delphi, when they inquired of the prophets what might be the cause of their present ill: the gods told them by their prophets that they had done unjustly in blinding Evenius, the guardian of the sacred flock, for we ourselves (they said) sent those wolves, and we will not cease from avenging him until you make him such restitution for what you did as he himself chooses and approves; when that is fully done, we ourselves will give Evenius such a gift as will make many men consider him happy.","places":[]},{"id":94,"text":"This was the oracle given to the people of Apollonia. They kept it secret and charged certain of their townsmen to carry the business through; they acted as I will now show. Coming and sitting down by Evenius at the place where he sat, they spoke of other matters, till at last they fell to commiserating his misfortune. Guiding the conversation in this way, they asked him what compensation he would choose, if the people of Apollonia should promise to requite him for what they had done. [2] He, knowing nothing of the oracle, said he would choose for a gift the lands of certain named townsmen whom he thought to have the two fairest estates in Apollonia, and a house besides which he knew to be the fairest in the town; let him (he said) have possession of these, and he would lay aside his anger, and be satisfied with that by way of restitution. [3] So he said this, and those who were sitting beside him said in reply: Evenius, the people of Apollonia hereby make you that restitution for the loss of your sight, obeying the oracle given to them. At that he was very angry, for he learned through this the whole story and saw that they had cheated him. They did, however, buy from the possessors and give him what he had chosen, and from that day he had a natural gift of divination, through which he won fame.","places":[]},{"id":95,"text":"Deiphonus, the son of this Evenius, had been brought by the Corinthians, and was the army's prophet. But I have heard it said before now, that Deiphonus was not the son of Evenius, but made a wrongful use of that name and worked for wages up and down Hellas.","places":[{"placeId":"570182","name":"Corinthians","startOffset":60,"endOffset":71}]},{"id":96,"text":"Having won favorable omens, the Greeks put out to sea from Delos for Samos. When they were now near Calamisa in the Samian territory, they anchored there near the temple of Hera which is in those parts, and prepared for a sea-fight. The Persians, learning of their approach, also put out to sea and made for the mainland with all their ships save the Phoenicians, whom they sent sailing away. It was determined by them in council that they would not do battle by sea, [2] for they thought themselves overmatched; the reason of their making for the mainland was that they might be under the shelter of their army at Mykale, which had been left by Xerxes' command behind the rest of his host to hold Ionia. There were sixty thousand men in it, and Tigranes, the noblest and tallest man in Persia, was their general. [3] It was the design of the Persian admirals to flee to the shelter of that army, and there to beach their ships and build a fence round them which should be a protection for the ship and a refuge for themselves.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":237,"endOffset":245},{"placeId":"geonames-130758","name":"Persian","startOffset":843,"endOffset":850}]},{"id":97,"text":"With this design they put to sea. So when they came past the temple of the Goddesses32 at Mykale to the Gaeson and Scolopois,33 where there is a temple of Eleusinian Demeter (which was built by Philistus son of Pasicles when he went with Nileus son of Codrus to the founding of Miletus), they beached their ships and fenced them round with stones and the trunks of orchard trees which they cut down; they drove in stakes around the fence and prepared for siege or victory, making ready, after consideration, for either event.","places":[]},{"id":98,"text":"When the Greeks learned that the barbarians had gone off to the mainland, they were not all pleased that their enemy had escaped them, and did not know whether to return back or set sail for the Hellespont. At last they resolved that they would do neither, but sail to the mainland. [2] Equipping themselves for this with gangways and everything else necessary for a sea-fight, they held their course for Mykale. When they approached the camp, no one put out to meet them. Seeing the ships beached within the wall and a great host of men drawn up in array along the strand, Leutychides first sailed along in his ship, keeping as near to the shore as he could, and made this proclamation to the Ionians by the voice of a herald: [3] Men of Ionia, you who hear us, understand what I say, for by no means will the Persians understand anything I charge you with when we join battle; first of all it is right for each man to remember his freedom and next the battle-cry Hebe: and let him who hears me tell him who has not heard it. [4] The purpose of this act was the same as Themsitocles' purpose at Artemisium;34 either the message would be unknown to the barbarians and would prevail with the Ionians, or if it were thereafter reported to the barbarians, it would cause them to mistrust their Greek allies.","places":[{"placeId":"501434","name":"Hellespont","startOffset":195,"endOffset":205},{"placeId":"geonames-130758","name":"Persians","startOffset":812,"endOffset":820}]},{"id":99,"text":"After this counsel of Leutychides, the Greeks brought their ships to land and disembarked on the beach, where they formed a battle column. But the Persians, seeing the Greeks prepare for battle and exhort the Ionians, first of all took away the Samians' armor, suspecting that they would aid the Greeks; [2] for indeed when the barbarian's ships brought certain Athenian captives, who had been left in Attica and taken by Xerxes' army, the Samians had set them all free and sent them away to Athens with provisions for the journey; for this reason in particular they were held suspect, as having set free five hundred souls of Xerxes' enemies. [3] Furthermore, they appointed the Milesians to guard the passes leading to the heights of Mykale, alleging that they were best acquainted with the country. Their true reason, however, for so doing was that the Milesians should be separate from the rest of their army. In such a manner the Persians safeguarded themselves from those Ionians who (they supposed) might turn against them if opportunity were given for themselves: they set their shields close to make a barricade.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":147,"endOffset":155},{"placeId":"579888","name":"Attica","startOffset":402,"endOffset":408},{"placeId":"579885","name":"Athens","startOffset":492,"endOffset":498},{"placeId":"geonames-130758","name":"Persians","startOffset":935,"endOffset":943}]},{"id":100,"text":"The Greeks, having made all their preparations advanced their line against the barbarians. As they went, a rumor spread through the army, and a herald's wand was seen lying by the water-line. The rumor that ran was to the effect that the Greeks were victors over Mardonius' army at a battle in Boeotia. [2] Now there are many clear indications of the divine ordering of things, seeing that a message, which greatly heartened the army and made it ready to face danger, arrived amongst the Greeks the very day on which the Persians' disaster at Plataea and that other which was to befall them at Mykale took place.","places":[{"placeId":"540689","name":"Boeotia","startOffset":294,"endOffset":301},{"placeId":"geonames-130758","name":"Persians","startOffset":521,"endOffset":529},{"placeId":"541063","name":"Plataea","startOffset":543,"endOffset":550}]},{"id":101,"text":"Moreover, there was the additional coincidence, that there were precincts of Eleusinian Demeter on both battlefields; for at Plataea the fight was near the temple of Demeter, as I have already said, and so it was to be at Mykale also. [2] It happened that the rumor of a victory won by the Greeks with Pausanias was true, for the defeat at Plataea happened while it was yet early in the day, and the defeat of Mykale in the afternoon. That the two fell on the same day of the same month was proven to the Greeks when they examined the matter not long afterwards. [3] Now before this rumor came they had been faint-hearted, fearing less for themselves than for the Greeks with Pausanias, that Hellas should stumble over Mardonius. But when the report sped among them, they grew stronger and swifter in their onset. So Greeks and barbarians alike were eager for battle, seeing that the islands and the Hellespont were the prizes of victory.","places":[{"placeId":"541063","name":"Plataea","startOffset":125,"endOffset":132},{"placeId":"541063","name":"Plataea","startOffset":340,"endOffset":347},{"placeId":"501434","name":"Hellespont","startOffset":900,"endOffset":910}]},{"id":102,"text":"As for the Athenians and those whose place was nearest them, that is, for about half of the line, their way lay over the beach and level ground; for the Lacedaemonians and those that were next to them, their way lay through a ravine and among hills. While the Lacedaemonians were making a circuit, those others on the other wing were already fighting. [2] As long as the Persians' shields stood upright, they defended themselves and held their own in the battle, but when the Athenians and their neighbors in the line passed the word and went more zealously to work, that they and not the Lacedaemonians might win the victory, immediately the face of the fight changed. [3] Breaking down the shields they charged all together into the midst of the Persians, who received the onset and stood their ground for a long time, but at last fled within their wall. The Athenians and Corinthians and Sicyonians and Troezenians, who were next to each other in the line, followed close after and rushed in together. But when the walled place had been razed, the barbarians made no further defense, but took to flight, all save the Persians, [4] who gathered into bands of a few men and fought with whatever Greeks came rushing within the walls. Of the Persian leaders two escaped by flight and two were killed; Artayntes and Ithanitres, who were admirals of the fleet, escaped; Mardontes and Tigranes, the general of the land army, were killed fighting.","places":[{"placeId":"579885","name":"Athenians","startOffset":11,"endOffset":20},{"placeId":"570406","name":"Lacedaemonians","startOffset":153,"endOffset":167},{"placeId":"570406","name":"Lacedaemonians","startOffset":260,"endOffset":274},{"placeId":"geonames-130758","name":"Persians","startOffset":371,"endOffset":379},{"placeId":"579885","name":"Athenians","startOffset":476,"endOffset":485},{"placeId":"570406","name":"Lacedaemonians","startOffset":589,"endOffset":603},{"placeId":"geonames-130758","name":"Persians","startOffset":748,"endOffset":756},{"placeId":"579885","name":"Athenians","startOffset":861,"endOffset":870},{"placeId":"570182","name":"Corinthians","startOffset":875,"endOffset":886},{"placeId":"geonames-130758","name":"Persians","startOffset":1120,"endOffset":1128},{"placeId":"geonames-130758","name":"Persian","startOffset":1241,"endOffset":1248}]},{"id":103,"text":"While the Persians still fought, the Lacedaemonians and their comrades came up and finished what was left of the business. The Greeks too lost many men there, notably the men of Sicyon and their general Perilaus. [2] As for the Samians who served in the Median army and had been disarmed, they, seeing from the first that victory hung in the balance,35 did what they could in their desire to aid the Greeks. When the other Ionians saw the Samians set the example, they also abandoned the Persians and attacked the foreigners.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":10,"endOffset":18},{"placeId":"570406","name":"Lacedaemonians","startOffset":37,"endOffset":51},{"placeId":"geonames-130758","name":"Persians","startOffset":488,"endOffset":496}]},{"id":104,"text":"The Persians had for their own safety appointed the Milesians to watch the passes, so that if anything should happen to the Persian army such as did happen to it, they might have guides to bring them safely to the heights of Mykale. This was the task to which the Milesians were appointed for the reason mentioned above and so that they might not be present with the army and so turn against it. They acted wholly contrary to the charge laid upon them; they misguided the fleeing Persians by ways that led them among their enemies, and at last they themselves became their worst enemies and killed them. In this way Ionia revolted for the second time from the Persians.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":4,"endOffset":12},{"placeId":"geonames-130758","name":"Persian","startOffset":124,"endOffset":131},{"placeId":"geonames-130758","name":"Persians","startOffset":480,"endOffset":488},{"placeId":"geonames-130758","name":"Persians","startOffset":660,"endOffset":668}]},{"id":105,"text":"In that battle those of the Greeks who fought best were the Athenians, and the Athenian who fought best was one who practised the pancratium,36 Hermolycus son of Euthoenus. This Hermolycus on a later day met his death in a battle at Cyrnus in Carystus during a war between the Athenians and Carystians, and lay dead on Geraestus. Those who fought best after the Athenians were the men of Corinth and Troezen and Sicyon.","places":[{"placeId":"579885","name":"Athenians","startOffset":60,"endOffset":69},{"placeId":"579885","name":"Athenians","startOffset":277,"endOffset":286},{"placeId":"579885","name":"Athenians","startOffset":362,"endOffset":371}]},{"id":106,"text":"When the Greeks had made an end of most of the barbarians, either in battle or in flight, they brought out their booty onto the beach, and found certain stores of wealth. Then after burning the ships and the whole of the wall, they sailed away. [2] When they had arrived at Samos, they debated in council over the removal of all Greeks from Ionia, and in what Greek lands under their dominion it would be best to plant the Ionians, leaving the country itself to the barbarians; for it seemed impossible to stand on guard between the Ionians and their enemies forever. If, however, they should not so stand, they had no hope that the Persians would permit the Ionians to go unpunished. [3] In this matter the Peloponnesians who were in charge were for removing the people from the lands of those Greek nations which had sided with the Persians and giving their land to the Ionians to dwell in. The Athenians disliked the whole plan of removing the Greeks from Ionia, or allowing the Peloponnesians to determine the lot of Athenian colonies, and as they resisted vehemently, the Peloponnesians yielded. [4] It accordingly came about that they admitted to their alliance the Samians, Chians, Lesbians, and all other islanders who had served with their forces, and bound them by pledge and oaths to remain faithful and not desert their allies. When the oaths had been sworn, the Greeks set sail to break the bridges, supposing that these still held fast. So they laid their course for the Hellespont.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":633,"endOffset":641},{"placeId":"570577","name":"Peloponnesians","startOffset":708,"endOffset":722},{"placeId":"geonames-130758","name":"Persians","startOffset":834,"endOffset":842},{"placeId":"579885","name":"Athenians","startOffset":897,"endOffset":906},{"placeId":"570577","name":"Peloponnesians","startOffset":982,"endOffset":996},{"placeId":"570577","name":"Peloponnesians","startOffset":1077,"endOffset":1091}]},{"id":107,"text":"The few barbarians who escaped were driven to the heights of Mykale, and made their way from there to Sardis. While they were making their way along the road, Masistes son of Darius, who happened to have been present at the Persian disaster, reviled the admiral Artayntes very bitterly, telling him (with much beside) that such generalship as his proved him worse than a woman, and that no punishment was too severe for the harm he had done the king's estate. Now it is the greatest of all taunts in Persia to be called worse than a woman. [2] These many insults angered Artayntes so much that he drew his sword upon Masistes to kill him, but Xenagoras son of Praxilaus of Halicarnassus, who stood behind Artayntes himself saw him run at Masistes, and caught him round the middle and lifted and hurled him to the ground. In the meantime Masistes' guards had also come between them. [3] By doing so Xenagoras won the gratitude of Masistes himself and Xerxes, for saving the king's brother. For this deed he was made ruler of all Cilicia by the king's gift. Then they went on their way without anything further happening and came to Sardis.","places":[{"placeId":"hestia-sardis","name":"Sardis","startOffset":102,"endOffset":108},{"placeId":"geonames-130758","name":"Persian","startOffset":224,"endOffset":231},{"placeId":"hestia-sardis","name":"Sardis","startOffset":1131,"endOffset":1137}]},{"id":108,"text":"Now it happened that the king had been at Sardis ever since he came there in flight from Athens after his overthrow in the sea-fight. Being then at Sardis he became enamored of Masistes' wife, who was also there. But as all his messages could not bring her to yield to him, and he would not force her to his will, out of regard for his brother Masistes (which indeed counted with the woman also, for she knew well that no force would be used against her), Xerxes found no other way to accomplish his purpose than that he should make a marriage between his own son Darius and the daughter of this woman and Masistes, for he thought that by doing so he would be most likely to win her. [2] So he betrothed them with all due ceremony and rode away to Susa. But when he had come and had taken Darius' bride into his house, he thought no more of Masistes' wife, but changed his mind and wooed and won this girl Artaynte, Darius' wife and Masistes' daughter.","places":[{"placeId":"hestia-sardis","name":"Sardis","startOffset":42,"endOffset":48},{"placeId":"579885","name":"Athens","startOffset":89,"endOffset":95},{"placeId":"hestia-sardis","name":"Sardis","startOffset":148,"endOffset":154}]},{"id":109,"text":"As time went on, however, the truth came to light, and in such manner as I will show. Xerxes' wife, Amestris, wove and gave to him a great gaily-colored mantle, marvellous to see. Xerxes was pleased with it, and went to Artaynte wearing it. [2] Being pleased with her too, he asked her what she wanted in return for her favors, for he would deny nothing at her asking. Thereuponfor she and all her house were doomed to evilshe said to Xerxes, Will you give me whatever I ask of you? He promised this, supposing that she would ask anything but that; when he had sworn, she asked boldly for his mantle. [3] Xerxes tried to refuse her, for no reason except that he feared that Amestris might have clear proof of his doing what she already guessed. He accordingly offered her cities instead and gold in abundance and an army for none but herself to command. Armies are the most suitable of gifts in Persia. But as he could not move her, he gave her the mantle; and she, rejoicing greatly in the gift, went flaunting her finery.","places":[]},{"id":110,"text":"Amestris heard that she had the mantle, but when she learned the truth, it was not the girl with whom she was angry. She supposed rather that the girl's mother was guilty and that this was her doing, and so it was Masistes' wife whom she plotted to destroy. [2] She waited therefore till Xerxes her husband should be giving his royal feast. This banquet is served once a year, on the king's birthday; the Persian name for it is tukta, which is in the Greek language perfect. On that day (and none other) the king anoints his head and makes gifts to the Persians. Waiting for that day, Amestris then asked of Xerxes that Masistes' wife should be given to her. [3] Xerxes considered it a terrible and wicked act to give up his brother's wife, and that too when she was innocent of the deed; for he knew the purpose of the request.","places":[{"placeId":"geonames-130758","name":"Persian","startOffset":405,"endOffset":412},{"placeId":"geonames-130758","name":"Persians","startOffset":557,"endOffset":565}]},{"id":111,"text":"Nevertheless, since Amestris was insistent and the law compelled him (for at this royal banquet in Persia every request must of necessity be granted), he unwillingly consented, and delivered the woman to Amestris. Then, bidding her do what she wanted, he sent for his brother and spoke as follows: [2] Masistes, you are Darius' son and my brother, and a good man; hear me then. You must no longer live with her who is now your wife. I give you my daughter in her place. Take her for your own, but do away with the wife that you have, for it is not my will that you should have her. [3] At that Masistes was amazed; Sire, he said, what is this evil command that you lay upon me, telling me to deal with my wife in this way? I have by her young sons and daughters, of whom you have taken a wife for your own son, and I am very content with her herself. Yet you are asking me to get rid of my wife and wed your daughter? [4] Truly, O king, I consider it a great honor to be accounted worthy of your daughter, but I will do neither the one nor the other. No, rather, do not force me to consent to such a desire. You will find another husband for your daughter as good as I, but permit me to keep my own wife. [5] This was Masistes' response, but Xerxes was very angry and said: You have come to this pass, Masistes. I will give you no daughter of mine as a wife, nor will you any longer live with her whom you now have. In this way you will learn to accept that which is offered you. Hearing that, Masistes said No, sire, you have not destroyed me yet! and so departed.","places":[]},{"id":112,"text":"In the meantime, while Xerxes talked with his brother, Amestris sent for Xerxes' guards and treated Masistes' wife very cruelly; she cut off the woman's breasts and threw them to dogs, and her nose and ears and lips also, and cut out her tongue. Then she sent her home after she had undergone this dreadful ordeal.","places":[]},{"id":113,"text":"Knowing nothing of this as yet, but fearing evil, Masistes ran home. Seeing what had been done to his wife, he immediately took counsel with his children and set out for Bactra with his own sons (and others too), intending to raise the province of Bactra in revolt and do the king the greatest of harm. [2] This he would have done, to my thinking, had he escaped to the country of the Bactrians and Sacae. They were fond of him, and he was viceroy over the Bactrians. But it was of no use, for Xerxes learned what he intended and sent against him an army which killed him on his way, and his sons and his army. Such is the story of Xerxes' love and Masistes' death.","places":[]},{"id":114,"text":"The Greeks who had set out from Mykale for the Hellespont first anchored off Lectum37 having been stopped by contrary winds, and came from there to Abydos, where they found the bridges broken which they thought would still be in place; these were in fact the chief cause of their coming to the Hellespont. [2] The Peloponnesians then who were with Leutychides decided to sail away to Hellas, but the Athenians, with Xanthippus their general, that they would remain there and attack the Chersonesus. So the rest sailed away, but the Athenians crossed over to the Chersonesus and laid siege to Sestus.","places":[{"placeId":"570577","name":"Peloponnesians","startOffset":314,"endOffset":328},{"placeId":"579885","name":"Athenians","startOffset":400,"endOffset":409},{"placeId":"579885","name":"Athenians","startOffset":532,"endOffset":541}]},{"id":115,"text":"Now when the Persians heard that the Greeks were at the Hellespont, they had come in from the neighboring towns and assembled at this same Sestus, seeing that it was the strongest walled place in that region. Among them there was a Persian named Oeobazus from Cardia, and he had carried the equipment of the bridges there. Sestus was held38 by the Aeolians of the country, but with him were Persians and a great multitude of their allies.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":13,"endOffset":21},{"placeId":"geonames-130758","name":"Persian","startOffset":232,"endOffset":239},{"placeId":"geonames-130758","name":"Persians","startOffset":391,"endOffset":399}]},{"id":116,"text":"This province was ruled by Xerxes' viceroy Artayctes, a cunning man and a wicked one; witness the deceit that he practised on the king in his march to Athens, how he stole away from Elaeus the treasure of Protesilaus39 son of Iphiclus. [2] This was the way of it; there is at Elaeus in the Chersonesus the tomb of Protesilaus, and a precinct around it, which contained much treasure: vessels of gold and silver, bronze, clothing, and other dedications; all of which Artayctes carried off by the king's gift. [3] Sire, he said deceitfully to Xerxes, there is here the house of a certain Greek, who met a just death for invading your territory with an army; give me this man's house, so that all may be taught not to invade your territory. One would think that this plea would easily persuade Xerxes to give him a man's house, since the latter had no suspicion of Artayctes' meaning. His reason for saying that Protesilaus had invaded the king's territory was that the Persians believe all Asia to belong to themselves and whoever is their king. So when the treasure was given to him, he carried it away from Elaeus to Sestus, and planted and farmed the precinct. He would also come from Elaeus and have intercourse with women in the shrine. Now, when the Athenians laid siege to him, he had made no preparation for it; he did not think that the Greeks would come, and he had no way of escaping from their attack.","places":[{"placeId":"579885","name":"Athens","startOffset":151,"endOffset":157},{"placeId":"geonames-130758","name":"Persians","startOffset":971,"endOffset":979},{"placeId":"579885","name":"Athenians","startOffset":1258,"endOffset":1267}]},{"id":117,"text":"Since the siege continued into the late autumn, the Athenians grew weary of their absence from home and their lack of success at taking the fortress. They accordingly entreated their generals to lead them away again, but the generals refused to do that till they should take the place or be recalled by the Athenian state. At that the men endured their plight patiently.","places":[{"placeId":"579885","name":"Athenians","startOffset":52,"endOffset":61}]},{"id":118,"text":"But those who were within the walls were by now reduced to the last extremity, so much so that they boiled the thongs of their beds for food. At last, however, even these failed them, and Artayctes and Oeobazus and all the Persians made their way down from the back part of the fortress, where the fewest of their enemies were, and fled at nightfall. [2] When morning came, the people of the Chersonese signified from their towers to the Athenians what had happened, and opened their gates. The greater part of the Athenians then went in pursuit, while the rest stayed to hold the town.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":223,"endOffset":231},{"placeId":"579885","name":"Athenians","startOffset":438,"endOffset":447},{"placeId":"579885","name":"Athenians","startOffset":515,"endOffset":524}]},{"id":119,"text":"As Oeobazus was making his escape into Thrace, the Apsinthians of that country caught and sacrificed him in their customary manner to Plistorus the god of their land; as for his companions, they did away with them by other means. [2] Artayctes and his company had begun their flight later, and were overtaken a little way beyond the Goat's Rivers,40 where after they had defended themselves a long time, some of them were killed and the rest taken alive. The Greeks bound them and carried them to Sestus, and together with them Artayctes and his son also in bonds.","places":[]},{"id":120,"text":"It is related by the people of the Chersonese that a marvellous thing happened one of those who guarded Artayctes. He was frying dried fish, and these as they lay over the fire began to leap and writhe as though they had just been caught. [2] The rest gathered around, amazed at the sight, but when Artayctes saw this strange thing, he called the one who was frying the fish and said to him: Athenian, do not be afraid of this portent, for it is not to you that it has been sent; it is to me that Protesilaus of Elaeus is trying to signify that although he is dead and dry, he has power given him by the god to take vengeance on me, the one who wronged him. [3] Now therefore I offer a ransom, the sum of one hundred talents to the god for the treasure that I took from his temple. I will also pay to the Athenians two hundred talents for myself and my son, if they spare us. [4] But Xanthippus the general was unmoved by this promise, for the people of Elaeus desired that Artayctes should be put to death in revenge for Protesilaus, and the general himself was so inclined. So they carried Artayctes away to the headland where Xerxes had bridged the strait (or, by another story, to the hill above the town of Madytus), and there nailed him to boards and hanged him. As for his son, they stoned him to death before his father's eyes.","places":[{"placeId":"579885","name":"Athenians","startOffset":806,"endOffset":815}]},{"id":121,"text":"This done, they sailed away to Hellas, carrying with them the cables of the bridges to be dedicated in their temples, and all sorts of things in addition. This, then, is all that was done in this year.","places":[]},{"id":122,"text":"This Artayctes who was crucified was the grandson of that Artembares41 who instructed the Persians in a design which they took from him and laid before Cyrus; this was its purport: [2] Seeing that Zeus grants lordship to the Persian people, and to you, Cyrus, among them, let us, after reducing Astyages, depart from the little and rugged land which we possess and occupy one that is better. There are many such lands on our borders, and many further distant. If we take one of these, we will all have more reasons for renown. It is only reasonable that a ruling people should act in this way, for when will we have a better opportunity than now, when we are lords of so many men and of all Asia? [3] Cyrus heard them, and found nothing to marvel at in their design; Go ahead and do this, he said; but if you do so, be prepared no longer to be rulers but rather subjects. Soft lands breed soft men; wondrous fruits of the earth and valiant warriors grow not from the same soil. [4] The Persians now realized that Cyrus reasoned better than they, and they departed, choosing rather to be rulers on a barren mountain side than dwelling in tilled valleys to be slaves to others.","places":[{"placeId":"geonames-130758","name":"Persians","startOffset":90,"endOffset":98},{"placeId":"geonames-130758","name":"Persian","startOffset":226,"endOffset":233},{"placeId":"geonames-130758","name":"Persians","startOffset":992,"endOffset":1000}]}]`)}};function f0(){const B=pf(),Y=d0.places,N=B.pathname==="/"||B.pathname==="",U=B.pathname==="/about";return xe.jsxs("div",{className:"app-container",children:[xe.jsxs("header",{className:"app-header",children:[xe.jsx("h1",{children:xe.jsxs(Qr,{to:"/",style:{color:"inherit",textDecoration:"none"},children:["Hestia",xe.jsx("span",{children:"Viz"})," ",xe.jsx("span",{className:"redux-tag",children:"Redux"})]})}),xe.jsxs("nav",{className:"ui-text",children:[xe.jsx(Qr,{to:"/",className:N?"active":"",children:"Books"}),xe.jsx(Qr,{to:"/about",className:U?"active":"",children:"About"}),xe.jsx("a",{href:"https://pleiades.stoa.org/",target:"_blank",rel:"noopener noreferrer",children:"Pleiades"}),xe.jsx("a",{href:"https://recogito.pelagios.org/document/tjrrsqn4dwmgep",target:"_blank",rel:"noopener noreferrer",children:"Source"})]})]}),xe.jsx("main",{className:"main-content",children:xe.jsxs(Jb,{children:[xe.jsx(ip,{path:"/",element:xe.jsx(Kw,{booksIndex:Fm,placesData:Y})}),xe.jsx(ip,{path:"/about",element:xe.jsx(l0,{})}),xe.jsx(ip,{path:"/book/:bookId",element:xe.jsx(M1,{booksIndex:Fm,placesData:Y,bookTexts:L1})}),xe.jsx(ip,{path:"/book/:bookId/chapter/:chapterId",element:xe.jsx(M1,{booksIndex:Fm,placesData:Y,bookTexts:L1})}),xe.jsx(ip,{path:"/place/:placeId",element:xe.jsx(h0,{placesData:Y,booksIndex:Fm})})]})})]})}ab.createRoot(document.getElementById("root")).render(xe.jsx(gu.StrictMode,{children:xe.jsx(_w,{children:xe.jsx(f0,{})})}))})();
